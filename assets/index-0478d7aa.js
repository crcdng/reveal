function Ry(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function fb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Iy(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Fi={},au={};au.byteLength=Py;au.toByteArray=My;au.fromByteArray=By;var Qn=[],sn=[],Ty=typeof Uint8Array<"u"?Uint8Array:Array,El="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var lo=0,Oy=El.length;lo<Oy;++lo)Qn[lo]=El[lo],sn[El.charCodeAt(lo)]=lo;sn["-".charCodeAt(0)]=62;sn["_".charCodeAt(0)]=63;function ub(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Py(t){var e=ub(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Ny(t,e,r){return(e+r)*3/4-r}function My(t){var e,r=ub(t),n=r[0],i=r[1],s=new Ty(Ny(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=sn[t.charCodeAt(c)]<<18|sn[t.charCodeAt(c+1)]<<12|sn[t.charCodeAt(c+2)]<<6|sn[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=sn[t.charCodeAt(c)]<<2|sn[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=sn[t.charCodeAt(c)]<<10|sn[t.charCodeAt(c+1)]<<4|sn[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Ly(t){return Qn[t>>18&63]+Qn[t>>12&63]+Qn[t>>6&63]+Qn[t&63]}function Cy(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Ly(n));return i.join("")}function By(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Cy(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Qn[e>>2]+Qn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Qn[e>>10]+Qn[e>>4&63]+Qn[e<<2&63]+"=")),i.join("")}var Dh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Dh.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,d=r?i-1:0,I=r?-1:1,P=t[e+d];for(d+=I,s=P&(1<<-f)-1,P>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=I,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+d],d+=I,f-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(P?-1:1)*o*Math.pow(2,s-n)};Dh.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,f=(1<<l)-1,d=f>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,L=n?1:-1,H=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=I/c:e+=I*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+P]=a&255,P+=L,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+P]=o&255,P+=L,o/=256,l-=8);t[r+P-L]|=H*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=au,r=Dh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const M=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(M,A),M.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(M){if(M>i)throw new RangeError('The value "'+M+'" is invalid for option "size"');const A=new Uint8Array(M);return Object.setPrototypeOf(A,a.prototype),A}function a(M,A,R){if(typeof M=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(M)}return c(M,A,R)}a.poolSize=8192;function c(M,A,R){if(typeof M=="string")return I(M,A);if(ArrayBuffer.isView(M))return L(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(ge(M,ArrayBuffer)||M&&ge(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(M,SharedArrayBuffer)||M&&ge(M.buffer,SharedArrayBuffer)))return H(M,A,R);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=M.valueOf&&M.valueOf();if(D!=null&&D!==M)return a.from(D,A,R);const $=q(M);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return a.from(M[Symbol.toPrimitive]("string"),A,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}a.from=function(M,A,R){return c(M,A,R)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function f(M,A,R){return l(M),M<=0?o(M):A!==void 0?typeof R=="string"?o(M).fill(A,R):o(M).fill(A):o(M)}a.alloc=function(M,A,R){return f(M,A,R)};function d(M){return l(M),o(M<0?0:G(M)|0)}a.allocUnsafe=function(M){return d(M)},a.allocUnsafeSlow=function(M){return d(M)};function I(M,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const R=V(M,A)|0;let D=o(R);const $=D.write(M,A);return $!==R&&(D=D.slice(0,$)),D}function P(M){const A=M.length<0?0:G(M.length)|0,R=o(A);for(let D=0;D<A;D+=1)R[D]=M[D]&255;return R}function L(M){if(ge(M,Uint8Array)){const A=new Uint8Array(M);return H(A.buffer,A.byteOffset,A.byteLength)}return P(M)}function H(M,A,R){if(A<0||M.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<A+(R||0))throw new RangeError('"length" is outside of buffer bounds');let D;return A===void 0&&R===void 0?D=new Uint8Array(M):R===void 0?D=new Uint8Array(M,A):D=new Uint8Array(M,A,R),Object.setPrototypeOf(D,a.prototype),D}function q(M){if(a.isBuffer(M)){const A=G(M.length)|0,R=o(A);return R.length===0||M.copy(R,0,0,A),R}if(M.length!==void 0)return typeof M.length!="number"||Oe(M.length)?o(0):P(M);if(M.type==="Buffer"&&Array.isArray(M.data))return P(M.data)}function G(M){if(M>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return M|0}function C(M){return+M!=M&&(M=0),a.alloc(+M)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,R){if(ge(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),ge(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(A)||!a.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===R)return 0;let D=A.length,$=R.length;for(let Q=0,te=Math.min(D,$);Q<te;++Q)if(A[Q]!==R[Q]){D=A[Q],$=R[Q];break}return D<$?-1:$<D?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,R){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let D;if(R===void 0)for(R=0,D=0;D<A.length;++D)R+=A[D].length;const $=a.allocUnsafe(R);let Q=0;for(D=0;D<A.length;++D){let te=A[D];if(ge(te,Uint8Array))Q+te.length>$.length?(a.isBuffer(te)||(te=a.from(te)),te.copy($,Q)):Uint8Array.prototype.set.call($,te,Q);else if(a.isBuffer(te))te.copy($,Q);else throw new TypeError('"list" argument must be an Array of Buffers');Q+=te.length}return $};function V(M,A){if(a.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||ge(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const R=M.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&R===0)return 0;let $=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return ye(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return xe(M).length;default:if($)return D?-1:ye(M).length;A=(""+A).toLowerCase(),$=!0}}a.byteLength=V;function U(M,A,R){let D=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,A>>>=0,R<=A))return"";for(M||(M="utf8");;)switch(M){case"hex":return w(this,A,R);case"utf8":case"utf-8":return b(this,A,R);case"ascii":return S(this,A,R);case"latin1":case"binary":return T(this,A,R);case"base64":return p(this,A,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,A,R);default:if(D)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function F(M,A,R){const D=M[A];M[A]=M[R],M[R]=D}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<A;R+=2)F(this,R,R+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<A;R+=4)F(this,R,R+3),F(this,R+1,R+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<A;R+=8)F(this,R,R+7),F(this,R+1,R+6),F(this,R+2,R+5),F(this,R+3,R+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?b(this,0,A):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const R=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(A+=" ... "),"<Buffer "+A+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(A,R,D,$,Q){if(ge(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(R===void 0&&(R=0),D===void 0&&(D=A?A.length:0),$===void 0&&($=0),Q===void 0&&(Q=this.length),R<0||D>A.length||$<0||Q>this.length)throw new RangeError("out of range index");if($>=Q&&R>=D)return 0;if($>=Q)return-1;if(R>=D)return 1;if(R>>>=0,D>>>=0,$>>>=0,Q>>>=0,this===A)return 0;let te=Q-$,le=D-R;const Ae=Math.min(te,le),we=this.slice($,Q),Se=A.slice(R,D);for(let Fe=0;Fe<Ae;++Fe)if(we[Fe]!==Se[Fe]){te=we[Fe],le=Se[Fe];break}return te<le?-1:le<te?1:0};function j(M,A,R,D,$){if(M.length===0)return-1;if(typeof R=="string"?(D=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Oe(R)&&(R=$?0:M.length-1),R<0&&(R=M.length+R),R>=M.length){if($)return-1;R=M.length-1}else if(R<0)if($)R=0;else return-1;if(typeof A=="string"&&(A=a.from(A,D)),a.isBuffer(A))return A.length===0?-1:E(M,A,R,D,$);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(M,A,R):Uint8Array.prototype.lastIndexOf.call(M,A,R):E(M,[A],R,D,$);throw new TypeError("val must be string, number or Buffer")}function E(M,A,R,D,$){let Q=1,te=M.length,le=A.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(M.length<2||A.length<2)return-1;Q=2,te/=2,le/=2,R/=2}function Ae(Se,Fe){return Q===1?Se[Fe]:Se.readUInt16BE(Fe*Q)}let we;if($){let Se=-1;for(we=R;we<te;we++)if(Ae(M,we)===Ae(A,Se===-1?0:we-Se)){if(Se===-1&&(Se=we),we-Se+1===le)return Se*Q}else Se!==-1&&(we-=we-Se),Se=-1}else for(R+le>te&&(R=te-le),we=R;we>=0;we--){let Se=!0;for(let Fe=0;Fe<le;Fe++)if(Ae(M,we+Fe)!==Ae(A,Fe)){Se=!1;break}if(Se)return we}return-1}a.prototype.includes=function(A,R,D){return this.indexOf(A,R,D)!==-1},a.prototype.indexOf=function(A,R,D){return j(this,A,R,D,!0)},a.prototype.lastIndexOf=function(A,R,D){return j(this,A,R,D,!1)};function _(M,A,R,D){R=Number(R)||0;const $=M.length-R;D?(D=Number(D),D>$&&(D=$)):D=$;const Q=A.length;D>Q/2&&(D=Q/2);let te;for(te=0;te<D;++te){const le=parseInt(A.substr(te*2,2),16);if(Oe(le))return te;M[R+te]=le}return te}function O(M,A,R,D){return me(ye(A,M.length-R),M,R,D)}function x(M,A,R,D){return me(ue(A),M,R,D)}function y(M,A,R,D){return me(xe(A),M,R,D)}function u(M,A,R,D){return me(Ee(A,M.length-R),M,R,D)}a.prototype.write=function(A,R,D,$){if(R===void 0)$="utf8",D=this.length,R=0;else if(D===void 0&&typeof R=="string")$=R,D=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(D)?(D=D>>>0,$===void 0&&($="utf8")):($=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Q=this.length-R;if((D===void 0||D>Q)&&(D=Q),A.length>0&&(D<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let te=!1;for(;;)switch($){case"hex":return _(this,A,R,D);case"utf8":case"utf-8":return O(this,A,R,D);case"ascii":case"latin1":case"binary":return x(this,A,R,D);case"base64":return y(this,A,R,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,A,R,D);default:if(te)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function p(M,A,R){return A===0&&R===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(A,R))}function b(M,A,R){R=Math.min(M.length,R);const D=[];let $=A;for(;$<R;){const Q=M[$];let te=null,le=Q>239?4:Q>223?3:Q>191?2:1;if($+le<=R){let Ae,we,Se,Fe;switch(le){case 1:Q<128&&(te=Q);break;case 2:Ae=M[$+1],(Ae&192)===128&&(Fe=(Q&31)<<6|Ae&63,Fe>127&&(te=Fe));break;case 3:Ae=M[$+1],we=M[$+2],(Ae&192)===128&&(we&192)===128&&(Fe=(Q&15)<<12|(Ae&63)<<6|we&63,Fe>2047&&(Fe<55296||Fe>57343)&&(te=Fe));break;case 4:Ae=M[$+1],we=M[$+2],Se=M[$+3],(Ae&192)===128&&(we&192)===128&&(Se&192)===128&&(Fe=(Q&15)<<18|(Ae&63)<<12|(we&63)<<6|Se&63,Fe>65535&&Fe<1114112&&(te=Fe))}}te===null?(te=65533,le=1):te>65535&&(te-=65536,D.push(te>>>10&1023|55296),te=56320|te&1023),D.push(te),$+=le}return h(D)}const g=4096;function h(M){const A=M.length;if(A<=g)return String.fromCharCode.apply(String,M);let R="",D=0;for(;D<A;)R+=String.fromCharCode.apply(String,M.slice(D,D+=g));return R}function S(M,A,R){let D="";R=Math.min(M.length,R);for(let $=A;$<R;++$)D+=String.fromCharCode(M[$]&127);return D}function T(M,A,R){let D="";R=Math.min(M.length,R);for(let $=A;$<R;++$)D+=String.fromCharCode(M[$]);return D}function w(M,A,R){const D=M.length;(!A||A<0)&&(A=0),(!R||R<0||R>D)&&(R=D);let $="";for(let Q=A;Q<R;++Q)$+=ve[M[Q]];return $}function v(M,A,R){const D=M.slice(A,R);let $="";for(let Q=0;Q<D.length-1;Q+=2)$+=String.fromCharCode(D[Q]+D[Q+1]*256);return $}a.prototype.slice=function(A,R){const D=this.length;A=~~A,R=R===void 0?D:~~R,A<0?(A+=D,A<0&&(A=0)):A>D&&(A=D),R<0?(R+=D,R<0&&(R=0)):R>D&&(R=D),R<A&&(R=A);const $=this.subarray(A,R);return Object.setPrototypeOf($,a.prototype),$};function N(M,A,R){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+A>R)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A],Q=1,te=0;for(;++te<R&&(Q*=256);)$+=this[A+te]*Q;return $},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A+--R],Q=1;for(;R>0&&(Q*=256);)$+=this[A+--R]*Q;return $},a.prototype.readUint8=a.prototype.readUInt8=function(A,R){return A=A>>>0,R||N(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,R){return A=A>>>0,R||N(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,R){return A=A>>>0,R||N(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,R){return A=A>>>0,R||N(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Q=this[++A]+this[++A]*2**8+this[++A]*2**16+D*2**24;return BigInt($)+(BigInt(Q)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=R*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Q=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D;return(BigInt($)<<BigInt(32))+BigInt(Q)}),a.prototype.readIntLE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A],Q=1,te=0;for(;++te<R&&(Q*=256);)$+=this[A+te]*Q;return Q*=128,$>=Q&&($-=Math.pow(2,8*R)),$},a.prototype.readIntBE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=R,Q=1,te=this[A+--$];for(;$>0&&(Q*=256);)te+=this[A+--$]*Q;return Q*=128,te>=Q&&(te-=Math.pow(2,8*R)),te},a.prototype.readInt8=function(A,R){return A=A>>>0,R||N(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,R){A=A>>>0,R||N(A,2,this.length);const D=this[A]|this[A+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(A,R){A=A>>>0,R||N(A,2,this.length);const D=this[A+1]|this[A]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(D<<24);return(BigInt($)<<BigInt(32))+BigInt(R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=(R<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt($)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D)}),a.prototype.readFloatLE=function(A,R){return A=A>>>0,R||N(A,4,this.length),r.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,R){return A=A>>>0,R||N(A,4,this.length),r.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,R){return A=A>>>0,R||N(A,8,this.length),r.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,R){return A=A>>>0,R||N(A,8,this.length),r.read(this,A,!1,52,8)};function ee(M,A,R,D,$,Q){if(!a.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>$||A<Q)throw new RangeError('"value" argument is out of bounds');if(R+D>M.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,R,D,$){if(A=+A,R=R>>>0,D=D>>>0,!$){const le=Math.pow(2,8*D)-1;ee(this,A,R,D,le,0)}let Q=1,te=0;for(this[R]=A&255;++te<D&&(Q*=256);)this[R+te]=A/Q&255;return R+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,R,D,$){if(A=+A,R=R>>>0,D=D>>>0,!$){const le=Math.pow(2,8*D)-1;ee(this,A,R,D,le,0)}let Q=D-1,te=1;for(this[R+Q]=A&255;--Q>=0&&(te*=256);)this[R+Q]=A/te&255;return R+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,1,255,0),this[R]=A&255,R+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,65535,0),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,65535,0),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,4294967295,0),this[R+3]=A>>>24,this[R+2]=A>>>16,this[R+1]=A>>>8,this[R]=A&255,R+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,4294967295,0),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4};function Y(M,A,R,D,$){X(A,D,$,M,R,7);let Q=Number(A&BigInt(4294967295));M[R++]=Q,Q=Q>>8,M[R++]=Q,Q=Q>>8,M[R++]=Q,Q=Q>>8,M[R++]=Q;let te=Number(A>>BigInt(32)&BigInt(4294967295));return M[R++]=te,te=te>>8,M[R++]=te,te=te>>8,M[R++]=te,te=te>>8,M[R++]=te,R}function ne(M,A,R,D,$){X(A,D,$,M,R,7);let Q=Number(A&BigInt(4294967295));M[R+7]=Q,Q=Q>>8,M[R+6]=Q,Q=Q>>8,M[R+5]=Q,Q=Q>>8,M[R+4]=Q;let te=Number(A>>BigInt(32)&BigInt(4294967295));return M[R+3]=te,te=te>>8,M[R+2]=te,te=te>>8,M[R+1]=te,te=te>>8,M[R]=te,R+8}a.prototype.writeBigUInt64LE=he(function(A,R=0){return Y(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(A,R=0){return ne(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,R,D,$){if(A=+A,R=R>>>0,!$){const Ae=Math.pow(2,8*D-1);ee(this,A,R,D,Ae-1,-Ae)}let Q=0,te=1,le=0;for(this[R]=A&255;++Q<D&&(te*=256);)A<0&&le===0&&this[R+Q-1]!==0&&(le=1),this[R+Q]=(A/te>>0)-le&255;return R+D},a.prototype.writeIntBE=function(A,R,D,$){if(A=+A,R=R>>>0,!$){const Ae=Math.pow(2,8*D-1);ee(this,A,R,D,Ae-1,-Ae)}let Q=D-1,te=1,le=0;for(this[R+Q]=A&255;--Q>=0&&(te*=256);)A<0&&le===0&&this[R+Q+1]!==0&&(le=1),this[R+Q]=(A/te>>0)-le&255;return R+D},a.prototype.writeInt8=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,1,127,-128),A<0&&(A=255+A+1),this[R]=A&255,R+1},a.prototype.writeInt16LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,32767,-32768),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeInt16BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,32767,-32768),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeInt32LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,2147483647,-2147483648),this[R]=A&255,this[R+1]=A>>>8,this[R+2]=A>>>16,this[R+3]=A>>>24,R+4},a.prototype.writeInt32BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4},a.prototype.writeBigInt64LE=he(function(A,R=0){return Y(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(A,R=0){return ne(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(M,A,R,D,$,Q){if(R+D>M.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ae(M,A,R,D,$){return A=+A,R=R>>>0,$||se(M,A,R,4),r.write(M,A,R,D,23,4),R+4}a.prototype.writeFloatLE=function(A,R,D){return ae(this,A,R,!0,D)},a.prototype.writeFloatBE=function(A,R,D){return ae(this,A,R,!1,D)};function W(M,A,R,D,$){return A=+A,R=R>>>0,$||se(M,A,R,8),r.write(M,A,R,D,52,8),R+8}a.prototype.writeDoubleLE=function(A,R,D){return W(this,A,R,!0,D)},a.prototype.writeDoubleBE=function(A,R,D){return W(this,A,R,!1,D)},a.prototype.copy=function(A,R,D,$){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(D||(D=0),!$&&$!==0&&($=this.length),R>=A.length&&(R=A.length),R||(R=0),$>0&&$<D&&($=D),$===D||A.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),A.length-R<$-D&&($=A.length-R+D);const Q=$-D;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,D,$):Uint8Array.prototype.set.call(A,this.subarray(D,$),R),Q},a.prototype.fill=function(A,R,D,$){if(typeof A=="string"){if(typeof R=="string"?($=R,R=0,D=this.length):typeof D=="string"&&($=D,D=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!a.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(A.length===1){const te=A.charCodeAt(0);($==="utf8"&&te<128||$==="latin1")&&(A=te)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(R<0||this.length<R||this.length<D)throw new RangeError("Out of range index");if(D<=R)return this;R=R>>>0,D=D===void 0?this.length:D>>>0,A||(A=0);let Q;if(typeof A=="number")for(Q=R;Q<D;++Q)this[Q]=A;else{const te=a.isBuffer(A)?A:a.from(A,$),le=te.length;if(le===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Q=0;Q<D-R;++Q)this[Q+R]=te[Q%le]}return this};const K={};function k(M,A,R){K[M]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(M,A){return`The "${M}" argument must be of type number. Received type ${typeof A}`},TypeError),k("ERR_OUT_OF_RANGE",function(M,A,R){let D=`The value of "${M}" is out of range.`,$=R;return Number.isInteger(R)&&Math.abs(R)>2**32?$=m(String(R)):typeof R=="bigint"&&($=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&($=m($)),$+="n"),D+=` It must be ${A}. Received ${$}`,D},RangeError);function m(M){let A="",R=M.length;const D=M[0]==="-"?1:0;for(;R>=D+4;R-=3)A=`_${M.slice(R-3,R)}${A}`;return`${M.slice(0,R)}${A}`}function B(M,A,R){Z(A,"offset"),(M[A]===void 0||M[A+R]===void 0)&&ce(A,M.length-(R+1))}function X(M,A,R,D,$,Q){if(M>R||M<A){const te=typeof A=="bigint"?"n":"";let le;throw Q>3?A===0||A===BigInt(0)?le=`>= 0${te} and < 2${te} ** ${(Q+1)*8}${te}`:le=`>= -(2${te} ** ${(Q+1)*8-1}${te}) and < 2 ** ${(Q+1)*8-1}${te}`:le=`>= ${A}${te} and <= ${R}${te}`,new K.ERR_OUT_OF_RANGE("value",le,M)}B(D,$,Q)}function Z(M,A){if(typeof M!="number")throw new K.ERR_INVALID_ARG_TYPE(A,"number",M)}function ce(M,A,R){throw Math.floor(M)!==M?(Z(M,R),new K.ERR_OUT_OF_RANGE(R||"offset","an integer",M)):A<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE(R||"offset",`>= ${R?1:0} and <= ${A}`,M)}const ie=/[^+/0-9A-Za-z-_]/g;function de(M){if(M=M.split("=")[0],M=M.trim().replace(ie,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function ye(M,A){A=A||1/0;let R;const D=M.length;let $=null;const Q=[];for(let te=0;te<D;++te){if(R=M.charCodeAt(te),R>55295&&R<57344){if(!$){if(R>56319){(A-=3)>-1&&Q.push(239,191,189);continue}else if(te+1===D){(A-=3)>-1&&Q.push(239,191,189);continue}$=R;continue}if(R<56320){(A-=3)>-1&&Q.push(239,191,189),$=R;continue}R=($-55296<<10|R-56320)+65536}else $&&(A-=3)>-1&&Q.push(239,191,189);if($=null,R<128){if((A-=1)<0)break;Q.push(R)}else if(R<2048){if((A-=2)<0)break;Q.push(R>>6|192,R&63|128)}else if(R<65536){if((A-=3)<0)break;Q.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((A-=4)<0)break;Q.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Q}function ue(M){const A=[];for(let R=0;R<M.length;++R)A.push(M.charCodeAt(R)&255);return A}function Ee(M,A){let R,D,$;const Q=[];for(let te=0;te<M.length&&!((A-=2)<0);++te)R=M.charCodeAt(te),D=R>>8,$=R%256,Q.push($),Q.push(D);return Q}function xe(M){return e.toByteArray(de(M))}function me(M,A,R,D){let $;for($=0;$<D&&!($+R>=A.length||$>=M.length);++$)A[$+R]=M[$];return $}function ge(M,A){return M instanceof A||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===A.name}function Oe(M){return M!==M}const ve=function(){const M="0123456789abcdef",A=new Array(256);for(let R=0;R<16;++R){const D=R*16;for(let $=0;$<16;++$)A[D+$]=M[R]+M[$]}return A}();function he(M){return typeof BigInt>"u"?Ne:M}function Ne(){throw new Error("BigInt not supported")}})(Fi);window.Buffer=Fi.Buffer;function Wa(){}const lb=t=>t;function db(t){return t()}function rp(){return Object.create(null)}function to(t){t.forEach(db)}function cu(t){return typeof t=="function"}function ky(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Cc;function np(t,e){return Cc||(Cc=document.createElement("a")),Cc.href=e,t===Cc.href}function Dy(t){return Object.keys(t).length===0}function Uy(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const hb=typeof window<"u";let Ky=hb?()=>window.performance.now():()=>Date.now(),Uh=hb?t=>requestAnimationFrame(t):Wa;const To=new Set;function pb(t){To.forEach(e=>{e.c(t)||(To.delete(e),e.f())}),To.size!==0&&Uh(pb)}function Hy(t){let e;return To.size===0&&Uh(pb),{promise:new Promise(r=>{To.add(e={c:t,f:r})}),abort(){To.delete(e)}}}function Sn(t,e){t.appendChild(e)}function gb(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Fy(t){const e=Ir("style");return jy(gb(t),e),e.sheet}function jy(t,e){return Sn(t.head||t,e),e.sheet}function Yt(t,e,r){t.insertBefore(e,r||null)}function Bt(t){t.parentNode&&t.parentNode.removeChild(t)}function Ir(t){return document.createElement(t)}function Ci(t){return document.createTextNode(t)}function Ms(){return Ci(" ")}function _l(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function It(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function Gy(t){return Array.from(t.childNodes)}function Xa(t,e){e=""+e,t.data!==e&&(t.data=e)}function Vy(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}const Sf=new Map;let Rf=0;function qy(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function $y(t,e){const r={stylesheet:Fy(e),rules:{}};return Sf.set(t,r),r}function ip(t,e,r,n,i,s,o,a=0){const c=16.666/n;let l=`{
`;for(let q=0;q<=1;q+=c){const G=e+(r-e)*s(q);l+=q*100+`%{${o(G,1-G)}}
`}const f=l+`100% {${o(r,1-r)}}
}`,d=`__svelte_${qy(f)}_${a}`,I=gb(t),{stylesheet:P,rules:L}=Sf.get(I)||$y(I,t);L[d]||(L[d]=!0,P.insertRule(`@keyframes ${d} ${f}`,P.cssRules.length));const H=t.style.animation||"";return t.style.animation=`${H?`${H}, `:""}${d} ${n}ms linear ${i}ms 1 both`,Rf+=1,d}function zy(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(t.style.animation=n.join(", "),Rf-=i,Rf||Wy())}function Wy(){Uh(()=>{Rf||(Sf.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&Bt(e)}),Sf.clear())})}let Ja;function Ka(t){Ja=t}function Xy(){if(!Ja)throw new Error("Function called outside component initialization");return Ja}function Jy(t){Xy().$$.on_mount.push(t)}const _o=[],sp=[];let Oo=[];const op=[],Yy=Promise.resolve();let Wd=!1;function Qy(){Wd||(Wd=!0,Yy.then(bb))}function bs(t){Oo.push(t)}const wl=new Set;let ho=0;function bb(){if(ho!==0)return;const t=Ja;do{try{for(;ho<_o.length;){const e=_o[ho];ho++,Ka(e),Zy(e.$$)}}catch(e){throw _o.length=0,ho=0,e}for(Ka(null),_o.length=0,ho=0;sp.length;)sp.pop()();for(let e=0;e<Oo.length;e+=1){const r=Oo[e];wl.has(r)||(wl.add(r),r())}Oo.length=0}while(_o.length);for(;op.length;)op.pop()();Wd=!1,wl.clear(),Ka(t)}function Zy(t){if(t.fragment!==null){t.update(),to(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bs)}}function eE(t){const e=[],r=[];Oo.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),Oo=e}let ma;function tE(){return ma||(ma=Promise.resolve(),ma.then(()=>{ma=null})),ma}function Al(t,e,r){t.dispatchEvent(Vy(`${e?"intro":"outro"}${r}`))}const df=new Set;let Bi;function Bc(){Bi={r:0,c:[],p:Bi}}function kc(){Bi.r||to(Bi.c),Bi=Bi.p}function Fr(t,e){t&&t.i&&(df.delete(t),t.i(e))}function Wi(t,e,r,n){if(t&&t.o){if(df.has(t))return;df.add(t),Bi.c.push(()=>{df.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}const rE={duration:0};function vs(t,e,r,n){const i={direction:"both"};let s=e(t,r,i),o=n?0:1,a=null,c=null,l=null;function f(){l&&zy(t,l)}function d(P,L){const H=P.b-o;return L*=Math.abs(H),{a:o,b:P.b,d:H,duration:L,start:P.start,end:P.start+L,group:P.group}}function I(P){const{delay:L=0,duration:H=300,easing:q=lb,tick:G=Wa,css:C}=s||rE,V={start:Ky()+L,b:P};P||(V.group=Bi,Bi.r+=1),a||c?c=V:(C&&(f(),l=ip(t,o,P,H,L,q,C)),P&&G(0,1),a=d(V,H),bs(()=>Al(t,P,"start")),Hy(U=>{if(c&&U>c.start&&(a=d(c,H),c=null,Al(t,a.b,"start"),C&&(f(),l=ip(t,o,a.b,a.duration,0,q,s.css))),a){if(U>=a.end)G(o=a.b,1-o),Al(t,a.b,"end"),c||(a.b?f():--a.group.r||to(a.group.c)),a=null;else if(U>=a.start){const F=U-a.start;o=a.a+a.d*q(F/a.duration),G(o,1-o)}}return!!(a||c)}))}return{run(P){cu(s)?tE().then(()=>{s=s(i),I(P)}):I(P)},end(){f(),a=c=null}}}function nE(t,e,r,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,r),n||bs(()=>{const o=t.$$.on_mount.map(db).filter(cu);t.$$.on_destroy?t.$$.on_destroy.push(...o):to(o),t.$$.on_mount=[]}),s.forEach(bs)}function iE(t,e){const r=t.$$;r.fragment!==null&&(eE(r.after_update),to(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function sE(t,e){t.$$.dirty[0]===-1&&(_o.push(t),Qy(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function oE(t,e,r,n,i,s,o,a=[-1]){const c=Ja;Ka(t);const l=t.$$={fragment:null,ctx:[],props:s,update:Wa,not_equal:i,bound:rp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:rp(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let f=!1;if(l.ctx=r?r(t,e.props||{},(d,I,...P)=>{const L=P.length?P[0]:I;return l.ctx&&i(l.ctx[d],l.ctx[d]=L)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](L),f&&sE(t,d)),I}):[],l.update(),f=!0,to(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=Gy(e.target);l.fragment&&l.fragment.l(d),d.forEach(Bt)}else l.fragment&&l.fragment.c();e.intro&&Fr(t.$$.fragment),nE(t,e.target,e.anchor,e.customElement),bb()}Ka(c)}class aE{$destroy(){iE(this,1),this.$destroy=Wa}$on(e,r){if(!cu(r))return Wa;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Dy(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function cE(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function ap(t,{delay:e=0,duration:r=400,easing:n=cE,amount:i=5,opacity:s=0}={}){const o=getComputedStyle(t),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-s),[f,d]=Uy(i);return{delay:e,duration:r,easing:n,css:(I,P)=>`opacity: ${a-l*P}; filter: ${c} blur(${P*f}${d});`}}function Do(t,{delay:e=0,duration:r=400,easing:n=lb}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}const fE="modulepreload",uE=function(t){return"/reveal/"+t},cp={},lE=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=uE(s),s in cp)return;cp[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":fE,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,d)=>{l.addEventListener("load",f),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var Xd={},dE={get exports(){return Xd},set exports(t){Xd=t}},If={},hE={get exports(){return If},set exports(t){If=t}},vb=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},pE=vb,Rs=Object.prototype.toString;function Kh(t){return Array.isArray(t)}function Jd(t){return typeof t>"u"}function gE(t){return t!==null&&!Jd(t)&&t.constructor!==null&&!Jd(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function mb(t){return Rs.call(t)==="[object ArrayBuffer]"}function bE(t){return Rs.call(t)==="[object FormData]"}function vE(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&mb(t.buffer),e}function mE(t){return typeof t=="string"}function yE(t){return typeof t=="number"}function yb(t){return t!==null&&typeof t=="object"}function hf(t){if(Rs.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function EE(t){return Rs.call(t)==="[object Date]"}function _E(t){return Rs.call(t)==="[object File]"}function wE(t){return Rs.call(t)==="[object Blob]"}function Eb(t){return Rs.call(t)==="[object Function]"}function AE(t){return yb(t)&&Eb(t.pipe)}function xE(t){return Rs.call(t)==="[object URLSearchParams]"}function SE(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function RE(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Hh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Kh(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Yd(){var t={};function e(i,s){hf(t[s])&&hf(i)?t[s]=Yd(t[s],i):hf(i)?t[s]=Yd({},i):Kh(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Hh(arguments[r],e);return t}function IE(t,e,r){return Hh(e,function(i,s){r&&typeof i=="function"?t[s]=pE(i,r):t[s]=i}),t}function TE(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Dr={isArray:Kh,isArrayBuffer:mb,isBuffer:gE,isFormData:bE,isArrayBufferView:vE,isString:mE,isNumber:yE,isObject:yb,isPlainObject:hf,isUndefined:Jd,isDate:EE,isFile:_E,isBlob:wE,isFunction:Eb,isStream:AE,isURLSearchParams:xE,isStandardBrowserEnv:RE,forEach:Hh,merge:Yd,extend:IE,trim:SE,stripBOM:TE},po=Dr;function fp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _b=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(po.isURLSearchParams(r))i=r.toString();else{var s=[];po.forEach(r,function(c,l){c===null||typeof c>"u"||(po.isArray(c)?l=l+"[]":c=[c],po.forEach(c,function(d){po.isDate(d)?d=d.toISOString():po.isObject(d)&&(d=JSON.stringify(d)),s.push(fp(l)+"="+fp(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},OE=Dr;function fu(){this.handlers=[]}fu.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};fu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};fu.prototype.forEach=function(e){OE.forEach(this.handlers,function(n){n!==null&&e(n)})};var PE=fu,NE=Dr,ME=function(e,r){NE.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},wb=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Ab={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LE=wb,xb=function(e,r,n,i,s){var o=new Error(e);return LE(o,r,n,i,s)},CE=xb,BE=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(CE("Request failed with status code "+n.status,n.config,null,n.request,n))},xl,up;function kE(){if(up)return xl;up=1;var t=Dr;return xl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),xl}var DE=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},UE=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},KE=DE,HE=UE,FE=function(e,r){return e&&!KE(r)?HE(e,r):r},Sl,lp;function jE(){if(lp)return Sl;lp=1;var t=Dr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Sl=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Sl}var Rl,dp;function GE(){if(dp)return Rl;dp=1;var t=Dr;return Rl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Rl}var Il,hp;function uu(){if(hp)return Il;hp=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Il=t,Il}var Tl,pp;function gp(){if(pp)return Tl;pp=1;var t=Dr,e=BE,r=kE(),n=_b,i=FE,s=jE(),o=GE(),a=xb,c=Ab,l=uu();return Tl=function(d){return new Promise(function(P,L){var H=d.data,q=d.headers,G=d.responseType,C;function V(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete q["Content-Type"];var U=new XMLHttpRequest;if(d.auth){var F=d.auth.username||"",j=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";q.Authorization="Basic "+btoa(F+":"+j)}var E=i(d.baseURL,d.url);U.open(d.method.toUpperCase(),n(E,d.params,d.paramsSerializer),!0),U.timeout=d.timeout;function _(){if(U){var x="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,y=!G||G==="text"||G==="json"?U.responseText:U.response,u={data:y,status:U.status,statusText:U.statusText,headers:x,config:d,request:U};e(function(b){P(b),V()},function(b){L(b),V()},u),U=null}}if("onloadend"in U?U.onloadend=_:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(_)},U.onabort=function(){U&&(L(a("Request aborted",d,"ECONNABORTED",U)),U=null)},U.onerror=function(){L(a("Network Error",d,null,U)),U=null},U.ontimeout=function(){var y=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c;d.timeoutErrorMessage&&(y=d.timeoutErrorMessage),L(a(y,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},t.isStandardBrowserEnv()){var O=(d.withCredentials||o(E))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;O&&(q[d.xsrfHeaderName]=O)}"setRequestHeader"in U&&t.forEach(q,function(y,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete q[u]:U.setRequestHeader(u,y)}),t.isUndefined(d.withCredentials)||(U.withCredentials=!!d.withCredentials),G&&G!=="json"&&(U.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&U.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(x){U&&(L(!x||x&&x.type?new l("canceled"):x),U.abort(),U=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),H||(H=null),U.send(H)})},Tl}var or=Dr,bp=ME,VE=wb,qE=Ab,$E={"Content-Type":"application/x-www-form-urlencoded"};function vp(t,e){!or.isUndefined(t)&&or.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function zE(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=gp()),t}function WE(t,e,r){if(or.isString(t))try{return(e||JSON.parse)(t),or.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var lu={transitional:qE,adapter:zE(),transformRequest:[function(e,r){return bp(r,"Accept"),bp(r,"Content-Type"),or.isFormData(e)||or.isArrayBuffer(e)||or.isBuffer(e)||or.isStream(e)||or.isFile(e)||or.isBlob(e)?e:or.isArrayBufferView(e)?e.buffer:or.isURLSearchParams(e)?(vp(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):or.isObject(e)||r&&r["Content-Type"]==="application/json"?(vp(r,"application/json"),WE(e)):e}],transformResponse:[function(e){var r=this.transitional||lu.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&or.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?VE(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};or.forEach(["delete","get","head"],function(e){lu.headers[e]={}});or.forEach(["post","put","patch"],function(e){lu.headers[e]=or.merge($E)});var Fh=lu,XE=Dr,JE=Fh,YE=function(e,r,n){var i=this||JE;return XE.forEach(n,function(o){e=o.call(i,e,r)}),e},Ol,mp;function Sb(){return mp||(mp=1,Ol=function(e){return!!(e&&e.__CANCEL__)}),Ol}var yp=Dr,Pl=YE,QE=Sb(),ZE=Fh,e_=uu();function Nl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new e_("canceled")}var t_=function(e){Nl(e),e.headers=e.headers||{},e.data=Pl.call(e,e.data,e.headers,e.transformRequest),e.headers=yp.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),yp.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||ZE.adapter;return r(e).then(function(i){return Nl(e),i.data=Pl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return QE(i)||(Nl(e),i&&i.response&&(i.response.data=Pl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Kr=Dr,Rb=function(e,r){r=r||{};var n={};function i(f,d){return Kr.isPlainObject(f)&&Kr.isPlainObject(d)?Kr.merge(f,d):Kr.isPlainObject(d)?Kr.merge({},d):Kr.isArray(d)?d.slice():d}function s(f){if(Kr.isUndefined(r[f])){if(!Kr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Kr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Kr.isUndefined(r[f])){if(!Kr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Kr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var I=l[d]||s,P=I(d);Kr.isUndefined(P)&&I!==c||(n[d]=P)}),n},Ml,Ep;function Ib(){return Ep||(Ep=1,Ml={version:"0.26.1"}),Ml}var r_=Ib().version,jh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){jh[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var _p={};jh.transitional=function(e,r,n){function i(s,o){return"[Axios v"+r_+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!_p[o]&&(_p[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function n_(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var i_={assertOptions:n_,validators:jh},Tb=Dr,s_=_b,wp=PE,Ap=t_,du=Rb,Ob=i_,go=Ob.validators;function pc(t){this.defaults=t,this.interceptors={request:new wp,response:new wp}}pc.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=du(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Ob.assertOptions(n,{silentJSONParsing:go.transitional(go.boolean),forcedJSONParsing:go.transitional(go.boolean),clarifyTimeoutError:go.transitional(go.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(s=s&&P.synchronous,i.unshift(P.fulfilled,P.rejected))});var o=[];this.interceptors.response.forEach(function(P){o.push(P.fulfilled,P.rejected)});var a;if(!s){var c=[Ap,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var f=i.shift(),d=i.shift();try{l=f(l)}catch(I){d(I);break}}try{a=Ap(l)}catch(I){return Promise.reject(I)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};pc.prototype.getUri=function(e){return e=du(this.defaults,e),s_(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Tb.forEach(["delete","get","head","options"],function(e){pc.prototype[e]=function(r,n){return this.request(du(n||{},{method:e,url:r,data:(n||{}).data}))}});Tb.forEach(["post","put","patch"],function(e){pc.prototype[e]=function(r,n,i){return this.request(du(i||{},{method:e,url:r,data:n}))}});var o_=pc,Ll,xp;function a_(){if(xp)return Ll;xp=1;var t=uu();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Ll=e,Ll}var Cl,Sp;function c_(){return Sp||(Sp=1,Cl=function(e){return function(n){return e.apply(null,n)}}),Cl}var Bl,Rp;function f_(){if(Rp)return Bl;Rp=1;var t=Dr;return Bl=function(r){return t.isObject(r)&&r.isAxiosError===!0},Bl}var Ip=Dr,u_=vb,pf=o_,l_=Rb,d_=Fh;function Pb(t){var e=new pf(t),r=u_(pf.prototype.request,e);return Ip.extend(r,pf.prototype,e),Ip.extend(r,e),r.create=function(i){return Pb(l_(t,i))},r}var ui=Pb(d_);ui.Axios=pf;ui.Cancel=uu();ui.CancelToken=a_();ui.isCancel=Sb();ui.VERSION=Ib().version;ui.all=function(e){return Promise.all(e)};ui.spread=c_();ui.isAxiosError=f_();hE.exports=ui;If.default=ui;(function(t){t.exports=If})(dE);const Tp=fb(Xd);function h_(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}var Ya;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(Ya||(Ya={}));const Nb=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,Op=Nb?void 0:lE(()=>import("./index-c4f205e6.js"),[]).then(t=>t.default).catch(()=>{});var Tf;(function(t){t.TEXT="text",t.JSON="json"})(Tf||(Tf={}));class ra extends Error{constructor(e,r,n,i,s){super(e),this.message=e,this.status=r,this.statusText=n,this.body=i,this.url=s,this.name="HttpResponse"}}class p_ extends Error{constructor(e){super(e),this.message=e,this.name="HttpRequestFailed"}}class g_{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const r=[];for(const i in e)if(e.hasOwnProperty(i)&&typeof e[i]<"u"){const s=typeof e[i].toJSON=="function"?e[i].toJSON():e[i];if(s===null){r.push(encodeURIComponent(i));continue}if(Array.isArray(s)){s.forEach(o=>{r.push(encodeURIComponent(i)+"="+encodeURIComponent(o))});continue}r.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}const n=r.join("&");return n?`?${n}`:""}createRequest({url:e,method:r,timeout:n=this.timeout,query:i,headers:s={},json:o=!0},a){return h_(this,void 0,void 0,function*(){let c,l;s["Content-Type"]||(s["Content-Type"]="application/json"),o?c=Tf.JSON:(c=Tf.TEXT,l=[f=>f]);try{const f=Op&&(yield Op);return(yield Tp.request({url:e+this.serialize(i),method:r??"GET",headers:s,responseType:c,transformResponse:l,timeout:n,data:a,adapter:f})).data}catch(f){if(Tp.isAxiosError(f)&&f.response||!Nb&&f.response){let d;throw typeof f.response.data=="object"?d=JSON.stringify(f.response.data):d=f.response.data,new ra(`Http error response: (${f.response.status}) ${d}`,f.response.status,f.response.statusText,d,e+this.serialize(i))}else throw new p_(`${r} ${e+this.serialize(i)} ${String(f)}`)}})}}var b_=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,kl=Math.ceil,Nn=Math.floor,Lr="[BigNumber Error] ",Pp=Lr+"Number primitive has more than 15 significant digits: ",hn=1e14,Me=14,Dl=9007199254740991,Ul=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xi=1e7,er=1e9;function Mb(t){var e,r,n,i=C.prototype={constructor:C,toString:null,valueOf:null},s=new C(1),o=20,a=4,c=-7,l=21,f=-1e7,d=1e7,I=!1,P=1,L=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function C(_,O){var x,y,u,p,b,g,h,S,T=this;if(!(T instanceof C))return new C(_,O);if(O==null){if(_&&_._isBigNumber===!0){T.s=_.s,!_.c||_.e>d?T.c=T.e=null:_.e<f?T.c=[T.e=0]:(T.e=_.e,T.c=_.c.slice());return}if((g=typeof _=="number")&&_*0==0){if(T.s=1/_<0?(_=-_,-1):1,_===~~_){for(p=0,b=_;b>=10;b/=10,p++);p>d?T.c=T.e=null:(T.e=p,T.c=[_]);return}S=String(_)}else{if(!b_.test(S=String(_)))return n(T,S,g);T.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(p=S.indexOf("."))>-1&&(S=S.replace(".","")),(b=S.search(/e/i))>0?(p<0&&(p=b),p+=+S.slice(b+1),S=S.substring(0,b)):p<0&&(p=S.length)}else{if(At(O,2,q.length,"Base"),O==10&&G)return T=new C(_),j(T,o+T.e+1,a);if(S=String(_),g=typeof _=="number"){if(_*0!=0)return n(T,S,g,O);if(T.s=1/_<0?(S=S.slice(1),-1):1,C.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(Pp+_)}else T.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(x=q.slice(0,O),p=b=0,h=S.length;b<h;b++)if(x.indexOf(y=S.charAt(b))<0){if(y=="."){if(b>p){p=h;continue}}else if(!u&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){u=!0,b=-1,p=0;continue}return n(T,String(_),g,O)}g=!1,S=r(S,O,10,T.s),(p=S.indexOf("."))>-1?S=S.replace(".",""):p=S.length}for(b=0;S.charCodeAt(b)===48;b++);for(h=S.length;S.charCodeAt(--h)===48;);if(S=S.slice(b,++h)){if(h-=b,g&&C.DEBUG&&h>15&&(_>Dl||_!==Nn(_)))throw Error(Pp+T.s*_);if((p=p-b-1)>d)T.c=T.e=null;else if(p<f)T.c=[T.e=0];else{if(T.e=p,T.c=[],b=(p+1)%Me,p<0&&(b+=Me),b<h){for(b&&T.c.push(+S.slice(0,b)),h-=Me;b<h;)T.c.push(+S.slice(b,b+=Me));b=Me-(S=S.slice(b)).length}else b-=h;for(;b--;S+="0");T.c.push(+S)}}else T.c=[T.e=0]}C.clone=Mb,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(_){var O,x;if(_!=null)if(typeof _=="object"){if(_.hasOwnProperty(O="DECIMAL_PLACES")&&(x=_[O],At(x,0,er,O),o=x),_.hasOwnProperty(O="ROUNDING_MODE")&&(x=_[O],At(x,0,8,O),a=x),_.hasOwnProperty(O="EXPONENTIAL_AT")&&(x=_[O],x&&x.pop?(At(x[0],-er,0,O),At(x[1],0,er,O),c=x[0],l=x[1]):(At(x,-er,er,O),c=-(l=x<0?-x:x))),_.hasOwnProperty(O="RANGE"))if(x=_[O],x&&x.pop)At(x[0],-er,-1,O),At(x[1],1,er,O),f=x[0],d=x[1];else if(At(x,-er,er,O),x)f=-(d=x<0?-x:x);else throw Error(Lr+O+" cannot be zero: "+x);if(_.hasOwnProperty(O="CRYPTO"))if(x=_[O],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=x;else throw I=!x,Error(Lr+"crypto unavailable");else I=x;else throw Error(Lr+O+" not true or false: "+x);if(_.hasOwnProperty(O="MODULO_MODE")&&(x=_[O],At(x,0,9,O),P=x),_.hasOwnProperty(O="POW_PRECISION")&&(x=_[O],At(x,0,er,O),L=x),_.hasOwnProperty(O="FORMAT"))if(x=_[O],typeof x=="object")H=x;else throw Error(Lr+O+" not an object: "+x);if(_.hasOwnProperty(O="ALPHABET"))if(x=_[O],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))G=x.slice(0,10)=="0123456789",q=x;else throw Error(Lr+O+" invalid: "+x)}else throw Error(Lr+"Object expected: "+_);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[f,d],CRYPTO:I,MODULO_MODE:P,POW_PRECISION:L,FORMAT:H,ALPHABET:q}},C.isBigNumber=function(_){if(!_||_._isBigNumber!==!0)return!1;if(!C.DEBUG)return!0;var O,x,y=_.c,u=_.e,p=_.s;e:if({}.toString.call(y)=="[object Array]"){if((p===1||p===-1)&&u>=-er&&u<=er&&u===Nn(u)){if(y[0]===0){if(u===0&&y.length===1)return!0;break e}if(O=(u+1)%Me,O<1&&(O+=Me),String(y[0]).length==O){for(O=0;O<y.length;O++)if(x=y[O],x<0||x>=hn||x!==Nn(x))break e;if(x!==0)return!0}}}else if(y===null&&u===null&&(p===null||p===1||p===-1))return!0;throw Error(Lr+"Invalid BigNumber: "+_)},C.maximum=C.max=function(){return U(arguments,i.lt)},C.minimum=C.min=function(){return U(arguments,i.gt)},C.random=function(){var _=9007199254740992,O=Math.random()*_&2097151?function(){return Nn(Math.random()*_)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var y,u,p,b,g,h=0,S=[],T=new C(s);if(x==null?x=o:At(x,0,er),b=kl(x/Me),I)if(crypto.getRandomValues){for(y=crypto.getRandomValues(new Uint32Array(b*=2));h<b;)g=y[h]*131072+(y[h+1]>>>11),g>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),y[h]=u[0],y[h+1]=u[1]):(S.push(g%1e14),h+=2);h=b/2}else if(crypto.randomBytes){for(y=crypto.randomBytes(b*=7);h<b;)g=(y[h]&31)*281474976710656+y[h+1]*1099511627776+y[h+2]*4294967296+y[h+3]*16777216+(y[h+4]<<16)+(y[h+5]<<8)+y[h+6],g>=9e15?crypto.randomBytes(7).copy(y,h):(S.push(g%1e14),h+=7);h=b/7}else throw I=!1,Error(Lr+"crypto unavailable");if(!I)for(;h<b;)g=O(),g<9e15&&(S[h++]=g%1e14);for(b=S[--h],x%=Me,b&&x&&(g=Ul[Me-x],S[h]=Nn(b/g)*g);S[h]===0;S.pop(),h--);if(h<0)S=[p=0];else{for(p=-1;S[0]===0;S.splice(0,1),p-=Me);for(h=1,g=S[0];g>=10;g/=10,h++);h<Me&&(p-=Me-h)}return T.e=p,T.c=S,T}}(),C.sum=function(){for(var _=1,O=arguments,x=new C(O[0]);_<O.length;)x=x.plus(O[_++]);return x},r=function(){var _="0123456789";function O(x,y,u,p){for(var b,g=[0],h,S=0,T=x.length;S<T;){for(h=g.length;h--;g[h]*=y);for(g[0]+=p.indexOf(x.charAt(S++)),b=0;b<g.length;b++)g[b]>u-1&&(g[b+1]==null&&(g[b+1]=0),g[b+1]+=g[b]/u|0,g[b]%=u)}return g.reverse()}return function(x,y,u,p,b){var g,h,S,T,w,v,N,ee,Y=x.indexOf("."),ne=o,se=a;for(Y>=0&&(T=L,L=0,x=x.replace(".",""),ee=new C(y),v=ee.pow(x.length-Y),L=T,ee.c=O(gi(rn(v.c),v.e,"0"),10,u,_),ee.e=ee.c.length),N=O(x,y,u,b?(g=q,_):(g=_,q)),S=T=N.length;N[--T]==0;N.pop());if(!N[0])return g.charAt(0);if(Y<0?--S:(v.c=N,v.e=S,v.s=p,v=e(v,ee,ne,se,u),N=v.c,w=v.r,S=v.e),h=S+ne+1,Y=N[h],T=u/2,w=w||h<0||N[h+1]!=null,w=se<4?(Y!=null||w)&&(se==0||se==(v.s<0?3:2)):Y>T||Y==T&&(se==4||w||se==6&&N[h-1]&1||se==(v.s<0?8:7)),h<1||!N[0])x=w?gi(g.charAt(1),-ne,g.charAt(0)):g.charAt(0);else{if(N.length=h,w)for(--u;++N[--h]>u;)N[h]=0,h||(++S,N=[1].concat(N));for(T=N.length;!N[--T];);for(Y=0,x="";Y<=T;x+=g.charAt(N[Y++]));x=gi(x,S,g.charAt(0))}return x}}(),e=function(){function _(y,u,p){var b,g,h,S,T=0,w=y.length,v=u%Xi,N=u/Xi|0;for(y=y.slice();w--;)h=y[w]%Xi,S=y[w]/Xi|0,b=N*h+S*v,g=v*h+b%Xi*Xi+T,T=(g/p|0)+(b/Xi|0)+N*S,y[w]=g%p;return T&&(y=[T].concat(y)),y}function O(y,u,p,b){var g,h;if(p!=b)h=p>b?1:-1;else for(g=h=0;g<p;g++)if(y[g]!=u[g]){h=y[g]>u[g]?1:-1;break}return h}function x(y,u,p,b){for(var g=0;p--;)y[p]-=g,g=y[p]<u[p]?1:0,y[p]=g*b+y[p]-u[p];for(;!y[0]&&y.length>1;y.splice(0,1));}return function(y,u,p,b,g){var h,S,T,w,v,N,ee,Y,ne,se,ae,W,K,k,m,B,X,Z=y.s==u.s?1:-1,ce=y.c,ie=u.c;if(!ce||!ce[0]||!ie||!ie[0])return new C(!y.s||!u.s||(ce?ie&&ce[0]==ie[0]:!ie)?NaN:ce&&ce[0]==0||!ie?Z*0:Z/0);for(Y=new C(Z),ne=Y.c=[],S=y.e-u.e,Z=p+S+1,g||(g=hn,S=nn(y.e/Me)-nn(u.e/Me),Z=Z/Me|0),T=0;ie[T]==(ce[T]||0);T++);if(ie[T]>(ce[T]||0)&&S--,Z<0)ne.push(1),w=!0;else{for(k=ce.length,B=ie.length,T=0,Z+=2,v=Nn(g/(ie[0]+1)),v>1&&(ie=_(ie,v,g),ce=_(ce,v,g),B=ie.length,k=ce.length),K=B,se=ce.slice(0,B),ae=se.length;ae<B;se[ae++]=0);X=ie.slice(),X=[0].concat(X),m=ie[0],ie[1]>=g/2&&m++;do{if(v=0,h=O(ie,se,B,ae),h<0){if(W=se[0],B!=ae&&(W=W*g+(se[1]||0)),v=Nn(W/m),v>1)for(v>=g&&(v=g-1),N=_(ie,v,g),ee=N.length,ae=se.length;O(N,se,ee,ae)==1;)v--,x(N,B<ee?X:ie,ee,g),ee=N.length,h=1;else v==0&&(h=v=1),N=ie.slice(),ee=N.length;if(ee<ae&&(N=[0].concat(N)),x(se,N,ae,g),ae=se.length,h==-1)for(;O(ie,se,B,ae)<1;)v++,x(se,B<ae?X:ie,ae,g),ae=se.length}else h===0&&(v++,se=[0]);ne[T++]=v,se[0]?se[ae++]=ce[K]||0:(se=[ce[K]],ae=1)}while((K++<k||se[0]!=null)&&Z--);w=se[0]!=null,ne[0]||ne.splice(0,1)}if(g==hn){for(T=1,Z=ne[0];Z>=10;Z/=10,T++);j(Y,p+(Y.e=T+S*Me-1)+1,b,w)}else Y.e=S,Y.r=+w;return Y}}();function V(_,O,x,y){var u,p,b,g,h;if(x==null?x=a:At(x,0,8),!_.c)return _.toString();if(u=_.c[0],b=_.e,O==null)h=rn(_.c),h=y==1||y==2&&(b<=c||b>=l)?Uc(h,b):gi(h,b,"0");else if(_=j(new C(_),O,x),p=_.e,h=rn(_.c),g=h.length,y==1||y==2&&(O<=p||p<=c)){for(;g<O;h+="0",g++);h=Uc(h,p)}else if(O-=b,h=gi(h,p,"0"),p+1>g){if(--O>0)for(h+=".";O--;h+="0");}else if(O+=p-g,O>0)for(p+1==g&&(h+=".");O--;h+="0");return _.s<0&&u?"-"+h:h}function U(_,O){for(var x,y=1,u=new C(_[0]);y<_.length;y++)if(x=new C(_[y]),x.s)O.call(u,x)&&(u=x);else{u=x;break}return u}function F(_,O,x){for(var y=1,u=O.length;!O[--u];O.pop());for(u=O[0];u>=10;u/=10,y++);return(x=y+x*Me-1)>d?_.c=_.e=null:x<f?_.c=[_.e=0]:(_.e=x,_.c=O),_}n=function(){var _=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,x=/^\.([^.]+)$/,y=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,b,g,h){var S,T=g?b:b.replace(u,"");if(y.test(T))p.s=isNaN(T)?null:T<0?-1:1;else{if(!g&&(T=T.replace(_,function(w,v,N){return S=(N=N.toLowerCase())=="x"?16:N=="b"?2:8,!h||h==S?v:w}),h&&(S=h,T=T.replace(O,"$1").replace(x,"0.$1")),b!=T))return new C(T,S);if(C.DEBUG)throw Error(Lr+"Not a"+(h?" base "+h:"")+" number: "+b);p.s=null}p.c=p.e=null}}();function j(_,O,x,y){var u,p,b,g,h,S,T,w=_.c,v=Ul;if(w){e:{for(u=1,g=w[0];g>=10;g/=10,u++);if(p=O-u,p<0)p+=Me,b=O,h=w[S=0],T=h/v[u-b-1]%10|0;else if(S=kl((p+1)/Me),S>=w.length)if(y){for(;w.length<=S;w.push(0));h=T=0,u=1,p%=Me,b=p-Me+1}else break e;else{for(h=g=w[S],u=1;g>=10;g/=10,u++);p%=Me,b=p-Me+u,T=b<0?0:h/v[u-b-1]%10|0}if(y=y||O<0||w[S+1]!=null||(b<0?h:h%v[u-b-1]),y=x<4?(T||y)&&(x==0||x==(_.s<0?3:2)):T>5||T==5&&(x==4||y||x==6&&(p>0?b>0?h/v[u-b]:0:w[S-1])%10&1||x==(_.s<0?8:7)),O<1||!w[0])return w.length=0,y?(O-=_.e+1,w[0]=v[(Me-O%Me)%Me],_.e=-O||0):w[0]=_.e=0,_;if(p==0?(w.length=S,g=1,S--):(w.length=S+1,g=v[Me-p],w[S]=b>0?Nn(h/v[u-b]%v[b])*g:0),y)for(;;)if(S==0){for(p=1,b=w[0];b>=10;b/=10,p++);for(b=w[0]+=g,g=1;b>=10;b/=10,g++);p!=g&&(_.e++,w[0]==hn&&(w[0]=1));break}else{if(w[S]+=g,w[S]!=hn)break;w[S--]=0,g=1}for(p=w.length;w[--p]===0;w.pop());}_.e>d?_.c=_.e=null:_.e<f&&(_.c=[_.e=0])}return _}function E(_){var O,x=_.e;return x===null?_.toString():(O=rn(_.c),O=x<=c||x>=l?Uc(O,x):gi(O,x,"0"),_.s<0?"-"+O:O)}return i.absoluteValue=i.abs=function(){var _=new C(this);return _.s<0&&(_.s=1),_},i.comparedTo=function(_,O){return bo(this,new C(_,O))},i.decimalPlaces=i.dp=function(_,O){var x,y,u,p=this;if(_!=null)return At(_,0,er),O==null?O=a:At(O,0,8),j(new C(p),_+p.e+1,O);if(!(x=p.c))return null;if(y=((u=x.length-1)-nn(this.e/Me))*Me,u=x[u])for(;u%10==0;u/=10,y--);return y<0&&(y=0),y},i.dividedBy=i.div=function(_,O){return e(this,new C(_,O),o,a)},i.dividedToIntegerBy=i.idiv=function(_,O){return e(this,new C(_,O),0,1)},i.exponentiatedBy=i.pow=function(_,O){var x,y,u,p,b,g,h,S,T,w=this;if(_=new C(_),_.c&&!_.isInteger())throw Error(Lr+"Exponent not an integer: "+E(_));if(O!=null&&(O=new C(O)),g=_.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!_.c||!_.c[0])return T=new C(Math.pow(+E(w),g?_.s*(2-Dc(_)):+E(_))),O?T.mod(O):T;if(h=_.s<0,O){if(O.c?!O.c[0]:!O.s)return new C(NaN);y=!h&&w.isInteger()&&O.isInteger(),y&&(w=w.mod(O))}else{if(_.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||g&&w.c[1]>=24e7:w.c[0]<8e13||g&&w.c[0]<=9999975e7)))return p=w.s<0&&Dc(_)?-0:0,w.e>-1&&(p=1/p),new C(h?1/p:p);L&&(p=kl(L/Me+2))}for(g?(x=new C(.5),h&&(_.s=1),S=Dc(_)):(u=Math.abs(+E(_)),S=u%2),T=new C(s);;){if(S){if(T=T.times(w),!T.c)break;p?T.c.length>p&&(T.c.length=p):y&&(T=T.mod(O))}if(u){if(u=Nn(u/2),u===0)break;S=u%2}else if(_=_.times(x),j(_,_.e+1,1),_.e>14)S=Dc(_);else{if(u=+E(_),u===0)break;S=u%2}w=w.times(w),p?w.c&&w.c.length>p&&(w.c.length=p):y&&(w=w.mod(O))}return y?T:(h&&(T=s.div(T)),O?T.mod(O):p?j(T,L,a,b):T)},i.integerValue=function(_){var O=new C(this);return _==null?_=a:At(_,0,8),j(O,O.e+1,_)},i.isEqualTo=i.eq=function(_,O){return bo(this,new C(_,O))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(_,O){return bo(this,new C(_,O))>0},i.isGreaterThanOrEqualTo=i.gte=function(_,O){return(O=bo(this,new C(_,O)))===1||O===0},i.isInteger=function(){return!!this.c&&nn(this.e/Me)>this.c.length-2},i.isLessThan=i.lt=function(_,O){return bo(this,new C(_,O))<0},i.isLessThanOrEqualTo=i.lte=function(_,O){return(O=bo(this,new C(_,O)))===-1||O===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(_,O){var x,y,u,p,b=this,g=b.s;if(_=new C(_,O),O=_.s,!g||!O)return new C(NaN);if(g!=O)return _.s=-O,b.plus(_);var h=b.e/Me,S=_.e/Me,T=b.c,w=_.c;if(!h||!S){if(!T||!w)return T?(_.s=-O,_):new C(w?b:NaN);if(!T[0]||!w[0])return w[0]?(_.s=-O,_):new C(T[0]?b:a==3?-0:0)}if(h=nn(h),S=nn(S),T=T.slice(),g=h-S){for((p=g<0)?(g=-g,u=T):(S=h,u=w),u.reverse(),O=g;O--;u.push(0));u.reverse()}else for(y=(p=(g=T.length)<(O=w.length))?g:O,g=O=0;O<y;O++)if(T[O]!=w[O]){p=T[O]<w[O];break}if(p&&(u=T,T=w,w=u,_.s=-_.s),O=(y=w.length)-(x=T.length),O>0)for(;O--;T[x++]=0);for(O=hn-1;y>g;){if(T[--y]<w[y]){for(x=y;x&&!T[--x];T[x]=O);--T[x],T[y]+=hn}T[y]-=w[y]}for(;T[0]==0;T.splice(0,1),--S);return T[0]?F(_,T,S):(_.s=a==3?-1:1,_.c=[_.e=0],_)},i.modulo=i.mod=function(_,O){var x,y,u=this;return _=new C(_,O),!u.c||!_.s||_.c&&!_.c[0]?new C(NaN):!_.c||u.c&&!u.c[0]?new C(u):(P==9?(y=_.s,_.s=1,x=e(u,_,0,3),_.s=y,x.s*=y):x=e(u,_,0,P),_=u.minus(x.times(_)),!_.c[0]&&P==1&&(_.s=u.s),_)},i.multipliedBy=i.times=function(_,O){var x,y,u,p,b,g,h,S,T,w,v,N,ee,Y,ne,se=this,ae=se.c,W=(_=new C(_,O)).c;if(!ae||!W||!ae[0]||!W[0])return!se.s||!_.s||ae&&!ae[0]&&!W||W&&!W[0]&&!ae?_.c=_.e=_.s=null:(_.s*=se.s,!ae||!W?_.c=_.e=null:(_.c=[0],_.e=0)),_;for(y=nn(se.e/Me)+nn(_.e/Me),_.s*=se.s,h=ae.length,w=W.length,h<w&&(ee=ae,ae=W,W=ee,u=h,h=w,w=u),u=h+w,ee=[];u--;ee.push(0));for(Y=hn,ne=Xi,u=w;--u>=0;){for(x=0,v=W[u]%ne,N=W[u]/ne|0,b=h,p=u+b;p>u;)S=ae[--b]%ne,T=ae[b]/ne|0,g=N*S+T*v,S=v*S+g%ne*ne+ee[p]+x,x=(S/Y|0)+(g/ne|0)+N*T,ee[p--]=S%Y;ee[p]=x}return x?++y:ee.splice(0,1),F(_,ee,y)},i.negated=function(){var _=new C(this);return _.s=-_.s||null,_},i.plus=function(_,O){var x,y=this,u=y.s;if(_=new C(_,O),O=_.s,!u||!O)return new C(NaN);if(u!=O)return _.s=-O,y.minus(_);var p=y.e/Me,b=_.e/Me,g=y.c,h=_.c;if(!p||!b){if(!g||!h)return new C(u/0);if(!g[0]||!h[0])return h[0]?_:new C(g[0]?y:u*0)}if(p=nn(p),b=nn(b),g=g.slice(),u=p-b){for(u>0?(b=p,x=h):(u=-u,x=g),x.reverse();u--;x.push(0));x.reverse()}for(u=g.length,O=h.length,u-O<0&&(x=h,h=g,g=x,O=u),u=0;O;)u=(g[--O]=g[O]+h[O]+u)/hn|0,g[O]=hn===g[O]?0:g[O]%hn;return u&&(g=[u].concat(g),++b),F(_,g,b)},i.precision=i.sd=function(_,O){var x,y,u,p=this;if(_!=null&&_!==!!_)return At(_,1,er),O==null?O=a:At(O,0,8),j(new C(p),_,O);if(!(x=p.c))return null;if(u=x.length-1,y=u*Me+1,u=x[u]){for(;u%10==0;u/=10,y--);for(u=x[0];u>=10;u/=10,y++);}return _&&p.e+1>y&&(y=p.e+1),y},i.shiftedBy=function(_){return At(_,-Dl,Dl),this.times("1e"+_)},i.squareRoot=i.sqrt=function(){var _,O,x,y,u,p=this,b=p.c,g=p.s,h=p.e,S=o+4,T=new C("0.5");if(g!==1||!b||!b[0])return new C(!g||g<0&&(!b||b[0])?NaN:b?p:1/0);if(g=Math.sqrt(+E(p)),g==0||g==1/0?(O=rn(b),(O.length+h)%2==0&&(O+="0"),g=Math.sqrt(+O),h=nn((h+1)/2)-(h<0||h%2),g==1/0?O="5e"+h:(O=g.toExponential(),O=O.slice(0,O.indexOf("e")+1)+h),x=new C(O)):x=new C(g+""),x.c[0]){for(h=x.e,g=h+S,g<3&&(g=0);;)if(u=x,x=T.times(u.plus(e(p,u,S,1))),rn(u.c).slice(0,g)===(O=rn(x.c)).slice(0,g))if(x.e<h&&--g,O=O.slice(g-3,g+1),O=="9999"||!y&&O=="4999"){if(!y&&(j(u,u.e+o+2,0),u.times(u).eq(p))){x=u;break}S+=4,g+=4,y=1}else{(!+O||!+O.slice(1)&&O.charAt(0)=="5")&&(j(x,x.e+o+2,1),_=!x.times(x).eq(p));break}}return j(x,x.e+o+1,a,_)},i.toExponential=function(_,O){return _!=null&&(At(_,0,er),_++),V(this,_,O,1)},i.toFixed=function(_,O){return _!=null&&(At(_,0,er),_=_+this.e+1),V(this,_,O)},i.toFormat=function(_,O,x){var y,u=this;if(x==null)_!=null&&O&&typeof O=="object"?(x=O,O=null):_&&typeof _=="object"?(x=_,_=O=null):x=H;else if(typeof x!="object")throw Error(Lr+"Argument not an object: "+x);if(y=u.toFixed(_,O),u.c){var p,b=y.split("."),g=+x.groupSize,h=+x.secondaryGroupSize,S=x.groupSeparator||"",T=b[0],w=b[1],v=u.s<0,N=v?T.slice(1):T,ee=N.length;if(h&&(p=g,g=h,h=p,ee-=p),g>0&&ee>0){for(p=ee%g||g,T=N.substr(0,p);p<ee;p+=g)T+=S+N.substr(p,g);h>0&&(T+=S+N.slice(p)),v&&(T="-"+T)}y=w?T+(x.decimalSeparator||"")+((h=+x.fractionGroupSize)?w.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):w):T}return(x.prefix||"")+y+(x.suffix||"")},i.toFraction=function(_){var O,x,y,u,p,b,g,h,S,T,w,v,N=this,ee=N.c;if(_!=null&&(g=new C(_),!g.isInteger()&&(g.c||g.s!==1)||g.lt(s)))throw Error(Lr+"Argument "+(g.isInteger()?"out of range: ":"not an integer: ")+E(g));if(!ee)return new C(N);for(O=new C(s),S=x=new C(s),y=h=new C(s),v=rn(ee),p=O.e=v.length-N.e-1,O.c[0]=Ul[(b=p%Me)<0?Me+b:b],_=!_||g.comparedTo(O)>0?p>0?O:S:g,b=d,d=1/0,g=new C(v),h.c[0]=0;T=e(g,O,0,1),u=x.plus(T.times(y)),u.comparedTo(_)!=1;)x=y,y=u,S=h.plus(T.times(u=S)),h=u,O=g.minus(T.times(u=O)),g=u;return u=e(_.minus(x),y,0,1),h=h.plus(u.times(S)),x=x.plus(u.times(y)),h.s=S.s=N.s,p=p*2,w=e(S,y,p,a).minus(N).abs().comparedTo(e(h,x,p,a).minus(N).abs())<1?[S,y]:[h,x],d=b,w},i.toNumber=function(){return+E(this)},i.toPrecision=function(_,O){return _!=null&&At(_,1,er),V(this,_,O,2)},i.toString=function(_){var O,x=this,y=x.s,u=x.e;return u===null?y?(O="Infinity",y<0&&(O="-"+O)):O="NaN":(_==null?O=u<=c||u>=l?Uc(rn(x.c),u):gi(rn(x.c),u,"0"):_===10&&G?(x=j(new C(x),o+u+1,a),O=gi(rn(x.c),x.e,"0")):(At(_,2,q.length,"Base"),O=r(gi(rn(x.c),u,"0"),10,_,y,!0)),y<0&&x.c[0]&&(O="-"+O)),O},i.valueOf=i.toJSON=function(){return E(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&C.set(t),C}function nn(t){var e=t|0;return t>0||t===e?e:e-1}function rn(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=Me-e.length;r--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function bo(t,e){var r,n,i=t.c,s=e.c,o=t.s,a=e.s,c=t.e,l=e.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function At(t,e,r,n){if(t<e||t>r||t!==Nn(t))throw Error(Lr+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Dc(t){var e=t.c.length-1;return nn(t.e/Me)==e&&t.c[e]%2!=0}function Uc(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function gi(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var be=Mb(),Gr={},ro={},hu={},pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.BrowserRandomSource=void 0;const Np=65536;class v_{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Np)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Np)));return r}}pu.BrowserRandomSource=v_;function m_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gu={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});function y_(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Ur.wipe=y_;const E_={},__=Object.freeze(Object.defineProperty({__proto__:null,default:E_},Symbol.toStringTag,{value:"Module"})),gc=Iy(__);Object.defineProperty(gu,"__esModule",{value:!0});gu.NodeRandomSource=void 0;const w_=Ur;class A_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof m_<"u"){const e=gc;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,w_.wipe)(r),n}}gu.NodeRandomSource=A_;Object.defineProperty(hu,"__esModule",{value:!0});hu.SystemRandomSource=void 0;const x_=pu,S_=gu;class R_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new x_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new S_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}hu.SystemRandomSource=R_;var De={},Lb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,f=a&65535,d=c>>>16&65535,I=c&65535;return f*I+(l*I+f*d<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Lb);Object.defineProperty(De,"__esModule",{value:!0});var Cb=Lb;function I_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}De.readInt16BE=I_;function T_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}De.readUint16BE=T_;function O_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}De.readInt16LE=O_;function P_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}De.readUint16LE=P_;function Bb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}De.writeUint16BE=Bb;De.writeInt16BE=Bb;function kb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}De.writeUint16LE=kb;De.writeInt16LE=kb;function Qd(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}De.readInt32BE=Qd;function Zd(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}De.readUint32BE=Zd;function eh(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}De.readInt32LE=eh;function th(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}De.readUint32LE=th;function Of(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}De.writeUint32BE=Of;De.writeInt32BE=Of;function Pf(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}De.writeUint32LE=Pf;De.writeInt32LE=Pf;function N_(t,e){e===void 0&&(e=0);var r=Qd(t,e),n=Qd(t,e+4);return r*4294967296+n-(n>>31)*4294967296}De.readInt64BE=N_;function M_(t,e){e===void 0&&(e=0);var r=Zd(t,e),n=Zd(t,e+4);return r*4294967296+n}De.readUint64BE=M_;function L_(t,e){e===void 0&&(e=0);var r=eh(t,e),n=eh(t,e+4);return n*4294967296+r-(r>>31)*4294967296}De.readInt64LE=L_;function C_(t,e){e===void 0&&(e=0);var r=th(t,e),n=th(t,e+4);return n*4294967296+r}De.readUint64LE=C_;function Db(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Of(t/4294967296>>>0,e,r),Of(t>>>0,e,r+4),e}De.writeUint64BE=Db;De.writeInt64BE=Db;function Ub(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Pf(t>>>0,e,r),Pf(t/4294967296>>>0,e,r+4),e}De.writeUint64LE=Ub;De.writeInt64LE=Ub;function B_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}De.readUintBE=B_;function k_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}De.readUintLE=k_;function D_(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Cb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}De.writeUintBE=D_;function U_(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Cb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}De.writeUintLE=U_;function K_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}De.readFloat32BE=K_;function H_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}De.readFloat32LE=H_;function F_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}De.readFloat64BE=F_;function j_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}De.readFloat64LE=j_;function G_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}De.writeFloat32BE=G_;function V_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}De.writeFloat32LE=V_;function q_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}De.writeFloat64BE=q_;function $_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}De.writeFloat64LE=$_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=hu,r=De,n=Ur;t.defaultRandomSource=new e.SystemRandomSource;function i(l,f=t.defaultRandomSource){return f.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const f=i(4,l),d=(0,r.readUint32LE)(f);return(0,n.wipe)(f),d}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=o,d=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let I="";const P=f.length,L=256-256%P;for(;l>0;){const H=i(Math.ceil(l*256/L),d);for(let q=0;q<H.length&&l>0;q++){const G=H[q];G<L&&(I+=f.charAt(G%P),l--)}(0,n.wipe)(H)}return I}t.randomString=a;function c(l,f=o,d=t.defaultRandomSource){const I=Math.ceil(l/(Math.log(f.length)/Math.LN2));return a(I,f,d)}t.randomStringForEntropy=c})(ro);var Kb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=Ur;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[f++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[f++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,d=l/536870912|0,I=l<<3,P=l%128<112?128:256;this._buffer[f]=128;for(var L=f+1;L<P-8;L++)this._buffer[L]=0;e.writeUint32BE(d,this._buffer,P-8),e.writeUint32BE(I,this._buffer,P-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)e.writeUint32BE(this._stateHi[L],c,L*8),e.writeUint32BE(this._stateLo[L],c,L*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,f,d,I,P){for(var L=l[0],H=l[1],q=l[2],G=l[3],C=l[4],V=l[5],U=l[6],F=l[7],j=f[0],E=f[1],_=f[2],O=f[3],x=f[4],y=f[5],u=f[6],p=f[7],b,g,h,S,T,w,v,N;P>=128;){for(var ee=0;ee<16;ee++){var Y=8*ee+I;a[ee]=e.readUint32BE(d,Y),c[ee]=e.readUint32BE(d,Y+4)}for(var ee=0;ee<80;ee++){var ne=L,se=H,ae=q,W=G,K=C,k=V,m=U,B=F,X=j,Z=E,ce=_,ie=O,de=x,ye=y,ue=u,Ee=p;if(b=F,g=p,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=(C>>>14|x<<32-14)^(C>>>18|x<<32-18)^(x>>>41-32|C<<32-(41-32)),g=(x>>>14|C<<32-14)^(x>>>18|C<<32-18)^(C>>>41-32|x<<32-(41-32)),T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,b=C&V^~C&U,g=x&y^~x&u,T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,b=i[ee*2],g=i[ee*2+1],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,b=a[ee%16],g=c[ee%16],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,h=v&65535|N<<16,S=T&65535|w<<16,b=h,g=S,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=(L>>>28|j<<32-28)^(j>>>34-32|L<<32-(34-32))^(j>>>39-32|L<<32-(39-32)),g=(j>>>28|L<<32-28)^(L>>>34-32|j<<32-(34-32))^(L>>>39-32|j<<32-(39-32)),T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,b=L&H^L&q^H&q,g=j&E^j&_^E&_,T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,B=v&65535|N<<16,Ee=T&65535|w<<16,b=W,g=ie,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=h,g=S,T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,W=v&65535|N<<16,ie=T&65535|w<<16,H=ne,q=se,G=ae,C=W,V=K,U=k,F=m,L=B,E=X,_=Z,O=ce,x=ie,y=de,u=ye,p=ue,j=Ee,ee%16===15)for(var Y=0;Y<16;Y++)b=a[Y],g=c[Y],T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=a[(Y+9)%16],g=c[(Y+9)%16],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,h=a[(Y+1)%16],S=c[(Y+1)%16],b=(h>>>1|S<<32-1)^(h>>>8|S<<32-8)^h>>>7,g=(S>>>1|h<<32-1)^(S>>>8|h<<32-8)^(S>>>7|h<<32-7),T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,h=a[(Y+14)%16],S=c[(Y+14)%16],b=(h>>>19|S<<32-19)^(S>>>61-32|h<<32-(61-32))^h>>>6,g=(S>>>19|h<<32-19)^(h>>>61-32|S<<32-(61-32))^(S>>>6|h<<32-6),T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,a[Y]=v&65535|N<<16,c[Y]=T&65535|w<<16}b=L,g=j,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[0],g=f[0],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[0]=L=v&65535|N<<16,f[0]=j=T&65535|w<<16,b=H,g=E,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[1],g=f[1],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[1]=H=v&65535|N<<16,f[1]=E=T&65535|w<<16,b=q,g=_,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[2],g=f[2],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[2]=q=v&65535|N<<16,f[2]=_=T&65535|w<<16,b=G,g=O,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[3],g=f[3],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[3]=G=v&65535|N<<16,f[3]=O=T&65535|w<<16,b=C,g=x,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[4],g=f[4],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[4]=C=v&65535|N<<16,f[4]=x=T&65535|w<<16,b=V,g=y,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[5],g=f[5],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[5]=V=v&65535|N<<16,f[5]=y=T&65535|w<<16,b=U,g=u,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[6],g=f[6],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[6]=U=v&65535|N<<16,f[6]=u=T&65535|w<<16,b=F,g=p,T=g&65535,w=g>>>16,v=b&65535,N=b>>>16,b=l[7],g=f[7],T+=g&65535,w+=g>>>16,v+=b&65535,N+=b>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[7]=F=v&65535|N<<16,f[7]=p=T&65535|w<<16,I+=128,P-=128}return I}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Kb);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=ro,r=Kb,n=Ur;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(W){const K=new Float64Array(16);if(W)for(let k=0;k<W.length;k++)K[k]=W[k];return K}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(W,K){for(let k=0;k<16;k++)W[k]=K[k]|0}function L(W){let K=1;for(let k=0;k<16;k++){let m=W[k]+K+65535;K=Math.floor(m/65536),W[k]=m-K*65536}W[0]+=K-1+37*(K-1)}function H(W,K,k){const m=~(k-1);for(let B=0;B<16;B++){const X=m&(W[B]^K[B]);W[B]^=X,K[B]^=X}}function q(W,K){const k=i(),m=i();for(let B=0;B<16;B++)m[B]=K[B];L(m),L(m),L(m);for(let B=0;B<2;B++){k[0]=m[0]-65517;for(let Z=1;Z<15;Z++)k[Z]=m[Z]-65535-(k[Z-1]>>16&1),k[Z-1]&=65535;k[15]=m[15]-32767-(k[14]>>16&1);const X=k[15]>>16&1;k[14]&=65535,H(m,k,1-X)}for(let B=0;B<16;B++)W[2*B]=m[B]&255,W[2*B+1]=m[B]>>8}function G(W,K){let k=0;for(let m=0;m<32;m++)k|=W[m]^K[m];return(1&k-1>>>8)-1}function C(W,K){const k=new Uint8Array(32),m=new Uint8Array(32);return q(k,W),q(m,K),G(k,m)}function V(W){const K=new Uint8Array(32);return q(K,W),K[0]&1}function U(W,K){for(let k=0;k<16;k++)W[k]=K[2*k]+(K[2*k+1]<<8);W[15]&=32767}function F(W,K,k){for(let m=0;m<16;m++)W[m]=K[m]+k[m]}function j(W,K,k){for(let m=0;m<16;m++)W[m]=K[m]-k[m]}function E(W,K,k){let m,B,X=0,Z=0,ce=0,ie=0,de=0,ye=0,ue=0,Ee=0,xe=0,me=0,ge=0,Oe=0,ve=0,he=0,Ne=0,M=0,A=0,R=0,D=0,$=0,Q=0,te=0,le=0,Ae=0,we=0,Se=0,Fe=0,gt=0,mt=0,uo=0,wt=0,je=k[0],Vt=k[1],Ge=k[2],Ve=k[3],qt=k[4],qe=k[5],$e=k[6],$t=k[7],ze=k[8],We=k[9],zt=k[10],Xe=k[11],Je=k[12],Wt=k[13],Ye=k[14],Qe=k[15];m=K[0],X+=m*je,Z+=m*Vt,ce+=m*Ge,ie+=m*Ve,de+=m*qt,ye+=m*qe,ue+=m*$e,Ee+=m*$t,xe+=m*ze,me+=m*We,ge+=m*zt,Oe+=m*Xe,ve+=m*Je,he+=m*Wt,Ne+=m*Ye,M+=m*Qe,m=K[1],Z+=m*je,ce+=m*Vt,ie+=m*Ge,de+=m*Ve,ye+=m*qt,ue+=m*qe,Ee+=m*$e,xe+=m*$t,me+=m*ze,ge+=m*We,Oe+=m*zt,ve+=m*Xe,he+=m*Je,Ne+=m*Wt,M+=m*Ye,A+=m*Qe,m=K[2],ce+=m*je,ie+=m*Vt,de+=m*Ge,ye+=m*Ve,ue+=m*qt,Ee+=m*qe,xe+=m*$e,me+=m*$t,ge+=m*ze,Oe+=m*We,ve+=m*zt,he+=m*Xe,Ne+=m*Je,M+=m*Wt,A+=m*Ye,R+=m*Qe,m=K[3],ie+=m*je,de+=m*Vt,ye+=m*Ge,ue+=m*Ve,Ee+=m*qt,xe+=m*qe,me+=m*$e,ge+=m*$t,Oe+=m*ze,ve+=m*We,he+=m*zt,Ne+=m*Xe,M+=m*Je,A+=m*Wt,R+=m*Ye,D+=m*Qe,m=K[4],de+=m*je,ye+=m*Vt,ue+=m*Ge,Ee+=m*Ve,xe+=m*qt,me+=m*qe,ge+=m*$e,Oe+=m*$t,ve+=m*ze,he+=m*We,Ne+=m*zt,M+=m*Xe,A+=m*Je,R+=m*Wt,D+=m*Ye,$+=m*Qe,m=K[5],ye+=m*je,ue+=m*Vt,Ee+=m*Ge,xe+=m*Ve,me+=m*qt,ge+=m*qe,Oe+=m*$e,ve+=m*$t,he+=m*ze,Ne+=m*We,M+=m*zt,A+=m*Xe,R+=m*Je,D+=m*Wt,$+=m*Ye,Q+=m*Qe,m=K[6],ue+=m*je,Ee+=m*Vt,xe+=m*Ge,me+=m*Ve,ge+=m*qt,Oe+=m*qe,ve+=m*$e,he+=m*$t,Ne+=m*ze,M+=m*We,A+=m*zt,R+=m*Xe,D+=m*Je,$+=m*Wt,Q+=m*Ye,te+=m*Qe,m=K[7],Ee+=m*je,xe+=m*Vt,me+=m*Ge,ge+=m*Ve,Oe+=m*qt,ve+=m*qe,he+=m*$e,Ne+=m*$t,M+=m*ze,A+=m*We,R+=m*zt,D+=m*Xe,$+=m*Je,Q+=m*Wt,te+=m*Ye,le+=m*Qe,m=K[8],xe+=m*je,me+=m*Vt,ge+=m*Ge,Oe+=m*Ve,ve+=m*qt,he+=m*qe,Ne+=m*$e,M+=m*$t,A+=m*ze,R+=m*We,D+=m*zt,$+=m*Xe,Q+=m*Je,te+=m*Wt,le+=m*Ye,Ae+=m*Qe,m=K[9],me+=m*je,ge+=m*Vt,Oe+=m*Ge,ve+=m*Ve,he+=m*qt,Ne+=m*qe,M+=m*$e,A+=m*$t,R+=m*ze,D+=m*We,$+=m*zt,Q+=m*Xe,te+=m*Je,le+=m*Wt,Ae+=m*Ye,we+=m*Qe,m=K[10],ge+=m*je,Oe+=m*Vt,ve+=m*Ge,he+=m*Ve,Ne+=m*qt,M+=m*qe,A+=m*$e,R+=m*$t,D+=m*ze,$+=m*We,Q+=m*zt,te+=m*Xe,le+=m*Je,Ae+=m*Wt,we+=m*Ye,Se+=m*Qe,m=K[11],Oe+=m*je,ve+=m*Vt,he+=m*Ge,Ne+=m*Ve,M+=m*qt,A+=m*qe,R+=m*$e,D+=m*$t,$+=m*ze,Q+=m*We,te+=m*zt,le+=m*Xe,Ae+=m*Je,we+=m*Wt,Se+=m*Ye,Fe+=m*Qe,m=K[12],ve+=m*je,he+=m*Vt,Ne+=m*Ge,M+=m*Ve,A+=m*qt,R+=m*qe,D+=m*$e,$+=m*$t,Q+=m*ze,te+=m*We,le+=m*zt,Ae+=m*Xe,we+=m*Je,Se+=m*Wt,Fe+=m*Ye,gt+=m*Qe,m=K[13],he+=m*je,Ne+=m*Vt,M+=m*Ge,A+=m*Ve,R+=m*qt,D+=m*qe,$+=m*$e,Q+=m*$t,te+=m*ze,le+=m*We,Ae+=m*zt,we+=m*Xe,Se+=m*Je,Fe+=m*Wt,gt+=m*Ye,mt+=m*Qe,m=K[14],Ne+=m*je,M+=m*Vt,A+=m*Ge,R+=m*Ve,D+=m*qt,$+=m*qe,Q+=m*$e,te+=m*$t,le+=m*ze,Ae+=m*We,we+=m*zt,Se+=m*Xe,Fe+=m*Je,gt+=m*Wt,mt+=m*Ye,uo+=m*Qe,m=K[15],M+=m*je,A+=m*Vt,R+=m*Ge,D+=m*Ve,$+=m*qt,Q+=m*qe,te+=m*$e,le+=m*$t,Ae+=m*ze,we+=m*We,Se+=m*zt,Fe+=m*Xe,gt+=m*Je,mt+=m*Wt,uo+=m*Ye,wt+=m*Qe,X+=38*A,Z+=38*R,ce+=38*D,ie+=38*$,de+=38*Q,ye+=38*te,ue+=38*le,Ee+=38*Ae,xe+=38*we,me+=38*Se,ge+=38*Fe,Oe+=38*gt,ve+=38*mt,he+=38*uo,Ne+=38*wt,B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=ce+B+65535,B=Math.floor(m/65536),ce=m-B*65536,m=ie+B+65535,B=Math.floor(m/65536),ie=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=ue+B+65535,B=Math.floor(m/65536),ue=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=xe+B+65535,B=Math.floor(m/65536),xe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=ge+B+65535,B=Math.floor(m/65536),ge=m-B*65536,m=Oe+B+65535,B=Math.floor(m/65536),Oe=m-B*65536,m=ve+B+65535,B=Math.floor(m/65536),ve=m-B*65536,m=he+B+65535,B=Math.floor(m/65536),he=m-B*65536,m=Ne+B+65535,B=Math.floor(m/65536),Ne=m-B*65536,m=M+B+65535,B=Math.floor(m/65536),M=m-B*65536,X+=B-1+37*(B-1),B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=ce+B+65535,B=Math.floor(m/65536),ce=m-B*65536,m=ie+B+65535,B=Math.floor(m/65536),ie=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=ue+B+65535,B=Math.floor(m/65536),ue=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=xe+B+65535,B=Math.floor(m/65536),xe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=ge+B+65535,B=Math.floor(m/65536),ge=m-B*65536,m=Oe+B+65535,B=Math.floor(m/65536),Oe=m-B*65536,m=ve+B+65535,B=Math.floor(m/65536),ve=m-B*65536,m=he+B+65535,B=Math.floor(m/65536),he=m-B*65536,m=Ne+B+65535,B=Math.floor(m/65536),Ne=m-B*65536,m=M+B+65535,B=Math.floor(m/65536),M=m-B*65536,X+=B-1+37*(B-1),W[0]=X,W[1]=Z,W[2]=ce,W[3]=ie,W[4]=de,W[5]=ye,W[6]=ue,W[7]=Ee,W[8]=xe,W[9]=me,W[10]=ge,W[11]=Oe,W[12]=ve,W[13]=he,W[14]=Ne,W[15]=M}function _(W,K){E(W,K,K)}function O(W,K){const k=i();let m;for(m=0;m<16;m++)k[m]=K[m];for(m=253;m>=0;m--)_(k,k),m!==2&&m!==4&&E(k,k,K);for(m=0;m<16;m++)W[m]=k[m]}function x(W,K){const k=i();let m;for(m=0;m<16;m++)k[m]=K[m];for(m=250;m>=0;m--)_(k,k),m!==1&&E(k,k,K);for(m=0;m<16;m++)W[m]=k[m]}function y(W,K){const k=i(),m=i(),B=i(),X=i(),Z=i(),ce=i(),ie=i(),de=i(),ye=i();j(k,W[1],W[0]),j(ye,K[1],K[0]),E(k,k,ye),F(m,W[0],W[1]),F(ye,K[0],K[1]),E(m,m,ye),E(B,W[3],K[3]),E(B,B,l),E(X,W[2],K[2]),F(X,X,X),j(Z,m,k),j(ce,X,B),F(ie,X,B),F(de,m,k),E(W[0],Z,ce),E(W[1],de,ie),E(W[2],ie,ce),E(W[3],Z,de)}function u(W,K,k){for(let m=0;m<4;m++)H(W[m],K[m],k)}function p(W,K){const k=i(),m=i(),B=i();O(B,K[2]),E(k,K[0],B),E(m,K[1],B),q(W,m),W[31]^=V(k)<<7}function b(W,K,k){P(W[0],o),P(W[1],a),P(W[2],a),P(W[3],o);for(let m=255;m>=0;--m){const B=k[m/8|0]>>(m&7)&1;u(W,K,B),y(K,W),y(W,W),u(W,K,B)}}function g(W,K){const k=[i(),i(),i(),i()];P(k[0],f),P(k[1],d),P(k[2],a),E(k[3],f,d),b(W,k,K)}function h(W){if(W.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const K=(0,r.hash)(W);K[0]&=248,K[31]&=127,K[31]|=64;const k=new Uint8Array(32),m=[i(),i(),i(),i()];g(m,K),p(k,m);const B=new Uint8Array(64);return B.set(W),B.set(k,32),{publicKey:k,secretKey:B}}t.generateKeyPairFromSeed=h;function S(W){const K=(0,e.randomBytes)(32,W),k=h(K);return(0,n.wipe)(K),k}t.generateKeyPair=S;function T(W){if(W.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(W.subarray(32))}t.extractPublicKeyFromSecretKey=T;const w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function v(W,K){let k,m,B,X;for(m=63;m>=32;--m){for(k=0,B=m-32,X=m-12;B<X;++B)K[B]+=k-16*K[m]*w[B-(m-32)],k=Math.floor((K[B]+128)/256),K[B]-=k*256;K[B]+=k,K[m]=0}for(k=0,B=0;B<32;B++)K[B]+=k-(K[31]>>4)*w[B],k=K[B]>>8,K[B]&=255;for(B=0;B<32;B++)K[B]-=k*w[B];for(m=0;m<32;m++)K[m+1]+=K[m]>>8,W[m]=K[m]&255}function N(W){const K=new Float64Array(64);for(let k=0;k<64;k++)K[k]=W[k];for(let k=0;k<64;k++)W[k]=0;v(W,K)}function ee(W,K){const k=new Float64Array(64),m=[i(),i(),i(),i()],B=(0,r.hash)(W.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const X=new Uint8Array(64);X.set(B.subarray(32),32);const Z=new r.SHA512;Z.update(X.subarray(32)),Z.update(K);const ce=Z.digest();Z.clean(),N(ce),g(m,ce),p(X,m),Z.reset(),Z.update(X.subarray(0,32)),Z.update(W.subarray(32)),Z.update(K);const ie=Z.digest();N(ie);for(let de=0;de<32;de++)k[de]=ce[de];for(let de=0;de<32;de++)for(let ye=0;ye<32;ye++)k[de+ye]+=ie[de]*B[ye];return v(X.subarray(32),k),X}t.sign=ee;function Y(W,K){const k=i(),m=i(),B=i(),X=i(),Z=i(),ce=i(),ie=i();return P(W[2],a),U(W[1],K),_(B,W[1]),E(X,B,c),j(B,B,W[2]),F(X,W[2],X),_(Z,X),_(ce,Z),E(ie,ce,Z),E(k,ie,B),E(k,k,X),x(k,k),E(k,k,B),E(k,k,X),E(k,k,X),E(W[0],k,X),_(m,W[0]),E(m,m,X),C(m,B)&&E(W[0],W[0],I),_(m,W[0]),E(m,m,X),C(m,B)?-1:(V(W[0])===K[31]>>7&&j(W[0],o,W[0]),E(W[3],W[0],W[1]),0)}function ne(W,K,k){const m=new Uint8Array(32),B=[i(),i(),i(),i()],X=[i(),i(),i(),i()];if(k.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Y(X,W))return!1;const Z=new r.SHA512;Z.update(k.subarray(0,32)),Z.update(W),Z.update(K);const ce=Z.digest();return N(ce),b(B,X,ce),g(X,k.subarray(32)),y(B,X),p(m,B),!G(k,m)}t.verify=ne;function se(W){let K=[i(),i(),i(),i()];if(Y(K,W))throw new Error("Ed25519: invalid public key");let k=i(),m=i(),B=K[1];F(k,a,B),j(m,a,B),O(m,m),E(k,k,m);let X=new Uint8Array(32);return q(X,k),X}t.convertPublicKeyToX25519=se;function ae(W){const K=(0,r.hash)(W.subarray(0,32));K[0]&=248,K[31]&=127,K[31]|=64;const k=new Uint8Array(K.subarray(0,32));return(0,n.wipe)(K),k}t.convertSecretKeyToX25519=ae})(Gr);var cn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=Ur;t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function a(c,l){if(c===void 0&&(c=64),this.digestLength=c,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),c<1||c>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");l&&this.validateConfig(l);var f=0;l&&l.key&&(f=l.key.length);var d=1,I=1;l&&l.tree&&(d=l.tree.fanout,I=l.tree.maxDepth),this._state[0]^=c|f<<8|d<<16|I<<24,l&&l.tree&&(this._state[1]^=l.tree.leafSize,this._state[2]^=l.tree.nodeOffsetLowBits,this._state[3]^=l.tree.nodeOffsetHighBits,this._state[4]^=l.tree.nodeDepth|l.tree.innerDigestLength<<8,this._lastNode=l.tree.lastNode),l&&l.salt&&(this._state[8]^=e.readUint32LE(l.salt,0),this._state[9]^=e.readUint32LE(l.salt,4),this._state[10]^=e.readUint32LE(l.salt,8),this._state[11]^=e.readUint32LE(l.salt,12)),l&&l.personalization&&(this._state[12]^=e.readUint32LE(l.personalization,0),this._state[13]^=e.readUint32LE(l.personalization,4),this._state[14]^=e.readUint32LE(l.personalization,8),this._state[15]^=e.readUint32LE(l.personalization,12)),this._initialState=new Uint32Array(this._state),l&&l.key&&f>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(l.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return a.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},a.prototype.validateConfig=function(c){if(c.key&&c.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(c.salt&&c.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(c.personalization&&c.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(c.tree){if(c.tree.fanout<0||c.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(c.tree.maxDepth<0||c.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(c.tree.leafSize<0||c.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(c.tree.innerDigestLength<0||c.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var f=t.BLOCK_SIZE-this._bufferLength,d=0;if(l===0)return this;if(l>f){for(var I=0;I<f;I++)this._buffer[this._bufferLength+I]=c[d+I];this._processBlock(t.BLOCK_SIZE),d+=f,l-=f,this._bufferLength=0}for(;l>t.BLOCK_SIZE;){for(var I=0;I<t.BLOCK_SIZE;I++)this._buffer[I]=c[d+I];this._processBlock(t.BLOCK_SIZE),d+=t.BLOCK_SIZE,l-=t.BLOCK_SIZE,this._bufferLength=0}for(var I=0;I<l;I++)this._buffer[this._bufferLength+I]=c[d+I];return this._bufferLength+=l,this},a.prototype.finish=function(c){if(!this._finished){for(var l=this._bufferLength;l<t.BLOCK_SIZE;l++)this._buffer[l]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var f=this._buffer.subarray(0,64),l=0;l<16;l++)e.writeUint32LE(this._state[l],f,l*4);return c.set(f.subarray(0,c.length)),this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},a.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._buffer.set(c.buffer),this._bufferLength=c.bufferLength,this._ctr.set(c.ctr),this._flag.set(c.flag),this._lastNode=c.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=c.paddedKey?new Uint8Array(c.paddedKey):void 0,this._initialState.set(c.initialState),this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),r.wipe(c.buffer),r.wipe(c.initialState),c.paddedKey&&r.wipe(c.paddedKey),c.bufferLength=0,r.wipe(c.ctr),r.wipe(c.flag),c.lastNode=!1},a.prototype._G=function(c,l,f,d,I,P,L,H,q,G,C,V,U){var F=c[l],j=c[P],E=c[f],_=c[L],O=c[d],x=c[H],y=c[I],u=c[q],p=F&65535,b=F>>>16,g=j&65535,h=j>>>16;p+=E&65535,b+=E>>>16,g+=_&65535,h+=_>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,j=g&65535|h<<16,F=p&65535|b<<16,p=F&65535,b=F>>>16,g=j&65535,h=j>>>16,p+=G&65535,b+=G>>>16,g+=C&65535,h+=C>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,j=g&65535|h<<16,F=p&65535|b<<16,y^=F,u^=j,p=u,u=y,y=p,p=O&65535,b=O>>>16,g=x&65535,h=x>>>16,p+=y&65535,b+=y>>>16,g+=u&65535,h+=u>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,x=g&65535|h<<16,O=p&65535|b<<16,E^=O,_^=x,p=E<<8|_>>>24,E=_<<8|E>>>24,_=p,p=F&65535,b=F>>>16,g=j&65535,h=j>>>16,p+=E&65535,b+=E>>>16,g+=_&65535,h+=_>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,j=g&65535|h<<16,F=p&65535|b<<16,p=F&65535,b=F>>>16,g=j&65535,h=j>>>16,p+=V&65535,b+=V>>>16,g+=U&65535,h+=U>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,j=g&65535|h<<16,F=p&65535|b<<16,y^=F,u^=j,p=y<<16|u>>>16,y=u<<16|y>>>16,u=p,p=O&65535,b=O>>>16,g=x&65535,h=x>>>16,p+=y&65535,b+=y>>>16,g+=u&65535,h+=u>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,x=g&65535|h<<16,O=p&65535|b<<16,E^=O,_^=x,p=_<<1|E>>>31,E=E<<1|_>>>31,_=p,c[l]=F,c[P]=j,c[f]=E,c[L]=_,c[d]=O,c[H]=x,c[I]=y,c[q]=u},a.prototype._incrementCounter=function(c){for(var l=0;l<3;l++){var f=this._ctr[l]+c;if(this._ctr[l]=f>>>0,this._ctr[l]===f)return;c=1}},a.prototype._processBlock=function(c){this._incrementCounter(c);var l=this._vtmp;l.set(this._state),l.set(n,16),l[12*2+0]^=this._ctr[0],l[12*2+1]^=this._ctr[1],l[13*2+0]^=this._ctr[2],l[13*2+1]^=this._ctr[3],l[14*2+0]^=this._flag[0],l[14*2+1]^=this._flag[1],l[15*2+0]^=this._flag[2],l[15*2+1]^=this._flag[3];for(var f=this._mtmp,d=0;d<32;d++)f[d]=e.readUint32LE(this._buffer,d*4);for(var I=0;I<12;I++)this._G(l,0,8,16,24,1,9,17,25,f[i[I][0]],f[i[I][0]+1],f[i[I][1]],f[i[I][1]+1]),this._G(l,2,10,18,26,3,11,19,27,f[i[I][2]],f[i[I][2]+1],f[i[I][3]],f[i[I][3]+1]),this._G(l,4,12,20,28,5,13,21,29,f[i[I][4]],f[i[I][4]+1],f[i[I][5]],f[i[I][5]+1]),this._G(l,6,14,22,30,7,15,23,31,f[i[I][6]],f[i[I][6]+1],f[i[I][7]],f[i[I][7]+1]),this._G(l,0,10,20,30,1,11,21,31,f[i[I][8]],f[i[I][8]+1],f[i[I][9]],f[i[I][9]+1]),this._G(l,2,12,22,24,3,13,23,25,f[i[I][10]],f[i[I][10]+1],f[i[I][11]],f[i[I][11]+1]),this._G(l,4,14,16,26,5,15,17,27,f[i[I][12]],f[i[I][12]+1],f[i[I][13]],f[i[I][13]+1]),this._G(l,6,8,18,28,7,9,19,29,f[i[I][14]],f[i[I][14]+1],f[i[I][15]],f[i[I][15]+1]);for(var d=0;d<16;d++)this._state[d]^=l[d]^l[d+16]},a}();t.BLAKE2b=s;function o(a,c,l){c===void 0&&(c=t.DIGEST_LENGTH);var f=new s(c,l);f.update(a);var d=f.digest();return f.clean(),d}t.hash=o})(cn);const z_="Input must be an string, Buffer or Uint8Array";function W_(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(z_);return e}function X_(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Kc(t){return(4294967296+t).toString(16).substring(1)}function J_(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=Kc(e[i]).toUpperCase(),n+=" ",n+=Kc(e[i+1]).toUpperCase();else if(r===64)n+=Kc(e[i+1]).toUpperCase(),n+=Kc(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function Y_(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Hb={normalizeInput:W_,toHex:X_,debugPrint:J_,testSpeed:Y_};const gf=Hb;function Hc(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function Mp(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function Fb(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ji(t,e,r,n,i,s){const o=ka[i],a=ka[i+1],c=ka[s],l=ka[s+1];Hc(Be,t,e),Mp(Be,t,o,a);let f=Be[n]^Be[t],d=Be[n+1]^Be[t+1];Be[n]=d,Be[n+1]=f,Hc(Be,r,n),f=Be[e]^Be[r],d=Be[e+1]^Be[r+1],Be[e]=f>>>24^d<<8,Be[e+1]=d>>>24^f<<8,Hc(Be,t,e),Mp(Be,t,c,l),f=Be[n]^Be[t],d=Be[n+1]^Be[t+1],Be[n]=f>>>16^d<<16,Be[n+1]=d>>>16^f<<16,Hc(Be,r,n),f=Be[e]^Be[r],d=Be[e+1]^Be[r+1],Be[e]=d>>>31^f<<1,Be[e+1]=f>>>31^d<<1}const jb=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Q_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],cr=new Uint8Array(Q_.map(function(t){return t*2})),Be=new Uint32Array(32),ka=new Uint32Array(32);function Gb(t,e){let r=0;for(r=0;r<16;r++)Be[r]=t.h[r],Be[r+16]=jb[r];for(Be[24]=Be[24]^t.t,Be[25]=Be[25]^t.t/4294967296,e&&(Be[28]=~Be[28],Be[29]=~Be[29]),r=0;r<32;r++)ka[r]=Fb(t.b,4*r);for(r=0;r<12;r++)Ji(0,8,16,24,cr[r*16+0],cr[r*16+1]),Ji(2,10,18,26,cr[r*16+2],cr[r*16+3]),Ji(4,12,20,28,cr[r*16+4],cr[r*16+5]),Ji(6,14,22,30,cr[r*16+6],cr[r*16+7]),Ji(0,10,20,30,cr[r*16+8],cr[r*16+9]),Ji(2,12,22,24,cr[r*16+10],cr[r*16+11]),Ji(4,14,16,26,cr[r*16+12],cr[r*16+13]),Ji(6,8,18,28,cr[r*16+14],cr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Be[r]^Be[r+16]}const Yi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Vb(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Yi.fill(0),Yi[0]=t,e&&(Yi[1]=e.length),Yi[2]=1,Yi[3]=1,r&&Yi.set(r,32),n&&Yi.set(n,48);for(let s=0;s<16;s++)i.h[s]=jb[s]^Fb(Yi,s*4);return e&&(Gh(i,e),i.c=128),i}function Gh(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,Gb(t,!1),t.c=0),t.b[t.c++]=e[r]}function qb(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Gb(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function $b(t,e,r,n,i){r=r||64,t=gf.normalizeInput(t),n&&(n=gf.normalizeInput(n)),i&&(i=gf.normalizeInput(i));const s=Vb(r,e,n,i);return Gh(s,t),qb(s)}function Z_(t,e,r,n,i){const s=$b(t,e,r,n,i);return gf.toHex(s)}var ew={blake2b:$b,blake2bHex:Z_,blake2bInit:Vb,blake2bUpdate:Gh,blake2bFinal:qb};const zb=Hb;function tw(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Qi(t,e,r,n,i,s){at[t]=at[t]+at[e]+i,at[n]=Fc(at[n]^at[t],16),at[r]=at[r]+at[n],at[e]=Fc(at[e]^at[r],12),at[t]=at[t]+at[e]+s,at[n]=Fc(at[n]^at[t],8),at[r]=at[r]+at[n],at[e]=Fc(at[e]^at[r],7)}function Fc(t,e){return t>>>e^t<<32-e}const Wb=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),at=new Uint32Array(16),sr=new Uint32Array(16);function Xb(t,e){let r=0;for(r=0;r<8;r++)at[r]=t.h[r],at[r+8]=Wb[r];for(at[12]^=t.t,at[13]^=t.t/4294967296,e&&(at[14]=~at[14]),r=0;r<16;r++)sr[r]=tw(t.b,4*r);for(r=0;r<10;r++)Qi(0,4,8,12,sr[fr[r*16+0]],sr[fr[r*16+1]]),Qi(1,5,9,13,sr[fr[r*16+2]],sr[fr[r*16+3]]),Qi(2,6,10,14,sr[fr[r*16+4]],sr[fr[r*16+5]]),Qi(3,7,11,15,sr[fr[r*16+6]],sr[fr[r*16+7]]),Qi(0,5,10,15,sr[fr[r*16+8]],sr[fr[r*16+9]]),Qi(1,6,11,12,sr[fr[r*16+10]],sr[fr[r*16+11]]),Qi(2,7,8,13,sr[fr[r*16+12]],sr[fr[r*16+13]]),Qi(3,4,9,14,sr[fr[r*16+14]],sr[fr[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=at[r]^at[r+8]}function Jb(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(Wb),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(Vh(n,e),n.c=64),n}function Vh(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,Xb(t,!1),t.c=0),t.b[t.c++]=e[r]}function Yb(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Xb(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function Qb(t,e,r){r=r||32,t=zb.normalizeInput(t);const n=Jb(r,e);return Vh(n,t),Yb(n)}function rw(t,e,r){const n=Qb(t,e,r);return zb.toHex(n)}var nw={blake2s:Qb,blake2sHex:rw,blake2sInit:Jb,blake2sUpdate:Vh,blake2sFinal:Yb};const ya=ew,Ea=nw;var iw={blake2b:ya.blake2b,blake2bHex:ya.blake2bHex,blake2bInit:ya.blake2bInit,blake2bUpdate:ya.blake2bUpdate,blake2bFinal:ya.blake2bFinal,blake2s:Ea.blake2s,blake2sHex:Ea.blake2sHex,blake2sInit:Ea.blake2sInit,blake2sUpdate:Ea.blake2sUpdate,blake2sFinal:Ea.blake2sFinal},Nt={},Lp={get exports(){return Nt},set exports(t){Nt=t}};typeof Object.create=="function"?Lp.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Lp.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var xr={},sw={get exports(){return xr},set exports(t){xr=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Fi,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(sw,xr);var Qa={},ow={get exports(){return Qa},set exports(t){Qa=t}},na={},Za={},aw={get exports(){return Za},set exports(t){Za=t}},Po=typeof Reflect=="object"?Reflect:null,Cp=Po&&typeof Po.apply=="function"?Po.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},bf;Po&&typeof Po.ownKeys=="function"?bf=Po.ownKeys:Object.getOwnPropertySymbols?bf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:bf=function(e){return Object.getOwnPropertyNames(e)};function cw(t){console&&console.warn&&console.warn(t)}var Zb=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}aw.exports=ht;Za.once=dw;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var Bp=10;function bu(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return Bp},set:function(t){if(typeof t!="number"||t<0||Zb(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Bp=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Zb(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ev(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return ev(this)};ht.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Cp(c,this,r);else for(var l=c.length,f=sv(c,l),n=0;n<l;++n)Cp(f[n],this,r);return!0};function tv(t,e,r,n){var i,s,o;if(bu(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=ev(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,cw(a)}return t}ht.prototype.addListener=function(e,r){return tv(this,e,r,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,r){return tv(this,e,r,!0)};function fw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rv(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=fw.bind(n);return i.listener=r,n.wrapFn=i,i}ht.prototype.once=function(e,r){return bu(r),this.on(e,rv(this,e,r)),this};ht.prototype.prependOnceListener=function(e,r){return bu(r),this.prependListener(e,rv(this,e,r)),this};ht.prototype.removeListener=function(e,r){var n,i,s,o,a;if(bu(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():uw(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function nv(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?lw(i):sv(i,i.length)}ht.prototype.listeners=function(e){return nv(this,e,!0)};ht.prototype.rawListeners=function(e){return nv(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):iv.call(t,e)};ht.prototype.listenerCount=iv;function iv(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?bf(this._events):[]};function sv(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function uw(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function lw(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function dw(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ov(t,e,s,{once:!0}),e!=="error"&&hw(t,i,{once:!0})})}function hw(t,e,r){typeof t.on=="function"&&ov(t,"error",e,r)}function ov(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var av=Za.EventEmitter,Kl,kp;function pw(){if(kp)return Kl;kp=1;function t(I,P){var L=Object.keys(I);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(I);P&&(H=H.filter(function(q){return Object.getOwnPropertyDescriptor(I,q).enumerable})),L.push.apply(L,H)}return L}function e(I){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?t(Object(L),!0).forEach(function(H){r(I,H,L[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(L)):t(Object(L)).forEach(function(H){Object.defineProperty(I,H,Object.getOwnPropertyDescriptor(L,H))})}return I}function r(I,P,L){return P in I?Object.defineProperty(I,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):I[P]=L,I}function n(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function i(I,P){for(var L=0;L<P.length;L++){var H=P[L];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(I,H.key,H)}}function s(I,P,L){return P&&i(I.prototype,P),L&&i(I,L),I}var o=Fi,a=o.Buffer,c=gc,l=c.inspect,f=l&&l.custom||"inspect";function d(I,P,L){a.prototype.copy.call(I,P,L)}return Kl=function(){function I(){n(this,I),this.head=null,this.tail=null,this.length=0}return s(I,[{key:"push",value:function(L){var H={data:L,next:null};this.length>0?this.tail.next=H:this.head=H,this.tail=H,++this.length}},{key:"unshift",value:function(L){var H={data:L,next:this.head};this.length===0&&(this.tail=H),this.head=H,++this.length}},{key:"shift",value:function(){if(this.length!==0){var L=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,L}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(L){if(this.length===0)return"";for(var H=this.head,q=""+H.data;H=H.next;)q+=L+H.data;return q}},{key:"concat",value:function(L){if(this.length===0)return a.alloc(0);for(var H=a.allocUnsafe(L>>>0),q=this.head,G=0;q;)d(q.data,H,G),G+=q.data.length,q=q.next;return H}},{key:"consume",value:function(L,H){var q;return L<this.head.data.length?(q=this.head.data.slice(0,L),this.head.data=this.head.data.slice(L)):L===this.head.data.length?q=this.shift():q=H?this._getString(L):this._getBuffer(L),q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(L){var H=this.head,q=1,G=H.data;for(L-=G.length;H=H.next;){var C=H.data,V=L>C.length?C.length:L;if(V===C.length?G+=C:G+=C.slice(0,L),L-=V,L===0){V===C.length?(++q,H.next?this.head=H.next:this.head=this.tail=null):(this.head=H,H.data=C.slice(V));break}++q}return this.length-=q,G}},{key:"_getBuffer",value:function(L){var H=a.allocUnsafe(L),q=this.head,G=1;for(q.data.copy(H),L-=q.data.length;q=q.next;){var C=q.data,V=L>C.length?C.length:L;if(C.copy(H,H.length-L,0,V),L-=V,L===0){V===C.length?(++G,q.next?this.head=q.next:this.head=this.tail=null):(this.head=q,q.data=C.slice(V));break}++G}return this.length-=G,H}},{key:f,value:function(L,H){return l(this,e({},H,{depth:0,customInspect:!1}))}}]),I}(),Kl}function gw(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(rh,this,t)):process.nextTick(rh,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(vf,r):(r._writableState.errorEmitted=!0,process.nextTick(Dp,r,s)):process.nextTick(Dp,r,s):e?(process.nextTick(vf,r),e(s)):process.nextTick(vf,r)}),this)}function Dp(t,e){rh(t,e),vf(t)}function vf(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function bw(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function rh(t,e){t.emit("error",e)}function vw(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var cv={destroy:gw,undestroy:bw,errorOrDestroy:vw},no={};function mw(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var fv={};function un(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){mw(o,s);function o(a,c,l){return s.call(this,n(a,c,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,fv[t]=i}function Up(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function yw(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Ew(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function _w(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}un("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);un("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&yw(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Ew(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Up(e,"type"));else{var s=_w(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(Up(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);un("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");un("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});un("ERR_STREAM_PREMATURE_CLOSE","Premature close");un("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});un("ERR_MULTIPLE_CALLBACK","Callback called multiple times");un("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");un("ERR_STREAM_WRITE_AFTER_END","write after end");un("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);un("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);un("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");no.codes=fv;var ww=no.codes.ERR_INVALID_OPT_VALUE;function Aw(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function xw(t,e,r,n){var i=Aw(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new ww(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var uv={getHighWaterMark:xw},vu={},qh=xr.Buffer,Kp=qh.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Sw(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Rw(t){var e=Sw(t);if(typeof e!="string"&&(qh.isEncoding===Kp||!Kp(t)))throw new Error("Unknown encoding: "+t);return e||t}vu.StringDecoder=bc;function bc(t){this.encoding=Rw(t);var e;switch(this.encoding){case"utf16le":this.text=Mw,this.end=Lw,e=4;break;case"utf8":this.fillLast=Ow,e=4;break;case"base64":this.text=Cw,this.end=Bw,e=3;break;default:this.write=kw,this.end=Dw;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=qh.allocUnsafe(e)}bc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};bc.prototype.end=Nw;bc.prototype.text=Pw;bc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Hl(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Iw(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Hl(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Hl(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Hl(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Tw(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function Ow(t){var e=this.lastTotal-this.lastNeed,r=Tw(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Pw(t,e){var r=Iw(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Nw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function Mw(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Lw(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Cw(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Bw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function kw(t){return t.toString(this.encoding)}function Dw(t){return t&&t.length?this.write(t):""}var Hp=no.codes.ERR_STREAM_PREMATURE_CLOSE;function Uw(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Kw(){}function Hw(t){return t.setHeader&&typeof t.abort=="function"}function lv(t,e,r){if(typeof e=="function")return lv(t,null,e);e||(e={}),r=Uw(r||Kw);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,i||r.call(t)},f=function(L){r.call(t,L)},d=function(){var L;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(L=new Hp),r.call(t,L);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(L=new Hp),r.call(t,L)},I=function(){t.req.on("finish",a)};return Hw(t)?(t.on("complete",a),t.on("abort",d),t.req?I():t.on("request",I)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",I),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",d)}}var $h=lv,Fl,Fp;function Fw(){if(Fp)return Fl;Fp=1;var t;function e(G,C,V){return C in G?Object.defineProperty(G,C,{value:V,enumerable:!0,configurable:!0,writable:!0}):G[C]=V,G}var r=$h,n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function f(G,C){return{value:G,done:C}}function d(G){var C=G[n];if(C!==null){var V=G[l].read();V!==null&&(G[a]=null,G[n]=null,G[i]=null,C(f(V,!1)))}}function I(G){process.nextTick(d,G)}function P(G,C){return function(V,U){G.then(function(){if(C[o]){V(f(void 0,!0));return}C[c](V,U)},U)}}var L=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((t={get stream(){return this[l]},next:function(){var C=this,V=this[s];if(V!==null)return Promise.reject(V);if(this[o])return Promise.resolve(f(void 0,!0));if(this[l].destroyed)return new Promise(function(E,_){process.nextTick(function(){C[s]?_(C[s]):E(f(void 0,!0))})});var U=this[a],F;if(U)F=new Promise(P(U,this));else{var j=this[l].read();if(j!==null)return Promise.resolve(f(j,!1));F=new Promise(this[c])}return this[a]=F,F}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var C=this;return new Promise(function(V,U){C[l].destroy(null,function(F){if(F){U(F);return}V(f(void 0,!0))})})}),t),L),q=function(C){var V,U=Object.create(H,(V={},e(V,l,{value:C,writable:!0}),e(V,n,{value:null,writable:!0}),e(V,i,{value:null,writable:!0}),e(V,s,{value:null,writable:!0}),e(V,o,{value:C._readableState.endEmitted,writable:!0}),e(V,c,{value:function(j,E){var _=U[l].read();_?(U[a]=null,U[n]=null,U[i]=null,j(f(_,!1))):(U[n]=j,U[i]=E)},writable:!0}),V));return U[a]=null,r(C,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=U[i];j!==null&&(U[a]=null,U[n]=null,U[i]=null,j(F)),U[s]=F;return}var E=U[n];E!==null&&(U[a]=null,U[n]=null,U[i]=null,E(f(void 0,!0))),U[o]=!0}),C.on("readable",I.bind(null,U)),U};return Fl=q,Fl}var jl,jp;function jw(){return jp||(jp=1,jl=function(){throw new Error("Readable.from is not available in the browser")}),jl}const zh=na;zh.Readable=ot;ot.ReadableState=hv;Za.EventEmitter;var dv=function(e,r){return e.listeners(r).length},vc=av,mu=Fi.Buffer,Gw={}.Uint8Array||function(){};function Vw(t){return mu.from(t)}function qw(t){return mu.isBuffer(t)||t instanceof Gw}var Gl=gc,He;Gl&&Gl.debuglog?He=Gl.debuglog("stream"):He=function(){};var $w=pw(),Wh=cv,zw=uv,Ww=zw.getHighWaterMark,yu=no.codes,Xw=yu.ERR_INVALID_ARG_TYPE,Jw=yu.ERR_STREAM_PUSH_AFTER_EOF,Yw=yu.ERR_METHOD_NOT_IMPLEMENTED,Qw=yu.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,No,Vl,ql;Nt(ot,vc);var Ha=Wh.errorOrDestroy,$l=["error","close","destroy","pause","resume"];function Zw(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function hv(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof zh.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Ww(this,t,"readableHighWaterMark",r),this.buffer=new $w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(No||(No=vu.StringDecoder),this.decoder=new No(t.encoding),this.encoding=t.encoding)}function ot(t){if(!(this instanceof ot))return new ot(t);var e=this instanceof zh.Duplex;this._readableState=new hv(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),vc.call(this)}Object.defineProperty(ot.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});ot.prototype.destroy=Wh.destroy;ot.prototype._undestroy=Wh.undestroy;ot.prototype._destroy=function(t,e){e(t)};ot.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=mu.from(t,e),e=""),n=!0),pv(this,t,e,!1,n)};ot.prototype.unshift=function(t){return pv(this,t,null,!0,!1)};function pv(t,e,r,n,i){He("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,r3(t,s);else{var o;if(i||(o=e3(s,e)),o)Ha(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==mu.prototype&&(e=Vw(e)),n)s.endEmitted?Ha(t,new Qw):zl(t,s,e,!0);else if(s.ended)Ha(t,new Jw);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?zl(t,s,e,!1):nh(t,s)):zl(t,s,e,!1)}else n||(s.reading=!1,nh(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function zl(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Eu(t)),nh(t,e)}function e3(t,e){var r;return!qw(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Xw("chunk",["string","Buffer","Uint8Array"],e)),r}ot.prototype.isPaused=function(){return this._readableState.flowing===!1};ot.prototype.setEncoding=function(t){No||(No=vu.StringDecoder);var e=new No(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Gp=1073741824;function t3(t){return t>=Gp?t=Gp:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Vp(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=t3(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ot.prototype.read=function(t){He("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return He("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Wl(this):Eu(this),null;if(t=Vp(t,e),t===0&&e.ended)return e.length===0&&Wl(this),null;var n=e.needReadable;He("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,He("length less than watermark",n)),e.ended||e.reading?(n=!1,He("reading or ended",n)):n&&(He("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Vp(r,e)));var i;return t>0?i=vv(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Wl(this)),i!==null&&this.emit("data",i),i};function r3(t,e){if(He("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Eu(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,gv(t)))}}function Eu(t){var e=t._readableState;He("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(He("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(gv,t))}function gv(t){var e=t._readableState;He("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Xh(t)}function nh(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(n3,t,e))}function n3(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(He("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ot.prototype._read=function(t){Ha(this,new Yw("_read()"))};ot.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,He("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:H;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(q,G){He("onunpipe"),q===r&&G&&G.hasUnpiped===!1&&(G.hasUnpiped=!0,f())}function a(){He("onend"),t.end()}var c=i3(r);t.on("drain",c);var l=!1;function f(){He("cleanup"),t.removeListener("close",P),t.removeListener("finish",L),t.removeListener("drain",c),t.removeListener("error",I),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",d),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",d);function d(q){He("ondata");var G=t.write(q);He("dest.write",G),G===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&mv(n.pipes,t)!==-1)&&!l&&(He("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function I(q){He("onerror",q),H(),t.removeListener("error",I),dv(t,"error")===0&&Ha(t,q)}Zw(t,"error",I);function P(){t.removeListener("finish",L),H()}t.once("close",P);function L(){He("onfinish"),t.removeListener("close",P),H()}t.once("finish",L);function H(){He("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(He("pipe resume"),r.resume()),t};function i3(t){return function(){var r=t._readableState;He("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&dv(t,"data")&&(r.flowing=!0,Xh(t))}}ot.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=mv(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};ot.prototype.on=function(t,e){var r=vc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,He("on readable",n.length,n.reading),n.length?Eu(this):n.reading||process.nextTick(s3,this)),r};ot.prototype.addListener=ot.prototype.on;ot.prototype.removeListener=function(t,e){var r=vc.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(bv,this),r};ot.prototype.removeAllListeners=function(t){var e=vc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(bv,this),e};function bv(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function s3(t){He("readable nexttick read 0"),t.read(0)}ot.prototype.resume=function(){var t=this._readableState;return t.flowing||(He("resume"),t.flowing=!t.readableListening,o3(this,t)),t.paused=!1,this};function o3(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(a3,t,e))}function a3(t,e){He("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Xh(t),e.flowing&&!e.reading&&t.read(0)}ot.prototype.pause=function(){return He("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(He("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Xh(t){var e=t._readableState;for(He("flow",e.flowing);e.flowing&&t.read()!==null;);}ot.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(He("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(He("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<$l.length;s++)t.on($l[s],this.emit.bind(this,$l[s]));return this._read=function(o){He("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(ot.prototype[Symbol.asyncIterator]=function(){return Vl===void 0&&(Vl=Fw()),Vl(this)});Object.defineProperty(ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(ot.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(ot.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});ot._fromList=vv;Object.defineProperty(ot.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function vv(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Wl(t){var e=t._readableState;He("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(c3,e,t))}function c3(t,e){if(He("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(ot.from=function(t,e){return ql===void 0&&(ql=jw()),ql(ot,t,e)});function mv(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var f3=u3;function u3(t,e){if(Xl("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Xl("throwDeprecation"))throw new Error(e);Xl("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Xl(t){try{if(!{}.localStorage)return!1}catch{return!1}var e={}.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}const Jh=na;Jh.Writable=Mt;function yv(t){var e=this;this.next=null,this.entry=null,this.finish=function(){D3(e,t)}}Mt.WritableState=mc;var l3={deprecate:f3},Ev=av,_u=Fi.Buffer,d3={}.Uint8Array||function(){};function h3(t){return _u.from(t)}function p3(t){return _u.isBuffer(t)||t instanceof d3}var Yh=cv,g3=uv,b3=g3.getHighWaterMark,Is=no.codes,v3=Is.ERR_INVALID_ARG_TYPE,m3=Is.ERR_METHOD_NOT_IMPLEMENTED,y3=Is.ERR_MULTIPLE_CALLBACK,E3=Is.ERR_STREAM_CANNOT_PIPE,_3=Is.ERR_STREAM_DESTROYED,w3=Is.ERR_STREAM_NULL_VALUES,A3=Is.ERR_STREAM_WRITE_AFTER_END,x3=Is.ERR_UNKNOWN_ENCODING,Uo=Yh.errorOrDestroy;Nt(Mt,Ev);function S3(){}function mc(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Jh.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=b3(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){M3(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new yv(this)}mc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(mc.prototype,"buffer",{get:l3.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var mf;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(mf=Function.prototype[Symbol.hasInstance],Object.defineProperty(Mt,Symbol.hasInstance,{value:function(e){return mf.call(this,e)?!0:this!==Mt?!1:e&&e._writableState instanceof mc}})):mf=function(e){return e instanceof this};function Mt(t){var e=this instanceof Jh.Duplex;if(!e&&!mf.call(Mt,this))return new Mt(t);this._writableState=new mc(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Ev.call(this)}Mt.prototype.pipe=function(){Uo(this,new E3)};function R3(t,e){var r=new A3;Uo(t,r),process.nextTick(e,r)}function I3(t,e,r,n){var i;return r===null?i=new w3:typeof r!="string"&&!e.objectMode&&(i=new v3("chunk",["string","Buffer"],r)),i?(Uo(t,i),process.nextTick(n,i),!1):!0}Mt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&p3(t);return s&&!_u.isBuffer(t)&&(t=h3(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=S3),n.ending?R3(this,r):(s||I3(this,n,t,r))&&(n.pendingcb++,i=O3(this,n,s,t,e,r)),i};Mt.prototype.cork=function(){this._writableState.corked++};Mt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&_v(this,t))};Mt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new x3(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Mt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function T3(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=_u.from(e,r)),e}Object.defineProperty(Mt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O3(t,e,r,n,i,s){if(!r){var o=T3(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else ih(t,e,!1,a,n,i,s);return c}function ih(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _3("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function P3(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(ec,t,e),t._writableState.errorEmitted=!0,Uo(t,n)):(i(n),t._writableState.errorEmitted=!0,Uo(t,n),ec(t,e))}function N3(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function M3(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new y3;if(N3(r),e)P3(t,r,n,e,i);else{var s=wv(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&_v(t,r),n?process.nextTick(qp,t,r,s,i):qp(t,r,s,i)}}function qp(t,e,r,n){r||L3(t,e),e.pendingcb--,n(),ec(t,e)}function L3(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _v(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,ih(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new yv(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback,d=e.objectMode?1:c.length;if(ih(t,e,!1,d,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Mt.prototype._write=function(t,e,r){r(new m3("_write()"))};Mt.prototype._writev=null;Mt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||k3(this,n,r),this};Object.defineProperty(Mt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function wv(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function C3(t,e){t._final(function(r){e.pendingcb--,r&&Uo(t,r),e.prefinished=!0,t.emit("prefinish"),ec(t,e)})}function B3(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(C3,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ec(t,e){var r=wv(e);if(r&&(B3(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function k3(t,e,r){e.ending=!0,ec(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function D3(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Mt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Mt.prototype.destroy=Yh.destroy;Mt.prototype._undestroy=Yh.undestroy;Mt.prototype._destroy=function(t,e){e(t)};var U3=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};const Ko=na;Ko.Duplex=si;Nt(si,Ko.Readable);for(var $p=U3(Ko.Writable.prototype),Jl=0;Jl<$p.length;Jl++){var Yl=$p[Jl];si.prototype[Yl]||(si.prototype[Yl]=Ko.Writable.prototype[Yl])}function si(t){if(!(this instanceof si))return new si(t);Ko.Readable.call(this,t),Ko.Writable.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",K3)))}Object.defineProperty(si.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(si.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(si.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K3(){this._writableState.ended||process.nextTick(H3,this)}function H3(t){t.end()}Object.defineProperty(si.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});const yc=na;yc.Transform=ji;var wu=no.codes,F3=wu.ERR_METHOD_NOT_IMPLEMENTED,j3=wu.ERR_MULTIPLE_CALLBACK,G3=wu.ERR_TRANSFORM_ALREADY_TRANSFORMING,V3=wu.ERR_TRANSFORM_WITH_LENGTH_0;Nt(ji,yc.Duplex);function q3(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new j3);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ji(t){if(!(this instanceof ji))return new ji(t);yc.Duplex.call(this,t),this._transformState={afterTransform:q3.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",$3)}function $3(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){zp(t,e,r)}):zp(this,null,null)}ji.prototype.push=function(t,e){return this._transformState.needTransform=!1,yc.Duplex.prototype.push.call(this,t,e)};ji.prototype._transform=function(t,e,r){r(new F3("_transform()"))};ji.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ji.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ji.prototype._destroy=function(t,e){yc.Duplex.prototype._destroy.call(this,t,function(r){e(r)})};function zp(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new V3;if(t._transformState.transforming)throw new G3;return t.push(null)}const Av=na;Av.PassThrough=tc;Nt(tc,Av.Transform);function tc(t){if(!(this instanceof tc))return new tc(t);Transform.call(this,t)}tc.prototype._transform=function(t,e,r){r(null,t)};var Ql;function z3(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var xv=no.codes,W3=xv.ERR_MISSING_ARGS,X3=xv.ERR_STREAM_DESTROYED;function Wp(t){if(t)throw t}function J3(t){return t.setHeader&&typeof t.abort=="function"}function Y3(t,e,r,n){n=z3(n);var i=!1;t.on("close",function(){i=!0}),Ql===void 0&&(Ql=$h),Ql(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,J3(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new X3("pipe"))}}}function Xp(t){t()}function Q3(t,e){return t.pipe(e)}function Z3(t){return!t.length||typeof t[t.length-1]!="function"?Wp:t.pop()}function e6(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=Z3(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new W3("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,l=a>0;return Y3(o,c,l,function(f){i||(i=f),f&&s.forEach(Xp),!c&&(s.forEach(Xp),n(i))})});return e.reduce(Q3)}var t6=e6;(function(t,e){const r=na;e=t.exports=r.Readable,e.Stream=r.Readable,e.Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.finished=$h,e.pipeline=t6})(ow,Qa);var Nf=xr.Buffer,Sv=Qa.Transform,r6=Nt;function n6(t,e){if(!Nf.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Ts(t){Sv.call(this),this._block=Nf.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r6(Ts,Sv);Ts.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Ts.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Ts.prototype.update=function(t,e){if(n6(t,"Data"),this._finalized)throw new Error("Digest already called");Nf.isBuffer(t)||(t=Nf.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,o=t.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};Ts.prototype._update=function(){throw new Error("_update is not implemented")};Ts.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Ts.prototype._digest=function(){throw new Error("_digest is not implemented")};var Rv=Ts,i6=Nt,Iv=Rv,s6=xr.Buffer,o6=new Array(16);function Au(){Iv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}i6(Au,Iv);Au.prototype._update=function(){for(var t=o6,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=ur(r,n,i,s,t[0],3614090360,7),s=ur(s,r,n,i,t[1],3905402710,12),i=ur(i,s,r,n,t[2],606105819,17),n=ur(n,i,s,r,t[3],3250441966,22),r=ur(r,n,i,s,t[4],4118548399,7),s=ur(s,r,n,i,t[5],1200080426,12),i=ur(i,s,r,n,t[6],2821735955,17),n=ur(n,i,s,r,t[7],4249261313,22),r=ur(r,n,i,s,t[8],1770035416,7),s=ur(s,r,n,i,t[9],2336552879,12),i=ur(i,s,r,n,t[10],4294925233,17),n=ur(n,i,s,r,t[11],2304563134,22),r=ur(r,n,i,s,t[12],1804603682,7),s=ur(s,r,n,i,t[13],4254626195,12),i=ur(i,s,r,n,t[14],2792965006,17),n=ur(n,i,s,r,t[15],1236535329,22),r=lr(r,n,i,s,t[1],4129170786,5),s=lr(s,r,n,i,t[6],3225465664,9),i=lr(i,s,r,n,t[11],643717713,14),n=lr(n,i,s,r,t[0],3921069994,20),r=lr(r,n,i,s,t[5],3593408605,5),s=lr(s,r,n,i,t[10],38016083,9),i=lr(i,s,r,n,t[15],3634488961,14),n=lr(n,i,s,r,t[4],3889429448,20),r=lr(r,n,i,s,t[9],568446438,5),s=lr(s,r,n,i,t[14],3275163606,9),i=lr(i,s,r,n,t[3],4107603335,14),n=lr(n,i,s,r,t[8],1163531501,20),r=lr(r,n,i,s,t[13],2850285829,5),s=lr(s,r,n,i,t[2],4243563512,9),i=lr(i,s,r,n,t[7],1735328473,14),n=lr(n,i,s,r,t[12],2368359562,20),r=dr(r,n,i,s,t[5],4294588738,4),s=dr(s,r,n,i,t[8],2272392833,11),i=dr(i,s,r,n,t[11],1839030562,16),n=dr(n,i,s,r,t[14],4259657740,23),r=dr(r,n,i,s,t[1],2763975236,4),s=dr(s,r,n,i,t[4],1272893353,11),i=dr(i,s,r,n,t[7],4139469664,16),n=dr(n,i,s,r,t[10],3200236656,23),r=dr(r,n,i,s,t[13],681279174,4),s=dr(s,r,n,i,t[0],3936430074,11),i=dr(i,s,r,n,t[3],3572445317,16),n=dr(n,i,s,r,t[6],76029189,23),r=dr(r,n,i,s,t[9],3654602809,4),s=dr(s,r,n,i,t[12],3873151461,11),i=dr(i,s,r,n,t[15],530742520,16),n=dr(n,i,s,r,t[2],3299628645,23),r=hr(r,n,i,s,t[0],4096336452,6),s=hr(s,r,n,i,t[7],1126891415,10),i=hr(i,s,r,n,t[14],2878612391,15),n=hr(n,i,s,r,t[5],4237533241,21),r=hr(r,n,i,s,t[12],1700485571,6),s=hr(s,r,n,i,t[3],2399980690,10),i=hr(i,s,r,n,t[10],4293915773,15),n=hr(n,i,s,r,t[1],2240044497,21),r=hr(r,n,i,s,t[8],1873313359,6),s=hr(s,r,n,i,t[15],4264355552,10),i=hr(i,s,r,n,t[6],2734768916,15),n=hr(n,i,s,r,t[13],1309151649,21),r=hr(r,n,i,s,t[4],4149444226,6),s=hr(s,r,n,i,t[11],3174756917,10),i=hr(i,s,r,n,t[2],718787259,15),n=hr(n,i,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0};Au.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=s6.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function xu(t,e){return t<<e|t>>>32-e}function ur(t,e,r,n,i,s,o){return xu(t+(e&r|~e&n)+i+s|0,o)+e|0}function lr(t,e,r,n,i,s,o){return xu(t+(e&n|r&~n)+i+s|0,o)+e|0}function dr(t,e,r,n,i,s,o){return xu(t+(e^r^n)+i+s|0,o)+e|0}function hr(t,e,r,n,i,s,o){return xu(t+(r^(e|~n))+i+s|0,o)+e|0}var a6=Au,Zl=Fi.Buffer,c6=Nt,Tv=Rv,f6=new Array(16),_a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],wa=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Aa=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],xa=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Sa=[0,1518500249,1859775393,2400959708,2840853838],Ra=[1352829926,1548603684,1836072691,2053994217,0];function Su(){Tv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}c6(Su,Tv);Su.prototype._update=function(){for(var t=f6,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._a|0,c=this._b|0,l=this._c|0,f=this._d|0,d=this._e|0,I=0;I<80;I+=1){var P,L;I<16?(P=Jp(r,n,i,s,o,t[_a[I]],Sa[0],Aa[I]),L=e1(a,c,l,f,d,t[wa[I]],Ra[0],xa[I])):I<32?(P=Yp(r,n,i,s,o,t[_a[I]],Sa[1],Aa[I]),L=Zp(a,c,l,f,d,t[wa[I]],Ra[1],xa[I])):I<48?(P=Qp(r,n,i,s,o,t[_a[I]],Sa[2],Aa[I]),L=Qp(a,c,l,f,d,t[wa[I]],Ra[2],xa[I])):I<64?(P=Zp(r,n,i,s,o,t[_a[I]],Sa[3],Aa[I]),L=Yp(a,c,l,f,d,t[wa[I]],Ra[3],xa[I])):(P=e1(r,n,i,s,o,t[_a[I]],Sa[4],Aa[I]),L=Jp(a,c,l,f,d,t[wa[I]],Ra[4],xa[I])),r=o,o=s,s=Js(i,10),i=n,n=P,a=d,d=f,f=Js(l,10),l=c,c=L}var H=this._b+i+f|0;this._b=this._c+s+d|0,this._c=this._d+o+a|0,this._d=this._e+r+c|0,this._e=this._a+n+l|0,this._a=H};Su.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Zl.alloc?Zl.alloc(20):new Zl(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function Js(t,e){return t<<e|t>>>32-e}function Jp(t,e,r,n,i,s,o,a){return Js(t+(e^r^n)+s+o|0,a)+i|0}function Yp(t,e,r,n,i,s,o,a){return Js(t+(e&r|~e&n)+s+o|0,a)+i|0}function Qp(t,e,r,n,i,s,o,a){return Js(t+((e|~r)^n)+s+o|0,a)+i|0}function Zp(t,e,r,n,i,s,o,a){return Js(t+(e&n|r&~n)+s+o|0,a)+i|0}function e1(t,e,r,n,i,s,o,a){return Js(t+(e^(r|~n))+s+o|0,a)+i|0}var u6=Su,sh={},l6={get exports(){return sh},set exports(t){sh=t}},Ov=xr.Buffer;function Ru(t,e){this._block=Ov.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Ru.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Ov.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,c=Math.min(i-o,n-a),l=0;l<c;l++)r[a+l]=t[o+l];s+=c,o+=c,s%n===0&&this._update(r)}return this._len+=i,this};Ru.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};Ru.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ia=Ru,d6=Nt,Pv=ia,h6=xr.Buffer,p6=[1518500249,1859775393,-1894007588,-899497514],g6=new Array(80);function Ec(){this.init(),this._w=g6,Pv.call(this,64,56)}d6(Ec,Pv);Ec.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function b6(t){return t<<5|t>>>27}function v6(t){return t<<30|t>>>2}function m6(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Ec.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var c=0;c<80;++c){var l=~~(c/20),f=b6(r)+m6(l,n,i,s)+o+e[c]+p6[l]|0;o=s,s=i,i=v6(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};Ec.prototype._hash=function(){var t=h6.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var y6=Ec,E6=Nt,Nv=ia,_6=xr.Buffer,w6=[1518500249,1859775393,-1894007588,-899497514],A6=new Array(80);function _c(){this.init(),this._w=A6,Nv.call(this,64,56)}E6(_c,Nv);_c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function x6(t){return t<<1|t>>>31}function S6(t){return t<<5|t>>>27}function R6(t){return t<<30|t>>>2}function I6(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}_c.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=x6(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var c=0;c<80;++c){var l=~~(c/20),f=S6(r)+I6(l,n,i,s)+o+e[c]+w6[l]|0;o=s,s=i,i=R6(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};_c.prototype._hash=function(){var t=_6.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var T6=_c,O6=Nt,Mv=ia,P6=xr.Buffer,N6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],M6=new Array(64);function wc(){this.init(),this._w=M6,Mv.call(this,64,56)}O6(wc,Mv);wc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function L6(t,e,r){return r^t&(e^r)}function C6(t,e,r){return t&e|r&(t|e)}function B6(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function k6(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function D6(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function U6(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}wc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,l=this._h|0,f=0;f<16;++f)e[f]=t.readInt32BE(f*4);for(;f<64;++f)e[f]=U6(e[f-2])+e[f-7]+D6(e[f-15])+e[f-16]|0;for(var d=0;d<64;++d){var I=l+k6(o)+L6(o,a,c)+N6[d]+e[d]|0,P=B6(r)+C6(r,n,i)|0;l=c,c=a,a=o,o=s+I|0,s=i,i=n,n=r,r=I+P|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0};wc.prototype._hash=function(){var t=P6.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Lv=wc,K6=Nt,H6=Lv,F6=ia,j6=xr.Buffer,G6=new Array(64);function Iu(){this.init(),this._w=G6,F6.call(this,64,56)}K6(Iu,H6);Iu.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Iu.prototype._hash=function(){var t=j6.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var V6=Iu,q6=Nt,Cv=ia,$6=xr.Buffer,t1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],z6=new Array(160);function Ac(){this.init(),this._w=z6,Cv.call(this,128,112)}q6(Ac,Cv);Ac.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function r1(t,e,r){return r^t&(e^r)}function n1(t,e,r){return t&e|r&(t|e)}function i1(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function s1(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function W6(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function X6(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function J6(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Y6(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function tr(t,e){return t>>>0<e>>>0?1:0}Ac.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,l=this._hh|0,f=this._al|0,d=this._bl|0,I=this._cl|0,P=this._dl|0,L=this._el|0,H=this._fl|0,q=this._gl|0,G=this._hl|0,C=0;C<32;C+=2)e[C]=t.readInt32BE(C*4),e[C+1]=t.readInt32BE(C*4+4);for(;C<160;C+=2){var V=e[C-30],U=e[C-15*2+1],F=W6(V,U),j=X6(U,V);V=e[C-2*2],U=e[C-2*2+1];var E=J6(V,U),_=Y6(U,V),O=e[C-7*2],x=e[C-7*2+1],y=e[C-16*2],u=e[C-16*2+1],p=j+x|0,b=F+O+tr(p,j)|0;p=p+_|0,b=b+E+tr(p,_)|0,p=p+u|0,b=b+y+tr(p,u)|0,e[C]=b,e[C+1]=p}for(var g=0;g<160;g+=2){b=e[g],p=e[g+1];var h=n1(r,n,i),S=n1(f,d,I),T=i1(r,f),w=i1(f,r),v=s1(o,L),N=s1(L,o),ee=t1[g],Y=t1[g+1],ne=r1(o,a,c),se=r1(L,H,q),ae=G+N|0,W=l+v+tr(ae,G)|0;ae=ae+se|0,W=W+ne+tr(ae,se)|0,ae=ae+Y|0,W=W+ee+tr(ae,Y)|0,ae=ae+p|0,W=W+b+tr(ae,p)|0;var K=w+S|0,k=T+h+tr(K,w)|0;l=c,G=q,c=a,q=H,a=o,H=L,L=P+ae|0,o=s+W+tr(L,P)|0,s=i,P=I,i=n,I=d,n=r,d=f,f=ae+K|0,r=W+k+tr(f,ae)|0}this._al=this._al+f|0,this._bl=this._bl+d|0,this._cl=this._cl+I|0,this._dl=this._dl+P|0,this._el=this._el+L|0,this._fl=this._fl+H|0,this._gl=this._gl+q|0,this._hl=this._hl+G|0,this._ah=this._ah+r+tr(this._al,f)|0,this._bh=this._bh+n+tr(this._bl,d)|0,this._ch=this._ch+i+tr(this._cl,I)|0,this._dh=this._dh+s+tr(this._dl,P)|0,this._eh=this._eh+o+tr(this._el,L)|0,this._fh=this._fh+a+tr(this._fl,H)|0,this._gh=this._gh+c+tr(this._gl,q)|0,this._hh=this._hh+l+tr(this._hl,G)|0};Ac.prototype._hash=function(){var t=$6.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var Bv=Ac,Q6=Nt,Z6=Bv,e5=ia,t5=xr.Buffer,r5=new Array(160);function Tu(){this.init(),this._w=r5,e5.call(this,128,112)}Q6(Tu,Z6);Tu.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Tu.prototype._hash=function(){var t=t5.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var n5=Tu,io=l6.exports=function(e){e=e.toLowerCase();var r=io[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};io.sha=y6;io.sha1=T6;io.sha224=V6;io.sha256=Lv;io.sha384=n5;io.sha512=Bv;var kv=xr.Buffer,Dv=Qa.Transform,i5=vu.StringDecoder,s5=Nt;function Pn(t){Dv.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}s5(Pn,Dv);Pn.prototype.update=function(t,e,r){typeof t=="string"&&(t=kv.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};Pn.prototype.setAutoPadding=function(){};Pn.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};Pn.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};Pn.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};Pn.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};Pn.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};Pn.prototype._finalOrDigest=function(t){var e=this.__final()||kv.alloc(0);return t&&(e=this._toString(e,t,!0)),e};Pn.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new i5(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var o5=Pn,a5=Nt,c5=a6,f5=u6,u5=sh,Uv=o5;function Ou(t){Uv.call(this,"digest"),this._hash=t}a5(Ou,Uv);Ou.prototype._update=function(t){this._hash.update(t)};Ou.prototype._final=function(){return this._hash.digest()};var l5=function(e){return e=e.toLowerCase(),e==="md5"?new c5:e==="rmd160"||e==="ripemd160"?new f5:new Ou(u5(e))},jc=xr.Buffer;function d5(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=jc.from(P)),!jc.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var L=0,H=0,q=0,G=P.length;q!==G&&P[q]===0;)q++,L++;for(var C=(G-q)*l+1>>>0,V=new Uint8Array(C);q!==G;){for(var U=P[q],F=0,j=C-1;(U!==0||F<H)&&j!==-1;j--,F++)U+=256*V[j]>>>0,V[j]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");H=F,q++}for(var E=C-H;E!==C&&V[E]===0;)E++;for(var _=a.repeat(L);E<C;++E)_+=t.charAt(V[E]);return _}function d(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return jc.alloc(0);for(var L=0,H=0,q=0;P[L]===a;)H++,L++;for(var G=(P.length-L)*c+1>>>0,C=new Uint8Array(G);P[L];){var V=e[P.charCodeAt(L)];if(V===255)return;for(var U=0,F=G-1;(V!==0||U<q)&&F!==-1;F--,U++)V+=o*C[F]>>>0,C[F]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");q=U,L++}for(var j=G-q;j!==G&&C[j]===0;)j++;var E=jc.allocUnsafe(H+(G-j));E.fill(0,0,H);for(var _=H;j!==G;)E[_++]=C[j++];return E}function I(P){var L=d(P);if(L)return L;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:d,decode:I}}var h5=d5,p5=h5,g5="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",b5=p5(g5),ed=b5,v5=xr.Buffer,m5=function(t){function e(s){var o=t(s);return ed.encode(v5.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),a=s.slice(-4),c=t(o);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return o}function n(s){var o=ed.decodeUnsafe(s);if(o)return r(o)}function i(s){var o=ed.decode(s),a=r(o);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}},o1=l5,y5=m5;function E5(t){var e=o1("sha256").update(t).digest();return o1("sha256").update(e).digest()}var Xr=y5(E5),_5={};const w5="elliptic",A5="6.5.4",x5="EC cryptography",S5="lib/elliptic.js",R5=["lib"],I5={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},T5={type:"git",url:"git@github.com:indutny/elliptic"},O5=["EC","Elliptic","curve","Cryptography"],P5="Fedor Indutny <fedor@indutny.com>",N5="MIT",M5={url:"https://github.com/indutny/elliptic/issues"},L5="https://github.com/indutny/elliptic",C5={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},B5={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},k5={name:w5,version:A5,description:x5,main:S5,files:R5,scripts:I5,repository:T5,keywords:O5,author:P5,license:N5,bugs:M5,homepage:L5,devDependencies:C5,dependencies:B5};var Qr={},In={},D5={get exports(){return In},set exports(t){In=t}};(function(t){(function(e,r){function n(y,u){if(!y)throw new Error(u||"Assertion failed")}function i(y,u){y.super_=u;var p=function(){};p.prototype=u.prototype,y.prototype=new p,y.prototype.constructor=y}function s(y,u,p){if(s.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(y||0,u||10,p||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=gc.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,p){return u.cmp(p)>0?u:p},s.min=function(u,p){return u.cmp(p)<0?u:p},s.prototype._init=function(u,p,b){if(typeof u=="number")return this._initNumber(u,p,b);if(typeof u=="object")return this._initArray(u,p,b);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var g=0;u[0]==="-"&&(g++,this.negative=1),g<u.length&&(p===16?this._parseHex(u,g,b):(this._parseBase(u,p,g),b==="le"&&this._initArray(this.toArray(),p,b)))},s.prototype._initNumber=function(u,p,b){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),p,b)},s.prototype._initArray=function(u,p,b){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var h,S,T=0;if(b==="be")for(g=u.length-1,h=0;g>=0;g-=3)S=u[g]|u[g-1]<<8|u[g-2]<<16,this.words[h]|=S<<T&67108863,this.words[h+1]=S>>>26-T&67108863,T+=24,T>=26&&(T-=26,h++);else if(b==="le")for(g=0,h=0;g<u.length;g+=3)S=u[g]|u[g+1]<<8|u[g+2]<<16,this.words[h]|=S<<T&67108863,this.words[h+1]=S>>>26-T&67108863,T+=24,T>=26&&(T-=26,h++);return this.strip()};function a(y,u){var p=y.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function c(y,u,p){var b=a(y,p);return p-1>=u&&(b|=a(y,p-1)<<4),b}s.prototype._parseHex=function(u,p,b){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var h=0,S=0,T;if(b==="be")for(g=u.length-1;g>=p;g-=2)T=c(u,p,g)<<h,this.words[S]|=T&67108863,h>=18?(h-=18,S+=1,this.words[S]|=T>>>26):h+=8;else{var w=u.length-p;for(g=w%2===0?p+1:p;g<u.length;g+=2)T=c(u,p,g)<<h,this.words[S]|=T&67108863,h>=18?(h-=18,S+=1,this.words[S]|=T>>>26):h+=8}this.strip()};function l(y,u,p,b){for(var g=0,h=Math.min(y.length,p),S=u;S<h;S++){var T=y.charCodeAt(S)-48;g*=b,T>=49?g+=T-49+10:T>=17?g+=T-17+10:g+=T}return g}s.prototype._parseBase=function(u,p,b){this.words=[0],this.length=1;for(var g=0,h=1;h<=67108863;h*=p)g++;g--,h=h/p|0;for(var S=u.length-b,T=S%g,w=Math.min(S,S-T)+b,v=0,N=b;N<w;N+=g)v=l(u,N,N+g,p),this.imuln(h),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(T!==0){var ee=1;for(v=l(u,N,u.length,p),N=0;N<T;N++)ee*=p;this.imuln(ee),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,p){u=u||10,p=p|0||1;var b;if(u===16||u==="hex"){b="";for(var g=0,h=0,S=0;S<this.length;S++){var T=this.words[S],w=((T<<g|h)&16777215).toString(16);h=T>>>24-g&16777215,h!==0||S!==this.length-1?b=f[6-w.length]+w+b:b=w+b,g+=2,g>=26&&(g-=26,S--)}for(h!==0&&(b=h.toString(16)+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(u===(u|0)&&u>=2&&u<=36){var v=d[u],N=I[u];b="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var Y=ee.modn(N).toString(u);ee=ee.idivn(N),ee.isZero()?b=Y+b:b=f[v-Y.length]+Y+b}for(this.isZero()&&(b="0"+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(u,p){return n(typeof o<"u"),this.toArrayLike(o,u,p)},s.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},s.prototype.toArrayLike=function(u,p,b){var g=this.byteLength(),h=b||Math.max(1,g);n(g<=h,"byte array longer than desired length"),n(h>0,"Requested array length <= 0"),this.strip();var S=p==="le",T=new u(h),w,v,N=this.clone();if(S){for(v=0;!N.isZero();v++)w=N.andln(255),N.iushrn(8),T[v]=w;for(;v<h;v++)T[v]=0}else{for(v=0;v<h-g;v++)T[v]=0;for(v=0;!N.isZero();v++)w=N.andln(255),N.iushrn(8),T[h-v-1]=w}return T},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var p=u,b=0;return p>=4096&&(b+=13,p>>>=13),p>=64&&(b+=7,p>>>=7),p>=8&&(b+=4,p>>>=4),p>=2&&(b+=2,p>>>=2),b+p},s.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,b=0;return p&8191||(b+=13,p>>>=13),p&127||(b+=7,p>>>=7),p&15||(b+=4,p>>>=4),p&3||(b+=2,p>>>=2),p&1||b++,b},s.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(y){for(var u=new Array(y.bitLength()),p=0;p<u.length;p++){var b=p/26|0,g=p%26;u[p]=(y.words[b]&1<<g)>>>g}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var b=this._zeroBits(this.words[p]);if(u+=b,b!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var b=0;b<p.length;b++)this.words[b]=this.words[b]&u.words[b];return this.length=p.length,this.strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var p,b;this.length>u.length?(p=this,b=u):(p=u,b=this);for(var g=0;g<b.length;g++)this.words[g]=p.words[g]^b.words[g];if(this!==p)for(;g<p.length;g++)this.words[g]=p.words[g];return this.length=p.length,this.strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,b=u%26;this._expand(p),b>0&&p--;for(var g=0;g<p;g++)this.words[g]=~this.words[g]&67108863;return b>0&&(this.words[g]=~this.words[g]&67108863>>26-b),this.strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,p){n(typeof u=="number"&&u>=0);var b=u/26|0,g=u%26;return this._expand(b+1),p?this.words[b]=this.words[b]|1<<g:this.words[b]=this.words[b]&~(1<<g),this.strip()},s.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var b,g;this.length>u.length?(b=this,g=u):(b=u,g=this);for(var h=0,S=0;S<g.length;S++)p=(b.words[S]|0)+(g.words[S]|0)+h,this.words[S]=p&67108863,h=p>>>26;for(;h!==0&&S<b.length;S++)p=(b.words[S]|0)+h,this.words[S]=p&67108863,h=p>>>26;if(this.length=b.length,h!==0)this.words[this.length]=h,this.length++;else if(b!==this)for(;S<b.length;S++)this.words[S]=b.words[S];return this},s.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var b=this.cmp(u);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,h;b>0?(g=this,h=u):(g=u,h=this);for(var S=0,T=0;T<h.length;T++)p=(g.words[T]|0)-(h.words[T]|0)+S,S=p>>26,this.words[T]=p&67108863;for(;S!==0&&T<g.length;T++)p=(g.words[T]|0)+S,S=p>>26,this.words[T]=p&67108863;if(S===0&&T<g.length&&g!==this)for(;T<g.length;T++)this.words[T]=g.words[T];return this.length=Math.max(this.length,T),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function L(y,u,p){p.negative=u.negative^y.negative;var b=y.length+u.length|0;p.length=b,b=b-1|0;var g=y.words[0]|0,h=u.words[0]|0,S=g*h,T=S&67108863,w=S/67108864|0;p.words[0]=T;for(var v=1;v<b;v++){for(var N=w>>>26,ee=w&67108863,Y=Math.min(v,u.length-1),ne=Math.max(0,v-y.length+1);ne<=Y;ne++){var se=v-ne|0;g=y.words[se]|0,h=u.words[ne]|0,S=g*h+ee,N+=S/67108864|0,ee=S&67108863}p.words[v]=ee|0,w=N|0}return w!==0?p.words[v]=w|0:p.length--,p.strip()}var H=function(u,p,b){var g=u.words,h=p.words,S=b.words,T=0,w,v,N,ee=g[0]|0,Y=ee&8191,ne=ee>>>13,se=g[1]|0,ae=se&8191,W=se>>>13,K=g[2]|0,k=K&8191,m=K>>>13,B=g[3]|0,X=B&8191,Z=B>>>13,ce=g[4]|0,ie=ce&8191,de=ce>>>13,ye=g[5]|0,ue=ye&8191,Ee=ye>>>13,xe=g[6]|0,me=xe&8191,ge=xe>>>13,Oe=g[7]|0,ve=Oe&8191,he=Oe>>>13,Ne=g[8]|0,M=Ne&8191,A=Ne>>>13,R=g[9]|0,D=R&8191,$=R>>>13,Q=h[0]|0,te=Q&8191,le=Q>>>13,Ae=h[1]|0,we=Ae&8191,Se=Ae>>>13,Fe=h[2]|0,gt=Fe&8191,mt=Fe>>>13,uo=h[3]|0,wt=uo&8191,je=uo>>>13,Vt=h[4]|0,Ge=Vt&8191,Ve=Vt>>>13,qt=h[5]|0,qe=qt&8191,$e=qt>>>13,$t=h[6]|0,ze=$t&8191,We=$t>>>13,zt=h[7]|0,Xe=zt&8191,Je=zt>>>13,Wt=h[8]|0,Ye=Wt&8191,Qe=Wt>>>13,tp=h[9]|0,Dt=tp&8191,Ut=tp>>>13;b.negative=u.negative^p.negative,b.length=19,w=Math.imul(Y,te),v=Math.imul(Y,le),v=v+Math.imul(ne,te)|0,N=Math.imul(ne,le);var tl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(tl>>>26)|0,tl&=67108863,w=Math.imul(ae,te),v=Math.imul(ae,le),v=v+Math.imul(W,te)|0,N=Math.imul(W,le),w=w+Math.imul(Y,we)|0,v=v+Math.imul(Y,Se)|0,v=v+Math.imul(ne,we)|0,N=N+Math.imul(ne,Se)|0;var rl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(rl>>>26)|0,rl&=67108863,w=Math.imul(k,te),v=Math.imul(k,le),v=v+Math.imul(m,te)|0,N=Math.imul(m,le),w=w+Math.imul(ae,we)|0,v=v+Math.imul(ae,Se)|0,v=v+Math.imul(W,we)|0,N=N+Math.imul(W,Se)|0,w=w+Math.imul(Y,gt)|0,v=v+Math.imul(Y,mt)|0,v=v+Math.imul(ne,gt)|0,N=N+Math.imul(ne,mt)|0;var nl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(nl>>>26)|0,nl&=67108863,w=Math.imul(X,te),v=Math.imul(X,le),v=v+Math.imul(Z,te)|0,N=Math.imul(Z,le),w=w+Math.imul(k,we)|0,v=v+Math.imul(k,Se)|0,v=v+Math.imul(m,we)|0,N=N+Math.imul(m,Se)|0,w=w+Math.imul(ae,gt)|0,v=v+Math.imul(ae,mt)|0,v=v+Math.imul(W,gt)|0,N=N+Math.imul(W,mt)|0,w=w+Math.imul(Y,wt)|0,v=v+Math.imul(Y,je)|0,v=v+Math.imul(ne,wt)|0,N=N+Math.imul(ne,je)|0;var il=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(il>>>26)|0,il&=67108863,w=Math.imul(ie,te),v=Math.imul(ie,le),v=v+Math.imul(de,te)|0,N=Math.imul(de,le),w=w+Math.imul(X,we)|0,v=v+Math.imul(X,Se)|0,v=v+Math.imul(Z,we)|0,N=N+Math.imul(Z,Se)|0,w=w+Math.imul(k,gt)|0,v=v+Math.imul(k,mt)|0,v=v+Math.imul(m,gt)|0,N=N+Math.imul(m,mt)|0,w=w+Math.imul(ae,wt)|0,v=v+Math.imul(ae,je)|0,v=v+Math.imul(W,wt)|0,N=N+Math.imul(W,je)|0,w=w+Math.imul(Y,Ge)|0,v=v+Math.imul(Y,Ve)|0,v=v+Math.imul(ne,Ge)|0,N=N+Math.imul(ne,Ve)|0;var sl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(sl>>>26)|0,sl&=67108863,w=Math.imul(ue,te),v=Math.imul(ue,le),v=v+Math.imul(Ee,te)|0,N=Math.imul(Ee,le),w=w+Math.imul(ie,we)|0,v=v+Math.imul(ie,Se)|0,v=v+Math.imul(de,we)|0,N=N+Math.imul(de,Se)|0,w=w+Math.imul(X,gt)|0,v=v+Math.imul(X,mt)|0,v=v+Math.imul(Z,gt)|0,N=N+Math.imul(Z,mt)|0,w=w+Math.imul(k,wt)|0,v=v+Math.imul(k,je)|0,v=v+Math.imul(m,wt)|0,N=N+Math.imul(m,je)|0,w=w+Math.imul(ae,Ge)|0,v=v+Math.imul(ae,Ve)|0,v=v+Math.imul(W,Ge)|0,N=N+Math.imul(W,Ve)|0,w=w+Math.imul(Y,qe)|0,v=v+Math.imul(Y,$e)|0,v=v+Math.imul(ne,qe)|0,N=N+Math.imul(ne,$e)|0;var ol=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ol>>>26)|0,ol&=67108863,w=Math.imul(me,te),v=Math.imul(me,le),v=v+Math.imul(ge,te)|0,N=Math.imul(ge,le),w=w+Math.imul(ue,we)|0,v=v+Math.imul(ue,Se)|0,v=v+Math.imul(Ee,we)|0,N=N+Math.imul(Ee,Se)|0,w=w+Math.imul(ie,gt)|0,v=v+Math.imul(ie,mt)|0,v=v+Math.imul(de,gt)|0,N=N+Math.imul(de,mt)|0,w=w+Math.imul(X,wt)|0,v=v+Math.imul(X,je)|0,v=v+Math.imul(Z,wt)|0,N=N+Math.imul(Z,je)|0,w=w+Math.imul(k,Ge)|0,v=v+Math.imul(k,Ve)|0,v=v+Math.imul(m,Ge)|0,N=N+Math.imul(m,Ve)|0,w=w+Math.imul(ae,qe)|0,v=v+Math.imul(ae,$e)|0,v=v+Math.imul(W,qe)|0,N=N+Math.imul(W,$e)|0,w=w+Math.imul(Y,ze)|0,v=v+Math.imul(Y,We)|0,v=v+Math.imul(ne,ze)|0,N=N+Math.imul(ne,We)|0;var al=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(al>>>26)|0,al&=67108863,w=Math.imul(ve,te),v=Math.imul(ve,le),v=v+Math.imul(he,te)|0,N=Math.imul(he,le),w=w+Math.imul(me,we)|0,v=v+Math.imul(me,Se)|0,v=v+Math.imul(ge,we)|0,N=N+Math.imul(ge,Se)|0,w=w+Math.imul(ue,gt)|0,v=v+Math.imul(ue,mt)|0,v=v+Math.imul(Ee,gt)|0,N=N+Math.imul(Ee,mt)|0,w=w+Math.imul(ie,wt)|0,v=v+Math.imul(ie,je)|0,v=v+Math.imul(de,wt)|0,N=N+Math.imul(de,je)|0,w=w+Math.imul(X,Ge)|0,v=v+Math.imul(X,Ve)|0,v=v+Math.imul(Z,Ge)|0,N=N+Math.imul(Z,Ve)|0,w=w+Math.imul(k,qe)|0,v=v+Math.imul(k,$e)|0,v=v+Math.imul(m,qe)|0,N=N+Math.imul(m,$e)|0,w=w+Math.imul(ae,ze)|0,v=v+Math.imul(ae,We)|0,v=v+Math.imul(W,ze)|0,N=N+Math.imul(W,We)|0,w=w+Math.imul(Y,Xe)|0,v=v+Math.imul(Y,Je)|0,v=v+Math.imul(ne,Xe)|0,N=N+Math.imul(ne,Je)|0;var cl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(cl>>>26)|0,cl&=67108863,w=Math.imul(M,te),v=Math.imul(M,le),v=v+Math.imul(A,te)|0,N=Math.imul(A,le),w=w+Math.imul(ve,we)|0,v=v+Math.imul(ve,Se)|0,v=v+Math.imul(he,we)|0,N=N+Math.imul(he,Se)|0,w=w+Math.imul(me,gt)|0,v=v+Math.imul(me,mt)|0,v=v+Math.imul(ge,gt)|0,N=N+Math.imul(ge,mt)|0,w=w+Math.imul(ue,wt)|0,v=v+Math.imul(ue,je)|0,v=v+Math.imul(Ee,wt)|0,N=N+Math.imul(Ee,je)|0,w=w+Math.imul(ie,Ge)|0,v=v+Math.imul(ie,Ve)|0,v=v+Math.imul(de,Ge)|0,N=N+Math.imul(de,Ve)|0,w=w+Math.imul(X,qe)|0,v=v+Math.imul(X,$e)|0,v=v+Math.imul(Z,qe)|0,N=N+Math.imul(Z,$e)|0,w=w+Math.imul(k,ze)|0,v=v+Math.imul(k,We)|0,v=v+Math.imul(m,ze)|0,N=N+Math.imul(m,We)|0,w=w+Math.imul(ae,Xe)|0,v=v+Math.imul(ae,Je)|0,v=v+Math.imul(W,Xe)|0,N=N+Math.imul(W,Je)|0,w=w+Math.imul(Y,Ye)|0,v=v+Math.imul(Y,Qe)|0,v=v+Math.imul(ne,Ye)|0,N=N+Math.imul(ne,Qe)|0;var fl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(fl>>>26)|0,fl&=67108863,w=Math.imul(D,te),v=Math.imul(D,le),v=v+Math.imul($,te)|0,N=Math.imul($,le),w=w+Math.imul(M,we)|0,v=v+Math.imul(M,Se)|0,v=v+Math.imul(A,we)|0,N=N+Math.imul(A,Se)|0,w=w+Math.imul(ve,gt)|0,v=v+Math.imul(ve,mt)|0,v=v+Math.imul(he,gt)|0,N=N+Math.imul(he,mt)|0,w=w+Math.imul(me,wt)|0,v=v+Math.imul(me,je)|0,v=v+Math.imul(ge,wt)|0,N=N+Math.imul(ge,je)|0,w=w+Math.imul(ue,Ge)|0,v=v+Math.imul(ue,Ve)|0,v=v+Math.imul(Ee,Ge)|0,N=N+Math.imul(Ee,Ve)|0,w=w+Math.imul(ie,qe)|0,v=v+Math.imul(ie,$e)|0,v=v+Math.imul(de,qe)|0,N=N+Math.imul(de,$e)|0,w=w+Math.imul(X,ze)|0,v=v+Math.imul(X,We)|0,v=v+Math.imul(Z,ze)|0,N=N+Math.imul(Z,We)|0,w=w+Math.imul(k,Xe)|0,v=v+Math.imul(k,Je)|0,v=v+Math.imul(m,Xe)|0,N=N+Math.imul(m,Je)|0,w=w+Math.imul(ae,Ye)|0,v=v+Math.imul(ae,Qe)|0,v=v+Math.imul(W,Ye)|0,N=N+Math.imul(W,Qe)|0,w=w+Math.imul(Y,Dt)|0,v=v+Math.imul(Y,Ut)|0,v=v+Math.imul(ne,Dt)|0,N=N+Math.imul(ne,Ut)|0;var ul=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ul>>>26)|0,ul&=67108863,w=Math.imul(D,we),v=Math.imul(D,Se),v=v+Math.imul($,we)|0,N=Math.imul($,Se),w=w+Math.imul(M,gt)|0,v=v+Math.imul(M,mt)|0,v=v+Math.imul(A,gt)|0,N=N+Math.imul(A,mt)|0,w=w+Math.imul(ve,wt)|0,v=v+Math.imul(ve,je)|0,v=v+Math.imul(he,wt)|0,N=N+Math.imul(he,je)|0,w=w+Math.imul(me,Ge)|0,v=v+Math.imul(me,Ve)|0,v=v+Math.imul(ge,Ge)|0,N=N+Math.imul(ge,Ve)|0,w=w+Math.imul(ue,qe)|0,v=v+Math.imul(ue,$e)|0,v=v+Math.imul(Ee,qe)|0,N=N+Math.imul(Ee,$e)|0,w=w+Math.imul(ie,ze)|0,v=v+Math.imul(ie,We)|0,v=v+Math.imul(de,ze)|0,N=N+Math.imul(de,We)|0,w=w+Math.imul(X,Xe)|0,v=v+Math.imul(X,Je)|0,v=v+Math.imul(Z,Xe)|0,N=N+Math.imul(Z,Je)|0,w=w+Math.imul(k,Ye)|0,v=v+Math.imul(k,Qe)|0,v=v+Math.imul(m,Ye)|0,N=N+Math.imul(m,Qe)|0,w=w+Math.imul(ae,Dt)|0,v=v+Math.imul(ae,Ut)|0,v=v+Math.imul(W,Dt)|0,N=N+Math.imul(W,Ut)|0;var ll=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ll>>>26)|0,ll&=67108863,w=Math.imul(D,gt),v=Math.imul(D,mt),v=v+Math.imul($,gt)|0,N=Math.imul($,mt),w=w+Math.imul(M,wt)|0,v=v+Math.imul(M,je)|0,v=v+Math.imul(A,wt)|0,N=N+Math.imul(A,je)|0,w=w+Math.imul(ve,Ge)|0,v=v+Math.imul(ve,Ve)|0,v=v+Math.imul(he,Ge)|0,N=N+Math.imul(he,Ve)|0,w=w+Math.imul(me,qe)|0,v=v+Math.imul(me,$e)|0,v=v+Math.imul(ge,qe)|0,N=N+Math.imul(ge,$e)|0,w=w+Math.imul(ue,ze)|0,v=v+Math.imul(ue,We)|0,v=v+Math.imul(Ee,ze)|0,N=N+Math.imul(Ee,We)|0,w=w+Math.imul(ie,Xe)|0,v=v+Math.imul(ie,Je)|0,v=v+Math.imul(de,Xe)|0,N=N+Math.imul(de,Je)|0,w=w+Math.imul(X,Ye)|0,v=v+Math.imul(X,Qe)|0,v=v+Math.imul(Z,Ye)|0,N=N+Math.imul(Z,Qe)|0,w=w+Math.imul(k,Dt)|0,v=v+Math.imul(k,Ut)|0,v=v+Math.imul(m,Dt)|0,N=N+Math.imul(m,Ut)|0;var dl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(dl>>>26)|0,dl&=67108863,w=Math.imul(D,wt),v=Math.imul(D,je),v=v+Math.imul($,wt)|0,N=Math.imul($,je),w=w+Math.imul(M,Ge)|0,v=v+Math.imul(M,Ve)|0,v=v+Math.imul(A,Ge)|0,N=N+Math.imul(A,Ve)|0,w=w+Math.imul(ve,qe)|0,v=v+Math.imul(ve,$e)|0,v=v+Math.imul(he,qe)|0,N=N+Math.imul(he,$e)|0,w=w+Math.imul(me,ze)|0,v=v+Math.imul(me,We)|0,v=v+Math.imul(ge,ze)|0,N=N+Math.imul(ge,We)|0,w=w+Math.imul(ue,Xe)|0,v=v+Math.imul(ue,Je)|0,v=v+Math.imul(Ee,Xe)|0,N=N+Math.imul(Ee,Je)|0,w=w+Math.imul(ie,Ye)|0,v=v+Math.imul(ie,Qe)|0,v=v+Math.imul(de,Ye)|0,N=N+Math.imul(de,Qe)|0,w=w+Math.imul(X,Dt)|0,v=v+Math.imul(X,Ut)|0,v=v+Math.imul(Z,Dt)|0,N=N+Math.imul(Z,Ut)|0;var hl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(hl>>>26)|0,hl&=67108863,w=Math.imul(D,Ge),v=Math.imul(D,Ve),v=v+Math.imul($,Ge)|0,N=Math.imul($,Ve),w=w+Math.imul(M,qe)|0,v=v+Math.imul(M,$e)|0,v=v+Math.imul(A,qe)|0,N=N+Math.imul(A,$e)|0,w=w+Math.imul(ve,ze)|0,v=v+Math.imul(ve,We)|0,v=v+Math.imul(he,ze)|0,N=N+Math.imul(he,We)|0,w=w+Math.imul(me,Xe)|0,v=v+Math.imul(me,Je)|0,v=v+Math.imul(ge,Xe)|0,N=N+Math.imul(ge,Je)|0,w=w+Math.imul(ue,Ye)|0,v=v+Math.imul(ue,Qe)|0,v=v+Math.imul(Ee,Ye)|0,N=N+Math.imul(Ee,Qe)|0,w=w+Math.imul(ie,Dt)|0,v=v+Math.imul(ie,Ut)|0,v=v+Math.imul(de,Dt)|0,N=N+Math.imul(de,Ut)|0;var pl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(pl>>>26)|0,pl&=67108863,w=Math.imul(D,qe),v=Math.imul(D,$e),v=v+Math.imul($,qe)|0,N=Math.imul($,$e),w=w+Math.imul(M,ze)|0,v=v+Math.imul(M,We)|0,v=v+Math.imul(A,ze)|0,N=N+Math.imul(A,We)|0,w=w+Math.imul(ve,Xe)|0,v=v+Math.imul(ve,Je)|0,v=v+Math.imul(he,Xe)|0,N=N+Math.imul(he,Je)|0,w=w+Math.imul(me,Ye)|0,v=v+Math.imul(me,Qe)|0,v=v+Math.imul(ge,Ye)|0,N=N+Math.imul(ge,Qe)|0,w=w+Math.imul(ue,Dt)|0,v=v+Math.imul(ue,Ut)|0,v=v+Math.imul(Ee,Dt)|0,N=N+Math.imul(Ee,Ut)|0;var gl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(gl>>>26)|0,gl&=67108863,w=Math.imul(D,ze),v=Math.imul(D,We),v=v+Math.imul($,ze)|0,N=Math.imul($,We),w=w+Math.imul(M,Xe)|0,v=v+Math.imul(M,Je)|0,v=v+Math.imul(A,Xe)|0,N=N+Math.imul(A,Je)|0,w=w+Math.imul(ve,Ye)|0,v=v+Math.imul(ve,Qe)|0,v=v+Math.imul(he,Ye)|0,N=N+Math.imul(he,Qe)|0,w=w+Math.imul(me,Dt)|0,v=v+Math.imul(me,Ut)|0,v=v+Math.imul(ge,Dt)|0,N=N+Math.imul(ge,Ut)|0;var bl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(bl>>>26)|0,bl&=67108863,w=Math.imul(D,Xe),v=Math.imul(D,Je),v=v+Math.imul($,Xe)|0,N=Math.imul($,Je),w=w+Math.imul(M,Ye)|0,v=v+Math.imul(M,Qe)|0,v=v+Math.imul(A,Ye)|0,N=N+Math.imul(A,Qe)|0,w=w+Math.imul(ve,Dt)|0,v=v+Math.imul(ve,Ut)|0,v=v+Math.imul(he,Dt)|0,N=N+Math.imul(he,Ut)|0;var vl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(vl>>>26)|0,vl&=67108863,w=Math.imul(D,Ye),v=Math.imul(D,Qe),v=v+Math.imul($,Ye)|0,N=Math.imul($,Qe),w=w+Math.imul(M,Dt)|0,v=v+Math.imul(M,Ut)|0,v=v+Math.imul(A,Dt)|0,N=N+Math.imul(A,Ut)|0;var ml=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ml>>>26)|0,ml&=67108863,w=Math.imul(D,Dt),v=Math.imul(D,Ut),v=v+Math.imul($,Dt)|0,N=Math.imul($,Ut);var yl=(T+w|0)+((v&8191)<<13)|0;return T=(N+(v>>>13)|0)+(yl>>>26)|0,yl&=67108863,S[0]=tl,S[1]=rl,S[2]=nl,S[3]=il,S[4]=sl,S[5]=ol,S[6]=al,S[7]=cl,S[8]=fl,S[9]=ul,S[10]=ll,S[11]=dl,S[12]=hl,S[13]=pl,S[14]=gl,S[15]=bl,S[16]=vl,S[17]=ml,S[18]=yl,T!==0&&(S[19]=T,b.length++),b};Math.imul||(H=L);function q(y,u,p){p.negative=u.negative^y.negative,p.length=y.length+u.length;for(var b=0,g=0,h=0;h<p.length-1;h++){var S=g;g=0;for(var T=b&67108863,w=Math.min(h,u.length-1),v=Math.max(0,h-y.length+1);v<=w;v++){var N=h-v,ee=y.words[N]|0,Y=u.words[v]|0,ne=ee*Y,se=ne&67108863;S=S+(ne/67108864|0)|0,se=se+T|0,T=se&67108863,S=S+(se>>>26)|0,g+=S>>>26,S&=67108863}p.words[h]=T,b=S,S=g}return b!==0?p.words[h]=b:p.length--,p.strip()}function G(y,u,p){var b=new C;return b.mulp(y,u,p)}s.prototype.mulTo=function(u,p){var b,g=this.length+u.length;return this.length===10&&u.length===10?b=H(this,u,p):g<63?b=L(this,u,p):g<1024?b=q(this,u,p):b=G(this,u,p),b};function C(y,u){this.x=y,this.y=u}C.prototype.makeRBT=function(u){for(var p=new Array(u),b=s.prototype._countBits(u)-1,g=0;g<u;g++)p[g]=this.revBin(g,b,u);return p},C.prototype.revBin=function(u,p,b){if(u===0||u===b-1)return u;for(var g=0,h=0;h<p;h++)g|=(u&1)<<p-h-1,u>>=1;return g},C.prototype.permute=function(u,p,b,g,h,S){for(var T=0;T<S;T++)g[T]=p[u[T]],h[T]=b[u[T]]},C.prototype.transform=function(u,p,b,g,h,S){this.permute(S,u,p,b,g,h);for(var T=1;T<h;T<<=1)for(var w=T<<1,v=Math.cos(2*Math.PI/w),N=Math.sin(2*Math.PI/w),ee=0;ee<h;ee+=w)for(var Y=v,ne=N,se=0;se<T;se++){var ae=b[ee+se],W=g[ee+se],K=b[ee+se+T],k=g[ee+se+T],m=Y*K-ne*k;k=Y*k+ne*K,K=m,b[ee+se]=ae+K,g[ee+se]=W+k,b[ee+se+T]=ae-K,g[ee+se+T]=W-k,se!==w&&(m=v*Y-N*ne,ne=v*ne+N*Y,Y=m)}},C.prototype.guessLen13b=function(u,p){var b=Math.max(p,u)|1,g=b&1,h=0;for(b=b/2|0;b;b=b>>>1)h++;return 1<<h+1+g},C.prototype.conjugate=function(u,p,b){if(!(b<=1))for(var g=0;g<b/2;g++){var h=u[g];u[g]=u[b-g-1],u[b-g-1]=h,h=p[g],p[g]=-p[b-g-1],p[b-g-1]=-h}},C.prototype.normalize13b=function(u,p){for(var b=0,g=0;g<p/2;g++){var h=Math.round(u[2*g+1]/p)*8192+Math.round(u[2*g]/p)+b;u[g]=h&67108863,h<67108864?b=0:b=h/67108864|0}return u},C.prototype.convert13b=function(u,p,b,g){for(var h=0,S=0;S<p;S++)h=h+(u[S]|0),b[2*S]=h&8191,h=h>>>13,b[2*S+1]=h&8191,h=h>>>13;for(S=2*p;S<g;++S)b[S]=0;n(h===0),n((h&-8192)===0)},C.prototype.stub=function(u){for(var p=new Array(u),b=0;b<u;b++)p[b]=0;return p},C.prototype.mulp=function(u,p,b){var g=2*this.guessLen13b(u.length,p.length),h=this.makeRBT(g),S=this.stub(g),T=new Array(g),w=new Array(g),v=new Array(g),N=new Array(g),ee=new Array(g),Y=new Array(g),ne=b.words;ne.length=g,this.convert13b(u.words,u.length,T,g),this.convert13b(p.words,p.length,N,g),this.transform(T,S,w,v,g,h),this.transform(N,S,ee,Y,g,h);for(var se=0;se<g;se++){var ae=w[se]*ee[se]-v[se]*Y[se];v[se]=w[se]*Y[se]+v[se]*ee[se],w[se]=ae}return this.conjugate(w,v,g),this.transform(w,v,ne,S,g,h),this.conjugate(ne,S,g),this.normalize13b(ne,g),b.negative=u.negative^p.negative,b.length=u.length+p.length,b.strip()},s.prototype.mul=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},s.prototype.mulf=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),G(this,u,p)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){n(typeof u=="number"),n(u<67108864);for(var p=0,b=0;b<this.length;b++){var g=(this.words[b]|0)*u,h=(g&67108863)+(p&67108863);p>>=26,p+=g/67108864|0,p+=h>>>26,this.words[b]=h&67108863}return p!==0&&(this.words[b]=p,this.length++),this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var p=P(u);if(p.length===0)return new s(1);for(var b=this,g=0;g<p.length&&p[g]===0;g++,b=b.sqr());if(++g<p.length)for(var h=b.sqr();g<p.length;g++,h=h.sqr())p[g]!==0&&(b=b.mul(h));return b},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,g=67108863>>>26-p<<26-p,h;if(p!==0){var S=0;for(h=0;h<this.length;h++){var T=this.words[h]&g,w=(this.words[h]|0)-T<<p;this.words[h]=w|S,S=T>>>26-p}S&&(this.words[h]=S,this.length++)}if(b!==0){for(h=this.length-1;h>=0;h--)this.words[h+b]=this.words[h];for(h=0;h<b;h++)this.words[h]=0;this.length+=b}return this.strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,p,b){n(typeof u=="number"&&u>=0);var g;p?g=(p-p%26)/26:g=0;var h=u%26,S=Math.min((u-h)/26,this.length),T=67108863^67108863>>>h<<h,w=b;if(g-=S,g=Math.max(0,g),w){for(var v=0;v<S;v++)w.words[v]=this.words[v];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,v=0;v<this.length;v++)this.words[v]=this.words[v+S];else this.words[0]=0,this.length=1;var N=0;for(v=this.length-1;v>=0&&(N!==0||v>=g);v--){var ee=this.words[v]|0;this.words[v]=N<<26-h|ee>>>h,N=ee&T}return w&&N!==0&&(w.words[w.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(u,p,b){return n(this.negative===0),this.iushrn(u,p,b)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,g=1<<p;if(this.length<=b)return!1;var h=this.words[b];return!!(h&g)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(p!==0&&b++,this.length=Math.min(b,this.length),p!==0){var g=67108863^67108863>>>p<<p;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,p,b){var g=u.length+b,h;this._expand(g);var S,T=0;for(h=0;h<u.length;h++){S=(this.words[h+b]|0)+T;var w=(u.words[h]|0)*p;S-=w&67108863,T=(S>>26)-(w/67108864|0),this.words[h+b]=S&67108863}for(;h<this.length-b;h++)S=(this.words[h+b]|0)+T,T=S>>26,this.words[h+b]=S&67108863;if(T===0)return this.strip();for(n(T===-1),T=0,h=0;h<this.length;h++)S=-(this.words[h]|0)+T,T=S>>26,this.words[h]=S&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(u,p){var b=this.length-u.length,g=this.clone(),h=u,S=h.words[h.length-1]|0,T=this._countBits(S);b=26-T,b!==0&&(h=h.ushln(b),g.iushln(b),S=h.words[h.length-1]|0);var w=g.length-h.length,v;if(p!=="mod"){v=new s(null),v.length=w+1,v.words=new Array(v.length);for(var N=0;N<v.length;N++)v.words[N]=0}var ee=g.clone()._ishlnsubmul(h,1,w);ee.negative===0&&(g=ee,v&&(v.words[w]=1));for(var Y=w-1;Y>=0;Y--){var ne=(g.words[h.length+Y]|0)*67108864+(g.words[h.length+Y-1]|0);for(ne=Math.min(ne/S|0,67108863),g._ishlnsubmul(h,ne,Y);g.negative!==0;)ne--,g.negative=0,g._ishlnsubmul(h,1,Y),g.isZero()||(g.negative^=1);v&&(v.words[Y]=ne)}return v&&v.strip(),g.strip(),p!=="div"&&b!==0&&g.iushrn(b),{div:v||null,mod:g}},s.prototype.divmod=function(u,p,b){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,h,S;return this.negative!==0&&u.negative===0?(S=this.neg().divmod(u,p),p!=="mod"&&(g=S.div.neg()),p!=="div"&&(h=S.mod.neg(),b&&h.negative!==0&&h.iadd(u)),{div:g,mod:h}):this.negative===0&&u.negative!==0?(S=this.divmod(u.neg(),p),p!=="mod"&&(g=S.div.neg()),{div:g,mod:S.mod}):this.negative&u.negative?(S=this.neg().divmod(u.neg(),p),p!=="div"&&(h=S.mod.neg(),b&&h.negative!==0&&h.isub(u)),{div:S.div,mod:h}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modn(u.words[0]))}:this._wordDiv(u,p)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var b=p.div.negative!==0?p.mod.isub(u):p.mod,g=u.ushrn(1),h=u.andln(1),S=b.cmp(g);return S<0||h===1&&S===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modn=function(u){n(u<=67108863);for(var p=(1<<26)%u,b=0,g=this.length-1;g>=0;g--)b=(p*b+(this.words[g]|0))%u;return b},s.prototype.idivn=function(u){n(u<=67108863);for(var p=0,b=this.length-1;b>=0;b--){var g=(this.words[b]|0)+p*67108864;this.words[b]=g/u|0,p=g%u}return this.strip()},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var g=new s(1),h=new s(0),S=new s(0),T=new s(1),w=0;p.isEven()&&b.isEven();)p.iushrn(1),b.iushrn(1),++w;for(var v=b.clone(),N=p.clone();!p.isZero();){for(var ee=0,Y=1;!(p.words[0]&Y)&&ee<26;++ee,Y<<=1);if(ee>0)for(p.iushrn(ee);ee-- >0;)(g.isOdd()||h.isOdd())&&(g.iadd(v),h.isub(N)),g.iushrn(1),h.iushrn(1);for(var ne=0,se=1;!(b.words[0]&se)&&ne<26;++ne,se<<=1);if(ne>0)for(b.iushrn(ne);ne-- >0;)(S.isOdd()||T.isOdd())&&(S.iadd(v),T.isub(N)),S.iushrn(1),T.iushrn(1);p.cmp(b)>=0?(p.isub(b),g.isub(S),h.isub(T)):(b.isub(p),S.isub(g),T.isub(h))}return{a:S,b:T,gcd:b.iushln(w)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var g=new s(1),h=new s(0),S=b.clone();p.cmpn(1)>0&&b.cmpn(1)>0;){for(var T=0,w=1;!(p.words[0]&w)&&T<26;++T,w<<=1);if(T>0)for(p.iushrn(T);T-- >0;)g.isOdd()&&g.iadd(S),g.iushrn(1);for(var v=0,N=1;!(b.words[0]&N)&&v<26;++v,N<<=1);if(v>0)for(b.iushrn(v);v-- >0;)h.isOdd()&&h.iadd(S),h.iushrn(1);p.cmp(b)>=0?(p.isub(b),g.isub(h)):(b.isub(p),h.isub(g))}var ee;return p.cmpn(1)===0?ee=g:ee=h,ee.cmpn(0)<0&&ee.iadd(u),ee},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),b=u.clone();p.negative=0,b.negative=0;for(var g=0;p.isEven()&&b.isEven();g++)p.iushrn(1),b.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;b.isEven();)b.iushrn(1);var h=p.cmp(b);if(h<0){var S=p;p=b,b=S}else if(h===0||b.cmpn(1)===0)break;p.isub(b)}while(!0);return b.iushln(g)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var p=u%26,b=(u-p)/26,g=1<<p;if(this.length<=b)return this._expand(b+1),this.words[b]|=g,this;for(var h=g,S=b;h!==0&&S<this.length;S++){var T=this.words[S]|0;T+=h,h=T>>>26,T&=67108863,this.words[S]=T}return h!==0&&(this.words[S]=h,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var b;if(this.length>1)b=1;else{p&&(u=-u),n(u<=67108863,"Number is too big");var g=this.words[0]|0;b=g===u?0:g<u?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,b=this.length-1;b>=0;b--){var g=this.words[b]|0,h=u.words[b]|0;if(g!==h){g<h?p=-1:g>h&&(p=1);break}}return p},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new O(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var V={k256:null,p224:null,p192:null,p25519:null};function U(y,u){this.name=y,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},U.prototype.ireduce=function(u){var p=u,b;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),b=p.bitLength();while(b>this.n);var g=b<this.n?-1:p.ucmp(this.p);return g===0?(p.words[0]=0,p.length=1):g>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},U.prototype.split=function(u,p){u.iushrn(this.n,0,p)},U.prototype.imulK=function(u){return u.imul(this.k)};function F(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,U),F.prototype.split=function(u,p){for(var b=4194303,g=Math.min(u.length,9),h=0;h<g;h++)p.words[h]=u.words[h];if(p.length=g,u.length<=9){u.words[0]=0,u.length=1;return}var S=u.words[9];for(p.words[p.length++]=S&b,h=10;h<u.length;h++){var T=u.words[h]|0;u.words[h-10]=(T&b)<<4|S>>>22,S=T}S>>>=22,u.words[h-10]=S,S===0&&u.length>10?u.length-=10:u.length-=9},F.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,b=0;b<u.length;b++){var g=u.words[b]|0;p+=g*977,u.words[b]=p&67108863,p=g*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function j(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(j,U);function E(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(E,U);function _(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_,U),_.prototype.imulK=function(u){for(var p=0,b=0;b<u.length;b++){var g=(u.words[b]|0)*19+p,h=g&67108863;g>>>=26,u.words[b]=h,p=g}return p!==0&&(u.words[u.length++]=p),u},s._prime=function(u){if(V[u])return V[u];var p;if(u==="k256")p=new F;else if(u==="p224")p=new j;else if(u==="p192")p=new E;else if(u==="p25519")p=new _;else throw new Error("Unknown prime "+u);return V[u]=p,p};function O(y){if(typeof y=="string"){var u=s._prime(y);this.m=u.p,this.prime=u}else n(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}O.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},O.prototype._verify2=function(u,p){n((u.negative|p.negative)===0,"red works only with positives"),n(u.red&&u.red===p.red,"red works only with red numbers")},O.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},O.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},O.prototype.add=function(u,p){this._verify2(u,p);var b=u.add(p);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},O.prototype.iadd=function(u,p){this._verify2(u,p);var b=u.iadd(p);return b.cmp(this.m)>=0&&b.isub(this.m),b},O.prototype.sub=function(u,p){this._verify2(u,p);var b=u.sub(p);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},O.prototype.isub=function(u,p){this._verify2(u,p);var b=u.isub(p);return b.cmpn(0)<0&&b.iadd(this.m),b},O.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},O.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},O.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},O.prototype.isqr=function(u){return this.imul(u,u.clone())},O.prototype.sqr=function(u){return this.mul(u,u)},O.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(u,b)}for(var g=this.m.subn(1),h=0;!g.isZero()&&g.andln(1)===0;)h++,g.iushrn(1);n(!g.isZero());var S=new s(1).toRed(this),T=S.redNeg(),w=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,w).cmp(T)!==0;)v.redIAdd(T);for(var N=this.pow(v,g),ee=this.pow(u,g.addn(1).iushrn(1)),Y=this.pow(u,g),ne=h;Y.cmp(S)!==0;){for(var se=Y,ae=0;se.cmp(S)!==0;ae++)se=se.redSqr();n(ae<ne);var W=this.pow(N,new s(1).iushln(ne-ae-1));ee=ee.redMul(W),N=W.redSqr(),Y=Y.redMul(N),ne=ae}return ee},O.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},O.prototype.pow=function(u,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var b=4,g=new Array(1<<b);g[0]=new s(1).toRed(this),g[1]=u;for(var h=2;h<g.length;h++)g[h]=this.mul(g[h-1],u);var S=g[0],T=0,w=0,v=p.bitLength()%26;for(v===0&&(v=26),h=p.length-1;h>=0;h--){for(var N=p.words[h],ee=v-1;ee>=0;ee--){var Y=N>>ee&1;if(S!==g[0]&&(S=this.sqr(S)),Y===0&&T===0){w=0;continue}T<<=1,T|=Y,w++,!(w!==b&&(h!==0||ee!==0))&&(S=this.mul(S,g[T]),w=0,T=0)}v=26}return S},O.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},O.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},s.mont=function(u){return new x(u)};function x(y){O.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(x,O),x.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},x.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},x.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var b=u.imul(p),g=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=b.isub(g).iushrn(this.shift),S=h;return h.cmp(this.m)>=0?S=h.isub(this.m):h.cmpn(0)<0&&(S=h.iadd(this.m)),S._forceRed(this)},x.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new s(0)._forceRed(this);var b=u.mul(p),g=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=b.isub(g).iushrn(this.shift),S=h;return h.cmp(this.m)>=0?S=h.isub(this.m):h.cmpn(0)<0&&(S=h.iadd(this.m)),S._forceRed(this)},x.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,Ba)})(D5);var so=Kv;function Kv(t,e){if(!t)throw new Error(e||"Assertion failed")}Kv.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Qh={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),f=l>>8,d=l&255;f?a.push(f,d):a.push(d)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(Qh);(function(t){var e=t,r=In,n=so,i=Qh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,d,I){var P=new Array(Math.max(f.bitLength(),I)+1);P.fill(0);for(var L=1<<d+1,H=f.clone(),q=0;q<P.length;q++){var G,C=H.andln(L-1);H.isOdd()?(C>(L>>1)-1?G=(L>>1)-C:G=C,H.isubn(G)):G=0,P[q]=G,H.iushrn(1)}return P}e.getNAF=s;function o(f,d){var I=[[],[]];f=f.clone(),d=d.clone();for(var P=0,L=0,H;f.cmpn(-P)>0||d.cmpn(-L)>0;){var q=f.andln(3)+P&3,G=d.andln(3)+L&3;q===3&&(q=-1),G===3&&(G=-1);var C;q&1?(H=f.andln(7)+P&7,(H===3||H===5)&&G===2?C=-q:C=q):C=0,I[0].push(C);var V;G&1?(H=d.andln(7)+L&7,(H===3||H===5)&&q===2?V=-G:V=G):V=0,I[1].push(V),2*P===C+1&&(P=1-P),2*L===V+1&&(L=1-L),f.iushrn(1),d.iushrn(1)}return I}e.getJSF=o;function a(f,d,I){var P="_"+d;f.prototype[d]=function(){return this[P]!==void 0?this[P]:this[P]=I.call(this)}}e.cachedProperty=a;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function l(f){return new r(f,"hex","le")}e.intFromLE=l})(Qr);var rc={},U5={get exports(){return rc},set exports(t){rc=t}},td;U5.exports=function(e){return td||(td=new hs(null)),td.generate(e)};function hs(t){this.rand=t}rc.Rand=hs;hs.prototype.generate=function(e){return this._rand(e)};hs.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?hs.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?hs.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(hs.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a1=gc;if(typeof a1.randomBytes!="function")throw new Error("Not supported");hs.prototype._rand=function(e){return a1.randomBytes(e)}}catch{}var Zh={},Ls=In,xc=Qr,Mf=xc.getNAF,K5=xc.getJSF,Lf=xc.assert;function Os(t,e){this.type=t,this.p=new Ls(e.p,16),this.red=e.prime?Ls.red(e.prime):Ls.mont(this.p),this.zero=new Ls(0).toRed(this.red),this.one=new Ls(1).toRed(this.red),this.two=new Ls(2).toRed(this.red),this.n=e.n&&new Ls(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Pu=Os;Os.prototype.point=function(){throw new Error("Not implemented")};Os.prototype.validate=function(){throw new Error("Not implemented")};Os.prototype._fixedNafMul=function(e,r){Lf(e.precomputed);var n=e._getDoubles(),i=Mf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),I=s;I>0;I--){for(a=0;a<o.length;a++)c=o[a],c===I?d=d.mixedAdd(n.points[a]):c===-I&&(d=d.mixedAdd(n.points[a].neg()));f=f.add(d)}return f.toP()};Os.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Mf(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var f=o[c];Lf(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};Os.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,f,d,I;for(f=0;f<i;f++){I=r[f];var P=I._getNAFPoints(e);o[f]=P.wnd,a[f]=P.points}for(f=i-1;f>=1;f-=2){var L=f-1,H=f;if(o[L]!==1||o[H]!==1){c[L]=Mf(n[L],o[L],this._bitLength),c[H]=Mf(n[H],o[H],this._bitLength),l=Math.max(c[L].length,l),l=Math.max(c[H].length,l);continue}var q=[r[L],null,null,r[H]];r[L].y.cmp(r[H].y)===0?(q[1]=r[L].add(r[H]),q[2]=r[L].toJ().mixedAdd(r[H].neg())):r[L].y.cmp(r[H].y.redNeg())===0?(q[1]=r[L].toJ().mixedAdd(r[H]),q[2]=r[L].add(r[H].neg())):(q[1]=r[L].toJ().mixedAdd(r[H]),q[2]=r[L].toJ().mixedAdd(r[H].neg()));var G=[-3,-1,-5,-7,0,7,5,1,3],C=K5(n[L],n[H]);for(l=Math.max(C[0].length,l),c[L]=new Array(l),c[H]=new Array(l),d=0;d<l;d++){var V=C[0][d]|0,U=C[1][d]|0;c[L][d]=G[(V+1)*3+(U+1)],c[H][d]=0,a[L]=q}}var F=this.jpoint(null,null,null),j=this._wnafT4;for(f=l;f>=0;f--){for(var E=0;f>=0;){var _=!0;for(d=0;d<i;d++)j[d]=c[d][f]|0,j[d]!==0&&(_=!1);if(!_)break;E++,f--}if(f>=0&&E++,F=F.dblp(E),f<0)break;for(d=0;d<i;d++){var O=j[d];O!==0&&(O>0?I=a[d][O-1>>1]:O<0&&(I=a[d][-O-1>>1].neg()),I.type==="affine"?F=F.mixedAdd(I):F=F.add(I))}}for(f=0;f<i;f++)a[f]=null;return s?F:F.toP()};function ln(t,e){this.curve=t,this.type=e,this.precomputed=null}Os.BasePoint=ln;ln.prototype.eq=function(){throw new Error("Not implemented")};ln.prototype.validate=function(){return this.curve.validate(this)};Os.prototype.decodePoint=function(e,r){e=xc.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Lf(e[e.length-1]%2===0):e[0]===7&&Lf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ln.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ln.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};ln.prototype.encode=function(e,r){return xc.encode(this._encode(r),e)};ln.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};ln.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};ln.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};ln.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};ln.prototype._getBeta=function(){return null};ln.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var H5=Qr,Ot=In,e0=Nt,sa=Pu,F5=H5.assert;function dn(t){sa.call(this,"short",t),this.a=new Ot(t.a,16).toRed(this.red),this.b=new Ot(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}e0(dn,sa);var j5=dn;dn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ot(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ot(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],F5(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ot(a.a,16),b:new Ot(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};dn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ot.mont(e),n=new Ot(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ot(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};dn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ot(1),o=new Ot(0),a=new Ot(0),c=new Ot(1),l,f,d,I,P,L,H,q=0,G,C;n.cmpn(0)!==0;){var V=i.div(n);G=i.sub(V.mul(n)),C=a.sub(V.mul(s));var U=c.sub(V.mul(o));if(!d&&G.cmp(r)<0)l=H.neg(),f=s,d=G.neg(),I=C;else if(d&&++q===2)break;H=G,i=n,n=G,a=s,s=C,c=o,o=U}P=G.neg(),L=C;var F=d.sqr().add(I.sqr()),j=P.sqr().add(L.sqr());return j.cmp(F)>=0&&(P=l,L=f),d.negative&&(d=d.neg(),I=I.neg()),P.negative&&(P=P.neg(),L=L.neg()),[{a:d,b:I},{a:P,b:L}]};dn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),f=o.mul(i.b),d=e.sub(a).sub(c),I=l.add(f).neg();return{k1:d,k2:I}};dn.prototype.pointFromX=function(e,r){e=new Ot(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};dn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};dn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),d=0;d<o*2;d++)i[d]=null,s[d]=null;return f};function ir(t,e,r,n){sa.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ot(e,16),this.y=new Ot(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}e0(ir,sa.BasePoint);dn.prototype.point=function(e,r,n){return new ir(this,e,r,n)};dn.prototype.pointFromJSON=function(e,r){return ir.fromJSON(this,e,r)};ir.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};ir.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ir.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};ir.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ir.prototype.isInfinity=function(){return this.inf};ir.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};ir.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};ir.prototype.getX=function(){return this.x.fromRed()};ir.prototype.getY=function(){return this.y.fromRed()};ir.prototype.mul=function(e){return e=new Ot(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};ir.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};ir.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};ir.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};ir.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};ir.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ar(t,e,r,n){sa.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ot(0)):(this.x=new Ot(e,16),this.y=new Ot(r,16),this.z=new Ot(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}e0(ar,sa.BasePoint);dn.prototype.jpoint=function(e,r,n){return new ar(this,e,r,n)};ar.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};ar.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ar.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),I=i.redMul(f),P=l.redSqr().redIAdd(d).redISub(I).redISub(I),L=l.redMul(I.redISub(P)).redISub(o.redMul(d)),H=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(P,L,H)};ar.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),f=l.redMul(a),d=n.redMul(l),I=c.redSqr().redIAdd(f).redISub(d).redISub(d),P=c.redMul(d.redISub(I)).redISub(s.redMul(f)),L=this.z.redMul(a);return this.curve.jpoint(I,P,L)};ar.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),I=f.redSqr(),P=I.redSqr(),L=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(l)),H=o.redMul(I),q=L.redSqr().redISub(H.redAdd(H)),G=H.redISub(q),C=L.redMul(G);C=C.redIAdd(C).redISub(P);var V=f.redMul(c);r+1<e&&(l=l.redMul(P)),o=q,c=V,f=C}return this.curve.jpoint(o,f.redMul(s),c)};ar.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ar.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=l,r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),I=this.y.redSqr(),P=I.redSqr(),L=this.x.redAdd(I).redSqr().redISub(d).redISub(P);L=L.redIAdd(L);var H=d.redAdd(d).redIAdd(d),q=H.redSqr(),G=P.redIAdd(P);G=G.redIAdd(G),G=G.redIAdd(G),e=q.redISub(L).redISub(L),r=H.redMul(L.redISub(e)).redISub(G),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};ar.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),I=this.y.redSqr(),P=this.x.redMul(I),L=this.x.redSub(d).redMul(this.x.redAdd(d));L=L.redAdd(L).redIAdd(L);var H=P.redIAdd(P);H=H.redIAdd(H);var q=H.redAdd(H);e=L.redSqr().redISub(q),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(d);var G=I.redSqr();G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G),r=L.redMul(H.redISub(e)).redISub(G)}return this.curve.jpoint(e,r,n)};ar.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var f=l.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),I=f.redISub(d),P=a.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=c.redMul(I).redISub(P),H=n.redAdd(n).redMul(i);return this.curve.jpoint(d,L,H)};ar.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var I=this.x.redMul(c).redISub(d);I=I.redIAdd(I),I=I.redIAdd(I);var P=this.y.redMul(f.redMul(l.redISub(f)).redISub(a.redMul(c)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(I,P,L)};ar.prototype.mul=function(e,r){return e=new Ot(e,r),this.curve._wnafMul(this,e)};ar.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};ar.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};ar.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ar.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ao=In,Hv=Nt,Nu=Pu,G5=Qr;function oa(t){Nu.call(this,"mont",t),this.a=new Ao(t.a,16).toRed(this.red),this.b=new Ao(t.b,16).toRed(this.red),this.i4=new Ao(4).toRed(this.red).redInvm(),this.two=new Ao(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Hv(oa,Nu);var V5=oa;oa.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function nr(t,e,r){Nu.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ao(e,16),this.z=new Ao(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Hv(nr,Nu.BasePoint);oa.prototype.decodePoint=function(e,r){return this.point(G5.toArray(e,r),1)};oa.prototype.point=function(e,r){return new nr(this,e,r)};oa.prototype.pointFromJSON=function(e){return nr.fromJSON(this,e)};nr.prototype.precompute=function(){};nr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};nr.fromJSON=function(e,r){return new nr(e,r[0],r[1]||e.one)};nr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};nr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};nr.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};nr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};nr.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,f)};nr.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};nr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};nr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};nr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};nr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};nr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var q5=Qr,ki=In,Fv=Nt,Mu=Pu,$5=q5.assert;function li(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Mu.call(this,"edwards",t),this.a=new ki(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ki(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ki(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),$5(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}Fv(li,Mu);var z5=li;li.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};li.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};li.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};li.prototype.pointFromX=function(e,r){e=new ki(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};li.prototype.pointFromY=function(e,r){e=new ki(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};li.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function vt(t,e,r,n,i){Mu.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ki(e,16),this.y=new ki(r,16),this.z=n?new ki(n,16):this.curve.one,this.t=i&&new ki(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Fv(vt,Mu.BasePoint);li.prototype.pointFromJSON=function(e){return vt.fromJSON(this,e)};li.prototype.point=function(e,r,n,i){return new vt(this,e,r,n,i)};vt.fromJSON=function(e,r){return new vt(e,r[0],r[1],r[2])};vt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};vt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),f=o.redMul(c),d=s.redMul(c),I=a.redMul(o);return this.curve.point(l,f,I,d)};vt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),l=f.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=f.redMul(a.redSub(n)),o=f.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};vt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),f=o.redMul(a),d=c.redMul(l),I=o.redMul(l),P=a.redMul(c);return this.curve.point(f,d,P,I)};vt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(l),d,I;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),I=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(i)),I=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,I)};vt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};vt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};vt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};vt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};vt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};vt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};vt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};vt.prototype.toP=vt.prototype.normalize;vt.prototype.mixedAdd=vt.prototype.add;(function(t){var e=t;e.base=Pu,e.short=j5,e.mont=V5,e.edwards=z5})(Zh);var Lu={},Cu={},Ze={},W5=so,X5=Nt;Ze.inherits=X5;function J5(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Y5(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):J5(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Ze.toArray=Y5;function Q5(t){for(var e="",r=0;r<t.length;r++)e+=Gv(t[r].toString(16));return e}Ze.toHex=Q5;function jv(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ze.htonl=jv;function Z5(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=jv(i)),r+=Vv(i.toString(16))}return r}Ze.toHex32=Z5;function Gv(t){return t.length===1?"0"+t:t}Ze.zero2=Gv;function Vv(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ze.zero8=Vv;function e4(t,e,r,n){var i=r-e;W5(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Ze.join32=e4;function t4(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Ze.split32=t4;function r4(t,e){return t>>>e|t<<32-e}Ze.rotr32=r4;function n4(t,e){return t<<e|t>>>32-e}Ze.rotl32=n4;function i4(t,e){return t+e>>>0}Ze.sum32=i4;function s4(t,e,r){return t+e+r>>>0}Ze.sum32_3=s4;function o4(t,e,r,n){return t+e+r+n>>>0}Ze.sum32_4=o4;function a4(t,e,r,n,i){return t+e+r+n+i>>>0}Ze.sum32_5=a4;function c4(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}Ze.sum64=c4;function f4(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Ze.sum64_hi=f4;function u4(t,e,r,n){var i=e+n;return i>>>0}Ze.sum64_lo=u4;function l4(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var f=t+r+i+o+c;return f>>>0}Ze.sum64_4_hi=l4;function d4(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}Ze.sum64_4_lo=d4;function h4(t,e,r,n,i,s,o,a,c,l){var f=0,d=e;d=d+n>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+a>>>0,f+=d<a?1:0,d=d+l>>>0,f+=d<l?1:0;var I=t+r+i+o+c+f;return I>>>0}Ze.sum64_5_hi=h4;function p4(t,e,r,n,i,s,o,a,c,l){var f=e+n+s+a+l;return f>>>0}Ze.sum64_5_lo=p4;function g4(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ze.rotr64_hi=g4;function b4(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.rotr64_lo=b4;function v4(t,e,r){return t>>>r}Ze.shr64_hi=v4;function m4(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.shr64_lo=m4;var aa={},c1=Ze,y4=so;function Bu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}aa.BlockHash=Bu;Bu.prototype.update=function(e,r){if(e=c1.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=c1.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Bu.prototype.digest=function(e){return this.update(this._pad()),y4(this.pending===null),this._digest(e)};Bu.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var ca={},di={},E4=Ze,ei=E4.rotr32;function _4(t,e,r,n){if(t===0)return qv(e,r,n);if(t===1||t===3)return zv(e,r,n);if(t===2)return $v(e,r,n)}di.ft_1=_4;function qv(t,e,r){return t&e^~t&r}di.ch32=qv;function $v(t,e,r){return t&e^t&r^e&r}di.maj32=$v;function zv(t,e,r){return t^e^r}di.p32=zv;function w4(t){return ei(t,2)^ei(t,13)^ei(t,22)}di.s0_256=w4;function A4(t){return ei(t,6)^ei(t,11)^ei(t,25)}di.s1_256=A4;function x4(t){return ei(t,7)^ei(t,18)^t>>>3}di.g0_256=x4;function S4(t){return ei(t,17)^ei(t,19)^t>>>10}di.g1_256=S4;var Ho=Ze,R4=aa,I4=di,rd=Ho.rotl32,Ia=Ho.sum32,T4=Ho.sum32_5,O4=I4.ft_1,Wv=R4.BlockHash,P4=[1518500249,1859775393,2400959708,3395469782];function oi(){if(!(this instanceof oi))return new oi;Wv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Ho.inherits(oi,Wv);var N4=oi;oi.blockSize=512;oi.outSize=160;oi.hmacStrength=80;oi.padLength=64;oi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=rd(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),d=T4(rd(s,5),O4(f,o,a,c),l,n[i],P4[f]);l=c,c=a,a=rd(o,30),o=s,s=d}this.h[0]=Ia(this.h[0],s),this.h[1]=Ia(this.h[1],o),this.h[2]=Ia(this.h[2],a),this.h[3]=Ia(this.h[3],c),this.h[4]=Ia(this.h[4],l)};oi.prototype._digest=function(e){return e==="hex"?Ho.toHex32(this.h,"big"):Ho.split32(this.h,"big")};var Fo=Ze,M4=aa,fa=di,L4=so,pn=Fo.sum32,C4=Fo.sum32_4,B4=Fo.sum32_5,k4=fa.ch32,D4=fa.maj32,U4=fa.s0_256,K4=fa.s1_256,H4=fa.g0_256,F4=fa.g1_256,Xv=M4.BlockHash,j4=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ai(){if(!(this instanceof ai))return new ai;Xv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=j4,this.W=new Array(64)}Fo.inherits(ai,Xv);var Jv=ai;ai.blockSize=512;ai.outSize=256;ai.hmacStrength=192;ai.padLength=64;ai.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=C4(F4(n[i-2]),n[i-7],H4(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],f=this.h[5],d=this.h[6],I=this.h[7];for(L4(this.k.length===n.length),i=0;i<n.length;i++){var P=B4(I,K4(l),k4(l,f,d),this.k[i],n[i]),L=pn(U4(s),D4(s,o,a));I=d,d=f,f=l,l=pn(c,P),c=a,a=o,o=s,s=pn(P,L)}this.h[0]=pn(this.h[0],s),this.h[1]=pn(this.h[1],o),this.h[2]=pn(this.h[2],a),this.h[3]=pn(this.h[3],c),this.h[4]=pn(this.h[4],l),this.h[5]=pn(this.h[5],f),this.h[6]=pn(this.h[6],d),this.h[7]=pn(this.h[7],I)};ai.prototype._digest=function(e){return e==="hex"?Fo.toHex32(this.h,"big"):Fo.split32(this.h,"big")};var oh=Ze,Yv=Jv;function Gi(){if(!(this instanceof Gi))return new Gi;Yv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}oh.inherits(Gi,Yv);var G4=Gi;Gi.blockSize=512;Gi.outSize=224;Gi.hmacStrength=192;Gi.padLength=64;Gi.prototype._digest=function(e){return e==="hex"?oh.toHex32(this.h.slice(0,7),"big"):oh.split32(this.h.slice(0,7),"big")};var Br=Ze,V4=aa,q4=so,ti=Br.rotr64_hi,ri=Br.rotr64_lo,Qv=Br.shr64_hi,Zv=Br.shr64_lo,Zi=Br.sum64,nd=Br.sum64_hi,id=Br.sum64_lo,$4=Br.sum64_4_hi,z4=Br.sum64_4_lo,W4=Br.sum64_5_hi,X4=Br.sum64_5_lo,em=V4.BlockHash,J4=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Tn(){if(!(this instanceof Tn))return new Tn;em.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=J4,this.W=new Array(160)}Br.inherits(Tn,em);var tm=Tn;Tn.blockSize=1024;Tn.outSize=512;Tn.hmacStrength=192;Tn.padLength=128;Tn.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=aA(n[i-4],n[i-3]),o=cA(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=sA(n[i-30],n[i-29]),f=oA(n[i-30],n[i-29]),d=n[i-32],I=n[i-31];n[i]=$4(s,o,a,c,l,f,d,I),n[i+1]=z4(s,o,a,c,l,f,d,I)}};Tn.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],f=this.h[6],d=this.h[7],I=this.h[8],P=this.h[9],L=this.h[10],H=this.h[11],q=this.h[12],G=this.h[13],C=this.h[14],V=this.h[15];q4(this.k.length===n.length);for(var U=0;U<n.length;U+=2){var F=C,j=V,E=nA(I,P),_=iA(I,P),O=Y4(I,P,L,H,q),x=Q4(I,P,L,H,q,G),y=this.k[U],u=this.k[U+1],p=n[U],b=n[U+1],g=W4(F,j,E,_,O,x,y,u,p,b),h=X4(F,j,E,_,O,x,y,u,p,b);F=tA(i,s),j=rA(i,s),E=Z4(i,s,o,a,c),_=eA(i,s,o,a,c,l);var S=nd(F,j,E,_),T=id(F,j,E,_);C=q,V=G,q=L,G=H,L=I,H=P,I=nd(f,d,g,h),P=id(d,d,g,h),f=c,d=l,c=o,l=a,o=i,a=s,i=nd(g,h,S,T),s=id(g,h,S,T)}Zi(this.h,0,i,s),Zi(this.h,2,o,a),Zi(this.h,4,c,l),Zi(this.h,6,f,d),Zi(this.h,8,I,P),Zi(this.h,10,L,H),Zi(this.h,12,q,G),Zi(this.h,14,C,V)};Tn.prototype._digest=function(e){return e==="hex"?Br.toHex32(this.h,"big"):Br.split32(this.h,"big")};function Y4(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Q4(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function Z4(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function eA(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function tA(t,e){var r=ti(t,e,28),n=ti(e,t,2),i=ti(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function rA(t,e){var r=ri(t,e,28),n=ri(e,t,2),i=ri(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function nA(t,e){var r=ti(t,e,14),n=ti(t,e,18),i=ti(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function iA(t,e){var r=ri(t,e,14),n=ri(t,e,18),i=ri(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function sA(t,e){var r=ti(t,e,1),n=ti(t,e,8),i=Qv(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function oA(t,e){var r=ri(t,e,1),n=ri(t,e,8),i=Zv(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function aA(t,e){var r=ti(t,e,19),n=ti(e,t,29),i=Qv(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function cA(t,e){var r=ri(t,e,19),n=ri(e,t,29),i=Zv(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var ah=Ze,rm=tm;function Vi(){if(!(this instanceof Vi))return new Vi;rm.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ah.inherits(Vi,rm);var fA=Vi;Vi.blockSize=1024;Vi.outSize=384;Vi.hmacStrength=192;Vi.padLength=128;Vi.prototype._digest=function(e){return e==="hex"?ah.toHex32(this.h.slice(0,12),"big"):ah.split32(this.h.slice(0,12),"big")};ca.sha1=N4;ca.sha224=G4;ca.sha256=Jv;ca.sha384=fA;ca.sha512=tm;var nm={},Ys=Ze,uA=aa,Gc=Ys.rotl32,f1=Ys.sum32,Ta=Ys.sum32_3,u1=Ys.sum32_4,im=uA.BlockHash;function ci(){if(!(this instanceof ci))return new ci;im.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ys.inherits(ci,im);nm.ripemd160=ci;ci.blockSize=512;ci.outSize=160;ci.hmacStrength=192;ci.padLength=64;ci.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,f=s,d=o,I=a,P=0;P<80;P++){var L=f1(Gc(u1(n,l1(P,i,s,o),e[hA[P]+r],lA(P)),gA[P]),a);n=a,a=o,o=Gc(s,10),s=i,i=L,L=f1(Gc(u1(c,l1(79-P,l,f,d),e[pA[P]+r],dA(P)),bA[P]),I),c=I,I=d,d=Gc(f,10),f=l,l=L}L=Ta(this.h[1],s,d),this.h[1]=Ta(this.h[2],o,I),this.h[2]=Ta(this.h[3],a,c),this.h[3]=Ta(this.h[4],n,l),this.h[4]=Ta(this.h[0],i,f),this.h[0]=L};ci.prototype._digest=function(e){return e==="hex"?Ys.toHex32(this.h,"little"):Ys.split32(this.h,"little")};function l1(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function lA(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function dA(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var hA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],pA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],gA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],bA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vA=Ze,mA=so;function jo(t,e,r){if(!(this instanceof jo))return new jo(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(vA.toArray(e,r))}var yA=jo;jo.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),mA(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};jo.prototype.update=function(e,r){return this.inner.update(e,r),this};jo.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ze,e.common=aa,e.sha=ca,e.ripemd=nm,e.hmac=yA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Cu);var sd,d1;function EA(){return d1||(d1=1,sd={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),sd}(function(t){var e=t,r=Cu,n=Zh,i=Qr,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,f){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var d=new o(f);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:d}),d}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=EA()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Lu);var _A=Cu,qs=Qh,sm=so;function ms(t){if(!(this instanceof ms))return new ms(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=qs.toArray(t.entropy,t.entropyEnc||"hex"),r=qs.toArray(t.nonce,t.nonceEnc||"hex"),n=qs.toArray(t.pers,t.persEnc||"hex");sm(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var wA=ms;ms.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ms.prototype._hmac=function(){return new _A.hmac(this.hash,this.K)};ms.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ms.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=qs.toArray(e,r),n=qs.toArray(n,i),sm(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ms.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=qs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,qs.encode(o,r)};var AA=In,xA=Qr,ch=xA.assert;function wr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var SA=wr;wr.fromPublic=function(e,r,n){return r instanceof wr?r:new wr(e,{pub:r,pubEnc:n})};wr.fromPrivate=function(e,r,n){return r instanceof wr?r:new wr(e,{priv:r,privEnc:n})};wr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};wr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};wr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};wr.prototype._importPrivate=function(e,r){this.priv=new AA(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};wr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ch(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ch(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};wr.prototype.derive=function(e){return e.validate()||ch(e.validate(),"public point not validated"),e.mul(this.priv).getX()};wr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};wr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};wr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Cf=In,t0=Qr,RA=t0.assert;function ku(t,e){if(t instanceof ku)return t;this._importDER(t,e)||(RA(t.r&&t.s,"Signature without r or s"),this.r=new Cf(t.r,16),this.s=new Cf(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var IA=ku;function TA(){this.place=0}function od(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function h1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}ku.prototype._importDER=function(e,r){e=t0.toArray(e,r);var n=new TA;if(e[n.place++]!==48)return!1;var i=od(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=od(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=od(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Cf(o),this.s=new Cf(c),this.recoveryParam=null,!0};function ad(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}ku.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=h1(r),n=h1(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];ad(i,r.length),i=i.concat(r),i.push(2),ad(i,n.length);var s=i.concat(n),o=[48];return ad(o,s.length),o=o.concat(s),t0.encode(o,e)};var $s=In,om=wA,OA=Qr,cd=Lu,PA=rc,am=OA.assert,r0=SA,Du=IA;function fn(t){if(!(this instanceof fn))return new fn(t);typeof t=="string"&&(am(Object.prototype.hasOwnProperty.call(cd,t),"Unknown curve "+t),t=cd[t]),t instanceof cd.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var NA=fn;fn.prototype.keyPair=function(e){return new r0(this,e)};fn.prototype.keyFromPrivate=function(e,r){return r0.fromPrivate(this,e,r)};fn.prototype.keyFromPublic=function(e,r){return r0.fromPublic(this,e,r)};fn.prototype.genKeyPair=function(e){e||(e={});for(var r=new om({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||PA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new $s(2));;){var s=new $s(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};fn.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};fn.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new $s(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new om({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new $s(1)),f=0;;f++){var d=i.k?i.k(f):new $s(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(l)>=0)){var I=this.g.mul(d);if(!I.isInfinity()){var P=I.getX(),L=P.umod(this.n);if(L.cmpn(0)!==0){var H=d.invm(this.n).mul(L.mul(r.getPrivate()).iadd(e));if(H=H.umod(this.n),H.cmpn(0)!==0){var q=(I.getY().isOdd()?1:0)|(P.cmp(L)!==0?2:0);return i.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),q^=1),new Du({r:L,s:H,recoveryParam:q})}}}}}};fn.prototype.verify=function(e,r,n,i){e=this._truncateToN(new $s(e,16)),n=this.keyFromPublic(n,i),r=new Du(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};fn.prototype.recoverPubKey=function(t,e,r,n){am((3&r)===r,"The recovery param is more than two bits"),e=new Du(e,n);var i=this.n,s=new $s(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(i),d=i.sub(s).mul(f).umod(i),I=a.mul(f).umod(i);return this.g.mulAdd(d,o,I)};fn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Du(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Sc=Qr,cm=Sc.assert,p1=Sc.parseBytes,ua=Sc.cachedProperty;function rr(t,e){this.eddsa=t,this._secret=p1(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=p1(e.pub)}rr.fromPublic=function(e,r){return r instanceof rr?r:new rr(e,{pub:r})};rr.fromSecret=function(e,r){return r instanceof rr?r:new rr(e,{secret:r})};rr.prototype.secret=function(){return this._secret};ua(rr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});ua(rr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});ua(rr,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});ua(rr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});ua(rr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});ua(rr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});rr.prototype.sign=function(e){return cm(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};rr.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};rr.prototype.getSecret=function(e){return cm(this._secret,"KeyPair is public only"),Sc.encode(this.secret(),e)};rr.prototype.getPublic=function(e){return Sc.encode(this.pubBytes(),e)};var MA=rr,LA=In,Uu=Qr,CA=Uu.assert,Ku=Uu.cachedProperty,BA=Uu.parseBytes;function oo(t,e){this.eddsa=t,typeof e!="object"&&(e=BA(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),CA(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof LA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Ku(oo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Ku(oo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Ku(oo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Ku(oo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});oo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};oo.prototype.toHex=function(){return Uu.encode(this.toBytes(),"hex").toUpperCase()};var kA=oo,DA=Cu,UA=Lu,Go=Qr,KA=Go.assert,fm=Go.parseBytes,um=MA,g1=kA;function kr(t){if(KA(t==="ed25519","only tested with ed25519 so far"),!(this instanceof kr))return new kr(t);t=UA[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=DA.sha512}var HA=kr;kr.prototype.sign=function(e,r){e=fm(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};kr.prototype.verify=function(e,r,n){e=fm(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};kr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Go.intFromLE(e.digest()).umod(this.curve.n)};kr.prototype.keyFromPublic=function(e){return um.fromPublic(this,e)};kr.prototype.keyFromSecret=function(e){return um.fromSecret(this,e)};kr.prototype.makeSignature=function(e){return e instanceof g1?e:new g1(this,e)};kr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};kr.prototype.decodePoint=function(e){e=Go.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Go.intFromLE(n);return this.curve.pointFromY(s,i)};kr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};kr.prototype.decodeInt=function(e){return Go.intFromLE(e)};kr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=k5.version,e.utils=Qr,e.rand=rc,e.curve=Zh,e.curves=Lu,e.ec=NA,e.eddsa=HA})(_5);var re;(function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.TZ4="tz4",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.BLPK="BLpk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="B",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ",t.VH="vh",t.SASK="sask",t.ZET1="zet1",t.TXR1="txr1",t.TXI="txi",t.TXM="txm",t.TXC="txc",t.TXMR="txmr",t.TXRL="txM",t.TXW="txw",t.SR1="sr1",t.SRC1="src1"})(re||(re={}));const yr={[re.TZ1]:new Uint8Array([6,161,159]),[re.TZ2]:new Uint8Array([6,161,161]),[re.TZ3]:new Uint8Array([6,161,164]),[re.TZ4]:new Uint8Array([6,161,166]),[re.KT]:new Uint8Array([2,90,121]),[re.KT1]:new Uint8Array([2,90,121]),[re.EDSK]:new Uint8Array([43,246,78,7]),[re.EDSK2]:new Uint8Array([13,15,58,7]),[re.SPSK]:new Uint8Array([17,162,224,201]),[re.P2SK]:new Uint8Array([16,81,238,189]),[re.EDPK]:new Uint8Array([13,15,37,217]),[re.SPPK]:new Uint8Array([3,254,226,86]),[re.P2PK]:new Uint8Array([3,178,139,127]),[re.BLPK]:new Uint8Array([6,149,135,204]),[re.EDESK]:new Uint8Array([7,90,60,179,41]),[re.SPESK]:new Uint8Array([9,237,241,174,150]),[re.P2ESK]:new Uint8Array([9,48,57,115,171]),[re.EDSIG]:new Uint8Array([9,245,205,134,18]),[re.SPSIG]:new Uint8Array([13,115,101,19,63]),[re.P2SIG]:new Uint8Array([54,240,44,52]),[re.SIG]:new Uint8Array([4,130,43]),[re.NET]:new Uint8Array([87,82,0]),[re.NCE]:new Uint8Array([69,220,169]),[re.B]:new Uint8Array([1,52]),[re.O]:new Uint8Array([5,116]),[re.LO]:new Uint8Array([133,233]),[re.LLO]:new Uint8Array([29,159,109]),[re.P]:new Uint8Array([2,170]),[re.CO]:new Uint8Array([79,179]),[re.ID]:new Uint8Array([153,103]),[re.EXPR]:new Uint8Array([13,44,64,27]),[re.TZ]:new Uint8Array([2,90,121]),[re.VH]:new Uint8Array([1,106,242]),[re.SASK]:new Uint8Array([11,237,20,92]),[re.ZET1]:new Uint8Array([18,71,40,223]),[re.TXR1]:new Uint8Array([1,128,120,31]),[re.TXI]:new Uint8Array([79,148,196]),[re.TXM]:new Uint8Array([79,149,30]),[re.TXC]:new Uint8Array([79,148,17]),[re.TXMR]:new Uint8Array([18,7,206,87]),[re.TXRL]:new Uint8Array([79,146,82]),[re.TXW]:new Uint8Array([79,150,72]),[re.SR1]:new Uint8Array([6,124,117]),[re.SRC1]:new Uint8Array([17,165,134,138])},lm={[re.TZ1]:20,[re.TZ2]:20,[re.TZ3]:20,[re.TZ4]:20,[re.KT]:20,[re.KT1]:20,[re.EDPK]:32,[re.SPPK]:33,[re.P2PK]:33,[re.BLPK]:48,[re.EDSIG]:64,[re.SPSIG]:64,[re.P2SIG]:64,[re.SIG]:64,[re.NET]:4,[re.B]:32,[re.P]:32,[re.O]:32,[re.VH]:32,[re.SASK]:169,[re.ZET1]:43,[re.TXR1]:20,[re.TXI]:32,[re.TXM]:32,[re.TXC]:32,[re.TXMR]:32,[re.TXRL]:32,[re.TXW]:32,[re.SR1]:20,[re.SRC1]:32};class dm extends Error{constructor(e,r){super(),this.publicKey=e,this.name="InvalidPublicKeyError";const n=`The public key '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class Mo extends Error{constructor(e){super(`The contract address '${e}' is invalid`),this.contractAddress=e,this.name="InvalidContractAddressError"}}class ft extends Error{constructor(e,r){super(),this.address=e,this.name="InvalidAddressError";const n=`The address '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class FA extends Error{constructor(e){super(`The chain id '${e}' is invalid`),this.chainId=e,this.name="InvalidChainIdError"}}class n0 extends Error{constructor(e){super(`The public key hash '${e}' is invalid`),this.keyHash=e,this.name="InvalidKeyHashError"}}class hm extends Error{constructor(e){super(`The operation hash '${e}' is invalid`),this.operationHash=e,this.name="InvalidOperationHashError"}}class qi extends Error{constructor(e){super(`The operation kind '${e}' is unsupported`),this.operationKind=e,this.name="InvalidOperationKindError"}}class i0 extends Error{constructor(e){super(e),this.message=e,this.name="DeprecationError"}}class jA extends Error{constructor(e,r){super(`Unable to convert ${e} to a ${r}`),this.value=e,this.desiredType=r,this.name="ValueConversionError"}}var _e;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"})(_e||(_e={}));function GA(t){return typeof t!="string"?!1:t in yr}function Ps(t,e){const r=new RegExp(`^(${e.join("|")})`).exec(t);if(!r||r.length===0)return _e.NO_PREFIX_MATCHED;const n=r[0];if(!GA(n))return _e.NO_PREFIX_MATCHED;if(t.includes("%")&&(t=t.split("%")[0]),!/^(KT1\w{33})$/.test(t)&&n==="KT1")return _e.INVALID_CHECKSUM;let s=Xr.decodeUnsafe(t);return s?(s=s.slice(yr[n].length),s.length!==lm[n]?_e.INVALID_LENGTH:_e.VALID):_e.INVALID_CHECKSUM}const pm=[re.TZ1,re.TZ2,re.TZ3,re.TZ4],gm=[re.KT1,re.TXR1],VA=[re.EDSIG,re.P2SIG,re.SPSIG,re.SIG],qA=[re.EDPK,re.SPPK,re.P2PK,re.BLPK],$A=[re.O];re.P;const zA=[re.B];function ct(t){return Ps(t,[...pm,...gm])}function bm(t){return Ps(t,[re.NET])}function Lo(t){return Ps(t,gm)}function s0(t){return Ps(t,pm)}function WA(t){return Ps(t,VA)}function XA(t){return Ps(t,qA)}function vm(t){return Ps(t,$A)}function JA(t){return Ps(t,zA)}const YA=6,QA=3;function b1(t){switch(t){case"tz":return YA;case"mtz":return QA;case"mutez":default:return 0}}function o0(t="mutez",e="mutez",r){const n=new be(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,b1(t))).dividedBy(Math.pow(10,b1(e)))}function ZA(t){const e=iw.blake2b(n8(t),void 0,32);return gs(e,yr.expr)}function gs(t,e){const r=typeof t=="string"?Uint8Array.from(Fi.Buffer.from(t,"hex")):t,n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),Xr.encode(Fi.Buffer.from(n.buffer))}const mm=(t,e)=>Xr.decode(t).slice(e.length);function e8(t){const e=Xr.decode(t),r={[yr.tz1.toString()]:"0000",[yr.tz2.toString()]:"0001",[yr.tz3.toString()]:"0002"},n={[yr.txr1.toString()]:"02"},i=r[new Uint8Array(e.slice(0,3)).toString()],s=n[new Uint8Array(e.slice(0,4)).toString()];if(i){const o=Fa(e.slice(3));return i+o}else if(s){const o=Fa(e.slice(4));return s+o+"00"}else return"01"+Fa(e.slice(3,42))+"00"}function t8(t){const e=Xr.decode(t);return Fa(e.slice(3,42))}function fh(t){if(t.substring(0,2)==="00"){const e={"0000":yr.tz1,"0001":yr.tz2,"0002":yr.tz3};return gs(t.substring(4),e[t.substring(0,4)])}else if(t.substring(0,2)==="02")return gs(t.substring(2,t.length-2),yr.txr1);return gs(t.substring(2,42),yr.KT)}function v1(t){return gs(t,yr.tz4)}function r8(t){if(t[0]==="0"){const e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return gs(t.substring(2),e[t.substring(0,2)])}}function m1(t){if(t[0]==="0"){const e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return gs(t.substring(2),e[t.substring(0,2)])}}const n8=t=>{const e=t.match(/[\da-f]{2}/gi);if(e)return new Uint8Array(e.map(r=>parseInt(r,16)));throw new jA(t,"Uint8Array")},Fa=t=>{const e=new Uint8Array(t),r=[];return e.forEach(n=>{const s=`00${n.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function y1(t){return t.startsWith("0x")?t.slice(2):t}function Vc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Te(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}const i8="main",Pe={block:"head"};var E1;(function(t){t.GET_BAKING_RIGHTS="getBakingRights",t.GET_BALLOTS="getBallots",t.GET_BALLOT_LIST="getBallotList",t.GET_BIG_MAP_KEY="getBigMapKey",t.GET_BIG_MAP_EXPR="getBigMapExpr",t.GET_BLOCK_HASH="getBlockHash",t.GET_BLOCK="getBlock",t.GET_BLOCK_HEADER="getBlockHeader",t.GET_BLOCK_METADATA="getBlockMetadata",t.GET_BALANCE="getBalance",t.GET_CHAIN_ID="getChainId",t.GET_CONSTANTS="getConstants",t.GET_CONTRACT="getContract",t.GET_CURRENT_PERIOD="getCurrentPeriod",t.GET_CURRENT_PROPOSAL="getCurrentProposal",t.GET_CURRENT_QUORUM="getCurrentQuorum",t.GET_DELEGATE="getDelegate",t.GET_DELEGATES="getDelegates",t.GET_VOTING_INFO="getVotingInfo",t.GET_ENDORSING_RIGHTS="getEndorsingRights",t.GET_ENTRYPOINTS="getEntrypoints",t.GET_LIVE_BLOCKS="getLiveBlocks",t.GET_MANAGER_KEY="getManagerKey",t.GET_NORMALIZED_SCRIPT="getNormalizedScript",t.GET_PROPOSALS="getProposals",t.GET_PROTOCOLS="getProtocols",t.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",t.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",t.GET_SCRIPT="getScript",t.GET_STORAGE="getStorage",t.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",t.GET_TX_ROLLUP_INBOX="getTxRollupInbox",t.GET_TX_ROLLUP_STATE="getTxRollupState",t.GET_VOTES_LISTINGS="getVotesListings",t.PACK_DATA="packData",t.GET_STORAGE_USED_SPACE="getStorageUsedSpace",t.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",t.GET_TICKET_BALANCE="getTicketBalance",t.GET_ALL_TICKET_BALANCES="getAllTicketBalances"})(E1||(E1={}));function Da(t,e){const r=Array.isArray(t);typeof e>"u"&&(e=Object.keys(t));const n=r?[]:{};return e.forEach(i=>{const s=t[i];let o;if(!(typeof s>"u")){if(Array.isArray(s)){o=Da(s),n[i]=o;return}o=new be(s),n[i]=o}}),n}var _1;(function(t){t.TOO_LARGE="too large"})(_1||(_1={}));var w1;(function(t){t.BAKING_REWARDS="baking rewards",t.REWARDS="rewards",t.FEES="fees",t.DEPOSITS="deposits",t.LEGACY_REWARDS="legacy_rewards",t.LEGACY_FEES="legacy_fees",t.LEGACY_DEPOSITS="legacy_deposits",t.BLOCK_FEES="block fees",t.NONCE_REVELATION_REWARDS="nonce revelation rewards",t.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",t.ENDORSING_REWARDS="endorsing rewards",t.BAKING_BONUSES="baking bonuses",t.STORAGE_FEES="storage fees",t.PUNISHMENTS="punishments",t.LOST_ENDORSING_REWARDS="lost endorsing rewards",t.SUBSIDY="subsidy",t.BURNED="burned",t.COMMITMENT="commitment",t.BOOTSTRAP="bootstrap",t.INVOICE="invoice",t.MINTED="minted",t.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",t.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",t.BONDS="bonds"})(w1||(w1={}));var oe;(function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.PREENDORSEMENT="preendorsement",t.SET_DEPOSITS_LIMIT="set_deposits_limit",t.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",t.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot",t.FAILING_NOOP="failing_noop",t.REGISTER_GLOBAL_CONSTANT="register_global_constant",t.TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.TX_ROLLUP_COMMIT="tx_rollup_commit",t.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",t.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",t.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",t.TX_ROLLUP_REJECTION="tx_rollup_rejection",t.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",t.TRANSFER_TICKET="transfer_ticket",t.INCREASE_PAID_STORAGE="increase_paid_storage",t.UPDATE_CONSENSUS_KEY="update_consensus_key",t.DRAIN_DELEGATE="drain_delegate",t.VDF_REVELATION="vdf_revelation",t.EVENT="event",t.TICKET_UPDATES="ticket_updates",t.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(oe||(oe={}));class yf{constructor(e,r=i8,n=new g_){this.url=e,this.chain=r,this.httpBackend=n}createURL(e){return`${this.url.replace(/\/+$/g,"")}${e}`}validateAddress(e){if(ct(e)!==_e.VALID)throw new ft(e)}validateContract(e){if(Lo(e)!==_e.VALID)throw new ft(e)}getBlockHash({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/balance`),method:"GET"});return new be(n)})}getStorage(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage`),method:"GET"})})}getScript(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/script`),method:"GET"})})}getNormalizedScript(e,r={unparsing_mode:"Readable"},{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/script/normalized`),method:"POST"},r)})}getContract(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new be(n.balance)})})}getManagerKey(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/manager_key`),method:"GET"})})}getDelegate(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/delegate`),method:"GET"})}catch(i){if(i instanceof ra&&i.status===Ya.NOT_FOUND)n=null;else throw i}return n})}getBigMapKey(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/big_map_get`),method:"POST"},r)})}getBigMapExpr(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/big_maps/${e}/${r}`),method:"GET"})})}getDelegates(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}`),method:"GET"}),i=Da(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},n),i),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(s=>{var{deposit:o,deposits:a,fees:c,rewards:l}=s,f=Vc(s,["deposit","deposits","fees","rewards"]);const d=Da({deposit:o,deposits:a,fees:c,rewards:l},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:d.deposit,deposits:d.deposits,fees:d.fees,rewards:d.rewards})}):void 0})})}getVotingInfo(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}/voting_info`),method:"GET"})})}getConstants({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),n=Da(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},r),n)})}getBlock({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"})})}getBlockHeader({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"})})}getBakingRights(e={},{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:e})})}getEndorsingRights(e={},{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:e})})}getBallotList({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return Da(r,["yay","nay","pass"])})}getCurrentProposal({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return r.map(n=>(n.voting_power&&(n.voting_power=new be(n.voting_power)),n)),r})}getProposals({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return r.map(n=>n[1]=new be(n[1])),r})}forgeOperations(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},e)})}injectOperation(e){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},e)})}getEntrypoints(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/entrypoints`),method:"GET"})})}runOperation(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},e)})}runCode(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},e)})}runScriptView(e,{block:r}=Pe){var{unparsing_mode:n="Readable"}=e,i=Vc(e,["unparsing_mode"]);return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}runView(e,{block:r}=Pe){var{unparsing_mode:n="Readable"}=e,i=Vc(e,["unparsing_mode"]);return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}getChainId(){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},e),{gas:i}=n,s=Vc(n,["gas"]);let o=i;const a=new be(i||"");return a.isNaN()||(o=a),Object.assign({gas:o},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${e}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:e}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getTxRollupState(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${e}/state`),method:"GET"})})}getTxRollupInbox(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/tx_rollup/${e}/inbox/${r}`),method:"GET"})})}getStorageUsedSpace(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/paid_space`),method:"GET"})})}getTicketBalance(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/ticket_balance`),method:"POST"},r)})}getAllTicketBalances(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/all_ticket_balances`),method:"GET"})})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uh=function(t,e){return uh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},uh(t,e)};function et(t,e){uh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Bf(t){return typeof t=="function"}var A1=!1,zn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}A1=t},get useDeprecatedSynchronousErrorHandling(){return A1}};function xo(t){setTimeout(function(){throw t},0)}var kf={closed:!0,next:function(t){},error:function(t){if(zn.useDeprecatedSynchronousErrorHandling)throw t;xo(t)},complete:function(){}},a0=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function ym(t){return t!==null&&typeof t=="object"}var s8=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),Ef=s8,Jr=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var c=n[a];c.remove(this)}if(Bf(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(d){e=d instanceof Ef?x1(d.errors):[d]}}if(a0(o))for(var a=-1,l=o.length;++a<l;){var f=o[a];if(ym(f))try{f.unsubscribe()}catch(I){e=e||[],I instanceof Ef?e=e.concat(x1(I.errors)):e.push(I)}}if(e)throw new Ef(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function x1(t){return t.reduce(function(e,r){return e.concat(r instanceof Ef?r.errors:r)},[])}var Df=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),kt=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=kf;break;case 1:if(!r){s.destination=kf;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new S1(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new S1(s,r,n,i);break}return s}return e.prototype[Df]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(Jr),S1=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,c=o;return Bf(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==kf&&(c=Object.create(n),Bf(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!zn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=zn.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):xo(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;xo(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!zn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),zn.useDeprecatedSynchronousErrorHandling)throw i;xo(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!zn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return zn.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(xo(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(kt);function o8(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof kt?t=n:t=null}return!0}function a8(t,e,r){if(t){if(t instanceof kt)return t;if(t[Df])return t[Df]()}return!t&&!e&&!r?new kt(kf):new kt(t,e,r)}var Rc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function c0(t){return t}function c8(t){return t.length===0?c0:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Rt=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=a8(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||zn.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),zn.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){zn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),o8(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=R1(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[Rc]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:c8(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=R1(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function R1(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var f8=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Hs=f8,Em=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(Jr),_m=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(kt),Vo=function(t){et(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[Df]=function(){return new _m(this)},e.prototype.lift=function(r){var n=new I1(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new Hs;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new Hs;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Hs;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new Hs;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new Hs;return this.hasError?(r.error(this.thrownError),Jr.EMPTY):this.isStopped?(r.complete(),Jr.EMPTY):(this.observers.push(r),new Em(this,r))},e.prototype.asObservable=function(){var r=new Rt;return r.source=this,r},e.create=function(r,n){return new I1(r,n)},e}(Rt),I1=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):Jr.EMPTY},e}(Vo);function nc(){return function(e){return e.lift(new u8(e))}}var u8=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new l8(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),l8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(kt),d8=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new Jr,r.add(this.source.subscribe(new p8(this.getSubject(),this))),r.closed&&(this._connection=null,r=Jr.EMPTY)),r},e.prototype.refCount=function(){return nc()(this)},e}(Rt),h8=function(){var t=d8.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),p8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(_m),Hu=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Hs;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(Vo),g8=function(t){et(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(Jr),wm=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(g8),b8=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(wm),T1=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),Am=function(t){et(e,t);function e(r,n){n===void 0&&(n=T1.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(T1),v8=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Am),m8=new v8(b8),y8=m8,xm=new Rt(function(t){return t.complete()});function f0(t){return t?E8(t):xm}function E8(t){return new Rt(function(e){return t.schedule(function(){return e.complete()})})}function ic(t){return t&&typeof t.schedule=="function"}var Sm=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function u0(t,e){return new Rt(function(r){var n=new Jr,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function Rm(t,e){return e?u0(t,e):new Rt(Sm(t))}function la(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return ic(r)?(t.pop(),u0(t,r)):Rm(t)}function l0(t,e){return e?new Rt(function(r){return e.schedule(_8,0,{error:t,subscriber:r})}):new Rt(function(r){return r.error(t)})}function _8(t){var e=t.error,r=t.subscriber;r.error(e)}var fd=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return la(this.value);case"E":return l0(this.error);case"C":return f0()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),w8=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new A8(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(fd.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(fd.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(fd.createComplete()),this.unsubscribe()},e}(kt),A8=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),sc=function(t){et(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new x8(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new Hs;if(this.isStopped||this.hasError?a=Jr.EMPTY:(this.observers.push(r),a=new Em(this,r)),s&&r.add(r=new w8(r,s)),n)for(var c=0;c<o&&!r.closed;c++)r.next(i[c]);else for(var c=0;c<o&&!r.closed;c++)r.next(i[c].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||y8).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(Vo),x8=function(){function t(e,r){this.time=e,this.value=r}return t}(),S8=new Am(wm),Im=S8;function Ei(){}var R8=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),I8=R8,T8=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Tm=T8;function zs(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new O8(t,e))}}var O8=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new P8(e,this.project,this.thisArg))},t}(),P8=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(kt),N8=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(kt),M8=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(kt),L8=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,xo),e}};function C8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fu=C8(),B8=function(t){return function(e){var r=t[Fu]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},k8=function(t){return function(e){var r=t[Rc]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Om=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Pm(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var d0=function(t){if(t&&typeof t[Rc]=="function")return k8(t);if(Om(t))return Sm(t);if(Pm(t))return L8(t);if(t&&typeof t[Fu]=="function")return B8(t);var e=ym(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function D8(t,e,r,n,i){if(i===void 0&&(i=new M8(t,r,n)),!i.closed)return e instanceof Rt?e.subscribe(i):d0(e)(i)}var O1={};function P1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return ic(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&a0(t[0])&&(t=t[0]),Rm(t,n).lift(new U8(r))}var U8=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new K8(e,this.resultSelector))},t}(),K8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(O1),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(D8(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===O1?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(N8);function H8(t,e){return new Rt(function(r){var n=new Jr;return n.add(e.schedule(function(){var i=t[Rc]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function F8(t,e){return new Rt(function(r){var n=new Jr;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function j8(t,e){if(!t)throw new Error("Iterable cannot be null");return new Rt(function(r){var n=new Jr,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[Fu](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){r.error(c);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function G8(t){return t&&typeof t[Rc]=="function"}function V8(t){return t&&typeof t[Fu]=="function"}function q8(t,e){if(t!=null){if(G8(t))return H8(t,e);if(Pm(t))return F8(t,e);if(Om(t))return u0(t,e);if(V8(t)||typeof t=="string")return j8(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function ao(t,e){return e?q8(t,e):t instanceof Rt?t:new Rt(d0(t))}var Ic=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(kt),Tc=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(kt);function Oc(t,e){if(!e.closed){if(t instanceof Rt)return t.subscribe(e);var r;try{r=d0(t)(e)}catch(n){e.error(n)}return r}}function ju(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(ju(function(i,s){return ao(t(i,s)).pipe(zs(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new $8(t,r))})}var $8=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new z8(e,this.project,this.concurrent))},t}(),z8=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new Ic(this),i=this.destination;i.add(n);var s=Oc(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(Tc);function W8(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),ju(c0,t)}function X8(){return W8(1)}function Uf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return X8()(la.apply(void 0,t))}function Nm(t){return new Rt(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?ao(r):f0();return n.subscribe(e)})}function N1(t){return!a0(t)&&t-parseFloat(t)+1>=0}var J8=new Rt(Ei);function Kf(t,e){return function(n){return n.lift(new Y8(t,e))}}var Y8=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new Q8(e,this.predicate,this.thisArg))},t}(),Q8=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(kt);function h0(t,e,r){return t===void 0&&(t=0),new Rt(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(Z8,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function Z8(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function M1(t,e,r){t===void 0&&(t=0);var n=-1;return N1(e)?n=Number(e)<1&&1||Number(e):ic(e)&&(r=e),ic(r)||(r=Im),new Rt(function(i){var s=N1(t)?t:+t-r.now();return r.schedule(ex,s,{index:0,period:n,subscriber:i})})}function ex(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function p0(t){return function(r){var n=new tx(t),i=r.lift(n);return n.caught=i}}var tx=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new rx(e,this.selector,this.caught))},t}(),rx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new Ic(this);this.add(i);var s=Oc(n,i);s!==i&&this.add(s)}},e}(Tc);function Pc(t,e){return ju(t,e,1)}function nx(t){return t===void 0&&(t=null),function(e){return e.lift(new ix(t))}}var ix=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new sx(e,this.defaultValue))},t}(),sx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(kt);function ox(t){return t instanceof Date&&!isNaN(+t)}function Mm(t,e){return function(r){return r.lift(new ax(t,e))}}var ax=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new cx(e,this.compare,this.keySelector))},t}(),cx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(kt);function fx(t,e){return Mm(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function ux(t){return t===void 0&&(t=hx),function(e){return e.lift(new lx(t))}}var lx=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new dx(e,this.errorFactory))},t}(),dx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(kt);function hx(){return new Tm}function px(t){return function(e){return t===0?f0():e.lift(new gx(t))}}var gx=function(){function t(e){if(this.total=e,this.total<0)throw new I8}return t.prototype.call=function(e,r){return r.subscribe(new bx(e,this.total))},t}(),bx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(kt);function Lm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return Uf(r,la.apply(void 0,t))}}function Mi(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Kf(function(i,s){return t(i,s,n)}):c0,px(1),r?nx(e):ux(function(){return new Tm}))}}function lh(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new vx(i,e));var s=Object.create(n,h8);return s.source=n,s.subjectFactory=i,s}}var vx=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function L1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return zs(mx(t,r))(n)}}function mx(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i?.[t[s]];if(o!==void 0)i=o;else return}return i};return r}function yx(t){return t?lh(function(){return new Vo},t):lh(new Vo)}function dh(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new sc(t,e,n);return function(o){return lh(function(){return s},i)(o)}}function Cm(t){return t===void 0&&(t=-1),function(e){return e.lift(new Ex(t,e))}}var Ex=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new _x(e,this.count,this.source))},t}(),_x=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(kt);function C1(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(wx(n))}}function wx(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,c=0,l,f=!1,d=!1;return function(P){c++;var L;!a||f?(f=!1,a=new sc(r,i,o),L=a.subscribe(this),l=P.subscribe({next:function(H){a.next(H)},error:function(H){f=!0,a.error(H)},complete:function(){d=!0,l=void 0,a.complete()}}),d&&(l=void 0)):L=a.subscribe(this),this.add(function(){c--,L.unsubscribe(),L=void 0,l&&!d&&s&&c===0&&(l.unsubscribe(),l=void 0,a=void 0)})}}function Ax(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return ic(r)?(t.pop(),function(n){return Uf(t,n,r)}):function(n){return Uf(t,n)}}function Zn(t,e){return typeof e=="function"?function(r){return r.pipe(Zn(function(n,i){return ao(t(n,i)).pipe(zs(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new xx(t))}}var xx=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new Sx(e,this.project))},t}(),Sx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new Ic(this),s=this.destination;s.add(i),this.innerSubscription=Oc(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(Tc);function Rx(t){return function(e){return e.lift(new Ix(t))}}var Ix=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new Tx(e),i=Oc(this.notifier,new Ic(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),Tx=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Tc);function Ox(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new Px(t,e))}}var Px=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new Nx(e,this.predicate,this.inclusive))},t}(),Nx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(kt);function Hf(t,e,r){return function(i){return i.lift(new Mx(t,e,r))}}var Mx=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new Lx(e,this.nextOrObserver,this.error,this.complete))},t}(),Lx=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=Ei,o._tapError=Ei,o._tapComplete=Ei,o._tapError=i||Ei,o._tapComplete=s||Ei,Bf(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Ei,o._tapError=n.error||Ei,o._tapComplete=n.complete||Ei),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(kt);function Bm(t,e,r){return r===void 0&&(r=Im),function(n){var i=ox(t),s=i?+t-r.now():Math.abs(t);return n.lift(new Cx(s,i,e,r))}}var Cx=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new Bx(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Bx=function(t){et(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(Oc(n,new Ic(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(Tc),kx=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(o){return function(a,c){var l={key:a,value:o[a]},f={key:c,value:o[c]};return s(l,f)}}}(e.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,c;if(Array.isArray(o)){for(c="[",a=0;a<o.length;a++)a&&(c+=","),c+=s(o[a])||"null";return c+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,f=Object.keys(o).sort(n&&n(o));for(c="",a=0;a<f.length;a++){var d=f[a],I=s(o[d]);I&&(c&&(c+=","),c+=JSON.stringify(d)+":"+I)}return i.splice(l,1),"{"+c+"}"}}(t)},km;class Dx extends Error{constructor(e){super(`The map type '${e}' is invalid`),this.mapType=e,this.name="InvalidMapTypeError"}}const Dm=Symbol.for("taquito-michelson-map-type-symbol"),Ux=t=>"args"in t&&Array.isArray(t.args)&&t.args.length===2;class B1 extends Error{constructor(e,r,n){super(`${n} not compliant with underlying michelson type`),this.value=e,this.type=r,this.name="MapTypecheckError"}}class qr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[km]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&e[Dm]===!0}setType(e){if(!Ux(e))throw new Dx(e.toString());this.keySchema=new $r(e.args[0]),this.valueSchema=new $r(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,r){const n=new qr(r);return Object.keys(e).forEach(i=>{n.set(i,e[i])}),n}typecheckKey(e){return this.keySchema?this.keySchema.Typecheck(e):!0}typecheckValue(e){return this.valueSchema?this.valueSchema.Typecheck(e):!0}assertTypecheckValue(e){if(!this.typecheckValue(e))throw new B1(e,this.valueSchema,"value")}assertTypecheckKey(e){if(!this.typecheckKey(e))throw new B1(e,this.keySchema,"key")}serializeDeterministically(e){return kx(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.valueMap.get(r)}set(e,r){this.assertTypecheckKey(e),this.assertTypecheckValue(r);const n=this.serializeDeterministically(e);this.keyMap.set(n,e),this.valueMap.set(n,r)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[r,n]of this.entries())e(n,r,this)}}km=Dm;class dt extends Error{constructor(e,r,n){super(),this.value=e,this.token=r,this.name="ValidationError";const i=this.token.annot(),s=i?`[${i}] `:"";this.message=`${s}${n}`}}class Ft{constructor(e,r,n){this.val=e,this.idx=r,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=n=>{if(typeof n=="object"){if(Array.isArray(n))return n.map(o=>e(o));const i=n;return i.args?{prim:i.prim,args:i.args.map(s=>e(s))}:{prim:i.prim}}return n};return(n=>n.args?{prim:n.prim,args:n.args.map(i=>e(i))}:{prim:n.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Pt extends Ft{compare(e,r){return e===r?0:e<r?-1:1}}class k1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BigMapValidationError"}}class Vr extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Vr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(e){return qr.isMichelsonMap(e)?null:new k1(e,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(e){return e instanceof qr?e:typeof e=="object"?Object.keys(e).length===0?new qr:qr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[Vr.prim]?r[Vr.prim](n,this.val):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}Execute(e,r){if(r&&r[Vr.prim])return r[Vr.prim](e,this.val);if(Array.isArray(e)){const n=new qr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1]))}),n}else{if("int"in e)return e.int;throw new k1(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,r){return Vr.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}Vr.prim="big_map";class Kx extends Error{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class rt extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e[e.length-1],n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof rt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())===String(r)&&!(n instanceof rt))return e.pop(),{prim:"Left",args:[n.Encode(e)]};if(String(s.annot())===String(r)&&!(s instanceof rt))return e.pop(),{prim:"Right",args:[s.Encode(e)]};if(n instanceof rt){const o=n.Encode(e);if(o)return{prim:"Left",args:[o]}}if(s instanceof rt){const o=s.Encode(e);if(o)return{prim:"Right",args:[o]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let r=1;e instanceof rt&&(r=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+r),i=[];if(e instanceof rt)i.push(...e.ExtractSignature());else for(const s of e.ExtractSignature())i.push([e.annot(),...s]);if(n instanceof rt)i.push(...n.ExtractSignature());else for(const s of n.ExtractSignature())i.push([n.annot(),...s]);return i}EncodeObject(e,r){const n=Object.keys(e)[0],i=this.createToken(this.val.args[0],this.idx);let s=1;i instanceof rt&&(s=Object.keys(i.ExtractSchema()).length);const o=this.createToken(this.val.args[1],this.idx+s);if(String(i.annot())===String(n)&&!(i instanceof rt))return{prim:"Left",args:[i.EncodeObject(e[n],r)]};if(String(o.annot())===String(n)&&!(o instanceof rt))return{prim:"Right",args:[o.EncodeObject(e[n],r)]};if(i instanceof rt){const a=i.EncodeObject(e,r);if(a)return{prim:"Left",args:[a]}}if(o instanceof rt){const a=o.EncodeObject(e,r);if(a)return{prim:"Right",args:[a]}}return null}Execute(e,r){const n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof rt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(e.prim==="Right")return s instanceof rt?s.Execute(e.args[0],r):{[s.annot()]:s.Execute(e.args[0],r)};if(e.prim==="Left")return n instanceof rt?n.Execute(e.args[0],r):{[n.annot()]:n.Execute(e.args[0],r)};throw new Kx(`Was expecting Left or Right prim but got: ${e.prim}`)}traversal(e,r,n){const i=this.createToken(this.val.args[0],this.idx);let s=1,o;i instanceof rt&&!i.hasAnnotations()?(o=e(i),s=Object.keys(i.ExtractSchema()).length):o={[i.annot()]:e(i)};const a=this.createToken(this.val.args[1],this.idx+s);let c;return a instanceof rt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},n(o,c)}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}generateSchema(){return{__michelsonType:rt.prim,schema:this.traversal(e=>e instanceof rt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof rt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}}findToken(e){const r=this.createToken(this.val.args[0],this.idx);let n=1;r instanceof rt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+n);if(String(r.annot())===String(e)&&!(r instanceof rt)&&r instanceof Pt)return r;if(String(i.annot())===String(e)&&!(i instanceof rt)&&i instanceof Pt)return i;if(r instanceof rt){const s=r.findToken(e);if(s)return s}if(i instanceof rt){const s=i.findToken(e);if(s)return s}return null}compare(e,r){const n=Object.keys(e)[0],i=Object.keys(r)[0];if(n===i){const s=this.findToken(n);if(s instanceof Pt)return s.compare(e[n],r[n])}else{const s=JSON.stringify(this.EncodeObject(e)),o=JSON.stringify(this.EncodeObject(r));return s<o?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return rt.prim===e&&r.push(this),this.traversal(n=>n.findAndReturnTokens(e,r),n=>n.findAndReturnTokens(e,r),(n,i)=>Object.assign(Object.assign({},n),i)),r}}rt.prim="or";class Hx extends Error{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class Fx extends Error{constructor(e,r){super(`Tokens ${e} and ${r} are not comparable`),this.val1=e,this.val2=r,this.name="TokenComparisonError"}}function hh(t,e=Ht.prim){if(Array.isArray(t))return hh({prim:e,args:t},e);if(t.args===void 0)throw new Hx("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return t.args.length>2?[t.args[0],{prim:e,args:t.args.slice(1)}]:[t.args[0],t.args[1]]}class Ht extends Pt{constructor(e,r,n){super(Array.isArray(e)?{prim:Ht.prim,args:e}:e.prim?e:{prim:Ht.prim,args:e},r,n)}args(){return hh(this.val)}tokens(){let e=0;return this.args().map(r=>{const n=this.createToken(r,this.idx+e);return n instanceof Ht?e+=Object.keys(n.ExtractSchema()).length:e++,n})}Encode(e){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(e))}}ExtractSignature(){const e=this.args(),r=this.createToken(e[0],this.idx);let n=1;r instanceof rt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(e[1],this.idx+n),s=[];for(const o of r.ExtractSignature())for(const a of i.ExtractSignature())s.push([...o,...a]);return s}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,r){const[n,i]=this.tokens();let s;n instanceof Ht&&!n.hasAnnotations()?s=e:s=e[n.annot()];let o;return i instanceof Ht&&!i.hasAnnotations()?o=e:o=e[i.annot()],{prim:"Pair",args:[n.EncodeObject(s,r),i.EncodeObject(o,r)]}}traversal(e,r){const n=this.args(),i=this.createToken(n[0],this.idx);let s=1,o;i instanceof Ht&&(s=Object.keys(i.ExtractSchema()).length),i instanceof Ht&&!i.hasAnnotations()?o=e(i):o={[i.annot()]:e(i)};const a=this.createToken(n[1],this.idx+s);let c;return a instanceof Ht&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},Object.assign(Object.assign({},o),c)}Execute(e,r){const n=hh(e,"Pair");return this.traversal(i=>i.Execute(n[0],r),i=>i.Execute(n[1],r))}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema())}generateSchema(){return{__michelsonType:Ht.prim,schema:this.traversal(e=>e instanceof Ht&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Ht&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,r){const[n,i]=this.tokens(),s=(o,a)=>o instanceof Ht&&!o.hasAnnotations()?a:a[o.annot()];if(n instanceof Pt&&i instanceof Pt){const o=n.compare(s(n,e),s(n,r));return o===0?i.compare(s(i,e),s(i,r)):o}throw new Fx(e,r)}findAndReturnTokens(e,r){return Ht.prim===e&&r.push(this),this.tokens().map(n=>n.findAndReturnTokens(e,r)),r}}Ht.prim="pair";class D1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NatValidationError"}}class Cn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new be(r).toFixed()}}isValid(e){const r=new be(e);return r.isNaN()?new D1(e,this,`Value is not a number: ${e}`):r.isNegative()?new D1(e,this,`Value cannot be negative: ${e}`):null}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Cn.prim]?r[Cn.prim](e):{int:new be(e).toFixed()}}ExtractSchema(){return Cn.prim}generateSchema(){return{__michelsonType:Cn.prim,schema:Cn.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Cn.prim}}}ToKey({int:e}){return new be(e)}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Cn.prim===e&&r.push(this),r}}Cn.prim="nat";class Bn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Bn.prim}generateSchema(){return{__michelsonType:Bn.prim,schema:Bn.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[Bn.prim]?r[Bn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Bn.prim}}}findAndReturnTokens(e,r){return Bn.prim===e&&r.push(this),r}}Bn.prim="string";class ud extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="AddressValidationError"}}class wi extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:e8(e)},type:{prim:"bytes"}}}isValid(e){return ct(e)!==_e.VALID?new ud(e,this,`Address is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[wi.prim]?r[wi.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new ud(e,this,`cannot be missing both string and bytes: ${e}`);return fh(e.bytes)}ExtractSchema(){return wi.prim}generateSchema(){return{__michelsonType:wi.prim,schema:wi.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new ud({bytes:e,string:r},this,`cannot be missing both string and bytes ${{string:r,bytes:e}}`);return fh(e)}compare(e,r){const n=o=>o.startsWith("tz"),i=n(e),s=n(r);return i&&!s?-1:s&&!i?1:super.compare(e,r)}findAndReturnTokens(e,r){return wi.prim===e&&r.push(this),r}}wi.prim="address";class jx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MapValidationError"}}class ps extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return qr.isMichelsonMap(e)?null:new jx(e,this,"Value must be a MichelsonMap")}Execute(e,r){const n=new qr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1],r))}),n}objLitToMichelsonMap(e){return e instanceof qr?e:typeof e=="object"?Object.keys(e).length===0?new qr:qr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[ps.prim]?r[ps.prim](n):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ps.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,r){return ps.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}ps.prim="map";class kn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,r){return r&&r[kn.prim]?r[kn.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return kn.prim}generateSchema(){return{__michelsonType:kn.prim,schema:kn.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:kn.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,r){return e&&r||!e&&!r?0:e?1:-1}findAndReturnTokens(e,r){return kn.prim===e&&r.push(this),r}}kn.prim="bool";class qc extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="TxRollupL2AddressValidationError"}}class Ai extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:t8(e)},type:{prim:"bytes"}}}isValid(e){if(ct(e)!==_e.VALID)throw new qc(e,this,`tx_rollup_l2_address is not valid: ${e}`);return null}Encode(e){const r=e.pop();if(!r)throw new qc(r,this,`arg missing to encode: this -> "${r}"`);return this.isValid(r),{string:r}}EncodeObject(e,r){return this.isValid(e),r&&r[Ai.prim]?r[Ai.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new qc(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return v1(e.bytes)}ExtractSchema(){return Ai.prim}generateSchema(){return{__michelsonType:Ai.prim,schema:Ai.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new qc(e,this,`value cannot be missing string and byte value. must have one: bytes = ${e}`);return v1(e)}findAndReturnTokens(e,r){return Ai.prim===e&&r.push(this),r}}Ai.prim="tx_rollup_l2_address";class U1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ContractValidationError"}}class Cr extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return ct(e)!==_e.VALID?new U1(e,this,"Contract address is not valid"):null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new U1(e,this,"must contain bytes or string");return fh(e.bytes)}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Cr.prim]?r[Cr.prim](e):{string:e}}ExtractSchema(){return Cr.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:Cr.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,r){return Cr.prim===e&&r.push(this),r}}Cr.prim="contract";class Gx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ListValidationError"}}class ss extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(e){return Array.isArray(e)?null:new Gx(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;const i=this.createToken(this.val.args[0],0);return r.reduce((s,o)=>[...s,i.EncodeObject(o)],[])}Execute(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return e.reduce((s,o)=>[...s,n.Execute(o,r)],[])}EncodeObject(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return r&&r[ss.prim]?r[ss.prim](e):e.reduce((s,o)=>[...s,n.EncodeObject(o)],[])}ExtractSchema(){return{[ss.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:ss.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,r){return ss.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),r}}ss.prim="list";class Vx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MutezValidationError"}}class Dn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}ExtractSchema(){return Dn.prim}generateSchema(){return{__michelsonType:Dn.prim,schema:Dn.prim}}isValid(e){return new be(e).isNaN()?new Vx(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:String(r).toString()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Dn.prim]?r[Dn.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Dn.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Dn.prim===e&&r.push(this),r}}Dn.prim="mutez";class qx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BytesValidationError"}}class Un extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Un.prim}}}isValid(e){return typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new qx(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=y1(this.convertUint8ArrayToHexString(r));const n=this.isValid(r);if(n)throw n;return{bytes:String(r).toString()}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=y1(e));const n=this.isValid(e);if(n)throw n;return r&&r[Un.prim]?r[Un.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return Un.prim}generateSchema(){return{__michelsonType:Un.prim,schema:Un.prim}}ToKey({bytes:e,string:r}){return r||e}findAndReturnTokens(e,r){return Un.prim===e&&r.push(this),r}}Un.prim="bytes";class qo extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const r=e;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,r){const n=e;return n==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,r)]}}Execute(e,r){return e.prim==="None"?null:this.schema().Execute(e.args[0],r)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:qo.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(e,r){if(e){if(!r)return 1}else return-1;return this.KeySchema.compare(e,r)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return qo.prim===e&&r.push(this),this.subToken().findAndReturnTokens(e,r),r}}qo.prim="option";class Kn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const r=e.pop();return typeof r=="number"?{int:String(r)}:{string:r}}EncodeObject(e,r){return r&&r[Kn.prim]?r[Kn.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}ExtractSchema(){return Kn.prim}generateSchema(){return{__michelsonType:Kn.prim,schema:Kn.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Kn.prim}}}findAndReturnTokens(e,r){return Kn.prim===e&&r.push(this),r}}Kn.prim="timestamp";class $x extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="IntValidationError"}}class mr extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}ExtractSchema(){return mr.prim}generateSchema(){return{__michelsonType:mr.prim,schema:mr.prim}}isValid(e){return new be(e).isNaN()?new $x(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new be(r).toFixed()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[mr.prim]?r[mr.prim](e):{int:new be(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:mr.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return mr.prim===e&&r.push(this),r}}mr.prim="int";class Hn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,r){return r&&r[Hn.prim]?r[Hn.prim](e):{prim:"Unit"}}Execute(e){return $1}ExtractSchema(){return Hn.prim}generateSchema(){return{__michelsonType:Hn.prim,schema:Hn.prim}}compare(e,r){return 0}ToKey(e){return $1}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Hn.prim}}}findAndReturnTokens(e,r){return Hn.prim===e&&r.push(this),r}}Hn.prim="unit";const zx=4;class Wx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyValidationError"}}class Fn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:r8(e.bytes)}isValid(e){return XA(e)!==_e.VALID?new Wx(e,this,"Key is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Fn.prim]?r[Fn.prim](e):{string:e}}ExtractSchema(){return Fn.prim}generateSchema(){return{__michelsonType:Fn.prim,schema:Fn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Fn.prim}}}compare(e,r){const n=this.getPrefix(e),i=this.getPrefix(r);if(n===re.EDPK&&i!==re.EDPK)return-1;if(n===re.SPPK&&i!==re.SPPK)return i===re.EDPK?1:-1;if(n===re.P2PK){if(i!==re.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(e),o=this.getP256PublicKeyComparableBytes(r);return Buffer.compare(s,o)}return super.compare(e,r)}getPrefix(e){return e.substring(0,zx)}getP256PublicKeyComparableBytes(e){return mm(e,yr[re.P2PK]).slice(1)}findAndReturnTokens(e,r){return Fn.prim===e&&r.push(this),r}}Fn.prim="key";class Xx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyHashValidationError"}}class jn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:m1(e.bytes)}isValid(e){return s0(e)!==_e.VALID?new Xx(e,this,`KeyHash is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[jn.prim]?r[jn.prim](e):{string:e}}ExtractSchema(){return jn.prim}generateSchema(){return{__michelsonType:jn.prim,schema:jn.prim}}ToKey({string:e,bytes:r}){return e||m1(r)}ToBigMapKey(e){return{key:{string:e},type:{prim:jn.prim}}}findAndReturnTokens(e,r){return jn.prim===e&&r.push(this),r}}jn.prim="key_hash";class Jx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SignatureValidationError"}}class Gn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:e.bytes}isValid(e){return WA(e)!==_e.VALID?new Jx(e,this,"Signature is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Gn.prim]?r[Gn.prim](e):{string:e}}ExtractSchema(){return Gn.prim}generateSchema(){return{__michelsonType:Gn.prim,schema:Gn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Gn.prim}}}findAndReturnTokens(e,r){return Gn.prim===e&&r.push(this),r}}Gn.prim="signature";class os extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,r){return r&&r[os.prim]?r[os.prim](e):e}ExtractSchema(){return{[os.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:os.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,r){return os.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,r),r}}os.prim="lambda";class xi extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[xi.prim]?r[xi.prim](e):{string:e}}ExtractSchema(){return xi.prim}generateSchema(){return{__michelsonType:xi.prim,schema:xi.prim}}findAndReturnTokens(e,r){return xi.prim===e&&r.push(this),r}}xi.prim="operation";class Yx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SetValidationError"}}class as extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Array.isArray(e)?null:new Yx(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return r.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}Execute(e,r){return e.reduce((n,i)=>[...n,this.KeySchema.Execute(i,r)],[])}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[as.prim]?r[as.prim](e):e.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return as.prim}generateSchema(){return{__michelsonType:as.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,r){return as.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),r}}as.prim="set";class Qx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChainIDValidationError"}}class Vn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return bm(e)!==_e.VALID?new Qx(e,this,"ChainID is not valid"):null}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Vn.prim}generateSchema(){return{__michelsonType:Vn.prim,schema:Vn.prim}}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Vn.prim]?r[Vn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Vn.prim}}}findAndReturnTokens(e,r){return Vn.prim===e&&r.push(this),r}}Vn.prim="chain_id";class K1 extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const Zx={prim:"contract"},eS={prim:"int"};class Wn extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new K1}EncodeObject(e,r){if(r&&r[Wn.prim])return r[Wn.prim](e,this.val);throw new K1}Execute(e,r){if(r&&r[Wn.prim])return r[Wn.prim](e,this.val);const n=this.createToken(Zx,this.idx),i=this.valueToken,s=this.createToken(eS,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Cr.prim,value:this.valueToken.ExtractSchema(),amount:mr.prim}}generateSchema(){return{__michelsonType:Wn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Cr.prim,schema:Cr.prim},amount:{__michelsonType:mr.prim,schema:mr.prim}}}}findAndReturnTokens(e,r){return Wn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}Wn.prim="ticket";class H1 extends Error{constructor(){super("Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"),this.name="TicketDeprecatedEncodeError"}}const tS={prim:"contract"},rS={prim:"int"};class Xn extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new H1}EncodeObject(e,r){if(r&&r[Xn.prim])return r[Xn.prim](e,this.val);throw new H1}Execute(e,r){if(r&&r[Xn.prim])return r[Xn.prim](e,this.val);const n=this.createToken(tS,this.idx),i=this.valueToken,s=this.createToken(rS,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Cr.prim,value:this.valueToken.ExtractSchema(),amount:mr.prim}}generateSchema(){return{__michelsonType:Xn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Cr.prim,schema:Cr.prim},amount:{__michelsonType:mr.prim,schema:mr.prim}}}}findAndReturnTokens(e,r){return Xn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}Xn.prim="ticket_deprecated";class ld extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NeverTokenError"}}class Si extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e.pop();throw new ld(r,this,"Assigning a value to the type never is forbidden.")}EncodeObject(e,r){if(r&&r[Si.prim])return r[Si.prim](e);throw new ld(e,this,"Assigning a value to the type never is forbidden.")}Execute(e){throw new ld(e,this,"There is no literal value for the type never.")}ExtractSchema(){return Si.prim}generateSchema(){return{__michelsonType:Si.prim,schema:Si.prim}}findAndReturnTokens(e,r){return Si.prim===e&&r.push(this),r}}Si.prim="never";class dd extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingStateValidationError"}}class qn extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,r){if(r&&r[qn.prim])return r[qn.prim](e,this.val);if("int"in e)return e.int;throw new dd(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(this.isValid(r))return[];throw new dd(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}EncodeObject(e,r){if(r&&r[qn.prim])return r[qn.prim](e);if(this.isValid(e))return[];throw new dd(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}ExtractSchema(){return{[qn.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:qn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return qn.prim===e&&r.push(this),r}}qn.prim="sapling_state";class F1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionValidationError"}}class cs extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new F1(e,this,"There is no literal value for the sapling_transaction type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new F1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[cs.prim]?r[cs.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[cs.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:cs.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return cs.prim===e&&r.push(this),r}}cs.prim="sapling_transaction";class j1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionDeprecatedValidationError"}}class fs extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new j1(e,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new j1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[fs.prim]?r[fs.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[fs.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:fs.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return fs.prim===e&&r.push(this),r}}fs.prim="sapling_transaction_deprecated";class nS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381frValidationError"}}class Ri extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new nS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}}EncodeObject(e,r){if(r&&r[Ri.prim])return r[Ri.prim](e);if(typeof e=="number")return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return{bytes:e}}}Execute(e){return e.bytes}ExtractSchema(){return Ri.prim}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}findAndReturnTokens(e,r){return Ri.prim===e&&r.push(this),r}}Ri.prim="bls12_381_fr";class iS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g1ValidationError"}}class Ii extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new iS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ii.prim]?r[Ii.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ii.prim}generateSchema(){return{__michelsonType:Ii.prim,schema:Ii.prim}}findAndReturnTokens(e,r){return Ii.prim===e&&r.push(this),r}}Ii.prim="bls12_381_g1";class sS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g2ValidationError"}}class Ti extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new sS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ti.prim]?r[Ti.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ti.prim}generateSchema(){return{__michelsonType:Ti.prim,schema:Ti.prim}}findAndReturnTokens(e,r){return Ti.prim===e&&r.push(this),r}}Ti.prim="bls12_381_g2";class oS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestValidationError"}}class Oi extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new oS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Oi.prim]?r[Oi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Oi.prim}generateSchema(){return{__michelsonType:Oi.prim,schema:Oi.prim}}findAndReturnTokens(e,r){return Oi.prim===e&&r.push(this),r}}Oi.prim="chest";class aS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestKeyValidationError"}}class Pi extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new aS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Pi.prim]?r[Pi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Pi.prim}generateSchema(){return{__michelsonType:Pi.prim,schema:Pi.prim}}findAndReturnTokens(e,r){return Pi.prim===e&&r.push(this),r}}Pi.prim="chest_key";class G1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantEncodingError"}}class cS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantDecodingError"}}class $n extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e,r){if(r&&r[$n.prim])return r[$n.prim](e,this.val);throw new cS(e,this,`Unable to decode a value represented by a {} constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new G1(e,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,r){if(r&&r[$n.prim])return r[$n.prim](e);throw new G1(e,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return $n.prim}generateSchema(){return{__michelsonType:$n.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,r){return $n.prim===e&&r.push(this),r}}$n.prim="constant";const fS=[Ht,Cn,Bn,Vr,wi,Ai,ps,kn,rt,Cr,ss,Dn,Un,qo,Kn,mr,Hn,Fn,jn,Gn,os,xi,as,Vn,Wn,Xn,Si,qn,cs,fs,Ri,Ii,Ti,Oi,Pi,$n];class uS extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="Invalid token error"}}function Qs(t,e){if(Array.isArray(t))return new Ht(t,e,Qs);const r=fS.find(n=>n.prim===t.prim);if(!r)throw new uS("Malformed data expected a value with a valid prim property",t);return new r(t,e,Qs)}class lS extends Error{constructor(e,r){super(`Unable to encode the parameter of the view: ${e}.`),this.smartContractViewName=e,this.originalError=r,this.name="ViewEncodingError"}}class V1 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidScriptError"}}class Um extends Error{constructor(e){super("Invalid RPC response passed as argument(s)"),this.script=e,this.name="InvalidRpcResponseError"}}class q1 extends Error{constructor(e,r,n){super(`
      ${e}. Error encountered when trying to encode arguments: 

      [${r}]
    `),this.message=e,this.args=r,this.originalError=n,this.name="ParameterEncodingError"}}class $c extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchema"}}class dS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapDiff"}}class hS extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="BigMapEncodingError"}}class pS extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="StorageEncodingError"}}class gS extends Error{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var Km;const Hm=Symbol.for("taquito-schema-type-symbol");function oc(t,e=Ht.prim){var r,n;if(Array.isArray(t))return oc({prim:e,args:t},e);const i=t;return i.prim===e&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[(r=i.args)===null||r===void 0?void 0:r[0],{prim:e,args:(n=i.args)===null||n===void 0?void 0:n.slice(1)}]}):i}function Fm(t,e){const r=oc(t),n=oc(e);return r.prim===n.prim&&(r.args===void 0&&n.args===void 0||r.args!==void 0&&n.args!==void 0&&r.args.length===n.args.length&&r.args.every((i,s)=>{var o,a;return Fm(i,(a=(o=n.args)===null||o===void 0?void 0:o[s])!==null&&a!==void 0?a:{})}))&&(r.annots===void 0&&n.annots===void 0||r.annots!==void 0&&n.annots!==void 0&&r.annots.length===n.annots.length&&r.annots.every((i,s)=>{var o;return i===((o=n.annots)===null||o===void 0?void 0:o[s])}))}class $r{constructor(e){if(this.val=e,this[Km]=!0,this.root=Qs(e,0),this.root instanceof Vr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const r=e.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new Vr(r,0,Qs))}}static isSchema(e){return e&&e[Hm]===!0}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>{if(Array.isArray(n))this.fromRPCResponse({script:{code:n,storage:e.script.storage}});else{const i=n;return i.prim?i.prim==="storage":!1}});if(!r||!Array.isArray(r.args))throw new Um(e.script);return new $r(r.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof Ht||this.root instanceof rt)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,r){const n=this.root.Execute(e,r);return this.removeTopLevelAnnotation(n)}Typecheck(e){if(this.root instanceof Vr&&Number.isInteger(Number(e))||this.root instanceof Wn&&e.ticketer&&e.value&&e.amount||this.root instanceof Xn&&e.ticketer&&e.value&&e.amount||this.root instanceof ps&&this.root.ValueSchema instanceof Vr)return!0;try{return this.root.EncodeObject(e),!0}catch{return!1}}ExecuteOnBigMapDiff(e,r){if(!this.bigMap)throw new $c("Big map schema is undefined");if(!Array.isArray(e))throw new dS("Big map diff must be an array");const n=e.map(({key:i,value:s})=>({args:[i,s]}));return this.bigMap.Execute(n,r)}ExecuteOnBigMapValue(e,r){if(!this.bigMap)throw new $c("No big map schema");return this.bigMap.ValueSchema.Execute(e,r)}EncodeBigMapKey(e){if(!this.bigMap)throw new $c("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(r){throw new hS("big map key",r)}}Encode(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new pS("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,r){if(!this.bigMap)throw new $c("Big map schema is undefined");const n=e.reduce((i,s)=>Object.assign(Object.assign({},i),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(e,r){return this.findValue(this.root.val,e,r)}findValue(e,r,n){if(Fm(n,e))return r;if(Array.isArray(e)||e.prim==="pair"){const i=oc(e),s=oc(r,"Pair");if(i.args===void 0||s.args===void 0)throw new gS("Tokens have no arguments");if(i.args[0])return this.findValue(i.args[0],s.args[0],n)||this.findValue(i.args[1],s.args[1],n)}}findToken(e){const r=[];return this.root.findAndReturnTokens(e,r)}}Km=Hm;class So{constructor(e){this.root=Qs(e,0)}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>n.prim==="parameter");if(!r||!Array.isArray(r.args))throw new Um(e.script);return new So(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof rt||this.root instanceof qo&&this.root.subToken()instanceof rt}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(e,r){return this.root.Execute(e,r)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(r){throw r instanceof dt?r:new q1("Unable to encode parameter",e.toString(),r)}}EncodeObject(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new q1("Unable to encode parameter object",e,n)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class g0{constructor(e){if(e.length!==4||!("string"in e[0]))throw new V1(`Invalid on-chain view: ${JSON.stringify(e)}`);this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=Qs(this.viewArgsType,0),this.rootReturnType=Qs(this.viewReturnType,0)}static fromRPCResponse(e){const r=[],n=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(i=>i.prim==="view");return n&&n.forEach(i=>{if(!i.args||i.args.length!==4)throw new V1(`Invalid on-chain view found in the script: ${JSON.stringify(i)}`);r.push(new g0(i.args))}),r}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(r){throw new lS(this.viewName,r)}}decodeViewResult(e,r){return this.rootReturnType.Execute(e,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}const $1=Symbol(),Rr=Symbol("source_reference");class Fs extends Error{constructor(e,r,n){super(n),this.src=e,this.idx=r,Object.setPrototypeOf(this,Fs.prototype)}}var Tr;(function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"})(Tr||(Tr={}));const bS=new RegExp("\\s"),vS=new RegExp("[:@%_A-Za-z]"),mS=new RegExp("[@%_\\.A-Za-z0-9]"),z1=new RegExp("[0-9]"),yS=new RegExp("[0-9a-fA-F]");function*hd(t,e=!1){let r=0;for(;r<t.length;){for(;r<t.length&&bS.test(t[r]);)r++;if(r===t.length)return;const n=t[r],i=r;if(vS.test(n)){for(r++;r<t.length&&mS.test(t[r]);)r++;yield{t:Tr.Ident,v:t.slice(i,r),first:i,last:r}}else if(t.length-r>1&&t.substr(r,2)==="0x"){for(r+=2;r<t.length&&yS.test(t[r]);)r++;if(r-i&1)throw new Fs(t,r,"Bytes literal length is expected to be power of two");yield{t:Tr.Bytes,v:t.slice(i,r),first:i,last:r}}else if(z1.test(n)||n==="-"){n==="-"&&r++;const s=r;for(;r<t.length&&z1.test(t[r]);)r++;if(s===r)throw new Fs(t,r,"Number literal is too short");yield{t:Tr.Number,v:t.slice(i,r),first:i,last:r}}else if(n==='"'){r++;let s=!1;for(;r<t.length&&(s||t[r]!=='"');r++)!s&&t[r]==="\\"?s=!0:s=!1;if(r===t.length)throw new Fs(t,r,"Unterminated string literal");r++,yield{t:Tr.String,v:t.slice(i,r),first:i,last:r}}else if(n==="#"){for(r++;r<t.length&&t[r]!==`
`;)r++;e&&(yield{t:Tr.Comment,v:t.slice(i,r),first:i,last:r})}else if(t.length-r>1&&t.substr(r,2)==="/*"){for(r+=2;r<t.length&&!(t.length-r>1&&t.substr(r,2)==="*/");)r++;if(r===t.length)throw new Fs(t,r,"Unterminated C style comment");r+=2,e&&(yield{t:Tr.Comment,v:t.slice(i,r),first:i,last:r})}else if(n==="("||n===")"||n==="{"||n==="}"||n===";")r++,yield{t:n,v:n,first:i,last:r};else throw new Fs(t,r,`Invalid character at offset ${r}: \`${n}'`)}}const zc=Symbol("ref_contract");var Di;(function(t){t.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",t.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",t.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",t.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Di||(Di={}));const jm=Di.Psithaca2,W1={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc:16,PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1:16,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:17};function Ro(t,e){return W1[t]<W1[e]}class zr extends Error{constructor(e,r){super(r),this.prim=e,Object.setPrototypeOf(this,zr.prototype)}}function yt(t,e){var r,n;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new zr(t,`macro ${t.prim} expects ${e} arguments, was given ${(n=t.args)===null||n===void 0?void 0:n.length}`)}function Oa(t){if(t.annots===void 0)return!0;throw new zr(t,`unexpected annotation on macro ${t.prim}: ${t.annots}`)}function X1(t,e){if("int"in e)return!0;throw new zr(t,`macro ${t.prim} expects int argument`)}function ja(t,e,r,n){let i=0,s=0;const o=[null,null];let a;if(i===e.length)throw new zr(t,`unexpected end: ${t.prim}`);let c=e[i++];switch(c){case"P":{const{r:f,n:d,an:I}=ja(t,e.slice(i),r.slice(s),n);a=f,i+=d,s+=I;break}case"A":s!==r.length&&(o[0]=r[s++]);break;default:throw new zr(t,`${t.prim}: unexpected character: ${c}`)}let l;if(i===e.length)throw new zr(t,`unexpected end: ${t.prim}`);switch(c=e[i++],c){case"P":{const{r:f,n:d,an:I}=ja(t,e.slice(i),r.slice(s),n);l=f.map(([P,L])=>[P+1,L]),i+=d,s+=I;break}case"I":s!==r.length&&(o[1]=r[s++]);break;default:throw new zr(t,`${t.prim}: unexpected character: ${c}`)}return{r:n(a,l,[0,o]),n:i,an:s}}function Ff(t,e,r,n){const i=e[0];switch(i){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},Ff(t,e.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:n.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},Ff(t,e.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:n.d;default:throw new zr(t,`${t.prim}: unexpected character: ${i}`)}}function ES(t,e){let r=t.length;for(;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}function pd(t){const e=[],r=[];if(t!==void 0)for(const n of t)(n.length!==0&&n[0]==="%"?e:r).push(n);return{fields:e,rest:r}}function Xt({prim:t,annots:e,args:r}){return Object.assign(Object.assign({prim:t},e&&{annots:e}),r&&{args:r})}const _S=/^P[PAI]{3,}R$/,wS=/^UNP[PAI]{2,}R$/,AS=/^C[AD]{2,}R$/,xS=/^SET_C[AD]+R$/,SS=/^MAP_C[AD]+R$/,RS=/^DI{2,}P$/,IS=/^DU+P$/;function TS(t,e){const r=e?.protocol||jm;function n(i){return i!==void 0?[{prim:"RENAME",annots:i}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(yt(t,0))return[{prim:"COMPARE"},Xt({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(yt(t,2))return[{prim:t.prim.slice(2)},Xt({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(yt(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},Xt({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(yt(t,0)&&Oa(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(yt(t,0)&&Oa(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(yt(t,0)&&Oa(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(yt(t,0)&&Oa(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(yt(t,0)&&Oa(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(yt(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"ASSERT_LEFT":if(yt(t,0))return[{prim:"IF_LEFT",args:[n(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(yt(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"IF_SOME":if(yt(t,2))return[Xt({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(yt(t,2))return[Xt({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"CAR":case"CDR":if(t.args!==void 0){if(yt(t,1)&&X1(t,t.args[0])){const i=parseInt(t.args[0].int,10);return Xt({prim:"GET",args:[{int:t.prim==="CAR"?String(i*2+1):String(i*2)}],annots:t.annots})}}else return t}if(_S.test(t.prim)&&yt(t,0)){const{fields:i,rest:s}=pd(t.annots),{r:o}=ja(t,t.prim.slice(1),i,(a,c,l)=>[...a||[],...c||[],l]);return o.map(([a,c],l)=>{const f=[...ES(c,null).map(I=>I===null?"%":I),...a===0&&l===o.length-1?s:[]],d=Xt({prim:"PAIR",annots:f.length!==0?f:void 0});return a===0?d:{prim:"DIP",args:a===1?[[d]]:[{int:String(a)},[d]]}})}if(wS.test(t.prim))if(Ro(r,Di.PtEdo2Zk)&&yt(t,0)){const{r:i}=ja(t,t.prim.slice(3),t.annots||[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s,o])=>{const a=[{prim:"DUP"},Xt({prim:"CAR",annots:o[0]!==null?[o[0]]:void 0}),{prim:"DIP",args:[[Xt({prim:"CDR",annots:o[1]!==null?[o[1]]:void 0})]]}];return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}else{if(t.prim==="UNPAIR")return t;if(yt(t,0)){const{r:i}=ja(t,t.prim.slice(3),[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s])=>{const o=Xt({prim:"UNPAIR"});return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}}if(AS.test(t.prim)&&yt(t,0)){const i=[...t.prim.slice(1,t.prim.length-1)];return i.map((s,o)=>{const a=o===i.length-1?t.annots:void 0;switch(s){case"A":return Xt({prim:"CAR",annots:a});case"D":return Xt({prim:"CDR",annots:a});default:throw new zr(t,`unexpected character: ${s}`)}})}if(xS.test(t.prim)&&yt(t,0)){const{fields:i,rest:s}=pd(t.annots);if(i.length>1)throw new zr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const o=i.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:i},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[i[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:i},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return Ff(t,t.prim.slice(5,t.prim.length-1),s,o)}if(SS.test(t.prim)&&yt(t,1)){const{fields:i}=pd(t.annots);if(i.length>1)throw new zr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Xt({prim:"CAR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[i.length!==0?i[0]:"%","%@"]}],d:[{prim:"DUP"},Xt({prim:"CDR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i.length!==0?i[0]:"%"]}]};return Ff(t,t.prim.slice(5,t.prim.length-1),[],s)}if(RS.test(t.prim)&&yt(t,1)){let i=0;for(;t.prim[1+i]==="I";)i++;return Xt({prim:"DIP",args:[{int:String(i)},t.args[0]]})}if(IS.test(t.prim)){let i=0;for(;t.prim[1+i]==="U";)i++;if(Ro(r,Di.PtEdo2Zk)){if(i===1){if(t.args===void 0)return t;yt(t,1)&&X1(t,t.args[0])&&(i=parseInt(t.args[0].int,10))}else yt(t,0);return i===1?[Xt({prim:"DUP",annots:t.annots})]:i===2?[{prim:"DIP",args:[[Xt({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(i-1)},[Xt({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(i)}]}]}else{if(i===1)return t;if(yt(t,0))return Xt({prim:"DUP",args:[{int:String(i)}],annots:t.annots})}}return t}function OS(t,e){return t.args!==void 0&&t.args.length===1&&"string"in t.args[0]&&t.args[0].string in e?e[t.args[0].string]:t}class Co extends Error{constructor(e,r){super(r),this.token=e,Object.setPrototypeOf(this,Co.prototype)}}class Mn extends Error{constructor(e,r){super(r),this.node=e,Object.setPrototypeOf(this,Mn.prototype)}}const gd=new Co(null,"Unexpected EOF");function J1(t){return t.t===Tr.Ident&&(t.v[0]==="@"||t.v[0]==="%"||t.v[0]===":")}const PS=new RegExp("^-?[0-9]+$"),NS=new RegExp("^([0-9a-fA-F]{2})*$");class Gs{constructor(e){this.opt=e}expand(e){var r,n,i;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&e.prim==="constant"){const s=OS(e,this.opt.expandGlobalConstant);return s!==e&&(s[Rr]=Object.assign(Object.assign({},e[Rr]||{first:0,last:0}),{globalConstant:e})),s}if(((n=this.opt)===null||n===void 0?void 0:n.expandMacros)===void 0||!((i=this.opt)===null||i===void 0)&&i.expandMacros){const s=TS(e,this.opt);return s!==e&&(s[Rr]=Object.assign(Object.assign({},e[Rr]||{first:0,last:0}),{macro:e})),s}else return e}parseListExpr(e,r){var n;const i={first:r.first,last:r.last},s=r.t==="(";let o;if(s){if(o=e.next(),o.done)throw gd;i.last=o.value.last}else o={value:r};if(o.value.t!==Tr.Ident)throw new Co(o.value,`not an identifier: ${o.value.v}`);const a={prim:o.value.v,[Rr]:i};for(;;){const c=e.next();if(c.done){if(s)throw gd;break}else if(c.value.t===")"){if(!s)throw new Co(c.value,"unexpected closing bracket");i.last=c.value.last;break}else if(J1(c.value))a.annots=a.annots||[],a.annots.push(c.value.v),i.last=c.value.last;else{a.args=a.args||[];const l=this.parseExpr(e,c.value);i.last=((n=l[Rr])===null||n===void 0?void 0:n.last)||i.last,a.args.push(l)}}return this.expand(a)}parseArgs(e,r){var n;const i={first:r.first,last:r.last},s={prim:r.v,[Rr]:i};for(;;){const o=e.next();if(o.done||o.value.t==="}"||o.value.t===";")return[s,o];if(J1(o.value))i.last=o.value.last,s.annots=s.annots||[],s.annots.push(o.value.v);else{const a=this.parseExpr(e,o.value);i.last=((n=a[Rr])===null||n===void 0?void 0:n.last)||i.last,s.args=s.args||[],s.args.push(a)}}}parseSequenceExpr(e,r){var n,i;const s={first:r.first,last:r.last},o=[];o[Rr]=s;const a=r.t==="{";let c=r.t==="{"?null:{value:r};for(;;){if(c===null&&(c=e.next(),c.done||(s.last=c.value.last)),c.done){if(a)throw gd;return o}if(c.value.t==="}"){if(a)return o;throw new Co(c.value,"unexpected closing bracket")}else if(c.value.t===Tr.Ident){const[l,f]=this.parseArgs(e,c.value);s.last=((n=l[Rr])===null||n===void 0?void 0:n.last)||s.last,o.push(this.expand(l)),c=f}else{const l=this.parseExpr(e,c.value);s.last=((i=l[Rr])===null||i===void 0?void 0:i.last)||s.last,o.push(l),c=null}c===null&&(c=e.next(),c.done||(s.last=c.value.last)),!c.done&&c.value.t===";"&&(c=null)}}parseExpr(e,r){switch(r.t){case Tr.Ident:return this.expand({prim:r.v,[Rr]:{first:r.first,last:r.last}});case Tr.Number:return{int:r.v,[Rr]:{first:r.first,last:r.last}};case Tr.String:return{string:JSON.parse(r.v),[Rr]:{first:r.first,last:r.last}};case Tr.Bytes:return{bytes:r.v.slice(2),[Rr]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(e,r);default:return this.parseListExpr(e,r)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=hd(e),n=r.next();return n.done?null:this.parseSequenceExpr(r,n.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=hd(e),n=r.next();return n.done?null:this.parseListExpr(r,n.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=hd(e),n=r.next();return n.done?null:this.parseExpr(r,n.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const r=[];for(const n of e){if(n===null||typeof n!="object")throw new Mn(n,`unexpected sequence element: ${n}`);r.push(this.parseJSON(n))}return r}else if("prim"in e){const r=e;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const n={prim:r.prim};if(r.annots!==void 0){for(const i of r.annots)if(typeof i!="string")throw new Mn(i,`string expected: ${i}`);n.annots=r.annots}if(r.args!==void 0){n.args=[];for(const i of r.args){if(i===null||typeof i!="object")throw new Mn(i,`unexpected argument: ${i}`);n.args.push(this.parseJSON(i))}}return this.expand(n)}throw new Mn(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new Mn(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&PS.test(e.int))return{int:e.int};throw new Mn(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&NS.test(e.bytes))return{bytes:e.bytes};throw new Mn(e,`malformed bytes literal: ${e}`)}else throw new Mn(e,`unexpected object: ${e}`)}}const MS=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],LS=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class ph extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}class CS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidMessageError"}}function Y1(t){const e=(t.length+9)%64,r=e===0?0:64-e;if(t.length>268435455)throw new CS(`SHA-256 -- message length is too big: ${t.length}`);const n=t.length<<3,i=[...t,128,...new Array(r).fill(0),0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255];function s(f,d){return f>>>d|f<<32-d}const o=[...MS],a=new Array(64),c=new Array(8);for(let f=0;f<i.length;f+=64){let d=f,I=0;for(;I<16;)a[I]=i[d]<<24|i[d+1]<<16|i[d+2]<<8|i[d+3],d+=4,I++;for(;I<64;){const P=s(a[I-15],7)^s(a[I-15],18)^a[I-15]>>>3,L=s(a[I-2],17)^s(a[I-2],19)^a[I-2]>>>10;a[I]=(L|0)+a[I-7]+P+a[I-16]|0,I++}for(let P=0;P<8;P++)c[P]=o[P];for(let P=0;P<64;P++){const L=s(c[0],2)^s(c[0],13)^s(c[0],22),H=s(c[4],6)^s(c[4],11)^s(c[4],25),q=c[7]+H+(c[4]&c[5]^~c[4]&c[6])+LS[P]+a[P]|0,G=L+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+q|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=q+G|0}for(let P=0;P<8;P++)o[P]=o[P]+c[P]|0}const l=[];for(const f of o)l.push(f>>24&255),l.push(f>>16&255),l.push(f>>8&255),l.push(f&255);return l}const bd=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Q1(t,e){const r=t.charCodeAt(e)-49;if(r>=bd.length||bd[r]===-1)throw new ph(`Unexpected character at position ${e}: ${t[e]}`);return bd[r]}function BS(t){const e=[];let r=0;for(;r<t.length&&Q1(t,r)===0;)r++;let n=r;for(;r<t.length;){let i=Q1(t,r++),s=0;for(;i!==0||s<e.length;){const o=(e[s]||0)*58+i;e[s++]=o%256,i=Math.floor(o/256)}}for(;n-- >0;)e.push(0);return e.reverse()}function Gm(t){const e=BS(t);if(e.length<4)throw new ph(`Data is too short ${e.length}`);const r=e.slice(0,e.length-4),n=e.slice(e.length-4),i=Y1(Y1(r));if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==i[3])throw new ph("Invalid checksum");return r}class kS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidContractError"}}class DS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidTypeExpressionError"}}class US extends Error{constructor(e){super(e),this.message=e,this.name="InvalidDataExpressionError"}}class KS extends Error{constructor(e){super(`Contract has no entrypoint named: '${e}'`),this.entrypoint=e,this.name="InvalidEntrypointError"}}class HS extends Error{constructor(e){super(e),this.message=e,this.name="LongIntegerError"}}class Wr extends Error{constructor(e,r){super(r),this.val=e,Object.setPrototypeOf(this,Wr.prototype)}}class nt extends Wr{constructor(e,r,n){super(e,n),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,nt.prototype)}}class Vm{constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(r===0&&n===45)this.neg=!0;else{if(n<48||n>57)throw new HS(`unexpected character in integer constant: ${e[r]}`);this.append(n-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let r=0;for(;e!==0||r<this.buf.length;){const n=(this.buf[r]||0)*10+e;this.buf[r++]=n%256,e=Math.floor(n/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==e.buf.length)r=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let n=e.buf.length-1;for(;n>=0&&this.buf[n]===e.buf[n];)n--;r=n<0?0:this.buf[n]<e.buf[n]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function Bo(t){const e=[];for(let r=0;r<t.length;r+=2){const n=parseInt(t.slice(r,r+2),16);if(Number.isNaN(n))return null;e.push(n)}return e}function gh(t){try{return new Vm(t),!0}catch{return!1}}function qm(t){try{return new Vm(t).sign>=0}catch{return!1}}const FS=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function $o(t,e){if(Array.isArray(t))return{};let r,n,i;if(t.annots!==void 0){for(const s of t.annots)if(s.length!==0){if(!FS.test(s)||!e?.specialVar&&(s==="@%"||s==="@%%")||!e?.specialFields&&s==="%@")throw new Wr(t,`${t.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(e?.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(n=n||[],n.push(s));break;case"@":(e?.emptyVar||s.length>1)&&(i=i||[],i.push(s));break}}}return{f:r,t:n,v:i}}const jS={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function Wc(t,...e){const r=Gm(t);for(const n of e){const[i,s]=jS[n];if(r.length===i+s.length){let o=0;for(;o<s.length&&r[o]===s[o];)o++;if(o===s.length)return[n,r.slice(s.length)]}}return null}function En(t,e){const r=e,n=Array.isArray(r)?r:r.args;return n.length===2?t==="pair"?{prim:"pair",args:n}:{prim:"Pair",args:n}:Object.assign(Object.assign({},Array.isArray(r)?{prim:t}:r),{args:[n[0],{prim:t,args:n.slice(1)}]})}function us(t){return Array.isArray(t)||t.prim==="pair"}function GS(t){return Array.isArray(t)||"prim"in t&&t.prim==="Pair"}const VS=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function qS(t){if("string"in t){if(qm(t.string))return new Date(parseInt(t.string,10));if(VS.test(t.string)){const e=new Date(t.string);if(!Number.isNaN(e.valueOf))return e}}else if(gh(t.int))return new Date(parseInt(t.int,10));return null}const $S=31,$m={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0,BYTES:!0,NAT:!0},zm=Object.assign({},$m,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Wm={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},da=Object.assign({},Wm,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class ut extends Wr{constructor(e,r){super(e,r),this.val=e,Object.setPrototypeOf(this,ut.prototype)}}function fi(t){return"prim"in t}function zS(t){return Array.isArray(t)||"prim"in t}function Xm(t){if(fi(t))return!0;throw new ut(t,"prim expression expected")}function ls(t){if(Array.isArray(t))return!0;throw new ut(t,"sequence expression expected")}function vr(t){if(zS(t))return!0;throw new ut(t,"prim or sequence expression expected")}function vd(t){if(t.int[0]==="-")throw new ut(t,"natural number expected")}function _f(t){if("int"in t)return!0;throw new ut(t,"int literal expected")}function Jm(t){if("string"in t)return!0;throw new ut(t,"string literal expected")}function it(t,e){var r;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new ut(t,`${e} arguments expected`)}function _n(t){var e,r;if(Array.isArray(t)){for(const n of t){if(!Array.isArray(n)&&!fi(n))throw new ut(t,"sequence or prim expected");_n(n)}return!0}if(Xm(t)){if(Object.prototype.hasOwnProperty.call($m,t.prim))return it(t,0),!0;switch(t.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":t.args!==void 0&&it(t,1)&&_f(t.args[0])&&vd(t.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":it(t,1)&&_f(t.args[0])&&vd(t.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":it(t,1)&&Li(t.args[0]);break;case"UNPACK":it(t,1)&&b0(t.args[0]);break;case"CONTRACT":it(t,1)&&Gu(t.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":it(t,2)&&(ls(t.args[0])&&_n(t.args[0]),ls(t.args[1])&&_n(t.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":it(t,1)&&_n(t.args[0]);break;case"CREATE_CONTRACT":it(t,1)&&Qm(t.args[0]);break;case"DIP":if(((e=t.args)===null||e===void 0?void 0:e.length)===2)_f(t.args[0])&&vd(t.args[0]),ls(t.args[1])&&_n(t.args[1]);else if(((r=t.args)===null||r===void 0?void 0:r.length)===1)ls(t.args[0])&&_n(t.args[0]);else throw new ut(t,"1 or 2 arguments expected");break;case"PUSH":it(t,2)&&(zo(t.args[0]),js(t.args[1]));break;case"EMPTY_SET":it(t,1)&&Ui(t.args[0]);break;case"EMPTY_MAP":it(t,2)&&(Ui(t.args[0]),Li(t.args[1]));break;case"EMPTY_BIG_MAP":it(t,2)&&(Ui(t.args[0]),Vu(t.args[1]));break;case"LAMBDA_REC":case"LAMBDA":it(t,3)&&(Li(t.args[0]),Li(t.args[1]),ls(t.args[2])&&_n(t.args[2]));break;case"VIEW":it(t,2)&&(Jm(t.args[0])&&Ym(t.args[0]),Li(t.args[1])&&zo(t.args[1]));break;case"EMIT":t.args&&t.args.length>0?it(t,1):it(t,0);break;default:throw new ut(t,"instruction expected")}}return!0}function Ui(t){if(vr(t)){if(Array.isArray(t)||t.prim==="pair"||t.prim==="or"||t.prim==="option")co(t,e=>Ui(e));else if(!Object.prototype.hasOwnProperty.call(Wm,t.prim))throw new ut(t,`${t.prim}: type is not comparable`)}return!0}function b0(t){if(vr(t)&&fi(t)){if(!Object.prototype.hasOwnProperty.call(da,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket")throw new ut(t,`${t.prim}: type can't be used inside PACK/UNPACK instructions`);co(t,e=>b0(e))}return!0}function zo(t){if(vr(t)&&fi(t)){if(!Object.prototype.hasOwnProperty.call(da,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be pushed`);co(t,e=>zo(e))}return!0}function v0(t){if(vr(t)&&fi(t)){if(!Object.prototype.hasOwnProperty.call(da,t.prim)||t.prim==="operation"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be used as part of a storage`);co(t,e=>v0(e))}return!0}function Gu(t){if(vr(t)&&fi(t)){if(!Object.prototype.hasOwnProperty.call(da,t.prim)||t.prim==="operation")throw new ut(t,`${t.prim}: type can't be used as part of a parameter`);co(t,e=>Gu(e))}return!0}function Vu(t){if(vr(t)&&fi(t)){if(!Object.prototype.hasOwnProperty.call(da,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state")throw new ut(t,`${t.prim}: type can't be used inside a big_map`);co(t,e=>Vu(e))}return!0}const WS=new RegExp("^[a-zA-Z0-9_.%@]*$");function Ym(t){if(t.string.length>$S)throw new ut(t,`view name too long: ${t.string}`);if(!WS.test(t.string))throw new ut(t,`invalid character(s) in view name: ${t.string}`)}function Li(t){if(vr(t)&&fi(t)){if(!Object.prototype.hasOwnProperty.call(da,t.prim))throw new ut(t,"type expected");co(t,e=>Li(e))}return!0}function co(t,e){if(Array.isArray(t)||t.prim==="pair"){const r=Array.isArray(t)?t:t.args;if(r===void 0||r.length<2)throw new ut(t,"at least 2 arguments expected");return r.forEach(n=>{vr(n)&&e(n)}),!0}switch(t.prim){case"option":case"list":it(t,1)&&vr(t.args[0])&&e(t.args[0]);break;case"contract":it(t,1)&&Gu(t.args[0]);break;case"or":it(t,2)&&vr(t.args[0])&&vr(t.args[1])&&(e(t.args[0]),e(t.args[1]));break;case"lambda":it(t,2)&&(Li(t.args[0]),Li(t.args[1]));break;case"set":it(t,1)&&Ui(t.args[0]);break;case"map":it(t,2)&&vr(t.args[0])&&vr(t.args[1])&&(Ui(t.args[0]),e(t.args[1]));break;case"big_map":it(t,2)&&vr(t.args[0])&&vr(t.args[1])&&(Ui(t.args[0]),Vu(t.args[1]),e(t.args[1]));break;case"ticket":it(t,1)&&vr(t.args[0])&&Ui(t.args[0]);break;case"sapling_state":case"sapling_transaction":it(t,1)&&_f(t.args[0]);break;default:it(t,0)}return!0}function js(t){if("int"in t||"string"in t||"bytes"in t)return!0;if(Array.isArray(t)){let e=0;for(const r of t)fi(r)&&r.prim==="Elt"?(it(r,2)&&(js(r.args[0]),js(r.args[1])),e++):js(r);if(e!==0&&e!==t.length)throw new ut(t,"data entries and map elements can't be intermixed");return!0}if(fi(t))switch(t.prim){case"Unit":case"True":case"False":case"None":it(t,0);break;case"Pair":if(t.args===void 0||t.args.length<2)throw new ut(t,"at least 2 arguments expected");for(const e of t.args)js(e);break;case"Left":case"Right":case"Some":it(t,1)&&js(t.args[0]);break;case"Lambda_rec":t.args&&_n(t.args);break;default:if(Object.prototype.hasOwnProperty.call(zm,t.prim))_n(t);else throw new ut(t,"data entry or instruction expected")}else throw new ut(t,"data entry expected");return!0}function Qm(t){if(ls(t)){const e={},r={};for(const n of t)if(Xm(n)){if(n.prim!=="view"){if(n.prim in e)throw new ut(t,`duplicate contract section: ${n.prim}`);e[n.prim]=!0}switch(n.prim){case"code":it(n,1)&&ls(n.args[0])&&_n(n.args[0]);break;case"parameter":if(it(n,1)&&Gu(n.args[0]),n.annots)throw new ut(n,"Annotation must be part of the parameter type");break;case"storage":it(n,1)&&v0(n.args[0]);break;case"view":if(it(n,4)){if(Jm(n.args[0])){const i=n.args[0];if(i.string in r)throw new ut(t,`duplicate view name: ${i.string}`);r[i.string]=!0,Ym(i)}zo(n.args[1]),zo(n.args[2]),ls(n.args[3])&&_n(n.args[3])}break;default:throw new ut(t,`unexpected contract section: ${n.prim}`)}}}return!0}function Zm(t){return Object.prototype.hasOwnProperty.call(zm,t.prim)}function Z1(t){if(!Array.isArray(t))return!1;for(const e of t)if("prim"in e){if(Zm(e))throw new Wr(t,`Instruction outside of a lambda: ${JSON.stringify(t)}`);if(e.prim==="Elt")throw new Wr(t,`Elt item outside of a map literal: ${JSON.stringify(t)}`)}return!0}function XS(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}const JS=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET","BYTES","NAT"];Object.assign({},...JS.map((t,e)=>({[t]:e})));var eg;(function(t){t[t.Int=0]="Int",t[t.String=1]="String",t[t.Sequence=2]="Sequence",t[t.Prim0=3]="Prim0",t[t.Prim0Annot=4]="Prim0Annot",t[t.Prim1=5]="Prim1",t[t.Prim1Annot=6]="Prim1Annot",t[t.Prim2=7]="Prim2",t[t.Prim2Annot=8]="Prim2Annot",t[t.Prim=9]="Prim",t[t.Bytes=10]="Bytes"})(eg||(eg={}));const es=new Error("bounds out of range");class Wo{constructor(e,r=0,n=e.length){this.buffer=e,this.idx=r,this.cap=n}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw es;const r=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,r}reader(e){if(this.cap-this.idx<e)throw es;const r=new Wo(this.buffer,this.idx,this.idx+e);return this.idx+=e,r}copy(){return new Wo(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw es;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return(e<<24|r<<16|n<<8|i)>>>0}readInt8(){if(this.cap-this.idx<1)throw es;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw es;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return e<<24|r<<16|n<<8|i}}var jf;(function(t){t[t.Implicit=0]="Implicit",t[t.Originated=1]="Originated"})(jf||(jf={}));var Ga;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Ga||(Ga={}));function e2(t){let e;const r=t.readUint8();switch(r){case Ga.ED25519:e="ED25519PublicKeyHash";break;case Ga.SECP256K1:e="SECP256K1PublicKeyHash";break;case Ga.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:e,hash:t.readBytes(20)}}function YS(t){let e;const r=t.readUint8();switch(r){case jf.Implicit:e=e2(t);break;case jf.Originated:e={type:"ContractHash",hash:t.readBytes(20)},t.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(t.length!==0){const n=new TextDecoder;e.entryPoint=n.decode(new Uint8Array(t.readBytes(t.length)))}return e}var Va;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Va||(Va={}));function QS(t){let e,r;const n=t.readUint8();switch(n){case Va.ED25519:r="ED25519PublicKey",e=32;break;case Va.SECP256K1:r="SECP256K1PublicKey",e=33;break;case Va.P256:r="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${n}`)}return{type:r,publicKey:t.readBytes(e)}}function ZS(t){const e=Bo(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Wo(new Uint8Array(e));return YS(r)}function eR(t){const e=Bo(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Wo(new Uint8Array(e));return e2(r)}function tR(t){const e=Bo(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Wo(new Uint8Array(e));return QS(r)}class Ue extends Wr{constructor(e,r,n){super(e,n),this.stackState=r,Object.setPrototypeOf(this,Ue.prototype)}}function lt(t){return Array.isArray(t)?"pair":t.prim}function Gf(t){return"prim"in t?t.args:t}function wn(t,e,r=!1){if(lt(t)!==lt(e))throw new nt(t,void 0,`types mismatch: ${lt(t)} != ${lt(e)}`);const n=[$o(t),$o(e)];if(n[0].t&&n[1].t&&n[0].t[0]!==n[1].t[0])throw new nt(t,void 0,`${lt(t)}: type names mismatch: ${n[0].t[0]} != ${n[1].t[0]}`);if(r&&n[0].f&&n[1].f&&n[0].f[0]!==n[1].f[0])throw new nt(t,void 0,`${lt(t)}: field names mismatch: ${n[0].f[0]} != ${n[1].f}`);if(us(t)){const i=En("pair",t),s=En("pair",e);wn(i.args[0],s.args[0],!0),wn(i.args[1],s.args[1],!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":case"ticket":wn(t.args[0],e.args[0]);break;case"or":wn(t.args[0],e.args[0],!0),wn(t.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":wn(t.args[0],e.args[0]),wn(t.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(t.args[0].int,10)!==parseInt(e.args[0].int,10))throw new nt(t,void 0,`${lt(t)}: type argument mismatch: ${t.args[0].int} != ${e.args[0].int}`)}}function t2(t,e){if(t.length!==e.length)throw new nt(t,void 0,`stack length mismatch: ${t.length} != ${e.length}`);for(let r=0;r<t.length;r++)wn(t[r],e[r])}function _t(t,e=!1){var r,n,i;if(!Array.isArray(t)){const s=$o(t);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new nt(t,void 0,`${t.prim}: at most one type annotation allowed: ${t.annots}`);if(e){if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>1)throw new nt(t,void 0,`${t.prim}: at most one field annotation allowed: ${t.annots}`)}else if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>0)throw new nt(t,void 0,`${t.prim}: field annotations aren't allowed: ${t.annots}`)}if(us(t)){const s=Gf(t);for(const o of s)_t(o,!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":_t(t.args[0]);break;case"or":for(const s of t.args)_t(s,!0);break;case"lambda":case"map":case"big_map":_t(t.args[0]),_t(t.args[1])}}function r2(t){if(!Array.isArray(t))return!1;for(const e of t)if(!(Array.isArray(e)&&r2(e)||"prim"in e&&Zm(e)))return!1;return!0}function yn(t,e,r){if(us(e)){if(GS(t)){Z1(t);const n=En("Pair",t),i=En("pair",e);yn(n.args[0],i.args[0],r),yn(n.args[1],i.args[1],r);return}throw new nt(e,t,`pair expected: ${JSON.stringify(t)}`)}switch(e.prim){case"int":if("int"in t&&gh(t.int))return;throw new nt(e,t,`integer value expected: ${JSON.stringify(t)}`);case"nat":case"mutez":if("int"in t&&qm(t.int))return;throw new nt(e,t,`natural value expected: ${JSON.stringify(t)}`);case"string":if("string"in t)return;throw new nt(e,t,`string value expected: ${JSON.stringify(t)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in t&&Bo(t.bytes)!==null)return;throw new nt(e,t,`bytes value expected: ${JSON.stringify(t)}`);case"bool":if("prim"in t&&(t.prim==="True"||t.prim==="False"))return;throw new nt(e,t,`boolean value expected: ${JSON.stringify(t)}`);case"key_hash":if("string"in t&&Wc(t.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in t)try{eR(t);return}catch{}throw new nt(e,t,`key hash expected: ${JSON.stringify(t)}`);case"timestamp":if(("string"in t||"int"in t)&&qS(t)!==null)return;throw new nt(e,t,`timestamp expected: ${JSON.stringify(t)}`);case"address":if("string"in t){let n=t.string;const i=t.string.indexOf("%");if(i>=0&&(n=t.string.slice(0,i)),Wc(n,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in t)try{ZS(t);return}catch{}throw new nt(e,t,`address expected: ${JSON.stringify(t)}`);case"key":if("string"in t&&Wc(t.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in t)try{tR(t);return}catch{}throw new nt(e,t,`public key expected: ${JSON.stringify(t)}`);case"unit":if("prim"in t&&t.prim==="Unit")return;throw new nt(e,t,`unit value expected: ${JSON.stringify(t)}`);case"signature":if("bytes"in t||"string"in t&&Wc(t.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new nt(e,t,`signature expected: ${JSON.stringify(t)}`);case"chain_id":if(("bytes"in t||"string"in t)&&("string"in t?Gm(t.string):Bo(t.bytes))!==null)return;throw new nt(e,t,`chain id expected: ${JSON.stringify(t)}`);case"option":if("prim"in t){if(t.prim==="None")return;if(t.prim==="Some"){yn(t.args[0],e.args[0],r);return}}throw new nt(e,t,`option expected: ${JSON.stringify(t)}`);case"list":case"set":if(Z1(t)){for(const n of t)yn(n,e.args[0],r);return}throw new nt(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"or":if("prim"in t){if(t.prim==="Left"){yn(t.args[0],e.args[0],r);return}else if(t.prim==="Right"){yn(t.args[0],e.args[1],r);return}}throw new nt(e,t,`union (or) expected: ${JSON.stringify(t)}`);case"lambda":if(r2(t)){const n=Qt(t,[e.args[0]],r);if("failed"in n)throw new nt(e,t,`function is failed with error type: ${n.failed}`);if(n.length!==1)throw new nt(e,t,"function must return a value");wn(e.args[1],n[0]);return}throw new nt(e,t,`function expected: ${JSON.stringify(t)}`);case"map":case"big_map":if(Array.isArray(t)){for(const n of t){if(!("prim"in n)||n.prim!=="Elt")throw new nt(e,t,`map elements expected: ${JSON.stringify(t)}`);yn(n.args[0],e.args[0],r),yn(n.args[1],e.args[1],r)}return}throw new nt(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"bls12_381_fr":if("int"in t&&gh(t.int)||"bytes"in t&&Bo(t.bytes)!==null)return;throw new nt(e,t,`BLS12-381 element expected: ${JSON.stringify(t)}`);case"sapling_state":if(Array.isArray(t))return;throw new nt(e,t,`sapling state expected: ${JSON.stringify(t)}`);case"ticket":yn(t,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},r);return;default:throw new nt(e,t,`type ${lt(e)} don't have Michelson literal representation`)}}function rR(t,e,r){let n=e,i=e,s=0;for(const o of t){const a=Qt(o,i,r);if(n=a,"failed"in a)break;i=a,s++}if("failed"in n&&n.level==0&&(!("prim"in n.failed)||n.failed.prim!=="never")&&s!==t.length-1)throw new Ue(t,n,"FAIL must appear in a tail position");if(r?.traceCallback!==void 0){const o={op:t,in:e,out:n};r.traceCallback(o)}return"failed"in n?{failed:n.failed,level:n.level+1}:n}function Qt(t,e,r){const n=r?.protocol||jm;if(Array.isArray(t))return rR(t,e,r);const i=t;function s(x,...y){if(e.length<y.length+x)throw new Ue(i,e,`${i.prim}: stack must have at least ${y.length} element(s)`);let u=x;for(const p of y){if(p!==null&&p.length!==0){let b=0;for(;b<p.length&&p[b]!==lt(e[u]);)b++;if(b===p.length)throw new Ue(i,e,`${i.prim}: stack type mismatch: [${u}] expected to be ${p}, got ${lt(e[u])} instead`)}u++}return e.slice(x,y.length+x)}function o(x){return(...y)=>{try{return x(...y)}catch(u){throw u instanceof Wr?new Ue(i,e,u.message):u}}}function a(x){return y=>{try{return x(y)}catch(u){throw u instanceof Wr?new Ue(i,e,u.message):u}}}const c=o($o),l=o(t2),f=o(wn),d=a(Ui),I=a(b0),P=a(v0),L=a(zo),H=a(Vu);function q(x,y){const u=c(i,Object.assign(Object.assign({},y),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),p=(b,g,h)=>{if(b&&b.length>(g||0))throw new Ue(i,e,`${i.prim}: at most ${g||0} ${h} annotations allowed`)};return p(u.f,x.f,"field"),p(u.t,x.t,"type"),p(u.v,x.v,"variable"),u}function G(x,y){const u=x,p=Array.isArray(u)?{prim:"pair",args:u}:u,b=c(p),g=y.v!==void 0||y.t!==void 0||y.f!==void 0?[...(y.v===null?b.v:y.v)||[],...(y.t===null?b.t:y.t)||[],...(y.f===null?b.f:y.f)||[]]:void 0,h=XS(p,["annots"]);return Object.assign(Object.assign({},h),g&&g.length!==0&&{annots:g})}function C(x,y){const u=q({v:1});return G(x,{v:u.v!==void 0?u.v:y!==void 0?[y]:null,t:null})}function V(x,y,u,p,b){var g,h,S,T;const w=(g=c(y).f)===null||g===void 0?void 0:g[0],v=(h=u.f)===null||h===void 0?void 0:h[p];if(v!==void 0&&v!=="%"&&w!==void 0&&v!==w)throw new Ue(i,e,`${i.prim}: field names doesn't match: ${v} !== ${w}`);const N=(S=u.v)===null||S===void 0?void 0:S[p],ee=(T=c(x).v)===null||T===void 0?void 0:T[0];return G(y,{t:null,v:N?N==="@%"?w?["@"+w.slice(1)]:void 0:N==="@%%"?ee?["@"+ee.slice(1)+"."+(w?w.slice(1):b)]:w?["@"+w.slice(1)]:void 0:[N]:null})}function U(x,y,u=y){const p=En("pair",x);if(u===1)return[p.args[0]];if(u===2)return p.args;const b=p.args[1];if(us(b))return[p.args[0],...U(b,y,u-1)];throw new Ue(i,e,`${i.prim}: at least ${y} fields are expected`)}function F(x,y,u=y){if(u===0)return x;const p=En("pair",x);if(u===1)return p.args[0];const b=p.args[1];if(us(b))return F(b,y,u-2);if(u===2)return b;throw new Ue(i,e,`${i.prim}: at least ${y+1} fields are expected`)}function j(x,y,u,p=u){if(p===0)return y;const b=En("pair",x);if(p===1)return Object.assign(Object.assign({},b),{args:[y,b.args[1]]});const g=b.args[1];if(us(g))return Object.assign(Object.assign({},b),{args:[b.args[0],j(g,y,u,p-2)]});if(p===2)return Object.assign(Object.assign({},b),{args:[b.args[0],y]});throw new Ue(i,e,`${i.prim}: at least ${u+1} fields are expected`)}const E=(x,y)=>["@"+(x.v?x.v[0].slice(1)+".":"")+y];function _(x,y){return"failed"in x||"failed"in y?"failed"in x?y:x:(l(x,y),x)}const O=(x=>{var y,u,p,b,g;switch(x.prim){case"DUP":{const h=x.args?parseInt(x.args[0].int,10):1;if(h===0)throw new Ue(x,e,"DUP 0 is forbidden");const S=s(h-1,null)[0];if(lt(S)==="ticket")throw new Ue(x,e,"ticket can't be DUPed");return[S,...e]}case"SWAP":{const h=s(0,null,null);return q({}),[h[1],h[0],...e.slice(2)]}case"SOME":return[G({prim:"option",args:[s(0,null)[0]]},q({t:1,v:1})),...e.slice(1)];case"UNIT":return[G({prim:"unit"},q({v:1,t:1})),...e];case"PAIR":{const h=x.args?parseInt(x.args[0].int,10):2;if(h<2)throw new Ue(x,e,`PAIR ${h} is forbidden`);const S=s(0,...new Array(h).fill(null)),T=q({f:h,t:1,v:1},{specialFields:!0}),w=N=>{const ee=N.lastIndexOf(".");return N.slice(ee>0?ee+1:1)},v=S.map((N,ee)=>{var Y;const ne=c(N),se=T.f&&T.f.length>ee&&T.f[ee]!=="%"?T.f[ee]==="%@"?ne.v?["%"+w(((Y=ne.v)===null||Y===void 0?void 0:Y[0])||"")]:void 0:[T.f[ee]]:void 0;return G(N,{v:null,t:null,f:se})});return[G({prim:"pair",args:v},{t:T.t,v:T.v}),...e.slice(h)]}case"UNPAIR":{const h=x.args?parseInt(x.args[0].int,10):2;if(h<2)throw new Ue(x,e,`UNPAIR ${h} is forbidden`);const S=s(0,["pair"])[0],T=q({f:2,v:2},{specialVar:!0});return[...U(S,h).map((v,N)=>V(S,v,T,N,N===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const h=En("pair",s(0,["pair"])[0]),S=h.args[x.prim==="CAR"?0:1],T=q({f:1,v:1},{specialVar:!0});return[V(h,S,T,0,x.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const h=s(0,null,["list"]);return f(h[0],h[1].args[0]),[C({prim:"list",args:[h[1].args[0]]}),...e.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[C({prim:"nat"}),...e.slice(1)];case"MEM":{const h=s(0,null,["set","map","big_map"]);return d(h[0]),f(h[0],h[1].args[0]),[C({prim:"bool"}),...e.slice(2)]}case"GET":if(x.args){const h=parseInt(x.args[0].int,10),S=s(0,["pair"])[0];return[C(F(S,h)),...e.slice(1)]}else{const h=s(0,null,["map","big_map"]);return d(h[0]),f(h[0],h[1].args[0]),[C({prim:"option",args:[h[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(x.args){const h=parseInt(x.args[0].int,10),S=s(0,null,["pair"]);return[C(j(S[1],S[0],h)),...e.slice(2)]}else{const h=s(0,null,["bool","option"]);if(d(h[0]),h[1].prim==="bool"){const T=s(2,["set"]);return f(h[0],T[0].args[0]),[C({prim:"set",args:[G(h[0],{t:null})]}),...e.slice(3)]}const S=s(2,["map","big_map"]);return f(h[0],S[0].args[0]),S[0].prim==="map"?[C({prim:"map",args:[G(h[0],{t:null}),G(h[1].args[0],{t:null})]}),...e.slice(3)]:(H(h[1].args[0]),[C({prim:"big_map",args:[G(h[0],{t:null}),G(h[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const h=q({v:2}),S=s(0,null,["option"],["map","big_map"]);d(S[0]),f(S[0],S[2].args[0]),f(S[1].args[0],S[2].args[1]);const T=(y=h.v)===null||y===void 0?void 0:y.map(w=>w!=="@"?[w]:void 0);return S[2].prim==="map"?[G({prim:"option",args:[S[2].args[1]]},{v:T?.[0]}),G({prim:"map",args:[G(S[0],{t:null}),G(S[1].args[0],{t:null})]},{v:T?.[1]}),...e.slice(3)]:(H(S[1].args[0]),[G({prim:"option",args:[S[2].args[1]]},{v:T?.[0]}),G({prim:"big_map",args:[G(S[0],{t:null}),G(S[1].args[0],{t:null})]},{v:T?.[1]}),...e.slice(3)])}case"EXEC":{const h=s(0,null,["lambda"]);return f(h[0],h[1].args[0]),[C(h[1].args[1]),...e.slice(2)]}case"APPLY":{const h=s(0,null,["lambda"]);if(P(h[0]),L(h[0]),!us(h[1].args[0]))throw new Ue(x,e,`${x.prim}: function's argument must be a pair: ${lt(h[1].args[0])}`);const S=h[1].args[0];return f(h[0],Gf(S)[0]),[C({prim:"lambda",args:[Gf(S)[1],h[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const h=s(0,null)[0];return Ro(n,Di.PtEdo2Zk)||I(h),{failed:h,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[C(s(0,null)[0]),...e.slice(1)];case"CONCAT":{const h=s(0,["string","list","bytes"]);if(h[0].prim==="list"){if(lt(h[0].args[0])!=="string"&&lt(h[0].args[0])!=="bytes")throw new Ue(x,e,`${x.prim}: can't concatenate list of ${lt(h[0].args[0])}'s`);return[C(h[0].args[0]),...e.slice(1)]}const S=s(1,["string","bytes"]);if(h[0].prim!==S[0].prim)throw new Ue(x,e,`${x.prim}: can't concatenate ${h[0].prim} with ${S[0].prim}`);return[C(S[0]),...e.slice(2)]}case"SLICE":return[C({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const h=s(0,null)[0];return I(h),[C({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const h=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(h[0].prim==="nat"&&h[1].prim==="int"||h[0].prim==="int"&&h[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(h[0].prim==="int"&&h[1].prim==="timestamp"||h[0].prim==="timestamp"&&h[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if((h[0].prim==="int"||h[0].prim==="nat"||h[0].prim==="mutez"||h[0].prim==="bls12_381_g1"||h[0].prim==="bls12_381_g2"||h[0].prim==="bls12_381_fr")&&h[0].prim===h[1].prim)return[C(h[0]),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't add ${h[0].prim} to ${h[1].prim}`)}case"SUB":{const h=Ro(n,Di.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((h[0].prim==="nat"||h[0].prim==="int")&&(h[1].prim==="nat"||h[1].prim==="int")||h[0].prim==="timestamp"&&h[1].prim==="timestamp")return[C({prim:"int"}),...e.slice(2)];if(h[0].prim==="timestamp"&&h[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if(h[0].prim==="mutez"&&h[1].prim==="mutez")return[C({prim:"mutez"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't subtract ${h[0].prim} from ${h[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[C({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const h=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(h[0].prim==="nat"&&h[1].prim==="int"||h[0].prim==="int"&&h[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(h[0].prim==="nat"&&h[1].prim==="mutez"||h[0].prim==="mutez"&&h[1].prim==="nat")return[C({prim:"mutez"}),...e.slice(2)];if((h[0].prim==="bls12_381_g1"||h[0].prim==="bls12_381_g2"||h[0].prim==="bls12_381_fr")&&h[1].prim==="bls12_381_fr"||(h[0].prim==="nat"||h[0].prim==="int")&&h[0].prim===h[1].prim)return[C(h[0]),...e.slice(2)];if((h[0].prim==="nat"||h[0].prim==="int")&&h[1].prim==="bls12_381_fr"||(h[1].prim==="nat"||h[1].prim==="int")&&h[0].prim==="bls12_381_fr")return[C({prim:"bls12_381_fr"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't multiply ${h[0].prim} by ${h[1].prim}`)}case"EDIV":{const h=(T,w)=>({prim:"option",args:[{prim:"pair",args:[{prim:T},{prim:w}]}]}),S=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(S[0].prim==="nat"&&S[1].prim==="nat")return[C(h("nat","nat")),...e.slice(2)];if((S[0].prim==="nat"||S[0].prim==="int")&&(S[1].prim==="nat"||S[1].prim==="int"))return[C(h("int","nat")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="nat")return[C(h("mutez","mutez")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="mutez")return[C(h("nat","mutez")),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't euclideally divide ${S[0].prim} by ${S[1].prim}`)}case"ABS":return s(0,["int"]),[C({prim:"nat"}),...e.slice(1)];case"ISNAT":return s(0,["int"]),[C({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return s(0,["nat","bls12_381_fr","bytes"]),[C({prim:"int"}),...e.slice(1)];case"BYTES":return s(0,["nat","int"]),[C({prim:"bytes"}),...e.slice(1)];case"NAT":return s(0,["bytes"]),[C({prim:"nat"}),...e.slice(1)];case"NEG":{const h=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return h.prim==="nat"||h.prim==="int"?[C({prim:"int"}),...e.slice(1)]:[C(h),...e.slice(1)]}case"LSL":case"LSR":return s(0,["nat","bytes"],["nat","bytes"]),[C({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const h=s(0,["nat","bytes","bool"],["nat","bytes","bool"]);if(h[0].prim!==h[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${h[0].prim}, ${h[1].prim}`);return[C(h[1]),...e.slice(2)]}case"AND":{const h=s(0,["nat","bytes","bool","int"],["nat","bytes","bool"]);if((h[0].prim!=="int"||h[1].prim!=="nat")&&h[0].prim!==h[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${h[0].prim}, ${h[1].prim}`);return[C(h[1]),...e.slice(2)]}case"NOT":return s(0,["nat","bytes","bool","int"])[0].prim==="bool"?[C({prim:"bool"}),...e.slice(1)]:[C({prim:"int"}),...e.slice(1)];case"COMPARE":{const h=s(0,null,null);return d(h[0]),d(h[1]),[C({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[C({prim:"bool"}),...e.slice(1)];case"SELF":{if(r?.contract===void 0)throw new Ue(x,e,`${x.prim}: contract required`);const h=q({f:1,v:1}),S=bh(r.contract,(u=h.f)===null||u===void 0?void 0:u[0]);if(S===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${S}`);return[G({prim:"contract",args:[S]},{v:h.v?h.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const h=s(0,null,["mutez"],["contract"]);return f(h[0],h[2].args[0]),[C({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const h=s(0,["option"])[0];if(lt(h.args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${lt(h.args[0])}`);return[C({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[C({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[C({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[C({prim:"mutez"},"@amount"),...e];case"BALANCE":return[C({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[C({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[C({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return s(0,["key"]),[C({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[C({prim:"address"},"@source"),...e];case"SENDER":return[C({prim:"address"},"@sender"),...e];case"ADDRESS":{const h=s(0,["contract"])[0],S=q({v:1});return[G({prim:"address",[zc]:h},{v:S.v?S.v:E(c(h),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const h={prim:"address"};return r?.contract!==void 0&&(h[zc]={prim:"contract",args:[ni(r.contract,"parameter").args[0]]}),[C(h,"@address"),...e]}case"CHAIN_ID":return[C({prim:"chain_id"}),...e];case"DROP":{q({});const h=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(h-1,null),e.slice(h)}case"DIG":{q({});const h=parseInt(x.args[0].int,10);return[s(h,null)[0],...e.slice(0,h),...e.slice(h+1)]}case"DUG":{q({});const h=parseInt(x.args[0].int,10);return[...e.slice(1,h+1),s(0,null)[0],...e.slice(h+1)]}case"NONE":return _t(x.args[0]),[G({prim:"option",args:[x.args[0]]},q({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const h=s(0,null)[0],S=q({f:2,t:1,v:1},{specialFields:!0}),T=c(h),w=[G(h,{t:null,v:null,f:S.f&&S.f.length>0&&S.f[0]!=="%"?S.f[0]==="%@"?T.v?["%"+T.v[0].slice(1)]:void 0:S.f:void 0}),G(x.args[0],{t:null,f:S.f&&S.f.length>1&&S.f[1]!=="%"?S.f:void 0})];return[G({prim:"or",args:x.prim==="LEFT"?w:[w[1],w[0]]},{t:S.t,v:S.v}),...e.slice(1)]}case"NIL":return _t(x.args[0]),[G({prim:"list",args:[x.args[0]]},q({t:1,v:1})),...e];case"UNPACK":return s(0,["bytes"]),_t(x.args[0]),[C({prim:"option",args:[x.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const h=s(0,["address"])[0];_t(x.args[0]);const S=q({v:1,f:1}),T=h[zc];if(T!==void 0){const w=bh(T,(p=S.f)===null||p===void 0?void 0:p[0]);if(w===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${w}`);f(w,x.args[0])}return[G({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:S.v?S.v:E(c(h),"contract")}),...e.slice(1)]}case"CAST":{q({});const h=s(0,null)[0];return _t(x.args[0]),f(x.args[0],h),[x.args[0],...e.slice(1)]}case"IF_NONE":{q({});const h=s(0,["option"])[0],S=e.slice(1),T=Qt(x.args[0],S,r),w=Qt(x.args[1],[G(h.args[0],{t:null,v:E(c(h),"some")}),...S],r);return _(T,w)}case"IF_LEFT":{q({});const h=s(0,["or"])[0],S=c(h),T=c(h.args[0]),w=c(h.args[1]),v=e.slice(1),N=Qt(x.args[0],[G(h.args[0],{t:null,v:E(S,T.f?T.f[0].slice(1):"left")}),...v],r),ee=Qt(x.args[1],[G(h.args[1],{t:null,v:E(S,w.f?w.f[0].slice(1):"right")}),...v],r);return _(N,ee)}case"IF_CONS":{q({});const h=s(0,["list"])[0],S=c(h),T=e.slice(1),w=Qt(x.args[0],[G(h.args[0],{t:null,v:E(S,"hd")}),G(h,{t:null,v:E(S,"tl")}),...T],r),v=Qt(x.args[1],T,r);return _(w,v)}case"IF":{q({}),s(0,["bool"]);const h=e.slice(1),S=Qt(x.args[0],h,r),T=Qt(x.args[1],h,r);return _(S,T)}case"MAP":{const h=s(0,["list","map","option"])[0],S=e.slice(1),T=h.prim==="map"?{prim:"pair",args:h.args}:h.args[0],w=Qt(x.args[0],[G(T,{t:null,v:E(c(h),"elt")}),...S],r);if("failed"in w){if(!("prim"in w.failed)||w.failed.prim!=="never")throw new Ue(x,e,`${x.prim}: FAIL is not allowed in MAP`);return{failed:w.failed,level:w.level+1}}if(w.length<1)throw new Ue(x,e,`${x.prim}: function must return a value`);return l(w.slice(1),S),h.prim==="list"?[C({prim:"list",args:[w[0]]}),...S]:h.prim==="map"?[C({prim:"map",args:[h.args[0],w[0]]}),...S]:[C({prim:"option",args:[w[0]]}),...S]}case"ITER":{q({});const h=s(0,["set","list","map"])[0],S=e.slice(1),T=h.prim==="map"?{prim:"pair",args:h.args}:h.args[0],w=Qt(x.args[0],[G(T,{t:null,v:E(c(h),"elt")}),...S],r);return"failed"in w?{failed:w.failed,level:w.level+1}:(l(w,S),S)}case"LOOP":{q({}),s(0,["bool"]);const h=e.slice(1),S=Qt(x.args[0],h,r);return"failed"in S?{failed:S.failed,level:S.level+1}:(l(S,[{prim:"bool"},...h]),h)}case"LOOP_LEFT":{q({});const h=s(0,["or"])[0],S=e.slice(1),T=Qt(x.args[0],[G(h.args[0],{t:null,v:E(c(h),"left")}),...S],r);return"failed"in T?{failed:T.failed,level:T.level+1}:(l(T,[h,...S]),[G(h.args[1],{t:null,v:q({v:1}).v}),...S])}case"DIP":{q({});const h=x.args.length===2?parseInt(x.args[0].int,10):1;s(h-1,null);const S=e.slice(0,h),T=e.slice(h),w=x.args.length===2?Qt(x.args[1],T,r):Qt(x.args[0],T,r);return"failed"in w?{failed:w.failed,level:w.level+1}:[...S,...w]}case"CREATE_CONTRACT":{const h=q({v:2}),S=s(0,["option"],["mutez"],null);if(lt(S[0].args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${lt(S[0].args[0])}`);P(S[2])&&(i2(x.args[0]),wn(ni(x.args[0],"storage").args[0],S[2]));const T=(b=h.v)===null||b===void 0?void 0:b.map(w=>w!=="@"?[w]:void 0);return[G({prim:"operation"},{v:T?.[0]}),G({prim:"address",[zc]:{prim:"contract",args:[ni(x.args[0],"parameter").args[0]]}},{v:T?.[1]}),...e.slice(3)]}case"PUSH":return _t(x.args[0]),yn(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[C(x.args[0]),...e];case"EMPTY_SET":return _t(x.args[0]),d(x.args[0]),[G({prim:"set",args:x.args},q({t:1,v:1})),...e];case"EMPTY_MAP":return _t(x.args[0]),d(x.args[0]),_t(x.args[1]),[G({prim:"map",args:x.args},q({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return _t(x.args[0]),d(x.args[0]),_t(x.args[1]),H(x.args[0]),[G({prim:"big_map",args:x.args},q({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{_t(x.args[0]),_t(x.args[1]);const h=[x.args[0]];x.prim==="LAMBDA_REC"&&h.push({prim:"lambda",args:[x.args[0],x.args[1]]});const S=Qt(x.args[2],h,Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in S)return{failed:S.failed,level:S.level+1};if(S.length!==1)throw new Ue(x,e,`${x.prim}: function must return a value`);return f(x.args[1],S[0]),[C({prim:"lambda",args:[x.args[0],x.args[1]]}),...e]}case"LEVEL":return[C({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[C({prim:"nat"}),...e];case"VOTING_POWER":return s(0,["key_hash"]),[C({prim:"nat"}),...e.slice(1)];case"TICKET":{const h=s(0,null,["nat"])[0];return d(h),Ro(n,Di.PtLimaPtL)?[G({prim:"ticket",args:[h]},q({t:1,v:1})),...e.slice(2)]:[C({prim:"option",args:[G({prim:"ticket",args:[h]},q({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const h=En("pair",s(0,["pair"])[0]);if(lt(h.args[0])!=="ticket")throw new Ue(x,e,`${x.prim}: ticket expected: ${lt(h.args[0])}`);return f(h.args[0],h.args[1]),[C({prim:"option",args:[G(h.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const h=s(0,["ticket"],["pair"]),S=En("pair",h[1]);if(lt(S.args[0])!=="nat")throw new Ue(x,e,`${x.prim}: nat expected: ${lt(S.args[0])}`);return f(S.args[0],S.args[1]),[C({prim:"option",args:[{prim:"pair",args:[G(h[0],{t:null}),G(h[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const h=q({v:2}),S=s(0,["ticket"])[0],T=(g=h.v)===null||g===void 0?void 0:g.map(w=>w!=="@"?[w]:void 0);return[G({prim:"pair",args:[{prim:"address"},G(S.args[0],{t:null}),{prim:"nat"}]},{v:T?.[0]}),G(S,{v:T?.[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const h=s(0,["list"])[0].args[0];if(!us(h))throw new Ue(x,e,`${x.prim}: pair expected: ${lt(h)}`);const S=En("pair",h);if(lt(S.args[0])!=="bls12_381_g1")throw new Ue(x,e,`${x.prim}: bls12_381_g1 expected: ${lt(S.args[0])}`);if(lt(S.args[1])!=="bls12_381_g2")throw new Ue(x,e,`${x.prim}: bls12_381_g2 expected: ${lt(S.args[1])}`);return[C({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[G({prim:"sapling_state",args:[x.args[0]]},q({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const h=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(h[0].args[0].int,10)!==parseInt(h[1].args[0].int,10))throw new Ue(x,e,`${x.prim}: sapling memo size mismatch: ${h[0].args[0].int} != ${h[1].args[0].int}`);return Ro(n,Di.PtJakarta)?[C({prim:"option",args:[{prim:"pair",args:[{prim:"int"},G(h[1],{t:null})]}]}),...e.slice(2)]:[C({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},G(h[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[C({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const h=s(0,null,["address"]);return L(h[0]),[C({prim:"option",args:[x.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[C({prim:"nat"}),...e];case"EMIT":{const h=q({f:1,t:1});if(x.args){const S=s(0,null);return f(S[0],x.args[0]),[G({prim:"operation"},h),...e.slice(1)]}return[G({prim:"operation"},h),...e.slice(1)]}default:throw new Wr(x,`unexpected instruction: ${x.prim}`)}})(i);if(r?.traceCallback!==void 0){const x={op:i,in:e,out:O};r.traceCallback(x)}return O}function ni(t,e){for(const r of t)if(r.prim===e)return r;throw new Wr(t,`missing contract section: ${e}`)}function nR(t){const e={};for(const r of t)r.prim==="view"&&(e[r.args[0].string]=r);return e}function n2(t){if(Array.isArray(t)){for(const e of t)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function bh(t,e){e=e||"%default";const r=Vf(t).find(n=>n[0]===e);return r!==void 0?r[1]:e==="%default"?n2(t)?ni(t,"parameter").args[0]:t:null}function iR(t){return Array.isArray(t)||t.prim==="or"}function Vf(t){if(n2(t)){const e=ni(t,"parameter"),r=Vf(e.args[0]),n=$o(e);return n.f?[[n.f[0],e.args[0]],...r]:r}if(iR(t)){const e=Gf(t),r=n=>{const i=$o(e[n]);if(lt(e[n])==="or"){const s=Vf(e[n]);return i.f?[[i.f[0],e[n]],...s]:s}return i.f?[[i.f[0],e[n]]]:[]};return[...r(0),...r(1)]}return[]}function i2(t,e){const r=(c,l,f,d)=>{_t(c,!0),_t(l);const I={prim:"pair",args:[Object.assign(Object.assign({},c),{annots:["@parameter"]}),Object.assign(Object.assign({},l),{annots:["@storage"]})]},P=Qt(d,[I],Object.assign(Object.assign({},e),{contract:t}));if("failed"in P)return P;try{t2(P,[f])}catch(L){throw L instanceof Wr?new Ue(d,P,L.message):L}return P},n=ni(t,"parameter").args[0],i=ni(t,"storage").args[0],s=ni(t,"code").args[0],a=r(n,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},s);for(const c of Object.values(nR(t)))r(c.args[1],i,c.args[2],c.args[3]);return a}function s2(t,e,r){_t(e),yn(t,e,r||null)}function sR(t,e,r){for(const n of e)_t(n);if(r?.contract!==void 0)for(const n of["parameter","storage"]){const i=ni(r.contract,n).args[0];_t(i)}return Qt(t,e,r||null)}function oR(t,e,r){try{return s2(t,e,r),!0}catch{return!1}}class m0{constructor(e,r){this.contract=e,this.ctx=Object.assign({contract:e},r),this.output=i2(e,this.ctx)}static parse(e,r){const n=new Gs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new kS("empty contract");if(Qm(i))return new m0(i,r)}static parseTypeExpression(e,r){const n=new Gs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new DS("empty type expression");if(Li(i))return _t(i),i}static parseDataExpression(e,r){const n=new Gs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new US("empty data expression");if(js(i))return i;throw void 0}section(e){return ni(this.contract,e)}entryPoints(){return Vf(this.contract)}entryPoint(e){return bh(this.contract,e)}assertDataValid(e,r){s2(e,r,this.ctx)}isDataValid(e,r){return oR(e,r,this.ctx)}assertParameterValid(e,r){const n=this.entryPoint(e||void 0);if(n===null)throw new KS(e?.toString());this.assertDataValid(r,n)}isParameterValid(e,r){try{return this.assertParameterValid(e,r),!0}catch{return!1}}functionType(e,r){return sR(e,r,this.ctx)}}new m0([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const tg=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),Tt=(t,e=8)=>t.toString(16).padStart(e,"0"),y0=31;var z;(function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.SMART_ROLLUP_ADDRESS="smart_rollup_address",t.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",t.VALUE="value",t.PADDED_BYTES="padded_bytes",t.SMART_ROLLUP_MESSAGE="smart_rollup_message",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_ENDORSEMENT="endorsement",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.BURN_LIMIT="burn_limit",t.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",t.TX_ROLLUP_ID="tx_rollup_id",t.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_DRAIN_DELEGATE="drain_delegate",t.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.PVM_KIND="pvm_kind",t.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(z||(z={}));const Ln={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT"},aR=(()=>{const t={};return Object.keys(Ln).forEach(e=>{t[Ln[e]]=e}),t})(),vh={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message"},rg=(()=>{const t={};return Object.keys(vh).forEach(e=>{const r=typeof e=="string"?parseInt(e,10):e;t[vh[r]]=Tt(r,2)}),t})(),qf={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit"},ng=(()=>{const t={};return Object.keys(qf).forEach(e=>{t[qf[e]]=e}),t})();class cR extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBlockHashError"}}class ig extends Error{constructor(e){super(e),this.message=e,this.name="InvalidOperationSchemaError"}}class o2 extends Error{constructor(e){super(`Oversized entrypoint: ${e}. The maximum length of entrypoint is ${y0}`),this.entrypoint=e,this.name="OversizedEntryPointError"}}class fR extends Error{constructor(e){super(`The ballot value '${e}' is invalid`),this.ballotValue=e,this.name="InvalidBallotValueError"}}class uR extends Error{constructor(e){super(`Failed to decode ballot value ${e}`),this.ballotValue=e,this.name="DecodeBallotValueError"}}class a2 extends Error{constructor(e){super(`The hex string '${e}' is invalid`),this.hexString=e,this.name="InvalidHexStringError"}}class lR extends Error{constructor(e){super(`Failed to encode michelson value '${e}'`),this.value=e,this.name="UnexpectedMichelsonValueError"}}class c2 extends Error{constructor(e){super(e),this.message=e,this.name="OperationDecodingError"}}class dR extends Error{constructor(e){super(e),this.message=e,this.name="OperationEncodingError"}}class hR extends Error{constructor(e){super(`The operation '${e}' is unsupported`),this.op=e,this.name="UnsupportedOperationError"}}class pR extends Error{constructor(e){super(`The Pvm "${e}" is not supported`),this.pvm=e,this.name="UnsupportedPvmKindError"}}class gR extends Error{constructor(e){super(`The encoded Pvm ${e} is not supported`),this.pvm=e,this.name="DecodePvmKindError"}}class bR extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class f2 extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class On{constructor(e,r=0){this.arr=e,this.offset=r}static fromHexString(e){const r=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const n=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(i=>parseInt(i,16)));return new On(n)}else throw new a2(r)}consume(e){const r=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,r}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,r){return new On(this.arr.slice(e,r))}}const vR=t=>"prim"in t,mR=t=>"bytes"in t&&typeof t.bytes=="string",yR=t=>"string"in t&&typeof t.string=="string",ER=t=>"int"in t&&typeof t.int=="string",_R=t=>{const e=ys(t.code),r=ys(t.storage);return`${Tt(e.length/2,8)}${e}${Tt(r.length/2,8)}${r}`},wR=t=>{const e=Yr(t),r=Yr(t);return{code:Es(new On(e)),storage:Es(new On(r))}},ys=t=>{if(Array.isArray(t)){const e=t.map(n=>ys(n)).join(""),r=e.length/2;return`02${Tt(r)}${e}`}else{if(vR(t))return PR(t);if(mR(t))return xR(t);if(yR(t))return RR(t);if(ER(t))return TR(t)}throw new lR(JSON.stringify(t))},Es=t=>{const e=t.consume(1);switch(e[0]){case 10:return SR(t);case 1:return IR(t);case 0:return OR(t);case 2:{const r=new On(Yr(t)),n=[];for(;r.length()>0;)n.push(Es(r));return n}default:return NR(t,e)}},Yr=(t,e=4)=>{const r=t.consume(e),n=parseInt(Buffer.from(r).toString("hex"),16);return t.consume(n)},AR=(t,e=4)=>{const r=[];let n=t;for(;n.length();){const i=n.consume(e),s=parseInt(Buffer.from(i).toString("hex"),16);r.push(n.consume(s)),n=n.slice(s+e)}return r},xR=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new a2(t.bytes);const e=t.bytes.length/2;return`0a${Tt(e)}${t.bytes}`},SR=t=>{const e=Yr(t);return{bytes:Buffer.from(e).toString("hex")}},RR=t=>{const e=Buffer.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${Tt(r)}${e}`},IR=t=>{const e=Yr(t);return{string:Buffer.from(e).toString("utf8")}},TR=({int:t})=>{const e=new be(t,10),r=e.toString(2)[0]==="-"?"1":"0",n=e.toString(2).replace(/-/g,""),i=n.length<=6?6:(n.length-6)%7?n.length+7-(n.length-6)%7:n.length,o=n.padStart(i,"0").match(/\d{6,7}/g).reverse();return o[0]=r+o[0],`00${o.map((c,l)=>parseInt((l===o.length-1?"0":"1")+c,2).toString(16).padStart(2,"0")).join("")}`},OR=t=>{let e=t.consume(1)[0];const r=[],n=1<<7;for(;e&n;)r.push(e),e=t.consume(1)[0];r.push(e);const i=!!(1<<6&r[0]);r[0]=r[0]&127;const s=r.map((a,c)=>a.toString(2).slice(c===0?-6:-7).padStart(c===0?6:7,"0")).reverse();let o=new be(s.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},PR=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,n=Tt(Math.min(2*r+e+3,9),2),i=aR[t.prim];let s=(t.args||[]).map(a=>ys(a)).join("");const o=Array.isArray(t.annots)?CR(t.annots):"";return(t.prim==="LAMBDA"||t.prim==="LAMBDA_REC")&&r&&(s=Tt(s.length/2)+s+Tt(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=o===""?Tt(s.length/2)+s+Tt(0):Tt(s.length/2)+s),t.prim==="view"&&t.args&&(s=Tt(s.length/2)+s+Tt(0)),`${n}${i}${s}${o}`},NR=(t,e)=>{const r=(e[0]-3)%2===1;let n=Math.floor((e[0]-3)/2);const i=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Ln[i]};if((Ln[i]==="LAMBDA"||Ln[i]==="LAMBDA_REC")&&t.consume(4),Ln[i]==="view")return n!=0?MR(t,s):s;let o,a;(Ln[i]==="pair"||Ln[i]==="Pair")&&n>2&&(o=LR(t),n=0,a=sg(t));const c=new Array(n).fill(0).map(()=>Es(t));return(Ln[i]==="LAMBDA"||Ln[i]==="LAMBDA_REC")&&t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&a[0]!==""?s.annots=a:r&&(s.annots=sg(t)),s},MR=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>Es(t)),t.consume(4),e),LR=t=>{const e=new On(Yr(t)),r=[];for(;e.length()>0;)r.push(Es(e));return r},CR=t=>{const e=t.map(n=>Buffer.from(n,"utf8").toString("hex")).join("20"),r=e.length/2;return`${Tt(r)}${e}`},sg=t=>{const e=t.consume(4),r=parseInt(Buffer.from(e).toString("hex"),16),n=t.consume(r);return Buffer.from(n).toString("hex").split("20").map(s=>Buffer.from(s,"hex").toString("utf8"))},_r=t=>e=>Fa(Buffer.from(mm(e,yr[t]))),Nr=t=>e=>{const r=e.consume(lm[t]);return gs(r,yr[t])},BR=Nr(re.TZ1),kR=Nr(re.B),E0=t=>{const e=t.consume(1);if(e[0]===0)return Nr(re.TZ1)(t);if(e[0]===1)return Nr(re.TZ2)(t);if(e[0]===2)return Nr(re.TZ3)(t)},DR=_r(re.B),UR=_r(re.TZ1),og=t=>t?"ff":"00",u2=t=>_r(re.P)(t),l2=t=>Nr(re.P)(t),KR=t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(l2(t));return e},HR=t=>Tt(32*t.length)+t.map(e=>u2(e)).join(""),FR=t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new fR(t)}},jR=t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new uR(e[0].toString())}},GR=t=>{switch(t){case"arith":return"00";case"wasm_2_0_0":return"01";default:throw new pR(t)}},VR=t=>{const e=t.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";default:throw new gR(e[0].toString())}},qR=t=>t?og(!0)+_0(t):og(!1),$R=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<4;n++){const i=(4-(n+1))*8;r.push((e&255<<i)>>i)}return Buffer.from(r).toString("hex")},zR=t=>{const e=t.consume(4);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},WR=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<2;n++){const i=(2-(n+1))*8;r.push((e&255<<i)>>i)}return Buffer.from(r).toString("hex")},XR=t=>{const e=t.consume(2);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},JR=t=>t.consume(1)[0]===255,YR=t=>{if(JR(t))return E0(t)},_0=t=>{switch(t.substring(0,3)){case re.TZ1:return"00"+_r(re.TZ1)(t);case re.TZ2:return"01"+_r(re.TZ2)(t);case re.TZ3:return"02"+_r(re.TZ3)(t);case re.TZ4:return"03"+_r(re.TZ4)(t);default:throw new n0(t)}},QR=t=>{switch(t.substring(0,4)){case re.EDPK:return"00"+_r(re.EDPK)(t);case re.SPPK:return"01"+_r(re.SPPK)(t);case re.P2PK:return"02"+_r(re.P2PK)(t);default:throw new dm(t)}},ZR=t=>{switch(t.substring(0,3)){case re.TZ1:case re.TZ2:case re.TZ3:case re.TZ4:return"00"+_0(t);case re.KT1:return"01"+_r(re.KT1)(t)+"00";default:throw new ft(t)}},e9=t=>{if(t.substring(0,3)!==re.SR1)throw new bR(t);return _r(re.SR1)(t)},t9=t=>{if(t.substring(0,3)===re.KT1)return"01"+_r(re.KT1)(t)+"00";throw new Mo(t)},r9=t=>{switch(t.consume(1)[0]){case 0:return Nr(re.EDPK)(t);case 1:return Nr(re.SPPK)(t);case 2:return Nr(re.P2PK)(t);default:throw new dm(t.toString())}},n9=t=>{if(t.substring(0,4)===re.SRC1)return _r(re.SRC1)(t);throw new f2(t)},i9=t=>{switch(t.consume(1)[0]){case 0:return E0(t);case 1:{const r=Nr(re.KT1)(t);return t.consume(1),r}default:throw new ft(t.toString())}},s9=t=>{const e=Nr(re.SR1)(t);if(e.substring(0,3)!==re.SR1)throw new ft(e);return e},o9=t=>{if(t.consume(1)[0]===1){const r=Nr(re.KT1)(t);return t.consume(1),r}throw new Mo(t.toString())},a9=t=>{const e=Nr(re.SRC1)(t);if(e.substring(0,4)!==re.SRC1)throw new f2(e);return e},d2=t=>{const e=[];let r=new be(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;)if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}else{let n=r.mod(128);r=r.minus(n),r=r.dividedBy(128),n=n.plus(128),e.push(n.toString(16))}return e.join("")},h2=t=>{let e=0;for(;e<t.length()&&t.get(e)&128;)e+=1;let r=new be(0);for(let n=e;n>=0;n-=1){const i=t.get(n)&127;r=r.multipliedBy(128),r=r.plus(i)}return t.consume(e+1),new be(r).toString()},c9=t=>{const e=Tt(t.consume(1)[0],2);if(e in qf)return qf[e];{const r=Yr(t,1),n=Buffer.from(r).toString("utf8");if(n.length>y0)throw new o2(n);return n}},f9=t=>{if(t.consume(1)[0]!==0){const r=c9(t),n=Yr(t),i=Es(new On(n));return{entrypoint:r,value:i}}},u9=t=>{if(t in ng)return`${ng[t]}`;if(t.length>y0)throw new o2(t);return`ff${ys({string:t}).slice(8)}`},l9=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=u9(t.entrypoint),r=ys(t.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${n}${r}`},d9=t=>{const e=ys(t);return`${Tt(e.length/2)}${e}`},h9=t=>{const e=Yr(t);return Es(new On(e))},p9=_r(re.VH),g9=Nr(re.VH),b9=t=>`${ys({string:t}).slice(2)}`,v9=t=>{const e=Yr(t);return Buffer.from(e).toString("utf8")},m9=t=>"",y9=t=>({}),E9=_r(re.TXR1),_9=Nr(re.TXR1),w9=t=>`${Tt(t.length/2)}${t}`,A9=t=>{const e=Yr(t);return Buffer.from(e).toString("hex")},x9=t=>t?`ff${d2(t)}`:"00",S9=t=>{const e=t.consume(1);if(Buffer.from(e).toString("hex")!=="00")return h2(t)},R9=(t,e=8)=>`${Tt(t.length/2,e)}${t}`,I9=t=>{const e=Yr(t);return Buffer.from(e).toString("hex")},T9=t=>{const e=t.reduce((r,n)=>r+`${Tt(n.length/2)}${n}`,"");return`${Tt(e.length/2)}${e}`},O9=t=>{const e=Yr(t);return AR(new On(e)).map(n=>Buffer.from(n).toString("hex"))},p2={branch:z.BRANCH,contents:[z.OPERATION]},w0={pkh:z.TZ1,secret:z.SECRET},A0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,public_key:z.PUBLIC_KEY},x0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,delegate:z.DELEGATE},S0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,amount:z.ZARITH,destination:z.ADDRESS,parameters:z.PARAMETERS},R0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,balance:z.ZARITH,delegate:z.DELEGATE,script:z.SCRIPT},I0={source:z.PKH,period:z.INT32,proposal:z.PROPOSAL,ballot:z.BALLOT_STATEMENT},T0={slot:z.INT16,level:z.INT32,round:z.INT32,block_payload_hash:z.BLOCK_PAYLOAD_HASH},O0={level:z.INT32,nonce:z.RAW},P0={source:z.PKH,period:z.INT32,proposals:z.PROPOSAL_ARR},N0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,value:z.VALUE},M0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,ticket_contents:z.VALUE,ticket_ty:z.VALUE,ticket_ticketer:z.ADDRESS,ticket_amount:z.ZARITH,destination:z.ADDRESS,entrypoint:z.ENTRYPOINT},L0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,tx_rollup_origination:z.TX_ROLLUP_ORIGINATION_PARAM},C0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,rollup:z.TX_ROLLUP_ID,content:z.TX_ROLLUP_BATCH_CONTENT,burn_limit:z.BURN_LIMIT},B0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,amount:z.ZARITH,destination:z.SMART_CONTRACT_ADDRESS},k0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,pk:z.PUBLIC_KEY},D0={consensus_key:z.PKH,delegate:z.PKH,destination:z.PKH},U0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,pvm_kind:z.PVM_KIND,kernel:z.PADDED_BYTES,origination_proof:z.PADDED_BYTES,parameters_ty:z.VALUE},K0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,message:z.SMART_ROLLUP_MESSAGE},H0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,rollup:z.SMART_ROLLUP_ADDRESS,cemented_commitment:z.SMART_ROLLUP_COMMITMENT_HASH,output_proof:z.PADDED_BYTES},P9=t=>e=>{if(!(e.kind in t)||!(e.kind in rg))throw new qi(e.kind);return rg[e.kind]+t[e.kind](e)},N9=t=>e=>{const r=e.consume(1),n=vh[r[0]];if(n===void 0)throw new hR(r[0].toString());const i=t[n](e);if(typeof i!="object")throw new c2("Decoded invalid operation");return Object.assign({kind:n},i)},jt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(r&&Array.isArray(o)){const a=t[o[0]],c=r[s];if(!Array.isArray(c))throw new dR(`Expected value to be Array ${JSON.stringify(c)}`);return i+c.reduce((l,f)=>l+a(f),"")}else{const a=t[o];return i+a(r[s])}},""),Gt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(Array.isArray(o)){const a=t[o[0]],c=[],l=r.length();for(;r.length()>0;)if(c.push(a(r)),l===r.length())throw new c2("Unable to decode value");return Object.assign(Object.assign({},i),{[s]:c})}else{const a=t[o],c=a(r);return typeof c<"u"?Object.assign(Object.assign({},i),{[s]:c}):Object.assign({},i)}},{}),Le={[z.SECRET]:t=>tg(t.consume(20)),[z.RAW]:t=>tg(t.consume(32)),[z.TZ1]:BR,[z.BRANCH]:kR,[z.ZARITH]:h2,[z.PUBLIC_KEY]:r9,[z.PKH]:E0,[z.DELEGATE]:YR,[z.INT32]:zR,[z.SCRIPT]:wR,[z.BALLOT_STATEMENT]:jR,[z.PROPOSAL]:l2,[z.PROPOSAL_ARR]:KR,[z.PARAMETERS]:f9,[z.ADDRESS]:i9,[z.SMART_ROLLUP_ADDRESS]:s9,[z.SMART_CONTRACT_ADDRESS]:o9,[z.SMART_ROLLUP_COMMITMENT_HASH]:a9,[z.VALUE]:h9,[z.INT16]:XR,[z.BLOCK_PAYLOAD_HASH]:g9,[z.ENTRYPOINT]:v9,[z.TX_ROLLUP_ORIGINATION_PARAM]:y9,[z.TX_ROLLUP_ID]:_9,[z.TX_ROLLUP_BATCH_CONTENT]:A9,[z.BURN_LIMIT]:S9,[z.PVM_KIND]:VR,[z.PADDED_BYTES]:I9,[z.SMART_ROLLUP_MESSAGE]:O9};Le[z.OPERATION]=N9(Le);Le[z.OP_ACTIVATE_ACCOUNT]=t=>Gt(Le)(w0)(t);Le[z.OP_DELEGATION]=t=>Gt(Le)(x0)(t);Le[z.OP_TRANSACTION]=t=>Gt(Le)(S0)(t);Le[z.OP_ORIGINATION]=t=>Gt(Le)(R0)(t);Le[z.OP_BALLOT]=t=>Gt(Le)(I0)(t);Le[z.OP_ENDORSEMENT]=t=>Gt(Le)(T0)(t);Le[z.OP_SEED_NONCE_REVELATION]=t=>Gt(Le)(O0)(t);Le[z.OP_PROPOSALS]=t=>Gt(Le)(P0)(t);Le[z.OP_REVEAL]=t=>Gt(Le)(A0)(t);Le[z.OP_REGISTER_GLOBAL_CONSTANT]=t=>Gt(Le)(N0)(t);Le[z.OP_TRANSFER_TICKET]=t=>Gt(Le)(M0)(t);Le[z.OP_TX_ROLLUP_ORIGINATION]=t=>Gt(Le)(L0)(t);Le[z.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>Gt(Le)(C0)(t);Le[z.OP_INCREASE_PAID_STORAGE]=t=>Gt(Le)(B0)(t);Le[z.OP_UPDATE_CONSENSUS_KEY]=t=>Gt(Le)(k0)(t);Le[z.OP_DRAIN_DELEGATE]=t=>Gt(Le)(D0)(t);Le[z.OP_SMART_ROLLUP_ORIGINATE]=t=>Gt(Le)(U0)(t);Le[z.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Gt(Le)(K0)(t);Le[z.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Gt(Le)(H0)(t);Le[z.MANAGER]=Gt(Le)(p2);const Ce={[z.SECRET]:t=>t,[z.RAW]:t=>t,[z.TZ1]:UR,[z.BRANCH]:DR,[z.ZARITH]:d2,[z.PUBLIC_KEY]:QR,[z.PKH]:_0,[z.DELEGATE]:qR,[z.SCRIPT]:_R,[z.BALLOT_STATEMENT]:FR,[z.PROPOSAL]:u2,[z.PROPOSAL_ARR]:HR,[z.INT32]:$R,[z.PARAMETERS]:l9,[z.ADDRESS]:ZR,[z.SMART_ROLLUP_ADDRESS]:e9,[z.SMART_CONTRACT_ADDRESS]:t9,[z.SMART_ROLLUP_COMMITMENT_HASH]:n9,[z.VALUE]:d9,[z.INT16]:WR,[z.BLOCK_PAYLOAD_HASH]:p9,[z.ENTRYPOINT]:b9,[z.TX_ROLLUP_ORIGINATION_PARAM]:m9,[z.TX_ROLLUP_ID]:E9,[z.TX_ROLLUP_BATCH_CONTENT]:w9,[z.BURN_LIMIT]:x9,[z.PVM_KIND]:GR,[z.PADDED_BYTES]:R9,[z.SMART_ROLLUP_MESSAGE]:T9};Ce[z.OPERATION]=P9(Ce);Ce[z.OP_ACTIVATE_ACCOUNT]=t=>jt(Ce)(w0)(t);Ce[z.OP_DELEGATION]=t=>jt(Ce)(x0)(t);Ce[z.OP_TRANSACTION]=t=>jt(Ce)(S0)(t);Ce[z.OP_ORIGINATION]=t=>jt(Ce)(R0)(t);Ce[z.OP_BALLOT]=t=>jt(Ce)(I0)(t);Ce[z.OP_ENDORSEMENT]=t=>jt(Ce)(T0)(t);Ce[z.OP_SEED_NONCE_REVELATION]=t=>jt(Ce)(O0)(t);Ce[z.OP_PROPOSALS]=t=>jt(Ce)(P0)(t);Ce[z.OP_REVEAL]=t=>jt(Ce)(A0)(t);Ce[z.OP_REGISTER_GLOBAL_CONSTANT]=t=>jt(Ce)(N0)(t);Ce[z.OP_TRANSFER_TICKET]=t=>jt(Ce)(M0)(t);Ce[z.OP_TX_ROLLUP_ORIGINATION]=t=>jt(Ce)(L0)(t);Ce[z.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>jt(Ce)(C0)(t);Ce[z.OP_INCREASE_PAID_STORAGE]=t=>jt(Ce)(B0)(t);Ce[z.OP_UPDATE_CONSENSUS_KEY]=t=>jt(Ce)(k0)(t);Ce[z.OP_DRAIN_DELEGATE]=t=>jt(Ce)(D0)(t);Ce[z.OP_SMART_ROLLUP_ORIGINATE]=t=>jt(Ce)(U0)(t);Ce[z.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>jt(Ce)(K0)(t);Ce[z.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>jt(Ce)(H0)(t);Ce[z.MANAGER]=jt(Ce)(p2);const g2={activate_account:w0,reveal:A0,delegation:x0,transaction:S0,origination:R0,ballot:I0,endorsement:T0,seed_nonce_revelation:O0,proposals:P0,register_global_constant:N0,transfer_ticket:M0,tx_rollup_origination:L0,tx_rollup_submit_batch:C0,increase_paid_storage:B0,update_consensus_key:k0,drain_delegate:D0,smart_rollup_originate:U0,smart_rollup_add_messages:K0,smart_rollup_execute_outbox_message:H0},M9=(t,e)=>e.filter(r=>!t.includes(r)),L9=(t,e)=>t.filter(r=>r!==e),C9=t=>Object.keys(g2).includes(t),B9=t=>{const e=t.kind,r=Object.keys(t),n=L9(r,"kind"),i=Object.keys(g2[e]);return M9(n,i)};var mh;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(mh||(mh={}));const k9=mh.PtMumbai2;function D9(t,e){return{encoder:Ce[t],decoder:r=>{const n=On.fromHexString(r);return Le[t](n)}}}class b2{constructor(e=k9){this.protocolHash=e,this.codec=D9(z.MANAGER,this.protocolHash)}forge(e){if(JA(e.branch)!==_e.VALID)throw new cR(`The block hash ${e.branch} is invalid`);for(const n of e.contents){if(!C9(n.kind))throw new qi(n.kind);const i=B9(n);if(i.length===1){if(n.kind==="delegation"&&i[0]==="delegate")continue;if(n.kind==="origination"&&i[0]==="delegate")continue;if(n.kind==="transaction"&&i[0]==="parameters")continue;if(n.kind==="tx_rollup_submit_batch"&&i[0]==="burn_limit")continue;throw new ig(`Missing properties: ${i.join(", ").toString()}`)}else if(i.length>1)throw new ig(`Missing properties: ${i.join(", ").toString()}`)}const r=this.codec.encoder(e).toLowerCase();return Promise.resolve(r)}parse(e){return Promise.resolve(this.codec.decoder(e))}}new b2;function mn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function J(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Xc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function U9(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function K9(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const n=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new ra(`Http error response: (${t.status}) ${n}`,t.status,t.statusText,n,t.url)}else return t}class H9{constructor(e){this.context=e}inject(e){return J(this,void 0,void 0,function*(){let r;try{r=yield this.context.rpc.injectOperation(e)}catch(n){const i=". You may want to use --replace to provide adequate fee and replace it";throw n instanceof ra&&n.message.includes(i)?K9(n,i):n}return r})}}class Jc extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}class yh{publicKey(){return J(this,void 0,void 0,function*(){throw new Jc})}publicKeyHash(){return J(this,void 0,void 0,function*(){throw new Jc})}secretKey(){return J(this,void 0,void 0,function*(){throw new Jc})}sign(e,r){return J(this,void 0,void 0,function*(){throw new Jc})}}function v2(t){return new Rt(e=>(t.on("data",r=>{e.next(r)}),t.on("error",r=>{e.error(r)}),t.on("close",()=>{e.complete()}),()=>{t.close()}))}var _s;(function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL=1100]="REVEAL"})(_s||(_s={}));var ws;(function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=374]="REVEAL"})(ws||(ws={}));var As;(function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"})(As||(As={}));const F9=250;var Kt;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Kt||(Kt={}));Kt.Pt24m4xi,Kt.PsBABY5H,Kt.PsBabyM1,Kt.PsCARTHA,Kt.PsDELPH1,Kt.PtEdo2Zk,Kt.PsFLorena,Kt.PtGRANADs,Kt.PtHangz2,Kt.PsiThaCa,Kt.Psithaca2,Kt.PtJakart2,Kt.PtKathman,Kt.PtLimaPtL,Kt.PtMumbai2,Kt.ProtoALpha;var ag;(function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.ITHACANET2="NetXnHfVqm9iesp",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH",t.MUMBAINET="NetXQw6nWSnrJ5t",t.MUMBAINET2="NetXgbcrNtXD2yA"})(ag||(ag={}));class m2 extends Error{constructor(e,r,n){super(`${e} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractMethodName=e,this.sigs=r,this.args=n,this.name="Invalid parameters error"}}class j9 extends Error{constructor(e){super(`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`),this.source=e,this.name="Invalid delegation source error"}}class $f extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidCodeParameter"}}class y2 extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidInitParameter"}}class G9 extends Error{constructor(e,r,n,i){super(`Unable to encode the parameter of the view: ${e}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractViewName=e,this.sigs=r,this.args=n,this.originalError=i,this.name="Invalid view parameters error",this.cause=i}}class V9 extends Error{constructor(e,r,n,i){super(e),this.message=e,this.viewName=r,this.failWith=n,this.originalError=i,this.name="ViewSimulationError"}}const q9=t=>{if($9(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},$9=t=>{try{JSON.parse(t)}catch{return!1}return!0};class cg extends Error{constructor(e){super(`${e} Please configure the context of the view execution in the executeView method.`),this.info=e,this.name="InvalidViewSimulationContext"}}class E2 extends Error{constructor(e){super(e),this.message=e,this.name="RevealOperationError"}}class z9 extends Error{constructor(e){super(e),this.message=e,this.name="OriginationParameterError"}}class W9 extends Error{constructor(e){super(e),this.message=e,this.name="IntegerError"}}const Xo=({code:t,init:e,balance:r="0",delegate:n,storage:i,fee:s=ws.ORIGINATION,gasLimit:o=_s.ORIGINATION,storageLimit:a=As.ORIGINATION,mutez:c=!1})=>J(void 0,void 0,void 0,function*(){if(i!==void 0&&e!==void 0)throw new z9("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new $f("Wrong code parameter type, expected an array",t);let l;if(i!==void 0){const I=t.find(L=>"prim"in L&&L.prim==="storage");if(I?.args===void 0)throw new $f("The storage section is missing from the script",t);l=new $r(I.args[0]).Encode(i)}else if(e!==void 0&&typeof e=="object")l=e;else throw new y2("Wrong init parameter type, expected JSON Michelson",e);const f={code:t,storage:l};if(isNaN(Number(r)))throw new W9(`Unexpected Invalid Integer ${r}`);const d={kind:oe.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:c?r.toString():o0("tz","mutez",r).toString(),script:f};return n&&(d.delegate=n),d}),Jo=({to:t,amount:e,parameter:r,fee:n=ws.TRANSFER,gasLimit:i=_s.TRANSFER,storageLimit:s=As.TRANSFER,mutez:o=!1})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TRANSACTION,fee:n,gas_limit:i,storage_limit:s,amount:o?e.toString():o0("tz","mutez",e).toString(),destination:t,parameters:r}}),Yo=({delegate:t,source:e,fee:r=ws.DELEGATION,gasLimit:n=_s.DELEGATION,storageLimit:i=As.DELEGATION})=>J(void 0,void 0,void 0,function*(){return{kind:oe.DELEGATION,source:e,fee:r,gas_limit:n,storage_limit:i,delegate:t}}),_2=({fee:t=ws.DELEGATION,gasLimit:e=_s.DELEGATION,storageLimit:r=As.DELEGATION},n)=>J(void 0,void 0,void 0,function*(){return{kind:oe.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:n}}),xs=({fee:t=ws.REVEAL,gasLimit:e=_s.REVEAL,storageLimit:r=As.REVEAL},n,i)=>J(void 0,void 0,void 0,function*(){return{kind:oe.REVEAL,fee:t,public_key:i,source:n,gas_limit:e,storage_limit:r}}),ac=({value:t,source:e,fee:r,gasLimit:n,storageLimit:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:n,storage_limit:i,source:e}}),cc=({source:t,fee:e,gasLimit:r,storageLimit:n})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TX_ROLLUP_ORIGINATION,fee:e,gas_limit:r,storage_limit:n,source:t,tx_rollup_origination:{}}}),fc=({content:t,rollup:e,source:r,fee:n,gasLimit:i,storageLimit:s})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TX_ROLLUP_SUBMIT_BATCH,fee:n,gas_limit:i,storage_limit:s,source:r,content:t,rollup:e}}),uc=({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:n,destination:i,entrypoint:s,source:o,fee:a,gasLimit:c,storageLimit:l})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TRANSFER_TICKET,fee:a,gas_limit:c,storage_limit:l,source:o,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:n,destination:i,entrypoint:s}}),Qo=({source:t,fee:e,gasLimit:r,storageLimit:n,amount:i,destination:s})=>J(void 0,void 0,void 0,function*(){return{kind:oe.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:n,amount:i,destination:s}}),w2=({consensus_key:t,delegate:e,destination:r})=>J(void 0,void 0,void 0,function*(){return{kind:oe.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}}),A2=({source:t,proposal:e,ballot:r})=>J(void 0,void 0,void 0,function*(){return{kind:oe.BALLOT,source:t,proposal:e,ballot:r}}),x2=({source:t,proposals:e})=>J(void 0,void 0,void 0,function*(){return{kind:oe.PROPOSALS,source:t,proposals:e}}),F0=({source:t,fee:e,gasLimit:r,storageLimit:n,pk:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:i}}),lc=({source:t,fee:e,gasLimit:r,storageLimit:n,message:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.SMART_ROLLUP_ADD_MESSAGES,source:t,fee:e,gas_limit:r,storage_limit:n,message:i}}),Yc=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),fg=(t,e)=>{if(Array.isArray(t)){const r=t.find(n=>n.kind===e);if(r&&X9(r,e))return r}},X9=(t,e)=>t.kind===e,Eh=t=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,zf=t=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,j0=t=>"metadata"in t,ha=t=>j0(t)&&"operation_result"in t.metadata,J9=t=>j0(t)&&"internal_operation_results"in t.metadata,Y9=t=>"with"in t;class S2 extends Error{constructor(e,r){super(),this.errors=e,this.errorDetails=r,this.name="TezosOperationError";const n=e[e.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,Y9(n)&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class Q9 extends Error{constructor(e){super("Preapply returned an unexpected result"),this.result=e,this.name="TezosPreapplyFailureError"}}const ii=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].contents.length;i++){const s=e[n].contents[i];ha(s)&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(o=>r.push(o.result)))}return r},Zo=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let n=[];for(let i=0;i<r.length;i++)for(let s=0;s<r[i].contents.length;s++){const o=r[i].contents[s];if(j0(o)&&(ha(o)&&o.metadata.operation_result.status===e&&(n=n.concat(o.metadata.operation_result.errors||[])),J9(o)&&Array.isArray(o.metadata.internal_operation_results)))for(const a of o.metadata.internal_operation_results)"result"in a&&a.result.status===e&&(n=n.concat(a.result.errors||[]))}return n};class Z9 extends Error{constructor(e){super(e),this.message=e,this.name="OriginationOperationError"}}class md extends Error{constructor(e){super(e),this.message=e,this.name="InvalidEstimateValueError"}}class R2 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidConfirmationCountError"}}class e7 extends Error{constructor(e){super(e),this.message=e,this.name="ConfirmationUndefinedError"}}class t7 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidFilterExpressionError"}}class Vs extends Error{constructor(e){super(e),this.message=e,this.name="RPCResponseError"}}class Sr{constructor(e,r,n,i){if(this.hash=e,this.raw=r,this.results=n,this.context=i,this._pollingConfig$=new sc(1),this.currentHead$=this._pollingConfig$.pipe(Zn(s=>new Hu(s).pipe(Bm(s.timeout*1e3,l0(new Error("Confirmation polling timed out"))))),Zn(()=>Nm(()=>v2(this.context.stream.subscribeBlock("head"))).pipe(Zn(s=>{var o,a;const c=(a=(o=this.lastHead)===null||o===void 0?void 0:o.header.level)!==null&&a!==void 0?a:s.header.level-1;return h0(c+1,s.header.level-c-1).pipe(Pc(l=>this.context.readProvider.getBlock(l)),Lm(s))}),Hf(s=>this.lastHead=s))),C1({refCount:!0})),this.confirmed$=this.currentHead$.pipe(zs(s=>{for(let o=3;o>=0;o--)s.operations[o].forEach(a=>{a.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),Kf(s=>s!==void 0),Mi(),C1()),this._foundAt=Number.POSITIVE_INFINITY,vm(this.hash)!==_e.VALID)throw new hm(this.hash);this.confirmed$.pipe(Mi(),p0(()=>la(xm))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>ha(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,r){return J(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new R2("Confirmation count must be at least 1");const{defaultConfirmationCount:n,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:r||i});const s=e!==void 0?e:n;return new Promise((o,a)=>{this.confirmed$.pipe(Zn(()=>this.currentHead$),Kf(c=>c.header.level-this._foundAt>=s-1),Mi()).subscribe(c=>{o(this._foundAt+(s-1))},a)})})}}class r7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}getOriginatedContractAddresses(){const e=this.results.filter(n=>n.kind==="origination");let r=[];for(const n of e)n.metadata.operation_result.originated_contracts&&(r=[...r,...n.metadata.operation_result.originated_contracts]);return r}get status(){return this.results.filter(e=>I2.indexOf(e.kind)!==-1).map(e=>ha(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ii({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ii({contents:this.results}),"paid_storage_size_diff"))}get errors(){return Zo({contents:this.results})}}class qu{constructor(e){this.context=e}get rpc(){return this.context.rpc}get signer(){return this.context.signer}isRevealOpNeeded(e,r){return J(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return J(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let r=!1;for(const n of e)zf(n)&&(r=!0);return r}prepareOperation({operation:e,source:r},n){return J(this,void 0,void 0,function*(){const i={};let s=[];const o=this.context.readProvider.getBlockHash("head~2"),a=this.context.readProvider.getNextProtocol("head");Array.isArray(e)?s=[...e]:s=[e];const c=n||(yield this.signer.publicKeyHash());let l=Promise.resolve(void 0),f=Promise.resolve(void 0);s.find(U=>J(this,void 0,void 0,function*(){if(U.kind==="ballot"||U.kind==="proposals")try{f=this.rpc.getCurrentPeriod()}catch(F){throw new Vs(`Failed to get the current voting period index: ${JSON.stringify(F)}`)}}));for(let U=0;U<s.length;U++)if(zf(s[U])||s[U].kind==="reveal"){l=this.context.readProvider.getCounter(c,"head");break}const[d,I,P,L]=yield Promise.all([o,a,l,f]),H=parseInt(P||"0",10);(!i[c]||i[c]<H)&&(i[c]=H);const q=U=>({counter:`${++i[c]}`,fee:typeof U.fee>"u"?"0":`${U.fee}`,gas_limit:typeof U.gas_limit>"u"?"0":`${U.gas_limit}`,storage_limit:typeof U.storage_limit>"u"?"0":`${U.storage_limit}`}),G=U=>({source:typeof U.source>"u"?r||c:U.source}),V=(U=>U.map(F=>{switch(F.kind){case oe.ACTIVATION:case oe.DRAIN_DELEGATE:return Object.assign({},F);case oe.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},F),{balance:typeof F.balance<"u"?`${F.balance}`:"0"}),G(F)),q(F));case oe.TRANSACTION:{const j=Object.assign(Object.assign(Object.assign(Object.assign({},F),{amount:typeof F.amount<"u"?`${F.amount}`:"0"}),G(F)),q(F));if(j.source.toLowerCase().startsWith("kt1"))throw new i0(`KT1 addresses are not supported as source since ${Kt.PsBabyM1}`);return j}case oe.REVEAL:case oe.DELEGATION:case oe.REGISTER_GLOBAL_CONSTANT:case oe.TX_ROLLUP_ORIGINATION:case oe.TX_ROLLUP_SUBMIT_BATCH:case oe.UPDATE_CONSENSUS_KEY:case oe.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},F),G(F)),q(F));case oe.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},F),{ticket_amount:`${F.ticket_amount}`}),G(F)),q(F));case oe.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},F),{amount:`${F.amount}`}),G(F)),q(F));case oe.BALLOT:if(L===void 0)throw new Vs("Failed to get the current voting period index");return Object.assign(Object.assign({},F),{period:L?.voting_period.index});case oe.PROPOSALS:if(L===void 0)throw new Vs("Failed to get the current voting period index");return Object.assign(Object.assign({},F),{period:L?.voting_period.index});default:throw new qi(F.kind)}}))(s);return{opOb:{branch:d,contents:V,protocol:I},counter:H}})}forge({opOb:{branch:e,contents:r,protocol:n},counter:i}){return J(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:e,contents:r}),opOb:{branch:e,contents:r,protocol:n},counter:i}})}simulate(e){return J(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(e),op:e,context:this.context.clone()}})}estimate(e,r){var{fee:n,gasLimit:i,storageLimit:s}=e,o=mn(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){let a=n,c=i,l=s;if(a&&a%1!==0)throw new md(`Fee value must not be a decimal: ${a}`);if(c&&c%1!==0)throw new md(`Gas Limit value must not be a decimal: ${c}`);if(l&&l%1!==0)throw new md(`Storage Limit value must not be a decimal: ${l}`);if(n===void 0||i===void 0||s===void 0){const f=yield r(Object.assign({fee:n,gasLimit:i,storageLimit:s},o));a===void 0&&(a=f.suggestedFeeMutez),c===void 0&&(c=f.gasLimit),l===void 0&&(l=f.storageLimit)}return{fee:a,gasLimit:c,storageLimit:l}})}signAndInject(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=r.sbytes,e.opOb.signature=r.prefixSig;const n=[],i=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(i))throw new Q9(i);for(let o=0;o<i.length;o++)for(let a=0;a<i[o].contents.length;a++)n.push(i[o].contents[a]);const s=Zo(i);if(s.length)throw new S2(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:n,context:this.context.clone()}})}}const I2=[oe.ACTIVATION,oe.ORIGINATION,oe.TRANSACTION,oe.DELEGATION];class G0 extends qu{constructor(e,r){super(e),this.estimator=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:oe.TRANSACTION},e)),this}withTransferTicket(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination,"param destination");return this.operations.push(Object.assign({kind:oe.TRANSFER_TICKET},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:oe.DELEGATION},e)),this}withActivation({pkh:e,secret:r}){if(s0(e)!==_e.VALID)throw new n0(e);return this.operations.push({kind:oe.ACTIVATION,pkh:e,secret:r}),this}withOrigination(e){return this.operations.push(Object.assign({kind:oe.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:oe.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:oe.INCREASE_PAID_STORAGE},e)),this}withTxRollupOrigination(e){return this.operations.push(Object.assign({kind:oe.TX_ROLLUP_ORIGINATION},e)),this}withSmartRollupAddMessages(e){return this.operations.push(Object.assign({kind:oe.SMART_ROLLUP_ADD_MESSAGES},e)),this}withTxRollupSubmitBatch(e){return this.operations.push(Object.assign({kind:oe.TX_ROLLUP_SUBMIT_BATCH},e)),this}getRPCOp(e){return J(this,void 0,void 0,function*(){switch(e.kind){case oe.TRANSACTION:return Jo(Object.assign({},e));case oe.ORIGINATION:return Xo(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case oe.DELEGATION:return Yo(Object.assign({},e));case oe.ACTIVATION:return Object.assign({},e);case oe.REGISTER_GLOBAL_CONSTANT:return ac(Object.assign({},e));case oe.INCREASE_PAID_STORAGE:return Qo(Object.assign({},e));case oe.TX_ROLLUP_ORIGINATION:return cc(Object.assign({},e));case oe.TX_ROLLUP_SUBMIT_BATCH:return fc(Object.assign({},e));case oe.TRANSFER_TICKET:return uc(Object.assign({},e));case oe.SMART_ROLLUP_ADD_MESSAGES:return lc(Object.assign({},e));default:throw new qi(e.kind)}})}with(e){for(const r of e)switch(r.kind){case oe.TRANSACTION:this.withTransfer(r);break;case oe.ORIGINATION:this.withOrigination(r);break;case oe.DELEGATION:this.withDelegation(r);break;case oe.ACTIVATION:this.withActivation(r);break;case oe.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case oe.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;case oe.TX_ROLLUP_ORIGINATION:this.withTxRollupOrigination(r);break;case oe.TX_ROLLUP_SUBMIT_BATCH:this.withTxRollupSubmitBatch(r);break;case oe.TRANSFER_TICKET:this.withTransferTicket(r);break;case oe.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(r);break;default:throw new qi(r.kind)}return this}toPrepare(){return J(this,void 0,void 0,function*(){const e=yield this.signer.publicKeyHash(),r=yield this.signer.publicKey(),n=yield this.estimator.batch(this.operations),i=yield this.isRevealOpNeeded(this.operations,e);let s=i?1:0;const o=[];for(const a of this.operations){if(Eh(a)){const c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[s]}));o.push(yield this.getRPCOp(Object.assign(Object.assign({},a),c)))}else o.push(Object.assign({},a));s++}if(i){const a={kind:oe.REVEAL},c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[0]}));o.unshift(yield xs(Object.assign({},c),e,r))}return o})}send(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.signer.publicKey(),i=yield this.estimator.batch(this.operations),s=yield this.isRevealOpNeeded(this.operations,r);let o=s?1:0;const a=[];for(const H of this.operations){if(Eh(H)){const q=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[o]}));a.push(yield this.getRPCOp(Object.assign(Object.assign({},H),q)))}else a.push(Object.assign({},H));o++}if(s){const H={kind:oe.REVEAL},q=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[0]}));a.unshift(yield xs(Object.assign({},q),r,n))}const c=e&&e.source||r,l=yield this.prepareOperation({operation:a,source:c}),f=yield this.forge(l),{hash:d,context:I,forgedBytes:P,opResponse:L}=yield this.signAndInject(f);return new r7(d,a,c,P,L,I)})}}class n7{constructor(e,r){this.context=e,this.estimator=r}batch(e){const r=new G0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}const i7=(t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP});const n=ii({contents:t});let i=new be(0),s=new be(0),o=new be(0),a=new be(0),c=new be(0),l=new be(0);return n.forEach(f=>{o=o.plus(f.fee||0),a=a.plus(Array.isArray(f.originated_contracts)?f.originated_contracts.length*r:0),c=c.plus("allocated_destination_contract"in f?e:0),i=i.plus(f.consumed_milligas||0),l=l.plus("paid_storage_size_diff"in f&&Number(f.paid_storage_size_diff)||0)}),s=s.plus(c).plus(a).plus(l),{totalFee:o,totalMilliGas:i,totalGas:i.dividedBy(1e3),totalStorage:s,totalAllocationBurn:c,totalOriginationBurn:a,totalPaidStorageDiff:l,totalStorageBurn:new be(s.multipliedBy(F9))}},s7=60;class pa{constructor(e,r,n){if(this.opHash=e,this.context=r,this._newHead$=n,this._operationResult=new sc(1),this._includedInBlock=new sc(1),this._included=!1,this.newHead$=this._newHead$.pipe(Zn(i=>{var s,o;const a=(o=(s=this.lastHead)===null||s===void 0?void 0:s.header.level)!==null&&o!==void 0?o:i.header.level-1;return h0(a+1,i.header.level-a-1).pipe(Pc(c=>this.context.readProvider.getBlock(c)),Lm(i))}),Hf(i=>this.lastHead=i),dh(1),nc()),this.confirmed$=this.newHead$.pipe(zs(i=>{for(const s of i.operations)for(const o of s)if(o.hash===this.opHash)return this._included=!0,this._includedInBlock.next(i),this._operationResult.next(o.contents),i}),Kf(i=>typeof i<"u"),Mi(),dh(1),nc()),vm(this.opHash)!==_e.VALID)throw new hm(this.opHash);this.confirmed$.pipe(Mi(),p0(()=>la(void 0))).subscribe()}operationResults(){return J(this,void 0,void 0,function*(){return this._operationResult.pipe(Mi()).toPromise()})}receipt(){return J(this,void 0,void 0,function*(){return i7(yield this.operationResults())})}getCurrentConfirmation(){return J(this,void 0,void 0,function*(){return this._included?P1([this._includedInBlock,ao(this.context.readProvider.getBlock("head"))]).pipe(zs(([e,r])=>r.header.level-e.header.level+1),Mi()).toPromise():0})}isInCurrentBranch(e="head"){return J(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(e),n=yield this._includedInBlock.pipe(Mi()).toPromise(),i=r-n.header.level;if(i<=0)return!0;const s=Math.min(n.header.level+i,n.header.level+s7);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(n.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new R2("Confirmation count must be at least 1");const{defaultConfirmationCount:r}=this.context.config,n=e!==void 0?e:r;if(n===void 0)throw new e7("Default confirmation count can not be undefined!");return P1([this._includedInBlock,this.newHead$]).pipe(Mm(([,i],[,s])=>i.hash===s.hash),zs(([i,s])=>({block:s,expectedConfirmation:n,currentConfirmation:s.header.level-i.header.level+1,completed:s.header.level-i.header.level>=n-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),Ox(({completed:i})=>!i,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}class o7 extends pa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r,this.getOriginatedContractAddresses=()=>J(this,void 0,void 0,function*(){const s=(yield this.operationResults()).filter(a=>a.kind==="origination");let o=[];for(const a of s)a.metadata.operation_result.originated_contracts&&(o=[...o,...a.metadata.operation_result.originated_contracts]);return o})}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}status(){return J(this,void 0,void 0,function*(){return this._included?(yield this.operationResults()).filter(r=>I2.indexOf(r.kind)!==-1).map(r=>ha(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown":"pending"})}}class a7 extends pa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}delegationOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.DELEGATION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class c7 extends pa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}increasePaidStorageOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.INCREASE_PAID_STORAGE)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}class f7 extends pa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}originationOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return fg(e,oe.ORIGINATION)})}revealOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return fg(e,oe.REVEAL)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return J(this,void 0,void 0,function*(){const e=yield this.originationOperation(),r=(e?.metadata.operation_result.originated_contracts||[])[0];return this.context.wallet.at(r)})}}class u7 extends pa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}transactionOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.TRANSACTION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}function l7(t){return function(r){return new Hu(null).pipe(Bm(t,l0(new Error("Confirmation polling timed out"))),ju(()=>r))}}const d7=(t,e,r)=>t.pipe(l7(e.config.confirmationPollingTimeoutSecond*1e3),dh(1),nc());class h7{constructor(e){this.context=e,this.sharedHeadObs=Nm(()=>v2(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return J(this,void 0,void 0,function*(){return d7(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,r=1){return ao(this.context.readProvider.getBlock(e)).pipe(Zn(n=>r===1?la(n):h0(n.header.level,r-1).pipe(Ax(n),Pc(i=>J(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof i=="number"?i:i.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:e}){return J(this,void 0,void 0,function*(){const r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(yield this.createNewHeadObservable()),Uf(...r)})}createOperation(e,r={}){return J(this,void 0,void 0,function*(){return new pa(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(e,r={}){return J(this,void 0,void 0,function*(){return new o7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(e,r={}){return J(this,void 0,void 0,function*(){return new u7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new a7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new f7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createIncreasePaidStorageOperation(e,r={}){return J(this,void 0,void 0,function*(){return new c7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class p7 extends qu{constructor(e){super(e)}getBalance(e){return J(this,void 0,void 0,function*(){if(ct(e)!==_e.VALID)throw new ft(e);return this.context.readProvider.getBalance(e,"head")})}getDelegate(e){return J(this,void 0,void 0,function*(){if(ct(e)!==_e.VALID)throw new ft(e);return this.context.readProvider.getDelegate(e,"head")})}activate(e,r){return J(this,void 0,void 0,function*(){if(s0(e)!==_e.VALID)throw new n0(e);const n={kind:oe.ACTIVATION,pkh:e,secret:r},i=yield this.prepareOperation({operation:[n],source:e}),s=yield this.forge(i),o=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new Sr(yield this.rpc.injectOperation(o),Object.assign(Object.assign({},s),{opbytes:o}),[],this.context.clone())})}}const Qc=100,g7=1,b7=.1,ug=100;class gr{constructor(e,r,n,i,s=Qc){this._milligasLimit=e,this._storageLimit=r,this.opSize=n,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const e=Math.max(Number(this._storageLimit),0);return e>0?e:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+ug)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+ug)*b7+Number(this.opSize)*g7}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(Qc+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+Qc*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),Qc)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let r=0,n=0,i=0,s=0,o;return e.forEach(a=>{r+=a.milligasLimit,n+=a.storageLimit,i+=a.opSize,s=Math.max(a.minimalFeePerStorageByteMutez,s),a.baseFeeMutez&&(o=o?o+a.baseFeeMutez:a.baseFeeMutez)}),new gr(r,n,i,s,o)}static createArrayEstimateInstancesFromProperties(e){return e.map(r=>new gr(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class lg extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}const Jt=(t,e)=>({fee:typeof t.fee>"u"?e.fee:t.fee,gasLimit:typeof t.gasLimit>"u"?e.gasLimit:t.gasLimit,storageLimit:typeof t.storageLimit>"u"?e.storageLimit:t.storageLimit}),v7="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class m7 extends qu{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128}getKeys(){return J(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}getAccountLimits(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.context.readProvider.getBalance(e,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:c}=r;return{fee:0,gasLimit:n?Math.floor(this.ajustGasForBatchOperation(o,s,n).toNumber()):s.toNumber(),storageLimit:Math.floor(be.min(i.dividedBy(c),a).toNumber())}})}ajustGasForBatchOperation(e,r,n){return be.min(r,e.div(n+1))}getEstimationPropertiesFromOperationContent(e,r,n,i){const s=ii({contents:[e]});let o=0,a=0;return s.forEach(c=>{a+="originated_contracts"in c&&typeof c.originated_contracts<"u"?c.originated_contracts.length*this.ORIGINATION_STORAGE:0,a+="allocated_destination_contract"in c?this.ALLOCATION_STORAGE:0,o+=Number(c.consumed_milligas)||0,a+="paid_storage_size_diff"in c&&Number(c.paid_storage_size_diff)||0,a+="storage_size"in c&&"global_address"in c&&Number(c.storage_size)||0,a+="originated_rollup"in c?i:0}),Eh(e)?{milligasLimit:o||0,storageLimit:Number(a||0),opSize:r,minimalFeePerStorageByteMutez:n.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:n.toNumber(),baseFeeMutez:0}}prepareEstimate(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.prepareOperation(e,n),{opbytes:s,opOb:{branch:o,contents:a}}=yield this.forge(i),c={operation:{branch:o,contents:a,signature:v7},chain_id:yield this.context.readProvider.getChainId()},{opResponse:l}=yield this.simulate(c),{cost_per_byte:f,tx_rollup_origination_size:d}=r,I=[...Zo(l,"backtracked"),...Zo(l)];if(I.length)throw new S2(I,"Error occurred during estimation");let P=1;return Array.isArray(e.operation)&&e.operation.length>1&&(P=l.contents[0].kind==="reveal"?e.operation.length-1:e.operation.length),l.contents.map(L=>this.getEstimationPropertiesFromOperationContent(L,L.kind==="reveal"?this.OP_SIZE_REVEAL/2:s.length/2/P,f,d??0))})}originate(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const{publicKeyHash:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Xo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c)))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}transfer(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(ct(s.to)!==_e.VALID)throw new ft(s.to);if(s.source&&ct(s.source)!==_e.VALID)throw new ft(s.source);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Jo(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}transferTicket(e){var r,{fee:n,storageLimit:i,gasLimit:s}=e,o=mn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(ct(o.destination)!==_e.VALID)throw new ft(o.destination,"param destination");if(o.source&&ct(o.source)!==_e.VALID)throw new ft((r=o.source)!==null&&r!==void 0?r:"","param source");const a=(yield this.getKeys()).publicKeyHash,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield uc(Object.assign(Object.assign({},o),Jt({fee:n,storageLimit:i,gasLimit:s},l))),d=yield this.isRevealOpNeeded([f],a),I=d?yield this.addRevealOp([f],a):f,P=yield this.prepareEstimate({operation:I,source:a},c,a);return d&&P.shift(),gr.createEstimateInstanceFromProperties(P)})}setDelegate(e){var{fee:r,gasLimit:n,storageLimit:i}=e,s=mn(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){if(s.source&&ct(s.source)!==_e.VALID)throw new ft(s.source);if(s.delegate&&ct(s.delegate)!==_e.VALID)throw new ft(s.delegate);const o=(yield this.getKeys()).publicKeyHash,a=s.source||o,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield Yo(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:i,gasLimit:n},l))),d=yield this.isRevealOpNeeded([f],o),I=d?yield this.addRevealOp([f],o):f,P=yield this.prepareEstimate({operation:I,source:o},c,o);return d&&P.shift(),gr.createEstimateInstanceFromProperties(P)})}batch(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r}=yield this.getKeys();let n=[];const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i,e.length);for(const c of e)switch(c.kind){case oe.TRANSACTION:n.push(yield Jo(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.ORIGINATION:n.push(yield Xo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},c),Jt(c,s)))));break;case oe.DELEGATION:n.push(yield Yo(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.ACTIVATION:n.push(Object.assign(Object.assign({},c),s));break;case oe.REGISTER_GLOBAL_CONSTANT:n.push(yield ac(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.TX_ROLLUP_ORIGINATION:n.push(yield cc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.TX_ROLLUP_SUBMIT_BATCH:n.push(yield fc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.TRANSFER_TICKET:n.push(yield uc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.INCREASE_PAID_STORAGE:n.push(yield Qo(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.SMART_ROLLUP_ADD_MESSAGES:n.push(yield lc(Object.assign(Object.assign({},c),Jt(c,s))));break;default:throw new qi(e.kind)}n=(yield this.isRevealOpNeeded(n,r))?yield this.addRevealOp(n,r):n;const a=yield this.prepareEstimate({operation:n,source:r},i,r);return gr.createArrayEstimateInstancesFromProperties(a)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=(yield this.getKeys()).publicKeyHash,n=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.getAccountLimits(r,n),s=yield _2(Object.assign(Object.assign({},e),i),r),o=yield this.isRevealOpNeeded([s],r),a=o?yield this.addRevealOp([s],r):s,c=yield this.prepareEstimate({operation:a,source:r},n,r);return o&&c.shift(),gr.createEstimateInstanceFromProperties(c)})}reveal(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:n}=yield this.getKeys();if(!n)throw new lg;if(yield this.isAccountRevealRequired(r)){const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i),o=yield xs(Object.assign(Object.assign({},e),s),r,n),a=yield this.prepareEstimate({operation:o,source:r},i,r);return gr.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield ac(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Qo(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){e=e||{};const{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield cc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield fc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield F0(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}smartRollupAddMessages(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=mn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield lc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),gr.createEstimateInstanceFromProperties(I)})}addRevealOp(e,r){return J(this,void 0,void 0,function*(){const{publicKey:n}=yield this.getKeys();if(!n)throw new lg;return e.unshift(yield xs(Object.assign({fee:ws.REVEAL,gasLimit:_s.REVEAL,storageLimit:As.REVEAL}),r,yield this.signer.publicKey())),e})}}class dg extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="delegation"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class y7 extends Sr{constructor(e,r,n,i,s,o){super(e,n,i,s),this.params=r,this.contractProvider=o;const a=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(a)&&(this.contractAddress=a[0])}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="origination"),r=e&&ha(e)&&e.metadata.operation_result;return r||void 0}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,r){return J(this,void 0,void 0,function*(){if(!this.contractAddress)throw new Z9("No contract was originated in this operation");return yield this.confirmation(e,r),this.contractProvider.at(this.contractAddress)})}}class E7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="register_global_constant"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get registeredExpression(){return this.params.value}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class _7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get publicKey(){return this.params.public_key}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ii({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ii({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(ii({contents:this.operationResults}),"storage_size"))}get errors(){return Zo({contents:this.operationResults})}}class w7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new be(this.params.amount)}get destination(){return this.params.destination}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ii({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ii({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(ii({contents:this.operationResults}),"storage_size"))}get errors(){return Zo({contents:this.operationResults})}}class A7{constructor(e,r,n,i,s,o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}validateArgs(e,r,n){const i=r.ExtractSignatures();if(!i.find(s=>s.length===e.length))throw new m2(n,i,e)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const e=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(e)return e.shift(),e}else{const e=this.parameterSchema.ExtractSignatures();return e.length==1?e[0]:e}}send(e={}){return this.provider instanceof $u?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Io,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class x7{constructor(e,r){this.id=e,this.provider=r}getSaplingDiff(e){return J(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}class S7{constructor(e,r){this.walletProvider=e,this.context=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:oe.TRANSACTION},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:oe.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:oe.ORIGINATION},e)),this}withIncreasePaidStorage(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination);return this.operations.push(Object.assign({kind:oe.INCREASE_PAID_STORAGE},e)),this}mapOperation(e){return J(this,void 0,void 0,function*(){switch(e.kind){case oe.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case oe.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case oe.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case oe.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e}));default:throw new qi(e.kind)}})}with(e){for(const r of e)switch(r.kind){case oe.TRANSACTION:this.withTransfer(r);break;case oe.ORIGINATION:this.withOrigination(r);break;case oe.DELEGATION:this.withDelegation(r);break;case oe.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;default:throw new qi(r.kind)}return this}send(){return J(this,void 0,void 0,function*(){const e=[];for(const n of this.operations)e.push(yield this.mapOperation(n));const r=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(r)})}}class $u{constructor(e){this.context=e,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:e}={}){return J(this,void 0,void 0,function*(){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(e){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(n)}))}setDelegate(e){if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createDelegationOperation(n)}))}registerDelegate(){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createTransactionOperation(n)}))}increasePaidStorage(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}batch(e){const r=new S7(this.walletProvider,this.context);return Array.isArray(e)&&r.with(e),r}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(Lo(e)!==_e.VALID)throw new Mo(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new O2(e,s,this,this.context.contract,o,n,i);return r(a,this.context)})}}class T2{constructor(e){this.context=e}getPKH(){return J(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.INCREASE_PAID_STORAGE)})}sendOperations(e){return J(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}}class R7{constructor(e,r,n,i,s="unit",o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(e={}){return this.provider instanceof $u?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Io,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class I7{constructor(e,r,n,i,s,o="Unit"){this._rpc=e,this._readProvider=r,this._contractAddress=n,this._smartContractViewSchema=i,this._contractStorageType=s,this._args=o}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return J(this,void 0,void 0,function*(){this.verifyContextExecution(e);const r=yield this._readProvider.getChainId(),n=this.transformArgsToMichelson(),i={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:n,chain_id:r,source:e.viewCaller};return e.source&&(i.payer=e.source),this.executeViewAndDecodeResult(i)})}verifyContextExecution(e){if(e.source&&ct(e.source)!==_e.VALID)throw new cg(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||ct(e.viewCaller)!==_e.VALID)throw new cg(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new G9(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,r,n){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:n}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((s,o)=>{s.prim in i&&(e[o]=Object(i)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,n):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,n)}),e}executeViewAndDecodeResult(e){return J(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runScriptView(e)).data}catch(n){const i=q9(n);throw i?new V9(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(i)}`,this._smartContractViewSchema.viewName,i,n):n}return this._smartContractViewSchema.decodeViewResult(r)})}}class T7{constructor(e,r){this.provider=e,this.contractAddress=r}createContractMethodFlatParams(e,r,n,i=!0,s=!1){return new A7(this.provider,this.contractAddress,e,r,n,i,s)}createContractMethodObjectParam(e,r,n,i=!0,s=!1){return new R7(this.provider,this.contractAddress,e,r,n,i,s)}createContractViewObjectParam(e,r,n,i,s){return new I7(e,r,this.contractAddress,n,i,s)}}const Io="default";class O7{constructor(e,r,n,i,s,o,a){this.currentContract=e,this.name=r,this.callbackParametersSchema=n,this.parameterSchema=i,this.args=s,this.rpc=o,this.readProvider=a}read(e){return J(this,void 0,void 0,function*(){if(Lo(e??"")==_e.VALID)throw new i0("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&bm(e)!==_e.VALID)throw new FA(e);const r=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const P7=(t,e,r)=>{const n=e.ExtractSignatures();if(!n.find(i=>i.length===t.length))throw new m2(r,n,t)},N7=t=>{let e=!1;if("prim"in t&&t.prim==="pair"&&t.args){const r=t.args[t.args.length-1];"prim"in r&&r.prim==="contract"&&(e=!0)}return e};class O2{constructor(e,r,n,i,s,o,a){this.address=e,this.script=r,this.storageProvider=i,this.entrypoints=s,this.rpc=o,this.readProvider=a,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new T7(n,e),this.schema=$r.fromRPCResponse({script:this.script}),this.parameterSchema=So.fromRPCResponse({script:this.script}),this.viewSchema=g0.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,o,this.readProvider,this.viewSchema),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,r,n,i){const s=this.parameterSchema,o=Object.keys(r);if(s.isMultipleEntryPoint)o.forEach(c=>{const l=new So(r[c]);if(this.methods[c]=function(...f){return e.contractMethodFactory.createContractMethodFlatParams(l,c,f)},this.methodsObject[c]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(l,c,f)},N7(r[c])){const f=function(...d){const I=r[c].args[0],P=new So(I),L=r[c].args[1].args[0],H=new So(L);return P7(d,P,c),new O7(e,c,H,P,d,n,i)};this.views[c]=f}}),Object.keys(s.ExtractSchema()).filter(c=>Object.keys(r).indexOf(c)===-1).forEach(c=>{this.methods[c]=function(...l){return e.contractMethodFactory.createContractMethodFlatParams(s,c,l,!1,!0)},this.methodsObject[c]=function(l){return e.contractMethodFactory.createContractMethodObjectParam(s,c,l,!1,!0)}});else{const a=this.parameterSchema;this.methods[Io]=function(...c){return e.contractMethodFactory.createContractMethodFlatParams(a,Io,c,!1)},this.methodsObject[Io]=function(c){return e.contractMethodFactory.createContractMethodObjectParam(a,Io,c,!1)}}}_initializeOnChainViews(e,r,n,i){const s=this.schema.val;i.forEach(o=>{this.contractViews[o.viewName]=function(a){return e.contractMethodFactory.createContractViewObjectParam(r,n,o,s,a)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(e){return this.storageProvider.getBigMapKey(this.address,e,this.schema)}}class M7{constructor(e,r,n){this.id=e,this.schema=r,this.provider=n}get(e,r){return J(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,r)}catch(n){if(n instanceof ra&&n.status===Ya.NOT_FOUND)return;throw n}})}getMultipleValues(e,r,n=5){return J(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),e,this.schema,r,n)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const hg=t=>({big_map:(e,r)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const n=new $r(r);return new M7(new be(e.int),n,t)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new x7(new be(e.int),t)});class L7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.originatedRollup=this.operationResults&&this.operationResults.originated_rollup}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_origination"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class C7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_submit_batch"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get content(){return this.params.content}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class B7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="ballot");return r||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class k7 extends Sr{constructor(e,r,n,i,s){super(e,n,i,s),this.params=r}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="drain_delegate"),r=e&&e.metadata&&e.metadata.balance_updates;return r||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class D7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind===oe.TRANSFER_TICKET),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class U7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="increase_paid_storage"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class K7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="proposals");return r||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class H7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="update_consensus_key"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get pk(){return this.params.pk}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class F7 extends Sr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="smart_rollup_add_messages"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get message(){return this.params.message}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class j7 extends qu{constructor(e,r){super(e),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol")}getStorage(e,r){return J(this,void 0,void 0,function*(){if(Lo(e)!==_e.VALID)throw new Mo(e);const n=yield this.context.readProvider.getScript(e,"head");r||(r=n);let i;return $r.isSchema(r)?i=r:i=$r.fromRPCResponse({script:r}),i.Execute(n.storage,hg(this))})}getBigMapKey(e,r,n){return J(this,void 0,void 0,function*(){if(Lo(e)!==_e.VALID)throw new Mo(e);n||(n=(yield this.rpc.getContract(e)).script);let i;$r.isSchema(n)?i=n:i=$r.fromRPCResponse({script:n});const s=i.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(e,s);return i.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(e,r,n,i){return J(this,void 0,void 0,function*(){const{key:s,type:o}=n.EncodeBigMapKey(r),{packed:a}=yield this.context.packer.packData({data:s,type:o}),c=ZA(a),l=i?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},i):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},"head");return n.ExecuteOnBigMapValue(l,hg(this))})}getBigMapKeysByID(e,r,n,i,s=5){return J(this,void 0,void 0,function*(){const o=yield this.getBlockForRequest(r,i),a=new qr;let c=0,l=[];for(;c<r.length;){const d=r.slice(c,c+s).map(I=>this.getBigMapValueOrUndefined(I,e,n,o));l=[...l,...yield Promise.all(d)],c+=s}for(let f=0;f<l.length;f++)a.set(r[f],l[f]);return a})}getBlockForRequest(e,r){return J(this,void 0,void 0,function*(){return e.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,r,n,i){return J(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,e,n,i)}catch(s){if(s instanceof ra&&s.status===Ya.NOT_FOUND)return;throw s}})}getSaplingDiffByID(e,r){return J(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(zf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimator.reveal();if(s){const o={kind:oe.REVEAL},a=yield this.estimate(o,()=>J(this,void 0,void 0,function*(){return s}));return n.unshift(yield xs(Object.assign({},a),r,i)),n}}return e})}originate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield Xo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),r))),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s,source:n}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new y7(c,i,f,d,l,this)})}setDelegate(e){return J(this,void 0,void 0,function*(){if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);if(/kt1/i.test(e.source))throw new j9(e.source);const r=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield Yo(Object.assign(Object.assign({},e),r)),s=e.source||n,o=yield this.addRevealOperationIfNeeded(i,n),a=yield this.prepareOperation({operation:o,source:s}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:I}=yield this.signAndInject(c);return new dg(l,i,s,d,I,f)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield _2(Object.assign(Object.assign({},e),r),n),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new dg(c,i,n,f,d,l)})}transfer(e){return J(this,void 0,void 0,function*(){if(ct(e.to)!==_e.VALID)throw new ft(e.to);if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),i=yield Jo(Object.assign(Object.assign({},e),n)),s=e.source||r,o=yield this.addRevealOperationIfNeeded(i,r),a=yield this.prepareOperation({operation:o,source:e.source}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:I}=yield this.signAndInject(c);return new w7(l,i,s,d,I,f)})}transferTicket(e){var r;return J(this,void 0,void 0,function*(){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination,"param destination");if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source,"param source");const n=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),s=yield uc(Object.assign(Object.assign({},e),i)),o=(r=e.source)!==null&&r!==void 0?r:n,a=yield this.addRevealOperationIfNeeded(s,n),c=yield this.prepareOperation({operation:a,source:e.source}),l=yield this.forge(c),{hash:f,context:d,forgedBytes:I,opResponse:P}=yield this.signAndInject(l);return new D7(f,s,o,I,P,d)})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimator.reveal(e);if(n){const i=yield this.estimate(e,()=>J(this,void 0,void 0,function*(){return n})),s=yield xs(Object.assign({},i),r,yield this.signer.publicKey()),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new _7(c,s,r,f,d,l)}else throw new E2(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),i=yield ac(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new E7(c,i,r,f,d,l)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),i=yield Qo(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new U7(c,i,r,f,d,l)})}drainDelegate(e){return J(this,void 0,void 0,function*(){const r=yield w2(Object.assign({},e)),n=yield this.prepareOperation({operation:r}),i=yield this.forge(n),{hash:s,context:o,forgedBytes:a,opResponse:c}=yield this.signAndInject(i);return new k7(s,r,a,c,o)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e||{},this.estimator.txRollupOriginate.bind(this.estimator)),i=yield cc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new L7(c,i,r,f,d,l)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.txRollupSubmitBatch.bind(this.estimator)),i=yield fc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new C7(c,i,r,f,d,l)})}ballot(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield A2(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new B7(c,s,n,f,d,l)})}proposals(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield x2(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new K7(c,s,n,f,d,l)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),i=yield F0(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new H7(c,i,r,f,d,l)})}smartRollupAddMessages(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.smartRollupAddMessages.bind(this.estimator)),i=yield lc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new F7(c,i,r,f,d,l)})}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(Lo(e)!==_e.VALID)throw new Mo(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new O2(e,s,this,this,o,n,i);return r(a,this.context)})}batch(e){const r=new G0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class P2{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return J(this,void 0,void 0,function*(){return new Gs({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return J(this,void 0,void 0,function*(){return new Gs({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return J(this,void 0,void 0,function*(){return new Gs({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return J(this,void 0,void 0,function*(){const r=e;if(r.code=yield this.formatCodeParam(e.code),e.init)r.init=yield this.formatInitParam(e.init);else if(e.storage){const n=r.code.find(o=>"prim"in o&&o.prim==="storage");if(!n?.args)throw new $f("The storage section is missing from the script",e.code);const i=new $r(n.args[0]),s=yield this.findGlobalConstantsHashAndValue(i);if(Object.keys(s).length!==0){const a=new Gs({expandGlobalConstant:s}).parseJSON(n.args[0]),c=new $r(a);r.init=c.Encode(e.storage)}else r.init=i.Encode(e.storage);delete r.storage}return r})}formatCodeParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseScript(e);if(n===null)throw new $f("Invalid code parameter",e);r=n}else{const n=yield this.parseJSON(e),i=["parameter","storage","code"];r=n.sort((s,o)=>i.indexOf(s.prim)-i.indexOf(o.prim))}return r})}formatInitParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseMichelineExpression(e);if(n===null)throw new y2("Invalid init parameter",e);r=n}else r=yield this.parseJSON(e);return r})}findGlobalConstantsHashAndValue(e){return J(this,void 0,void 0,function*(){const r=e.findToken("constant"),n={};if(r.length!==0)for(const i of r){const s=i.tokenVal.args;if(s){const o=s[0];if(o.string){const a=o.string,c=yield this.context.globalConstantsProvider.getGlobalConstantByHash(a);Object.assign(n,{[a]:c})}}}return n})}}class N2{constructor(e){this.context=e}packData(e){return J(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class G7 extends Error{constructor(){super("No {} constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class M2{getGlobalConstantByHash(e){return J(this,void 0,void 0,function*(){throw new G7})}}class L2{constructor(e){this.rpc=e}getBalance(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(r)})})}getDelegate(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(r)})})}getNextProtocol(e){return J(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return J(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}})}getScript(e,r){return J(this,void 0,void 0,function*(){const{script:n}=yield this.rpc.getContract(e,{block:String(r)});return n})}getStorage(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(r)})})}getBlockHash(e){return J(this,void 0,void 0,function*(){const{hash:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBlockLevel(e){return J(this,void 0,void 0,function*(){const{level:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getCounter(e,r){return J(this,void 0,void 0,function*(){const{counter:n}=yield this.rpc.getContract(e,{block:String(r)});return n||"0"})}getBlockTimestamp(e){return J(this,void 0,void 0,function*(){const{timestamp:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBigMapValue(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(r)})})}getSaplingDiffById(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(r)})})}getSaplingDiffByContract(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(r)})})}getEntrypoints(e){return J(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return J(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,r){return J(this,void 0,void 0,function*(){const n=yield this.rpc.getManagerKey(e,{block:String(r)});return n&&typeof n=="object"?!!n.key:!!n})}getBlock(e){return J(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}}const V7=(t,e)=>t.hash===e.opHash,q7=(t,e)=>{switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}},$7=(t,e)=>"kind"in t&&t.kind===e.kind,z7=(t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some(r=>r===e.destination);break;case"transaction":return t.destination===e.destination;default:return!1}},W7=(t,e,r)=>t.kind==="event"?e&&r?t.source===e&&t.tag===r:e&&!r?t.source===e:r?t.tag===r:!0:!1,X7=(t,e)=>"opHash"in e?V7(t,e):"source"in e?q7(t,e):"kind"in e?$7(t,e):"destination"in e?z7(t,e):!1,J7=(t,e)=>{if(Array.isArray(e.and))return e.and.every(r=>_h(t,r));if(Array.isArray(e.or))return e.or.some(r=>_h(t,r));throw new t7("Filter expression must contain either and/or property")},_h=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every(n=>"and"in n||"or"in n?J7(t,n):X7(t,n))};class pg extends Error{constructor(e){super(e),this.message=e,this.name="UnsupportedEventError"}}class Zc{constructor(e,r=!1,n=Cm()){this.shouldRetry=r,this.operatorFunction=n,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new Vo,e.pipe(Rx(this.completed$),Hf(i=>{this.call(this.messageListeners,i)},i=>{this.call(this.errorListeners,i)},()=>{this.call(this.closeListeners)}),this.shouldRetry?n:Hf(),p0(()=>J8)).subscribe()}call(e,r){for(const n of e)try{n(r)}catch(i){console.error(i)}}remove(e,r){const n=e.indexOf(r);n!==-1&&e.splice(n,1)}on(e,r){switch(e){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new pg(`Trying to register on an unsupported event: ${e}`)}}off(e,r){switch(e){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new pg(`Trying to unregister on an unsupported event: ${e}`)}}close(){this.completed$.next()}}const Y7={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:Cm()},Q7=t=>ao(t.rpc.getBlock()).pipe(Mi()),Z7=t=>Pc(e=>new Rt(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents)_h(Object.assign({hash:i.hash},s),t)&&r.next(Object.assign({hash:i.hash},s));r.complete()})),eI=t=>Pc(e=>new Rt(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents){const a=s.metadata.internal_operation_results;if(a)for(const c of a)W7(c,t?.address,t?.tag)&&r.next(Object.assign({opHash:i.hash,blockHash:e.hash,level:e.header.level},c))}r.complete()}));class wh{constructor(e,r={}){this.context=e,this._config$=new Hu(Object.assign(Object.assign({},Y7),r)),this.timer$=this._config$.pipe(L1("pollingIntervalMilliseconds"),Zn(n=>n?M1(0,n):ao(this.getConfirmationPollingInterval()).pipe(Zn(i=>M1(0,i))))),this.newBlock$=this.timer$.pipe(Zn(()=>Q7(this.context)),fx("hash"),yx(),nc())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return J(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const n=yield this.context.readProvider.getProtocolConstants("head"),s=(n.minimal_block_delay?n.minimal_block_delay.multipliedBy(1e3):n.time_between_blocks?n.time_between_blocks[0].multipliedBy(1e3):new be(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new Zc(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new Zc(this.newBlock$.pipe(L1("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new Zc(this.newBlock$.pipe(Z7(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new Zc(this.newBlock$.pipe(eI(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class C2{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge({branch:e,contents:r}){return J(this,void 0,void 0,function*(){return new b2(yield this.getNextProto()).forge({branch:e,contents:r})})}}var Ks;class tI{constructor(e){this.context=e,Ks.set(this,void 0),U9(this,Ks,{})}get rpc(){return this.context.rpc}get signer(){return this.context.signer}get estimate(){return this.context.estimate}get parser(){return this.context.parser}getPkh(){return J(this,void 0,void 0,function*(){return yield this.context.signer.publicKeyHash()})}getBlockHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash("head~2")})}getProtocolHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){var r;return J(this,void 0,void 0,function*(){return(r=this.context.readProvider.getCounter(e,"head"))!==null&&r!==void 0?r:"0"})}getFee(e,r,n){return(!Xc(this,Ks)[r]||Xc(this,Ks)[r]<n)&&(Xc(this,Ks)[r]=n),{counter:`${++Xc(this,Ks)[r]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,r,n){return{source:typeof e.source>"u"?n||r:e.source}}buildEstimates(e){return{fee:e.suggestedFeeMutez,gasLimit:e.gasLimit,storageLimit:e.storageLimit}}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(zf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimate.reveal();if(s){const o=this.buildEstimates(s);return n.unshift(yield xs(Object.assign({},o),r,i)),n}}return e})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,r,n,i,s){return e.map(o=>{switch(o.kind){case oe.ACTIVATION:case oe.DRAIN_DELEGATE:return Object.assign({},o);case oe.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{balance:typeof o.balance<"u"?`${o.balance}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.TRANSACTION:{const a=Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:typeof o.amount<"u"?`${o.amount}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));if(a.source.toLowerCase().startsWith("kt1"))throw new i0(`KT1 addresses are not supported as source since ${Kt.PsBabyM1}`);return a}case oe.REVEAL:case oe.DELEGATION:case oe.REGISTER_GLOBAL_CONSTANT:case oe.TX_ROLLUP_ORIGINATION:case oe.TX_ROLLUP_SUBMIT_BATCH:case oe.UPDATE_CONSENSUS_KEY:case oe.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},o),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{ticket_amount:`${o.ticket_amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:`${o.amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.BALLOT:if(s===void 0)throw new Vs("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s?.voting_period.index});case oe.PROPOSALS:if(s===void 0)throw new Vs("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s?.voting_period.index});default:throw new qi(o.kind)}})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate.reveal(e);if(n){const i=this.buildEstimates(n),s=yield xs(Object.assign({},i),r,yield this.signer.publicKey()),o=this.convertIntoArray(s),a=yield this.getBlockHash(),c=yield this.getProtocolHash(),l=parseInt(yield this.getHeadCounter(r),10),f=this.constructOpContents(o,l,r);return{opOb:{branch:a,contents:f,protocol:c},counter:l}}else throw new E2(`The publicKeyHash '${r}' has already been revealed.`)})}originate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.originate(e),s=this.buildEstimates(i),o=yield Xo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),s))),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}transaction(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transfer(e),s=this.buildEstimates(i),o=yield Jo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}delegation(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.setDelegate(e),s=this.buildEstimates(i),o=yield Yo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}registerGlobalConstant(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.registerGlobalConstant(e),s=this.buildEstimates(i),o=yield ac(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}txRollupOrigination(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupOriginate(e),s=this.buildEstimates(i),o=yield cc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}txRollupSubmitBatch(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupSubmitBatch(e),s=this.buildEstimates(i),o=yield fc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}updateConsensusKey(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.updateConsensusKey(e),s=this.buildEstimates(i),o=yield F0(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}increasePaidStorage(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.increasePaidStorage(e),s=this.buildEstimates(i),o=yield Qo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}ballot(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield A2(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new Vs("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}proposals(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield x2(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new Vs("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}drainDelegate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield w2(Object.assign({},e)),s=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash(),c=parseInt(yield this.getHeadCounter(n),10),l=this.constructOpContents(s,c,n,r);return{opOb:{branch:o,contents:l,protocol:a},counter:c}})}transferTicket(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transferTicket(e),s=this.buildEstimates(i),o=yield uc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}smartRollupAddMessages(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.smartRollupAddMessages(e),s=this.buildEstimates(i),o=yield lc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}batch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=new G0(this.context,this.estimate);Array.isArray(e)&&n.with(e);const i=yield n.toPrepare(),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10),c=this.constructOpContents(i,a,r);return{opOb:{branch:s,contents:c,protocol:o},counter:a}})}contractCall(e){var r,n,i;return J(this,void 0,void 0,function*(){const s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=yield this.signer.publicKeyHash(),c=parseInt(yield this.getHeadCounter(a),10),l=e.toTransferParams(),f=yield this.estimate.transfer(l),d=[{kind:oe.TRANSACTION,fee:(r=l.fee)!==null&&r!==void 0?r:f.suggestedFeeMutez,gas_limit:(n=l.gasLimit)!==null&&n!==void 0?n:f.gasLimit,storage_limit:(i=l.storageLimit)!==null&&i!==void 0?i:f.storageLimit,amount:String(l.amount),destination:l.to}],I=this.constructOpContents(d,c,a);return{opOb:{branch:s,contents:I,protocol:o},counter:c}})}}Ks=new WeakMap;const rI={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class Wf{constructor(e,r=new yh,n,i=new Hu(Object.assign({},rI)),s,o,a,c,l,f,d,I){this._rpc=e,this._signer=r,this._proto=n,this._config=i,this.providerDecorator=[],this.tz=new p7(this),this.estimate=new m7(this),this.contract=new j7(this,this.estimate),this.prepare=new tI(this),this.batch=new n7(this,this.estimate),this.wallet=new $u(this),this.withExtensions=()=>{let P=this.clone();return this.providerDecorator.forEach(L=>{P=L(P)}),P},typeof this._rpc=="string"?this._rpcClient=new yf(this._rpc):this._rpcClient=this._rpc,this._forger=s||new C2(this),this._injector=o||new H9(this),this.operationFactory=new h7(this),this._walletProvider=c||new T2(this),this._parser=l||new P2(this),this._packer=a||new N2(this),this._globalConstantsProvider=f||new M2,this._readProvider=d||new L2(this._rpcClient),this._stream=I||new wh(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(e=[]){return J(this,void 0,void 0,function*(){if(this._proto)return e.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return e.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof yh)}clone(){return new Wf(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const nI={commitHash:"c050a62135022aa2e61ba6ef72a98f9c89f1682c",version:"16.0.1"};class iI{constructor(e){this._rpc=e,this._options={},this.format=o0,typeof this._rpc=="string"?this._rpcClient=new yf(this._rpc):this._rpcClient=this._rpc,this._context=new Wf(e),this._wallet=new $u(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:e,stream:r,signer:n,protocol:i,config:s,forger:o,wallet:a,packer:c,globalConstantsProvider:l,readProvider:f,parserProvider:d}){this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(o),this.setWalletProvider(a),this.setPackerProvider(c),this.setGlobalConstantsProvider(l),this.setReadProvider(f),this.setParserProvider(d),this._context.proto=i,s&&this._context.setPartialConfig(s)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new yh,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new yf(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const r=this.getFactory(C2)();this._options.forger=r,this._context.forger=r}}setStreamProvider(e){if(typeof e=="string"){const r=new wh(new Wf(new yf(e)));this._options.stream=r,this._context.stream=r}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const r=this.getFactory(wh)();this._options.stream=r,this._context.stream=r}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const r=this.getFactory(T2)();this._options.wallet=r,this._context.walletProvider=r}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const r=this.getFactory(N2)();this._context.packer=r,this._options.packer=r}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const r=new M2;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const r=e||new L2(this._context.rpc);this._options.readProvider=r,this._context.readProvider=r}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const r=new P2(this._context);this._context.parser=r,this._options.parserProvider=r}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(r=>r.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...r)=>new e(this._context,...r)}getVersionInfo(){return nI}}function V0(t){return Object.keys(t)}var Jn;(function(t){t.PENDING="pending",t.RESOLVED="resolved",t.REJECTED="rejected"})(Jn||(Jn={}));const gg=()=>{throw new Error("ExposedPromise not initialized yet.")};class Zt{constructor(){this._resolve=gg,this._reject=gg,this._status=Jn.PENDING,this._promise=new Promise((e,r)=>{this._resolve=n=>{this.isSettled()||(this._promiseResult=n,e(n),this._status=Jn.RESOLVED)},this._reject=n=>{this.isSettled()||(this._promiseError=n,r(n),this._status=Jn.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const r=new Zt;return r.resolve(e),r}static reject(e){const r=new Zt;return r.reject(e),r}isPending(){return this.status===Jn.PENDING}isResolved(){return this.status===Jn.RESOLVED}isRejected(){return this.status===Jn.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var ea={},B2={},dc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=ro,r=Ur;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(U){const F=new Float64Array(16);if(U)for(let j=0;j<U.length;j++)F[j]=U[j];return F}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(U){let F=1;for(let j=0;j<16;j++){let E=U[j]+F+65535;F=Math.floor(E/65536),U[j]=E-F*65536}U[0]+=F-1+37*(F-1)}function a(U,F,j){const E=~(j-1);for(let _=0;_<16;_++){const O=E&(U[_]^F[_]);U[_]^=O,F[_]^=O}}function c(U,F){const j=n(),E=n();for(let _=0;_<16;_++)E[_]=F[_];o(E),o(E),o(E);for(let _=0;_<2;_++){j[0]=E[0]-65517;for(let x=1;x<15;x++)j[x]=E[x]-65535-(j[x-1]>>16&1),j[x-1]&=65535;j[15]=E[15]-32767-(j[14]>>16&1);const O=j[15]>>16&1;j[14]&=65535,a(E,j,1-O)}for(let _=0;_<16;_++)U[2*_]=E[_]&255,U[2*_+1]=E[_]>>8}function l(U,F){for(let j=0;j<16;j++)U[j]=F[2*j]+(F[2*j+1]<<8);U[15]&=32767}function f(U,F,j){for(let E=0;E<16;E++)U[E]=F[E]+j[E]}function d(U,F,j){for(let E=0;E<16;E++)U[E]=F[E]-j[E]}function I(U,F,j){let E,_,O=0,x=0,y=0,u=0,p=0,b=0,g=0,h=0,S=0,T=0,w=0,v=0,N=0,ee=0,Y=0,ne=0,se=0,ae=0,W=0,K=0,k=0,m=0,B=0,X=0,Z=0,ce=0,ie=0,de=0,ye=0,ue=0,Ee=0,xe=j[0],me=j[1],ge=j[2],Oe=j[3],ve=j[4],he=j[5],Ne=j[6],M=j[7],A=j[8],R=j[9],D=j[10],$=j[11],Q=j[12],te=j[13],le=j[14],Ae=j[15];E=F[0],O+=E*xe,x+=E*me,y+=E*ge,u+=E*Oe,p+=E*ve,b+=E*he,g+=E*Ne,h+=E*M,S+=E*A,T+=E*R,w+=E*D,v+=E*$,N+=E*Q,ee+=E*te,Y+=E*le,ne+=E*Ae,E=F[1],x+=E*xe,y+=E*me,u+=E*ge,p+=E*Oe,b+=E*ve,g+=E*he,h+=E*Ne,S+=E*M,T+=E*A,w+=E*R,v+=E*D,N+=E*$,ee+=E*Q,Y+=E*te,ne+=E*le,se+=E*Ae,E=F[2],y+=E*xe,u+=E*me,p+=E*ge,b+=E*Oe,g+=E*ve,h+=E*he,S+=E*Ne,T+=E*M,w+=E*A,v+=E*R,N+=E*D,ee+=E*$,Y+=E*Q,ne+=E*te,se+=E*le,ae+=E*Ae,E=F[3],u+=E*xe,p+=E*me,b+=E*ge,g+=E*Oe,h+=E*ve,S+=E*he,T+=E*Ne,w+=E*M,v+=E*A,N+=E*R,ee+=E*D,Y+=E*$,ne+=E*Q,se+=E*te,ae+=E*le,W+=E*Ae,E=F[4],p+=E*xe,b+=E*me,g+=E*ge,h+=E*Oe,S+=E*ve,T+=E*he,w+=E*Ne,v+=E*M,N+=E*A,ee+=E*R,Y+=E*D,ne+=E*$,se+=E*Q,ae+=E*te,W+=E*le,K+=E*Ae,E=F[5],b+=E*xe,g+=E*me,h+=E*ge,S+=E*Oe,T+=E*ve,w+=E*he,v+=E*Ne,N+=E*M,ee+=E*A,Y+=E*R,ne+=E*D,se+=E*$,ae+=E*Q,W+=E*te,K+=E*le,k+=E*Ae,E=F[6],g+=E*xe,h+=E*me,S+=E*ge,T+=E*Oe,w+=E*ve,v+=E*he,N+=E*Ne,ee+=E*M,Y+=E*A,ne+=E*R,se+=E*D,ae+=E*$,W+=E*Q,K+=E*te,k+=E*le,m+=E*Ae,E=F[7],h+=E*xe,S+=E*me,T+=E*ge,w+=E*Oe,v+=E*ve,N+=E*he,ee+=E*Ne,Y+=E*M,ne+=E*A,se+=E*R,ae+=E*D,W+=E*$,K+=E*Q,k+=E*te,m+=E*le,B+=E*Ae,E=F[8],S+=E*xe,T+=E*me,w+=E*ge,v+=E*Oe,N+=E*ve,ee+=E*he,Y+=E*Ne,ne+=E*M,se+=E*A,ae+=E*R,W+=E*D,K+=E*$,k+=E*Q,m+=E*te,B+=E*le,X+=E*Ae,E=F[9],T+=E*xe,w+=E*me,v+=E*ge,N+=E*Oe,ee+=E*ve,Y+=E*he,ne+=E*Ne,se+=E*M,ae+=E*A,W+=E*R,K+=E*D,k+=E*$,m+=E*Q,B+=E*te,X+=E*le,Z+=E*Ae,E=F[10],w+=E*xe,v+=E*me,N+=E*ge,ee+=E*Oe,Y+=E*ve,ne+=E*he,se+=E*Ne,ae+=E*M,W+=E*A,K+=E*R,k+=E*D,m+=E*$,B+=E*Q,X+=E*te,Z+=E*le,ce+=E*Ae,E=F[11],v+=E*xe,N+=E*me,ee+=E*ge,Y+=E*Oe,ne+=E*ve,se+=E*he,ae+=E*Ne,W+=E*M,K+=E*A,k+=E*R,m+=E*D,B+=E*$,X+=E*Q,Z+=E*te,ce+=E*le,ie+=E*Ae,E=F[12],N+=E*xe,ee+=E*me,Y+=E*ge,ne+=E*Oe,se+=E*ve,ae+=E*he,W+=E*Ne,K+=E*M,k+=E*A,m+=E*R,B+=E*D,X+=E*$,Z+=E*Q,ce+=E*te,ie+=E*le,de+=E*Ae,E=F[13],ee+=E*xe,Y+=E*me,ne+=E*ge,se+=E*Oe,ae+=E*ve,W+=E*he,K+=E*Ne,k+=E*M,m+=E*A,B+=E*R,X+=E*D,Z+=E*$,ce+=E*Q,ie+=E*te,de+=E*le,ye+=E*Ae,E=F[14],Y+=E*xe,ne+=E*me,se+=E*ge,ae+=E*Oe,W+=E*ve,K+=E*he,k+=E*Ne,m+=E*M,B+=E*A,X+=E*R,Z+=E*D,ce+=E*$,ie+=E*Q,de+=E*te,ye+=E*le,ue+=E*Ae,E=F[15],ne+=E*xe,se+=E*me,ae+=E*ge,W+=E*Oe,K+=E*ve,k+=E*he,m+=E*Ne,B+=E*M,X+=E*A,Z+=E*R,ce+=E*D,ie+=E*$,de+=E*Q,ye+=E*te,ue+=E*le,Ee+=E*Ae,O+=38*se,x+=38*ae,y+=38*W,u+=38*K,p+=38*k,b+=38*m,g+=38*B,h+=38*X,S+=38*Z,T+=38*ce,w+=38*ie,v+=38*de,N+=38*ye,ee+=38*ue,Y+=38*Ee,_=1,E=O+_+65535,_=Math.floor(E/65536),O=E-_*65536,E=x+_+65535,_=Math.floor(E/65536),x=E-_*65536,E=y+_+65535,_=Math.floor(E/65536),y=E-_*65536,E=u+_+65535,_=Math.floor(E/65536),u=E-_*65536,E=p+_+65535,_=Math.floor(E/65536),p=E-_*65536,E=b+_+65535,_=Math.floor(E/65536),b=E-_*65536,E=g+_+65535,_=Math.floor(E/65536),g=E-_*65536,E=h+_+65535,_=Math.floor(E/65536),h=E-_*65536,E=S+_+65535,_=Math.floor(E/65536),S=E-_*65536,E=T+_+65535,_=Math.floor(E/65536),T=E-_*65536,E=w+_+65535,_=Math.floor(E/65536),w=E-_*65536,E=v+_+65535,_=Math.floor(E/65536),v=E-_*65536,E=N+_+65535,_=Math.floor(E/65536),N=E-_*65536,E=ee+_+65535,_=Math.floor(E/65536),ee=E-_*65536,E=Y+_+65535,_=Math.floor(E/65536),Y=E-_*65536,E=ne+_+65535,_=Math.floor(E/65536),ne=E-_*65536,O+=_-1+37*(_-1),_=1,E=O+_+65535,_=Math.floor(E/65536),O=E-_*65536,E=x+_+65535,_=Math.floor(E/65536),x=E-_*65536,E=y+_+65535,_=Math.floor(E/65536),y=E-_*65536,E=u+_+65535,_=Math.floor(E/65536),u=E-_*65536,E=p+_+65535,_=Math.floor(E/65536),p=E-_*65536,E=b+_+65535,_=Math.floor(E/65536),b=E-_*65536,E=g+_+65535,_=Math.floor(E/65536),g=E-_*65536,E=h+_+65535,_=Math.floor(E/65536),h=E-_*65536,E=S+_+65535,_=Math.floor(E/65536),S=E-_*65536,E=T+_+65535,_=Math.floor(E/65536),T=E-_*65536,E=w+_+65535,_=Math.floor(E/65536),w=E-_*65536,E=v+_+65535,_=Math.floor(E/65536),v=E-_*65536,E=N+_+65535,_=Math.floor(E/65536),N=E-_*65536,E=ee+_+65535,_=Math.floor(E/65536),ee=E-_*65536,E=Y+_+65535,_=Math.floor(E/65536),Y=E-_*65536,E=ne+_+65535,_=Math.floor(E/65536),ne=E-_*65536,O+=_-1+37*(_-1),U[0]=O,U[1]=x,U[2]=y,U[3]=u,U[4]=p,U[5]=b,U[6]=g,U[7]=h,U[8]=S,U[9]=T,U[10]=w,U[11]=v,U[12]=N,U[13]=ee,U[14]=Y,U[15]=ne}function P(U,F){I(U,F,F)}function L(U,F){const j=n();for(let E=0;E<16;E++)j[E]=F[E];for(let E=253;E>=0;E--)P(j,j),E!==2&&E!==4&&I(j,j,F);for(let E=0;E<16;E++)U[E]=j[E]}function H(U,F){const j=new Uint8Array(32),E=new Float64Array(80),_=n(),O=n(),x=n(),y=n(),u=n(),p=n();for(let S=0;S<31;S++)j[S]=U[S];j[31]=U[31]&127|64,j[0]&=248,l(E,F);for(let S=0;S<16;S++)O[S]=E[S];_[0]=y[0]=1;for(let S=254;S>=0;--S){const T=j[S>>>3]>>>(S&7)&1;a(_,O,T),a(x,y,T),f(u,_,x),d(_,_,x),f(x,O,y),d(O,O,y),P(y,u),P(p,_),I(_,x,_),I(x,O,u),f(u,_,x),d(_,_,x),P(O,_),d(x,y,p),I(_,x,s),f(_,_,y),I(x,x,_),I(_,y,p),I(y,O,E),P(O,u),a(_,O,T),a(x,y,T)}for(let S=0;S<16;S++)E[S+16]=_[S],E[S+32]=x[S],E[S+48]=O[S],E[S+64]=y[S];const b=E.subarray(32),g=E.subarray(16);L(b,b),I(g,g,b);const h=new Uint8Array(32);return c(h,g),h}t.scalarMult=H;function q(U){return H(U,i)}t.scalarMultBase=q;function G(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const F=new Uint8Array(U);return{publicKey:q(F),secretKey:F}}t.generateKeyPairFromSeed=G;function C(U){const F=(0,e.randomBytes)(32,U),j=G(F);return(0,r.wipe)(F),j}t.generateKeyPair=C;function V(U,F,j=!1){if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(F.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const E=H(U,F);if(j){let _=0;for(let O=0;O<E.length;O++)_|=E[O];if(_===0)throw new Error("X25519: invalid shared key")}return E}t.sharedKey=V})(dc);var ga={},zu={};Object.defineProperty(zu,"__esModule",{value:!0});var pr=De,Ah=Ur,sI=20;function oI(t,e,r){for(var n=1634760805,i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],o=r[11]<<24|r[10]<<16|r[9]<<8|r[8],a=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,L=r[19]<<24|r[18]<<16|r[17]<<8|r[16],H=r[23]<<24|r[22]<<16|r[21]<<8|r[20],q=r[27]<<24|r[26]<<16|r[25]<<8|r[24],G=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=1797285236,V=n,U=i,F=s,j=o,E=a,_=c,O=l,x=f,y=d,u=I,p=P,b=L,g=H,h=q,S=G,T=C,w,v=0;v<sI;v+=2)w=V+g|0,E^=w<<7|w>>>32-7,w=E+V|0,y^=w<<9|w>>>32-9,w=y+E|0,g^=w<<13|w>>>32-13,w=g+y|0,V^=w<<18|w>>>32-18,w=_+U|0,u^=w<<7|w>>>32-7,w=u+_|0,h^=w<<9|w>>>32-9,w=h+u|0,U^=w<<13|w>>>32-13,w=U+h|0,_^=w<<18|w>>>32-18,w=p+O|0,S^=w<<7|w>>>32-7,w=S+p|0,F^=w<<9|w>>>32-9,w=F+S|0,O^=w<<13|w>>>32-13,w=O+F|0,p^=w<<18|w>>>32-18,w=T+b|0,j^=w<<7|w>>>32-7,w=j+T|0,x^=w<<9|w>>>32-9,w=x+j|0,b^=w<<13|w>>>32-13,w=b+x|0,T^=w<<18|w>>>32-18,w=V+j|0,U^=w<<7|w>>>32-7,w=U+V|0,F^=w<<9|w>>>32-9,w=F+U|0,j^=w<<13|w>>>32-13,w=j+F|0,V^=w<<18|w>>>32-18,w=_+E|0,O^=w<<7|w>>>32-7,w=O+_|0,x^=w<<9|w>>>32-9,w=x+O|0,E^=w<<13|w>>>32-13,w=E+x|0,_^=w<<18|w>>>32-18,w=p+u|0,b^=w<<7|w>>>32-7,w=b+p|0,y^=w<<9|w>>>32-9,w=y+b|0,u^=w<<13|w>>>32-13,w=u+y|0,p^=w<<18|w>>>32-18,w=T+S|0,g^=w<<7|w>>>32-7,w=g+T|0,h^=w<<9|w>>>32-9,w=h+g|0,S^=w<<13|w>>>32-13,w=S+h|0,T^=w<<18|w>>>32-18;pr.writeUint32LE(V+n|0,t,0),pr.writeUint32LE(U+i|0,t,4),pr.writeUint32LE(F+s|0,t,8),pr.writeUint32LE(j+o|0,t,12),pr.writeUint32LE(E+a|0,t,16),pr.writeUint32LE(_+c|0,t,20),pr.writeUint32LE(O+l|0,t,24),pr.writeUint32LE(x+f|0,t,28),pr.writeUint32LE(y+d|0,t,32),pr.writeUint32LE(u+I|0,t,36),pr.writeUint32LE(p+P|0,t,40),pr.writeUint32LE(b+L|0,t,44),pr.writeUint32LE(g+H|0,t,48),pr.writeUint32LE(h+q|0,t,52),pr.writeUint32LE(S+G|0,t,56),pr.writeUint32LE(T+C|0,t,60)}function k2(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(n.length<r.length)throw new Error("Salsa20: destination is shorter than source");var s,o;if(i===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");s=new Uint8Array(16),s.set(e),o=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");s=e,o=16-i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){oI(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];cI(s,o,s.length-o)}return Ah.wipe(a),i===0&&Ah.wipe(s),n}zu.streamXOR=k2;function aI(t,e,r,n){return n===void 0&&(n=0),Ah.wipe(r),k2(t,e,r,r,n)}zu.stream=aI;function cI(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(ga,"__esModule",{value:!0});var ts=De,fI=zu,D2=Ur;function U2(t,e,r,n,i){if(i===void 0&&(i=0),i===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var s=K2(t,e.subarray(0,16),new Uint8Array(32)),o=fI.streamXOR(s,e.subarray(16),r,n,i);return D2.wipe(s),o}ga.streamXOR=U2;function uI(t,e,r,n){return n===void 0&&(n=0),D2.wipe(r),U2(t,e,r,r,n)}ga.stream=uI;var lI=20;function K2(t,e,r){for(var n=1634760805,i=t[3]<<24|t[2]<<16|t[1]<<8|t[0],s=t[7]<<24|t[6]<<16|t[5]<<8|t[4],o=t[11]<<24|t[10]<<16|t[9]<<8|t[8],a=t[15]<<24|t[14]<<16|t[13]<<8|t[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,L=t[19]<<24|t[18]<<16|t[17]<<8|t[16],H=t[23]<<24|t[22]<<16|t[21]<<8|t[20],q=t[27]<<24|t[26]<<16|t[25]<<8|t[24],G=t[31]<<24|t[30]<<16|t[29]<<8|t[28],C=1797285236,V,U=0;U<lI;U+=2)V=n+H|0,a^=V<<7|V>>>32-7,V=a+n|0,d^=V<<9|V>>>32-9,V=d+a|0,H^=V<<13|V>>>32-13,V=H+d|0,n^=V<<18|V>>>32-18,V=c+i|0,I^=V<<7|V>>>32-7,V=I+c|0,q^=V<<9|V>>>32-9,V=q+I|0,i^=V<<13|V>>>32-13,V=i+q|0,c^=V<<18|V>>>32-18,V=P+l|0,G^=V<<7|V>>>32-7,V=G+P|0,s^=V<<9|V>>>32-9,V=s+G|0,l^=V<<13|V>>>32-13,V=l+s|0,P^=V<<18|V>>>32-18,V=C+L|0,o^=V<<7|V>>>32-7,V=o+C|0,f^=V<<9|V>>>32-9,V=f+o|0,L^=V<<13|V>>>32-13,V=L+f|0,C^=V<<18|V>>>32-18,V=n+o|0,i^=V<<7|V>>>32-7,V=i+n|0,s^=V<<9|V>>>32-9,V=s+i|0,o^=V<<13|V>>>32-13,V=o+s|0,n^=V<<18|V>>>32-18,V=c+a|0,l^=V<<7|V>>>32-7,V=l+c|0,f^=V<<9|V>>>32-9,V=f+l|0,a^=V<<13|V>>>32-13,V=a+f|0,c^=V<<18|V>>>32-18,V=P+I|0,L^=V<<7|V>>>32-7,V=L+P|0,d^=V<<9|V>>>32-9,V=d+L|0,I^=V<<13|V>>>32-13,V=I+d|0,P^=V<<18|V>>>32-18,V=C+G|0,H^=V<<7|V>>>32-7,V=H+C|0,q^=V<<9|V>>>32-9,V=q+H|0,G^=V<<13|V>>>32-13,V=G+q|0,C^=V<<18|V>>>32-18;return ts.writeUint32LE(n,r,0),ts.writeUint32LE(c,r,4),ts.writeUint32LE(P,r,8),ts.writeUint32LE(C,r,12),ts.writeUint32LE(l,r,16),ts.writeUint32LE(f,r,20),ts.writeUint32LE(d,r,24),ts.writeUint32LE(I,r,28),r}ga.hsalsa=K2;var Hi={},H2={},ba={};Object.defineProperty(ba,"__esModule",{value:!0});function dI(t,e,r){return~(t-1)&e|t-1&r}ba.select=dI;function hI(t,e){return(t|0)-(e|0)-1>>>31&1}ba.lessOrEqual=hI;function F2(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ba.compare=F2;function pI(t,e){return t.length===0||e.length===0?!1:F2(t,e)!==0}ba.equal=pI;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ba,r=Ur;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(l>>>10|f<<6)&7939;var d=a[6]|a[7]<<8;this._r[3]=(f>>>7|d<<9)&8191;var I=a[8]|a[9]<<8;this._r[4]=(d>>>4|I<<12)&255,this._r[5]=I>>>1&8190;var P=a[10]|a[11]<<8;this._r[6]=(I>>>14|P<<2)&8191;var L=a[12]|a[13]<<8;this._r[7]=(P>>>11|L<<5)&8065;var H=a[14]|a[15]<<8;this._r[8]=(L>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var f=this._fin?0:2048,d=this._h[0],I=this._h[1],P=this._h[2],L=this._h[3],H=this._h[4],q=this._h[5],G=this._h[6],C=this._h[7],V=this._h[8],U=this._h[9],F=this._r[0],j=this._r[1],E=this._r[2],_=this._r[3],O=this._r[4],x=this._r[5],y=this._r[6],u=this._r[7],p=this._r[8],b=this._r[9];l>=16;){var g=a[c+0]|a[c+1]<<8;d+=g&8191;var h=a[c+2]|a[c+3]<<8;I+=(g>>>13|h<<3)&8191;var S=a[c+4]|a[c+5]<<8;P+=(h>>>10|S<<6)&8191;var T=a[c+6]|a[c+7]<<8;L+=(S>>>7|T<<9)&8191;var w=a[c+8]|a[c+9]<<8;H+=(T>>>4|w<<12)&8191,q+=w>>>1&8191;var v=a[c+10]|a[c+11]<<8;G+=(w>>>14|v<<2)&8191;var N=a[c+12]|a[c+13]<<8;C+=(v>>>11|N<<5)&8191;var ee=a[c+14]|a[c+15]<<8;V+=(N>>>8|ee<<8)&8191,U+=ee>>>5|f;var Y=0,ne=Y;ne+=d*F,ne+=I*(5*b),ne+=P*(5*p),ne+=L*(5*u),ne+=H*(5*y),Y=ne>>>13,ne&=8191,ne+=q*(5*x),ne+=G*(5*O),ne+=C*(5*_),ne+=V*(5*E),ne+=U*(5*j),Y+=ne>>>13,ne&=8191;var se=Y;se+=d*j,se+=I*F,se+=P*(5*b),se+=L*(5*p),se+=H*(5*u),Y=se>>>13,se&=8191,se+=q*(5*y),se+=G*(5*x),se+=C*(5*O),se+=V*(5*_),se+=U*(5*E),Y+=se>>>13,se&=8191;var ae=Y;ae+=d*E,ae+=I*j,ae+=P*F,ae+=L*(5*b),ae+=H*(5*p),Y=ae>>>13,ae&=8191,ae+=q*(5*u),ae+=G*(5*y),ae+=C*(5*x),ae+=V*(5*O),ae+=U*(5*_),Y+=ae>>>13,ae&=8191;var W=Y;W+=d*_,W+=I*E,W+=P*j,W+=L*F,W+=H*(5*b),Y=W>>>13,W&=8191,W+=q*(5*p),W+=G*(5*u),W+=C*(5*y),W+=V*(5*x),W+=U*(5*O),Y+=W>>>13,W&=8191;var K=Y;K+=d*O,K+=I*_,K+=P*E,K+=L*j,K+=H*F,Y=K>>>13,K&=8191,K+=q*(5*b),K+=G*(5*p),K+=C*(5*u),K+=V*(5*y),K+=U*(5*x),Y+=K>>>13,K&=8191;var k=Y;k+=d*x,k+=I*O,k+=P*_,k+=L*E,k+=H*j,Y=k>>>13,k&=8191,k+=q*F,k+=G*(5*b),k+=C*(5*p),k+=V*(5*u),k+=U*(5*y),Y+=k>>>13,k&=8191;var m=Y;m+=d*y,m+=I*x,m+=P*O,m+=L*_,m+=H*E,Y=m>>>13,m&=8191,m+=q*j,m+=G*F,m+=C*(5*b),m+=V*(5*p),m+=U*(5*u),Y+=m>>>13,m&=8191;var B=Y;B+=d*u,B+=I*y,B+=P*x,B+=L*O,B+=H*_,Y=B>>>13,B&=8191,B+=q*E,B+=G*j,B+=C*F,B+=V*(5*b),B+=U*(5*p),Y+=B>>>13,B&=8191;var X=Y;X+=d*p,X+=I*u,X+=P*y,X+=L*x,X+=H*O,Y=X>>>13,X&=8191,X+=q*_,X+=G*E,X+=C*j,X+=V*F,X+=U*(5*b),Y+=X>>>13,X&=8191;var Z=Y;Z+=d*b,Z+=I*p,Z+=P*u,Z+=L*y,Z+=H*x,Y=Z>>>13,Z&=8191,Z+=q*O,Z+=G*_,Z+=C*E,Z+=V*j,Z+=U*F,Y+=Z>>>13,Z&=8191,Y=(Y<<2)+Y|0,Y=Y+ne|0,ne=Y&8191,Y=Y>>>13,se+=Y,d=ne,I=se,P=ae,L=W,H=K,q=k,G=m,C=B,V=X,U=Z,c+=16,l-=16}this._h[0]=d,this._h[1]=I,this._h[2]=P,this._h[3]=L,this._h[4]=H,this._h[5]=q,this._h[6]=G,this._h[7]=C,this._h[8]=V,this._h[9]=U},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),f,d,I,P;if(this._leftover){for(P=this._leftover,this._buffer[P++]=1;P<16;P++)this._buffer[P]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,P=2;P<10;P++)this._h[P]+=f,f=this._h[P]>>>13,this._h[P]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,P=1;P<10;P++)l[P]=this._h[P]+f,f=l[P]>>>13,l[P]&=8191;for(l[9]-=1<<13,d=(f^1)-1,P=0;P<10;P++)l[P]&=d;for(d=~d,P=0;P<10;P++)this._h[P]=this._h[P]&d|l[P];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,I=this._h[0]+this._pad[0],this._h[0]=I&65535,P=1;P<8;P++)I=(this._h[P]+this._pad[P]|0)+(I>>>16)|0,this._h[P]=I&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,f;if(this._leftover){f=16-this._leftover,f>l&&(f=l);for(var d=0;d<f;d++)this._buffer[this._leftover+d]=a[c+d];if(l-=f,c+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(f=l-l%16,this._blocks(a,c,f),c+=f,l-=f),l){for(var d=0;d<l;d++)this._buffer[this._leftover+d]=a[c+d];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s})(H2);Object.defineProperty(Hi,"__esModule",{value:!0});Hi.generateKey=Hi.openSecretBox=Hi.secretBox=void 0;const Xf=ga,xh=H2,ko=Ur,gI=ro;function bI(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,Xf.stream)(t,i,n,8);const s=new Uint8Array(16+r.length);for(let a=0;a<32&&a<r.length;a++)s[16+a]=r[a]^n[32+a];r.length>32&&(0,Xf.streamXOR)(t,i,r.subarray(32),s.subarray(16+32),8);const o=(0,xh.oneTimeAuth)(n.subarray(0,32),s.subarray(16));for(let a=0;a<o.length;a++)s[a]=o[a];return(0,ko.wipe)(o),(0,ko.wipe)(n),(0,ko.wipe)(i),s}Hi.secretBox=bI;function vI(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(r.length<16)throw new Error("secretBox data must be at least 16 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,Xf.stream)(t,i,n,8);const s=(0,xh.oneTimeAuth)(n.subarray(0,32),r.subarray(16));if(!(0,xh.equal)(s,r.subarray(0,16)))return null;const o=r.subarray(16),a=new Uint8Array(o.length);for(let c=0;c<32&&c<o.length;c++)a[c]=o[c]^n[32+c];return o.length>32&&(0,Xf.streamXOR)(t,i,o.subarray(32),a.subarray(32),8),(0,ko.wipe)(s),(0,ko.wipe)(n),(0,ko.wipe)(i),a}Hi.openSecretBox=vI;function mI(t){return(0,gI.randomBytes)(32,t)}Hi.generateKey=mI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.openBox=t.box=t.precomputeSharedKey=t.generateKeyPair=void 0;const e=dc,r=ga,n=Hi,i=Ur;var s=dc;Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return s.generateKeyPair}});const o=new Uint8Array(16);function a(f,d){const I=(0,e.scalarMult)(d,f);return(0,r.hsalsa)(I,o,I),I}t.precomputeSharedKey=a;function c(f,d,I,P){const L=a(f,d),H=(0,n.secretBox)(L,I,P);return(0,i.wipe)(L),H}t.box=c;function l(f,d,I,P){const L=a(f,d),H=(0,n.openSecretBox)(L,I,P);return(0,i.wipe)(L),H}t.openBox=l})(B2);(function(t){var e=Ba&&Ba.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=Ba&&Ba.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(B2,t),r(Hi,t)})(ea);var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});var bg="utf8: invalid string",bi="utf8: invalid source encoding";function yI(t){for(var e=new Uint8Array(j2(t)),r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=192|i>>6,e[r++]=128|i&63):i<55296?(e[r++]=224|i>>12,e[r++]=128|i>>6&63,e[r++]=128|i&63):(n++,i=(i&1023)<<10,i|=t.charCodeAt(n)&1023,i+=65536,e[r++]=240|i>>18,e[r++]=128|i>>12&63,e[r++]=128|i>>6&63,e[r++]=128|i&63)}return e}var Ss=Wu.encode=yI;function j2(t){for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<128)e+=1;else if(n<2048)e+=2;else if(n<55296)e+=3;else if(n<=57343){if(r>=t.length-1)throw new Error(bg);r++,e+=4}else throw new Error(bg)}return e}Wu.encodedLength=j2;function EI(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n&128){var i=void 0;if(n<224){if(r>=t.length)throw new Error(bi);var s=t[++r];if((s&192)!==128)throw new Error(bi);n=(n&31)<<6|s&63,i=128}else if(n<240){if(r>=t.length-1)throw new Error(bi);var s=t[++r],o=t[++r];if((s&192)!==128||(o&192)!==128)throw new Error(bi);n=(n&15)<<12|(s&63)<<6|o&63,i=2048}else if(n<248){if(r>=t.length-2)throw new Error(bi);var s=t[++r],o=t[++r],a=t[++r];if((s&192)!==128||(o&192)!==128||(a&192)!==128)throw new Error(bi);n=(n&15)<<18|(s&63)<<12|(o&63)<<6|a&63,i=65536}else throw new Error(bi);if(n<i||n>=55296&&n<=57343)throw new Error(bi);if(n>=65536){if(n>1114111)throw new Error(bi);n-=65536,e.push(String.fromCharCode(55296|n>>10)),n=56320|n&1023}}e.push(String.fromCharCode(n))}return e.join("")}Wu.decode=EI;var G2={};Object.defineProperty(G2,"__esModule",{value:!0});function _I(){for(var t=0,e=0;e<arguments.length;e++)t+=arguments[e].length;for(var r=new Uint8Array(t),n=0,e=0;e<arguments.length;e++){var i=arguments[e];r.set(i,n),n+=i.length}return r}var wI=G2.concat=_I,hi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Sh=24;function $i(t){return Buffer.from(t).toString("hex")}function wo(t){return hi(this,void 0,void 0,function*(){return $i(typeof t=="string"?cn.hash(Ss(t),32):cn.hash(t,32))})}function vg(t){return hi(this,void 0,void 0,function*(){return Gr.generateKeyPairFromSeed(cn.hash(Ss(t),32))})}function V2(t,e){return hi(this,void 0,void 0,function*(){const r=Buffer.from(ro.randomBytes(Sh)),n=Buffer.concat([r,Buffer.from(ea.secretBox(e,r,Buffer.from(t,"utf8")))]);return $i(n)})}function q2(t,e){return hi(this,void 0,void 0,function*(){const r=t.slice(0,Sh),n=t.slice(Sh),i=ea.openSecretBox(e,r,n);if(!i)throw new Error("Decryption failed");return Buffer.from(i).toString("utf8")})}function AI(t,e){return hi(this,void 0,void 0,function*(){const r=Gr.convertPublicKeyToX25519(Buffer.from(e)),n=ea.generateKeyPair(),s=new cn.BLAKE2b(24).update(n.publicKey,32).update(r,32).digest(),o=typeof t=="string"?Ss(t):t,a=ea.box(r,n.secretKey,s,o);return $i(wI(n.publicKey,a))})}function $2(t,e,r){return hi(this,void 0,void 0,function*(){const n=Gr.convertSecretKeyToX25519(Buffer.from(r)),i=Gr.convertPublicKeyToX25519(Buffer.from(e)),s=typeof t=="string"?Ss(t):t,o=s.slice(0,32),a=s.slice(32),l=new cn.BLAKE2b(24).update(o,32).update(i,32).digest(),f=ea.openBox(o,n,l,a);if(!f)throw new Error("Decryption failed");return Buffer.from(f).toString()})}function xI(t){return hi(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:Buffer.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,164]))}};let r,n;if(t.length===64)r=e.edpk.prefix,n=t;else{const s=Object.entries(e);for(let o=0;o<s.length;o++){const[a,c]=s[o];if(t.startsWith(a)&&t.length===c.length){r=c.prefix;const l=Xr.decode(t);n=l.slice(a.length,l.length).toString("hex");break}}}if(!r||!n)throw new Error(`invalid publicKey: ${t}`);const i=cn.hash(Buffer.from(n,"hex"),20);return Xr.encode(Buffer.concat([r,Buffer.from(i)]))})}function mg(t,e){return`@${t}:${e}`}const SI=t=>hi(void 0,void 0,void 0,function*(){if(t.length%2!==0)return Ss(t);let e=t;t.startsWith("0x")&&(e=t.slice(2));const r=Buffer.from(e,"hex");return r.length===e.length/2?r:Ss(t)}),RI=(t,e=32)=>hi(void 0,void 0,void 0,function*(){return cn.hash(t,e)}),II=(t,e)=>hi(void 0,void 0,void 0,function*(){const r=yield SI(t),n=new Uint8Array([9,245,205,134,18]),i=yield RI(r),s=Gr.sign(e.secretKey,i);return Xr.encode(Buffer.concat([Buffer.from(n),Buffer.from(s)]))});var TI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function zi(){return TI(this,void 0,void 0,function*(){const t=ro.randomBytes(16);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(function(e){return Buffer.from(e).toString("hex")}).join("-")})}const Jf=24,Yf=16;var Ke;(function(t){t.BlockchainRequest="blockchain_request",t.PermissionRequest="permission_request",t.SignPayloadRequest="sign_payload_request",t.OperationRequest="operation_request",t.BroadcastRequest="broadcast_request",t.BlockchainResponse="blockchain_response",t.PermissionResponse="permission_response",t.SignPayloadResponse="sign_payload_response",t.OperationResponse="operation_response",t.BroadcastResponse="broadcast_response",t.Acknowledge="acknowledge",t.Disconnect="disconnect",t.Error="error"})(Ke||(Ke={}));var An;(function(t){t.SIGN="sign",t.OPERATION_REQUEST="operation_request",t.ENCRYPT="encrypt",t.NOTIFICATION="notification",t.THRESHOLD="threshold"})(An||(An={}));var St;(function(t){t.MAINNET="mainnet",t.GHOSTNET="ghostnet",t.MONDAYNET="mondaynet",t.DAILYNET="dailynet",t.DELPHINET="delphinet",t.EDONET="edonet",t.FLORENCENET="florencenet",t.GRANADANET="granadanet",t.HANGZHOUNET="hangzhounet",t.ITHACANET="ithacanet",t.JAKARTANET="jakartanet",t.KATHMANDUNET="kathmandunet",t.LIMANET="limanet",t.MUMBAINET="mumbainet",t.CUSTOM="custom"})(St||(St={}));var yg;(function(t){t.ENDORSEMENT="endorsement",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.ACTIVATE_ACCOUNT="activate_account",t.PROPOSALS="proposals",t.BALLOT="ballot",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ORIGINATION="origination",t.DELEGATION="delegation"})(yg||(yg={}));var xn;(function(t){t.WEBSITE="website",t.EXTENSION="extension",t.P2P="p2p"})(xn||(xn={}));var Ki;(function(t){t.BACKGROUND="toBackground",t.PAGE="toPage",t.EXTENSION="toExtension"})(Ki||(Ki={}));var pt;(function(t){t.BROADCAST_ERROR="BROADCAST_ERROR",t.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",t.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",t.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",t.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",t.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",t.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",t.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",t.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",t.ABORTED_ERROR="ABORTED_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR"})(pt||(pt={}));var an;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED"})(an||(an={}));var Zs;(function(t){t.CHROME_MESSAGE="chrome_message",t.POST_MESSAGE="post_message",t.LEDGER="ledger",t.P2P="p2p"})(Zs||(Zs={}));var ke;(function(t){t.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",t.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",t.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",t.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",t.ACCOUNTS="beacon:accounts",t.ACTIVE_ACCOUNT="beacon:active-account",t.PUSH_TOKENS="beacon:push-tokens",t.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",t.APP_METADATA_LIST="beacon:app-metadata-list",t.PERMISSION_LIST="beacon:permissions",t.BEACON_SDK_VERSION="beacon:sdk_version",t.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",t.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",t.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",t.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(ke||(ke={}));const yd={[ke.TRANSPORT_P2P_PEERS_DAPP]:[],[ke.TRANSPORT_P2P_PEERS_WALLET]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[ke.ACCOUNTS]:[],[ke.ACTIVE_ACCOUNT]:void 0,[ke.PUSH_TOKENS]:[],[ke.BEACON_SDK_SECRET_SEED]:void 0,[ke.APP_METADATA_LIST]:[],[ke.PERMISSION_LIST]:[],[ke.BEACON_SDK_VERSION]:void 0,[ke.MATRIX_PRESERVED_STATE]:{},[ke.MATRIX_PEER_ROOM_IDS]:{},[ke.MATRIX_SELECTED_NODE]:void 0,[ke.MULTI_NODE_SETUP_DONE]:void 0};var ns;(function(t){t.RAW="raw",t.OPERATION="operation",t.MICHELINE="micheline"})(ns||(ns={}));var Qf;(function(t){t.LIGHT="light",t.DARK="dark"})(Qf||(Qf={}));var Rh;(function(t){t.EUROPE_EAST="europe-east",t.EUROPE_WEST="europe-west",t.NORTH_AMERICA_EAST="north-america-east",t.NORTH_AMERICA_WEST="north-america-west",t.CENTRAL_AMERICA="central-america",t.SOUTH_AMERICA="south-america",t.ASIA_EAST="asia-east",t.ASIA_WEST="asia-west",t.AFRICA="africa",t.AUSTRALIA="australia"})(Rh||(Rh={}));const OI="3.3.4",z2="3",ef=[t=>{}];let st={postMessage:(t,e)=>{console.log("GOT MOCK POST MESSAGE",t),ef.forEach(r=>{r({data:t})})},addEventListener:(t,e)=>{ef.push(e)},removeEventListener:(t,e)=>{ef.splice(ef.indexOf(r=>r===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(st=window)}catch(t){console.log(`not defined: ${t}`)}var tf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class PI{constructor(e){if(this._beaconId=new Zt,this._keyPair=new Zt,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,st.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):st.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return tf(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),st.beaconCreatedClientInstance=!1})}initSDK(){return tf(this,void 0,void 0,function*(){return this.storage.set(ke.BEACON_SDK_VERSION,OI).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve($i(e.publicKey))})})}removeBeaconEntriesFromStorage(){return tf(this,void 0,void 0,function*(){const e=Object.values(ke);yield Promise.all(e.map(r=>this.storage.delete(r)))})}loadOrCreateBeaconSecret(){return tf(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield vg(e));else{const r=yield zi();yield this.storage.set(ke.BEACON_SDK_SECRET_SEED,r),this._keyPair.resolve(yield vg(r))}})}}var Pa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class q0{constructor(e,r){this.storage=e,this.storageKey=r}getAll(){return Pa(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return Pa(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey);return r.find(e)})}addOne(e,r,n=!0){return Pa(this,void 0,void 0,function*(){const i=yield this.storage.get(this.storageKey);if(!i.some(r))i.push(e);else if(n)for(let s=0;s<i.length;s++)r(i[s])&&(i[s]=e);return this.storage.set(this.storageKey,i)})}remove(e){return Pa(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey),n=r.filter(i=>!e(i));return this.storage.set(this.storageKey,n)})}removeAll(){return Pa(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var NI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ih=(t,e)=>NI(void 0,void 0,void 0,function*(){const r=[t,e.type];e.name&&r.push(`name:${e.name}`),e.rpcUrl&&r.push(`rpc:${e.rpcUrl}`);const n=Buffer.from(cn.hash(Ss(r.join("-")),10));return Xr.encode(n)});var MI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class LI{static hasPermission(e,r,n){return MI(this,void 0,void 0,function*(){switch(e.type){case Ke.PermissionRequest:case Ke.BroadcastRequest:return!0;case Ke.OperationRequest:{const i=yield Ih(e.sourceAddress,e.network),s=yield r(i);return s?s.scopes.includes(An.OPERATION_REQUEST):!1}case Ke.SignPayloadRequest:{const s=(yield n()).filter(o=>o.address===e.sourceAddress);return s.length===0?!1:s.some(o=>o.scopes.includes(An.SIGN))}default:throw new Error("Message not handled")}})}}var Cs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class CI{constructor(e){this.storageManager=new q0(e,ke.ACCOUNTS)}getAccounts(){return Cs(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return Cs(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.accountIdentifier===e)})}addAccount(e){return Cs(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return Cs(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.accountIdentifier===e)})}removeAccounts(e){return Cs(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.accountIdentifier))})}removeAllAccounts(){return Cs(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return Cs(this,void 0,void 0,function*(){return LI.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var BI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const ta=t=>BI(void 0,void 0,void 0,function*(){const e=Buffer.from(cn.hash(Buffer.from(t,"hex"),5));return Xr.encode(e)});let W2=!!st.beaconSdkDebugEnabled;W2&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const kI=()=>W2;class DI{constructor(){}debug(e,r,...n){this._log("debug",e,r,n)}log(e,r,...n){this._log("log",e,r,n)}warn(e,r,...n){this._log("warn",e,r,n)}error(e,r,...n){this._log("error",e,r,n)}_log(e,r,n,i=[]){if(!kI())return;let s=`[BEACON] ${new Date().toISOString()} [${r}](${n})`,o=i;switch(i[0]&&typeof i[0]=="string"&&(s+=` ${i[0]}`,o=i.slice(1)),e){case"error":console.group(s),console.error(...o);break;case"warn":console.group(s),console.warn(...o);break;case"debug":console.groupCollapsed(s),console.debug(...o);break;default:console.group(s),console.log(...o)}console.groupEnd()}}class Zr{constructor(e){this.name=e}debug(e,...r){rf.debug(this.name,e,r)}log(e,...r){rf.log(this.name,e,r)}warn(e,...r){rf.warn(this.name,e,r)}error(e,...r){rf.error(this.name,e,r)}}let rf=new DI;var Mr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const UI=new Zr("Client");class KI extends PI{constructor(e){var r;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new Zt,this.accountManager=new CI(e.storage),this.matrixNodes=(r=e.matrixNodes)!==null&&r!==void 0?r:{},this.handleResponse=(n,i)=>{throw new Error(`not overwritten${JSON.stringify(n)} - ${JSON.stringify(i)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,r;return(r=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&r!==void 0?r:an.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return Mr(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return Mr(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return Mr(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return Mr(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return Mr(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(r=>r+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return Mr(this,void 0,void 0,function*(){return this._transport.status===Jn.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return Mr(this,void 0,void 0,function*(){return{senderId:yield ta(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return Mr(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return Mr(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return Mr(this,void 0,void 0,function*(){this._transport.status===Jn.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return Mr(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=Zt.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new Zt)})}addListener(e){return Mr(this,void 0,void 0,function*(){e.addListener((r,n)=>Mr(this,void 0,void 0,function*(){if(typeof r=="string"){const i=yield new eo().deserialize(r);this.handleResponse(i,n)}})).catch(r=>UI.error("addListener",r))})}sendDisconnectToPeer(e,r){return Mr(this,void 0,void 0,function*(){const n={id:yield zi(),version:e.version,senderId:yield ta(yield this.beaconId),type:Ke.Disconnect},i=yield new eo().serialize(n);yield(r??(yield this.transport)).send(i,e)})}}class en{constructor(e,r){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${r}`,this.description=r}get fullDescription(){return{description:this.description}}static getError(e,r){switch(e){case pt.BROADCAST_ERROR:return new HI;case pt.NETWORK_NOT_SUPPORTED:return new FI;case pt.NO_ADDRESS_ERROR:return new jI;case pt.NO_PRIVATE_KEY_FOUND_ERROR:return new GI;case pt.NOT_GRANTED_ERROR:return new VI;case pt.PARAMETERS_INVALID_ERROR:return new qI;case pt.TOO_MANY_OPERATIONS:return new $I;case pt.TRANSACTION_INVALID_ERROR:return new zI(r);case pt.SIGNATURE_TYPE_NOT_SUPPORTED:return new ZI;case pt.ABORTED_ERROR:return new JI;case pt.UNKNOWN_ERROR:return new X2}}}class HI extends en{constructor(){super(pt.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class FI extends en{constructor(){super(pt.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class jI extends en{constructor(){super(pt.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class GI extends en{constructor(){super(pt.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class VI extends en{constructor(){super(pt.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class qI extends en{constructor(){super(pt.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class $I extends en{constructor(){super(pt.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class zI extends en{constructor(e){super(pt.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class X2 extends en{constructor(){super(pt.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var gn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const vi=new Zr("Transport");class J2{constructor(e,r,n){this.type=Zs.POST_MESSAGE,this._isConnected=an.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=r,this.peerManager=n}get connectionStatus(){return this._isConnected}static isAvailable(){return gn(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return gn(this,void 0,void 0,function*(){vi.log("connect"),this._isConnected=an.CONNECTED})}disconnect(){return gn(this,void 0,void 0,function*(){vi.log("disconnect"),this._isConnected=an.NOT_CONNECTED})}send(e,r){return gn(this,void 0,void 0,function*(){if(r)return this.client.sendMessage(e,r);{const i=(yield this.getPeers()).map(s=>this.client.sendMessage(e,s));return(yield Promise.all(i))[0]}})}addListener(e){return gn(this,void 0,void 0,function*(){vi.debug("addListener"),this.listeners.push(e)})}removeListener(e){return gn(this,void 0,void 0,function*(){vi.log("removeListener"),this.listeners=this.listeners.filter(r=>r!==e)})}getPeers(){return gn(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,r=!0){return gn(this,void 0,void 0,function*(){vi.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return gn(this,void 0,void 0,function*(){vi.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return gn(this,void 0,void 0,function*(){vi.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,r){return gn(this,void 0,void 0,function*(){this.listeners.length===0?vi.warn("notifyListeners","0 listeners notified!",this):vi.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(n=>{n(e,r)})})}}globalThis&&globalThis.__awaiter;var nf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class WI{constructor(e){this.prefix=e}static isSupported(){return nf(this,void 0,void 0,function*(){return Promise.resolve(typeof window<"u"&&!!window.localStorage)})}get(e){return nf(this,void 0,void 0,function*(){const r=localStorage.getItem(this.getPrefixedKey(e));if(r)try{return JSON.parse(r)}catch{return r}else return typeof yd[e]=="object"?JSON.parse(JSON.stringify(yd[e])):yd[e]})}set(e,r){return nf(this,void 0,void 0,function*(){return typeof r=="string"?localStorage.setItem(this.getPrefixedKey(e),r):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(r))})}delete(e){return nf(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;var Eg=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class eo{serialize(e){return Eg(this,void 0,void 0,function*(){const r=JSON.stringify(e);return Xr.encode(Buffer.from(r))})}deserialize(e){return Eg(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse(Xr.decode(e).toString())})}}var vo=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class XI{constructor(e){this.storageManager=new q0(e,ke.APP_METADATA_LIST)}getAppMetadataList(){return vo(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return vo(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.senderId===e)})}addAppMetadata(e){return vo(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.senderId===e.senderId)})}removeAppMetadata(e){return vo(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.senderId===e)})}removeAppMetadatas(e){return vo(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.senderId))})}removeAllAppMetadata(){return vo(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class JI extends en{constructor(){super(pt.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var Bs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Zf{constructor(e,r){this.storageManager=new q0(e,r)}hasPeer(e){return Bs(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return Bs(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return Bs(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.publicKey===e)})}addPeer(e){return Bs(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.publicKey===e.publicKey)})}removePeer(e){return Bs(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.publicKey===e)})}removePeers(e){return Bs(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.publicKey))})}removeAllPeers(){return Bs(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var Ed={},_d={},_g;function YI(){return _g||(_g=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.X25519Session=t.SECRET_SEED_LENGTH=t.SAVED_STATE_LENGTH=t.ACCEPT_MESSAGE_LENGTH=t.OFFER_MESSAGE_LENGTH=void 0;const e=ro,r=Ur,n=dc,i=Y2();t.OFFER_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.ACCEPT_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.SAVED_STATE_LENGTH=n.SECRET_KEY_LENGTH,t.SECRET_SEED_LENGTH=n.SECRET_KEY_LENGTH;class s{constructor(a,c){this.offerMessageLength=t.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=t.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=n.SHARED_KEY_LENGTH,this.savedStateLength=t.SAVED_STATE_LENGTH,this._seed=a||(0,e.randomBytes)(n.SECRET_KEY_LENGTH,c)}saveState(){return new Uint8Array(this._seed)}restoreState(a){return this._seed=new Uint8Array(a),this}clean(){this._seed&&(0,r.wipe)(this._seed),this._keyPair&&((0,r.wipe)(this._keyPair.secretKey),(0,r.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,r.wipe)(this._sharedKey),this._sessionKeys&&((0,r.wipe)(this._sessionKeys.receive),(0,r.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,n.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(a){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(a.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const c=(0,n.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,n.sharedKey)(c.secretKey,a),this._sessionKeys=(0,i.clientSessionKeysFromSharedKey)(this._sharedKey,c.publicKey,a),(0,r.wipe)(c.secretKey),c.publicKey}finish(a){if(a.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,n.sharedKey)(this._keyPair.secretKey,a),this._sessionKeys=(0,i.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,a),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}t.X25519Session=s}(_d)),_d}var wg;function Y2(){return wg||(wg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.clientSessionKeys=t.serverSessionKeys=t.clientSessionKeysFromSharedKey=t.serverSessionKeysFromSharedKey=t.X25519Session=void 0;const e=cn,r=dc;var n=YI();Object.defineProperty(t,"X25519Session",{enumerable:!0,get:function(){return n.X25519Session}});const i=32;function s(l,f,d,I=e.BLAKE2b){const P=new I;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const L=P.update(l).update(d).update(f).digest();return{send:L.subarray(0,i),receive:L.subarray(i)}}t.serverSessionKeysFromSharedKey=s;function o(l,f,d,I=e.BLAKE2b){const P=new I;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const L=P.update(l).update(f).update(d).digest();return{receive:L.subarray(0,i),send:L.subarray(i)}}t.clientSessionKeysFromSharedKey=o;function a(l,f,d=e.BLAKE2b){const I=(0,r.sharedKey)(l.secretKey,f);return s(I,l.publicKey,f,d)}t.serverSessionKeys=a;function c(l,f,d=e.BLAKE2b){const I=(0,r.sharedKey)(l.secretKey,f);return o(I,l.publicKey,f,d)}t.clientSessionKeys=c}(Ed)),Ed}var Ag=Y2(),Na=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Q2{constructor(e){this.keyPair=e}getPublicKey(){return Na(this,void 0,void 0,function*(){return $i(this.keyPair.publicKey)})}getPublicKeyHash(){return Na(this,void 0,void 0,function*(){return wo(this.keyPair.publicKey)})}createCryptoBoxServer(e,r){return Na(this,void 0,void 0,function*(){return Ag.serverSessionKeys({publicKey:Gr.convertPublicKeyToX25519(r.publicKey),secretKey:Gr.convertSecretKeyToX25519(r.secretKey)},Gr.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}createCryptoBoxClient(e,r){return Na(this,void 0,void 0,function*(){return Ag.clientSessionKeys({publicKey:Gr.convertPublicKeyToX25519(r.publicKey),secretKey:Gr.convertSecretKeyToX25519(r.secretKey)},Gr.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}encryptMessageAsymmetric(e,r){return Na(this,void 0,void 0,function*(){return AI(r,Buffer.from(e,"hex"))})}}var ks=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class QI extends Q2{constructor(e,r){super(r),this.name=e,this.init().catch(console.error)}start(){return ks(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return ks(this,void 0,void 0,function*(){return{id:yield zi(),type:"postmessage-pairing-request",name:this.name,version:z2,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return ks(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return ks(this,void 0,void 0,function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return ks(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,r){return ks(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxServer(e,this.keyPair),i=Buffer.from(r,"hex");if(i.length>=Jf+Yf)try{return yield q2(i,n.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,r){return ks(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(e,this.keyPair);return V2(r,n.send)})}}class ZI extends en{constructor(){super(pt.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var Th={},eT={get exports(){return Th},set exports(t){Th=t}},eu={},tT={get exports(){return eu},set exports(t){eu=t}},Z2=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},rT=Z2,fo=Object.prototype.toString;function $0(t){return fo.call(t)==="[object Array]"}function Oh(t){return typeof t>"u"}function nT(t){return t!==null&&!Oh(t)&&t.constructor!==null&&!Oh(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function iT(t){return fo.call(t)==="[object ArrayBuffer]"}function sT(t){return typeof FormData<"u"&&t instanceof FormData}function oT(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function aT(t){return typeof t=="string"}function cT(t){return typeof t=="number"}function ey(t){return t!==null&&typeof t=="object"}function wf(t){if(fo.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function fT(t){return fo.call(t)==="[object Date]"}function uT(t){return fo.call(t)==="[object File]"}function lT(t){return fo.call(t)==="[object Blob]"}function ty(t){return fo.call(t)==="[object Function]"}function dT(t){return ey(t)&&ty(t.pipe)}function hT(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function pT(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function gT(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function z0(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),$0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Ph(){var t={};function e(i,s){wf(t[s])&&wf(i)?t[s]=Ph(t[s],i):wf(i)?t[s]=Ph({},i):$0(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)z0(arguments[r],e);return t}function bT(t,e,r){return z0(e,function(i,s){r&&typeof i=="function"?t[s]=rT(i,r):t[s]=i}),t}function vT(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var tn={isArray:$0,isArrayBuffer:iT,isBuffer:nT,isFormData:sT,isArrayBufferView:oT,isString:aT,isNumber:cT,isObject:ey,isPlainObject:wf,isUndefined:Oh,isDate:fT,isFile:uT,isBlob:lT,isFunction:ty,isStream:dT,isURLSearchParams:hT,isStandardBrowserEnv:gT,forEach:z0,merge:Ph,extend:bT,trim:pT,stripBOM:vT},mo=tn;function xg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ry=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(mo.isURLSearchParams(r))i=r.toString();else{var s=[];mo.forEach(r,function(c,l){c===null||typeof c>"u"||(mo.isArray(c)?l=l+"[]":c=[c],mo.forEach(c,function(d){mo.isDate(d)?d=d.toISOString():mo.isObject(d)&&(d=JSON.stringify(d)),s.push(xg(l)+"="+xg(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},mT=tn;function Xu(){this.handlers=[]}Xu.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Xu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Xu.prototype.forEach=function(e){mT.forEach(this.handlers,function(n){n!==null&&e(n)})};var yT=Xu,ET=tn,_T=function(e,r){ET.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},ny=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},wd,Sg;function iy(){if(Sg)return wd;Sg=1;var t=ny;return wd=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},wd}var Ad,Rg;function wT(){if(Rg)return Ad;Rg=1;var t=iy();return Ad=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Ad}var xd,Ig;function AT(){if(Ig)return xd;Ig=1;var t=tn;return xd=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),xd}var Sd,Tg;function xT(){return Tg||(Tg=1,Sd=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Sd}var Rd,Og;function ST(){return Og||(Og=1,Rd=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Rd}var Id,Pg;function RT(){if(Pg)return Id;Pg=1;var t=xT(),e=ST();return Id=function(n,i){return n&&!t(i)?e(n,i):i},Id}var Td,Ng;function IT(){if(Ng)return Td;Ng=1;var t=tn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Td=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Td}var Od,Mg;function TT(){if(Mg)return Od;Mg=1;var t=tn;return Od=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Od}var Pd,Lg;function Ju(){if(Lg)return Pd;Lg=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Pd=t,Pd}var Nd,Cg;function Bg(){if(Cg)return Nd;Cg=1;var t=tn,e=wT(),r=AT(),n=ry,i=RT(),s=IT(),o=TT(),a=iy(),c=Yu(),l=Ju();return Nd=function(d){return new Promise(function(P,L){var H=d.data,q=d.headers,G=d.responseType,C;function V(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete q["Content-Type"];var U=new XMLHttpRequest;if(d.auth){var F=d.auth.username||"",j=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";q.Authorization="Basic "+btoa(F+":"+j)}var E=i(d.baseURL,d.url);U.open(d.method.toUpperCase(),n(E,d.params,d.paramsSerializer),!0),U.timeout=d.timeout;function _(){if(U){var x="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,y=!G||G==="text"||G==="json"?U.responseText:U.response,u={data:y,status:U.status,statusText:U.statusText,headers:x,config:d,request:U};e(function(b){P(b),V()},function(b){L(b),V()},u),U=null}}if("onloadend"in U?U.onloadend=_:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(_)},U.onabort=function(){U&&(L(a("Request aborted",d,"ECONNABORTED",U)),U=null)},U.onerror=function(){L(a("Network Error",d,null,U)),U=null},U.ontimeout=function(){var y=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c.transitional;d.timeoutErrorMessage&&(y=d.timeoutErrorMessage),L(a(y,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},t.isStandardBrowserEnv()){var O=(d.withCredentials||o(E))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;O&&(q[d.xsrfHeaderName]=O)}"setRequestHeader"in U&&t.forEach(q,function(y,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete q[u]:U.setRequestHeader(u,y)}),t.isUndefined(d.withCredentials)||(U.withCredentials=!!d.withCredentials),G&&G!=="json"&&(U.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&U.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(x){U&&(L(!x||x&&x.type?new l("canceled"):x),U.abort(),U=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),H||(H=null),U.send(H)})},Nd}var Md,kg;function Yu(){if(kg)return Md;kg=1;var t=tn,e=_T,r=ny,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=Bg()),c}function o(c,l,f){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(f||JSON.stringify)(c)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(l,f){return e(f,"Accept"),e(f,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(f,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||f&&f["Content-Type"]==="application/json"?(i(f,"application/json"),o(l)):l}],transformResponse:[function(l){var f=this.transitional||a.transitional,d=f&&f.silentJSONParsing,I=f&&f.forcedJSONParsing,P=!d&&this.responseType==="json";if(P||I&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(L){if(P)throw L.name==="SyntaxError"?r(L,this,"E_JSON_PARSE"):L}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){a.headers[l]={}}),t.forEach(["post","put","patch"],function(l){a.headers[l]=t.merge(n)}),Md=a,Md}var OT=tn,PT=Yu(),NT=function(e,r,n){var i=this||PT;return OT.forEach(n,function(o){e=o.call(i,e,r)}),e},Ld,Dg;function sy(){return Dg||(Dg=1,Ld=function(e){return!!(e&&e.__CANCEL__)}),Ld}var Ug=tn,Cd=NT,MT=sy(),LT=Yu(),CT=Ju();function Bd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CT("canceled")}var BT=function(e){Bd(e),e.headers=e.headers||{},e.data=Cd.call(e,e.data,e.headers,e.transformRequest),e.headers=Ug.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ug.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||LT.adapter;return r(e).then(function(i){return Bd(e),i.data=Cd.call(e,i.data,i.headers,e.transformResponse),i},function(i){return MT(i)||(Bd(e),i&&i.response&&(i.response.data=Cd.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Hr=tn,oy=function(e,r){r=r||{};var n={};function i(f,d){return Hr.isPlainObject(f)&&Hr.isPlainObject(d)?Hr.merge(f,d):Hr.isPlainObject(d)?Hr.merge({},d):Hr.isArray(d)?d.slice():d}function s(f){if(Hr.isUndefined(r[f])){if(!Hr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Hr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Hr.isUndefined(r[f])){if(!Hr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Hr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var I=l[d]||s,P=I(d);Hr.isUndefined(P)&&I!==c||(n[d]=P)}),n},kd,Kg;function ay(){return Kg||(Kg=1,kd={version:"0.24.0"}),kd}var kT=ay().version,W0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){W0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Hg={};W0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+kT+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Hg[o]&&(Hg[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function DT(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var UT={assertOptions:DT,validators:W0},cy=tn,KT=ry,Fg=yT,jg=BT,Qu=oy,fy=UT,yo=fy.validators;function Nc(t){this.defaults=t,this.interceptors={request:new Fg,response:new Fg}}Nc.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Qu(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&fy.assertOptions(r,{silentJSONParsing:yo.transitional(yo.boolean),forcedJSONParsing:yo.transitional(yo.boolean),clarifyTimeoutError:yo.transitional(yo.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(e)===!1||(i=i&&I.synchronous,n.unshift(I.fulfilled,I.rejected))});var s=[];this.interceptors.response.forEach(function(I){s.push(I.fulfilled,I.rejected)});var o;if(!i){var a=[jg,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),f=n.shift();try{c=l(c)}catch(d){f(d);break}}try{o=jg(c)}catch(d){return Promise.reject(d)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Nc.prototype.getUri=function(e){return e=Qu(this.defaults,e),KT(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};cy.forEach(["delete","get","head","options"],function(e){Nc.prototype[e]=function(r,n){return this.request(Qu(n||{},{method:e,url:r,data:(n||{}).data}))}});cy.forEach(["post","put","patch"],function(e){Nc.prototype[e]=function(r,n,i){return this.request(Qu(i||{},{method:e,url:r,data:n}))}});var HT=Nc,Dd,Gg;function FT(){if(Gg)return Dd;Gg=1;var t=Ju();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Dd=e,Dd}var Ud,Vg;function jT(){return Vg||(Vg=1,Ud=function(e){return function(n){return e.apply(null,n)}}),Ud}var Kd,qg;function GT(){return qg||(qg=1,Kd=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Kd}var $g=tn,VT=Z2,Af=HT,qT=oy,$T=Yu();function uy(t){var e=new Af(t),r=VT(Af.prototype.request,e);return $g.extend(r,Af.prototype,e),$g.extend(r,e),r.create=function(i){return uy(qT(t,i))},r}var pi=uy($T);pi.Axios=Af;pi.Cancel=Ju();pi.CancelToken=FT();pi.isCancel=sy();pi.VERSION=ay().version;pi.all=function(e){return Promise.all(e)};pi.spread=jT();pi.isAxiosError=GT();tT.exports=pi;eu.default=pi;(function(t){t.exports=eu})(eT);const tu=fb(Th);var ru;(function(t){t.TEXT="m.text"})(ru||(ru={}));class X0{constructor(e,r,n,i){this.type=e,this.sender=r,this.content=n,this.timestamp=i}static from(e){if(XT(e))return new X0(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const zT=t=>t.type==="m.room.create"&&t.content instanceof Object&&"creator"in t.content,WT=t=>t.type==="m.room.member"&&t.content instanceof Object&&"membership"in t.content&&t.content.membership==="join",ly=t=>t.type==="m.room.message",XT=t=>ly(t)&&t.content instanceof Object&&"msgtype"in t.content&&t.content.msgtype===ru.TEXT;var Er;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JOINED=1]="JOINED",t[t.INVITED=2]="INVITED",t[t.LEFT=3]="LEFT"})(Er||(Er={}));class Ct{constructor(e,r=Er.UNKNOWN,n=[],i=[]){this.id=e,this.status=r,this.members=n,this.messages=i}static fromSync(e){var r,n,i;if(!e)return[];function s(o,a){return Object.entries(o).map(([c,l])=>a(c,l))}return[...s((r=e.join)!==null&&r!==void 0?r:{},Ct.fromJoined),...s((n=e.invite)!==null&&n!==void 0?n:{},Ct.fromInvited),...s((i=e.leave)!==null&&i!==void 0?i:{},Ct.fromLeft)]}static from(e,r){return typeof e=="string"?new Ct(e,r||Er.UNKNOWN):r!==void 0?new Ct(e.id,r,e.members,e.messages):e}static merge(e,r){return!r||r.id!==e.id?Ct.from(e):new Ct(e.id,e.status,[...r.members,...e.members].filter((n,i,s)=>s.indexOf(n)===i),[...r.messages,...e.messages])}static fromJoined(e,r){const n=[...r.state.events,...r.timeline.events],i=Ct.getMembersFromEvents(n),s=Ct.getMessagesFromEvents(n);return new Ct(e,Er.JOINED,i,s)}static fromInvited(e,r){const n=Ct.getMembersFromEvents(r.invite_state.events);return new Ct(e,Er.INVITED,n)}static fromLeft(e,r){const n=[...r.state.events,...r.timeline.events],i=Ct.getMembersFromEvents(n),s=Ct.getMessagesFromEvents(n);return new Ct(e,Er.LEFT,i,s)}static getMembersFromEvents(e){return Ct.getUniqueEvents(e.filter(r=>zT(r)||WT(r))).map(r=>r.sender).filter((r,n,i)=>i.indexOf(r)===n)}static getMessagesFromEvents(e){return Ct.getUniqueEvents(e.filter(ly)).map(r=>X0.from(r)).filter(Boolean)}static getUniqueEvents(e){const r={},n=[];return e.forEach((i,s)=>{const o=i.event_id;(o===void 0||!(o in r))&&(o!==void 0&&(r[o]=s),n.push(i))}),n}}var sf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const zg=["syncToken","rooms"];class JT{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((r,n)=>sf(this,void 0,void 0,function*(){try{yield this.initFromStorage(),r()}catch(i){n(i)}}))}get(e){return this.state[e]}getRoom(e){const r=Ct.from(e,Er.UNKNOWN);return this.state.rooms[r.id]||r}update(e){return sf(this,void 0,void 0,function*(){yield this.waitReady();const r=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(r,this.state,e)})}onStateChanged(e,...r){r.length>0?r.forEach(n=>{this.onStateChangedListeners.set(n,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return sf(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return sf(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const n=["rooms"].some(i=>e[i]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(n.rooms||{}).forEach(i=>{i.messages=[]}),n}updateStorage(e){if(Object.entries(e).filter(([n,i])=>zg.includes(n)&&!!i).length>0){const n={};zg.forEach(i=>{n[i]=this.state[i]}),this.storage.set(ke.MATRIX_PRESERVED_STATE,this.prepareData(n))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,r){if(!r)return e;const n=Array.isArray(r)?r:Object.values(r),i=Object.assign({},e);return n.forEach(s=>{i[s.id]=Ct.merge(s,e[s.id])}),i}notifyListeners(e,r,n){const i=this.onStateChangedListeners.get("all");i&&i(e,r,n),V0(n).filter(s=>n[s]!==void 0).forEach(s=>{const o=this.onStateChangedListeners.get(s);o&&o(e,r,n)})}}var Ma=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const YT=new Zr("MatrixHttpClient"),QT="/_matrix/client/r0";class ZT{constructor(e){this.baseUrl=e,this.cancelTokenSource=tu.CancelToken.source()}get(e,r,n){return Ma(this,void 0,void 0,function*(){return this.send("GET",e,n,r)})}post(e,r,n,i){return Ma(this,void 0,void 0,function*(){return this.send("POST",e,n,i,r)})}put(e,r,n,i){return Ma(this,void 0,void 0,function*(){return this.send("PUT",e,n,i,r)})}cancelAllRequests(){return Ma(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,r,n,i,s){return Ma(this,void 0,void 0,function*(){const o=n?this.getHeaders(n):void 0,a=i?this.getParams(i):void 0;let c;try{c=yield tu.request({method:e,url:r,baseURL:this.apiUrl(QT),headers:o,data:s,params:a,cancelToken:this.cancelTokenSource.token})}catch(l){const f=l;throw YT.error("send",f.code,f.message,f.response.data),l.response.data}return c.data})}getHeaders(e){const r={},n=[];if(e.accessToken&&n.push(["Authorization",`Bearer ${e.accessToken}`]),n.length!==0){for(const[i,s]of n)r[i]=s;return r}}getParams(e){if(!e)return;const r=Object.assign(e,{});return V0(r).forEach(n=>r[n]===void 0&&delete r[n]),r}apiUrl(...e){const r=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,n=e.map(i=>i.startsWith("/")?i.substr(1):i);return[r,...n].join("/")}}var of=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class eO{constructor(e){this.httpClient=e}createRoom(e,r={}){return of(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",r,{accessToken:e})})}inviteToRoom(e,r,n){return of(this,void 0,void 0,function*(){return n.status!==Er.JOINED&&n.status!==Er.UNKNOWN?Promise.reject(`User is not a member of room ${n.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(n.id)}/invite`,{user_id:r},{accessToken:e})})}joinRoom(e,r){return of(this,void 0,void 0,function*(){return r.status===Er.JOINED?Promise.resolve({room_id:r.id}):this.httpClient.post(`/rooms/${encodeURIComponent(r.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return of(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var tO=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class rO{constructor(e){this.httpClient=e}login(e,r,n){return tO(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:r,device_id:n})})}}var Hd=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class nO{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,r){return Hd(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:r?r.pollingTimeout:void 0,since:r?r.syncToken:void 0},{accessToken:e}))})}sendMessage(e,r,n,i){return Hd(this,void 0,void 0,function*(){return new Promise((s,o)=>this.scheduleEvent({accessToken:e,roomId:r,type:"m.room.message",content:n,txnId:i,onSuccess:s,onError:o}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return Hd(this,void 0,void 0,function*(){const{roomId:r,type:n,txnId:i,content:s,accessToken:o}=e;try{const a=yield this.httpClient.put(`/rooms/${encodeURIComponent(r)}/send/${n}/${encodeURIComponent(i)}`,s,{accessToken:o});e.onSuccess(a)}catch(a){e.onError(a)}})}withCache(e,r){let n=this.cachedPromises.get(e);return n||(n=r().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,n)),n}}class iO{constructor(){this.events={}}on(e,r){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(r),()=>this.removeListener(e,r)}removeListener(e,r){if(typeof this.events[e]!="object")return;if(!r){this.events[e]=[];return}const n=this.events[e].indexOf(r);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...r){typeof this.events[e]=="object"&&[...this.events[e]].forEach(n=>n.apply(this,r))}once(e,r){const n=this.on(e,(...i)=>{n(),r.apply(this,i)});return n}}var jr;(function(t){t.INVITE="invite",t.MESSAGE="message"})(jr||(jr={}));class sO extends iO{constructor(){super(...arguments),this.eventEmitProviders=new Map([[jr.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[jr.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,r,n){for(const i of V0(jr))this.emitIfEvent(jr[i],n)}emitIfEvent(e,r){const n=this.eventEmitProviders.get(e);if(n){const[i,s]=n();i(r)&&s(e,r)}}emitClientEvent(e,r,n){this.emit(e,{type:e,content:r,timestamp:n})}isInvite(e){return e.rooms?e.rooms.some(r=>r.status===Er.INVITED):!1}emitInvite(e,r){r.rooms.filter(n=>n.status===Er.INVITED).map(n=>[n.id,n.members]).forEach(([n,i])=>{this.emitClientEvent(e,{roomId:n,members:i})})}isMessage(e){return e.rooms?e.rooms.some(r=>r.messages.length>0):!1}emitMessage(e,r){r.rooms.filter(n=>n.messages.length>0).map(n=>n.messages.map(i=>[n.id,i,i.timestamp])).reduce((n,i)=>n.concat(i),[]).forEach(([n,i,s])=>{this.emitClientEvent(e,{roomId:n,message:i},s)})}}var xt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Fd=new Zr("MatrixClient"),oO=3,aO=5e3;class J0{constructor(e,r,n,i,s,o){this.store=e,this.eventEmitter=r,this.userService=n,this.roomService=i,this.eventService=s,this.httpClient=o,this.isActive=!0,this._isReady=new Zt,this.store.onStateChanged((a,c,l)=>{this.eventEmitter.onStateChanged(a,c,l)},"rooms")}static create(e){const r=new JT(e.storage),n=new sO,i=new ZT(e.baseUrl),s=new rO(i),o=new eO(i),a=new nO(i);return new J0(r,n,s,o,a,i)}get joinedRooms(){return new Promise(e=>xt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===Er.JOINED))}))}get invitedRooms(){return new Promise(e=>xt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===Er.INVITED))}))}get leftRooms(){return new Promise(e=>xt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===Er.LEFT))}))}start(e){return xt(this,void 0,void 0,function*(){const r=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:r.access_token});const n=new Promise((i,s)=>xt(this,void 0,void 0,function*(){yield this.poll(0,o=>xt(this,void 0,void 0,function*(){this.store.get("isRunning")||i(),yield this.store.update({isRunning:!0,syncToken:o.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:Ct.fromSync(o.rooms)})}),o=>xt(this,void 0,void 0,function*(){this.store.get("isRunning")||s(o),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return n.then(()=>{this._isReady.resolve()}).catch(console.error),n})}isConnected(){return xt(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return xt(this,void 0,void 0,function*(){return Fd.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new Zt,this.httpClient.cancelAllRequests()})}subscribe(e,r){this.eventEmitter.on(e,r)}unsubscribe(e,r){r&&this.eventEmitter.removeListener(e,r)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return xt(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return xt(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",r=>xt(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(r,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...r){return xt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",n=>Promise.all(r.map(i=>{const s=this.store.getRoom(i);this.roomService.inviteToRoom(n,e,s).catch(o=>Fd.warn("inviteToRooms",o))})))})}joinRooms(...e){return xt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",r=>Promise.all(e.map(n=>{const i=this.store.getRoom(n);return this.roomService.joinRoom(r,i)})))})}sendTextMessage(e,r){return xt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",n=>xt(this,void 0,void 0,function*(){const i=yield this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:r},i)}))})}poll(e,r,n){return xt(this,void 0,void 0,function*(){const i=this.store,s=this.sync.bind(this),o=(a,c)=>xt(this,void 0,void 0,function*(){let l=0;try{const f=yield s();r(f)}catch(f){n(f),l=i.get("pollingRetries"),this.isActive&&Fd.log(`Retry syncing... ${l} retries so far`)}finally{this.isActive?setTimeout(()=>xt(this,void 0,void 0,function*(){yield o(a,c)}),l>oO?aO+e:e):c(new Error("Syncing stopped manually."))}});return new Promise(o)})}sync(){return xt(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>xt(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,r){return xt(this,void 0,void 0,function*(){const n=this.store.get("accessToken");return n?r(n):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return xt(this,void 0,void 0,function*(){const e=new Date().getTime(),r=this.store.get("txnNo");return yield this.store.update({txnNo:r+1}),`m${e}.${r}`})}}var tt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Re=new Zr("P2PCommunicationClient"),Wg={[Rh.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"]};class cO extends Q2{constructor(e,r,n,i,s,o,a){super(r),this.name=e,this.replicationCount=n,this.storage=i,this.iconUrl=o,this.appUrl=a,this.client=new Zt,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,Re.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=Wg,s&&(this.ENABLED_RELAY_SERVERS=Object.assign(Object.assign({},Wg),s))}getPairingRequestInfo(){return tt(this,void 0,void 0,function*(){const e={id:yield zi(),type:"p2p-pairing-request",name:this.name,version:z2,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return tt(this,void 0,void 0,function*(){const r={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(r.icon=this.iconUrl),this.appUrl&&(r.appUrl=this.appUrl),r})}findBestRegion(){return tt(this,void 0,void 0,function*(){if(this.selectedRegion)return this.selectedRegion;const e=Object.keys(this.ENABLED_RELAY_SERVERS),r=[];e.forEach(i=>{var s;const o=(s=this.ENABLED_RELAY_SERVERS[i])!==null&&s!==void 0?s:[],a=Math.floor(Math.random()*o.length);r.push(this.getBeaconInfo(o[a]).then(c=>({region:i,server:o[a],response:c})).catch(c=>new Promise((l,f)=>{setTimeout(()=>f(c),2e3)})))});const n=yield Promise.race(r);return this.selectedRegion=n.region,n.region})}getRelayServer(){return tt(this,void 0,void 0,function*(){if(this.relayServer){const s=yield this.relayServer.promise;if(Date.now()-s.localTimestamp<60*1e3)return{server:s.server,timestamp:s.timestamp};const o=yield this.getBeaconInfo(s.server);return this.relayServer.resolve({server:s.server,timestamp:o.timestamp,localTimestamp:new Date().getTime()}),{server:s.server,timestamp:o.timestamp}}else this.relayServer=new Zt;const e=yield this.storage.get(ke.MATRIX_SELECTED_NODE);if(e&&e.length>0){const s=yield this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:s.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:s.timestamp}}const r=yield this.findBestRegion(),n=this.ENABLED_RELAY_SERVERS[r];if(!n)throw new Error(`No servers found for region ${r}`);const i=[...n];for(;i.length>0;){const s=Math.floor(Math.random()*i.length),o=i[s];try{const a=yield this.getBeaconInfo(o);return this.storage.set(ke.MATRIX_SELECTED_NODE,o).catch(c=>Re.log(c)),this.relayServer.resolve({server:o,timestamp:a.timestamp,localTimestamp:new Date().getTime()}),{server:o,timestamp:a.timestamp}}catch{Re.log(`Ignoring server "${o}", trying another one...`),i.splice(s,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}getBeaconInfo(e){return tt(this,void 0,void 0,function*(){return tu.get(`https://${e}/_synapse/client/beacon/info`).then(r=>({region:r.data.region,known_servers:r.data.known_servers,timestamp:Math.floor(r.data.timestamp)}))})}tryJoinRooms(e,r=1){return tt(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(n){r<=10&&n.errcode==="M_FORBIDDEN"?(Re.log("Retrying to join...",n),setTimeout(()=>tt(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,r+1)}),200)):Re.log(`Failed to join after ${r} tries.`,n)}})}start(){var e,r;return tt(this,void 0,void 0,function*(){Re.log("start","starting client"),Re.log("start","connecting to server");const n=yield this.getRelayServer(),i=J0.create({baseUrl:`https://${n.server}`,storage:this.storage});if(this.initialListener=f=>tt(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&f&&f.timestamp?this.initialEvent.timestamp<f.timestamp&&(this.initialEvent=f):this.initialEvent=f}),i.subscribe(jr.MESSAGE,this.initialListener),i.subscribe(jr.INVITE,f=>tt(this,void 0,void 0,function*(){let d;f.content.members.length===1&&(d=f.content.members[0]),yield this.tryJoinRooms(f.content.roomId),d&&(yield this.updateRelayServer(d),yield this.updatePeerRoom(d,f.content.roomId))})),!n.timestamp)throw new Error("No timestamp received from relay server");const s=Math.floor(n.timestamp),o=`login:${Math.floor(s/(5*60))}`;Re.log("start",`login ${o}, ${yield this.getPublicKeyHash()} on ${n.server}`);const a=cn.hash(Ss(o),32),c=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,l=Gr.sign(c,a);try{yield i.start({id:yield this.getPublicKeyHash(),password:`ed:${$i(l)}:${yield this.getPublicKey()}`,deviceId:$i(this.keyPair.publicKey)})}catch{if(Re.error("start","Could not log in, retrying"),yield this.reset(),!this.selectedRegion)throw new Error("No region selected.");if(this.loginCounter<=((r=this.ENABLED_RELAY_SERVERS[this.selectedRegion])!==null&&r!==void 0?r:[]).length){this.loginCounter++,this.start();return}else throw Re.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}Re.log("start","login successful, client is ready"),this.client.resolve(i)})}stop(){return tt(this,void 0,void 0,function*(){Re.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>Re.error(e))),yield this.reset()})}reset(){return tt(this,void 0,void 0,function*(){Re.log("reset","resetting connection"),yield this.storage.delete(ke.MATRIX_PEER_ROOM_IDS).catch(e=>Re.log(e)),yield this.storage.delete(ke.MATRIX_PRESERVED_STATE).catch(e=>Re.log(e)),yield this.storage.delete(ke.MATRIX_SELECTED_NODE).catch(e=>Re.log(e)),this.relayServer=void 0,this.client=new Zt,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,r){return tt(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;Re.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const n=yield this.createCryptoBoxServer(e,this.keyPair),i=a=>tt(this,void 0,void 0,function*(){if(this.isTextMessage(a.content)&&(yield this.isSender(a,e))){let c;yield this.updateRelayServer(a.content.message.sender),yield this.updatePeerRoom(a.content.message.sender,a.content.roomId);try{c=Buffer.from(a.content.message.content,"hex")}catch{}if(c&&c.length>=Jf+Yf)try{const l=yield q2(c,n.receive);Re.log("listenForEncryptedMessage",`received a message from ${e}`,l),r(l)}catch{}}});this.activeListeners.set(e,i),(yield this.client.promise).subscribe(jr.MESSAGE,i);const s=this.initialEvent;s&&s.timestamp&&new Date().getTime()-s.timestamp<5*60*1e3?(Re.log("listenForEncryptedMessage","Handling previous event"),yield i(s)):Re.log("listenForEncryptedMessage","No previous event found");const o=this.initialListener;o&&(yield this.client.promise).unsubscribe(jr.MESSAGE,o),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return tt(this,void 0,void 0,function*(){const r=this.activeListeners.get(e);r&&((yield this.client.promise).unsubscribe(jr.MESSAGE,r),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return tt(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(jr.MESSAGE),this.activeListeners.clear()})}sendMessage(e,r){return tt(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(r.publicKey,this.keyPair),i=yield wo(Buffer.from(r.publicKey,"hex")),s=mg(i,r.relayServer),o=yield this.getRelevantRoom(s);yield this.waitForJoin(o);const a=yield V2(e,n.send);Re.log("sendMessage","sending encrypted message",r.publicKey,o,e),(yield this.client.promise).sendTextMessage(o,a).catch(c=>tt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Re.log("sendMessage","M_FORBIDDEN",o,c),yield this.deleteRoomIdFromRooms(o);const l=yield this.getRelevantRoom(s);Re.log("sendMessage","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>tt(this,void 0,void 0,function*(){Re.log("sendMessage","inner error",l,f)}))}else Re.log("sendMessage","unexpected error",c)}))})}updatePeerRoom(e,r){return tt(this,void 0,void 0,function*(){Re.log("updatePeerRoom",e,r);const n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw new Error("Invalid sender");const i=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),s=i[e];s===r&&Re.debug("updatePeerRoom","rooms are the same, not updating"),Re.debug("updatePeerRoom","current room",s,"new room",r),s&&s[1]&&(Re.log("updatePeerRoom",`adding room "${s[1]}" to ignored array`),this.ignoredRooms.push(s[1])),i[e]=r,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,i)})}deleteRoomIdFromRooms(e){return tt(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),n=Object.entries(r).filter(i=>i[1]!==e).reduce((i,s)=>Object.assign(Object.assign({},i),{[s[0]]:s[1]}),{});yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,n),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return tt(this,void 0,void 0,function*(){Re.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(jr.MESSAGE,r=>tt(this,void 0,void 0,function*(){if(this.isTextMessage(r.content)&&(yield this.isChannelOpenMessage(r.content))){Re.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(r)),yield this.updateRelayServer(r.content.message.sender),yield this.updatePeerRoom(r.content.message.sender,r.content.roomId);const n=r.content.message.content.split(":"),i=Buffer.from(n[n.length-1],"hex");if(i.length>=Jf+Yf)try{const s=JSON.parse(yield $2(i,this.keyPair.publicKey,this.keyPair.secretKey));Re.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(s)),e(Object.assign(Object.assign({},s),{senderId:yield ta(s.publicKey)}))}catch{}}}))})}waitForJoin(e,r=0){return tt(this,void 0,void 0,function*(){const n=yield(yield this.client.promise).getRoomById(e);if(Re.log("waitForJoin",`Currently ${n.members.length} members, we need at least 2`),!(n.members.length>=2||n.members.length===0)){if(r<=200)return Re.log(`Waiting for join... Try: ${r}`),new Promise(i=>{setTimeout(()=>tt(this,void 0,void 0,function*(){i(this.waitForJoin(e,r+1))}),100*(r>50?10:1))});throw new Error(`No one joined after ${r} tries.`)}})}sendPairingResponse(e){return tt(this,void 0,void 0,function*(){Re.log("sendPairingResponse");const r=yield wo(Buffer.from(e.publicKey,"hex")),n=mg(r,e.relayServer),i=yield(yield this.client.promise).createTrustedPrivateRoom(n);Re.debug("sendPairingResponse",`Connecting to room "${i}"`),yield this.updatePeerRoom(n,i),yield this.waitForJoin(i),Re.debug("sendPairingResponse","Successfully joined room.");const s=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));Re.debug("sendPairingResponse","Sending pairing response",s);const o=yield this.encryptMessageAsymmetric(e.publicKey,s),a=["@channel-open",n,o].join(":");(yield this.client.promise).sendTextMessage(i,a).catch(c=>tt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Re.log("sendPairingResponse","M_FORBIDDEN",i,c),yield this.deleteRoomIdFromRooms(i);const l=yield this.getRelevantRoom(n);Re.log("sendPairingResponse","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>tt(this,void 0,void 0,function*(){Re.log("sendPairingResponse","inner error",l,f)}))}else Re.log("sendPairingResponse","unexpected error",c)}))})}isTextMessage(e){return e.message.type===ru.TEXT}updateRelayServer(e){return tt(this,void 0,void 0,function*(){Re.log("updateRelayServer",e);const r=e.split(":");if(r.length<2||!r[0].startsWith("@"))throw new Error("Invalid sender");const n=r.shift(),i=r.join(":"),s=localStorage.getItem("beacon:communication-peers-dapp")?new Zf(this.storage,ke.TRANSPORT_P2P_PEERS_DAPP):new Zf(this.storage,ke.TRANSPORT_P2P_PEERS_WALLET),a=(yield s.getPeers()).map(c=>tt(this,void 0,void 0,function*(){`@${yield wo(Buffer.from(c.publicKey,"hex"))}`===n&&c.relayServer!==i&&(c.relayServer=i,yield s.addPeer(c))}));yield Promise.all(a)})}isChannelOpenMessage(e){return tt(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield wo(Buffer.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,r){return tt(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield wo(Buffer.from(r,"hex"))}`)})}getRelevantRoom(e){return tt(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS);let n=r[e];if(!n){Re.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const i=yield this.getRelevantJoinedRoom(e);n=i.id,r[e]=i.id,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,r)}return Re.log("getRelevantRoom",`Using room ${n}`),n})}getRelevantJoinedRoom(e){return tt(this,void 0,void 0,function*(){const r=yield(yield this.client.promise).joinedRooms;Re.log("checking joined rooms",r,e);const n=r.filter(s=>!this.ignoredRooms.some(o=>s.id===o)).filter(s=>s.members.some(o=>o===e));let i;if(n.length===0||this.ignoredRooms.length>0){Re.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const s=yield(yield this.client.promise).createTrustedPrivateRoom(e);i=yield(yield this.client.promise).getRoomById(s),Re.log("getRelevantJoinedRoom",`waiting for other party to join room: ${i.id}`),yield this.waitForJoin(s),Re.log("getRelevantJoinedRoom",`new room created and peer invited: ${i.id}`)}else i=n[0],Re.log("getRelevantJoinedRoom",`channel already open, reusing room ${i.id}`);return i})}}var Ds=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const jd=new Zr("P2PTransport");class fO extends J2{constructor(e,r,n,i,s,o,a){super(e,new cO(e,r,1,n,i,o,a),new Zf(n,s)),this.type=Zs.P2P}static isAvailable(){return Ds(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Ds(this,void 0,void 0,function*(){if(this._isConnected!==an.NOT_CONNECTED)return;jd.log("connect"),this._isConnected=an.CONNECTING,yield this.client.start();const r=yield this.getPeers();if(r.length>0){jd.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Ds(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>jd.error("connect",i))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return Ds(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return Ds(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Ds(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Ds(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,r=>{const n={origin:xn.P2P,id:e};this.notifyListeners(r,n).catch(i=>{throw i})}).catch(r=>{throw r})})}}var mi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class uO extends QI{constructor(){super(...arguments),this.activeListeners=new Map}init(){return mi(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,r){return mi(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const n=(i,s)=>mi(this,void 0,void 0,function*(){try{const o=yield this.decryptMessage(e,i.encryptedPayload);r(o,s)}catch{}});this.activeListeners.set(e,n)})}sendMessage(e,r){return mi(this,void 0,void 0,function*(){const n=yield this.encryptMessage(r.publicKey,e),i=r?.extensionId,s={target:Ki.EXTENSION,encryptedPayload:n,targetId:i};st.postMessage(s,st.location.origin)})}listenForChannelOpening(e){return mi(this,void 0,void 0,function*(){const r=n=>mi(this,void 0,void 0,function*(){var i,s;if(n.source!==st||n.origin!==st.location.origin)return;const o=(i=n?.data)===null||i===void 0?void 0:i.message;if(o&&o.target===Ki.PAGE&&(yield this.isChannelOpenMessage(o))){const a=Buffer.from(o.payload,"hex");if(a.length>=Jf+Yf)try{const c=JSON.parse(yield $2(a,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},c),{senderId:yield ta(c.publicKey),extensionId:(s=n?.data)===null||s===void 0?void 0:s.sender.id}))}catch{}}});st.addEventListener("message",r)})}sendPairingRequest(e){return mi(this,void 0,void 0,function*(){const r={target:Ki.EXTENSION,payload:yield new eo().serialize(yield this.getPairingRequestInfo()),targetId:e};st.postMessage(r,st.location.origin)})}isChannelOpenMessage(e){return mi(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return mi(this,void 0,void 0,function*(){st.addEventListener("message",e=>{if(!(e.source!==st||e.origin!==st.location.origin)&&typeof e=="object"&&e){const r=e.data;r.message&&r.message.target===Ki.PAGE&&this.activeListeners.forEach(n=>{n(r.message,{origin:xn.EXTENSION,id:r.sender.id||""})})}})})}}var Us=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const La=new Zr("PostMessageTransport");let Xg=!1,Ca,Yn;const lO=t=>{Yn||(Yn=[]),Yn.some(e=>e.id===t.id)||(Yn.push(t),st.postMessage("extensionsUpdated",st.location.origin))};class Mc extends J2{constructor(e,r,n,i){super(e,new uO(e,r),new Zf(n,i)),this.type=Zs.POST_MESSAGE}static isAvailable(){return Us(this,void 0,void 0,function*(){return new Promise(e=>{const r=i=>{const s=i.data;s&&s.payload==="pong"&&(e(!0),st.removeEventListener("message",r))};st.addEventListener("message",r);const n={target:Ki.EXTENSION,payload:"ping"};st.postMessage(n,st.location.origin)})})}static getAvailableExtensions(){return Us(this,void 0,void 0,function*(){return Ca||Yn||(Yn=[],Ca=new Promise(e=>{Mc.listenForExtensions(),setTimeout(()=>{e(Yn??[])},1e3)}).finally(()=>{Ca=void 0}),Ca)})}static listenForExtensions(){if(Xg)return;const e=n=>{if(n.source!==st||n.origin!==st.location.origin)return;const i=n.data,s=i.sender;i&&i.payload==="pong"&&s&&(La.log("getAvailableExtensions",`extension "${s.name}" is available`,s),lO(s))};st.addEventListener("message",e);const r={target:Ki.EXTENSION,payload:"ping"};st.postMessage(r,st.location.origin),Xg=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Us(this,void 0,void 0,function*(){if(La.log("connect"),this._isConnected!==an.NOT_CONNECTED)return;this._isConnected=an.CONNECTING;const r=yield this.getPeers();if(r.length>0){La.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Us(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>La.error("connect",i))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return Us(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Us(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Us(this,void 0,void 0,function*(){La.log("listen",e),yield this.client.listenForEncryptedMessage(e,(r,n)=>{const i={origin:xn.EXTENSION,id:n.id};this.notifyListeners(r,i).catch(s=>{throw s})}).catch(r=>{throw r})})}}const Jg={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}

.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},nu=(t,e)=>e.test(t.navigator.userAgent),dO=(t,e)=>t.matchMedia(e).matches,Nh=t=>dO(t,"(any-pointer:coarse)"),hO=t=>!!(nu(t,/iPad/i)||nu(t,/Macintosh/i)&&Nh(t)),dy=t=>nu(t,/iPhone|iPod/i)||hO(t),hy=t=>nu(t,/android|sink/i);var iu={},pO={get exports(){return iu},set exports(t){iu=t}};(function(t,e){var r=function(){var n=function(F,j){var E=236,_=17,O=F,x=s[j],y=null,u=0,p=null,b=[],g={},h=function(K,k){u=O*4+17,y=function(m){for(var B=new Array(m),X=0;X<m;X+=1){B[X]=new Array(m);for(var Z=0;Z<m;Z+=1)B[X][Z]=null}return B}(u),S(0,0),S(u-7,0),S(0,u-7),v(),w(),ee(K,k),O>=7&&N(K),p==null&&(p=se(O,x,b)),Y(p,k)},S=function(K,k){for(var m=-1;m<=7;m+=1)if(!(K+m<=-1||u<=K+m))for(var B=-1;B<=7;B+=1)k+B<=-1||u<=k+B||(0<=m&&m<=6&&(B==0||B==6)||0<=B&&B<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=B&&B<=4?y[K+m][k+B]=!0:y[K+m][k+B]=!1)},T=function(){for(var K=0,k=0,m=0;m<8;m+=1){h(!0,m);var B=a.getLostPoint(g);(m==0||K>B)&&(K=B,k=m)}return k},w=function(){for(var K=8;K<u-8;K+=1)y[K][6]==null&&(y[K][6]=K%2==0);for(var k=8;k<u-8;k+=1)y[6][k]==null&&(y[6][k]=k%2==0)},v=function(){for(var K=a.getPatternPosition(O),k=0;k<K.length;k+=1)for(var m=0;m<K.length;m+=1){var B=K[k],X=K[m];if(y[B][X]==null)for(var Z=-2;Z<=2;Z+=1)for(var ce=-2;ce<=2;ce+=1)Z==-2||Z==2||ce==-2||ce==2||Z==0&&ce==0?y[B+Z][X+ce]=!0:y[B+Z][X+ce]=!1}},N=function(K){for(var k=a.getBCHTypeNumber(O),m=0;m<18;m+=1){var B=!K&&(k>>m&1)==1;y[Math.floor(m/3)][m%3+u-8-3]=B}for(var m=0;m<18;m+=1){var B=!K&&(k>>m&1)==1;y[m%3+u-8-3][Math.floor(m/3)]=B}},ee=function(K,k){for(var m=x<<3|k,B=a.getBCHTypeInfo(m),X=0;X<15;X+=1){var Z=!K&&(B>>X&1)==1;X<6?y[X][8]=Z:X<8?y[X+1][8]=Z:y[u-15+X][8]=Z}for(var X=0;X<15;X+=1){var Z=!K&&(B>>X&1)==1;X<8?y[8][u-X-1]=Z:X<9?y[8][15-X-1+1]=Z:y[8][15-X-1]=Z}y[u-8][8]=!K},Y=function(K,k){for(var m=-1,B=u-1,X=7,Z=0,ce=a.getMaskFunction(k),ie=u-1;ie>0;ie-=2)for(ie==6&&(ie-=1);;){for(var de=0;de<2;de+=1)if(y[B][ie-de]==null){var ye=!1;Z<K.length&&(ye=(K[Z]>>>X&1)==1);var ue=ce(B,ie-de);ue&&(ye=!ye),y[B][ie-de]=ye,X-=1,X==-1&&(Z+=1,X=7)}if(B+=m,B<0||u<=B){B-=m,m=-m;break}}},ne=function(K,k){for(var m=0,B=0,X=0,Z=new Array(k.length),ce=new Array(k.length),ie=0;ie<k.length;ie+=1){var de=k[ie].dataCount,ye=k[ie].totalCount-de;B=Math.max(B,de),X=Math.max(X,ye),Z[ie]=new Array(de);for(var ue=0;ue<Z[ie].length;ue+=1)Z[ie][ue]=255&K.getBuffer()[ue+m];m+=de;var Ee=a.getErrorCorrectPolynomial(ye),xe=l(Z[ie],Ee.getLength()-1),me=xe.mod(Ee);ce[ie]=new Array(Ee.getLength()-1);for(var ue=0;ue<ce[ie].length;ue+=1){var ge=ue+me.getLength()-ce[ie].length;ce[ie][ue]=ge>=0?me.getAt(ge):0}}for(var Oe=0,ue=0;ue<k.length;ue+=1)Oe+=k[ue].totalCount;for(var ve=new Array(Oe),he=0,ue=0;ue<B;ue+=1)for(var ie=0;ie<k.length;ie+=1)ue<Z[ie].length&&(ve[he]=Z[ie][ue],he+=1);for(var ue=0;ue<X;ue+=1)for(var ie=0;ie<k.length;ie+=1)ue<ce[ie].length&&(ve[he]=ce[ie][ue],he+=1);return ve},se=function(K,k,m){for(var B=f.getRSBlocks(K,k),X=d(),Z=0;Z<m.length;Z+=1){var ce=m[Z];X.put(ce.getMode(),4),X.put(ce.getLength(),a.getLengthInBits(ce.getMode(),K)),ce.write(X)}for(var ie=0,Z=0;Z<B.length;Z+=1)ie+=B[Z].dataCount;if(X.getLengthInBits()>ie*8)throw"code length overflow. ("+X.getLengthInBits()+">"+ie*8+")";for(X.getLengthInBits()+4<=ie*8&&X.put(0,4);X.getLengthInBits()%8!=0;)X.putBit(!1);for(;!(X.getLengthInBits()>=ie*8||(X.put(E,8),X.getLengthInBits()>=ie*8));)X.put(_,8);return ne(X,B)};g.addData=function(K,k){k=k||"Byte";var m=null;switch(k){case"Numeric":m=I(K);break;case"Alphanumeric":m=P(K);break;case"Byte":m=L(K);break;case"Kanji":m=H(K);break;default:throw"mode:"+k}b.push(m),p=null},g.isDark=function(K,k){if(K<0||u<=K||k<0||u<=k)throw K+","+k;return y[K][k]},g.getModuleCount=function(){return u},g.make=function(){if(O<1){for(var K=1;K<40;K++){for(var k=f.getRSBlocks(K,x),m=d(),B=0;B<b.length;B++){var X=b[B];m.put(X.getMode(),4),m.put(X.getLength(),a.getLengthInBits(X.getMode(),K)),X.write(m)}for(var Z=0,B=0;B<k.length;B++)Z+=k[B].dataCount;if(m.getLengthInBits()<=Z*8)break}O=K}h(!1,T())},g.createTableTag=function(K,k){K=K||2,k=typeof k>"u"?K*4:k;var m="";m+='<table style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: "+k+"px;",m+='">',m+="<tbody>";for(var B=0;B<g.getModuleCount();B+=1){m+="<tr>";for(var X=0;X<g.getModuleCount();X+=1)m+='<td style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: 0px;",m+=" width: "+K+"px;",m+=" height: "+K+"px;",m+=" background-color: ",m+=g.isDark(B,X)?"#000000":"#ffffff",m+=";",m+='"/>';m+="</tr>"}return m+="</tbody>",m+="</table>",m},g.createSvgTag=function(K,k,m,B){var X={};typeof arguments[0]=="object"&&(X=arguments[0],K=X.cellSize,k=X.margin,m=X.alt,B=X.title),K=K||2,k=typeof k>"u"?K*4:k,m=typeof m=="string"?{text:m}:m||{},m.text=m.text||null,m.id=m.text?m.id||"qrcode-description":null,B=typeof B=="string"?{text:B}:B||{},B.text=B.text||null,B.id=B.text?B.id||"qrcode-title":null;var Z=g.getModuleCount()*K+k*2,ce,ie,de,ye,ue="",Ee;for(Ee="l"+K+",0 0,"+K+" -"+K+",0 0,-"+K+"z ",ue+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ue+=X.scalable?"":' width="'+Z+'px" height="'+Z+'px"',ue+=' viewBox="0 0 '+Z+" "+Z+'" ',ue+=' preserveAspectRatio="xMinYMin meet"',ue+=B.text||m.text?' role="img" aria-labelledby="'+ae([B.id,m.id].join(" ").trim())+'"':"",ue+=">",ue+=B.text?'<title id="'+ae(B.id)+'">'+ae(B.text)+"</title>":"",ue+=m.text?'<description id="'+ae(m.id)+'">'+ae(m.text)+"</description>":"",ue+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ue+='<path d="',de=0;de<g.getModuleCount();de+=1)for(ye=de*K+k,ce=0;ce<g.getModuleCount();ce+=1)g.isDark(de,ce)&&(ie=ce*K+k,ue+="M"+ie+","+ye+Ee);return ue+='" stroke="transparent" fill="black"/>',ue+="</svg>",ue},g.createDataURL=function(K,k){K=K||2,k=typeof k>"u"?K*4:k;var m=g.getModuleCount()*K+k*2,B=k,X=m-k;return U(m,m,function(Z,ce){if(B<=Z&&Z<X&&B<=ce&&ce<X){var ie=Math.floor((Z-B)/K),de=Math.floor((ce-B)/K);return g.isDark(de,ie)?0:1}else return 1})},g.createImgTag=function(K,k,m){K=K||2,k=typeof k>"u"?K*4:k;var B=g.getModuleCount()*K+k*2,X="";return X+="<img",X+=' src="',X+=g.createDataURL(K,k),X+='"',X+=' width="',X+=B,X+='"',X+=' height="',X+=B,X+='"',m&&(X+=' alt="',X+=ae(m),X+='"'),X+="/>",X};var ae=function(K){for(var k="",m=0;m<K.length;m+=1){var B=K.charAt(m);switch(B){case"<":k+="&lt;";break;case">":k+="&gt;";break;case"&":k+="&amp;";break;case'"':k+="&quot;";break;default:k+=B;break}}return k},W=function(K){var k=1;K=typeof K>"u"?k*2:K;var m=g.getModuleCount()*k+K*2,B=K,X=m-K,Z,ce,ie,de,ye,ue={"██":"█","█ ":"▀"," █":"▄","  ":" "},Ee={"██":"▀","█ ":"▀"," █":" ","  ":" "},xe="";for(Z=0;Z<m;Z+=2){for(ie=Math.floor((Z-B)/k),de=Math.floor((Z+1-B)/k),ce=0;ce<m;ce+=1)ye="█",B<=ce&&ce<X&&B<=Z&&Z<X&&g.isDark(ie,Math.floor((ce-B)/k))&&(ye=" "),B<=ce&&ce<X&&B<=Z+1&&Z+1<X&&g.isDark(de,Math.floor((ce-B)/k))?ye+=" ":ye+="█",xe+=K<1&&Z+1>=X?Ee[ye]:ue[ye];xe+=`
`}return m%2&&K>0?xe.substring(0,xe.length-m-1)+Array(m+1).join("▀"):xe.substring(0,xe.length-1)};return g.createASCII=function(K,k){if(K=K||1,K<2)return W(k);K-=1,k=typeof k>"u"?K*2:k;var m=g.getModuleCount()*K+k*2,B=k,X=m-k,Z,ce,ie,de,ye=Array(K+1).join("██"),ue=Array(K+1).join("  "),Ee="",xe="";for(Z=0;Z<m;Z+=1){for(ie=Math.floor((Z-B)/K),xe="",ce=0;ce<m;ce+=1)de=1,B<=ce&&ce<X&&B<=Z&&Z<X&&g.isDark(ie,Math.floor((ce-B)/K))&&(de=0),xe+=de?ye:ue;for(ie=0;ie<K;ie+=1)Ee+=xe+`
`}return Ee.substring(0,Ee.length-1)},g.renderTo2dContext=function(K,k){k=k||2;for(var m=g.getModuleCount(),B=0;B<m;B++)for(var X=0;X<m;X++)K.fillStyle=g.isDark(B,X)?"black":"white",K.fillRect(B*k,X*k,k,k)},g};n.stringToBytesFuncs={default:function(F){for(var j=[],E=0;E<F.length;E+=1){var _=F.charCodeAt(E);j.push(_&255)}return j}},n.stringToBytes=n.stringToBytesFuncs.default,n.createStringToBytes=function(F,j){var E=function(){for(var O=C(F),x=function(){var w=O.read();if(w==-1)throw"eof";return w},y=0,u={};;){var p=O.read();if(p==-1)break;var b=x(),g=x(),h=x(),S=String.fromCharCode(p<<8|b),T=g<<8|h;u[S]=T,y+=1}if(y!=j)throw y+" != "+j;return u}(),_="?".charCodeAt(0);return function(O){for(var x=[],y=0;y<O.length;y+=1){var u=O.charCodeAt(y);if(u<128)x.push(u);else{var p=E[O.charAt(y)];typeof p=="number"?(p&255)==p?x.push(p):(x.push(p>>>8),x.push(p&255)):x.push(_)}}return x}};var i={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},s={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var F=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],j=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,E=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,_=1<<14|1<<12|1<<10|1<<4|1<<1,O={},x=function(y){for(var u=0;y!=0;)u+=1,y>>>=1;return u};return O.getBCHTypeInfo=function(y){for(var u=y<<10;x(u)-x(j)>=0;)u^=j<<x(u)-x(j);return(y<<10|u)^_},O.getBCHTypeNumber=function(y){for(var u=y<<12;x(u)-x(E)>=0;)u^=E<<x(u)-x(E);return y<<12|u},O.getPatternPosition=function(y){return F[y-1]},O.getMaskFunction=function(y){switch(y){case o.PATTERN000:return function(u,p){return(u+p)%2==0};case o.PATTERN001:return function(u,p){return u%2==0};case o.PATTERN010:return function(u,p){return p%3==0};case o.PATTERN011:return function(u,p){return(u+p)%3==0};case o.PATTERN100:return function(u,p){return(Math.floor(u/2)+Math.floor(p/3))%2==0};case o.PATTERN101:return function(u,p){return u*p%2+u*p%3==0};case o.PATTERN110:return function(u,p){return(u*p%2+u*p%3)%2==0};case o.PATTERN111:return function(u,p){return(u*p%3+(u+p)%2)%2==0};default:throw"bad maskPattern:"+y}},O.getErrorCorrectPolynomial=function(y){for(var u=l([1],0),p=0;p<y;p+=1)u=u.multiply(l([1,c.gexp(p)],0));return u},O.getLengthInBits=function(y,u){if(1<=u&&u<10)switch(y){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw"mode:"+y}else if(u<27)switch(y){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw"mode:"+y}else if(u<41)switch(y){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw"mode:"+y}else throw"type:"+u},O.getLostPoint=function(y){for(var u=y.getModuleCount(),p=0,b=0;b<u;b+=1)for(var g=0;g<u;g+=1){for(var h=0,S=y.isDark(b,g),T=-1;T<=1;T+=1)if(!(b+T<0||u<=b+T))for(var w=-1;w<=1;w+=1)g+w<0||u<=g+w||T==0&&w==0||S==y.isDark(b+T,g+w)&&(h+=1);h>5&&(p+=3+h-5)}for(var b=0;b<u-1;b+=1)for(var g=0;g<u-1;g+=1){var v=0;y.isDark(b,g)&&(v+=1),y.isDark(b+1,g)&&(v+=1),y.isDark(b,g+1)&&(v+=1),y.isDark(b+1,g+1)&&(v+=1),(v==0||v==4)&&(p+=3)}for(var b=0;b<u;b+=1)for(var g=0;g<u-6;g+=1)y.isDark(b,g)&&!y.isDark(b,g+1)&&y.isDark(b,g+2)&&y.isDark(b,g+3)&&y.isDark(b,g+4)&&!y.isDark(b,g+5)&&y.isDark(b,g+6)&&(p+=40);for(var g=0;g<u;g+=1)for(var b=0;b<u-6;b+=1)y.isDark(b,g)&&!y.isDark(b+1,g)&&y.isDark(b+2,g)&&y.isDark(b+3,g)&&y.isDark(b+4,g)&&!y.isDark(b+5,g)&&y.isDark(b+6,g)&&(p+=40);for(var N=0,g=0;g<u;g+=1)for(var b=0;b<u;b+=1)y.isDark(b,g)&&(N+=1);var ee=Math.abs(100*N/u/u-50)/5;return p+=ee*10,p},O}(),c=function(){for(var F=new Array(256),j=new Array(256),E=0;E<8;E+=1)F[E]=1<<E;for(var E=8;E<256;E+=1)F[E]=F[E-4]^F[E-5]^F[E-6]^F[E-8];for(var E=0;E<255;E+=1)j[F[E]]=E;var _={};return _.glog=function(O){if(O<1)throw"glog("+O+")";return j[O]},_.gexp=function(O){for(;O<0;)O+=255;for(;O>=256;)O-=255;return F[O]},_}();function l(F,j){if(typeof F.length>"u")throw F.length+"/"+j;var E=function(){for(var O=0;O<F.length&&F[O]==0;)O+=1;for(var x=new Array(F.length-O+j),y=0;y<F.length-O;y+=1)x[y]=F[y+O];return x}(),_={};return _.getAt=function(O){return E[O]},_.getLength=function(){return E.length},_.multiply=function(O){for(var x=new Array(_.getLength()+O.getLength()-1),y=0;y<_.getLength();y+=1)for(var u=0;u<O.getLength();u+=1)x[y+u]^=c.gexp(c.glog(_.getAt(y))+c.glog(O.getAt(u)));return l(x,0)},_.mod=function(O){if(_.getLength()-O.getLength()<0)return _;for(var x=c.glog(_.getAt(0))-c.glog(O.getAt(0)),y=new Array(_.getLength()),u=0;u<_.getLength();u+=1)y[u]=_.getAt(u);for(var u=0;u<O.getLength();u+=1)y[u]^=c.gexp(c.glog(O.getAt(u))+x);return l(y,0).mod(O)},_}var f=function(){var F=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j=function(O,x){var y={};return y.totalCount=O,y.dataCount=x,y},E={},_=function(O,x){switch(x){case s.L:return F[(O-1)*4+0];case s.M:return F[(O-1)*4+1];case s.Q:return F[(O-1)*4+2];case s.H:return F[(O-1)*4+3];default:return}};return E.getRSBlocks=function(O,x){var y=_(O,x);if(typeof y>"u")throw"bad rs block @ typeNumber:"+O+"/errorCorrectionLevel:"+x;for(var u=y.length/3,p=[],b=0;b<u;b+=1)for(var g=y[b*3+0],h=y[b*3+1],S=y[b*3+2],T=0;T<g;T+=1)p.push(j(h,S));return p},E}(),d=function(){var F=[],j=0,E={};return E.getBuffer=function(){return F},E.getAt=function(_){var O=Math.floor(_/8);return(F[O]>>>7-_%8&1)==1},E.put=function(_,O){for(var x=0;x<O;x+=1)E.putBit((_>>>O-x-1&1)==1)},E.getLengthInBits=function(){return j},E.putBit=function(_){var O=Math.floor(j/8);F.length<=O&&F.push(0),_&&(F[O]|=128>>>j%8),j+=1},E},I=function(F){var j=i.MODE_NUMBER,E=F,_={};_.getMode=function(){return j},_.getLength=function(y){return E.length},_.write=function(y){for(var u=E,p=0;p+2<u.length;)y.put(O(u.substring(p,p+3)),10),p+=3;p<u.length&&(u.length-p==1?y.put(O(u.substring(p,p+1)),4):u.length-p==2&&y.put(O(u.substring(p,p+2)),7))};var O=function(y){for(var u=0,p=0;p<y.length;p+=1)u=u*10+x(y.charAt(p));return u},x=function(y){if("0"<=y&&y<="9")return y.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+y};return _},P=function(F){var j=i.MODE_ALPHA_NUM,E=F,_={};_.getMode=function(){return j},_.getLength=function(x){return E.length},_.write=function(x){for(var y=E,u=0;u+1<y.length;)x.put(O(y.charAt(u))*45+O(y.charAt(u+1)),11),u+=2;u<y.length&&x.put(O(y.charAt(u)),6)};var O=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-"0".charCodeAt(0);if("A"<=x&&x<="Z")return x.charCodeAt(0)-"A".charCodeAt(0)+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return _},L=function(F){var j=i.MODE_8BIT_BYTE,E=n.stringToBytes(F),_={};return _.getMode=function(){return j},_.getLength=function(O){return E.length},_.write=function(O){for(var x=0;x<E.length;x+=1)O.put(E[x],8)},_},H=function(F){var j=i.MODE_KANJI,E=n.stringToBytesFuncs.SJIS;if(!E)throw"sjis not supported.";(function(x,y){var u=E(x);if(u.length!=2||(u[0]<<8|u[1])!=y)throw"sjis not supported."})("友",38726);var _=E(F),O={};return O.getMode=function(){return j},O.getLength=function(x){return~~(_.length/2)},O.write=function(x){for(var y=_,u=0;u+1<y.length;){var p=(255&y[u])<<8|255&y[u+1];if(33088<=p&&p<=40956)p-=33088;else if(57408<=p&&p<=60351)p-=49472;else throw"illegal char at "+(u+1)+"/"+p;p=(p>>>8&255)*192+(p&255),x.put(p,13),u+=2}if(u<y.length)throw"illegal char at "+(u+1)},O},q=function(){var F=[],j={};return j.writeByte=function(E){F.push(E&255)},j.writeShort=function(E){j.writeByte(E),j.writeByte(E>>>8)},j.writeBytes=function(E,_,O){_=_||0,O=O||E.length;for(var x=0;x<O;x+=1)j.writeByte(E[x+_])},j.writeString=function(E){for(var _=0;_<E.length;_+=1)j.writeByte(E.charCodeAt(_))},j.toByteArray=function(){return F},j.toString=function(){var E="";E+="[";for(var _=0;_<F.length;_+=1)_>0&&(E+=","),E+=F[_];return E+="]",E},j},G=function(){var F=0,j=0,E=0,_="",O={},x=function(u){_+=String.fromCharCode(y(u&63))},y=function(u){if(!(u<0)){if(u<26)return 65+u;if(u<52)return 97+(u-26);if(u<62)return 48+(u-52);if(u==62)return 43;if(u==63)return 47}throw"n:"+u};return O.writeByte=function(u){for(F=F<<8|u&255,j+=8,E+=1;j>=6;)x(F>>>j-6),j-=6},O.flush=function(){if(j>0&&(x(F<<6-j),F=0,j=0),E%3!=0)for(var u=3-E%3,p=0;p<u;p+=1)_+="="},O.toString=function(){return _},O},C=function(F){var j=F,E=0,_=0,O=0,x={};x.read=function(){for(;O<8;){if(E>=j.length){if(O==0)return-1;throw"unexpected end of file./"+O}var u=j.charAt(E);if(E+=1,u=="=")return O=0,-1;if(u.match(/^\s$/))continue;_=_<<6|y(u.charCodeAt(0)),O+=6}var p=_>>>O-8&255;return O-=8,p};var y=function(u){if(65<=u&&u<=90)return u-65;if(97<=u&&u<=122)return u-97+26;if(48<=u&&u<=57)return u-48+52;if(u==43)return 62;if(u==47)return 63;throw"c:"+u};return x},V=function(F,j){var E=F,_=j,O=new Array(F*j),x={};x.setPixel=function(b,g,h){O[g*E+b]=h},x.write=function(b){b.writeString("GIF87a"),b.writeShort(E),b.writeShort(_),b.writeByte(128),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(255),b.writeByte(255),b.writeByte(255),b.writeString(","),b.writeShort(0),b.writeShort(0),b.writeShort(E),b.writeShort(_),b.writeByte(0);var g=2,h=u(g);b.writeByte(g);for(var S=0;h.length-S>255;)b.writeByte(255),b.writeBytes(h,S,255),S+=255;b.writeByte(h.length-S),b.writeBytes(h,S,h.length-S),b.writeByte(0),b.writeString(";")};var y=function(b){var g=b,h=0,S=0,T={};return T.write=function(w,v){if(w>>>v)throw"length over";for(;h+v>=8;)g.writeByte(255&(w<<h|S)),v-=8-h,w>>>=8-h,S=0,h=0;S=w<<h|S,h=h+v},T.flush=function(){h>0&&g.writeByte(S)},T},u=function(b){for(var g=1<<b,h=(1<<b)+1,S=b+1,T=p(),w=0;w<g;w+=1)T.add(String.fromCharCode(w));T.add(String.fromCharCode(g)),T.add(String.fromCharCode(h));var v=q(),N=y(v);N.write(g,S);var ee=0,Y=String.fromCharCode(O[ee]);for(ee+=1;ee<O.length;){var ne=String.fromCharCode(O[ee]);ee+=1,T.contains(Y+ne)?Y=Y+ne:(N.write(T.indexOf(Y),S),T.size()<4095&&(T.size()==1<<S&&(S+=1),T.add(Y+ne)),Y=ne)}return N.write(T.indexOf(Y),S),N.write(h,S),N.flush(),v.toByteArray()},p=function(){var b={},g=0,h={};return h.add=function(S){if(h.contains(S))throw"dup key:"+S;b[S]=g,g+=1},h.size=function(){return g},h.indexOf=function(S){return b[S]},h.contains=function(S){return typeof b[S]<"u"},h};return x},U=function(F,j,E){for(var _=V(F,j),O=0;O<j;O+=1)for(var x=0;x<F;x+=1)_.setPixel(x,O,E(x,O));var y=q();_.write(y);for(var u=G(),p=y.toByteArray(),b=0;b<p.length;b+=1)u.writeByte(p[b]);return u.flush(),"data:image/gif;base64,"+u};return n}();(function(){r.stringToBytesFuncs["UTF-8"]=function(n){function i(s){for(var o=[],a=0;a<s.length;a++){var c=s.charCodeAt(a);c<128?o.push(c):c<2048?o.push(192|c>>6,128|c&63):c<55296||c>=57344?o.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return o}return i(n)}})(),function(n){t.exports=n()}(function(){return r})})(pO);const gO=iu,bO=Ry({__proto__:null,default:gO},[iu]),vO=new Zr("QR"),mO=(t,e)=>{const i=bO(0,"L");t.length>500&&vO.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(i.addData(t),i.make(),e==="svg")return i.createSvgTag();if(e==="ascii"){const s=i.getModuleCount(),o="\x1B[40m  \x1B[0m",a="\x1B[47m  \x1B[0m",c=new Array(s+3).join(a),l=new Array(s+3).join(o);let f="";f+=`${l}
`,f+=`${c}
`;for(let d=0;d<s;d++){f+=a;for(let I=0;I<s;I++)f+=i.isDark(d,I)?o:a;f+=`${a}
`}return f+=c,f+=l,f}else return i.createDataURL()}catch(s){throw console.error("error",s),s}},Ua=(t,e)=>`${t}?type=tzip10&data=${e}`,yO=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIIElEQVR4Ae3Ba5BeZWEA4Oc9u9kkJGHZkIQkLhQziQmVBpJwOTDg7saKEIQwnYq2/WWnUjuxHTOOgbYq77ZqSVGrtZliae2P/gE74zQIodoZEmwrR6pQlTYJ0DWNuWAChBBIyN7exsGZL2e/3Xy3Xf3RPI+zzvr/LfgFyGMKCMPHX/JT7eec75RUxJD8nAVTKI/JKe1YjquxEsuwCHOPH/phm9ER5yy8fAQv4yCeww/wHezGcBGDqRJMgTymaejD+3AjFhvHC09+SRodtijfaAIH8CgexI4ihiGTLJhEeUzn4Q58CG9Vw7MP/po0OmL5b2xVhx/hPny5iOGoSRJMgjymmfgwNmGeOowOnfD0F5eQRq36yIBs2ix1OoR7saWI4YQWBS3IYwrowxasMLGEo3gK/4UfDXz9d+ce+t79HydZsPp3PrPk1vtfxBK8HatxLoKJ7cQGbC9i0KygSXlM0/EpbESbagl78QAewneLGAZVbMTnvWkT7vUzeUwduBK34b24CEG1YXwOdxcxnNSEoAl5TAvwAPpUS3gS9+CRIoYh43sYN3vTNtxsHHlMHViHu3AVgmqP4f1FDIc1KGhQHtMSPIIVqu3GXXioiGHUxGZhAAu86UUswTETyGPKsB6bsUy1nXhPEcOABgQNyGNagn/BEmXD+BI+WcTwmtquxJPKrsUTashjmo0/we+jXdkA3lXEMKBOQZ3ymBbgcaxQdgQfKGLYqn6bsFnZH+HP1CmP6TZ8BV3KdqKniOGwOrSpQx7TdGzFFcr24sYihsc15hNYqmwU/6BO+3b07+rujd/EOnSqmI813b3xwX07+kfUkKkhjyngU+hVthfvLmL4vsbMwRrVrkCnBhQxPI0b8GNla9Gfx6SWTG192KjsCG4tYtilcZdinmpdWKlBRQy7sB5HlH0UfWrInEEe00xsQZuKYXygiOH7mvOrJtarCUUMT+O3MayiHVvymGY6g8yZfRgrlP1lEcNWzesxsT5NKmL4J2xRdgk2OIPMBPKYunCnst24W/POxWoTW43zNO8TeF7Zx/KYOk0gM7EP4nwVCXcVMbymeavQZWKdWKVJRQzHsAlJxQLcYQKZceQxTcPvKfs2HtKatWrr1ZqteFLZh/KY2o0jM761uFhFwr1FDKNa06O2Pi0oYhjFPUgqlqDXODJj5DE55XZl/4ttWtOFy9V2OeZqzTbsVXa7cWSqteNGZQ8UMQxpzRXoVNscrNGCIoZB/KOydXlMbcbIVFuOxSoSvq51PerXo3VbkVS8BcuNkal2jbKj+K7WBPSq31oErfkPvKrsamNkql2q7HtFDINaMxeXqd9KnK8FRQwn8bSylcbIVFum7L+17irMVr9ZuFLrnlG21BiZ0+QxBSxWNqB1PRrXq3V7lC3OYwpOkykL6FJ2WGsCejVuLYLWHFI2F8FpMtVmKntda+Zjpca9HfO1ZlBZZozM1LsaMzVuJq42xTLVTiibpTU9mterNR3KRo2RKUs4omy+5mVYq3l9yDRvgbKXkZwmc5oihoQDypZo3gW4RPMuwQWad7GyA0UMyWky1Z5T9sual2OG5s1ArnmXKnveGJlqzyhbk8fUoTl9WterCXlM07FK2Q+Mkan2hLJOXKFxbejVuj60adyVOFfZd4yRqbYbB1QE3KJxC7Fc65ZjocatR1CxH7uNkak2jH9W9v48pmkacy06tK4D12pAHlMH3qtsWxHDiDEyYxQxOOWryn4J6zTmnSZPn8bcjIuUfdU4MuN7DHtUBHwsjylTnzZcb/L0oE0d8pgy3ImgYgA7jCMzjiKGIfy1smtxq/osxttMnrdhsfqsx1XK7itiGDaOzMTux0sqAu7JY5qttneg3eRpx3VqyGOagz9HUHEIf2MCmQkUMRzBZmXL0a+2PpNvrdr+FEuV3VvEcNQEMmf2V9il7A/ymNabWDuuM/muR7sJ5DHdhg3KdmKLM8icQRHDCWzAiIp2/H0e02XGdyGWmnxL0W0ceUyr8BW0qxjGhiKGE84gU9t2/IWyLjyUx7RCtR60mXxtuM4YeUwrsBVdyj6H7WrI1FDEkPBxbFd2Eb6Rx3SZsl5T551Ok8e0Ct/Ehcoew91FDGppU4d9O/pHunvjo7gF81R04n3dvXH3vh39uzANmzHX1JiN+zCax3QbvoYLlO3Ee4oYXlWHNnXat6P/9e7e+ChuQZeKmfj17t7YdeTZh38ydOzgnQimxnmzFq/52pqPHrgTn8UsZQO4qYhhvzq1acC+Hf1Hunvjw3g35qnIcI00+puvPPvIDFMnXNjX/1uzFq3pQaZsJ24qYhjQgEyDihgG0IPtxji299/mmGKv7nl8jmqPoaeIYUCDMk0oYjiEm/BZjDgljQw6tvffTbVjP/62NDLoZ4axGeuKGA5rQqZJRQwnsQk3YNcbL/+Pk6/sMdVOvrLHyVf2OGUnbsBdRQwnNSmYBHlMM/d/69Mb9//rZzaNDh3vNIWy9hlHu3s+uXnx9X/4hSKGE1oUTKKLb/ri/ENP/d2GwVf33zF84qVFJlH7jK4XOjq7vyylLccPPXPYJAmmwII1H+x44+Xn140Onbj9jRd33zj8xpEuTWibcd6R6Z0XfaN9ZteDM+Yu23boqb8dNMmCKfSWd/yx0eGT04ZeO3j56wefytPwyV8ZOv7israO2RekkcFFieCUQAptHQdHBl/7ybRz5j0X2qf/cNai1cW02Qv/M2ufMbT/W582VYJfgEXXfCQMHXshS2nET4XQZtqchaMHn/hCctZZZ/08/R8wPGmSSU1PIgAAAABJRU5ErkJggg==",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAGbElEQVR4Ae3B32/ddR3H8efr/f1+z2m7dT1n3Vp+De22EsxmxARvCNDGhBvDj3/AaxdMJEpIUAOJxl8IXJnFGyNX3i3BiEG9ELIqZNSLmRBYYD+7CS3tuv5Y23N6es7n87Zd2uULxAXDt2cmnseDjo6Ojo6Ojo6Ojo7/S6Jgje/sGdTdu1+2ewZvwwQSMsAEJjCBBCYwwAQSMoEJDDCBBCYwgQmJN3XLH79JwUSBGt/dO4jzmqrlQ/bQEJhAQgaYwAQmkMAEBphAQiYwgQEmkMAEJjAhsYxU1eArLQpkFKTx5MAg0mskOuTLTVgLFErsBO6lYEZRTN8i0SESgQmfq1M4MUrBUoqS6E2xTgIBc6twWy8bfLkJszWukfgUgZMj1okN6iujQ3vYNAI8R4FSCiLTCaQGoozA51cRmxotwvFLEBxChOAQHYJDiHhwCA7RIUQIDsEBRweqZF/qBxPr7vfLj6Xa+4cWBUkpSOkXU/W1Z28fRzwIgloTmgFKKezuJnn4IAiQQIDENQIkJECsEwgQ+L+WCK9fxCeX0Z29rNsJ3Au8RUFSipTYGOJBNkj4QgMNpEjAQA+YwAQSmMAAE0jIBCYwwAQS2ttD+NM5/PQc3NnLNWIUeIuCGEVKdJxEkBgkgoUGn8uuMvSWiKeukDNCgYwiJTpBYg0SQSL8aoP/RnhtApyPSY98leTRg+Tc71ceSymIUaDSDy/WSTROIkgMVlvQinwW8Z3LhGPv49Mr5OmWHejOXeTsBN1LQYyimY0pMZQIJYKlBp+FBnaAwE/P8xmMUpCUginVceBZJAiR8Oo5MKHUIDVIDUoJ9pUBdFeVLRroQdUu4pk5bHQfG/zSVcKJD1EpgVICpQSVzCmnH1CQlKKZTiA1CLEcT07jy2uQJZAaZAalBB2s4HN1RJU83bUbPzMPDgioduFTy1BOoZxAOXVKdiR78tzvKIhRsOyJM3VCHI/jU/jCKh9jQkN9qDuDpTVYDeTZcBVfWsOnV9ig3hKqdLHJcT+SPXnuNxQoZRuEv33wbVbW9pEZeTZcfZSe7HFCxB18ro56etmi4d0g8LPz6NadbEge+uJL4ZWzx3DmSj+Y+AcFS9kGXS+vvgu8C5G8tRcH52jFx3Fng8/W0R29bNFAD6p0Ec8sYA/sY4P27aqUfj75F7aJ0U7BTxLiVYJDK+IzK3yShqv4uXlyRuLkw8Y2Mdqo9PSFFi1/g1aE4LDYgFqLPBuu4str+MwKm/qBw2wTo91CHCM4tCK0HJ9ZIU8HqyDhZxfIGWWbGO3WiscJEYJDiPjUCnna240qZeK5eXJG2CZGu0U/SStepRUhOD65xCfpYBU/v8B10oh/9IixDYw2K/1ssuXB3/AQ8VbE51dhpUmeHajgy018psamfuAw28C4GVpxjOAQIgTHJ5fI04EqkvDzC+SMsg1SbgL1ZL32tVtAYoN2d5OnPd2oUsbPL8B9t7NpBPgVBTParPG9vU95rfmMbutFBypouAr93XyMQPsrxAsL5Iz49KNGwYw2ajw1+BSpvUBm+EyNG9GBCiw38cs1rhH9wGEKZrTJ2vdv/bIye0FZgjLDZ2vciPZXQODnF7hOjFIwo11SO02W1MkMsgTmV7kR9XejvjJ+YZGcEQpmtEnppx82yOwEpQQyw+stWAvciPZXiBOL4GwZ8cuPGQVKaadSMob4OhJEJ/z+DHSlKDPoLZE8cAd0p2zRUAXeuQyzNRjsYV0/cBh4m4IYbaTMjitLkMBPzRLfu4KfmiVOLEK9hV+pk6ehPpCIE4vkjFIgo51SGwfq8Z/T+GKDa7pTbKgP3PGZGnnq70Z9ZfzCIteJEQqU0EY/+fNceOb2cNpn66+T6FUSe9UO7XkQKBMc1gI2XAUJJJDwj1bwS4sk990BEkgDP3r67hd//Pz7TgFS2qz80uIxctbu4RFC/Abu+HyAWgt2ZmzRUB/x1Cx+pY729rCuH3QYeJsCGDdbM4zRjNCM0Az41DJ5+kIfSPjEIjmjFCTlZmvG47iDA9EJf72ITk5DapAIMoNEhPEpfLoGBkg9FCTlZmvFkx79Ku67fHIZ5huQGaSGMoMdGSTCP1omzNbAdBT4JQUxbrLSc1MtmuENv7QEM3U+pRGgGdl0FHiifPSKU5CU/wE+ufI8l2t/JzH+I2eW6L8t/3rO6ejo6Ojo6Ojo6Ojo+Jz+DTK0Yr9D+W0JAAAAAElFTkSuQmCC",link:"https://templewallet.com/"}],EO=[{key:"infinity_wallet",name:"Infinity Wallet",shortName:"Infinity Wallet",color:"rgb(52, 147, 218)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANkUlEQVR4AeXBf5DfdZ0f8Mfr/fl+d5NsdvODIBBJgkIi/iJwAkHUO+/wR394P7wbZ27sdari+Ud7106n7T/tzP5va2c602nnxrmj1Ws7vd5YqjhOiygWT9FDJeGHEqVAAgiEsEKy2c3ufr+fZ2NGcsAJJIF/zn08ynNs23Vd4ZfxMfwytqLzN9sYj+E2/Cd87eEffiV+pvzMtl3XnYM/wm+j+cXU4/P4xMM//MphJ3RO2LbrunNwM65D+cVVeCPet+Gc13/uyFMPLnTbdl3nhD/FdVaP87Frwzmv/x8N78YHrT6/iV9r+Bia1adwfcMvW73e1bDV6nVeQ7N6tWaVa1a5ZpVrVrlmlRtIvDrCeEzrnNSP6QZeFeMxrVHFeExrVHk1DOKVin7degu/8h7HL7vCeOMmEt3cYWu/d4d1f3GrWl52VqosXv0OC3uuNTrvAuk63dEjJu+719StN+ueOkyVV6Iu3PmrI3TORh/HL3+bZ/7e9fqJSRLPU6U7dtTGP/kPJh74EVVOSxhvOdfcJ/6J0XkX0Peep0qlN/2FPzf11Ztp5SyNu5nNr5tFc6bSW7zqHZ75+5+gmkpUqFChQiUymHD8yrebOPCA7vCTKC9ndO555v7pv9LPbFR9VKhQoUIlhOVL30o3MLH/+1Q5C+lmNl80i+ZMJI5fea1nPny9QoUKFSpUqFCh4oRy/Io9Jg4+oDt8iPKixueeZ+4P/6UMJ1WoaipUqFChQoXqY+XiNzAcmNh/L1XOULrpTRfNojld6S295Urz1/2O4cEnDA48YfD4nDa/KJNDhkMSgiCIE8rxK642PPig7qlDKC803nyOp3//X2hHlgx+fNjwoccMHnpcm1/Uz0zRGkEQBH2svH6XDIcm9t9DNWcg3czmHbNoTkd6S7v3mP/Ah9XK2ElVatxrRxZMHHhce/qIbJqmNRUqVKhQytLlewwPPqB76hDlr4zHjnz0Hxuft5XhgNZoTSXaT46a2H+QCTIzoxIVKlSoPkav28XEpIn77qaV05RuZvNFs2heTt9buuIaRz78CQYDGQ4YDhgMGAwYDrVjc2Zu/I/WfvOrlnbvYXINQRDESUtXXGPi4Qd1Tx2iyklV5n/9d+k6uo6JIa1J69Ro2fqvfNa6275kvGmL0dYdJARB0MfKRTtZs9bEfXfTmtOQbmbTjlk0LyWxdPkeR3/3E2o8dlLXGA6ZGMpwaDD3uOkbP00/VqMVa757u6W3XMWatSpUqFChwtLl1xg88qDu8BMkfmr5rVfKuhnlhCoZDrWVJTP//d9rx47Qmsl7vicbNhlv3aESFSpUqD5G2y+RNWtN7L+LKi8j3fSmHbNoXkx6y5dfY/5DH1fjsQoVKlTQmsGhR8185t8xHjlltGLNnd+y/KZfYnKdChUqVKjE8u49Bo88aOmKay1e+2vWfenPLV9+raqmlDZ/xIY//qR25CdOqTLx/TtlZpPx1h2qjwoVKlQfo+2XyJp1hj+8hyovId30xu2zaH6exPLuPeZ/5+P0IQiCOGnwyAEzf/JvWFnxQrWybHLvty2/6ZdkzRRBEARh+bKrjS7aqS0uWvvVm6y54zbdk4+bvPsO6z//X9TCvL+uTPxgr356o/HWHfQIgqCP0faLGUwa3n8PyotIN71pxyyaF0os797j2G9fr/qoUKFChcLwkQNmbvgUoxUvpkYrJvd928qll7NmSoUKFSpUqFCJNbd/WY1GBo89rHviUfrei6oycd8+Wb/ReOsO1UeFChXa0op+81ZZP2P4/+6lys+RbnrT9lk0z5VYvuwaC7/1MZWoUKFChQqDRw+Y/s+fYrTi5dRo2eRd37byhstZO6VChQoVKmidNd/4385IMdy/T9Zv1F+wQyUq1GisFo5rC8eNtl8iMxsN77+b8kLppjdun0VzSqxceoWFD/4+CUEQBKH78QHrP/Nv1WjF6arRiom7/9LKzstk7XqCIAhaZ/Jbt6jRyJkpw/379NMbjc/fwXisLS5pC0tqcYmuM7r4jTIYGj7wfZTnSIuIiIjo101b+PWPqr5XfVQf1Uf1UX0MHn3I+s98itGyiIiIiIiIiIiIiIgIi/Mm7turQvVRfVQf1Udp+rVTIiIiIiIiIiIiIiIiIlKsvemzJr97m7a4ohaW1MKSduw4VWo8tvz29xtt3ykiIiKiCYIgsbznPXRD+tCHPvShj+7HB0x99lOsrBAEQRAEQRAEQRBGF11q6R1/lxQpevShDz1ZN0MQBEEQBEEQBEEQJ5Q1X/ysie99XS0uaYtL6vgya9bQh/HY0js/wHhMEIQBcUo/Ntp5uRr3nq+0QwdN/em/Zjx2tgYP/sD0J/+hzJyj33COftMWmdms33guw6H25KOIs1Zl8qt/pvYs6s+/VNatpZoax0+NX3uJTEyq0YpnDTzXYChTG1Uff6XUM4dNffaT9L1XpEqtLKunHtOeeswpCelpnVesNRPf/oKVK4eW3vVuNe6d0jqZ2aTmDnnWIIlTEnov0Bvuf1DGI5RXReKkKqdUI/GqSIwuupBuQO85In0k8ayB5xqtaEeelpnNntUOPcXktJV3/p7hN/4biVdq+X2/J5NrtacPq6Nz6ukn1ZE57egcK8tUOWvpLX/g4/odl6o+nme0oh39iecaEKdU6e7fZ3T5uz2rzR2RiQnZcLHl915v4st/TOJsZc16o7e8k35s7IQqFFV+auLWPzO481bKmUss/+3rjXa9jXHvhbqD+1lepHWe1QRBnFCG3/myGo1UH21pRSVMTDAc6re9wdJv/AHVCIIgCIIgCIIgCEItLajlZdVH9VHjXo3HajQyuH+vwZ23OikIgiAIgiAIgiCx/P6PGu96mxr3qo/qo/qoPioMv3kT1REEoUVEREQ4Omd4y39VKbUyYmKC4ZDhkMFALnyD5d/4R9JKREREREREREREREREREYr2uKC6qP6qD6qj+ojW7brZ84RERERERERERERERERsfy+j+p3XanGveqj+qg+qo9KGd7+RfXYAyIiIiK69TMXzqI5pbQnH1aL87LtzSyvMDnJ5ASDjkSmt8j5r9f98Dskzkii33W1rJ0mCIKgm9Dvukp7YK86vuB0jd77Ef3Oq0hPEARxQtN952aD22+iygukWz/z2lk0z1WlPfGQOj4v297MxJDBQIUKlTCzRc6/WLv/DhKnL3LRZUxvUaFChQoVdEPZdZX24F61dMzLGb3nI/qdV6m+V6FChQpVzeC7NxvcfiNVfo40L6ZKu/c23R3/SwYTqqd6qqd6ahzZutPo7/wB1byUbH+z/tJrZf1mEjX/tArVUz3VUz3VUz2G64x+65/LhnO9qDC+7iNy8ZVq3Kue6qme6ilN992bdd+8kWpeTDc1vXUWzc9V6skD6tgzctFl9CEIgmD9OXLBxepHd5B4nsGE8W/+M/3u98q2N+vf+qvq6Sfohiwd191yg+zcQzWCIAi6oX7n1erBvRw/5vlifN1H5eK30YcgCOKEpu39svat/0k1LyHd1MxrZ9G8mCr15AE1/zQ7dqu+V6FChUpYfw7nX6Lu/0undAP93/pDtmxTiQqVyIVv1P2fP9Luv0MtHlUP7WPnNaqaChUqVKg2kJ171IN71dKCkxK59sNs302iUKhQoTRt3y3atz5H67yMdFPTW2fRvKRSTx5Q83Ns360SFSpUqIT1m+X8nepHt9M6rv4HTG2hj6qmqlSowYT6wW2sLPmpWpxXD+3jkj2qOhUqVKhQbcCua9RDe1l4ht0f5DWXqpWRGo0Y9ypRSlVTd92ifetztM5pSDc1vXUWzcupUocPMj/H9t0kBEEQTG3i4rdrEztUt4Zxr/ow7lG0xuJRdeeXUJ5Vx+fVQ/vk4j1U56QgCKqTS9+lzn2L6tep0YjRWK2MGI3VaKT6qHu/qt1xI61zmtKtm75gFs3pqOKpg+ronNq2W/VRoUKFCoZr5DXnMe7V4qJaXmbcqz4o9X9v4Nicv2ZpXh3cp15/tapOhQoVKlQws1E2bKCPWllRKyPSq8GQ+/+CfTfRmjOQbmr91lk0p6146mHm59h2GUEQBHFCsX5KNm+WDRuYmmLNJLfdwI/vQ/m5jh/j4F287kragBRBEATVmFonGzbIxk3MbOCBb3DnF6jmDKWbmr5gFs2ZqGLuEebn1IWXqUSFChUqVKhQSiV87dM8+n2qvKSleR6+W110pWoDFSpUqFChQoVC3XsL372Ras5Cuqn1F8yiOWPFTx7hJ4+prW9W1VSoUKFCpVg6Jl/7NI/vRzktS8c4uFdd8CY1MaUSFSpUqFDB3pvkri+hOUvpptafP4vmbB15nB99g36sJtZRA0YrcuQJ9t8m3/wMRw85Y8sL/OjrcuxpJtapbkjfy7GnOfA9+eZneORuqrwCqS3nXzFC5xULfU/rEPqe1nlV9GOqUUU/phpVXgXjgcSrphqJk6qReFVUc1JCNSclXg3NKjeQWM0GsboNiNVsIFa1AenRWZ36QXgM261Oh7q1615zJS6zOn2p4QbE6hPc0HArPm/1+SJu6RYXDlm77jVfwftxvtXhLnxo7vA9xzonLC4cWli77jWfwy68AeUXU/BFfGju8D2HnFCeY/OWtxSuw8fwLpyH5m+2HofwddyAW+YO3xM/8/8BSHXLEHo7BSYAAAAASUVORK5CYII=",deepLink:"infinity://"},{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAN6ElEQVR4Ad3BC3SW9X3A8e/v/7yX3IAQCLdwhyCKGlARRBRorbdZaWu1lx27Xlydp+txW1vtXLs2nh0723o6e13VdhU7dahzFdGCchOEAAICohAScg/kfnnzXvI+z/P/7U0lPVlGIIE31O3zEYaZqoI2OerlTLfqzzJGJnmJ7rxAOJiFVZP0bTJkJKJOoEGUanGkFMdvhxGICMNNSDNVhY62IBnBpSpcD+5SVRagZINyRiIKUilGSnDZJMZ5lYycWhFhOAhpoloBfv6Vat0vqdXbUB1DOohYEXbiOE+JJJ/GjO0QEdJFOEdquyQRdz8WDsj9av1FDCeRTjHBXx1vbPnhpIJd9SJ3cK6Es6SqqI0tU899BOtfzvkkEhcn9KgY7yFxciOcA+EsWK87Dxv7kfr2TkD4UxFTK478tQRG/U5EOBvCEKgqfjK2QrR7FaqT+YAQE3wiltR7c0aMijFEDoOkWoF6oW/gJ54EcvkgUXtZKCC3fLf4W+uKH3yonSFwGAS11vG73V9i7TcBwweR6gTr+5/+bvHfbC5+8JF6BsnhDDQRDagXexrkc3zACeSgwU8X33//tuLvPVzNIDichlrfqO3+jar/Gf7vCKsjnywu/vbrxQ8+VM8ZOAxAVfGT7Q+j/j0MM5vsRpwAaRS2vr+y+MFvvVD84PfaOQ3DAGyy689F9RsMIzfSRndLA1UvPkW6CYy3rn0x2R3P4jQMp6Be9wVY95cMM7ezDT/RRe3a1cSO15B26hcFSD6qqgzE0I/aSMB6sadAszlPrO9R/uSPGQ5qvbvUi6xkAIZ+1NevonYh51nr/t207HmT4aC+9zP14yM4BUMf6sfHqe99hz+R8qd+hnoeaadaoL77gOpq+jOcpKokE7EHUB3FeeDFuvBiXfQVb6in9vfPMxzUevdGI9dNoh/DSWqTEwKOfJnzpOLZx/DicfqrfvEp3K5O0k41MyvD+bqq0pehl9/1V6hmch50lr1L/WsvcSpeLErVC79hOKj1v4StG0UfhhS10YBauYvzQK1P6eM/BFUGUv/6SySajpN2qiPVjvgsfRhS1Pc+jGoB50Ht2tVEq49xOup5VD73a4aD+v6dqkovo6rg2ds4DxJNJ6h6/jcMRuO214nVVZN2yiKiHZM5ydDUKCp6M+fB0V//CD/ZzWCoKlX/+STpp0aN3sRJhrwRc1AKGGZNJZtofXsnQ9G0YyPxEzWknWNWqCo9jNrkYlCGkxfrouzJnzBUqkrNmv8g3VTtYminhwEpYphVPPsYyfZWzkbD1nW4kQ7SS6fjB3JJMVh7AcOo8+gh6l9fw9myrsuJTWtJK1VRnzmkGIWpDBP1fUof/yGoci6Ob3wZVEknC1NJMaDjGSY1Lz9DtKaCcxVvqKf93X2kk7H+eFIMMJJhEG+oo+qFVaTL8U1rSSdfdQQpBtUQw+DoE49g3STp0rxrK148Sro4jgmRYgBLmjW88Xva3tlLOlk3SVPJJtJGxJJiEBMjjdxIO+VP/Zzh0LjtddLFT7oxUgxoK2lUvupnuF2dDIf29/aT7GglHZxQqJUUA1LHIFlrUQbWdmA3Ddte438TQAABBBAQ+hAGRZWW3dtIB1XqSQkI5phil3AG1lruL/457ZEY//T3dzE+P4/+wmPGMf87P+Z/EFKEPxAQThIwoRA9ir79I1BlMMKjx3LuBEHKSQlgvEP4nFYy6fL14l+wbssuetz02fv4yuc/zp133EAoGKCXk5FFtPYYg9Xd2kCPcN54BkVh5OyLOGdCVIKRSlICSOgtSDKQxuZ27v2HR9l76Ci9ovEE3//FM6x6fh1f/PTNfPKjy8jOyiQ0egxNJZtpKtnCcJj9hXsxwSBDYa3ltS17eOfdMv72nk9hjCFlHzLBJyUgSd2pjrioBuln85v7eOCfH6elrZNTOdHUykM/+S3/8thzXL98ITcsX8hVf/lNUEvTzq2k0+zP30vB9R9nMKxV9h8qY/2W3bz82nYaW9rpUd/QwsP/eA/BYHibiNAjQDQRkVGh7ar+Mk5qaGrl+z99hpc37GAwYt3d/Ne6bfxu3TYcY5hXOJWrE1nMz4iRDi9E80luOMYFFauZUjCO/DG55ORk4WDw1CcSidLY0k5VbQOHj1ax/1AZXfEE/b28sYSW9ghfu/v29ZwkpNhE+9+p+o80NrXx62de4ZkXXyfhuvQwIiiKtSACRgQFVJXTcUS5e0wr8zPjnItn23PZGMmhPxFSBFRRhkJa4k2HJ9ZVH3NJCZCy6ulnV+8+WPf998pqnDmzp3PNVQvooVZRAd9TMsLg++C6EAg6gI+Ig7VKIGA4VlVHWUUNyvt8FX7Zksfn89qYGkpyNkrcsTiXXc0NpIhQXllLWUUNiKBKijJUin2+rvqYy0kBepi5tT4n1o8ckXPTpq07sYAqgyICapUZUydx3bLFiCrGMRyrqqO0vIpfteQhDJ1y0pad/IEqs2ZM5vrlV4EqIhBLJDlaXkV9YzOO46CqnEnCDf4bfQgnTbtk5U3BUPIV0kGVGVMLuGDWNKwq8USCnXvfIel6pI0qmeEQhbOmM3H8GHzf8j5FRFCrBEMhPN9HfZduV/HV7nzj1R2LKys300s4KTD/MpnmjNsryHzOgghY35I/ZjSTC8YzJncUoVCIZLKb7KxsFl5xCQcOHKa5rR0siAHHOPjWJxwOknQ9GpvbqKiqIxKNImI4WyKCquK7HggEwyFCJkA4y3xiz8YXX6QPoY+pl3/01hDe7xgEVSU/L5eLLyok6Bh6iDE0t7RRU3eC5tZOPM8lEAzSQ1XpTwQEwfU8Ao7D+Pw8ZkwrYGRODmotCBw6coza442ICOfG7Kn0Wei9vVbpI0AfsUT1S8HgxI3iyIc4BccYFi6Yx6gR2YDQ3NLG9p37SHo+p+IEAqgqA1EFRXEcBwVONLVyoqmVXgJ87o5b6IrGiMYSHK2opryiBkQYIk3GE1/z3t2g9CP0M6Xo2gvDgex9QJgeqswtnMGMKZPwrWXX3ndoj3QhAoKgpKiipN81VxbR1NbJ4aMVqCqFM6cyZ8YURAxbS/bSGY0xGKr+qvLwlL9gx6/oT+jv9tuZVRa7LxDg4aWLFpCdmUEymcQ4BmsVARQLOCjvM6KoVUSEHj5wtKySmvoGEGGoFLhpxVW8d7SSqtrj9DU2L5eii+bQnXQZNSKbg++VU11/nIEI1HZ1ZRcdP/J8K6cgnMLd93zFXLH42nVHSyuv64onKK+qpbyiBjEGVeVMHCMUzpzOtMnjQZWE67HzrYMkkknOJOA4rLxxGZve3ENrewd9BRyHlTcu5/mXNyACqHLpRYVcueASXt24jboTTfTj+9Z+pGLfuk0MQBjAvKU35yei/i4xZjrnKBwKseSKS8nMCHO4rJJj1XWcSu7IHK67djFr1m2h23XpS4DbbrmONes20+169LrmyiKq6hoZm5dLwYSxbN25j/bOLnq4ycR9Eqn4QWVlJQMRTmPCrI9cnJMbeAMYTTqoMrdwJrOnFVBaUU3psWp6zZ09nakFE1i/pYT+FFh54wq2vLmTjkiMXpdfOpdorJvDZRX0EOCaxZeRGQ6xedvbj3eM9b5c+8oaTsfhNLrajjVOnFH4hu9zBxAmRQRUwXoWtRaL4DgGYRBEaG5tp7SimrGjc7l64Xyam9tZumgB8XiCHXsO0J8RuO3mFWx+8y06IlF6zb+oEAEOHi6nr6ra4zQ2Na1+4tEHvvjIfd9QzkAYhE996atXjcoZvTZgzGirihEwThAERC1J1wUMxoAxhtb2CAcOHSHpeigDK5iQzyf+7MOsWr2GjkiU/jJCIT56wzJe3bCNrlicXpfOLSQUNLx18Aj9+RL87fjM6BdKtm7wGARhkBbfcvvFTfWda0TMdE5DVckbNZKii+cQCgYQMZRVVFNWWYuI0CM7K4PlS66gsamV3fsPAUJ/UyaO4/KiC1mzfiu+tfS6/JILAGXPwVL6s+r+oK3KfrOtZaNlkIQhmHHhsnwysp52DNcxWKoUzpzKzOlTCAUcfN+SSCTZsmMPvlr6U4VrFy3A8z127DlIX1cvLKKto4t3S8vpJxpL2rtDGa3/Xrl7N0MhDFHBkmtNOJH5dSPmQSDMIMyYMomL5syksyvKm7vexqpyKuPGjmbpwgVs27WPxpY2eglw04eXcuhIOVW1x+lL0d3GDd159MBLRzgLwtm4/XYmVMcvzEqYn5qA+yFOIRQMsGRhEVkZGVTU1PFeaQWIcCrhYJAVS6+kIxJh++4DiPBHeaNGsGLpItZv3k4kGuOPNNDRnbTFMXPiJy0H9nicJeEc5M6YQzB/zq0jfa9YkPkoFM0rZNL4fJKux/bd+4l3dzOQjFCIa6+6DBQ273iLpOvxR6osvryIzIwQm7a/RR/xOP5j3SbwUPPuVxo5R0IaBJYslWmJSTd+8uZFX92xd//19Q1NDgNRZea0ycydPZ3uZJI3Svbheh59TRw3lsWXXULJ3gMcb2zhfVLneYEnWqIj/jWyIHmC554jHYR0Gnkr4yc0TM4MmDska9StjsoSgaAIzJs7m4IJ+QhCeVUtpeVVIEJf2VkZLF+ykKamVnbtP0RKXbdNvOIkEi90BXI2NB98zSPNhGGSPXEiubnTRnzuMx9bNH3yxCtWPbN2XkNL50zEFACjQTMBA7jhcCiy8sblDR0dsepX168/4pnAft/rLIn62aXthzcr/1/kXng15OQzadZCcifPkbyCQpORP5fr77qLd8rKgHmcb/8N3VaULP16cD8AAAAASUVORK5CYII=",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://"},{key:"atomex_desktop",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE6UlEQVR4AeXBe0xVdQDA8e/53XNFQFJ5e0NAAUXeMQHJByo+cM6Z+WrO0h66uelEatl0U9egnDa1rczN1eq/Mg39I8WQphYOo4z54K0Cgl6eQy6IXO49J/2DZk3k4r0c2c7nI6mPoGMCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc7JvCD1ZgslpWasNoXJE7yJjvDjRZDRWGt7NzsPnCfv4k1UlX/FTPJj//Z0osJ90ZJAQ5YuK6u35nLmwk1Ulf+4XtnMii0nuFHVgpYEGjr4zWWqatroT9eDXj7cV4CqohmBRux2lR/zyhnI9cpmSqub0YpAI+aWTjo6e3BE5e02tCLQiFEWOMpoNKAVgUb8fTwJCvRiIJIkkTAlAK0INPTeqgQGsmhWGEGBXmhFoKF1y+JYPCec/kSEepOTlYaWZDQkhMQXuxaSHGvi6LES6s0dPDbay40VGVPY9nYyXp4j0JKMhn46W46/jyfrl8exbnkcza0PsNnsBPiOwmCQeBEEGjl/uZb39xZQeKWexyTA38cDU4AXBoPEr0U1HPr2D7Qm0ECD2UJmdj7R4b5krk/iacpvtvL5d8XUmzvQkmCIWXvtbNqdh6KqfPXxItxGyDzN6wsikSSJY2fK0JJgiOUcLuRqRRMHd85n/LiX6E+gnydpycEcP1OOoqhoReBCPVY795o66bHa6GNXVLZvnEZ6aigDWb04ioZGC7/9eQetyLhA3d37fHLkEgWXarD22jHKgtkpIezYNJ3sbWk4Kj01FN+xHuT+UkFacjBakHFSxa1WVm3Npb3jIX16bQr5hbcpKmng+0PLiJnkhyOMsmDf9rnIBoFWBE5QVcj69BztHQ95GkuXlczsfBRFxVHpqaGkJQfTR1FUhpKME65VNHG9splnqapto/jaPVLiTTjC2mvnh59Lyc2vpLSqmZ5eOwE+nsxMGs+7KxOInOiDK8k4oaq2DUdU17aREm9iIHV377Nh52nKb7XypHvNnRw7XcaJsxVkvZPM5rVTcRUZJ3i4G3GEx0gjF4vrOHWukplTg5mVNB7vMe48qbW9mzcyT9LQaKE/drvC/qNFGIRg05pEXEHGCUmxJoyyoNem0B+DkEhJMHG1vImLxXc4nleOEBLxkf7MTglhydwIwoLHknO4kIZGC4747OsiFsyYQFjwWJxl2PMIz8nD3UhHl5UrN8z0Z+3SWJbOm0R4iDcbViUwf8ZETH6jqLvbwclzVZRVtzBnWggf7C1AUVUcoSgqSBJzpoXgLBknfbQxlbb2bk6cLef/lsyNYNfmGfSRJImYCD9iIvzY/OZU7lt6UBSVS3/XY7MrDEbhX/W4goyTZFlwYMc8Vi+O4vSFaszNXfj7eJAxK4zpiUE8y2gvNx5rbOlisBpbOnEFGRdJiTeREm/ieXi4GxksT3cjriAYBmIn+zNYsZP9cQXBMBAV7suUMF8GY3lGJK4gGAYkYPeWmQgh4YhXE4PImDkRVxAME6mvvExO1mwMBolniY7w48s9C5EkCVeQGUbWLIkmIsSb7MO/U1LWyJM8PYy89VosW9cl4z5SxlVkhpmkuHGcOrKSmvp2blS10N1jY5z/KBKjA3F3k3E1mWEqNGgMoUFjGGoCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc79A200jdqC2KUJAAAAAElFTkSuQmCC",deepLink:"atomex://"}],_O=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHNklEQVR4Ae3BbWyUhQEA4Ofevg0f7d0RsAllEJSpQVy1K3SQIQro2HRoVIymS/Zj6w8xfk6NWzRzoJkO48d0MUaTZv6yMRFNxM2EIX4wIthSUJERgrCmjHZWCXdXapsWbgk/iLbvlXuPsgHjeZx11ln/1xJiaGjMV+NazMU0lDs1DKADm7GmuSnRqUgJRWhozF+AR7EMoVPbIFbjoeamxOeOI+E4Ghrzy/EMxjq99OGe5qbEi0ZQZgQNjfk/4HGETj8hltbUrRi3fevKdQooU0BDY345Hnf6u6ymbkXX9q0rt4gQiNDQmL8Azzhz/LGhMf9dEQLRHsVYZ46x+L0IgSEaGvPVWObMs6yhMV9tiNBw1yJ0EiQSVJ1D9WQmTmDsGEf19XPgIJ1ddH9JPu9kCHEtXvINoeHmGkXl5cyppb6Oiy8iWWlE2Rw7dtLSRus2BgaMprl4yTeEhptmFIwfz9VXsWQxyUpFSyWZV8+8enI9rF3P2+vo7TUaphkiNFy5IowZwyWzSCbZ287edsdcMZ+Gm0glnZBkJcuu40eLeOU1PtjomPOmM+Ncsjk+/Yy+fsUoN0SoBOfP4L7bSacds6mFtev56Y+ZXWtUpZIs/wX13+cva/nJlfxgtmMyGZ56nt17xBaKacwY7ruddNq3zKtnXr2TanYts2sNk05z3+3c8yD9/WIJxXTJLNJpJ+RQL51dZHOOSiWpnkzFeCVLp7lkFi1bxRKKadw4Jen+inc30NrGvv0iTZ3CnDoWLaBqktjGjRNbKKb2DrH0HOLV13lvA4ePGNG+/ezbz5q/snABt9xIZYWitXeILRBTewd/36QoO3fxwMO88z6Hjyja4SO88z4PPMzOXYqycTPtHWILlODFP/PxdiPa8jGPPc3BjJIdzPDY02z52Ii2fcoLTUoSKMHhw3T8S0E7d/HsCwwOOmGDgzz7Ajt3KWjffo4cUZJACcrLWThfpJ5DPPcig4NGzeAgz71IzyGRLv8h5eVKEijBnFoqK0V69XUOZhQlnSKVVJSDGV59XaRUkjm1ShIqQX2dSN1f8d4GI0qnuGEp8+pJJR2VzbGphTfeIpNV0HsbuO4aqiYZpr6OD1vEFogpkeB7s0R6dwOHjyjo/BmsWsmSxaSSjkklWbKYVSs5f4aCDh/h3Q0iXXwRiYTYAjFVnUNlhUitbQpKp7j/TlJJBaWS3H8n6ZSCWttESlZSdY7YAjFVTxbpUC/79ivohqWkko4rleSGpQrat59DvSJVTxZbIKaJE0Tq7DKiefWKNq/eiDq7RJo4QWyBmMaOESmbU1AqSSqpaKkkqaSCsjmRxo4RW+C/IJFwygrE1NcvUiqpoEyWbE7RsjmyOQWlkiL19YstENOBgyJVTzaiTS2KtqnFiKoni3TgoNgCMXV2iVQxnqlTFPTGW2Rzjiub4423FDR1ChXjRersElsgpu4v6Tkk0pw6BWWyPPknsjkFZbI8+ScyWQXNqRMp10P3l2ILxJTPs32HSIsWUBYoaPcefv071q4nm3NMNsfa9fxmBbv3KKgsYNECkT77B/m82EIlaGljXr1hqiaxcAHvvK+gTJaXX+HlV0glHZXNKcrCBVRNEqmlTUkCJWjdRk+PSLfcyIS0omRzZHOKMiHNLTeKlM3Ruk1JAiUYGOC9jSJVVnDXrYShUROG3HUrlRUifbCRgQElCZSgLGDqFAXNvJC7byMMnbAw5O7bmHmhgqZ+hyBQkkAJljdSW2NEsy/lwXuZkFayCWkevJfZlxpRbQ23NSpJIKbp05g/V1FmXsgTj3DlFZQFilYWcOUVPPEIMy9UlPlzmT5NbKGYpk8TS2UFjT/numt4dwOtbezbL9LUKcypY9ECqiaJbfo02jvEEorp66+VpGoSN1/PzddzqJfOLrI5R6WSVE+mYrwT8vXXYgvF9MkOMhnSaSWrGM/5M4yqTIZPdogtEFN/P089TybjWz7awiNPsGWbk2bLNh55go+2+JZMhqeep79fbKES7N7Drx6k5mJSSfb8k73tjtq5i8vn87ObSCWNimyOV17jg42O2rmL86Yz41yyOT79jL5+JQkNN6AIff20tIn0wUZat3L1VSxZTLJSSXI9rF3P2+vo7fUte9vZ2y6uAUOEhuswCnp7Wf0mb77NnFrq65g1k1TSiLI5duykpY3WbQwMGE0dhggNtxm/NEoGBviwhQ9bSCSoOofqyUycwNgxjurr58BBOrvo/pJ83smy2RCh4dbgeYRGWT7PF9180e1/YRBrDBEYorkp0YnVzjyrm5sSnYYIRPst+pw5+vCQCGUibN+68kBN3YqvsNSZ4Y7mpsTfRChTwPatK1tr6laMw2VOb6uamxKrFFBmBNu3rlxXU7fi37gKodNLH+5obkqsMoKEIjQ05i/Ao1iG0KltEKvxUHNT4nPHkRBDQ2O+GtdiLqah3KlhAB3YjDXNTYlOZ5111llF+A8aUDCF69BprwAAAABJRU5ErkJggg==",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app",limanet:"https://limanet.kukai.app",mumbainet:"https://mumbainet.kukai.app"}}],wO=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAJ60lEQVR4AeXBe2xdd2HA8e/vd865N9f34ce1r+36GcexnTRpmj4S2gbSkbYq64BVTKggJsYfLWxisEkriG4sgECjmjZRVIQ2dTw0aYitaFC2wUYofajQNU3S5uE4sWM7tuPY8eP6Xt/nOfec3zYhT4dbP37XsdM//PkI9b/YwiRbnGSLk2xxki1OssVJ3gYFz6VcpuTwdpDcQLN2gT86/Su6jz1Lua5jz/LoG69wrZjnRjK5AYqeyzdGBvjyxTdYcGzqrCDlbM/lH8Yu8uzVUf6iZx+f3L6boJRsNpNNpIDR1DzfuHSOv50YQkfKsXn83HG+OTLAl/pu45GW7Ugh2Cwmm0ABY+kkZ2aukioWyDg2awlKA3BYMpxb5CMnX+TJodMc7d3Pw83tCAQbzWQDeUoxkpqnf26adLFAJf6gfSd/PXSGcmfSSX7v+PPsidXy2e69fLBlO5aQbBSTDZB1bC4tzDKYnKNQcliPr+6+g72xWv78/AnG81nKnU0n+f2TL/G58yd4rKOXj7XvpGVbFdfLZJ0Kbonx9AKXU/Ncy2VQrEywNgF8pHUHH2ju5OmRfp4cOsO8XaTcRD7LXw6c5IsXTvFb9c18qKWL9ze3U2cFWQ+TCqTtIpOLKSYyKa7lMiilWE3QMNkVT5APh2F6DB0hw+Dx7r18vLOPp4bP8bVL/SSdIuVcpTg2M8mxmUk+8abkcH0T72tq57cTrXSFo+gy0XRiaoKB+WvoCFsB+uIJumvqMaXk9XyGSsVMi8/33MqfdN3M341e4Knhc1wp5FiOozyOzUxybGaSTwFHe2/laO9+dJhoyjo2qxFAUyTGztp6WiPVCCHYCFHT4s+69/Dprt384Opl/v7yAC/OTqFY2Wgugy4TTbZbYjl126roqK6lM1ZLlRVAh6JylpQ80rKdR1q2M5Jb5HsTw3x/coQz6STl5uwiukw02Z6LX1u0htsaW4gEgqwlKA38sq5D1i0RNkzWY3tVlCd69vFEzz4uZlL86dnX+Mm1CZYknSK6JJocz8MvURUhEgiiY3e0Gj/b8/jjM6+SdUtcr55INXfXJfBLlRx0mWgquS5+ppTo2huroy9SzUAmxZLvjA3yTxOXiBgWHgrFrzUGQxyqS/BYRy8HahvQETUt/NKOjS6JppLy8DOlRJcAntx9B+Vsz2PeKbLg2KQcm5RjczGT4ltjg9z18r/x2JuvUPRc1hI1LfwypRK6JJpKnoefISWVeG9TO1/edRu6FPDM5Yt88PVf4CnFaqoME7+sW0KXRIOrFOUMIanUEzv38cMDR+iNVKPrx1PjPD1yntVUGQZ+Rc/FUwodJho85VFOCsF6vK+pnfc2tXM6PU//4gK25yEAKQSuUrw0N8V3x4fwlGLJXw2e5g87+7CkZDlBw6Bc0fMIGQZrMdGglKKcFIL1EsC+WB37YnWU+2hbN7dXx/nkmVdZMl3M88vkNQ7Hm1hOQBiUs5VLCIO1SDQo3kog2Cwf7+yjxgrgd35xgZWYUlDO9RQ6JBqU4i2EYNMYQrBNGviVlGIlEkE5D4UOiQYheAvF5jk2M8lUMY9fZ1WEzWCiQSAop5SiUlm3xJxdRKFYjuN5PD97lc/1v45flWHyrngTK3GVopwhBDpMNEghKOcphQ7b83jm8gWeGbvIm6kkCkWlHuvsJWZarMRRHuUsIdFhokEKQTlXeaxlPJ/ld1/7OadSc6zXzdEavtS7n9UUXJdyQcNAh4kGKQRSCDylWFLyPFaTdGyO/PKnDGXTrNedNfX88MARIqbFarJuCb+AlFhCosNEkyUNim6JJY7rsprP9h9nKJtmPfZEa/lEZy+PdvZiCcla0o6NX9S00GWiKWgYFN0SS4quy0qmi3m+Oz6EX40V4It9+7mnrhFDCJZjCEFzsIp4IEgl5pwifnVWEF0mmoKmBXaRJYWSw0qOzUzieB5+zx24j0PxRjbDVCGPXyK4DV0STVWmhV/GKbKS4dwifr2Rag7FG9ksl3KL+LWGwuiSaIoFt+E3X8izEonAz/E8NtOJhVn8+iI16JJoioeq8Ms5NuligeX0RqrxG84t8tzUGJvh7GKSyUIOvwO19egy0ZSoiiCFwFOKJZfTC+xtaKLc/Q03UWWY5NwSSx55/QU+veNm3lHbgCEESwJC0hOpprMqwnr885UR/ILS4J11jegy0WRJg8ZwlKuZNEsuLcyyp74RIQR+1VaAT3Xt5quDp1lS8FyeHDzNSvZXx/nKrtt4MNGKLsfz+PbYIH73NdxExLTQJalAV3UdflnHZjSdZDlHe2/l7roEuk6l5njo1Z/xlYtvousfJ4a4Usjh99G2biohqUB7rJaQaeF3euYqrvIoF5QG//GOB3i4uQNdCvj8wEn+ZXKUtWTdEl+48AZ+baEw729upxKSCkgh2BVP4Jexi5ydmWI5MdPiB3e+m5/e9QAfuKmTpmAIwdoeP3ecklKs5gsDp5jIZ/H7TPdeLCGphEmFeuoauDA/Q9axWdI/N01LtJr6UJjlPNDQwgMNLfwfxW+at4t8pv843x4bZMlYPsMr89McjjexnBdmp/ja8Dn8usMxHu3opVKSChlCcntTK36eUrw8MUy+5LAWAQhAAAKIB4J885a7qbEC+J1NJ1nOeD7Lh068gKsUfl/fe5CAlFRKsg5t0Ro6qmvxyzkOvxi7hO26VCogJY3BEH5516XcvF3koVd/xnQxj9/H2nfyYKKV9ZCs08GmdqKBIH7JQo7nxwYpuiU22oxd4P5f/SdnF5P47YrW8NSeg6yXZJ0sw+Bw2w4saeA3l8/xXyMXWbSLVEJRRvD/LmRSHHr53zmVmsOvzgryr3e+m4hpsV6S61Ad3Mbhti4MIfFL2wV+MjzAaCqJPoWf4Ne+d2WYgy/9mMFsGr+wYfKjg/fRE6nmephcp8ZwlHvbd/Di+CVKnscSx3N55coIl9Pz3N7YSiQQpBKXcxkefu3n/GhqjHIR0+K5A0e4py7B9TLZAE3hKEc6dvLi+DCFkoPfxGKKyUyaHTVx+uIJYoFtLEcpfsPTI+dZTlMwxHMH7+OOmno2gskGqQ+Fec/2Xl6eGGE2n8XPU4rB5CyDyVkaw1HuuqmDsBWgUnfVJvj+HffSGgqzUSQbqMoKcH9nD7c0NCOFYDnT2UVOTE1QiYCUHO29lRcOvYfWUJiNZLLBpBDsbWimI1bLyekrXMmkKJe2C+h6MNHK39x8J7uiNWwGk00SC27j3vYdzOaz9M9OM5FJoZRChyEEDzW28Xj3Hu6pa2QzmWyy+lCYd7V1kS85jKaSjKbmUSjKmVJyS6yWD7fu4MMtXbSGwtwIJjdIyLTYFU+wK57AVR7l/vudv0PEtLjRJG8DQ0jKRUyLt4Nki5NscZItTrLFSba4/wG5rKPEn6lO8wAAAABJRU5ErkJggg==",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"naan - your portal to web3 ",shortName:"naan",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACDklEQVR4Ae3BMWgTcRTA4d97/aNBI2SpOKmbgjrUBNvBQbsJOggd2sG14NCILg52sEPr3ExZnVwLTgUJggq2TUAwiJNkkapEdAjUoeR5NuAtSe3JUXt5fp9YsWSkZ0Ea9YdErFjaAnIMdlsa9erixOeCmH7j37ilOKc4pzinOKc4pzinOBfY3QdgnZ7rQJ4ho+yuJo36jDTqM8AnhpDinOKc4pzinOJcIHs6XewmAyhcA7nHHgWyZ3t+7fgzBlga/3KaBALZM/Jool0i0sU2H7we/Uhkabx9UQQ1654igUD2HDOzDXbYIjDPDntlRg6EJBTnFOcC6TpnxdI0PSNkQCBdU8AUGaI4pzinOKc4pzinOKc4F4A5BnvHb7YAUiA9L/nF2ALm+BsidWJ3gUAissF/zolRfgycZP+tCJVlIlbLV4EzpGNdJjv3iVjtaAXkAoOtBuAScJb91yRWBEqk4wexMeAyg7UU5xTnFOcU5xTnFOcCB9820KanAORIUeDga8pkZ4yI1fJPgGlSpDinOKc4pzinOBdITKpgX+lLRsFmyZBAcstC5T19GHfOA7NkiOJcIDFrGOUu8Fyo3CBilJ8CV8CUjAkkd4SeHLEckCeDFOcCw+ew1fIn6DnEHwSGz1Vgkz1SnFOcU5xTnFOcU5xTnAvAKtAkubfEXgDfSUTeEKsBLfprEVsDAump/wQutXPS0gaA0QAAAABJRU5ErkJggg==",universalLink:"https://www.naan.app/",deepLink:"naan://"},{key:"altme_wallet",name:"Altme Wallet",shortName:"Altme",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF7klEQVR4AeXBW5DVdQEA4O/3O/+zexYWlEWQe6W4hhJQDBdRCRaMFMfrjICAyjg+ODXm9NDlofGp0pp8sRqnxqeaQqbsMo1O4ziJ17QAwWuikxaKQiIBC8tyzvk1gzM0O8vZ5dz25XxfWCslLSxqcVGLi1pc1OKiFhe1uKjFRS0uanFRi8uMsJCn2EHWQdt0lDj+b8r95I6SikZUZiQVGH8xV9/J3B7GTiCVOfghO57gsQc58AaOGzGZkdJO91Xc/VPOnkgIThk9likzWbSaH93Ku0+jaEREIyFSmMpdDzDuXEIwSAhMmM5Xfkw8y4iJRkKBlbfQNdmwps1iwXXIGxFRswVCgRW3EoJhhcCXNlEebUREzZbjomWcO8MZu3ARUy8mZJouarKUsWIDIThjuYxl60mjNV3UTJGubuZdgaAql15L+3hETRU1USpw6Q10dKpa12TmrSJ0aKqoibLxLF2rJgErbya1a6qoSeIouuczdabaBC6Yz9TZhDZNEzVJMWPlJmLOIKlM7yHee5P33qT3ECkZpK3AF2+iFDRNpglCxvjzmLvUIB/v43f388Lj9O5z0qgJLL6C67/OuHOdEgKXXMsj36fvPU2RaYJUYPE1jDrLAB++y/fWs28n4Rip5KTDe3l8Nzu38u1fMek8p3RNYe4qXvwF6YSGi5qgnGfFRkJwSqnIT+5m33YcIZX8XwlH2L+TB75KueSUGLniNk5kmiJqtDwXLWHSpw2w+2+8vhXHVJT62P00rz1rgAsXMX0echouarByoOc2Ys4A25+jLRlWVmbnswbI2li6jtCp4aJGCoyZxoIrCcEAR3sJwfDK9B02yLK1xDGIGipqpAJL1lAYbZCJEyiXDC9H12RSMsDZ5/D5KwkdGipqpLPoudlpLbqKcgeiygKlHItXE4JBVq6n3KGhogYJBboXMuMipzVxBl++E2OcXiCMZdXXmHyewQKzFjFpJiGvYaIGKXfQs4EYnVYIrPsGX7ydNJ7QTsgRcoQCzuHyW1j/LRXl21m2jnKmYTKNkDF2Cl9YYUjtHdxxH0uu5i8Ps/cVEibPZvkaZl9OLlNRCFxyLb+/l+N9SOqWaYQCC6+hc5xh5TLmLGfOckpFJ+UyZ2zCdD63kr//GkV1ixogFOhZQ3BmUiIlQiREUkJyRmJkxW2UcxoiU6fQxswFzJiFYFjlEm/v5K+P8v52Yp4Z81lyDdO6CdGwZl3C1IXsfQ4ldcnUqYiejeTyhvXRHh76Jtv+RCwRfGL7o/zhPi7fyMZ76BxnSO0dXHYDW3YQjqhLVKexU5i/ihAMae873HMdO35DPIxeUi+pF0dIH/PUz/juag5+YFhLbyI/Ud2iOoQCC66nc5wh/Xc/P1jPgVfRj2SwhGO8s537N3DsiCF1TWLuUmKnukR1OJFn1a2EoKJSkYe+wwcvkfoM7zhvPs+WeymXVBQDq27neE5dolrlOX8Bn5qjopTY9hgv/hJHnbFwlD//nLd2IDm9wKxFTL6AkKlZVKsxrNhECCrqP8aWewl9qneYzT+kWFRRLmP5BlK7mkW1yNFxDotXqygldj3Jnl0oqVo6xhvP8NZLKgqBpTeSdSKoSVSLAguvpvNslSWe3EIsqlk6yNYthjR+CnNXIqcmUQ3CKJatMaSD+3n1GdIJtTvOtsfoPaSiEOnZhIKaRFUKbUy7mPPnEYLTSoltT9B3ACW1K3FoD7ueMqTZS5jQjZyqRVUqB+YtJ8sb0tMPE4+qW+jlqc2G1NbBZy8j5FUtqlJCrt2Q/vkyu18g9atfkZf/yJ5/IKkoC0iqFlUplnj+txzcR0oGSIn9/+LBO0gHkDRE6RgP3sXHH5KSAVLio/fZuZVUVLWwVkqqlTFxNpetY2q3k0pF3n6J5zdz6F0UNVaerm4W38hn5hBzJOx5nWc2859XUFa1TC2K7NvFI69RzDkpJHIJ/Uga7wQHXuPR3ZRyJJ/ISiiirCaZWpXRT2YEJfST0zhRi4taXNTiohYXtbioxUUtLmpxUYuLWtz/AIepoFxQZk61AAAAAElFTkSuQmCC",universalLink:"https://app.altme.io/app/download"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADS0lEQVR4AeXBXWiVZQAA4Gcvh+lYP4xGBBsc7Wal2UyWQ9gWSAYzhSgcgtBUSCwKMfulS2+iG7vJlUGJSzHBqwSLZhAYKgmZNac3tQNbizpTapPJYTun6zGDL/e+dPE9T53aYE2OBTkX5FyQc0HOBTkX5FyQc0HOBTlXkMLpy5TKoireR2+72ApSODjEqR9EtekxetvFFuRckHNBzgU5F6QwUxHdTEUKQWyzc1wqie5Sidk5sQWxHTvH5LToJqc5fl5sQUzXJth3TDJ7j3JtQkxBDLNzfPYdXfspT0mmPEXXfo6cZXZODAVZnf6Rg2csMFPhUonJabfV3caWtRSbCUEm1SqlMie/59ur5ilP0f8Rrx5ldZGGegu89CS9j8qiIKvSJKd+kFlDPYd30dfpjr3yFCcusP0QMxXzTE5zZthtPb1aVkEqh3fR12nR+jo5vEsqQQpPPERfp2j6Ouluk0KQwnOPi27LWikEKRSbRVdslkKQwo2bortxUwpBCmeGRTc0LIUghc8vcHVCNCO/ceKCFIIUKrM8c4Cx6xZt7DrPvk9lVgoFqVyboP0d3tzElrUUmwl1MqnWGP2Tkxd59wuuT0ulTm2wZjFmKlz8lQ+GOHGemvT6Onl5Ax3Laai3GAWL1VBPdxvdbfS2s/MQ1ZokQh2fvEB/t1iCmPq72LdRMq9tpL9bTEFsb29mSUF0Swq8tVlsQWxNjaxZJro1y2hqFFuQQlOj6JoapRCkMFoW3WhZCkFsV8YZGRfdyDjDY2ILYqpW2TNITXw17D1KtSqmIJapW2wbYGhYMl//zLYPmb4lloKsSmV+GrPATIWLv3DkLL//ZYE6PNzCsmZCkEm1ymiZkXFq5jt+jm+G2d5Dx3Ia6i2wqpVisywKsjp9mRc/9Z9seIQD21jZ6o5cGWfPIEPD5vnjb9475V8N7GD3elkEqWxdx5evs7LVHVvRwldvsHWdVIIU7r+Hj3cSgkULgUM7eeBeKQQpbO/hrqWiuXspz3dJIUihY7noOh6UQpBCQ73oGuqlEORckHNBzgU5V5BVTxsDO2SyqlV0q1oZ2CGTnjZZFWS1ooUVLf43xWZ2rxdbkHNBzgU5F+RckHNBzgU5F+RckHP/AKis3ntPQOcLAAAAAElFTkSuQmCC",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIAElEQVR4AeXB3W9b9RnA8e/znHOcOGliO3aiUkLfCyNDLdIkShtKIu2GiwlVbNP2d3C7m11Mu9jlNG2X7AJpm5i0MSGtEpu0ZKhMoxUVsJVBm5emaUtI7DiB+Pjl93uGXRzaDBGGT10kfz4CGD1M6XFKj1N6nNLjlB6n9Dilxyk9LiRBx8cizn7nARChRQAREED4hIAAAiJCiwAiIIAILQKIgHCbCAgg8KtfL7KyWiUpIQk5MRpy7uwQheceQIZSoAICqCAqIAIKiIAKCKACIqACAqICKiACCoiACoiAAipcXdjixd9fJylKAk6Mhpz7boaRwQBWt9jJjN0JX8Bomz6dJ0lKh06MhZz7fpaRwQBUsLUKX4mxO4OpyQJJUjo09VCKkYEAVCBQKMZ8FSLsTuDIwUHG96VJSkiHZpbqEAiI0GQ1B1t12JOipdLA1ipsEz4htAi3CRhNAsJnhNsCRR8fAwMEpifzvPjSdZIQ0qG3P6xTqsFIWkBosWKM7EnRUnP4vyyAN3AG3sAZeA/OwBt4A2eYN3AG3sAZeAPvkbFBZHwIGR2gafp0gRdfuk4SQjrkDV5brvHsI2laRGA9hv3DtGT60FMPghmfy/hixRj/zofY3DoyNkDT1GSepIQkYPZajWcfHQABRLD1KsJn5NE8IgIKiIAKCKACIqACAqICKiACCohApYG/eAt7rwgn94HAkUODjO9Lc/1GhU4pCZhZqEEgoAoqUHdQabDN+D8Z2wYjJNePv7xGmwDTkwWSoCTg7Q9qlKpAIBAIqGLlmG3C7oTbzADhTvLICNQ9rFVom57MkwQlAd7g79eqEAioQCBQrrHN+FL8Wyu4VxfZKTh7jOhn05BP0zY1WSAJSkJm52NQgUBBBdussk3YnYfGC+9gl1f5Mo4eGmR8X5pOKQmZmY8hEFCBQKDhoepoMXanIAeG8XPr4DxfxLht+qkCnQpJyNs3apRiIzeotHjD/3kOUgEEAoFAoBAI9AXot/YiuX7upA+P4K6UsMUN5GiWJlvdwr9xE8IAIkUihVCxSHGlmE6FJMQbvDZf5dnjg+ANf2kF26xCoBApEiqECn0BcjQHqxXI9bPNQI7lQMC/XyQ4mqVJ9qTw7xYhpUgqwFIhpJTnXynxm9l1OqUkaOZqBQz8GzexYkyL8JlAkENZJBVgxZid5FAGUgH2folt/SEyNgAIIBjw/Mtr/GJ2nSSEJOiv727x5qvLUIohUAiA0CDw9KeFb0zkoC/AnEG5CnUPqYA2CRU9lMXPl8EZhELTan4Py//5CCLHC29V+OU/NklKSIL+dbPKE6/wKc+dBlPKyiklcgZmYGDFGNk7SIvQIsdycLWELW4gR7I0/TPo5+wLq9wLSpd8XPNcWIzBeXAGzmOrW2wzWuRYDkTwV0q0nTk5gqpwLyhdNHOlAs7AGTiDlS3aRGjRAxlIKXalRFsuE3FiYph7Qemi2asVcB6cB2dYMYa6o8n4VKTowSy2UAZntE2fznMvKF10frFKrebBeXAenMdWtthJjmWxuseWNmibOpXnXlC6aKtuXFiqgjNwBg2PffAxLcY2OZIDAX+lRNuZkyOoCklTumx2PsacYc5jzrAbH7GTHsggqQCbW6ctl404MTFM0pQum1mogfPgDLxhqxWoOu4SCnIwgy2UwXnapk7nSZrSZa8v16jVPDgPzkPDYzc/AuEOghzJQt1jS5u0TZ/OkzSly7bqxoUbNXAGzsB5bHmTnfRIFlSwuXXazjyZR1VIUkiXjaaV0eMFgskxEAEB6QvBAGGb7B+GSPFz6+i3D9CUy0ScmBjmzXfKJEXpotG0cu57WR5OeSSfRgpppDAAmT4Q7hYqciCDLW6AN9qmJvMkSemS0QHl3A9yPLY3wkoxeGM3cjgLDYdd36Rt+nSBJCldoALnfjjCY3tTECkiYMWYuxj/Qw9nQQSbW6ftzJMjqApJUbrAG6T6FIkUCRVCxVYr7EYeGoJI8fNl2nLZFMcnhkmK0iWzS3UIFcIAQoVSzK5CRfZnsKUNcAZCy/RknqQoXTJzrQaRQqQQKbZRBW9sEz6XHs5A3WPLm7RNTRZISkiXzM7HECqIgADlKo2fX4RIIQogHRJMjqMTee4kh7Lwt2vYQhk5kAGBp5/Moyp4b3RK6ZJbm473Sg6JFDZq+H+vYeUqtlGDrTqST2NrW+wk40MQBfiFMggtI7mI498cJglKF83Mx1gpxl/6ALzRJKEih7MQCFaMsZrjLqEi+4expU1wRpMB05MFkhAAP6ZL1jcbVK6WuVgyLm7AxXXj8ZMFgv4QvIEzNJ9GhlMgAiIgAuUqNreOPpxDMv2IQFwzfveHZToV0kXnF6ucp83T9PgTDU7tD8AbGNitj5EHh7iTHMzArGALZWR/hqanT+VRFbw3OqHcZzPvV6DuoeGh4fA3NtlJxocgUmxxg7aRbMTxiWE6pdxnM3MxNBw0PDQ8rGxh1QZ3CQR5aAh/fRO80Tb1VIFOhdxnry9VqVU9kQBmsFGj/qNZCBVCRUKFVAD9AThP/afnIVRKVWPmj2U6pdxnW3XjwlIVGh5KMbZQhqqDqoOqw6oOnIe4AXUPdU9xo8EzL61z6VadTilfAzMLVSjG2HwZvLGT1R3W8DQVY+OZlze49GGDJIR8Dfz2ckz9lgcMFFAPaqAeVEAFVECFPy3WeWvNkZSQr4HLJcdPSnzKAKNblB6n9Dilxyk9TulxSo9TepzS4/4Lz8MqhS9ENeQAAAAASUVORK5CYII=",universalLink:"https://templewallet.com",deepLink:"temple://"},{key:"atomex_ios",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFIUlEQVR4AeXBfWyMdwDA8e/ze55r6dbW6Ol71cvKVekQZmyGMVtWzMu6YoRI9oeXTWJsppMzr40lnXbxNjYEwZiXKVWtlqMlq5eWVus1nWp7Srz2mHP3LP1DIovq1Z1Hk+fzkQwBJhUdE+icQOcEOifQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TuEVaRUeSo9unfEyGCgquUDBmXOoaE9BY8YWzUldModhcQORJIknThUW8+XXiRScLUFLsuxjNKMRfz9fstM20KdXdyRJ4mnBgUZGjYxjf5YF6/UbaEWgoTkzJ2OKaktdfF9/jVVL5yNJEloRaESWZcYmDKM+XTpHExvTAa0INBIaHEgzf19cEd2hHVoRaOSR3Y6rHj2yoxWBRqqs1ZRdvUZ9VFXl75OFaEWgoaXL11GfHXsOUHa1Aq0INLRszSa27UqnLufOX2LKjLloSZZ9jGY0oqoqO/Yc4Oat25ii2tDM349at+/cZdW6LYyf9C23bt9FS5IhwKSikTHxQ6iyVpN1KA9JkghsGYDBoFBReR2Hw8GrINDIoA/eY03qQvr36UktVVWpslZztbwSh8PBxwPfJ3HGJLQm0EBEeAhrlyVRcKaEeUuW8SydoqNI/GYSkRGhaEnwknl7e7F5TTJCSCRMnMbDh//yLBu37sapqowbNQwtCV6yxeYZdI2NYcLkWVwpK6cu1yqtZBw8wriEYQgh0IrAg7y9vQgLCaJJE2+eUGSZHxYkszcjh/qs3bidiLBgBrzfC60oeECbyHAWzplO3KB+eHkZsNsfk551mFlzf2LqzB9xVVrGIazVNxkdP5iM7CNoQZZ9jGbc0NH0Jof3bqJrbEdkWaaWLAvat2vNmPghZObkUmWtxhVOp5PSC1coOFvCpSv/oAWBGyRJ4rdfFtH8DX+exd/Pl7XLk5CFwFV7M3LIOHiEJ4QQvEwKbuga25EunaN5HlNUW3q93RVLXj6u8PIyMGHMSEZ/FkdsjIkm3l5UVF0nMyeXlJXrOVt8Hk9ScIMpqi2uMEW1xZKXT33aRIazbX0qMaYonhYWEsT40cP5In4oc5NSSfp5FZ6i4IYamw1X3LfZGNi3NwkjPiHzUC4Hso9y4+YtnmYMaE7Gjt+JCAuhLooiM2/2NJxOJ0tSVuMJCm44euwkdrsdg8FAXRwOB5bcfLp1iWFAv96MTfgUh8PJidNn2Z9lYevOfZReuEySeQYRYSG4wvzdV+zem0XpxSu4S5Z9jGZeUI3tAf5+vrzTvQt1+XXdVjb/mUbJ+cukrFjHX+nZlFdU0ToynISRccTGdCA98zCrUxcghMAVsiyolZ5lwV0Kbkqcn0xAi+aM/Xwo//fHzn1MT1zME06nyqnCYk4VFrM4eSXN/P2QZZm+7/ZAURQaon+fnniCgpvs9sdMnDKLtRu3M3zwh4QGB1JprWZnWibZlmM8z+07d6kVEtSShgoOaoknKHiIJS8fS14+L+J+jY2Gqqmx4QmCRuBkQRENdaKgCE8QNAKFRaUUFpXSEBu27MITBI2AqqpMn70Ih8OJK7Itx9mZloknyLKP0UwjUHb1Gtbr1Xw0oA9CCOpy+sw5RoydjM32AE+QZR+jmUbiZEExOZbjRLdvR2hIIE+7d7+GlBXrmTj1e+7cvYenSIYAk0oj1K5NK97qZKJp0yaUX6vieP5pbA8e4mkKjdTFy2VcvFzGyybQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TqBzAp0T6Nx/Vg+o6CnFmfYAAAAASUVORK5CYII=",universalLink:"https://atomex.me",deepLink:"atomex://"},{key:"umami_ios",name:"Umami Mobile",shortName:"Umami Mobile",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://",universalLink:"https://umamiwallet.com/"}];var bn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let py=EO,gy=yO,by=_O,vy=wO;const su=()=>py,AO=t=>{py=t},qa=()=>gy,xO=t=>{gy=t},Mh=()=>by,SO=t=>{by=t},$a=()=>vy,RO=t=>{vy=t},Eo=new eo,Gd=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var is;(function(t){t[t.DESKTOP=0]="DESKTOP",t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"})(is||(is={}));var br;(function(t){t.IOS="ios",t.ANDROID="android",t.EXTENSION="extension",t.DESKTOP="desktop",t.WEB="web"})(br||(br={}));class _i{static getPlatfrom(){return bn(this,void 0,void 0,function*(){return hy(window)?is.ANDROID:dy(window)?is.IOS:is.DESKTOP})}static getPairingInfo(e,r,n,i){return bn(this,void 0,void 0,function*(){const s=i??(yield _i.getPlatfrom()),o=e.p2pSyncCode,a=e.postmessageSyncCode,c=e.preferredNetwork;switch(s){case is.DESKTOP:return _i.getDesktopPairingAlert(o,r,a,n,c);case is.IOS:return _i.getIOSPairingAlert(o,r,c);case is.ANDROID:return _i.getAndroidPairingAlert(o,r,c);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,r,n,i,s){return bn(this,void 0,void 0,function*(){const o=yield Mc.getAvailableExtensions();o.forEach(c=>{const l=Gd.indexOf(c.id);l>=0&&Gd.splice(l,1)});const a=[];return qa().length>0&&a.push({title:"Browser Extensions",type:br.EXTENSION,wallets:[...o.map(c=>{var l,f,d,I,P;const L=qa().find(H=>H.id===c.id);return{key:(l=L?.key)!==null&&l!==void 0?l:c.id,name:(f=c.name)!==null&&f!==void 0?f:L?.name,logo:(d=c.iconUrl)!==null&&d!==void 0?d:L?.logo,shortName:(I=c.shortName)!==null&&I!==void 0?I:L?.shortName,color:(P=c.color)!==null&&P!==void 0?P:L?.color,enabled:!0,clicked:!1,clickHandler(){return bn(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,n){const H=yield Eo.serialize(yield n()),q={target:Ki.EXTENSION,payload:H,targetId:c.id};st.postMessage(q,st.location.origin)}r(br.EXTENSION,this)}})}}}),...qa().filter(c=>Gd.some(l=>l===c.id)).map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!1,clickHandler:()=>{window.open(c.link,"_blank")}}))].sort((c,l)=>c.key.localeCompare(l.key))}),su().length>0&&a.push({title:"Desktop & Web Wallets",type:br.DESKTOP,wallets:[...su().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return bn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield Eo.serialize(yield e()),f=Ua(c.deepLink,l);window.open(f,"_blank"),r(br.DESKTOP,this,!0)})}})),...yield _i.getWebList(e,r,s)].sort((c,l)=>c.key.localeCompare(l.key))}),$a().length>0&&a.push({title:"Mobile Wallets",type:br.IOS,wallets:[...$a().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return bn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield Eo.serialize(yield e());i(l),r(br.IOS,this,!0)})}}))].sort((c,l)=>c.key.localeCompare(l.key))}),{walletLists:a,buttons:[]}})}static getIOSPairingAlert(e,r,n){return bn(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:br.IOS,wallets:$a().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){var s;return bn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const o=yield Eo.serialize(yield e()),a=Ua((s=i.deepLink)!==null&&s!==void 0?s:i.universalLink,o),c=document.createElement("a");c.setAttribute("href",a),c.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),r(br.IOS,this,!0)})}})).sort((i,s)=>i.key.localeCompare(s.key))},{title:"Web Wallets",type:br.WEB,wallets:[...yield _i.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[]}})}static getAndroidPairingAlert(e,r,n){return bn(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:br.WEB,wallets:[...yield _i.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>bn(this,void 0,void 0,function*(){const i=yield Eo.serialize(yield e()),s=Ua("tezos://",i);window.open(s,"_blank"),r(br.ANDROID)})}]}})}static getWebList(e,r,n){return bn(this,void 0,void 0,function*(){return Mh().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const s=window.open("","_blank");e().then(o=>Eo.serialize(o)).then(o=>{var a;const c=Ua((a=i.links[n])!==null&&a!==void 0?a:i.links[St.MAINNET],o);s?s.location.href=c:window.open(c,"_blank"),r(br.WEB,this,!0)}).catch(o=>{console.error(o)})}})).sort((i,s)=>i.key.localeCompare(s.key))})}}const pe=(t,e,r,n)=>{const i=document.createElement(t);return e.length>0&&i.classList.add(...e.filter(s=>!!s).map(s=>Xs(s))),r.forEach(s=>{i.setAttribute(Xs(s[0]),Xs(s[1]))}),typeof n=="object"&&Array.isArray(n)?n.filter(s=>!!s).forEach(s=>{i.appendChild(s)}):typeof n=="string"&&(i.innerText=n),i},Ws=(t,e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.length>0&&n.classList.add(...t.filter(i=>!!i)),e.forEach(i=>{n.setAttribute(Xs(i[0]),Xs(i[1]))}),typeof r=="object"&&Array.isArray(r)&&r.filter(i=>!!i).forEach(i=>{n.appendChild(i)}),n},on=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return t.forEach(r=>{e.setAttribute(Xs(r[0]),Xs(r[1]))}),e},IO=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t.filter(r=>!!r).forEach(r=>{e.appendChild(r)}),e},TO=()=>Ws(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[on([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),Xs=t=>{const e=document.createElement("div");return e.innerText=t,e.innerHTML},Yg=t=>{t.innerHTML=""};var vn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Qg=new Zr("Alert"),Zg=new eo,OO=(t,e,r)=>vn(void 0,void 0,void 0,function*(){const n=()=>vn(void 0,void 0,void 0,function*(){return _i.getPairingInfo(r,(_,O,x)=>vn(void 0,void 0,void 0,function*(){x||(yield Zu())}),()=>vn(void 0,void 0,void 0,function*(){E()}))}),i=yield n(),s=e.getElementById("pairing-container");if(!s)throw new Error("container not found");const o=document.createElement("span");s.appendChild(o),i.buttons.forEach(_=>vn(void 0,void 0,void 0,function*(){const O=yield zi(),x=pe("div",["beacon-list__title"],[],_.title),y=pe("button",["beacon-modal__button","connect__btn"],[],_.text),u=document.createElement("a");u.id=`button_${O}`,u.appendChild(x),u.appendChild(y),o.appendChild(u);const p=e.getElementById(u.id);p&&p.addEventListener("click",()=>vn(void 0,void 0,void 0,function*(){_.clickHandler()}))}));const a=(_,O,x)=>{const y=`Open in ${x.name}`,u=x.key,p=x.logo?pe("div",[],[],[pe("img",["beacon-selection__img"],[["src",x.logo]],"")]):Ws(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[on([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),b=pe("div",["beacon-selection__name"],[],[pe("span",[],[],x.name),x.enabled?void 0:pe("p",[],[],"Not installed")]),g=pe("a",["beacon-selection__list",x.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${u}`],["alt",y],["target","_blank"]],[b,p]),h=document.createElement("span");h.appendChild(g),_.appendChild(h);const S=e.getElementById(`wallet_${u}`),T=w=>vn(void 0,void 0,void 0,function*(){if(w&&w.key!=="Enter")return;x.clickHandler();const v=e.getElementById("beacon-modal__content");v&&O!==br.EXTENSION&&O!==br.IOS&&(Yg(v),v.appendChild(pe("p",["beacon-alert__title"],[],"Establishing Connection..")),v.appendChild(pe("div",["progress-line"],[["id","beacon-toast-loader"]],"")),v.appendChild(pe("div",["beacon--selected__container"],[],[...x.logo?[pe("img",["beacon-selection__img"],[["src",x.logo]],""),pe("img",["beacon--selection__name__lg"],[],x.name)]:[]])))});S&&(S.addEventListener("click",()=>T()),S.addEventListener("keydown",T))},c=document.createElement("span");s.appendChild(c);const l=_=>{Yg(c),_.forEach(O=>{const x=document.createElement("div");x.classList.add("beacon-list__wrapper"),c.appendChild(x),x.appendChild(pe("div",["beacon-list__title"],[],O.title));const y=document.createElement("span");x.appendChild(y),O.wallets.forEach(u=>vn(void 0,void 0,void 0,function*(){a(y,O.type,u)}))})};l(i.walletLists);const f=_=>vn(void 0,void 0,void 0,function*(){if(_.data==="extensionsUpdated"){const O=yield n();l(O.walletLists)}});let d;d=_=>{_.data===`closeAlert-${t}`&&(st.removeEventListener("message",f),st.removeEventListener("message",d))},st.addEventListener("message",f),st.addEventListener("message",d);const I=e.getElementById("beacon--qr__container"),P=e.getElementById("beacon--qr__copy"),L=e.getElementById("beacon-title"),H=hy(window)?"android":dy(window)?"ios":"desktop",q=e.getElementById("beacon-main-text"),G=e.getElementById("pairing-container"),C=e.getElementById("beacon--switch__container"),V=()=>vn(void 0,void 0,void 0,function*(){const _=r?yield Zg.serialize(yield r.p2pSyncCode()):"";navigator.clipboard.writeText(_).then(()=>{P&&(P.innerText="Copied"),Qg.log("Copying to clipboard was successful!")},O=>{Qg.error("Could not copy text to clipboard: ",O)})});let U=!1;const F=_=>vn(void 0,void 0,void 0,function*(){const O=e.getElementById("beacon-switch");if(O&&(O.innerText=_==="none"?"Pair wallet on same device":"Pair wallet on another device"),q&&G&&C&&P&&I&&L)switch(q.style.display="none",L.style.textAlign="center",G.style.display="none",C.style.display="initial",_){case"ios":G.style.display="initial";break;case"android":G.style.display="initial";break;case"desktop":G.style.display="initial",L.style.textAlign="left",q.style.display="none",C.style.display="initial";break;default:if(!U){U=!0;const x=yield Zg.serialize(yield r.p2pSyncCode()),y=Ua("tezos://",x),p=mO(y,"svg").replace("<svg",'<svg class="beacon-alert__image"');I.insertAdjacentHTML("afterbegin",p),P&&P.addEventListener("click",V),I&&I.addEventListener("click",V)}q.style.display="initial"}});let j=!1;const E=()=>{F(j?"none":H),j=!j};E();{const _=e.getElementById("beacon-switch");_&&_.addEventListener("click",E)}});let my=Qf.LIGHT;const eb=t=>{my=t},Y0=()=>my,PO=t=>pe("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[pe("div",["beacon-toast__content"],[],[pe("span",[],[["id","beacon-text"]],[pe("p",[],[["id","beacon-text-content"]],t),pe("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[pe("span",[],[],"Open"),Ws(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[on([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),Ws(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[on([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),Ws(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[on([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),pe("div",["progress-line"],[["id","beacon-toast-loader"]],""),pe("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),pe("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),NO=()=>pe("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),Ws([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[pe("title",[],[],"beacon_logo"),on([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),on([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),on([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),yy=(t,e,r,n)=>pe("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${t}`]],[pe("div",["beacon-modal__wrapper"],[],[pe("div",["beacon-modal__header"],[],[Ws([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[pe("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),on([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),on([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),on([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),IO([on([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),pe("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${t}-close`]],[pe("div",["beacon-modal__close__icon"],[],[pe("div",["beacon-modal__close__line1"],[],[]),pe("div",["beacon-modal__close__line2"],[],[])])])]),pe("div",["beacon-modal__base"],[],[pe("div",[],[["id","beacon-modal__content"]],[pe("div",[],[],[pe("p",["beacon-alert__title"],[],e),...n,pe("div",["beacon-action__container"],[],r)])])])])]),MO=(t,e,r,n)=>yy(t,e,r,[pe("div",["beacon-alert__text"],[["id","beacon-main-text"]],n)]),LO=(t,e,r,n)=>yy(t,e,r,[pe("span",[],[["id","pairing-container"]],""),pe("div",["beacon-alert__text"],[["id","beacon-main-text"]],[pe("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet. "),pe("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...n])]),pe("div",[],[["id","beacon--switch__container"]],[pe("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),pe("div",[],[["id","beacon--disclaimer"]],"")]);var Ni=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let Lh,ds;typeof window<"u"&&typeof window.document<"u"&&(ds=window.document);const Ch={},CO=t=>typeof t=="string"?pe("div",[],[["id","beacon--qr__container"]],[pe("div",[],[["id","beacon--qr__copy__container"]],[pe("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):pe("span",[],[],""),BO=(t,e,r,n,i)=>{const s=r,o=n.map((f,d)=>pe("button",[`beacon-modal__button${f.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${t}-${d}`]],f.text));let a=Jg.default.css;i&&(a+=Jg.pair.css);const c=pe("span",[],[],s),l=i?LO(t,[c],o,[e]):MO(t,[c],o,[e]);return{style:a,html:l}},xf=t=>(st.postMessage(`closeAlert-${t}`),new Promise(e=>{var r;const n=ds.getElementById(`beacon-alert-wrapper-${t}`);if(!n)return e();const i=(r=n.shadowRoot)===null||r===void 0?void 0:r.getElementById(`beacon-alert-modal-${t}`);if(i){const o=Ch[t];o&&(clearTimeout(o),Ch[t]=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const a=n.parentNode;a&&a.removeChild(n),Lh&&Lh.focus(),e()},300)}else e()})),Zu=()=>Ni(void 0,void 0,void 0,function*(){return new Promise(t=>Ni(void 0,void 0,void 0,function*(){const e=ds.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const r=[];e.forEach(n=>Ni(void 0,void 0,void 0,function*(){r.push(n.id.split("-")[3])})),yield Promise.all(r.map(xf)),t()}else t()}))}),va=t=>Ni(void 0,void 0,void 0,function*(){var e,r;const n=t.body,i=t.data,s=t.title,o=t.timer,a=t.pairingPayload,c=t.disclaimerText,l=t.closeButtonCallback;yield Zu();const f=(yield zi()).split("-").join(""),d=ds.createElement("div");d.setAttribute("id",`beacon-alert-wrapper-${f}`);const I=d.attachShadow({mode:"open"}),P=ds.createElement("div");P.setAttribute("tabindex","0"),I.appendChild(P);const L=[...(r=(e=t.buttons)===null||e===void 0?void 0:e.map(_=>{var O,x;return{text:_.text,actionCallback:(O=_.actionCallback)!==null&&O!==void 0?O:()=>Promise.resolve(),style:(x=_.style)!==null&&x!==void 0?x:"outline"}}))!==null&&r!==void 0?r:[]];let H=a?CO(n):pe("span",[],[],n??"");i&&(H=pe("span",[],[],[H,pe("pre",[],[["style","text-align: left"]],i)]));const{style:q,html:G}=BO(f,H,s,L,!!a?.p2pSyncCode);P.appendChild(G);const C=ds.createElement("style");C.textContent=q,I.appendChild(C),o&&(Ch[f]=window.setTimeout(()=>Ni(void 0,void 0,void 0,function*(){yield xf(f)}),o)),ds.body.prepend(d);const V=I.getElementById(`beacon-alert-${f}-close`),U=()=>Ni(void 0,void 0,void 0,function*(){l&&l(),yield xf(f)});if(c){const _=I.getElementById("beacon--disclaimer");_&&(_.innerText=c)}const F=Y0(),j=I.getElementById(`beacon-alert-modal-${f}`);j&&(j.classList.add(`theme__${F}`),j.addEventListener("click",U));const E=I.querySelectorAll(".beacon-modal__wrapper");return E.length>0&&E[0].addEventListener("click",_=>{_.stopPropagation()}),Lh=ds.activeElement,P.focus(),L.forEach((_,O)=>{const x=I.getElementById(`beacon-alert-${f}-${O}`);x&&x.addEventListener("click",()=>Ni(void 0,void 0,void 0,function*(){yield xf(f),_.actionCallback&&(yield _.actionCallback())}))}),V&&V.addEventListener("click",()=>Ni(void 0,void 0,void 0,function*(){yield U()})),window.addEventListener("keydown",_=>Ni(void 0,void 0,void 0,function*(){_.key==="Escape"&&(yield U())})),a&&(yield OO(f,I,a)),f}),kO={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var Or=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let Rn;typeof window<"u"&&typeof window.document<"u"&&(Rn=window.document);const Ey=5*1e3;let za,ou,Pr;const DO=t=>Or(void 0,void 0,void 0,function*(){const{text:e,isBold:r,actionText:n,actionLogo:i,actionCallback:s}=t,o=yield zi(),a=Rn.createElement("div");a.classList.add("beacon-toast__action__item"),Bh(a);const c=l=>pe("strong",[],[],l);if(s){e.length>0&&a.appendChild(pe("p",[],[],e));const l=pe("span",[],[],[pe("span",[],[],n),i&&i==="external"?TO():void 0]);a.appendChild(pe("p",[],[],[pe("a",[],[["id",o]],[r?c([l]):l])]))}else if(n){e.length>0&&a.appendChild(pe("p",["beacon-toast__action__item__subtitle"],[],e));const l=pe("span",[],[],n);a.appendChild(pe("p",[],[],[r?c([l]):l]))}else{const l=pe("p",[],[],e);a.appendChild(r?c([l]):l)}return s&&a.addEventListener("click",s),a}),Bh=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},_y=t=>{var e,r;const n=(e=Pr?.walletInfo)===null||e===void 0?void 0:e.icon,i=(r=Pr?.walletInfo)===null||r===void 0?void 0:r.name;let s;const o=pe("strong",[],[],i??"Wallet");n?s=pe("span",["beacon-toast__wallet__container"],[],[pe("img",["beacon-toast__content__img"],[["src",n]],""),o]):s=o;const a=t.split("{{wallet}}");if(a.length===1)return[pe("span",[],[],t)];{const c=[];for(let l=0;l<a.length;l++)c.push(pe("span",[],[],a[l])),l<a.length-1&&c.push(s);return c}},UO=t=>{const e=t.body,r=_y(e),n=pe("span",["beacon-toast__wallet__outer"],[],r),i=PO([n]);return{style:kO.default.css,html:i}},Ar=()=>new Promise(t=>{var e;Pr=void 0;const r=Rn.getElementById("beacon-toast-wrapper");if(!r)return t();const n=(e=r.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");n?(za&&(clearTimeout(za),za=void 0),n.className=n.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const s=r.parentNode;s&&s.removeChild(r),t()},300)):t()}),Vd=(t,e,r)=>{const n=t.getElementById(e);return n&&n.addEventListener("click",()=>Or(void 0,void 0,void 0,function*(){yield r(n)})),n},Q0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.remove("hide"),r.classList.add("show"))},Z0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.add("hide"),r.classList.remove("show"))},KO=t=>{Z0(t,"beacon-toast-loader"),Q0(t,"beacon-toast-loader-placeholder")},HO=t=>{Q0(t,"beacon-toast-button-expand"),Z0(t,"beacon-toast-button-close")},wy=t=>{Q0(t,"beacon-toast-button-close"),Z0(t,"beacon-toast-button-expand")},Ay=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.remove("beacon-toast__upside_down"),r.classList.add("hide"),r.classList.remove("show"))},xy=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.add("beacon-toast__upside_down"),r.classList.remove("hide"),r.classList.add("show"))},kh=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.contains("beacon-toast__upside_down")?Ay(t):xy(t))},Sy=(t,e,r)=>Or(void 0,void 0,void 0,function*(){const n=e.actions;if(n&&n.length>0){const i=n.map(a=>Or(void 0,void 0,void 0,function*(){return DO(a)}));(yield Promise.all(i)).forEach(a=>r.appendChild(a));const o=Rn.createElement("small");o.classList.add("beacon-toast__powered"),o.appendChild(NO()),r.appendChild(o),HO(t)}else wy(t),Ay(t)}),tb=t=>Or(void 0,void 0,void 0,function*(){Pr=t;const e=t.timer,r=Rn.createElement("div");r.setAttribute("id","beacon-toast-wrapper");const n=r.attachShadow({mode:"open"}),i=Rn.createElement("div"),{style:s,html:o}=UO(t);i.appendChild(o);const a=Rn.createElement("style");a.textContent=s,n.appendChild(i),n.appendChild(a),e&&(za=window.setTimeout(()=>Or(void 0,void 0,void 0,function*(){yield Ar()}),e)),Rn.body.prepend(r);const c=Y0(),l=n.getElementById("beacon-toast");l&&l.classList.add(`theme__${c}`);const f=n.getElementById("beacon-toast-list");f&&(yield Sy(n,t,f));const d=n.getElementById("beacon-open-wallet");d&&(t.openWalletAction?d.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()}):d.classList.add("hide")),Pr.state==="loading"&&(ou=window.setTimeout(()=>Or(void 0,void 0,void 0,function*(){const P=n.getElementById("beacon-toast-button-expand");P&&!P.classList.contains("beacon-toast__upside_down")&&kh(n)}),Ey)),Vd(n,"beacon-toast-button-done",()=>Or(void 0,void 0,void 0,function*(){yield Ar()}));const I=Vd(n,"beacon-toast-button-close",()=>Or(void 0,void 0,void 0,function*(){yield Ar()}));I&&Pr.state==="loading"&&I.classList.add("hide"),Vd(n,"beacon-toast-button-expand",()=>Or(void 0,void 0,void 0,function*(){kh(n)}))}),FO=t=>Or(void 0,void 0,void 0,function*(){Pr=Object.assign(Object.assign({},Pr),t);const e=t.timer,r=Rn.getElementById("beacon-toast-wrapper");if(!r)return;const n=r.shadowRoot;if(!n)return;const i=n.getElementById("beacon-toast-list");i&&(Bh(i),yield Sy(n,t,i)),Pr.state==="loading"&&(ou=window.setTimeout(()=>Or(void 0,void 0,void 0,function*(){const c=n.getElementById("beacon-toast-button-expand");c&&!c.classList.contains("beacon-toast__upside_down")&&kh(n)}),Ey));const s=n.getElementById("beacon-text-content");s&&(Bh(s),s.appendChild(pe("span",["beacon-toast__wallet__outer"],[],_y(t.body))));const o=n.getElementById("beacon-open-wallet");o&&(t.openWalletAction?(o.classList.remove("hide"),o.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()})):o.classList.add("hide")),e&&(za=window.setTimeout(()=>Or(void 0,void 0,void 0,function*(){yield Ar()}),e));const a=n.getElementById("beacon-toast-button-done");a&&a.addEventListener("click",()=>Or(void 0,void 0,void 0,function*(){yield Ar()}))}),Ns=t=>Or(void 0,void 0,void 0,function*(){var e;if(ou&&clearTimeout(ou),Rn.getElementById("beacon-toast-wrapper")?t.forceNew?(yield Ar(),yield tb(t)):yield FO(t):yield tb(t),Pr&&Pr.state==="finished"){const n=(e=Rn.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;n&&(KO(n),wy(n),xy(n))}}),el=t=>t.length>=12?`${t.substr(0,5)}...${t.substr(-5)}`:t;var bt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const hc=new Zr("BeaconEvents"),Lc=5*1e3;var fe;(function(t){t.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",t.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",t.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",t.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",t.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",t.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",t.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",t.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",t.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",t.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",t.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",t.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",t.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",t.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",t.NO_PERMISSIONS="NO_PERMISSIONS",t.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",t.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",t.SHOW_PREPARE="SHOW_PREPARE",t.HIDE_UI="HIDE_UI",t.PAIR_INIT="PAIR_INIT",t.PAIR_SUCCESS="PAIR_SUCCESS",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.INTERNAL_ERROR="INTERNAL_ERROR",t.UNKNOWN="UNKNOWN"})(fe||(fe={}));const af=t=>bt(void 0,void 0,void 0,function*(){let e;const r=[];if(t.walletInfo.deeplink&&(t.walletInfo.type==="web"||t.walletInfo.type==="mobile"&&Nh(window)||t.walletInfo.type==="desktop"&&!Nh(window))){const n=t.walletInfo.deeplink;e=()=>bt(void 0,void 0,void 0,function*(){const i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("target","_blank"),i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}r.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),r.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Ar()})}),r.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Ar();const n=t.extraInfo.resetCallback;n&&(hc.log("showSentToast","resetCallback invoked"),yield n())})}),Ns({body:"Request sent to  {{wallet}}",walletInfo:t.walletInfo,state:"loading",actions:r,openWalletAction:e}).catch(n=>console.error(n))}),jO=t=>bt(void 0,void 0,void 0,function*(){Ns({body:"Awaiting confirmation in  {{wallet}}",state:"acknowledge",walletInfo:t.walletInfo}).catch(e=>console.error(e))}),GO=t=>bt(void 0,void 0,void 0,function*(){const e=t.walletInfo?"Preparing Request for  {{wallet}}...":"Preparing Request...";Ns({body:e,state:"prepare",walletInfo:t.walletInfo}).catch(r=>console.error(r))}),VO=t=>bt(void 0,void 0,void 0,function*(){t?(t.includes("alert")&&Zu(),t.includes("toast")&&Ar()):Ar()}),qO=()=>bt(void 0,void 0,void 0,function*(){yield va({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),cf=(t,e)=>bt(void 0,void 0,void 0,function*(){var r,n,i,s,o,a;const c=t.errorResponse.errorType?en.getError(t.errorResponse.errorType,t.errorResponse.errorData):new X2,l=[{text:c.title,isBold:!0}];if(t.errorResponse.errorType===pt.TRANSACTION_INVALID_ERROR&&t.errorResponse.errorData){const f=t.errorResponse.errorData,d=t.errorMessages;let I=!1;if(!((r=f[0])===null||r===void 0)&&r.contract_handle&&d&&d?.[f[0].contract_handle]){const P=(s=(i=(n=f[1])===null||n===void 0?void 0:n.with)===null||i===void 0?void 0:i.int)!==null&&s!==void 0?s:(a=(o=f[1])===null||o===void 0?void 0:o.with)===null||a===void 0?void 0:a.string,L=d?.[f[0].contract_handle];P&&L?.[P]&&(l.push({text:L?.[P],isBold:!0}),I=!0)}I||l.push({text:c.description}),l.push({text:"",actionText:"Show Details",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Ar(),yield va({title:c.title,body:c.fullDescription.description,data:c.fullDescription.data,buttons:e})})})}yield Ns({body:"{{wallet}}  has returned an error",timer:t.errorResponse.errorType===pt.ABORTED_ERROR?Lc:void 0,state:"finished",walletInfo:t.walletInfo,actions:l})}),$O=()=>bt(void 0,void 0,void 0,function*(){va({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(t=>console.error(t))}),zO=()=>bt(void 0,void 0,void 0,function*(){yield Zu()}),WO=()=>bt(void 0,void 0,void 0,function*(){yield va({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),XO=t=>bt(void 0,void 0,void 0,function*(){var e;const r=[...(e=t.buttons)!==null&&e!==void 0?e:[]];r.push({text:"Done",style:"outline"});const n={title:"Internal Error",body:t.text,buttons:r};yield va(n)}),JO=t=>bt(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:t.p2pPeerInfo,postmessageSyncCode:t.postmessagePeerInfo,preferredNetwork:t.preferredNetwork},closeButtonCallback:t.abortedHandler,disclaimerText:t.disclaimerText};yield va(e)}),YO=t=>bt(void 0,void 0,void 0,function*(){const{output:e}=t;yield Ns({body:"{{wallet}}  has granted permission",timer:Lc,walletInfo:t.walletInfo,state:"finished",actions:[{text:"Address",actionText:el(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),QO=t=>bt(void 0,void 0,void 0,function*(){const{account:e,output:r,blockExplorer:n}=t;yield Ns({body:"{{wallet}}  successfully submitted operation",timer:Lc,state:"finished",walletInfo:t.walletInfo,actions:[{text:el(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>bt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e.network);window.open(i,"_blank"),yield Ar()})}]})}),ZO=t=>bt(void 0,void 0,void 0,function*(){const e=t.output;yield Ns({body:"{{wallet}}  successfully signed payload",timer:Lc,state:"finished",walletInfo:t.walletInfo,actions:[{text:`Signature: ${el(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>bt(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{hc.log("showSignSuccessAlert","Copying to clipboard was successful!")},r=>{hc.error("showSignSuccessAlert","Could not copy text to clipboard: ",r)}),yield Ar()})}]})}),eP=t=>bt(void 0,void 0,void 0,function*(){const{network:e,output:r,blockExplorer:n}=t;yield Ns({body:"{{wallet}}  successfully injected operation",timer:Lc,state:"finished",walletInfo:t.walletInfo,actions:[{text:el(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>bt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e);window.open(i,"_blank"),yield Ar()})}]})}),qd=()=>()=>bt(void 0,void 0,void 0,function*(){}),Et={[fe.PERMISSION_REQUEST_SENT]:af,[fe.PERMISSION_REQUEST_SUCCESS]:YO,[fe.PERMISSION_REQUEST_ERROR]:cf,[fe.OPERATION_REQUEST_SENT]:af,[fe.OPERATION_REQUEST_SUCCESS]:QO,[fe.OPERATION_REQUEST_ERROR]:cf,[fe.SIGN_REQUEST_SENT]:af,[fe.SIGN_REQUEST_SUCCESS]:ZO,[fe.SIGN_REQUEST_ERROR]:cf,[fe.BROADCAST_REQUEST_SENT]:af,[fe.BROADCAST_REQUEST_SUCCESS]:eP,[fe.BROADCAST_REQUEST_ERROR]:cf,[fe.ACKNOWLEDGE_RECEIVED]:jO,[fe.LOCAL_RATE_LIMIT_REACHED]:$O,[fe.NO_PERMISSIONS]:qO,[fe.ACTIVE_ACCOUNT_SET]:qd(),[fe.ACTIVE_TRANSPORT_SET]:qd(),[fe.SHOW_PREPARE]:GO,[fe.HIDE_UI]:VO,[fe.PAIR_INIT]:JO,[fe.PAIR_SUCCESS]:zO,[fe.CHANNEL_CLOSED]:WO,[fe.INTERNAL_ERROR]:XO,[fe.UNKNOWN]:qd()};class rb{constructor(e={},r){this.callbackMap={[fe.PERMISSION_REQUEST_SENT]:[Et.PERMISSION_REQUEST_SENT],[fe.PERMISSION_REQUEST_SUCCESS]:[Et.PERMISSION_REQUEST_SUCCESS],[fe.PERMISSION_REQUEST_ERROR]:[Et.PERMISSION_REQUEST_ERROR],[fe.OPERATION_REQUEST_SENT]:[Et.OPERATION_REQUEST_SENT],[fe.OPERATION_REQUEST_SUCCESS]:[Et.OPERATION_REQUEST_SUCCESS],[fe.OPERATION_REQUEST_ERROR]:[Et.OPERATION_REQUEST_ERROR],[fe.SIGN_REQUEST_SENT]:[Et.SIGN_REQUEST_SENT],[fe.SIGN_REQUEST_SUCCESS]:[Et.SIGN_REQUEST_SUCCESS],[fe.SIGN_REQUEST_ERROR]:[Et.SIGN_REQUEST_ERROR],[fe.BROADCAST_REQUEST_SENT]:[Et.BROADCAST_REQUEST_SENT],[fe.BROADCAST_REQUEST_SUCCESS]:[Et.BROADCAST_REQUEST_SUCCESS],[fe.BROADCAST_REQUEST_ERROR]:[Et.BROADCAST_REQUEST_ERROR],[fe.ACKNOWLEDGE_RECEIVED]:[Et.ACKNOWLEDGE_RECEIVED],[fe.LOCAL_RATE_LIMIT_REACHED]:[Et.LOCAL_RATE_LIMIT_REACHED],[fe.NO_PERMISSIONS]:[Et.NO_PERMISSIONS],[fe.ACTIVE_ACCOUNT_SET]:[Et.ACTIVE_ACCOUNT_SET],[fe.ACTIVE_TRANSPORT_SET]:[Et.ACTIVE_TRANSPORT_SET],[fe.SHOW_PREPARE]:[Et.SHOW_PREPARE],[fe.HIDE_UI]:[Et.HIDE_UI],[fe.PAIR_INIT]:[Et.PAIR_INIT],[fe.PAIR_SUCCESS]:[Et.PAIR_SUCCESS],[fe.CHANNEL_CLOSED]:[Et.CHANNEL_CLOSED],[fe.INTERNAL_ERROR]:[Et.INTERNAL_ERROR],[fe.UNKNOWN]:[Et.UNKNOWN]},r&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,r){return bt(this,void 0,void 0,function*(){const n=this.callbackMap[e]||[];n.push(r),this.callbackMap[e]=n})}emit(e,r,n){return bt(this,void 0,void 0,function*(){const i=this.callbackMap[e];i&&i.length>0&&i.forEach(s=>bt(this,void 0,void 0,function*(){try{yield s(r,n)}catch(o){hc.error(`error handling event ${e}`,o)}}))})}overrideDefaults(e){Object.keys(e).forEach(r=>{const n=r,i=e[n];i&&(this.callbackMap[n]=[i.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(r=>{const n=r;this.callbackMap[n]=[],e?this.callbackMap[n].push(e):this.callbackMap[n].push((...i)=>{hc.log(r,...i)})})}}const ff={[Ke.BlockchainRequest]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.BlockchainResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.PermissionRequest]:{sent:fe.PERMISSION_REQUEST_SENT,success:fe.PERMISSION_REQUEST_SUCCESS,error:fe.PERMISSION_REQUEST_ERROR},[Ke.PermissionResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.OperationRequest]:{sent:fe.OPERATION_REQUEST_SENT,success:fe.OPERATION_REQUEST_SUCCESS,error:fe.OPERATION_REQUEST_ERROR},[Ke.OperationResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.SignPayloadRequest]:{sent:fe.SIGN_REQUEST_SENT,success:fe.SIGN_REQUEST_SUCCESS,error:fe.SIGN_REQUEST_ERROR},[Ke.SignPayloadResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.BroadcastRequest]:{sent:fe.BROADCAST_REQUEST_SENT,success:fe.BROADCAST_REQUEST_SUCCESS,error:fe.BROADCAST_REQUEST_ERROR},[Ke.BroadcastResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Acknowledge]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Disconnect]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Error]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN}};var tP=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class rP{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return tP(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var nb=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class nP extends rP{constructor(e={[St.MAINNET]:"https://tzkt.io",[St.GHOSTNET]:"https://ghostnet.tzkt.io",[St.MONDAYNET]:"https://mondaynet.tzkt.io",[St.DAILYNET]:"https://dailynet.tzkt.io",[St.DELPHINET]:"https://delphinet.tzkt.io",[St.EDONET]:"https://edonet.tzkt.io",[St.FLORENCENET]:"https://florencenet.tzkt.io",[St.GRANADANET]:"https://granadanet.tzkt.io",[St.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[St.ITHACANET]:"https://ithacanet.tzkt.io",[St.JAKARTANET]:"https://jakartanet.tzkt.io",[St.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[St.LIMANET]:"https://limanet.tzkt.io",[St.MUMBAINET]:"https://mumbainet.tzkt.io",[St.CUSTOM]:"https://mumbainet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,r){return nb(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}getTransactionLink(e,r){return nb(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}}var uf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const $d=new Zr("DappPostMessageTransport");class iP extends Mc{constructor(e,r,n){super(e,r,n,ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return uf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>uf(this,void 0,void 0,function*(){$d.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=an.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return uf(this,void 0,void 0,function*(){$d.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return uf(this,void 0,void 0,function*(){$d.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var lf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const zd=new Zr("DappP2PTransport");class sP extends fO{constructor(e,r,n,i,s,o){super(e,r,n,i,ke.TRANSPORT_P2P_PEERS_DAPP,s,o)}startOpenChannelListener(){return lf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>lf(this,void 0,void 0,function*(){zd.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=an.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return lf(this,void 0,void 0,function*(){zd.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return lf(this,void 0,void 0,function*(){zd.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Ie=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Lt=new Zr("DAppClient");class oP extends KI{constructor(e){var r,n,i,s,o;super(Object.assign({storage:e&&e.storage?e.storage:new WI},e)),this.events=new rb,this.openRequests=new Map,this._activeAccount=new Zt,this._activePeer=new Zt,this.blockchains=new Map,this.events=new rb(e.eventHandlers,(r=e.disableDefaultEvents)!==null&&r!==void 0?r:!1),this.blockExplorer=(n=e.blockExplorer)!==null&&n!==void 0?n:new nP,this.preferredNetwork=(i=e.preferredNetwork)!==null&&i!==void 0?i:St.MAINNET,eb((s=e.colorMode)!==null&&s!==void 0?s:Qf.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=(o=e.errorMessages)!==null&&o!==void 0?o:{},this.appMetadataManager=new XI(this.storage),this.activeAccountLoaded=this.storage.get(ke.ACTIVE_ACCOUNT).then(a=>Ie(this,void 0,void 0,function*(){a?yield this.setActiveAccount(yield this.accountManager.getAccount(a)):yield this.setActiveAccount(void 0)})).catch(a=>Ie(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(a)})),this.handleResponse=(a,c)=>Ie(this,void 0,void 0,function*(){var l,f;const d=this.openRequests.get(a.id);if(Lt.log("handleResponse","Received message",a,c),a.version==="3"){const I=a;if(d&&I.message.type===Ke.Acknowledge)Lt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(fe.ACKNOWLEDGE_RECEIVED,{message:I.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d){const P=I.message.blockchainData.appMetadata;I.message.type===Ke.PermissionResponse&&P&&(yield this.appMetadataManager.addAppMetadata(P)),console.timeLog(I.id,"response"),console.timeEnd(I.id),I.message.type===Ke.Error?d.reject(I.message):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(I.id)}else if(I.message.type===Ke.Disconnect){const P=c.origin===xn.P2P?this.p2pTransport:(l=this.postMessageTransport)!==null&&l!==void 0?l:yield this.transport;if(P){const H=(yield P.getPeers()).find(q=>q.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(fe.CHANNEL_CLOSED)):Lt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Lt.error("handleResponse","no request found for id ",a.id,a)}else{const I=a;if(d&&I.type===Ke.Acknowledge)Lt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(fe.ACKNOWLEDGE_RECEIVED,{message:I,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d)I.type===Ke.PermissionResponse&&I.appMetadata&&(yield this.appMetadataManager.addAppMetadata(I.appMetadata)),console.timeLog(I.id,"response"),console.timeEnd(I.id),I.type===Ke.Error||a.errorType?d.reject(I):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(I.id);else if(I.type===Ke.Disconnect||a.typedMessage.type===Ke.Disconnect){const P=c.origin===xn.P2P?this.p2pTransport:(f=this.postMessageTransport)!==null&&f!==void 0?f:yield this.transport;if(P){const H=(yield P.getPeers()).find(q=>q.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(fe.CHANNEL_CLOSED)):Lt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Lt.error("handleResponse","no request found for id ",a.id,a)}})}initInternalTransports(){return Ie(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new iP(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new sP(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const r=Object.create(null,{init:{get:()=>super.init}});return Ie(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(n=>Ie(this,void 0,void 0,function*(){if(e)yield this.addListener(e),n(yield r.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),n(yield r.init.call(this,yield this.transport));else{const i=yield this.getActiveAccount(),s=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),i&&i.origin){const o=i.origin.type;o===xn.EXTENSION?n(yield r.init.call(this,this.postMessageTransport)):o===xn.P2P&&n(yield r.init.call(this,this.p2pTransport))}else{const o=this.p2pTransport,a=this.postMessageTransport;a.listenForNewPeer(c=>{Lt.log("init","postmessage transport peer connected",c),this.events.emit(fe.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),s(),n(Zs.POST_MESSAGE)}).catch(console.error),o.listenForNewPeer(c=>{Lt.log("init","p2p transport peer connected",c),this.events.emit(fe.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),s(),n(Zs.P2P)}).catch(console.error),Mc.getAvailableExtensions().then(()=>Ie(this,void 0,void 0,function*(){this.events.emit(fe.PAIR_INIT,{p2pPeerInfo:()=>(o.connect().then().catch(console.error),o.getPairingRequestInfo()),postmessagePeerInfo:()=>a.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{console.log("ABORTED"),this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(c=>console.warn(c))})).catch(c=>{this._initPromise=void 0,console.error(c)})}}})),this._initPromise})}getActiveAccount(){return Ie(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return Ie(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=Zt.resolve(e):this._activeAccount.resolve(e),e){const r=e.origin.type;yield this.initInternalTransports(),r===xn.EXTENSION?yield this.setTransport(this.postMessageTransport):r===xn.P2P&&(yield this.setTransport(this.p2pTransport));const n=yield this.getPeer(e);yield this.setActivePeer(n)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(ke.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(fe.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return Ie(this,void 0,void 0,function*(){return eb(e)})}getColorMode(){return Ie(this,void 0,void 0,function*(){return Y0()})}getAppMetadata(){return Ie(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return Ie(this,void 0,void 0,function*(){const e=yield(()=>Ie(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(fe.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return Ie(this,void 0,void 0,function*(){yield this.events.emit(fe.HIDE_UI,e)})}removeAccount(e){const r=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return Ie(this,void 0,void 0,function*(){const n=r.removeAccount.call(this,e),i=yield this.getActiveAccount();return i&&i.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),n})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return Ie(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,r=!1){return Ie(this,void 0,void 0,function*(){const n=yield this.transport,i=n.removePeer(e);return yield this.removeAccountsForPeers([e]),r&&(yield this.sendDisconnectToPeer(e,n)),i})}removeAllPeers(e=!1){return Ie(this,void 0,void 0,function*(){const r=yield this.transport,n=yield r.getPeers(),i=r.removeAllPeers();if(yield this.removeAccountsForPeers(n),e){const s=n.map(o=>this.sendDisconnectToPeer(o,r));yield Promise.all(s)}return i})}subscribeToEvent(e,r){return Ie(this,void 0,void 0,function*(){yield this.events.on(e,r)})}checkPermissions(e){return Ie(this,void 0,void 0,function*(){if(e===Ke.PermissionRequest)return!0;const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account set!");const n=r.scopes;switch(e){case Ke.OperationRequest:return n.includes(An.OPERATION_REQUEST);case Ke.SignPayloadRequest:return n.includes(An.SIGN);case Ke.BroadcastRequest:return!0;default:return!1}})}sendNotification(e,r,n,i){var s,o,a;return Ie(this,void 0,void 0,function*(){const c=yield this.getActiveAccount();if(!c||c&&!c.scopes.includes(An.NOTIFICATION)&&!c.notification)throw new Error("notification permissions not given");if(!(!((s=c.notification)===null||s===void 0)&&s.token))throw new Error("No AccessToken");const l=(o=c.notification)===null||o===void 0?void 0:o.apiUrl;if(!l)throw new Error("No Push URL set");return this.sendNotificationWithAccessToken({url:l,recipient:c.address,title:e,body:r,payload:n,protocolIdentifier:i,accessToken:(a=c.notification)===null||a===void 0?void 0:a.token})})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(r=>{AO(r.desktopList),xO(r.extensionList),SO(r.webList),RO(r.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return Ie(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const n=Object.assign(Object.assign({},e),{type:Ke.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",n);const{message:i,connectionInfo:s}=yield this.makeRequestV3(n).catch(c=>Ie(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",i,s);const o=yield r.getAccountInfosFromPermissionResponse(i.message),a={accountIdentifier:o[0].accountId,senderId:i.senderId,origin:{type:s.origin,id:s.id},address:o[0].address,publicKey:o[0].publicKey,scopes:i.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:i.message.blockchainData};return yield this.accountManager.addAccount(a),yield this.setActiveAccount(a),yield r.handleResponse({request:n,account:a,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(n,{account:a,output:{address:o[0].address,network:{type:St.MAINNET},scopes:[An.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i.message})}request(e){return Ie(this,void 0,void 0,function*(){console.log("REQUEST",e);const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${r}" not supported by dAppClient`);yield r.validateRequest(e);const n=yield this.getActiveAccount();if(!n)throw yield this.sendInternalError("No active account!");const i=Object.assign(Object.assign({},e),{type:Ke.BlockchainRequest,accountId:n.accountIdentifier}),{message:s,connectionInfo:o}=yield this.makeRequestV3(i).catch(a=>Ie(this,void 0,void 0,function*(){throw console.error(a),new Error("TODO")}));return yield r.handleResponse({request:i,account:n,output:s,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),s.message})}requestPermissions(e){return Ie(this,void 0,void 0,function*(){const r={appMetadata:yield this.getOwnAppMetadata(),type:Ke.PermissionRequest,network:e&&e.network?e.network:{type:St.MAINNET},scopes:e&&e.scopes?e.scopes:[An.OPERATION_REQUEST,An.SIGN]},{message:n,connectionInfo:i}=yield this.makeRequest(r).catch(l=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,l)})),s=n.publicKey||n.pubkey||n.pubKey,o=yield xI(s),a={accountIdentifier:yield Ih(o,n.network),senderId:n.senderId,origin:{type:i.origin,id:i.id},address:o,publicKey:s,network:n.network,scopes:n.scopes,threshold:n.threshold,notification:n.notification,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(a),yield this.setActiveAccount(a);const c=Object.assign(Object.assign({},n),{address:o,accountInfo:a});return yield this.notifySuccess(r,{account:a,output:c,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),c})}requestSignPayload(e){return Ie(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n=e.payload;if(typeof n!="string")throw new Error("Payload must be a string");const i=(()=>{switch(e.signingType){case ns.OPERATION:if(!n.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return ns.OPERATION;case ns.MICHELINE:if(!n.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return ns.MICHELINE;case ns.RAW:default:return ns.RAW}})(),s={type:Ke.SignPayloadRequest,signingType:i,payload:n,sourceAddress:e.sourceAddress||r.address},{message:o,connectionInfo:a}=yield this.makeRequest(s).catch(c=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(s,c)}));return yield this.notifySuccess(s,{account:r,output:o,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}requestOperation(e){return Ie(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n={type:Ke.OperationRequest,network:r.network||{type:St.MAINNET},operationDetails:e.operationDetails,sourceAddress:r.address||""},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{account:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}requestBroadcast(e){return Ie(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const r=e.network||{type:St.MAINNET},n={type:Ke.BroadcastRequest,network:r,signedTransaction:e.signedTransaction},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{network:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}setActivePeer(e){return Ie(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=Zt.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const r=Object.create(null,{setTransport:{get:()=>super.setTransport}});return Ie(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const n=r.setTransport.call(this,e);return yield this.events.emit(fe.ACTIVE_TRANSPORT_SET,e),n})}sendInternalError(e){return Ie(this,void 0,void 0,function*(){throw yield this.events.emit(fe.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return Ie(this,void 0,void 0,function*(){const r=yield this.accountManager.getAccounts(),n=e.map(a=>a.senderId),s=r.filter(a=>n.includes(a.senderId)).map(a=>a.accountIdentifier);yield this.accountManager.removeAccounts(s);const o=yield this.getActiveAccount();o&&s.includes(o.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,r){return Ie(this,void 0,void 0,function*(){if(Lt.error("handleRequestError","error response",r),r.errorType){const n=[];if(r.errorType===pt.NO_PRIVATE_KEY_FOUND_ERROR){const o=()=>Ie(this,void 0,void 0,function*(){const a=e;let c;if(a.sourceAddress&&a.network){const l=yield Ih(a.sourceAddress,a.network);c=yield this.getAccount(l),c&&(yield this.removeAccount(c.accountIdentifier))}});n.push({text:"Remove account",actionCallback:o})}const i=yield this.getPeer(),s=yield this.getActiveAccount();throw e.type===Ke.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(ff[e.type].error,{errorResponse:r,walletInfo:yield this.getWalletInfo(i,s),errorMessages:this.errorMessages},n).catch(o=>Lt.error("handleRequestError",o)),en.getError(r.errorType,r.errorData)}throw r})}notifySuccess(e,r){return Ie(this,void 0,void 0,function*(){this.events.emit(ff[e.type].success,r).catch(n=>console.warn(n))})}getWalletInfo(e,r){var n,i;return Ie(this,void 0,void 0,function*(){const s=r||(yield this.getActiveAccount()),o=e||(yield this.getPeer(s));let a;s&&(a=yield this.appMetadataManager.getAppMetadata(s.senderId));const c=o;a||(a={name:c.name,icon:c.icon});const l=(I,P)=>I&&P?I.toLowerCase()===P.toLowerCase():!1;let f,d;if($a().find(I=>l(I.name,a?.name))?(f=$a().find(I=>l(I.name,a?.name)),d="mobile"):Mh().find(I=>l(I.name,a?.name))?(f=Mh().find(I=>l(I.name,a?.name)),d="web"):su().find(I=>l(I.name,a?.name))?(f=su().find(I=>l(I.name,a?.name)),d="desktop"):qa().find(I=>l(I.name,a?.name))&&(f=qa().find(I=>l(I.name,a?.name)),d="extension"),f){let I;return f.hasOwnProperty("links")?I=f.links[(n=s?.network.type)!==null&&n!==void 0?n:this.preferredNetwork]:f.hasOwnProperty("deepLink")&&(I=f.deepLink),{name:a.name,icon:(i=a.icon)!==null&&i!==void 0?i:f.logo,deeplink:I,type:d}}return a})}getPeer(e){var r,n,i,s;return Ie(this,void 0,void 0,function*(){let o;if(e){Lt.log("getPeer","We have an account",e);const a=(n=yield(r=this.postMessageTransport)===null||r===void 0?void 0:r.getPeers())!==null&&n!==void 0?n:[],c=(s=yield(i=this.p2pTransport)===null||i===void 0?void 0:i.getPeers())!==null&&s!==void 0?s:[],l=[...a,...c];Lt.log("getPeer","Found peers",l,e),o=l.find(f=>f.senderId===e.senderId),o||(o=l.find(f=>f.extensionId===e.origin.id))}else o=yield this._activePeer.promise,Lt.log("getPeer","Active peer",o);if(!o)throw new Error("No matching peer found.");return o})}makeRequest(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield zi();if(console.time(n),Lt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Lt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(fe.LOCAL_RATE_LIMIT_REACHED).catch(f=>console.warn(f)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(fe.NO_PERMISSIONS).catch(f=>console.warn(f)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i=Object.assign({id:n,version:"2",senderId:yield ta(yield this.beaconId)},e),s=new Zt;this.addOpenRequest(i.id,s);const o=yield new eo().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Lt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(f){throw this.events.emit(fe.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Ar(),this.disconnect()})}]}),console.timeLog(n,"send error"),f}return console.timeLog(n,"sent"),this.events.emit(ff[e.type].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(f=>console.warn(f)),s.promise})}makeRequestV3(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield zi();if(console.time(n),Lt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Lt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(fe.LOCAL_RATE_LIMIT_REACHED).catch(d=>console.warn(d)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i={id:n,version:"3",senderId:yield ta(yield this.beaconId),message:e},s=new Zt;this.addOpenRequest(i.id,s);const o=yield new eo().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Lt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(d){throw this.events.emit(fe.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Ar(),this.disconnect()})}]}),console.timeLog(n,"send error"),d}console.timeLog(n,"sent");const f=e.type;return this.events.emit(ff[f].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(d=>console.warn(d)),s.promise})}disconnect(){return Ie(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,r){Lt.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,r)}sendNotificationWithAccessToken(e){return Ie(this,void 0,void 0,function*(){const{url:r,recipient:n,title:i,body:s,payload:o,protocolIdentifier:a,accessToken:c}=e,l=new Date().toISOString(),f=yield this.keyPair,d=f.publicKey,I=Buffer.from(new Uint8Array([13,15,37,217])),P=Xr.encode(Buffer.concat([I,Buffer.from(d)])),L=["Tezos Signed Message: ",n,i,s,l,o].join(" "),H=$i(L),q="0501"+H.length.toString(16).padStart(8,"0")+H,G=yield II(q,{secretKey:Buffer.from(f.secretKey)});return(yield tu.post(`${r}/send`,{recipient:n,title:i,body:s,timestamp:l,payload:o,accessToken:c,protocolIdentifier:a,sender:{name:this.name,publicKey:P,signature:G}})).data})}}let rs;const aP=(t,e)=>(rs&&e&&(rs.disconnect(),rs=void 0),rs||(rs||(rs=new oP(t)),rs));function yi(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}class ib extends Error{constructor(){super("You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"),this.name="BeaconWalletNotInitialized"}}class cP extends Error{constructor(e){super(`Required permissions scopes were not granted: ${e.join(",")}`),this.requiredScopes=e,this.name="MissingRequiredScopes"}}class fP{constructor(e){this.client=aP(e)}validateRequiredScopesOrFail(e,r){const n=new Set(r);for(const i of e)n.has(i)&&n.delete(i);if(n.size>0)throw new cP(Array.from(n))}requestPermissions(e){return yi(this,void 0,void 0,function*(){yield this.client.requestPermissions(e)})}getPKH(){return yi(this,void 0,void 0,function*(){const e=yield this.client.getActiveAccount();if(!e)throw new ib;return e.address})}mapTransferParamsToWalletParams(e){return yi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Jo(this.formatParameters(r)))})}mapIncreasePaidStorageWalletParams(e){return yi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Qo(this.formatParameters(r)))})}mapOriginateParamsToWalletParams(e){return yi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Xo(this.formatParameters(r)))})}mapDelegateParamsToWalletParams(e){return yi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Yo(this.formatParameters(r)))})}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,r){return e.fee||delete r.fee,e.storageLimit||delete r.storage_limit,e.gasLimit||delete r.gas_limit,r}sendOperations(e){return yi(this,void 0,void 0,function*(){const r=yield this.client.getActiveAccount();if(!r)throw new ib;const n=r.scopes;this.validateRequiredScopesOrFail(n,[An.OPERATION_REQUEST]);const{transactionHash:i}=yield this.client.requestOperation({operationDetails:e});return i})}disconnect(){return yi(this,void 0,void 0,function*(){yield this.client.destroy()})}clearActiveAccount(){return yi(this,void 0,void 0,function*(){yield this.client.setActiveAccount()})}}function sb(t){let e,r,n,i;return{c(){e=Ir("img"),It(e,"id","image"),It(e,"alt","visiblr portrait"),np(e.src,r=t[3])||It(e,"src",r),It(e,"class","svelte-cdspit")},m(s,o){Yt(s,e,o),i=!0},p(s,o){(!i||o&8&&!np(e.src,r=s[3]))&&It(e,"src",r)},i(s){i||(bs(()=>{i&&(n||(n=vs(e,ap,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=vs(e,ap,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&Bt(e),s&&n&&n.end()}}}function ob(t){let e,r,n,i;return{c(){e=Ir("p"),r=Ci(t[0]),It(e,"class","textcenter font_8 svelte-cdspit")},m(s,o){Yt(s,e,o),Sn(e,r),i=!0},p(s,o){(!i||o&1)&&Xa(r,s[0])},i(s){i||(bs(()=>{i&&(n||(n=vs(e,Do,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=vs(e,Do,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&Bt(e),s&&n&&n.end()}}}function ab(t){let e,r,n,i,s;return{c(){e=Ir("p"),r=Ir("a"),n=Ci(t[1]),It(r,"href",t[1]),It(r,"target","_blank"),It(e,"class","textcenter font_8 svelte-cdspit")},m(o,a){Yt(o,e,a),Sn(e,r),Sn(r,n),s=!0},p(o,a){(!s||a&2)&&Xa(n,o[1]),(!s||a&2)&&It(r,"href",o[1])},i(o){s||(bs(()=>{s&&(i||(i=vs(e,Do,{delay:6e3,duration:2e3},!0)),i.run(1))}),s=!0)},o(o){i||(i=vs(e,Do,{delay:6e3,duration:2e3},!1)),i.run(0),s=!1},d(o){o&&Bt(e),o&&i&&i.end()}}}function cb(t){let e,r,n,i,s,o;return{c(){e=Ir("p"),r=Ci("Visit the complete Visiblr collection: "),n=Ir("a"),i=Ci(t[2]),It(n,"href",t[2]),It(n,"target","_blank"),It(e,"class","textcenter font_8 svelte-cdspit")},m(a,c){Yt(a,e,c),Sn(e,r),Sn(e,n),Sn(n,i),o=!0},p(a,c){(!o||c&4)&&Xa(i,a[2]),(!o||c&4)&&It(n,"href",a[2])},i(a){o||(bs(()=>{o&&(s||(s=vs(e,Do,{delay:8e3,duration:2e3},!0)),s.run(1))}),o=!0)},o(a){s||(s=vs(e,Do,{delay:8e3,duration:2e3},!1)),s.run(0),o=!1},d(a){a&&Bt(e),a&&s&&s.end()}}}function uP(t){let e,r=t[4]?"Disconnect":"Connect Wallet",n,i,s,o,a,c,l,f,d,I,P,L=t[4]?t[6]?"Congratulations! Please don't forget to disconnect your wallet before you leave":t[5]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.",H,q,G,C,V,U,F,j,E,_,O,x,y=t[6]&&sb(t),u=t[6]&&ob(t),p=t[6]&&ab(t),b=t[6]&&cb(t);return{c(){e=Ir("button"),n=Ci(r),i=Ms(),s=Ir("button"),o=Ci("Check If Your Visiblr Portrait is Ready"),c=Ms(),l=Ir("button"),f=Ci("Reveal Your Visiblr Portrait"),I=Ms(),P=Ir("p"),H=Ci(L),q=Ms(),G=Ir("div"),y&&y.c(),C=Ms(),V=Ir("div"),u&&u.c(),U=Ms(),F=Ir("div"),p&&p.c(),j=Ms(),E=Ir("div"),b&&b.c(),It(e,"class","font_8"),It(s,"class","font_8"),s.disabled=a=!t[4],It(l,"class","font_8"),l.disabled=d=!(t[5]&&t[4]),It(G,"class","imagecenter svelte-cdspit"),It(G,"id","imageframe"),It(V,"id","titleframe"),It(F,"id","linkframe"),It(E,"id","collectionframe")},m(g,h){Yt(g,e,h),Sn(e,n),Yt(g,i,h),Yt(g,s,h),Sn(s,o),Yt(g,c,h),Yt(g,l,h),Sn(l,f),Yt(g,I,h),Yt(g,P,h),Sn(P,H),Yt(g,q,h),Yt(g,G,h),y&&y.m(G,null),Yt(g,C,h),Yt(g,V,h),u&&u.m(V,null),Yt(g,U,h),Yt(g,F,h),p&&p.m(F,null),Yt(g,j,h),Yt(g,E,h),b&&b.m(E,null),_=!0,O||(x=[_l(e,"click",function(){cu(t[4]?t[9]:t[8])&&(t[4]?t[9]:t[8]).apply(this,arguments)}),_l(s,"click",t[7]),_l(l,"click",t[10])],O=!0)},p(g,[h]){t=g,(!_||h&16)&&r!==(r=t[4]?"Disconnect":"Connect Wallet")&&Xa(n,r),(!_||h&16&&a!==(a=!t[4]))&&(s.disabled=a),(!_||h&48&&d!==(d=!(t[5]&&t[4])))&&(l.disabled=d),(!_||h&112)&&L!==(L=t[4]?t[6]?"Congratulations! Please don't forget to disconnect your wallet before you leave":t[5]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.")&&Xa(H,L),t[6]?y?(y.p(t,h),h&64&&Fr(y,1)):(y=sb(t),y.c(),Fr(y,1),y.m(G,null)):y&&(Bc(),Wi(y,1,1,()=>{y=null}),kc()),t[6]?u?(u.p(t,h),h&64&&Fr(u,1)):(u=ob(t),u.c(),Fr(u,1),u.m(V,null)):u&&(Bc(),Wi(u,1,1,()=>{u=null}),kc()),t[6]?p?(p.p(t,h),h&64&&Fr(p,1)):(p=ab(t),p.c(),Fr(p,1),p.m(F,null)):p&&(Bc(),Wi(p,1,1,()=>{p=null}),kc()),t[6]?b?(b.p(t,h),h&64&&Fr(b,1)):(b=cb(t),b.c(),Fr(b,1),b.m(E,null)):b&&(Bc(),Wi(b,1,1,()=>{b=null}),kc())},i(g){_||(Fr(y),Fr(u),Fr(p),Fr(b),_=!0)},o(g){Wi(y),Wi(u),Wi(p),Wi(b),_=!1},d(g){g&&Bt(e),g&&Bt(i),g&&Bt(s),g&&Bt(c),g&&Bt(l),g&&Bt(I),g&&Bt(P),g&&Bt(q),g&&Bt(G),y&&y.d(),g&&Bt(C),g&&Bt(V),u&&u.d(),g&&Bt(U),g&&Bt(F),p&&p.d(),g&&Bt(j),g&&Bt(E),b&&b.d(),O=!1,to(x)}}}const ep="KT1MNbfFFqNqDXXdNJ3aUoiiHWazueLArVWB",lP="https://ipfs.io/ipfs/",dP="https://objkt.com/asset/",hP="https://objkt.com/collection/",pP="https://data.objkt.com/v3/graphql",gP="https://mainnet.api.tez.ie";function bP(t){const r=t.token_holder[0].token.display_uri.replace(/^ipfs?\:\/\//i,"");return`${lP}${r}`}function vP(t){const e=t.token_holder[0].token.token_id;return`${dP}${ep}/${e}`}function mP(t){return`${hP}${ep}`}function yP(t){return t.token_holder[0].token.name}async function EP(t){const{errors:e,data:r}=await _P(t,"MyQuery",{});return e?(console.error(e),e):(console.log(r),r)}async function _P(t,e,r){return await(await fetch(pP,{method:"POST",body:JSON.stringify({query:t,variables:r,operationName:e})})).json()}async function wP(t){return await t.getPKH()}function AP(t){return t==null||t.token_holder==null||t.token_holder.length==null||t.errors||t.token_holder.length===0?(console.log("Warning: no token detected"),!1):!0}function xP(t){return t.token_holder.length!=1?(console.log("Warning: multiple tokens detected"),!1):!0}function SP(t,e,r){const n=new iI(gP);let i,s="",o="",a="",c="",l,f=!1,d=!1,I=!1;Jy(async()=>{const C={name:"Your Visiblr Portrait Reveal"};i=new fP(C)});async function P(){const C=await wP(i),V=await L(C,ep,1);r(5,d=AP(V)&&xP(V))}async function L(C,V,U=1){const F=`
      query MyQuery {
        token_holder(
          where: {_and: {holder_address: {_eq: "${C}"}, token: {fa_contract: {_eq: "${V}"}}, quantity: {_eq: "${U}"}}}
        ) {
          quantity
          token {
            fa_contract
            token_id
            thumbnail_uri
            artifact_uri
            display_uri
            name
          }
        }
      }
    `;return l=l=await EP(F),l}async function H(){await i.requestPermissions(),n.setWalletProvider(i),r(4,f=!0)}async function q(){await i.client.clearActiveAccount(),r(4,f=!1)}async function G(){r(0,s=yP(l)),r(1,o=vP(l)),r(2,a=mP());const C=bP(l);fetch(C).then(V=>{if(!V.ok)throw new Error(`HTTP error! Status: ${V.status}`);return V.blob()}).then(V=>{r(3,c=URL.createObjectURL(V))}),r(6,I=!0)}return[s,o,a,c,f,d,I,P,H,q,G]}class RP extends aE{constructor(e){super(),oE(this,e,SP,uP,ky,{})}}new RP({target:document.getElementById("app")});export{_b as a,FE as b,Tp as c,BE as s,Dr as u};
