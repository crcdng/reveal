function Ny(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function hb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function My(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Gi={},au={};au.byteLength=By;au.toByteArray=Dy;au.fromByteArray=Hy;var Zn=[],an=[],Ly=typeof Uint8Array<"u"?Uint8Array:Array,_l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var bo=0,Cy=_l.length;bo<Cy;++bo)Zn[bo]=_l[bo],an[_l.charCodeAt(bo)]=bo;an["-".charCodeAt(0)]=62;an["_".charCodeAt(0)]=63;function pb(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function By(t){var e=pb(t),r=e[0],n=e[1];return(r+n)*3/4-n}function ky(t,e,r){return(e+r)*3/4-r}function Dy(t){var e,r=pb(t),n=r[0],i=r[1],s=new Ly(ky(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=an[t.charCodeAt(c)]<<18|an[t.charCodeAt(c+1)]<<12|an[t.charCodeAt(c+2)]<<6|an[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=an[t.charCodeAt(c)]<<2|an[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=an[t.charCodeAt(c)]<<10|an[t.charCodeAt(c+1)]<<4|an[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Uy(t){return Zn[t>>18&63]+Zn[t>>12&63]+Zn[t>>6&63]+Zn[t&63]}function Ky(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Uy(n));return i.join("")}function Hy(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Ky(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Zn[e>>2]+Zn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Zn[e>>10]+Zn[e>>4&63]+Zn[e<<2&63]+"=")),i.join("")}var Uh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Uh.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,d=r?i-1:0,I=r?-1:1,P=t[e+d];for(d+=I,s=P&(1<<-f)-1,P>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=I,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+d],d+=I,f-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(P?-1:1)*o*Math.pow(2,s-n)};Uh.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,f=(1<<l)-1,d=f>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,L=n?1:-1,H=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=I/c:e+=I*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+P]=a&255,P+=L,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+P]=o&255,P+=L,o/=256,l-=8);t[r+P-L]|=H*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=au,r=Uh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const M=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(M,A),M.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(M){if(M>i)throw new RangeError('The value "'+M+'" is invalid for option "size"');const A=new Uint8Array(M);return Object.setPrototypeOf(A,a.prototype),A}function a(M,A,R){if(typeof M=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(M)}return c(M,A,R)}a.poolSize=8192;function c(M,A,R){if(typeof M=="string")return I(M,A);if(ArrayBuffer.isView(M))return L(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(ge(M,ArrayBuffer)||M&&ge(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(M,SharedArrayBuffer)||M&&ge(M.buffer,SharedArrayBuffer)))return H(M,A,R);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=M.valueOf&&M.valueOf();if(D!=null&&D!==M)return a.from(D,A,R);const $=q(M);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return a.from(M[Symbol.toPrimitive]("string"),A,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}a.from=function(M,A,R){return c(M,A,R)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function f(M,A,R){return l(M),M<=0?o(M):A!==void 0?typeof R=="string"?o(M).fill(A,R):o(M).fill(A):o(M)}a.alloc=function(M,A,R){return f(M,A,R)};function d(M){return l(M),o(M<0?0:G(M)|0)}a.allocUnsafe=function(M){return d(M)},a.allocUnsafeSlow=function(M){return d(M)};function I(M,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const R=V(M,A)|0;let D=o(R);const $=D.write(M,A);return $!==R&&(D=D.slice(0,$)),D}function P(M){const A=M.length<0?0:G(M.length)|0,R=o(A);for(let D=0;D<A;D+=1)R[D]=M[D]&255;return R}function L(M){if(ge(M,Uint8Array)){const A=new Uint8Array(M);return H(A.buffer,A.byteOffset,A.byteLength)}return P(M)}function H(M,A,R){if(A<0||M.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<A+(R||0))throw new RangeError('"length" is outside of buffer bounds');let D;return A===void 0&&R===void 0?D=new Uint8Array(M):R===void 0?D=new Uint8Array(M,A):D=new Uint8Array(M,A,R),Object.setPrototypeOf(D,a.prototype),D}function q(M){if(a.isBuffer(M)){const A=G(M.length)|0,R=o(A);return R.length===0||M.copy(R,0,0,A),R}if(M.length!==void 0)return typeof M.length!="number"||Oe(M.length)?o(0):P(M);if(M.type==="Buffer"&&Array.isArray(M.data))return P(M.data)}function G(M){if(M>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return M|0}function C(M){return+M!=M&&(M=0),a.alloc(+M)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,R){if(ge(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),ge(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(A)||!a.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===R)return 0;let D=A.length,$=R.length;for(let Q=0,te=Math.min(D,$);Q<te;++Q)if(A[Q]!==R[Q]){D=A[Q],$=R[Q];break}return D<$?-1:$<D?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,R){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let D;if(R===void 0)for(R=0,D=0;D<A.length;++D)R+=A[D].length;const $=a.allocUnsafe(R);let Q=0;for(D=0;D<A.length;++D){let te=A[D];if(ge(te,Uint8Array))Q+te.length>$.length?(a.isBuffer(te)||(te=a.from(te)),te.copy($,Q)):Uint8Array.prototype.set.call($,te,Q);else if(a.isBuffer(te))te.copy($,Q);else throw new TypeError('"list" argument must be an Array of Buffers');Q+=te.length}return $};function V(M,A){if(a.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||ge(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const R=M.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&R===0)return 0;let $=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return ye(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return xe(M).length;default:if($)return D?-1:ye(M).length;A=(""+A).toLowerCase(),$=!0}}a.byteLength=V;function U(M,A,R){let D=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,A>>>=0,R<=A))return"";for(M||(M="utf8");;)switch(M){case"hex":return w(this,A,R);case"utf8":case"utf-8":return g(this,A,R);case"ascii":return S(this,A,R);case"latin1":case"binary":return T(this,A,R);case"base64":return p(this,A,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,A,R);default:if(D)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function F(M,A,R){const D=M[A];M[A]=M[R],M[R]=D}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<A;R+=2)F(this,R,R+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<A;R+=4)F(this,R,R+3),F(this,R+1,R+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<A;R+=8)F(this,R,R+7),F(this,R+1,R+6),F(this,R+2,R+5),F(this,R+3,R+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?g(this,0,A):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const R=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(A+=" ... "),"<Buffer "+A+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(A,R,D,$,Q){if(ge(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(R===void 0&&(R=0),D===void 0&&(D=A?A.length:0),$===void 0&&($=0),Q===void 0&&(Q=this.length),R<0||D>A.length||$<0||Q>this.length)throw new RangeError("out of range index");if($>=Q&&R>=D)return 0;if($>=Q)return-1;if(R>=D)return 1;if(R>>>=0,D>>>=0,$>>>=0,Q>>>=0,this===A)return 0;let te=Q-$,le=D-R;const Ae=Math.min(te,le),we=this.slice($,Q),Se=A.slice(R,D);for(let Fe=0;Fe<Ae;++Fe)if(we[Fe]!==Se[Fe]){te=we[Fe],le=Se[Fe];break}return te<le?-1:le<te?1:0};function j(M,A,R,D,$){if(M.length===0)return-1;if(typeof R=="string"?(D=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Oe(R)&&(R=$?0:M.length-1),R<0&&(R=M.length+R),R>=M.length){if($)return-1;R=M.length-1}else if(R<0)if($)R=0;else return-1;if(typeof A=="string"&&(A=a.from(A,D)),a.isBuffer(A))return A.length===0?-1:y(M,A,R,D,$);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(M,A,R):Uint8Array.prototype.lastIndexOf.call(M,A,R):y(M,[A],R,D,$);throw new TypeError("val must be string, number or Buffer")}function y(M,A,R,D,$){let Q=1,te=M.length,le=A.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(M.length<2||A.length<2)return-1;Q=2,te/=2,le/=2,R/=2}function Ae(Se,Fe){return Q===1?Se[Fe]:Se.readUInt16BE(Fe*Q)}let we;if($){let Se=-1;for(we=R;we<te;we++)if(Ae(M,we)===Ae(A,Se===-1?0:we-Se)){if(Se===-1&&(Se=we),we-Se+1===le)return Se*Q}else Se!==-1&&(we-=we-Se),Se=-1}else for(R+le>te&&(R=te-le),we=R;we>=0;we--){let Se=!0;for(let Fe=0;Fe<le;Fe++)if(Ae(M,we+Fe)!==Ae(A,Fe)){Se=!1;break}if(Se)return we}return-1}a.prototype.includes=function(A,R,D){return this.indexOf(A,R,D)!==-1},a.prototype.indexOf=function(A,R,D){return j(this,A,R,D,!0)},a.prototype.lastIndexOf=function(A,R,D){return j(this,A,R,D,!1)};function _(M,A,R,D){R=Number(R)||0;const $=M.length-R;D?(D=Number(D),D>$&&(D=$)):D=$;const Q=A.length;D>Q/2&&(D=Q/2);let te;for(te=0;te<D;++te){const le=parseInt(A.substr(te*2,2),16);if(Oe(le))return te;M[R+te]=le}return te}function O(M,A,R,D){return me(ye(A,M.length-R),M,R,D)}function x(M,A,R,D){return me(ue(A),M,R,D)}function E(M,A,R,D){return me(xe(A),M,R,D)}function u(M,A,R,D){return me(Ee(A,M.length-R),M,R,D)}a.prototype.write=function(A,R,D,$){if(R===void 0)$="utf8",D=this.length,R=0;else if(D===void 0&&typeof R=="string")$=R,D=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(D)?(D=D>>>0,$===void 0&&($="utf8")):($=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Q=this.length-R;if((D===void 0||D>Q)&&(D=Q),A.length>0&&(D<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let te=!1;for(;;)switch($){case"hex":return _(this,A,R,D);case"utf8":case"utf-8":return O(this,A,R,D);case"ascii":case"latin1":case"binary":return x(this,A,R,D);case"base64":return E(this,A,R,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,A,R,D);default:if(te)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function p(M,A,R){return A===0&&R===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(A,R))}function g(M,A,R){R=Math.min(M.length,R);const D=[];let $=A;for(;$<R;){const Q=M[$];let te=null,le=Q>239?4:Q>223?3:Q>191?2:1;if($+le<=R){let Ae,we,Se,Fe;switch(le){case 1:Q<128&&(te=Q);break;case 2:Ae=M[$+1],(Ae&192)===128&&(Fe=(Q&31)<<6|Ae&63,Fe>127&&(te=Fe));break;case 3:Ae=M[$+1],we=M[$+2],(Ae&192)===128&&(we&192)===128&&(Fe=(Q&15)<<12|(Ae&63)<<6|we&63,Fe>2047&&(Fe<55296||Fe>57343)&&(te=Fe));break;case 4:Ae=M[$+1],we=M[$+2],Se=M[$+3],(Ae&192)===128&&(we&192)===128&&(Se&192)===128&&(Fe=(Q&15)<<18|(Ae&63)<<12|(we&63)<<6|Se&63,Fe>65535&&Fe<1114112&&(te=Fe))}}te===null?(te=65533,le=1):te>65535&&(te-=65536,D.push(te>>>10&1023|55296),te=56320|te&1023),D.push(te),$+=le}return h(D)}const b=4096;function h(M){const A=M.length;if(A<=b)return String.fromCharCode.apply(String,M);let R="",D=0;for(;D<A;)R+=String.fromCharCode.apply(String,M.slice(D,D+=b));return R}function S(M,A,R){let D="";R=Math.min(M.length,R);for(let $=A;$<R;++$)D+=String.fromCharCode(M[$]&127);return D}function T(M,A,R){let D="";R=Math.min(M.length,R);for(let $=A;$<R;++$)D+=String.fromCharCode(M[$]);return D}function w(M,A,R){const D=M.length;(!A||A<0)&&(A=0),(!R||R<0||R>D)&&(R=D);let $="";for(let Q=A;Q<R;++Q)$+=ve[M[Q]];return $}function v(M,A,R){const D=M.slice(A,R);let $="";for(let Q=0;Q<D.length-1;Q+=2)$+=String.fromCharCode(D[Q]+D[Q+1]*256);return $}a.prototype.slice=function(A,R){const D=this.length;A=~~A,R=R===void 0?D:~~R,A<0?(A+=D,A<0&&(A=0)):A>D&&(A=D),R<0?(R+=D,R<0&&(R=0)):R>D&&(R=D),R<A&&(R=A);const $=this.subarray(A,R);return Object.setPrototypeOf($,a.prototype),$};function N(M,A,R){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+A>R)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A],Q=1,te=0;for(;++te<R&&(Q*=256);)$+=this[A+te]*Q;return $},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A+--R],Q=1;for(;R>0&&(Q*=256);)$+=this[A+--R]*Q;return $},a.prototype.readUint8=a.prototype.readUInt8=function(A,R){return A=A>>>0,R||N(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,R){return A=A>>>0,R||N(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,R){return A=A>>>0,R||N(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,R){return A=A>>>0,R||N(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Q=this[++A]+this[++A]*2**8+this[++A]*2**16+D*2**24;return BigInt($)+(BigInt(Q)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=R*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Q=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D;return(BigInt($)<<BigInt(32))+BigInt(Q)}),a.prototype.readIntLE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A],Q=1,te=0;for(;++te<R&&(Q*=256);)$+=this[A+te]*Q;return Q*=128,$>=Q&&($-=Math.pow(2,8*R)),$},a.prototype.readIntBE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=R,Q=1,te=this[A+--$];for(;$>0&&(Q*=256);)te+=this[A+--$]*Q;return Q*=128,te>=Q&&(te-=Math.pow(2,8*R)),te},a.prototype.readInt8=function(A,R){return A=A>>>0,R||N(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,R){A=A>>>0,R||N(A,2,this.length);const D=this[A]|this[A+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(A,R){A=A>>>0,R||N(A,2,this.length);const D=this[A+1]|this[A]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(D<<24);return(BigInt($)<<BigInt(32))+BigInt(R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=(R<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt($)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D)}),a.prototype.readFloatLE=function(A,R){return A=A>>>0,R||N(A,4,this.length),r.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,R){return A=A>>>0,R||N(A,4,this.length),r.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,R){return A=A>>>0,R||N(A,8,this.length),r.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,R){return A=A>>>0,R||N(A,8,this.length),r.read(this,A,!1,52,8)};function ee(M,A,R,D,$,Q){if(!a.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>$||A<Q)throw new RangeError('"value" argument is out of bounds');if(R+D>M.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,R,D,$){if(A=+A,R=R>>>0,D=D>>>0,!$){const le=Math.pow(2,8*D)-1;ee(this,A,R,D,le,0)}let Q=1,te=0;for(this[R]=A&255;++te<D&&(Q*=256);)this[R+te]=A/Q&255;return R+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,R,D,$){if(A=+A,R=R>>>0,D=D>>>0,!$){const le=Math.pow(2,8*D)-1;ee(this,A,R,D,le,0)}let Q=D-1,te=1;for(this[R+Q]=A&255;--Q>=0&&(te*=256);)this[R+Q]=A/te&255;return R+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,1,255,0),this[R]=A&255,R+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,65535,0),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,65535,0),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,4294967295,0),this[R+3]=A>>>24,this[R+2]=A>>>16,this[R+1]=A>>>8,this[R]=A&255,R+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,4294967295,0),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4};function Y(M,A,R,D,$){X(A,D,$,M,R,7);let Q=Number(A&BigInt(4294967295));M[R++]=Q,Q=Q>>8,M[R++]=Q,Q=Q>>8,M[R++]=Q,Q=Q>>8,M[R++]=Q;let te=Number(A>>BigInt(32)&BigInt(4294967295));return M[R++]=te,te=te>>8,M[R++]=te,te=te>>8,M[R++]=te,te=te>>8,M[R++]=te,R}function ne(M,A,R,D,$){X(A,D,$,M,R,7);let Q=Number(A&BigInt(4294967295));M[R+7]=Q,Q=Q>>8,M[R+6]=Q,Q=Q>>8,M[R+5]=Q,Q=Q>>8,M[R+4]=Q;let te=Number(A>>BigInt(32)&BigInt(4294967295));return M[R+3]=te,te=te>>8,M[R+2]=te,te=te>>8,M[R+1]=te,te=te>>8,M[R]=te,R+8}a.prototype.writeBigUInt64LE=he(function(A,R=0){return Y(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(A,R=0){return ne(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,R,D,$){if(A=+A,R=R>>>0,!$){const Ae=Math.pow(2,8*D-1);ee(this,A,R,D,Ae-1,-Ae)}let Q=0,te=1,le=0;for(this[R]=A&255;++Q<D&&(te*=256);)A<0&&le===0&&this[R+Q-1]!==0&&(le=1),this[R+Q]=(A/te>>0)-le&255;return R+D},a.prototype.writeIntBE=function(A,R,D,$){if(A=+A,R=R>>>0,!$){const Ae=Math.pow(2,8*D-1);ee(this,A,R,D,Ae-1,-Ae)}let Q=D-1,te=1,le=0;for(this[R+Q]=A&255;--Q>=0&&(te*=256);)A<0&&le===0&&this[R+Q+1]!==0&&(le=1),this[R+Q]=(A/te>>0)-le&255;return R+D},a.prototype.writeInt8=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,1,127,-128),A<0&&(A=255+A+1),this[R]=A&255,R+1},a.prototype.writeInt16LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,32767,-32768),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeInt16BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,32767,-32768),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeInt32LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,2147483647,-2147483648),this[R]=A&255,this[R+1]=A>>>8,this[R+2]=A>>>16,this[R+3]=A>>>24,R+4},a.prototype.writeInt32BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4},a.prototype.writeBigInt64LE=he(function(A,R=0){return Y(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(A,R=0){return ne(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(M,A,R,D,$,Q){if(R+D>M.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ae(M,A,R,D,$){return A=+A,R=R>>>0,$||se(M,A,R,4),r.write(M,A,R,D,23,4),R+4}a.prototype.writeFloatLE=function(A,R,D){return ae(this,A,R,!0,D)},a.prototype.writeFloatBE=function(A,R,D){return ae(this,A,R,!1,D)};function W(M,A,R,D,$){return A=+A,R=R>>>0,$||se(M,A,R,8),r.write(M,A,R,D,52,8),R+8}a.prototype.writeDoubleLE=function(A,R,D){return W(this,A,R,!0,D)},a.prototype.writeDoubleBE=function(A,R,D){return W(this,A,R,!1,D)},a.prototype.copy=function(A,R,D,$){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(D||(D=0),!$&&$!==0&&($=this.length),R>=A.length&&(R=A.length),R||(R=0),$>0&&$<D&&($=D),$===D||A.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),A.length-R<$-D&&($=A.length-R+D);const Q=$-D;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,D,$):Uint8Array.prototype.set.call(A,this.subarray(D,$),R),Q},a.prototype.fill=function(A,R,D,$){if(typeof A=="string"){if(typeof R=="string"?($=R,R=0,D=this.length):typeof D=="string"&&($=D,D=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!a.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(A.length===1){const te=A.charCodeAt(0);($==="utf8"&&te<128||$==="latin1")&&(A=te)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(R<0||this.length<R||this.length<D)throw new RangeError("Out of range index");if(D<=R)return this;R=R>>>0,D=D===void 0?this.length:D>>>0,A||(A=0);let Q;if(typeof A=="number")for(Q=R;Q<D;++Q)this[Q]=A;else{const te=a.isBuffer(A)?A:a.from(A,$),le=te.length;if(le===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Q=0;Q<D-R;++Q)this[Q+R]=te[Q%le]}return this};const K={};function k(M,A,R){K[M]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(M,A){return`The "${M}" argument must be of type number. Received type ${typeof A}`},TypeError),k("ERR_OUT_OF_RANGE",function(M,A,R){let D=`The value of "${M}" is out of range.`,$=R;return Number.isInteger(R)&&Math.abs(R)>2**32?$=m(String(R)):typeof R=="bigint"&&($=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&($=m($)),$+="n"),D+=` It must be ${A}. Received ${$}`,D},RangeError);function m(M){let A="",R=M.length;const D=M[0]==="-"?1:0;for(;R>=D+4;R-=3)A=`_${M.slice(R-3,R)}${A}`;return`${M.slice(0,R)}${A}`}function B(M,A,R){Z(A,"offset"),(M[A]===void 0||M[A+R]===void 0)&&ce(A,M.length-(R+1))}function X(M,A,R,D,$,Q){if(M>R||M<A){const te=typeof A=="bigint"?"n":"";let le;throw Q>3?A===0||A===BigInt(0)?le=`>= 0${te} and < 2${te} ** ${(Q+1)*8}${te}`:le=`>= -(2${te} ** ${(Q+1)*8-1}${te}) and < 2 ** ${(Q+1)*8-1}${te}`:le=`>= ${A}${te} and <= ${R}${te}`,new K.ERR_OUT_OF_RANGE("value",le,M)}B(D,$,Q)}function Z(M,A){if(typeof M!="number")throw new K.ERR_INVALID_ARG_TYPE(A,"number",M)}function ce(M,A,R){throw Math.floor(M)!==M?(Z(M,R),new K.ERR_OUT_OF_RANGE(R||"offset","an integer",M)):A<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE(R||"offset",`>= ${R?1:0} and <= ${A}`,M)}const ie=/[^+/0-9A-Za-z-_]/g;function de(M){if(M=M.split("=")[0],M=M.trim().replace(ie,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function ye(M,A){A=A||1/0;let R;const D=M.length;let $=null;const Q=[];for(let te=0;te<D;++te){if(R=M.charCodeAt(te),R>55295&&R<57344){if(!$){if(R>56319){(A-=3)>-1&&Q.push(239,191,189);continue}else if(te+1===D){(A-=3)>-1&&Q.push(239,191,189);continue}$=R;continue}if(R<56320){(A-=3)>-1&&Q.push(239,191,189),$=R;continue}R=($-55296<<10|R-56320)+65536}else $&&(A-=3)>-1&&Q.push(239,191,189);if($=null,R<128){if((A-=1)<0)break;Q.push(R)}else if(R<2048){if((A-=2)<0)break;Q.push(R>>6|192,R&63|128)}else if(R<65536){if((A-=3)<0)break;Q.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((A-=4)<0)break;Q.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Q}function ue(M){const A=[];for(let R=0;R<M.length;++R)A.push(M.charCodeAt(R)&255);return A}function Ee(M,A){let R,D,$;const Q=[];for(let te=0;te<M.length&&!((A-=2)<0);++te)R=M.charCodeAt(te),D=R>>8,$=R%256,Q.push($),Q.push(D);return Q}function xe(M){return e.toByteArray(de(M))}function me(M,A,R,D){let $;for($=0;$<D&&!($+R>=A.length||$>=M.length);++$)A[$+R]=M[$];return $}function ge(M,A){return M instanceof A||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===A.name}function Oe(M){return M!==M}const ve=function(){const M="0123456789abcdef",A=new Array(256);for(let R=0;R<16;++R){const D=R*16;for(let $=0;$<16;++$)A[D+$]=M[R]+M[$]}return A}();function he(M){return typeof BigInt>"u"?Ne:M}function Ne(){throw new Error("BigInt not supported")}})(Gi);window.Buffer=Gi.Buffer;function ms(){}const gb=t=>t;function bb(t){return t()}function np(){return Object.create(null)}function so(t){t.forEach(bb)}function cu(t){return typeof t=="function"}function fu(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let kc;function ip(t,e){return kc||(kc=document.createElement("a")),kc.href=e,t===kc.href}function Fy(t){return Object.keys(t).length===0}function jy(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const vb=typeof window<"u";let Gy=vb?()=>window.performance.now():()=>Date.now(),Kh=vb?t=>requestAnimationFrame(t):ms;const Mo=new Set;function mb(t){Mo.forEach(e=>{e.c(t)||(Mo.delete(e),e.f())}),Mo.size!==0&&Kh(mb)}function Vy(t){let e;return Mo.size===0&&Kh(mb),{promise:new Promise(r=>{Mo.add(e={c:t,f:r})}),abort(){Mo.delete(e)}}}function Er(t,e){t.appendChild(e)}function yb(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function qy(t){const e=cr("style");return $y(yb(t),e),e.sheet}function $y(t,e){return Er(t.head||t,e),e.sheet}function rr(t,e,r){t.insertBefore(e,r||null)}function Ht(t){t.parentNode&&t.parentNode.removeChild(t)}function cr(t){return document.createElement(t)}function ti(t){return document.createTextNode(t)}function Cs(){return ti(" ")}function Eb(){return ti("")}function wl(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function yt(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function zy(t){return Array.from(t.childNodes)}function gc(t,e){e=""+e,t.data!==e&&(t.data=e)}function Wy(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}const Sf=new Map;let Rf=0;function Xy(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function Jy(t,e){const r={stylesheet:qy(e),rules:{}};return Sf.set(t,r),r}function sp(t,e,r,n,i,s,o,a=0){const c=16.666/n;let l=`{
`;for(let q=0;q<=1;q+=c){const G=e+(r-e)*s(q);l+=q*100+`%{${o(G,1-G)}}
`}const f=l+`100% {${o(r,1-r)}}
}`,d=`__svelte_${Xy(f)}_${a}`,I=yb(t),{stylesheet:P,rules:L}=Sf.get(I)||Jy(I,t);L[d]||(L[d]=!0,P.insertRule(`@keyframes ${d} ${f}`,P.cssRules.length));const H=t.style.animation||"";return t.style.animation=`${H?`${H}, `:""}${d} ${n}ms linear ${i}ms 1 both`,Rf+=1,d}function Yy(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(t.style.animation=n.join(", "),Rf-=i,Rf||Qy())}function Qy(){Kh(()=>{Rf||(Sf.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&Ht(e)}),Sf.clear())})}let Ya;function ja(t){Ya=t}function Zy(){if(!Ya)throw new Error("Function called outside component initialization");return Ya}function eE(t){Zy().$$.on_mount.push(t)}const So=[],op=[];let Lo=[];const ap=[],tE=Promise.resolve();let Xd=!1;function rE(){Xd||(Xd=!0,tE.then(_b))}function Vi(t){Lo.push(t)}const Al=new Set;let vo=0;function _b(){if(vo!==0)return;const t=Ya;do{try{for(;vo<So.length;){const e=So[vo];vo++,ja(e),nE(e.$$)}}catch(e){throw So.length=0,vo=0,e}for(ja(null),So.length=0,vo=0;op.length;)op.pop()();for(let e=0;e<Lo.length;e+=1){const r=Lo[e];Al.has(r)||(Al.add(r),r())}Lo.length=0}while(So.length);for(;ap.length;)ap.pop()();Xd=!1,Al.clear(),ja(t)}function nE(t){if(t.fragment!==null){t.update(),so(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Vi)}}function iE(t){const e=[],r=[];Lo.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),Lo=e}let _a;function sE(){return _a||(_a=Promise.resolve(),_a.then(()=>{_a=null})),_a}function xl(t,e,r){t.dispatchEvent(Wy(`${e?"intro":"outro"}${r}`))}const df=new Set;let Di;function js(){Di={r:0,c:[],p:Di}}function Gs(){Di.r||so(Di.c),Di=Di.p}function Qt(t,e){t&&t.i&&(df.delete(t),t.i(e))}function kr(t,e,r,n){if(t&&t.o){if(df.has(t))return;df.add(t),Di.c.push(()=>{df.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}const oE={duration:0};function ai(t,e,r,n){const i={direction:"both"};let s=e(t,r,i),o=n?0:1,a=null,c=null,l=null;function f(){l&&Yy(t,l)}function d(P,L){const H=P.b-o;return L*=Math.abs(H),{a:o,b:P.b,d:H,duration:L,start:P.start,end:P.start+L,group:P.group}}function I(P){const{delay:L=0,duration:H=300,easing:q=gb,tick:G=ms,css:C}=s||oE,V={start:Gy()+L,b:P};P||(V.group=Di,Di.r+=1),a||c?c=V:(C&&(f(),l=sp(t,o,P,H,L,q,C)),P&&G(0,1),a=d(V,H),Vi(()=>xl(t,P,"start")),Vy(U=>{if(c&&U>c.start&&(a=d(c,H),c=null,xl(t,a.b,"start"),C&&(f(),l=sp(t,o,a.b,a.duration,0,q,s.css))),a){if(U>=a.end)G(o=a.b,1-o),xl(t,a.b,"end"),c||(a.b?f():--a.group.r||so(a.group.c)),a=null;else if(U>=a.start){const F=U-a.start;o=a.a+a.d*q(F/a.duration),G(o,1-o)}}return!!(a||c)}))}return{run(P){cu(s)?sE().then(()=>{s=s(i),I(P)}):I(P)},end(){f(),a=c=null}}}function aE(t,e,r,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,r),n||Vi(()=>{const o=t.$$.on_mount.map(bb).filter(cu);t.$$.on_destroy?t.$$.on_destroy.push(...o):so(o),t.$$.on_mount=[]}),s.forEach(Vi)}function cE(t,e){const r=t.$$;r.fragment!==null&&(iE(r.after_update),so(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function fE(t,e){t.$$.dirty[0]===-1&&(So.push(t),rE(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function uE(t,e,r,n,i,s,o,a=[-1]){const c=Ya;ja(t);const l=t.$$={fragment:null,ctx:[],props:s,update:ms,not_equal:i,bound:np(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:np(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let f=!1;if(l.ctx=r?r(t,e.props||{},(d,I,...P)=>{const L=P.length?P[0]:I;return l.ctx&&i(l.ctx[d],l.ctx[d]=L)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](L),f&&fE(t,d)),I}):[],l.update(),f=!0,so(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=zy(e.target);l.fragment&&l.fragment.l(d),d.forEach(Ht)}else l.fragment&&l.fragment.c();e.intro&&Qt(t.$$.fragment),aE(t,e.target,e.anchor,e.customElement),_b()}ja(c)}class lE{$destroy(){cE(this,1),this.$destroy=ms}$on(e,r){if(!cu(r))return ms;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Fy(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function dE(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function cp(t,{delay:e=0,duration:r=400,easing:n=dE,amount:i=5,opacity:s=0}={}){const o=getComputedStyle(t),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-s),[f,d]=jy(i);return{delay:e,duration:r,easing:n,css:(I,P)=>`opacity: ${a-l*P}; filter: ${c} blur(${P*f}${d});`}}function ys(t,{delay:e=0,duration:r=400,easing:n=gb}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}const hE="modulepreload",pE=function(t){return"/reveal/"+t},fp={},gE=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=pE(s),s in fp)return;fp[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":hE,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,d)=>{l.addEventListener("load",f),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var Jd={},bE={get exports(){return Jd},set exports(t){Jd=t}},If={},vE={get exports(){return If},set exports(t){If=t}},wb=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},mE=wb,Ts=Object.prototype.toString;function Hh(t){return Array.isArray(t)}function Yd(t){return typeof t>"u"}function yE(t){return t!==null&&!Yd(t)&&t.constructor!==null&&!Yd(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ab(t){return Ts.call(t)==="[object ArrayBuffer]"}function EE(t){return Ts.call(t)==="[object FormData]"}function _E(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ab(t.buffer),e}function wE(t){return typeof t=="string"}function AE(t){return typeof t=="number"}function xb(t){return t!==null&&typeof t=="object"}function hf(t){if(Ts.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function xE(t){return Ts.call(t)==="[object Date]"}function SE(t){return Ts.call(t)==="[object File]"}function RE(t){return Ts.call(t)==="[object Blob]"}function Sb(t){return Ts.call(t)==="[object Function]"}function IE(t){return xb(t)&&Sb(t.pipe)}function TE(t){return Ts.call(t)==="[object URLSearchParams]"}function OE(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function PE(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Fh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Hh(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Qd(){var t={};function e(i,s){hf(t[s])&&hf(i)?t[s]=Qd(t[s],i):hf(i)?t[s]=Qd({},i):Hh(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Fh(arguments[r],e);return t}function NE(t,e,r){return Fh(e,function(i,s){r&&typeof i=="function"?t[s]=mE(i,r):t[s]=i}),t}function ME(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Hr={isArray:Hh,isArrayBuffer:Ab,isBuffer:yE,isFormData:EE,isArrayBufferView:_E,isString:wE,isNumber:AE,isObject:xb,isPlainObject:hf,isUndefined:Yd,isDate:xE,isFile:SE,isBlob:RE,isFunction:Sb,isStream:IE,isURLSearchParams:TE,isStandardBrowserEnv:PE,forEach:Fh,merge:Qd,extend:NE,trim:OE,stripBOM:ME},mo=Hr;function up(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Rb=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(mo.isURLSearchParams(r))i=r.toString();else{var s=[];mo.forEach(r,function(c,l){c===null||typeof c>"u"||(mo.isArray(c)?l=l+"[]":c=[c],mo.forEach(c,function(d){mo.isDate(d)?d=d.toISOString():mo.isObject(d)&&(d=JSON.stringify(d)),s.push(up(l)+"="+up(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},LE=Hr;function uu(){this.handlers=[]}uu.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};uu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};uu.prototype.forEach=function(e){LE.forEach(this.handlers,function(n){n!==null&&e(n)})};var CE=uu,BE=Hr,kE=function(e,r){BE.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Ib=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Tb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},DE=Ib,Ob=function(e,r,n,i,s){var o=new Error(e);return DE(o,r,n,i,s)},UE=Ob,KE=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(UE("Request failed with status code "+n.status,n.config,null,n.request,n))},Sl,lp;function HE(){if(lp)return Sl;lp=1;var t=Hr;return Sl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Sl}var FE=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},jE=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},GE=FE,VE=jE,qE=function(e,r){return e&&!GE(r)?VE(e,r):r},Rl,dp;function $E(){if(dp)return Rl;dp=1;var t=Hr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Rl=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Rl}var Il,hp;function zE(){if(hp)return Il;hp=1;var t=Hr;return Il=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Il}var Tl,pp;function lu(){if(pp)return Tl;pp=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Tl=t,Tl}var Ol,gp;function bp(){if(gp)return Ol;gp=1;var t=Hr,e=KE,r=HE(),n=Rb,i=qE,s=$E(),o=zE(),a=Ob,c=Tb,l=lu();return Ol=function(d){return new Promise(function(P,L){var H=d.data,q=d.headers,G=d.responseType,C;function V(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete q["Content-Type"];var U=new XMLHttpRequest;if(d.auth){var F=d.auth.username||"",j=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";q.Authorization="Basic "+btoa(F+":"+j)}var y=i(d.baseURL,d.url);U.open(d.method.toUpperCase(),n(y,d.params,d.paramsSerializer),!0),U.timeout=d.timeout;function _(){if(U){var x="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,E=!G||G==="text"||G==="json"?U.responseText:U.response,u={data:E,status:U.status,statusText:U.statusText,headers:x,config:d,request:U};e(function(g){P(g),V()},function(g){L(g),V()},u),U=null}}if("onloadend"in U?U.onloadend=_:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(_)},U.onabort=function(){U&&(L(a("Request aborted",d,"ECONNABORTED",U)),U=null)},U.onerror=function(){L(a("Network Error",d,null,U)),U=null},U.ontimeout=function(){var E=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c;d.timeoutErrorMessage&&(E=d.timeoutErrorMessage),L(a(E,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},t.isStandardBrowserEnv()){var O=(d.withCredentials||o(y))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;O&&(q[d.xsrfHeaderName]=O)}"setRequestHeader"in U&&t.forEach(q,function(E,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete q[u]:U.setRequestHeader(u,E)}),t.isUndefined(d.withCredentials)||(U.withCredentials=!!d.withCredentials),G&&G!=="json"&&(U.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&U.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(x){U&&(L(!x||x&&x.type?new l("canceled"):x),U.abort(),U=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),H||(H=null),U.send(H)})},Ol}var ar=Hr,vp=kE,WE=Ib,XE=Tb,JE={"Content-Type":"application/x-www-form-urlencoded"};function mp(t,e){!ar.isUndefined(t)&&ar.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function YE(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=bp()),t}function QE(t,e,r){if(ar.isString(t))try{return(e||JSON.parse)(t),ar.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var du={transitional:XE,adapter:YE(),transformRequest:[function(e,r){return vp(r,"Accept"),vp(r,"Content-Type"),ar.isFormData(e)||ar.isArrayBuffer(e)||ar.isBuffer(e)||ar.isStream(e)||ar.isFile(e)||ar.isBlob(e)?e:ar.isArrayBufferView(e)?e.buffer:ar.isURLSearchParams(e)?(mp(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ar.isObject(e)||r&&r["Content-Type"]==="application/json"?(mp(r,"application/json"),QE(e)):e}],transformResponse:[function(e){var r=this.transitional||du.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&ar.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?WE(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ar.forEach(["delete","get","head"],function(e){du.headers[e]={}});ar.forEach(["post","put","patch"],function(e){du.headers[e]=ar.merge(JE)});var jh=du,ZE=Hr,e_=jh,t_=function(e,r,n){var i=this||e_;return ZE.forEach(n,function(o){e=o.call(i,e,r)}),e},Pl,yp;function Pb(){return yp||(yp=1,Pl=function(e){return!!(e&&e.__CANCEL__)}),Pl}var Ep=Hr,Nl=t_,r_=Pb(),n_=jh,i_=lu();function Ml(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new i_("canceled")}var s_=function(e){Ml(e),e.headers=e.headers||{},e.data=Nl.call(e,e.data,e.headers,e.transformRequest),e.headers=Ep.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ep.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||n_.adapter;return r(e).then(function(i){return Ml(e),i.data=Nl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return r_(i)||(Ml(e),i&&i.response&&(i.response.data=Nl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},jr=Hr,Nb=function(e,r){r=r||{};var n={};function i(f,d){return jr.isPlainObject(f)&&jr.isPlainObject(d)?jr.merge(f,d):jr.isPlainObject(d)?jr.merge({},d):jr.isArray(d)?d.slice():d}function s(f){if(jr.isUndefined(r[f])){if(!jr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!jr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(jr.isUndefined(r[f])){if(!jr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return jr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var I=l[d]||s,P=I(d);jr.isUndefined(P)&&I!==c||(n[d]=P)}),n},Ll,_p;function Mb(){return _p||(_p=1,Ll={version:"0.26.1"}),Ll}var o_=Mb().version,Gh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Gh[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var wp={};Gh.transitional=function(e,r,n){function i(s,o){return"[Axios v"+o_+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!wp[o]&&(wp[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function a_(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var c_={assertOptions:a_,validators:Gh},Lb=Hr,f_=Rb,Ap=CE,xp=s_,hu=Nb,Cb=c_,yo=Cb.validators;function bc(t){this.defaults=t,this.interceptors={request:new Ap,response:new Ap}}bc.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=hu(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Cb.assertOptions(n,{silentJSONParsing:yo.transitional(yo.boolean),forcedJSONParsing:yo.transitional(yo.boolean),clarifyTimeoutError:yo.transitional(yo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(s=s&&P.synchronous,i.unshift(P.fulfilled,P.rejected))});var o=[];this.interceptors.response.forEach(function(P){o.push(P.fulfilled,P.rejected)});var a;if(!s){var c=[xp,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var f=i.shift(),d=i.shift();try{l=f(l)}catch(I){d(I);break}}try{a=xp(l)}catch(I){return Promise.reject(I)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};bc.prototype.getUri=function(e){return e=hu(this.defaults,e),f_(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Lb.forEach(["delete","get","head","options"],function(e){bc.prototype[e]=function(r,n){return this.request(hu(n||{},{method:e,url:r,data:(n||{}).data}))}});Lb.forEach(["post","put","patch"],function(e){bc.prototype[e]=function(r,n,i){return this.request(hu(i||{},{method:e,url:r,data:n}))}});var u_=bc,Cl,Sp;function l_(){if(Sp)return Cl;Sp=1;var t=lu();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Cl=e,Cl}var Bl,Rp;function d_(){return Rp||(Rp=1,Bl=function(e){return function(n){return e.apply(null,n)}}),Bl}var kl,Ip;function h_(){if(Ip)return kl;Ip=1;var t=Hr;return kl=function(r){return t.isObject(r)&&r.isAxiosError===!0},kl}var Tp=Hr,p_=wb,pf=u_,g_=Nb,b_=jh;function Bb(t){var e=new pf(t),r=p_(pf.prototype.request,e);return Tp.extend(r,pf.prototype,e),Tp.extend(r,e),r.create=function(i){return Bb(g_(t,i))},r}var hi=Bb(b_);hi.Axios=pf;hi.Cancel=lu();hi.CancelToken=l_();hi.isCancel=Pb();hi.VERSION=Mb().version;hi.all=function(e){return Promise.all(e)};hi.spread=d_();hi.isAxiosError=h_();vE.exports=hi;If.default=hi;(function(t){t.exports=If})(bE);const Op=hb(Jd);function v_(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}var Qa;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(Qa||(Qa={}));const kb=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,Pp=kb?void 0:gE(()=>import("./index-52540f3c.js"),[]).then(t=>t.default).catch(()=>{});var Tf;(function(t){t.TEXT="text",t.JSON="json"})(Tf||(Tf={}));class sa extends Error{constructor(e,r,n,i,s){super(e),this.message=e,this.status=r,this.statusText=n,this.body=i,this.url=s,this.name="HttpResponse"}}class m_ extends Error{constructor(e){super(e),this.message=e,this.name="HttpRequestFailed"}}class y_{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const r=[];for(const i in e)if(e.hasOwnProperty(i)&&typeof e[i]<"u"){const s=typeof e[i].toJSON=="function"?e[i].toJSON():e[i];if(s===null){r.push(encodeURIComponent(i));continue}if(Array.isArray(s)){s.forEach(o=>{r.push(encodeURIComponent(i)+"="+encodeURIComponent(o))});continue}r.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}const n=r.join("&");return n?`?${n}`:""}createRequest({url:e,method:r,timeout:n=this.timeout,query:i,headers:s={},json:o=!0},a){return v_(this,void 0,void 0,function*(){let c,l;s["Content-Type"]||(s["Content-Type"]="application/json"),o?c=Tf.JSON:(c=Tf.TEXT,l=[f=>f]);try{const f=Pp&&(yield Pp);return(yield Op.request({url:e+this.serialize(i),method:r??"GET",headers:s,responseType:c,transformResponse:l,timeout:n,data:a,adapter:f})).data}catch(f){if(Op.isAxiosError(f)&&f.response||!kb&&f.response){let d;throw typeof f.response.data=="object"?d=JSON.stringify(f.response.data):d=f.response.data,new sa(`Http error response: (${f.response.status}) ${d}`,f.response.status,f.response.statusText,d,e+this.serialize(i))}else throw new m_(`${r} ${e+this.serialize(i)} ${String(f)}`)}})}}var E_=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Dl=Math.ceil,Mn=Math.floor,Br="[BigNumber Error] ",Np=Br+"Number primitive has more than 15 significant digits: ",gn=1e14,Me=14,Ul=9007199254740991,Kl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Yi=1e7,er=1e9;function Db(t){var e,r,n,i=C.prototype={constructor:C,toString:null,valueOf:null},s=new C(1),o=20,a=4,c=-7,l=21,f=-1e7,d=1e7,I=!1,P=1,L=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function C(_,O){var x,E,u,p,g,b,h,S,T=this;if(!(T instanceof C))return new C(_,O);if(O==null){if(_&&_._isBigNumber===!0){T.s=_.s,!_.c||_.e>d?T.c=T.e=null:_.e<f?T.c=[T.e=0]:(T.e=_.e,T.c=_.c.slice());return}if((b=typeof _=="number")&&_*0==0){if(T.s=1/_<0?(_=-_,-1):1,_===~~_){for(p=0,g=_;g>=10;g/=10,p++);p>d?T.c=T.e=null:(T.e=p,T.c=[_]);return}S=String(_)}else{if(!E_.test(S=String(_)))return n(T,S,b);T.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(p=S.indexOf("."))>-1&&(S=S.replace(".","")),(g=S.search(/e/i))>0?(p<0&&(p=g),p+=+S.slice(g+1),S=S.substring(0,g)):p<0&&(p=S.length)}else{if(xt(O,2,q.length,"Base"),O==10&&G)return T=new C(_),j(T,o+T.e+1,a);if(S=String(_),b=typeof _=="number"){if(_*0!=0)return n(T,S,b,O);if(T.s=1/_<0?(S=S.slice(1),-1):1,C.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(Np+_)}else T.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(x=q.slice(0,O),p=g=0,h=S.length;g<h;g++)if(x.indexOf(E=S.charAt(g))<0){if(E=="."){if(g>p){p=h;continue}}else if(!u&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){u=!0,g=-1,p=0;continue}return n(T,String(_),b,O)}b=!1,S=r(S,O,10,T.s),(p=S.indexOf("."))>-1?S=S.replace(".",""):p=S.length}for(g=0;S.charCodeAt(g)===48;g++);for(h=S.length;S.charCodeAt(--h)===48;);if(S=S.slice(g,++h)){if(h-=g,b&&C.DEBUG&&h>15&&(_>Ul||_!==Mn(_)))throw Error(Np+T.s*_);if((p=p-g-1)>d)T.c=T.e=null;else if(p<f)T.c=[T.e=0];else{if(T.e=p,T.c=[],g=(p+1)%Me,p<0&&(g+=Me),g<h){for(g&&T.c.push(+S.slice(0,g)),h-=Me;g<h;)T.c.push(+S.slice(g,g+=Me));g=Me-(S=S.slice(g)).length}else g-=h;for(;g--;S+="0");T.c.push(+S)}}else T.c=[T.e=0]}C.clone=Db,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(_){var O,x;if(_!=null)if(typeof _=="object"){if(_.hasOwnProperty(O="DECIMAL_PLACES")&&(x=_[O],xt(x,0,er,O),o=x),_.hasOwnProperty(O="ROUNDING_MODE")&&(x=_[O],xt(x,0,8,O),a=x),_.hasOwnProperty(O="EXPONENTIAL_AT")&&(x=_[O],x&&x.pop?(xt(x[0],-er,0,O),xt(x[1],0,er,O),c=x[0],l=x[1]):(xt(x,-er,er,O),c=-(l=x<0?-x:x))),_.hasOwnProperty(O="RANGE"))if(x=_[O],x&&x.pop)xt(x[0],-er,-1,O),xt(x[1],1,er,O),f=x[0],d=x[1];else if(xt(x,-er,er,O),x)f=-(d=x<0?-x:x);else throw Error(Br+O+" cannot be zero: "+x);if(_.hasOwnProperty(O="CRYPTO"))if(x=_[O],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=x;else throw I=!x,Error(Br+"crypto unavailable");else I=x;else throw Error(Br+O+" not true or false: "+x);if(_.hasOwnProperty(O="MODULO_MODE")&&(x=_[O],xt(x,0,9,O),P=x),_.hasOwnProperty(O="POW_PRECISION")&&(x=_[O],xt(x,0,er,O),L=x),_.hasOwnProperty(O="FORMAT"))if(x=_[O],typeof x=="object")H=x;else throw Error(Br+O+" not an object: "+x);if(_.hasOwnProperty(O="ALPHABET"))if(x=_[O],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))G=x.slice(0,10)=="0123456789",q=x;else throw Error(Br+O+" invalid: "+x)}else throw Error(Br+"Object expected: "+_);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[f,d],CRYPTO:I,MODULO_MODE:P,POW_PRECISION:L,FORMAT:H,ALPHABET:q}},C.isBigNumber=function(_){if(!_||_._isBigNumber!==!0)return!1;if(!C.DEBUG)return!0;var O,x,E=_.c,u=_.e,p=_.s;e:if({}.toString.call(E)=="[object Array]"){if((p===1||p===-1)&&u>=-er&&u<=er&&u===Mn(u)){if(E[0]===0){if(u===0&&E.length===1)return!0;break e}if(O=(u+1)%Me,O<1&&(O+=Me),String(E[0]).length==O){for(O=0;O<E.length;O++)if(x=E[O],x<0||x>=gn||x!==Mn(x))break e;if(x!==0)return!0}}}else if(E===null&&u===null&&(p===null||p===1||p===-1))return!0;throw Error(Br+"Invalid BigNumber: "+_)},C.maximum=C.max=function(){return U(arguments,i.lt)},C.minimum=C.min=function(){return U(arguments,i.gt)},C.random=function(){var _=9007199254740992,O=Math.random()*_&2097151?function(){return Mn(Math.random()*_)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var E,u,p,g,b,h=0,S=[],T=new C(s);if(x==null?x=o:xt(x,0,er),g=Dl(x/Me),I)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(g*=2));h<g;)b=E[h]*131072+(E[h+1]>>>11),b>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),E[h]=u[0],E[h+1]=u[1]):(S.push(b%1e14),h+=2);h=g/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(g*=7);h<g;)b=(E[h]&31)*281474976710656+E[h+1]*1099511627776+E[h+2]*4294967296+E[h+3]*16777216+(E[h+4]<<16)+(E[h+5]<<8)+E[h+6],b>=9e15?crypto.randomBytes(7).copy(E,h):(S.push(b%1e14),h+=7);h=g/7}else throw I=!1,Error(Br+"crypto unavailable");if(!I)for(;h<g;)b=O(),b<9e15&&(S[h++]=b%1e14);for(g=S[--h],x%=Me,g&&x&&(b=Kl[Me-x],S[h]=Mn(g/b)*b);S[h]===0;S.pop(),h--);if(h<0)S=[p=0];else{for(p=-1;S[0]===0;S.splice(0,1),p-=Me);for(h=1,b=S[0];b>=10;b/=10,h++);h<Me&&(p-=Me-h)}return T.e=p,T.c=S,T}}(),C.sum=function(){for(var _=1,O=arguments,x=new C(O[0]);_<O.length;)x=x.plus(O[_++]);return x},r=function(){var _="0123456789";function O(x,E,u,p){for(var g,b=[0],h,S=0,T=x.length;S<T;){for(h=b.length;h--;b[h]*=E);for(b[0]+=p.indexOf(x.charAt(S++)),g=0;g<b.length;g++)b[g]>u-1&&(b[g+1]==null&&(b[g+1]=0),b[g+1]+=b[g]/u|0,b[g]%=u)}return b.reverse()}return function(x,E,u,p,g){var b,h,S,T,w,v,N,ee,Y=x.indexOf("."),ne=o,se=a;for(Y>=0&&(T=L,L=0,x=x.replace(".",""),ee=new C(E),v=ee.pow(x.length-Y),L=T,ee.c=O(mi(sn(v.c),v.e,"0"),10,u,_),ee.e=ee.c.length),N=O(x,E,u,g?(b=q,_):(b=_,q)),S=T=N.length;N[--T]==0;N.pop());if(!N[0])return b.charAt(0);if(Y<0?--S:(v.c=N,v.e=S,v.s=p,v=e(v,ee,ne,se,u),N=v.c,w=v.r,S=v.e),h=S+ne+1,Y=N[h],T=u/2,w=w||h<0||N[h+1]!=null,w=se<4?(Y!=null||w)&&(se==0||se==(v.s<0?3:2)):Y>T||Y==T&&(se==4||w||se==6&&N[h-1]&1||se==(v.s<0?8:7)),h<1||!N[0])x=w?mi(b.charAt(1),-ne,b.charAt(0)):b.charAt(0);else{if(N.length=h,w)for(--u;++N[--h]>u;)N[h]=0,h||(++S,N=[1].concat(N));for(T=N.length;!N[--T];);for(Y=0,x="";Y<=T;x+=b.charAt(N[Y++]));x=mi(x,S,b.charAt(0))}return x}}(),e=function(){function _(E,u,p){var g,b,h,S,T=0,w=E.length,v=u%Yi,N=u/Yi|0;for(E=E.slice();w--;)h=E[w]%Yi,S=E[w]/Yi|0,g=N*h+S*v,b=v*h+g%Yi*Yi+T,T=(b/p|0)+(g/Yi|0)+N*S,E[w]=b%p;return T&&(E=[T].concat(E)),E}function O(E,u,p,g){var b,h;if(p!=g)h=p>g?1:-1;else for(b=h=0;b<p;b++)if(E[b]!=u[b]){h=E[b]>u[b]?1:-1;break}return h}function x(E,u,p,g){for(var b=0;p--;)E[p]-=b,b=E[p]<u[p]?1:0,E[p]=b*g+E[p]-u[p];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,u,p,g,b){var h,S,T,w,v,N,ee,Y,ne,se,ae,W,K,k,m,B,X,Z=E.s==u.s?1:-1,ce=E.c,ie=u.c;if(!ce||!ce[0]||!ie||!ie[0])return new C(!E.s||!u.s||(ce?ie&&ce[0]==ie[0]:!ie)?NaN:ce&&ce[0]==0||!ie?Z*0:Z/0);for(Y=new C(Z),ne=Y.c=[],S=E.e-u.e,Z=p+S+1,b||(b=gn,S=on(E.e/Me)-on(u.e/Me),Z=Z/Me|0),T=0;ie[T]==(ce[T]||0);T++);if(ie[T]>(ce[T]||0)&&S--,Z<0)ne.push(1),w=!0;else{for(k=ce.length,B=ie.length,T=0,Z+=2,v=Mn(b/(ie[0]+1)),v>1&&(ie=_(ie,v,b),ce=_(ce,v,b),B=ie.length,k=ce.length),K=B,se=ce.slice(0,B),ae=se.length;ae<B;se[ae++]=0);X=ie.slice(),X=[0].concat(X),m=ie[0],ie[1]>=b/2&&m++;do{if(v=0,h=O(ie,se,B,ae),h<0){if(W=se[0],B!=ae&&(W=W*b+(se[1]||0)),v=Mn(W/m),v>1)for(v>=b&&(v=b-1),N=_(ie,v,b),ee=N.length,ae=se.length;O(N,se,ee,ae)==1;)v--,x(N,B<ee?X:ie,ee,b),ee=N.length,h=1;else v==0&&(h=v=1),N=ie.slice(),ee=N.length;if(ee<ae&&(N=[0].concat(N)),x(se,N,ae,b),ae=se.length,h==-1)for(;O(ie,se,B,ae)<1;)v++,x(se,B<ae?X:ie,ae,b),ae=se.length}else h===0&&(v++,se=[0]);ne[T++]=v,se[0]?se[ae++]=ce[K]||0:(se=[ce[K]],ae=1)}while((K++<k||se[0]!=null)&&Z--);w=se[0]!=null,ne[0]||ne.splice(0,1)}if(b==gn){for(T=1,Z=ne[0];Z>=10;Z/=10,T++);j(Y,p+(Y.e=T+S*Me-1)+1,g,w)}else Y.e=S,Y.r=+w;return Y}}();function V(_,O,x,E){var u,p,g,b,h;if(x==null?x=a:xt(x,0,8),!_.c)return _.toString();if(u=_.c[0],g=_.e,O==null)h=sn(_.c),h=E==1||E==2&&(g<=c||g>=l)?Uc(h,g):mi(h,g,"0");else if(_=j(new C(_),O,x),p=_.e,h=sn(_.c),b=h.length,E==1||E==2&&(O<=p||p<=c)){for(;b<O;h+="0",b++);h=Uc(h,p)}else if(O-=g,h=mi(h,p,"0"),p+1>b){if(--O>0)for(h+=".";O--;h+="0");}else if(O+=p-b,O>0)for(p+1==b&&(h+=".");O--;h+="0");return _.s<0&&u?"-"+h:h}function U(_,O){for(var x,E=1,u=new C(_[0]);E<_.length;E++)if(x=new C(_[E]),x.s)O.call(u,x)&&(u=x);else{u=x;break}return u}function F(_,O,x){for(var E=1,u=O.length;!O[--u];O.pop());for(u=O[0];u>=10;u/=10,E++);return(x=E+x*Me-1)>d?_.c=_.e=null:x<f?_.c=[_.e=0]:(_.e=x,_.c=O),_}n=function(){var _=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,x=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,g,b,h){var S,T=b?g:g.replace(u,"");if(E.test(T))p.s=isNaN(T)?null:T<0?-1:1;else{if(!b&&(T=T.replace(_,function(w,v,N){return S=(N=N.toLowerCase())=="x"?16:N=="b"?2:8,!h||h==S?v:w}),h&&(S=h,T=T.replace(O,"$1").replace(x,"0.$1")),g!=T))return new C(T,S);if(C.DEBUG)throw Error(Br+"Not a"+(h?" base "+h:"")+" number: "+g);p.s=null}p.c=p.e=null}}();function j(_,O,x,E){var u,p,g,b,h,S,T,w=_.c,v=Kl;if(w){e:{for(u=1,b=w[0];b>=10;b/=10,u++);if(p=O-u,p<0)p+=Me,g=O,h=w[S=0],T=h/v[u-g-1]%10|0;else if(S=Dl((p+1)/Me),S>=w.length)if(E){for(;w.length<=S;w.push(0));h=T=0,u=1,p%=Me,g=p-Me+1}else break e;else{for(h=b=w[S],u=1;b>=10;b/=10,u++);p%=Me,g=p-Me+u,T=g<0?0:h/v[u-g-1]%10|0}if(E=E||O<0||w[S+1]!=null||(g<0?h:h%v[u-g-1]),E=x<4?(T||E)&&(x==0||x==(_.s<0?3:2)):T>5||T==5&&(x==4||E||x==6&&(p>0?g>0?h/v[u-g]:0:w[S-1])%10&1||x==(_.s<0?8:7)),O<1||!w[0])return w.length=0,E?(O-=_.e+1,w[0]=v[(Me-O%Me)%Me],_.e=-O||0):w[0]=_.e=0,_;if(p==0?(w.length=S,b=1,S--):(w.length=S+1,b=v[Me-p],w[S]=g>0?Mn(h/v[u-g]%v[g])*b:0),E)for(;;)if(S==0){for(p=1,g=w[0];g>=10;g/=10,p++);for(g=w[0]+=b,b=1;g>=10;g/=10,b++);p!=b&&(_.e++,w[0]==gn&&(w[0]=1));break}else{if(w[S]+=b,w[S]!=gn)break;w[S--]=0,b=1}for(p=w.length;w[--p]===0;w.pop());}_.e>d?_.c=_.e=null:_.e<f&&(_.c=[_.e=0])}return _}function y(_){var O,x=_.e;return x===null?_.toString():(O=sn(_.c),O=x<=c||x>=l?Uc(O,x):mi(O,x,"0"),_.s<0?"-"+O:O)}return i.absoluteValue=i.abs=function(){var _=new C(this);return _.s<0&&(_.s=1),_},i.comparedTo=function(_,O){return Eo(this,new C(_,O))},i.decimalPlaces=i.dp=function(_,O){var x,E,u,p=this;if(_!=null)return xt(_,0,er),O==null?O=a:xt(O,0,8),j(new C(p),_+p.e+1,O);if(!(x=p.c))return null;if(E=((u=x.length-1)-on(this.e/Me))*Me,u=x[u])for(;u%10==0;u/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(_,O){return e(this,new C(_,O),o,a)},i.dividedToIntegerBy=i.idiv=function(_,O){return e(this,new C(_,O),0,1)},i.exponentiatedBy=i.pow=function(_,O){var x,E,u,p,g,b,h,S,T,w=this;if(_=new C(_),_.c&&!_.isInteger())throw Error(Br+"Exponent not an integer: "+y(_));if(O!=null&&(O=new C(O)),b=_.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!_.c||!_.c[0])return T=new C(Math.pow(+y(w),b?_.s*(2-Dc(_)):+y(_))),O?T.mod(O):T;if(h=_.s<0,O){if(O.c?!O.c[0]:!O.s)return new C(NaN);E=!h&&w.isInteger()&&O.isInteger(),E&&(w=w.mod(O))}else{if(_.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||b&&w.c[1]>=24e7:w.c[0]<8e13||b&&w.c[0]<=9999975e7)))return p=w.s<0&&Dc(_)?-0:0,w.e>-1&&(p=1/p),new C(h?1/p:p);L&&(p=Dl(L/Me+2))}for(b?(x=new C(.5),h&&(_.s=1),S=Dc(_)):(u=Math.abs(+y(_)),S=u%2),T=new C(s);;){if(S){if(T=T.times(w),!T.c)break;p?T.c.length>p&&(T.c.length=p):E&&(T=T.mod(O))}if(u){if(u=Mn(u/2),u===0)break;S=u%2}else if(_=_.times(x),j(_,_.e+1,1),_.e>14)S=Dc(_);else{if(u=+y(_),u===0)break;S=u%2}w=w.times(w),p?w.c&&w.c.length>p&&(w.c.length=p):E&&(w=w.mod(O))}return E?T:(h&&(T=s.div(T)),O?T.mod(O):p?j(T,L,a,g):T)},i.integerValue=function(_){var O=new C(this);return _==null?_=a:xt(_,0,8),j(O,O.e+1,_)},i.isEqualTo=i.eq=function(_,O){return Eo(this,new C(_,O))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(_,O){return Eo(this,new C(_,O))>0},i.isGreaterThanOrEqualTo=i.gte=function(_,O){return(O=Eo(this,new C(_,O)))===1||O===0},i.isInteger=function(){return!!this.c&&on(this.e/Me)>this.c.length-2},i.isLessThan=i.lt=function(_,O){return Eo(this,new C(_,O))<0},i.isLessThanOrEqualTo=i.lte=function(_,O){return(O=Eo(this,new C(_,O)))===-1||O===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(_,O){var x,E,u,p,g=this,b=g.s;if(_=new C(_,O),O=_.s,!b||!O)return new C(NaN);if(b!=O)return _.s=-O,g.plus(_);var h=g.e/Me,S=_.e/Me,T=g.c,w=_.c;if(!h||!S){if(!T||!w)return T?(_.s=-O,_):new C(w?g:NaN);if(!T[0]||!w[0])return w[0]?(_.s=-O,_):new C(T[0]?g:a==3?-0:0)}if(h=on(h),S=on(S),T=T.slice(),b=h-S){for((p=b<0)?(b=-b,u=T):(S=h,u=w),u.reverse(),O=b;O--;u.push(0));u.reverse()}else for(E=(p=(b=T.length)<(O=w.length))?b:O,b=O=0;O<E;O++)if(T[O]!=w[O]){p=T[O]<w[O];break}if(p&&(u=T,T=w,w=u,_.s=-_.s),O=(E=w.length)-(x=T.length),O>0)for(;O--;T[x++]=0);for(O=gn-1;E>b;){if(T[--E]<w[E]){for(x=E;x&&!T[--x];T[x]=O);--T[x],T[E]+=gn}T[E]-=w[E]}for(;T[0]==0;T.splice(0,1),--S);return T[0]?F(_,T,S):(_.s=a==3?-1:1,_.c=[_.e=0],_)},i.modulo=i.mod=function(_,O){var x,E,u=this;return _=new C(_,O),!u.c||!_.s||_.c&&!_.c[0]?new C(NaN):!_.c||u.c&&!u.c[0]?new C(u):(P==9?(E=_.s,_.s=1,x=e(u,_,0,3),_.s=E,x.s*=E):x=e(u,_,0,P),_=u.minus(x.times(_)),!_.c[0]&&P==1&&(_.s=u.s),_)},i.multipliedBy=i.times=function(_,O){var x,E,u,p,g,b,h,S,T,w,v,N,ee,Y,ne,se=this,ae=se.c,W=(_=new C(_,O)).c;if(!ae||!W||!ae[0]||!W[0])return!se.s||!_.s||ae&&!ae[0]&&!W||W&&!W[0]&&!ae?_.c=_.e=_.s=null:(_.s*=se.s,!ae||!W?_.c=_.e=null:(_.c=[0],_.e=0)),_;for(E=on(se.e/Me)+on(_.e/Me),_.s*=se.s,h=ae.length,w=W.length,h<w&&(ee=ae,ae=W,W=ee,u=h,h=w,w=u),u=h+w,ee=[];u--;ee.push(0));for(Y=gn,ne=Yi,u=w;--u>=0;){for(x=0,v=W[u]%ne,N=W[u]/ne|0,g=h,p=u+g;p>u;)S=ae[--g]%ne,T=ae[g]/ne|0,b=N*S+T*v,S=v*S+b%ne*ne+ee[p]+x,x=(S/Y|0)+(b/ne|0)+N*T,ee[p--]=S%Y;ee[p]=x}return x?++E:ee.splice(0,1),F(_,ee,E)},i.negated=function(){var _=new C(this);return _.s=-_.s||null,_},i.plus=function(_,O){var x,E=this,u=E.s;if(_=new C(_,O),O=_.s,!u||!O)return new C(NaN);if(u!=O)return _.s=-O,E.minus(_);var p=E.e/Me,g=_.e/Me,b=E.c,h=_.c;if(!p||!g){if(!b||!h)return new C(u/0);if(!b[0]||!h[0])return h[0]?_:new C(b[0]?E:u*0)}if(p=on(p),g=on(g),b=b.slice(),u=p-g){for(u>0?(g=p,x=h):(u=-u,x=b),x.reverse();u--;x.push(0));x.reverse()}for(u=b.length,O=h.length,u-O<0&&(x=h,h=b,b=x,O=u),u=0;O;)u=(b[--O]=b[O]+h[O]+u)/gn|0,b[O]=gn===b[O]?0:b[O]%gn;return u&&(b=[u].concat(b),++g),F(_,b,g)},i.precision=i.sd=function(_,O){var x,E,u,p=this;if(_!=null&&_!==!!_)return xt(_,1,er),O==null?O=a:xt(O,0,8),j(new C(p),_,O);if(!(x=p.c))return null;if(u=x.length-1,E=u*Me+1,u=x[u]){for(;u%10==0;u/=10,E--);for(u=x[0];u>=10;u/=10,E++);}return _&&p.e+1>E&&(E=p.e+1),E},i.shiftedBy=function(_){return xt(_,-Ul,Ul),this.times("1e"+_)},i.squareRoot=i.sqrt=function(){var _,O,x,E,u,p=this,g=p.c,b=p.s,h=p.e,S=o+4,T=new C("0.5");if(b!==1||!g||!g[0])return new C(!b||b<0&&(!g||g[0])?NaN:g?p:1/0);if(b=Math.sqrt(+y(p)),b==0||b==1/0?(O=sn(g),(O.length+h)%2==0&&(O+="0"),b=Math.sqrt(+O),h=on((h+1)/2)-(h<0||h%2),b==1/0?O="5e"+h:(O=b.toExponential(),O=O.slice(0,O.indexOf("e")+1)+h),x=new C(O)):x=new C(b+""),x.c[0]){for(h=x.e,b=h+S,b<3&&(b=0);;)if(u=x,x=T.times(u.plus(e(p,u,S,1))),sn(u.c).slice(0,b)===(O=sn(x.c)).slice(0,b))if(x.e<h&&--b,O=O.slice(b-3,b+1),O=="9999"||!E&&O=="4999"){if(!E&&(j(u,u.e+o+2,0),u.times(u).eq(p))){x=u;break}S+=4,b+=4,E=1}else{(!+O||!+O.slice(1)&&O.charAt(0)=="5")&&(j(x,x.e+o+2,1),_=!x.times(x).eq(p));break}}return j(x,x.e+o+1,a,_)},i.toExponential=function(_,O){return _!=null&&(xt(_,0,er),_++),V(this,_,O,1)},i.toFixed=function(_,O){return _!=null&&(xt(_,0,er),_=_+this.e+1),V(this,_,O)},i.toFormat=function(_,O,x){var E,u=this;if(x==null)_!=null&&O&&typeof O=="object"?(x=O,O=null):_&&typeof _=="object"?(x=_,_=O=null):x=H;else if(typeof x!="object")throw Error(Br+"Argument not an object: "+x);if(E=u.toFixed(_,O),u.c){var p,g=E.split("."),b=+x.groupSize,h=+x.secondaryGroupSize,S=x.groupSeparator||"",T=g[0],w=g[1],v=u.s<0,N=v?T.slice(1):T,ee=N.length;if(h&&(p=b,b=h,h=p,ee-=p),b>0&&ee>0){for(p=ee%b||b,T=N.substr(0,p);p<ee;p+=b)T+=S+N.substr(p,b);h>0&&(T+=S+N.slice(p)),v&&(T="-"+T)}E=w?T+(x.decimalSeparator||"")+((h=+x.fractionGroupSize)?w.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):w):T}return(x.prefix||"")+E+(x.suffix||"")},i.toFraction=function(_){var O,x,E,u,p,g,b,h,S,T,w,v,N=this,ee=N.c;if(_!=null&&(b=new C(_),!b.isInteger()&&(b.c||b.s!==1)||b.lt(s)))throw Error(Br+"Argument "+(b.isInteger()?"out of range: ":"not an integer: ")+y(b));if(!ee)return new C(N);for(O=new C(s),S=x=new C(s),E=h=new C(s),v=sn(ee),p=O.e=v.length-N.e-1,O.c[0]=Kl[(g=p%Me)<0?Me+g:g],_=!_||b.comparedTo(O)>0?p>0?O:S:b,g=d,d=1/0,b=new C(v),h.c[0]=0;T=e(b,O,0,1),u=x.plus(T.times(E)),u.comparedTo(_)!=1;)x=E,E=u,S=h.plus(T.times(u=S)),h=u,O=b.minus(T.times(u=O)),b=u;return u=e(_.minus(x),E,0,1),h=h.plus(u.times(S)),x=x.plus(u.times(E)),h.s=S.s=N.s,p=p*2,w=e(S,E,p,a).minus(N).abs().comparedTo(e(h,x,p,a).minus(N).abs())<1?[S,E]:[h,x],d=g,w},i.toNumber=function(){return+y(this)},i.toPrecision=function(_,O){return _!=null&&xt(_,1,er),V(this,_,O,2)},i.toString=function(_){var O,x=this,E=x.s,u=x.e;return u===null?E?(O="Infinity",E<0&&(O="-"+O)):O="NaN":(_==null?O=u<=c||u>=l?Uc(sn(x.c),u):mi(sn(x.c),u,"0"):_===10&&G?(x=j(new C(x),o+u+1,a),O=mi(sn(x.c),x.e,"0")):(xt(_,2,q.length,"Base"),O=r(mi(sn(x.c),u,"0"),10,_,E,!0)),E<0&&x.c[0]&&(O="-"+O)),O},i.valueOf=i.toJSON=function(){return y(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&C.set(t),C}function on(t){var e=t|0;return t>0||t===e?e:e-1}function sn(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=Me-e.length;r--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Eo(t,e){var r,n,i=t.c,s=e.c,o=t.s,a=e.s,c=t.e,l=e.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function xt(t,e,r,n){if(t<e||t>r||t!==Mn(t))throw Error(Br+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Dc(t){var e=t.c.length-1;return on(t.e/Me)==e&&t.c[e]%2!=0}function Uc(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function mi(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var be=Db(),qr={},oo={},pu={},gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.BrowserRandomSource=void 0;const Mp=65536;class __{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Mp)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Mp)));return r}}gu.BrowserRandomSource=__;function w_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bu={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});function A_(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Fr.wipe=A_;const x_={},S_=Object.freeze(Object.defineProperty({__proto__:null,default:x_},Symbol.toStringTag,{value:"Module"})),vc=My(S_);Object.defineProperty(bu,"__esModule",{value:!0});bu.NodeRandomSource=void 0;const R_=Fr;class I_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof w_<"u"){const e=vc;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,R_.wipe)(r),n}}bu.NodeRandomSource=I_;Object.defineProperty(pu,"__esModule",{value:!0});pu.SystemRandomSource=void 0;const T_=gu,O_=bu;class P_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new T_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new O_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}pu.SystemRandomSource=P_;var De={},Ub={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,f=a&65535,d=c>>>16&65535,I=c&65535;return f*I+(l*I+f*d<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Ub);Object.defineProperty(De,"__esModule",{value:!0});var Kb=Ub;function N_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}De.readInt16BE=N_;function M_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}De.readUint16BE=M_;function L_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}De.readInt16LE=L_;function C_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}De.readUint16LE=C_;function Hb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}De.writeUint16BE=Hb;De.writeInt16BE=Hb;function Fb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}De.writeUint16LE=Fb;De.writeInt16LE=Fb;function Zd(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}De.readInt32BE=Zd;function eh(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}De.readUint32BE=eh;function th(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}De.readInt32LE=th;function rh(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}De.readUint32LE=rh;function Of(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}De.writeUint32BE=Of;De.writeInt32BE=Of;function Pf(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}De.writeUint32LE=Pf;De.writeInt32LE=Pf;function B_(t,e){e===void 0&&(e=0);var r=Zd(t,e),n=Zd(t,e+4);return r*4294967296+n-(n>>31)*4294967296}De.readInt64BE=B_;function k_(t,e){e===void 0&&(e=0);var r=eh(t,e),n=eh(t,e+4);return r*4294967296+n}De.readUint64BE=k_;function D_(t,e){e===void 0&&(e=0);var r=th(t,e),n=th(t,e+4);return n*4294967296+r-(r>>31)*4294967296}De.readInt64LE=D_;function U_(t,e){e===void 0&&(e=0);var r=rh(t,e),n=rh(t,e+4);return n*4294967296+r}De.readUint64LE=U_;function jb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Of(t/4294967296>>>0,e,r),Of(t>>>0,e,r+4),e}De.writeUint64BE=jb;De.writeInt64BE=jb;function Gb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Pf(t>>>0,e,r),Pf(t/4294967296>>>0,e,r+4),e}De.writeUint64LE=Gb;De.writeInt64LE=Gb;function K_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}De.readUintBE=K_;function H_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}De.readUintLE=H_;function F_(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Kb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}De.writeUintBE=F_;function j_(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Kb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}De.writeUintLE=j_;function G_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}De.readFloat32BE=G_;function V_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}De.readFloat32LE=V_;function q_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}De.readFloat64BE=q_;function $_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}De.readFloat64LE=$_;function z_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}De.writeFloat32BE=z_;function W_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}De.writeFloat32LE=W_;function X_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}De.writeFloat64BE=X_;function J_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}De.writeFloat64LE=J_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=pu,r=De,n=Fr;t.defaultRandomSource=new e.SystemRandomSource;function i(l,f=t.defaultRandomSource){return f.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const f=i(4,l),d=(0,r.readUint32LE)(f);return(0,n.wipe)(f),d}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=o,d=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let I="";const P=f.length,L=256-256%P;for(;l>0;){const H=i(Math.ceil(l*256/L),d);for(let q=0;q<H.length&&l>0;q++){const G=H[q];G<L&&(I+=f.charAt(G%P),l--)}(0,n.wipe)(H)}return I}t.randomString=a;function c(l,f=o,d=t.defaultRandomSource){const I=Math.ceil(l/(Math.log(f.length)/Math.LN2));return a(I,f,d)}t.randomStringForEntropy=c})(oo);var Vb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=Fr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[f++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[f++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,d=l/536870912|0,I=l<<3,P=l%128<112?128:256;this._buffer[f]=128;for(var L=f+1;L<P-8;L++)this._buffer[L]=0;e.writeUint32BE(d,this._buffer,P-8),e.writeUint32BE(I,this._buffer,P-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)e.writeUint32BE(this._stateHi[L],c,L*8),e.writeUint32BE(this._stateLo[L],c,L*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,f,d,I,P){for(var L=l[0],H=l[1],q=l[2],G=l[3],C=l[4],V=l[5],U=l[6],F=l[7],j=f[0],y=f[1],_=f[2],O=f[3],x=f[4],E=f[5],u=f[6],p=f[7],g,b,h,S,T,w,v,N;P>=128;){for(var ee=0;ee<16;ee++){var Y=8*ee+I;a[ee]=e.readUint32BE(d,Y),c[ee]=e.readUint32BE(d,Y+4)}for(var ee=0;ee<80;ee++){var ne=L,se=H,ae=q,W=G,K=C,k=V,m=U,B=F,X=j,Z=y,ce=_,ie=O,de=x,ye=E,ue=u,Ee=p;if(g=F,b=p,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=(C>>>14|x<<32-14)^(C>>>18|x<<32-18)^(x>>>41-32|C<<32-(41-32)),b=(x>>>14|C<<32-14)^(x>>>18|C<<32-18)^(C>>>41-32|x<<32-(41-32)),T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=C&V^~C&U,b=x&E^~x&u,T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=i[ee*2],b=i[ee*2+1],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=a[ee%16],b=c[ee%16],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,h=v&65535|N<<16,S=T&65535|w<<16,g=h,b=S,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=(L>>>28|j<<32-28)^(j>>>34-32|L<<32-(34-32))^(j>>>39-32|L<<32-(39-32)),b=(j>>>28|L<<32-28)^(L>>>34-32|j<<32-(34-32))^(L>>>39-32|j<<32-(39-32)),T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,g=L&H^L&q^H&q,b=j&y^j&_^y&_,T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,B=v&65535|N<<16,Ee=T&65535|w<<16,g=W,b=ie,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=h,b=S,T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,W=v&65535|N<<16,ie=T&65535|w<<16,H=ne,q=se,G=ae,C=W,V=K,U=k,F=m,L=B,y=X,_=Z,O=ce,x=ie,E=de,u=ye,p=ue,j=Ee,ee%16===15)for(var Y=0;Y<16;Y++)g=a[Y],b=c[Y],T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=a[(Y+9)%16],b=c[(Y+9)%16],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,h=a[(Y+1)%16],S=c[(Y+1)%16],g=(h>>>1|S<<32-1)^(h>>>8|S<<32-8)^h>>>7,b=(S>>>1|h<<32-1)^(S>>>8|h<<32-8)^(S>>>7|h<<32-7),T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,h=a[(Y+14)%16],S=c[(Y+14)%16],g=(h>>>19|S<<32-19)^(S>>>61-32|h<<32-(61-32))^h>>>6,b=(S>>>19|h<<32-19)^(h>>>61-32|S<<32-(61-32))^(S>>>6|h<<32-6),T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,a[Y]=v&65535|N<<16,c[Y]=T&65535|w<<16}g=L,b=j,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[0],b=f[0],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[0]=L=v&65535|N<<16,f[0]=j=T&65535|w<<16,g=H,b=y,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[1],b=f[1],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[1]=H=v&65535|N<<16,f[1]=y=T&65535|w<<16,g=q,b=_,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[2],b=f[2],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[2]=q=v&65535|N<<16,f[2]=_=T&65535|w<<16,g=G,b=O,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[3],b=f[3],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[3]=G=v&65535|N<<16,f[3]=O=T&65535|w<<16,g=C,b=x,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[4],b=f[4],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[4]=C=v&65535|N<<16,f[4]=x=T&65535|w<<16,g=V,b=E,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[5],b=f[5],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[5]=V=v&65535|N<<16,f[5]=E=T&65535|w<<16,g=U,b=u,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[6],b=f[6],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[6]=U=v&65535|N<<16,f[6]=u=T&65535|w<<16,g=F,b=p,T=b&65535,w=b>>>16,v=g&65535,N=g>>>16,g=l[7],b=f[7],T+=b&65535,w+=b>>>16,v+=g&65535,N+=g>>>16,w+=T>>>16,v+=w>>>16,N+=v>>>16,l[7]=F=v&65535|N<<16,f[7]=p=T&65535|w<<16,I+=128,P-=128}return I}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Vb);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=oo,r=Vb,n=Fr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(W){const K=new Float64Array(16);if(W)for(let k=0;k<W.length;k++)K[k]=W[k];return K}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(W,K){for(let k=0;k<16;k++)W[k]=K[k]|0}function L(W){let K=1;for(let k=0;k<16;k++){let m=W[k]+K+65535;K=Math.floor(m/65536),W[k]=m-K*65536}W[0]+=K-1+37*(K-1)}function H(W,K,k){const m=~(k-1);for(let B=0;B<16;B++){const X=m&(W[B]^K[B]);W[B]^=X,K[B]^=X}}function q(W,K){const k=i(),m=i();for(let B=0;B<16;B++)m[B]=K[B];L(m),L(m),L(m);for(let B=0;B<2;B++){k[0]=m[0]-65517;for(let Z=1;Z<15;Z++)k[Z]=m[Z]-65535-(k[Z-1]>>16&1),k[Z-1]&=65535;k[15]=m[15]-32767-(k[14]>>16&1);const X=k[15]>>16&1;k[14]&=65535,H(m,k,1-X)}for(let B=0;B<16;B++)W[2*B]=m[B]&255,W[2*B+1]=m[B]>>8}function G(W,K){let k=0;for(let m=0;m<32;m++)k|=W[m]^K[m];return(1&k-1>>>8)-1}function C(W,K){const k=new Uint8Array(32),m=new Uint8Array(32);return q(k,W),q(m,K),G(k,m)}function V(W){const K=new Uint8Array(32);return q(K,W),K[0]&1}function U(W,K){for(let k=0;k<16;k++)W[k]=K[2*k]+(K[2*k+1]<<8);W[15]&=32767}function F(W,K,k){for(let m=0;m<16;m++)W[m]=K[m]+k[m]}function j(W,K,k){for(let m=0;m<16;m++)W[m]=K[m]-k[m]}function y(W,K,k){let m,B,X=0,Z=0,ce=0,ie=0,de=0,ye=0,ue=0,Ee=0,xe=0,me=0,ge=0,Oe=0,ve=0,he=0,Ne=0,M=0,A=0,R=0,D=0,$=0,Q=0,te=0,le=0,Ae=0,we=0,Se=0,Fe=0,gt=0,mt=0,go=0,At=0,je=k[0],Vt=k[1],Ge=k[2],Ve=k[3],qt=k[4],qe=k[5],$e=k[6],$t=k[7],ze=k[8],We=k[9],zt=k[10],Xe=k[11],Je=k[12],Wt=k[13],Ye=k[14],Qe=k[15];m=K[0],X+=m*je,Z+=m*Vt,ce+=m*Ge,ie+=m*Ve,de+=m*qt,ye+=m*qe,ue+=m*$e,Ee+=m*$t,xe+=m*ze,me+=m*We,ge+=m*zt,Oe+=m*Xe,ve+=m*Je,he+=m*Wt,Ne+=m*Ye,M+=m*Qe,m=K[1],Z+=m*je,ce+=m*Vt,ie+=m*Ge,de+=m*Ve,ye+=m*qt,ue+=m*qe,Ee+=m*$e,xe+=m*$t,me+=m*ze,ge+=m*We,Oe+=m*zt,ve+=m*Xe,he+=m*Je,Ne+=m*Wt,M+=m*Ye,A+=m*Qe,m=K[2],ce+=m*je,ie+=m*Vt,de+=m*Ge,ye+=m*Ve,ue+=m*qt,Ee+=m*qe,xe+=m*$e,me+=m*$t,ge+=m*ze,Oe+=m*We,ve+=m*zt,he+=m*Xe,Ne+=m*Je,M+=m*Wt,A+=m*Ye,R+=m*Qe,m=K[3],ie+=m*je,de+=m*Vt,ye+=m*Ge,ue+=m*Ve,Ee+=m*qt,xe+=m*qe,me+=m*$e,ge+=m*$t,Oe+=m*ze,ve+=m*We,he+=m*zt,Ne+=m*Xe,M+=m*Je,A+=m*Wt,R+=m*Ye,D+=m*Qe,m=K[4],de+=m*je,ye+=m*Vt,ue+=m*Ge,Ee+=m*Ve,xe+=m*qt,me+=m*qe,ge+=m*$e,Oe+=m*$t,ve+=m*ze,he+=m*We,Ne+=m*zt,M+=m*Xe,A+=m*Je,R+=m*Wt,D+=m*Ye,$+=m*Qe,m=K[5],ye+=m*je,ue+=m*Vt,Ee+=m*Ge,xe+=m*Ve,me+=m*qt,ge+=m*qe,Oe+=m*$e,ve+=m*$t,he+=m*ze,Ne+=m*We,M+=m*zt,A+=m*Xe,R+=m*Je,D+=m*Wt,$+=m*Ye,Q+=m*Qe,m=K[6],ue+=m*je,Ee+=m*Vt,xe+=m*Ge,me+=m*Ve,ge+=m*qt,Oe+=m*qe,ve+=m*$e,he+=m*$t,Ne+=m*ze,M+=m*We,A+=m*zt,R+=m*Xe,D+=m*Je,$+=m*Wt,Q+=m*Ye,te+=m*Qe,m=K[7],Ee+=m*je,xe+=m*Vt,me+=m*Ge,ge+=m*Ve,Oe+=m*qt,ve+=m*qe,he+=m*$e,Ne+=m*$t,M+=m*ze,A+=m*We,R+=m*zt,D+=m*Xe,$+=m*Je,Q+=m*Wt,te+=m*Ye,le+=m*Qe,m=K[8],xe+=m*je,me+=m*Vt,ge+=m*Ge,Oe+=m*Ve,ve+=m*qt,he+=m*qe,Ne+=m*$e,M+=m*$t,A+=m*ze,R+=m*We,D+=m*zt,$+=m*Xe,Q+=m*Je,te+=m*Wt,le+=m*Ye,Ae+=m*Qe,m=K[9],me+=m*je,ge+=m*Vt,Oe+=m*Ge,ve+=m*Ve,he+=m*qt,Ne+=m*qe,M+=m*$e,A+=m*$t,R+=m*ze,D+=m*We,$+=m*zt,Q+=m*Xe,te+=m*Je,le+=m*Wt,Ae+=m*Ye,we+=m*Qe,m=K[10],ge+=m*je,Oe+=m*Vt,ve+=m*Ge,he+=m*Ve,Ne+=m*qt,M+=m*qe,A+=m*$e,R+=m*$t,D+=m*ze,$+=m*We,Q+=m*zt,te+=m*Xe,le+=m*Je,Ae+=m*Wt,we+=m*Ye,Se+=m*Qe,m=K[11],Oe+=m*je,ve+=m*Vt,he+=m*Ge,Ne+=m*Ve,M+=m*qt,A+=m*qe,R+=m*$e,D+=m*$t,$+=m*ze,Q+=m*We,te+=m*zt,le+=m*Xe,Ae+=m*Je,we+=m*Wt,Se+=m*Ye,Fe+=m*Qe,m=K[12],ve+=m*je,he+=m*Vt,Ne+=m*Ge,M+=m*Ve,A+=m*qt,R+=m*qe,D+=m*$e,$+=m*$t,Q+=m*ze,te+=m*We,le+=m*zt,Ae+=m*Xe,we+=m*Je,Se+=m*Wt,Fe+=m*Ye,gt+=m*Qe,m=K[13],he+=m*je,Ne+=m*Vt,M+=m*Ge,A+=m*Ve,R+=m*qt,D+=m*qe,$+=m*$e,Q+=m*$t,te+=m*ze,le+=m*We,Ae+=m*zt,we+=m*Xe,Se+=m*Je,Fe+=m*Wt,gt+=m*Ye,mt+=m*Qe,m=K[14],Ne+=m*je,M+=m*Vt,A+=m*Ge,R+=m*Ve,D+=m*qt,$+=m*qe,Q+=m*$e,te+=m*$t,le+=m*ze,Ae+=m*We,we+=m*zt,Se+=m*Xe,Fe+=m*Je,gt+=m*Wt,mt+=m*Ye,go+=m*Qe,m=K[15],M+=m*je,A+=m*Vt,R+=m*Ge,D+=m*Ve,$+=m*qt,Q+=m*qe,te+=m*$e,le+=m*$t,Ae+=m*ze,we+=m*We,Se+=m*zt,Fe+=m*Xe,gt+=m*Je,mt+=m*Wt,go+=m*Ye,At+=m*Qe,X+=38*A,Z+=38*R,ce+=38*D,ie+=38*$,de+=38*Q,ye+=38*te,ue+=38*le,Ee+=38*Ae,xe+=38*we,me+=38*Se,ge+=38*Fe,Oe+=38*gt,ve+=38*mt,he+=38*go,Ne+=38*At,B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=ce+B+65535,B=Math.floor(m/65536),ce=m-B*65536,m=ie+B+65535,B=Math.floor(m/65536),ie=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=ue+B+65535,B=Math.floor(m/65536),ue=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=xe+B+65535,B=Math.floor(m/65536),xe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=ge+B+65535,B=Math.floor(m/65536),ge=m-B*65536,m=Oe+B+65535,B=Math.floor(m/65536),Oe=m-B*65536,m=ve+B+65535,B=Math.floor(m/65536),ve=m-B*65536,m=he+B+65535,B=Math.floor(m/65536),he=m-B*65536,m=Ne+B+65535,B=Math.floor(m/65536),Ne=m-B*65536,m=M+B+65535,B=Math.floor(m/65536),M=m-B*65536,X+=B-1+37*(B-1),B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=ce+B+65535,B=Math.floor(m/65536),ce=m-B*65536,m=ie+B+65535,B=Math.floor(m/65536),ie=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=ue+B+65535,B=Math.floor(m/65536),ue=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=xe+B+65535,B=Math.floor(m/65536),xe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=ge+B+65535,B=Math.floor(m/65536),ge=m-B*65536,m=Oe+B+65535,B=Math.floor(m/65536),Oe=m-B*65536,m=ve+B+65535,B=Math.floor(m/65536),ve=m-B*65536,m=he+B+65535,B=Math.floor(m/65536),he=m-B*65536,m=Ne+B+65535,B=Math.floor(m/65536),Ne=m-B*65536,m=M+B+65535,B=Math.floor(m/65536),M=m-B*65536,X+=B-1+37*(B-1),W[0]=X,W[1]=Z,W[2]=ce,W[3]=ie,W[4]=de,W[5]=ye,W[6]=ue,W[7]=Ee,W[8]=xe,W[9]=me,W[10]=ge,W[11]=Oe,W[12]=ve,W[13]=he,W[14]=Ne,W[15]=M}function _(W,K){y(W,K,K)}function O(W,K){const k=i();let m;for(m=0;m<16;m++)k[m]=K[m];for(m=253;m>=0;m--)_(k,k),m!==2&&m!==4&&y(k,k,K);for(m=0;m<16;m++)W[m]=k[m]}function x(W,K){const k=i();let m;for(m=0;m<16;m++)k[m]=K[m];for(m=250;m>=0;m--)_(k,k),m!==1&&y(k,k,K);for(m=0;m<16;m++)W[m]=k[m]}function E(W,K){const k=i(),m=i(),B=i(),X=i(),Z=i(),ce=i(),ie=i(),de=i(),ye=i();j(k,W[1],W[0]),j(ye,K[1],K[0]),y(k,k,ye),F(m,W[0],W[1]),F(ye,K[0],K[1]),y(m,m,ye),y(B,W[3],K[3]),y(B,B,l),y(X,W[2],K[2]),F(X,X,X),j(Z,m,k),j(ce,X,B),F(ie,X,B),F(de,m,k),y(W[0],Z,ce),y(W[1],de,ie),y(W[2],ie,ce),y(W[3],Z,de)}function u(W,K,k){for(let m=0;m<4;m++)H(W[m],K[m],k)}function p(W,K){const k=i(),m=i(),B=i();O(B,K[2]),y(k,K[0],B),y(m,K[1],B),q(W,m),W[31]^=V(k)<<7}function g(W,K,k){P(W[0],o),P(W[1],a),P(W[2],a),P(W[3],o);for(let m=255;m>=0;--m){const B=k[m/8|0]>>(m&7)&1;u(W,K,B),E(K,W),E(W,W),u(W,K,B)}}function b(W,K){const k=[i(),i(),i(),i()];P(k[0],f),P(k[1],d),P(k[2],a),y(k[3],f,d),g(W,k,K)}function h(W){if(W.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const K=(0,r.hash)(W);K[0]&=248,K[31]&=127,K[31]|=64;const k=new Uint8Array(32),m=[i(),i(),i(),i()];b(m,K),p(k,m);const B=new Uint8Array(64);return B.set(W),B.set(k,32),{publicKey:k,secretKey:B}}t.generateKeyPairFromSeed=h;function S(W){const K=(0,e.randomBytes)(32,W),k=h(K);return(0,n.wipe)(K),k}t.generateKeyPair=S;function T(W){if(W.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(W.subarray(32))}t.extractPublicKeyFromSecretKey=T;const w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function v(W,K){let k,m,B,X;for(m=63;m>=32;--m){for(k=0,B=m-32,X=m-12;B<X;++B)K[B]+=k-16*K[m]*w[B-(m-32)],k=Math.floor((K[B]+128)/256),K[B]-=k*256;K[B]+=k,K[m]=0}for(k=0,B=0;B<32;B++)K[B]+=k-(K[31]>>4)*w[B],k=K[B]>>8,K[B]&=255;for(B=0;B<32;B++)K[B]-=k*w[B];for(m=0;m<32;m++)K[m+1]+=K[m]>>8,W[m]=K[m]&255}function N(W){const K=new Float64Array(64);for(let k=0;k<64;k++)K[k]=W[k];for(let k=0;k<64;k++)W[k]=0;v(W,K)}function ee(W,K){const k=new Float64Array(64),m=[i(),i(),i(),i()],B=(0,r.hash)(W.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const X=new Uint8Array(64);X.set(B.subarray(32),32);const Z=new r.SHA512;Z.update(X.subarray(32)),Z.update(K);const ce=Z.digest();Z.clean(),N(ce),b(m,ce),p(X,m),Z.reset(),Z.update(X.subarray(0,32)),Z.update(W.subarray(32)),Z.update(K);const ie=Z.digest();N(ie);for(let de=0;de<32;de++)k[de]=ce[de];for(let de=0;de<32;de++)for(let ye=0;ye<32;ye++)k[de+ye]+=ie[de]*B[ye];return v(X.subarray(32),k),X}t.sign=ee;function Y(W,K){const k=i(),m=i(),B=i(),X=i(),Z=i(),ce=i(),ie=i();return P(W[2],a),U(W[1],K),_(B,W[1]),y(X,B,c),j(B,B,W[2]),F(X,W[2],X),_(Z,X),_(ce,Z),y(ie,ce,Z),y(k,ie,B),y(k,k,X),x(k,k),y(k,k,B),y(k,k,X),y(k,k,X),y(W[0],k,X),_(m,W[0]),y(m,m,X),C(m,B)&&y(W[0],W[0],I),_(m,W[0]),y(m,m,X),C(m,B)?-1:(V(W[0])===K[31]>>7&&j(W[0],o,W[0]),y(W[3],W[0],W[1]),0)}function ne(W,K,k){const m=new Uint8Array(32),B=[i(),i(),i(),i()],X=[i(),i(),i(),i()];if(k.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Y(X,W))return!1;const Z=new r.SHA512;Z.update(k.subarray(0,32)),Z.update(W),Z.update(K);const ce=Z.digest();return N(ce),g(B,X,ce),b(X,k.subarray(32)),E(B,X),p(m,B),!G(k,m)}t.verify=ne;function se(W){let K=[i(),i(),i(),i()];if(Y(K,W))throw new Error("Ed25519: invalid public key");let k=i(),m=i(),B=K[1];F(k,a,B),j(m,a,B),O(m,m),y(k,k,m);let X=new Uint8Array(32);return q(X,k),X}t.convertPublicKeyToX25519=se;function ae(W){const K=(0,r.hash)(W.subarray(0,32));K[0]&=248,K[31]&=127,K[31]|=64;const k=new Uint8Array(K.subarray(0,32));return(0,n.wipe)(K),k}t.convertSecretKeyToX25519=ae})(qr);var un={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=Fr;t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function a(c,l){if(c===void 0&&(c=64),this.digestLength=c,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),c<1||c>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");l&&this.validateConfig(l);var f=0;l&&l.key&&(f=l.key.length);var d=1,I=1;l&&l.tree&&(d=l.tree.fanout,I=l.tree.maxDepth),this._state[0]^=c|f<<8|d<<16|I<<24,l&&l.tree&&(this._state[1]^=l.tree.leafSize,this._state[2]^=l.tree.nodeOffsetLowBits,this._state[3]^=l.tree.nodeOffsetHighBits,this._state[4]^=l.tree.nodeDepth|l.tree.innerDigestLength<<8,this._lastNode=l.tree.lastNode),l&&l.salt&&(this._state[8]^=e.readUint32LE(l.salt,0),this._state[9]^=e.readUint32LE(l.salt,4),this._state[10]^=e.readUint32LE(l.salt,8),this._state[11]^=e.readUint32LE(l.salt,12)),l&&l.personalization&&(this._state[12]^=e.readUint32LE(l.personalization,0),this._state[13]^=e.readUint32LE(l.personalization,4),this._state[14]^=e.readUint32LE(l.personalization,8),this._state[15]^=e.readUint32LE(l.personalization,12)),this._initialState=new Uint32Array(this._state),l&&l.key&&f>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(l.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return a.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},a.prototype.validateConfig=function(c){if(c.key&&c.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(c.salt&&c.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(c.personalization&&c.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(c.tree){if(c.tree.fanout<0||c.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(c.tree.maxDepth<0||c.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(c.tree.leafSize<0||c.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(c.tree.innerDigestLength<0||c.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var f=t.BLOCK_SIZE-this._bufferLength,d=0;if(l===0)return this;if(l>f){for(var I=0;I<f;I++)this._buffer[this._bufferLength+I]=c[d+I];this._processBlock(t.BLOCK_SIZE),d+=f,l-=f,this._bufferLength=0}for(;l>t.BLOCK_SIZE;){for(var I=0;I<t.BLOCK_SIZE;I++)this._buffer[I]=c[d+I];this._processBlock(t.BLOCK_SIZE),d+=t.BLOCK_SIZE,l-=t.BLOCK_SIZE,this._bufferLength=0}for(var I=0;I<l;I++)this._buffer[this._bufferLength+I]=c[d+I];return this._bufferLength+=l,this},a.prototype.finish=function(c){if(!this._finished){for(var l=this._bufferLength;l<t.BLOCK_SIZE;l++)this._buffer[l]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var f=this._buffer.subarray(0,64),l=0;l<16;l++)e.writeUint32LE(this._state[l],f,l*4);return c.set(f.subarray(0,c.length)),this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},a.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._buffer.set(c.buffer),this._bufferLength=c.bufferLength,this._ctr.set(c.ctr),this._flag.set(c.flag),this._lastNode=c.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=c.paddedKey?new Uint8Array(c.paddedKey):void 0,this._initialState.set(c.initialState),this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),r.wipe(c.buffer),r.wipe(c.initialState),c.paddedKey&&r.wipe(c.paddedKey),c.bufferLength=0,r.wipe(c.ctr),r.wipe(c.flag),c.lastNode=!1},a.prototype._G=function(c,l,f,d,I,P,L,H,q,G,C,V,U){var F=c[l],j=c[P],y=c[f],_=c[L],O=c[d],x=c[H],E=c[I],u=c[q],p=F&65535,g=F>>>16,b=j&65535,h=j>>>16;p+=y&65535,g+=y>>>16,b+=_&65535,h+=_>>>16,g+=p>>>16,b+=g>>>16,h+=b>>>16,j=b&65535|h<<16,F=p&65535|g<<16,p=F&65535,g=F>>>16,b=j&65535,h=j>>>16,p+=G&65535,g+=G>>>16,b+=C&65535,h+=C>>>16,g+=p>>>16,b+=g>>>16,h+=b>>>16,j=b&65535|h<<16,F=p&65535|g<<16,E^=F,u^=j,p=u,u=E,E=p,p=O&65535,g=O>>>16,b=x&65535,h=x>>>16,p+=E&65535,g+=E>>>16,b+=u&65535,h+=u>>>16,g+=p>>>16,b+=g>>>16,h+=b>>>16,x=b&65535|h<<16,O=p&65535|g<<16,y^=O,_^=x,p=y<<8|_>>>24,y=_<<8|y>>>24,_=p,p=F&65535,g=F>>>16,b=j&65535,h=j>>>16,p+=y&65535,g+=y>>>16,b+=_&65535,h+=_>>>16,g+=p>>>16,b+=g>>>16,h+=b>>>16,j=b&65535|h<<16,F=p&65535|g<<16,p=F&65535,g=F>>>16,b=j&65535,h=j>>>16,p+=V&65535,g+=V>>>16,b+=U&65535,h+=U>>>16,g+=p>>>16,b+=g>>>16,h+=b>>>16,j=b&65535|h<<16,F=p&65535|g<<16,E^=F,u^=j,p=E<<16|u>>>16,E=u<<16|E>>>16,u=p,p=O&65535,g=O>>>16,b=x&65535,h=x>>>16,p+=E&65535,g+=E>>>16,b+=u&65535,h+=u>>>16,g+=p>>>16,b+=g>>>16,h+=b>>>16,x=b&65535|h<<16,O=p&65535|g<<16,y^=O,_^=x,p=_<<1|y>>>31,y=y<<1|_>>>31,_=p,c[l]=F,c[P]=j,c[f]=y,c[L]=_,c[d]=O,c[H]=x,c[I]=E,c[q]=u},a.prototype._incrementCounter=function(c){for(var l=0;l<3;l++){var f=this._ctr[l]+c;if(this._ctr[l]=f>>>0,this._ctr[l]===f)return;c=1}},a.prototype._processBlock=function(c){this._incrementCounter(c);var l=this._vtmp;l.set(this._state),l.set(n,16),l[12*2+0]^=this._ctr[0],l[12*2+1]^=this._ctr[1],l[13*2+0]^=this._ctr[2],l[13*2+1]^=this._ctr[3],l[14*2+0]^=this._flag[0],l[14*2+1]^=this._flag[1],l[15*2+0]^=this._flag[2],l[15*2+1]^=this._flag[3];for(var f=this._mtmp,d=0;d<32;d++)f[d]=e.readUint32LE(this._buffer,d*4);for(var I=0;I<12;I++)this._G(l,0,8,16,24,1,9,17,25,f[i[I][0]],f[i[I][0]+1],f[i[I][1]],f[i[I][1]+1]),this._G(l,2,10,18,26,3,11,19,27,f[i[I][2]],f[i[I][2]+1],f[i[I][3]],f[i[I][3]+1]),this._G(l,4,12,20,28,5,13,21,29,f[i[I][4]],f[i[I][4]+1],f[i[I][5]],f[i[I][5]+1]),this._G(l,6,14,22,30,7,15,23,31,f[i[I][6]],f[i[I][6]+1],f[i[I][7]],f[i[I][7]+1]),this._G(l,0,10,20,30,1,11,21,31,f[i[I][8]],f[i[I][8]+1],f[i[I][9]],f[i[I][9]+1]),this._G(l,2,12,22,24,3,13,23,25,f[i[I][10]],f[i[I][10]+1],f[i[I][11]],f[i[I][11]+1]),this._G(l,4,14,16,26,5,15,17,27,f[i[I][12]],f[i[I][12]+1],f[i[I][13]],f[i[I][13]+1]),this._G(l,6,8,18,28,7,9,19,29,f[i[I][14]],f[i[I][14]+1],f[i[I][15]],f[i[I][15]+1]);for(var d=0;d<16;d++)this._state[d]^=l[d]^l[d+16]},a}();t.BLAKE2b=s;function o(a,c,l){c===void 0&&(c=t.DIGEST_LENGTH);var f=new s(c,l);f.update(a);var d=f.digest();return f.clean(),d}t.hash=o})(un);const Y_="Input must be an string, Buffer or Uint8Array";function Q_(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Y_);return e}function Z_(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Kc(t){return(4294967296+t).toString(16).substring(1)}function ew(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=Kc(e[i]).toUpperCase(),n+=" ",n+=Kc(e[i+1]).toUpperCase();else if(r===64)n+=Kc(e[i+1]).toUpperCase(),n+=Kc(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function tw(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var qb={normalizeInput:Q_,toHex:Z_,debugPrint:ew,testSpeed:tw};const gf=qb;function Hc(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function Lp(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function $b(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Qi(t,e,r,n,i,s){const o=Ka[i],a=Ka[i+1],c=Ka[s],l=Ka[s+1];Hc(Be,t,e),Lp(Be,t,o,a);let f=Be[n]^Be[t],d=Be[n+1]^Be[t+1];Be[n]=d,Be[n+1]=f,Hc(Be,r,n),f=Be[e]^Be[r],d=Be[e+1]^Be[r+1],Be[e]=f>>>24^d<<8,Be[e+1]=d>>>24^f<<8,Hc(Be,t,e),Lp(Be,t,c,l),f=Be[n]^Be[t],d=Be[n+1]^Be[t+1],Be[n]=f>>>16^d<<16,Be[n+1]=d>>>16^f<<16,Hc(Be,r,n),f=Be[e]^Be[r],d=Be[e+1]^Be[r+1],Be[e]=d>>>31^f<<1,Be[e+1]=f>>>31^d<<1}const zb=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),rw=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],ur=new Uint8Array(rw.map(function(t){return t*2})),Be=new Uint32Array(32),Ka=new Uint32Array(32);function Wb(t,e){let r=0;for(r=0;r<16;r++)Be[r]=t.h[r],Be[r+16]=zb[r];for(Be[24]=Be[24]^t.t,Be[25]=Be[25]^t.t/4294967296,e&&(Be[28]=~Be[28],Be[29]=~Be[29]),r=0;r<32;r++)Ka[r]=$b(t.b,4*r);for(r=0;r<12;r++)Qi(0,8,16,24,ur[r*16+0],ur[r*16+1]),Qi(2,10,18,26,ur[r*16+2],ur[r*16+3]),Qi(4,12,20,28,ur[r*16+4],ur[r*16+5]),Qi(6,14,22,30,ur[r*16+6],ur[r*16+7]),Qi(0,10,20,30,ur[r*16+8],ur[r*16+9]),Qi(2,12,22,24,ur[r*16+10],ur[r*16+11]),Qi(4,14,16,26,ur[r*16+12],ur[r*16+13]),Qi(6,8,18,28,ur[r*16+14],ur[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Be[r]^Be[r+16]}const Zi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Xb(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Zi.fill(0),Zi[0]=t,e&&(Zi[1]=e.length),Zi[2]=1,Zi[3]=1,r&&Zi.set(r,32),n&&Zi.set(n,48);for(let s=0;s<16;s++)i.h[s]=zb[s]^$b(Zi,s*4);return e&&(Vh(i,e),i.c=128),i}function Vh(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,Wb(t,!1),t.c=0),t.b[t.c++]=e[r]}function Jb(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Wb(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function Yb(t,e,r,n,i){r=r||64,t=gf.normalizeInput(t),n&&(n=gf.normalizeInput(n)),i&&(i=gf.normalizeInput(i));const s=Xb(r,e,n,i);return Vh(s,t),Jb(s)}function nw(t,e,r,n,i){const s=Yb(t,e,r,n,i);return gf.toHex(s)}var iw={blake2b:Yb,blake2bHex:nw,blake2bInit:Xb,blake2bUpdate:Vh,blake2bFinal:Jb};const Qb=qb;function sw(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function es(t,e,r,n,i,s){at[t]=at[t]+at[e]+i,at[n]=Fc(at[n]^at[t],16),at[r]=at[r]+at[n],at[e]=Fc(at[e]^at[r],12),at[t]=at[t]+at[e]+s,at[n]=Fc(at[n]^at[t],8),at[r]=at[r]+at[n],at[e]=Fc(at[e]^at[r],7)}function Fc(t,e){return t>>>e^t<<32-e}const Zb=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),at=new Uint32Array(16),or=new Uint32Array(16);function ev(t,e){let r=0;for(r=0;r<8;r++)at[r]=t.h[r],at[r+8]=Zb[r];for(at[12]^=t.t,at[13]^=t.t/4294967296,e&&(at[14]=~at[14]),r=0;r<16;r++)or[r]=sw(t.b,4*r);for(r=0;r<10;r++)es(0,4,8,12,or[lr[r*16+0]],or[lr[r*16+1]]),es(1,5,9,13,or[lr[r*16+2]],or[lr[r*16+3]]),es(2,6,10,14,or[lr[r*16+4]],or[lr[r*16+5]]),es(3,7,11,15,or[lr[r*16+6]],or[lr[r*16+7]]),es(0,5,10,15,or[lr[r*16+8]],or[lr[r*16+9]]),es(1,6,11,12,or[lr[r*16+10]],or[lr[r*16+11]]),es(2,7,8,13,or[lr[r*16+12]],or[lr[r*16+13]]),es(3,4,9,14,or[lr[r*16+14]],or[lr[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=at[r]^at[r+8]}function tv(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(Zb),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(qh(n,e),n.c=64),n}function qh(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,ev(t,!1),t.c=0),t.b[t.c++]=e[r]}function rv(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;ev(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function nv(t,e,r){r=r||32,t=Qb.normalizeInput(t);const n=tv(r,e);return qh(n,t),rv(n)}function ow(t,e,r){const n=nv(t,e,r);return Qb.toHex(n)}var aw={blake2s:nv,blake2sHex:ow,blake2sInit:tv,blake2sUpdate:qh,blake2sFinal:rv};const wa=iw,Aa=aw;var cw={blake2b:wa.blake2b,blake2bHex:wa.blake2bHex,blake2bInit:wa.blake2bInit,blake2bUpdate:wa.blake2bUpdate,blake2bFinal:wa.blake2bFinal,blake2s:Aa.blake2s,blake2sHex:Aa.blake2sHex,blake2sInit:Aa.blake2sInit,blake2sUpdate:Aa.blake2sUpdate,blake2sFinal:Aa.blake2sFinal},Nt={},Cp={get exports(){return Nt},set exports(t){Nt=t}};typeof Object.create=="function"?Cp.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Cp.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Ir={},fw={get exports(){return Ir},set exports(t){Ir=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Gi,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(fw,Ir);var Za={},uw={get exports(){return Za},set exports(t){Za=t}},oa={},ec={},lw={get exports(){return ec},set exports(t){ec=t}},Co=typeof Reflect=="object"?Reflect:null,Bp=Co&&typeof Co.apply=="function"?Co.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},bf;Co&&typeof Co.ownKeys=="function"?bf=Co.ownKeys:Object.getOwnPropertySymbols?bf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:bf=function(e){return Object.getOwnPropertyNames(e)};function dw(t){console&&console.warn&&console.warn(t)}var iv=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}lw.exports=ht;ec.once=bw;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var kp=10;function vu(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return kp},set:function(t){if(typeof t!="number"||t<0||iv(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");kp=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||iv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function sv(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return sv(this)};ht.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Bp(c,this,r);else for(var l=c.length,f=uv(c,l),n=0;n<l;++n)Bp(f[n],this,r);return!0};function ov(t,e,r,n){var i,s,o;if(vu(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=sv(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,dw(a)}return t}ht.prototype.addListener=function(e,r){return ov(this,e,r,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,r){return ov(this,e,r,!0)};function hw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function av(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=hw.bind(n);return i.listener=r,n.wrapFn=i,i}ht.prototype.once=function(e,r){return vu(r),this.on(e,av(this,e,r)),this};ht.prototype.prependOnceListener=function(e,r){return vu(r),this.prependListener(e,av(this,e,r)),this};ht.prototype.removeListener=function(e,r){var n,i,s,o,a;if(vu(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():pw(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function cv(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?gw(i):uv(i,i.length)}ht.prototype.listeners=function(e){return cv(this,e,!0)};ht.prototype.rawListeners=function(e){return cv(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):fv.call(t,e)};ht.prototype.listenerCount=fv;function fv(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?bf(this._events):[]};function uv(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function pw(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function gw(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function bw(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}lv(t,e,s,{once:!0}),e!=="error"&&vw(t,i,{once:!0})})}function vw(t,e,r){typeof t.on=="function"&&lv(t,"error",e,r)}function lv(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var dv=ec.EventEmitter,Hl,Dp;function mw(){if(Dp)return Hl;Dp=1;function t(I,P){var L=Object.keys(I);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(I);P&&(H=H.filter(function(q){return Object.getOwnPropertyDescriptor(I,q).enumerable})),L.push.apply(L,H)}return L}function e(I){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?t(Object(L),!0).forEach(function(H){r(I,H,L[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(L)):t(Object(L)).forEach(function(H){Object.defineProperty(I,H,Object.getOwnPropertyDescriptor(L,H))})}return I}function r(I,P,L){return P in I?Object.defineProperty(I,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):I[P]=L,I}function n(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function i(I,P){for(var L=0;L<P.length;L++){var H=P[L];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(I,H.key,H)}}function s(I,P,L){return P&&i(I.prototype,P),L&&i(I,L),I}var o=Gi,a=o.Buffer,c=vc,l=c.inspect,f=l&&l.custom||"inspect";function d(I,P,L){a.prototype.copy.call(I,P,L)}return Hl=function(){function I(){n(this,I),this.head=null,this.tail=null,this.length=0}return s(I,[{key:"push",value:function(L){var H={data:L,next:null};this.length>0?this.tail.next=H:this.head=H,this.tail=H,++this.length}},{key:"unshift",value:function(L){var H={data:L,next:this.head};this.length===0&&(this.tail=H),this.head=H,++this.length}},{key:"shift",value:function(){if(this.length!==0){var L=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,L}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(L){if(this.length===0)return"";for(var H=this.head,q=""+H.data;H=H.next;)q+=L+H.data;return q}},{key:"concat",value:function(L){if(this.length===0)return a.alloc(0);for(var H=a.allocUnsafe(L>>>0),q=this.head,G=0;q;)d(q.data,H,G),G+=q.data.length,q=q.next;return H}},{key:"consume",value:function(L,H){var q;return L<this.head.data.length?(q=this.head.data.slice(0,L),this.head.data=this.head.data.slice(L)):L===this.head.data.length?q=this.shift():q=H?this._getString(L):this._getBuffer(L),q}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(L){var H=this.head,q=1,G=H.data;for(L-=G.length;H=H.next;){var C=H.data,V=L>C.length?C.length:L;if(V===C.length?G+=C:G+=C.slice(0,L),L-=V,L===0){V===C.length?(++q,H.next?this.head=H.next:this.head=this.tail=null):(this.head=H,H.data=C.slice(V));break}++q}return this.length-=q,G}},{key:"_getBuffer",value:function(L){var H=a.allocUnsafe(L),q=this.head,G=1;for(q.data.copy(H),L-=q.data.length;q=q.next;){var C=q.data,V=L>C.length?C.length:L;if(C.copy(H,H.length-L,0,V),L-=V,L===0){V===C.length?(++G,q.next?this.head=q.next:this.head=this.tail=null):(this.head=q,q.data=C.slice(V));break}++G}return this.length-=G,H}},{key:f,value:function(L,H){return l(this,e({},H,{depth:0,customInspect:!1}))}}]),I}(),Hl}function yw(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(nh,this,t)):process.nextTick(nh,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(vf,r):(r._writableState.errorEmitted=!0,process.nextTick(Up,r,s)):process.nextTick(Up,r,s):e?(process.nextTick(vf,r),e(s)):process.nextTick(vf,r)}),this)}function Up(t,e){nh(t,e),vf(t)}function vf(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Ew(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function nh(t,e){t.emit("error",e)}function _w(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var hv={destroy:yw,undestroy:Ew,errorOrDestroy:_w},ao={};function ww(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var pv={};function dn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){ww(o,s);function o(a,c,l){return s.call(this,n(a,c,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,pv[t]=i}function Kp(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Aw(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function xw(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Sw(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}dn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);dn("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Aw(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(xw(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Kp(e,"type"));else{var s=Sw(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(Kp(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);dn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");dn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});dn("ERR_STREAM_PREMATURE_CLOSE","Premature close");dn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});dn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");dn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");dn("ERR_STREAM_WRITE_AFTER_END","write after end");dn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);dn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);dn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ao.codes=pv;var Rw=ao.codes.ERR_INVALID_OPT_VALUE;function Iw(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Tw(t,e,r,n){var i=Iw(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new Rw(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var gv={getHighWaterMark:Tw},mu={},$h=Ir.Buffer,Hp=$h.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ow(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Pw(t){var e=Ow(t);if(typeof e!="string"&&($h.isEncoding===Hp||!Hp(t)))throw new Error("Unknown encoding: "+t);return e||t}mu.StringDecoder=mc;function mc(t){this.encoding=Pw(t);var e;switch(this.encoding){case"utf16le":this.text=kw,this.end=Dw,e=4;break;case"utf8":this.fillLast=Lw,e=4;break;case"base64":this.text=Uw,this.end=Kw,e=3;break;default:this.write=Hw,this.end=Fw;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=$h.allocUnsafe(e)}mc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};mc.prototype.end=Bw;mc.prototype.text=Cw;mc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Fl(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Nw(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Fl(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Fl(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Fl(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Mw(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function Lw(t){var e=this.lastTotal-this.lastNeed,r=Mw(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Cw(t,e){var r=Nw(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Bw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function kw(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Dw(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Uw(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Kw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Hw(t){return t.toString(this.encoding)}function Fw(t){return t&&t.length?this.write(t):""}var Fp=ao.codes.ERR_STREAM_PREMATURE_CLOSE;function jw(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Gw(){}function Vw(t){return t.setHeader&&typeof t.abort=="function"}function bv(t,e,r){if(typeof e=="function")return bv(t,null,e);e||(e={}),r=jw(r||Gw);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,i||r.call(t)},f=function(L){r.call(t,L)},d=function(){var L;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(L=new Fp),r.call(t,L);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(L=new Fp),r.call(t,L)},I=function(){t.req.on("finish",a)};return Vw(t)?(t.on("complete",a),t.on("abort",d),t.req?I():t.on("request",I)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",I),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",d)}}var zh=bv,jl,jp;function qw(){if(jp)return jl;jp=1;var t;function e(G,C,V){return C in G?Object.defineProperty(G,C,{value:V,enumerable:!0,configurable:!0,writable:!0}):G[C]=V,G}var r=zh,n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function f(G,C){return{value:G,done:C}}function d(G){var C=G[n];if(C!==null){var V=G[l].read();V!==null&&(G[a]=null,G[n]=null,G[i]=null,C(f(V,!1)))}}function I(G){process.nextTick(d,G)}function P(G,C){return function(V,U){G.then(function(){if(C[o]){V(f(void 0,!0));return}C[c](V,U)},U)}}var L=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((t={get stream(){return this[l]},next:function(){var C=this,V=this[s];if(V!==null)return Promise.reject(V);if(this[o])return Promise.resolve(f(void 0,!0));if(this[l].destroyed)return new Promise(function(y,_){process.nextTick(function(){C[s]?_(C[s]):y(f(void 0,!0))})});var U=this[a],F;if(U)F=new Promise(P(U,this));else{var j=this[l].read();if(j!==null)return Promise.resolve(f(j,!1));F=new Promise(this[c])}return this[a]=F,F}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var C=this;return new Promise(function(V,U){C[l].destroy(null,function(F){if(F){U(F);return}V(f(void 0,!0))})})}),t),L),q=function(C){var V,U=Object.create(H,(V={},e(V,l,{value:C,writable:!0}),e(V,n,{value:null,writable:!0}),e(V,i,{value:null,writable:!0}),e(V,s,{value:null,writable:!0}),e(V,o,{value:C._readableState.endEmitted,writable:!0}),e(V,c,{value:function(j,y){var _=U[l].read();_?(U[a]=null,U[n]=null,U[i]=null,j(f(_,!1))):(U[n]=j,U[i]=y)},writable:!0}),V));return U[a]=null,r(C,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=U[i];j!==null&&(U[a]=null,U[n]=null,U[i]=null,j(F)),U[s]=F;return}var y=U[n];y!==null&&(U[a]=null,U[n]=null,U[i]=null,y(f(void 0,!0))),U[o]=!0}),C.on("readable",I.bind(null,U)),U};return jl=q,jl}var Gl,Gp;function $w(){return Gp||(Gp=1,Gl=function(){throw new Error("Readable.from is not available in the browser")}),Gl}const Wh=oa;Wh.Readable=ot;ot.ReadableState=mv;ec.EventEmitter;var vv=function(e,r){return e.listeners(r).length},yc=dv,yu=Gi.Buffer,zw={}.Uint8Array||function(){};function Ww(t){return yu.from(t)}function Xw(t){return yu.isBuffer(t)||t instanceof zw}var Vl=vc,He;Vl&&Vl.debuglog?He=Vl.debuglog("stream"):He=function(){};var Jw=mw(),Xh=hv,Yw=gv,Qw=Yw.getHighWaterMark,Eu=ao.codes,Zw=Eu.ERR_INVALID_ARG_TYPE,e3=Eu.ERR_STREAM_PUSH_AFTER_EOF,t3=Eu.ERR_METHOD_NOT_IMPLEMENTED,r3=Eu.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Bo,ql,$l;Nt(ot,yc);var Ga=Xh.errorOrDestroy,zl=["error","close","destroy","pause","resume"];function n3(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function mv(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Wh.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=Qw(this,t,"readableHighWaterMark",r),this.buffer=new Jw,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Bo||(Bo=mu.StringDecoder),this.decoder=new Bo(t.encoding),this.encoding=t.encoding)}function ot(t){if(!(this instanceof ot))return new ot(t);var e=this instanceof Wh.Duplex;this._readableState=new mv(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),yc.call(this)}Object.defineProperty(ot.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});ot.prototype.destroy=Xh.destroy;ot.prototype._undestroy=Xh.undestroy;ot.prototype._destroy=function(t,e){e(t)};ot.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=yu.from(t,e),e=""),n=!0),yv(this,t,e,!1,n)};ot.prototype.unshift=function(t){return yv(this,t,null,!0,!1)};function yv(t,e,r,n,i){He("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,o3(t,s);else{var o;if(i||(o=i3(s,e)),o)Ga(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==yu.prototype&&(e=Ww(e)),n)s.endEmitted?Ga(t,new r3):Wl(t,s,e,!0);else if(s.ended)Ga(t,new e3);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Wl(t,s,e,!1):ih(t,s)):Wl(t,s,e,!1)}else n||(s.reading=!1,ih(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Wl(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&_u(t)),ih(t,e)}function i3(t,e){var r;return!Xw(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Zw("chunk",["string","Buffer","Uint8Array"],e)),r}ot.prototype.isPaused=function(){return this._readableState.flowing===!1};ot.prototype.setEncoding=function(t){Bo||(Bo=mu.StringDecoder);var e=new Bo(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Vp=1073741824;function s3(t){return t>=Vp?t=Vp:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function qp(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=s3(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ot.prototype.read=function(t){He("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return He("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Xl(this):_u(this),null;if(t=qp(t,e),t===0&&e.ended)return e.length===0&&Xl(this),null;var n=e.needReadable;He("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,He("length less than watermark",n)),e.ended||e.reading?(n=!1,He("reading or ended",n)):n&&(He("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=qp(r,e)));var i;return t>0?i=wv(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Xl(this)),i!==null&&this.emit("data",i),i};function o3(t,e){if(He("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?_u(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Ev(t)))}}function _u(t){var e=t._readableState;He("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(He("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Ev,t))}function Ev(t){var e=t._readableState;He("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Jh(t)}function ih(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(a3,t,e))}function a3(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(He("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ot.prototype._read=function(t){Ga(this,new t3("_read()"))};ot.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,He("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:H;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(q,G){He("onunpipe"),q===r&&G&&G.hasUnpiped===!1&&(G.hasUnpiped=!0,f())}function a(){He("onend"),t.end()}var c=c3(r);t.on("drain",c);var l=!1;function f(){He("cleanup"),t.removeListener("close",P),t.removeListener("finish",L),t.removeListener("drain",c),t.removeListener("error",I),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",d),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",d);function d(q){He("ondata");var G=t.write(q);He("dest.write",G),G===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Av(n.pipes,t)!==-1)&&!l&&(He("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function I(q){He("onerror",q),H(),t.removeListener("error",I),vv(t,"error")===0&&Ga(t,q)}n3(t,"error",I);function P(){t.removeListener("finish",L),H()}t.once("close",P);function L(){He("onfinish"),t.removeListener("close",P),H()}t.once("finish",L);function H(){He("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(He("pipe resume"),r.resume()),t};function c3(t){return function(){var r=t._readableState;He("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&vv(t,"data")&&(r.flowing=!0,Jh(t))}}ot.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Av(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};ot.prototype.on=function(t,e){var r=yc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,He("on readable",n.length,n.reading),n.length?_u(this):n.reading||process.nextTick(f3,this)),r};ot.prototype.addListener=ot.prototype.on;ot.prototype.removeListener=function(t,e){var r=yc.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(_v,this),r};ot.prototype.removeAllListeners=function(t){var e=yc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(_v,this),e};function _v(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function f3(t){He("readable nexttick read 0"),t.read(0)}ot.prototype.resume=function(){var t=this._readableState;return t.flowing||(He("resume"),t.flowing=!t.readableListening,u3(this,t)),t.paused=!1,this};function u3(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(l3,t,e))}function l3(t,e){He("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Jh(t),e.flowing&&!e.reading&&t.read(0)}ot.prototype.pause=function(){return He("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(He("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Jh(t){var e=t._readableState;for(He("flow",e.flowing);e.flowing&&t.read()!==null;);}ot.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(He("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(He("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<zl.length;s++)t.on(zl[s],this.emit.bind(this,zl[s]));return this._read=function(o){He("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(ot.prototype[Symbol.asyncIterator]=function(){return ql===void 0&&(ql=qw()),ql(this)});Object.defineProperty(ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(ot.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(ot.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});ot._fromList=wv;Object.defineProperty(ot.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function wv(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Xl(t){var e=t._readableState;He("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(d3,e,t))}function d3(t,e){if(He("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(ot.from=function(t,e){return $l===void 0&&($l=$w()),$l(ot,t,e)});function Av(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var h3=p3;function p3(t,e){if(Jl("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Jl("throwDeprecation"))throw new Error(e);Jl("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Jl(t){try{if(!{}.localStorage)return!1}catch{return!1}var e={}.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}const Yh=oa;Yh.Writable=Mt;function xv(t){var e=this;this.next=null,this.entry=null,this.finish=function(){F3(e,t)}}Mt.WritableState=Ec;var g3={deprecate:h3},Sv=dv,wu=Gi.Buffer,b3={}.Uint8Array||function(){};function v3(t){return wu.from(t)}function m3(t){return wu.isBuffer(t)||t instanceof b3}var Qh=hv,y3=gv,E3=y3.getHighWaterMark,Os=ao.codes,_3=Os.ERR_INVALID_ARG_TYPE,w3=Os.ERR_METHOD_NOT_IMPLEMENTED,A3=Os.ERR_MULTIPLE_CALLBACK,x3=Os.ERR_STREAM_CANNOT_PIPE,S3=Os.ERR_STREAM_DESTROYED,R3=Os.ERR_STREAM_NULL_VALUES,I3=Os.ERR_STREAM_WRITE_AFTER_END,T3=Os.ERR_UNKNOWN_ENCODING,Fo=Qh.errorOrDestroy;Nt(Mt,Sv);function O3(){}function Ec(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Yh.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=E3(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){k3(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new xv(this)}Ec.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Ec.prototype,"buffer",{get:g3.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var mf;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(mf=Function.prototype[Symbol.hasInstance],Object.defineProperty(Mt,Symbol.hasInstance,{value:function(e){return mf.call(this,e)?!0:this!==Mt?!1:e&&e._writableState instanceof Ec}})):mf=function(e){return e instanceof this};function Mt(t){var e=this instanceof Yh.Duplex;if(!e&&!mf.call(Mt,this))return new Mt(t);this._writableState=new Ec(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Sv.call(this)}Mt.prototype.pipe=function(){Fo(this,new x3)};function P3(t,e){var r=new I3;Fo(t,r),process.nextTick(e,r)}function N3(t,e,r,n){var i;return r===null?i=new R3:typeof r!="string"&&!e.objectMode&&(i=new _3("chunk",["string","Buffer"],r)),i?(Fo(t,i),process.nextTick(n,i),!1):!0}Mt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&m3(t);return s&&!wu.isBuffer(t)&&(t=v3(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=O3),n.ending?P3(this,r):(s||N3(this,n,t,r))&&(n.pendingcb++,i=L3(this,n,s,t,e,r)),i};Mt.prototype.cork=function(){this._writableState.corked++};Mt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Rv(this,t))};Mt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new T3(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Mt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function M3(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=wu.from(e,r)),e}Object.defineProperty(Mt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L3(t,e,r,n,i,s){if(!r){var o=M3(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else sh(t,e,!1,a,n,i,s);return c}function sh(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new S3("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function C3(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(tc,t,e),t._writableState.errorEmitted=!0,Fo(t,n)):(i(n),t._writableState.errorEmitted=!0,Fo(t,n),tc(t,e))}function B3(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function k3(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new A3;if(B3(r),e)C3(t,r,n,e,i);else{var s=Iv(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Rv(t,r),n?process.nextTick($p,t,r,s,i):$p(t,r,s,i)}}function $p(t,e,r,n){r||D3(t,e),e.pendingcb--,n(),tc(t,e)}function D3(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Rv(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,sh(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new xv(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback,d=e.objectMode?1:c.length;if(sh(t,e,!1,d,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Mt.prototype._write=function(t,e,r){r(new w3("_write()"))};Mt.prototype._writev=null;Mt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||H3(this,n,r),this};Object.defineProperty(Mt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Iv(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function U3(t,e){t._final(function(r){e.pendingcb--,r&&Fo(t,r),e.prefinished=!0,t.emit("prefinish"),tc(t,e)})}function K3(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(U3,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function tc(t,e){var r=Iv(e);if(r&&(K3(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function H3(t,e,r){e.ending=!0,tc(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function F3(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Mt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Mt.prototype.destroy=Qh.destroy;Mt.prototype._undestroy=Qh.undestroy;Mt.prototype._destroy=function(t,e){e(t)};var j3=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};const jo=oa;jo.Duplex=ci;Nt(ci,jo.Readable);for(var zp=j3(jo.Writable.prototype),Yl=0;Yl<zp.length;Yl++){var Ql=zp[Yl];ci.prototype[Ql]||(ci.prototype[Ql]=jo.Writable.prototype[Ql])}function ci(t){if(!(this instanceof ci))return new ci(t);jo.Readable.call(this,t),jo.Writable.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",G3)))}Object.defineProperty(ci.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ci.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ci.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function G3(){this._writableState.ended||process.nextTick(V3,this)}function V3(t){t.end()}Object.defineProperty(ci.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});const _c=oa;_c.Transform=qi;var Au=ao.codes,q3=Au.ERR_METHOD_NOT_IMPLEMENTED,$3=Au.ERR_MULTIPLE_CALLBACK,z3=Au.ERR_TRANSFORM_ALREADY_TRANSFORMING,W3=Au.ERR_TRANSFORM_WITH_LENGTH_0;Nt(qi,_c.Duplex);function X3(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new $3);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function qi(t){if(!(this instanceof qi))return new qi(t);_c.Duplex.call(this,t),this._transformState={afterTransform:X3.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",J3)}function J3(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Wp(t,e,r)}):Wp(this,null,null)}qi.prototype.push=function(t,e){return this._transformState.needTransform=!1,_c.Duplex.prototype.push.call(this,t,e)};qi.prototype._transform=function(t,e,r){r(new q3("_transform()"))};qi.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};qi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};qi.prototype._destroy=function(t,e){_c.Duplex.prototype._destroy.call(this,t,function(r){e(r)})};function Wp(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new W3;if(t._transformState.transforming)throw new z3;return t.push(null)}const Tv=oa;Tv.PassThrough=rc;Nt(rc,Tv.Transform);function rc(t){if(!(this instanceof rc))return new rc(t);Transform.call(this,t)}rc.prototype._transform=function(t,e,r){r(null,t)};var Zl;function Y3(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ov=ao.codes,Q3=Ov.ERR_MISSING_ARGS,Z3=Ov.ERR_STREAM_DESTROYED;function Xp(t){if(t)throw t}function e6(t){return t.setHeader&&typeof t.abort=="function"}function t6(t,e,r,n){n=Y3(n);var i=!1;t.on("close",function(){i=!0}),Zl===void 0&&(Zl=zh),Zl(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,e6(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Z3("pipe"))}}}function Jp(t){t()}function r6(t,e){return t.pipe(e)}function n6(t){return!t.length||typeof t[t.length-1]!="function"?Xp:t.pop()}function i6(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=n6(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Q3("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,l=a>0;return t6(o,c,l,function(f){i||(i=f),f&&s.forEach(Jp),!c&&(s.forEach(Jp),n(i))})});return e.reduce(r6)}var s6=i6;(function(t,e){const r=oa;e=t.exports=r.Readable,e.Stream=r.Readable,e.Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.finished=zh,e.pipeline=s6})(uw,Za);var Nf=Ir.Buffer,Pv=Za.Transform,o6=Nt;function a6(t,e){if(!Nf.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Ps(t){Pv.call(this),this._block=Nf.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o6(Ps,Pv);Ps.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Ps.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Ps.prototype.update=function(t,e){if(a6(t,"Data"),this._finalized)throw new Error("Digest already called");Nf.isBuffer(t)||(t=Nf.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,o=t.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};Ps.prototype._update=function(){throw new Error("_update is not implemented")};Ps.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Ps.prototype._digest=function(){throw new Error("_digest is not implemented")};var Nv=Ps,c6=Nt,Mv=Nv,f6=Ir.Buffer,u6=new Array(16);function xu(){Mv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}c6(xu,Mv);xu.prototype._update=function(){for(var t=u6,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=dr(r,n,i,s,t[0],3614090360,7),s=dr(s,r,n,i,t[1],3905402710,12),i=dr(i,s,r,n,t[2],606105819,17),n=dr(n,i,s,r,t[3],3250441966,22),r=dr(r,n,i,s,t[4],4118548399,7),s=dr(s,r,n,i,t[5],1200080426,12),i=dr(i,s,r,n,t[6],2821735955,17),n=dr(n,i,s,r,t[7],4249261313,22),r=dr(r,n,i,s,t[8],1770035416,7),s=dr(s,r,n,i,t[9],2336552879,12),i=dr(i,s,r,n,t[10],4294925233,17),n=dr(n,i,s,r,t[11],2304563134,22),r=dr(r,n,i,s,t[12],1804603682,7),s=dr(s,r,n,i,t[13],4254626195,12),i=dr(i,s,r,n,t[14],2792965006,17),n=dr(n,i,s,r,t[15],1236535329,22),r=hr(r,n,i,s,t[1],4129170786,5),s=hr(s,r,n,i,t[6],3225465664,9),i=hr(i,s,r,n,t[11],643717713,14),n=hr(n,i,s,r,t[0],3921069994,20),r=hr(r,n,i,s,t[5],3593408605,5),s=hr(s,r,n,i,t[10],38016083,9),i=hr(i,s,r,n,t[15],3634488961,14),n=hr(n,i,s,r,t[4],3889429448,20),r=hr(r,n,i,s,t[9],568446438,5),s=hr(s,r,n,i,t[14],3275163606,9),i=hr(i,s,r,n,t[3],4107603335,14),n=hr(n,i,s,r,t[8],1163531501,20),r=hr(r,n,i,s,t[13],2850285829,5),s=hr(s,r,n,i,t[2],4243563512,9),i=hr(i,s,r,n,t[7],1735328473,14),n=hr(n,i,s,r,t[12],2368359562,20),r=pr(r,n,i,s,t[5],4294588738,4),s=pr(s,r,n,i,t[8],2272392833,11),i=pr(i,s,r,n,t[11],1839030562,16),n=pr(n,i,s,r,t[14],4259657740,23),r=pr(r,n,i,s,t[1],2763975236,4),s=pr(s,r,n,i,t[4],1272893353,11),i=pr(i,s,r,n,t[7],4139469664,16),n=pr(n,i,s,r,t[10],3200236656,23),r=pr(r,n,i,s,t[13],681279174,4),s=pr(s,r,n,i,t[0],3936430074,11),i=pr(i,s,r,n,t[3],3572445317,16),n=pr(n,i,s,r,t[6],76029189,23),r=pr(r,n,i,s,t[9],3654602809,4),s=pr(s,r,n,i,t[12],3873151461,11),i=pr(i,s,r,n,t[15],530742520,16),n=pr(n,i,s,r,t[2],3299628645,23),r=gr(r,n,i,s,t[0],4096336452,6),s=gr(s,r,n,i,t[7],1126891415,10),i=gr(i,s,r,n,t[14],2878612391,15),n=gr(n,i,s,r,t[5],4237533241,21),r=gr(r,n,i,s,t[12],1700485571,6),s=gr(s,r,n,i,t[3],2399980690,10),i=gr(i,s,r,n,t[10],4293915773,15),n=gr(n,i,s,r,t[1],2240044497,21),r=gr(r,n,i,s,t[8],1873313359,6),s=gr(s,r,n,i,t[15],4264355552,10),i=gr(i,s,r,n,t[6],2734768916,15),n=gr(n,i,s,r,t[13],1309151649,21),r=gr(r,n,i,s,t[4],4149444226,6),s=gr(s,r,n,i,t[11],3174756917,10),i=gr(i,s,r,n,t[2],718787259,15),n=gr(n,i,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0};xu.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=f6.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function Su(t,e){return t<<e|t>>>32-e}function dr(t,e,r,n,i,s,o){return Su(t+(e&r|~e&n)+i+s|0,o)+e|0}function hr(t,e,r,n,i,s,o){return Su(t+(e&n|r&~n)+i+s|0,o)+e|0}function pr(t,e,r,n,i,s,o){return Su(t+(e^r^n)+i+s|0,o)+e|0}function gr(t,e,r,n,i,s,o){return Su(t+(r^(e|~n))+i+s|0,o)+e|0}var l6=xu,ed=Gi.Buffer,d6=Nt,Lv=Nv,h6=new Array(16),xa=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Sa=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ra=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ia=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ta=[0,1518500249,1859775393,2400959708,2840853838],Oa=[1352829926,1548603684,1836072691,2053994217,0];function Ru(){Lv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}d6(Ru,Lv);Ru.prototype._update=function(){for(var t=h6,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._a|0,c=this._b|0,l=this._c|0,f=this._d|0,d=this._e|0,I=0;I<80;I+=1){var P,L;I<16?(P=Yp(r,n,i,s,o,t[xa[I]],Ta[0],Ra[I]),L=t1(a,c,l,f,d,t[Sa[I]],Oa[0],Ia[I])):I<32?(P=Qp(r,n,i,s,o,t[xa[I]],Ta[1],Ra[I]),L=e1(a,c,l,f,d,t[Sa[I]],Oa[1],Ia[I])):I<48?(P=Zp(r,n,i,s,o,t[xa[I]],Ta[2],Ra[I]),L=Zp(a,c,l,f,d,t[Sa[I]],Oa[2],Ia[I])):I<64?(P=e1(r,n,i,s,o,t[xa[I]],Ta[3],Ra[I]),L=Qp(a,c,l,f,d,t[Sa[I]],Oa[3],Ia[I])):(P=t1(r,n,i,s,o,t[xa[I]],Ta[4],Ra[I]),L=Yp(a,c,l,f,d,t[Sa[I]],Oa[4],Ia[I])),r=o,o=s,s=eo(i,10),i=n,n=P,a=d,d=f,f=eo(l,10),l=c,c=L}var H=this._b+i+f|0;this._b=this._c+s+d|0,this._c=this._d+o+a|0,this._d=this._e+r+c|0,this._e=this._a+n+l|0,this._a=H};Ru.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=ed.alloc?ed.alloc(20):new ed(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function eo(t,e){return t<<e|t>>>32-e}function Yp(t,e,r,n,i,s,o,a){return eo(t+(e^r^n)+s+o|0,a)+i|0}function Qp(t,e,r,n,i,s,o,a){return eo(t+(e&r|~e&n)+s+o|0,a)+i|0}function Zp(t,e,r,n,i,s,o,a){return eo(t+((e|~r)^n)+s+o|0,a)+i|0}function e1(t,e,r,n,i,s,o,a){return eo(t+(e&n|r&~n)+s+o|0,a)+i|0}function t1(t,e,r,n,i,s,o,a){return eo(t+(e^(r|~n))+s+o|0,a)+i|0}var p6=Ru,oh={},g6={get exports(){return oh},set exports(t){oh=t}},Cv=Ir.Buffer;function Iu(t,e){this._block=Cv.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Iu.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Cv.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,c=Math.min(i-o,n-a),l=0;l<c;l++)r[a+l]=t[o+l];s+=c,o+=c,s%n===0&&this._update(r)}return this._len+=i,this};Iu.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};Iu.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var aa=Iu,b6=Nt,Bv=aa,v6=Ir.Buffer,m6=[1518500249,1859775393,-1894007588,-899497514],y6=new Array(80);function wc(){this.init(),this._w=y6,Bv.call(this,64,56)}b6(wc,Bv);wc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function E6(t){return t<<5|t>>>27}function _6(t){return t<<30|t>>>2}function w6(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}wc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var c=0;c<80;++c){var l=~~(c/20),f=E6(r)+w6(l,n,i,s)+o+e[c]+m6[l]|0;o=s,s=i,i=_6(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};wc.prototype._hash=function(){var t=v6.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var A6=wc,x6=Nt,kv=aa,S6=Ir.Buffer,R6=[1518500249,1859775393,-1894007588,-899497514],I6=new Array(80);function Ac(){this.init(),this._w=I6,kv.call(this,64,56)}x6(Ac,kv);Ac.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function T6(t){return t<<1|t>>>31}function O6(t){return t<<5|t>>>27}function P6(t){return t<<30|t>>>2}function N6(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}Ac.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=T6(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var c=0;c<80;++c){var l=~~(c/20),f=O6(r)+N6(l,n,i,s)+o+e[c]+R6[l]|0;o=s,s=i,i=P6(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};Ac.prototype._hash=function(){var t=S6.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var M6=Ac,L6=Nt,Dv=aa,C6=Ir.Buffer,B6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],k6=new Array(64);function xc(){this.init(),this._w=k6,Dv.call(this,64,56)}L6(xc,Dv);xc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function D6(t,e,r){return r^t&(e^r)}function U6(t,e,r){return t&e|r&(t|e)}function K6(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function H6(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function F6(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function j6(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}xc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,l=this._h|0,f=0;f<16;++f)e[f]=t.readInt32BE(f*4);for(;f<64;++f)e[f]=j6(e[f-2])+e[f-7]+F6(e[f-15])+e[f-16]|0;for(var d=0;d<64;++d){var I=l+H6(o)+D6(o,a,c)+B6[d]+e[d]|0,P=K6(r)+U6(r,n,i)|0;l=c,c=a,a=o,o=s+I|0,s=i,i=n,n=r,r=I+P|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0};xc.prototype._hash=function(){var t=C6.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Uv=xc,G6=Nt,V6=Uv,q6=aa,$6=Ir.Buffer,z6=new Array(64);function Tu(){this.init(),this._w=z6,q6.call(this,64,56)}G6(Tu,V6);Tu.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Tu.prototype._hash=function(){var t=$6.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var W6=Tu,X6=Nt,Kv=aa,J6=Ir.Buffer,r1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Y6=new Array(160);function Sc(){this.init(),this._w=Y6,Kv.call(this,128,112)}X6(Sc,Kv);Sc.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function n1(t,e,r){return r^t&(e^r)}function i1(t,e,r){return t&e|r&(t|e)}function s1(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function o1(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Q6(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Z6(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function e5(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function t5(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function tr(t,e){return t>>>0<e>>>0?1:0}Sc.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,l=this._hh|0,f=this._al|0,d=this._bl|0,I=this._cl|0,P=this._dl|0,L=this._el|0,H=this._fl|0,q=this._gl|0,G=this._hl|0,C=0;C<32;C+=2)e[C]=t.readInt32BE(C*4),e[C+1]=t.readInt32BE(C*4+4);for(;C<160;C+=2){var V=e[C-30],U=e[C-15*2+1],F=Q6(V,U),j=Z6(U,V);V=e[C-2*2],U=e[C-2*2+1];var y=e5(V,U),_=t5(U,V),O=e[C-7*2],x=e[C-7*2+1],E=e[C-16*2],u=e[C-16*2+1],p=j+x|0,g=F+O+tr(p,j)|0;p=p+_|0,g=g+y+tr(p,_)|0,p=p+u|0,g=g+E+tr(p,u)|0,e[C]=g,e[C+1]=p}for(var b=0;b<160;b+=2){g=e[b],p=e[b+1];var h=i1(r,n,i),S=i1(f,d,I),T=s1(r,f),w=s1(f,r),v=o1(o,L),N=o1(L,o),ee=r1[b],Y=r1[b+1],ne=n1(o,a,c),se=n1(L,H,q),ae=G+N|0,W=l+v+tr(ae,G)|0;ae=ae+se|0,W=W+ne+tr(ae,se)|0,ae=ae+Y|0,W=W+ee+tr(ae,Y)|0,ae=ae+p|0,W=W+g+tr(ae,p)|0;var K=w+S|0,k=T+h+tr(K,w)|0;l=c,G=q,c=a,q=H,a=o,H=L,L=P+ae|0,o=s+W+tr(L,P)|0,s=i,P=I,i=n,I=d,n=r,d=f,f=ae+K|0,r=W+k+tr(f,ae)|0}this._al=this._al+f|0,this._bl=this._bl+d|0,this._cl=this._cl+I|0,this._dl=this._dl+P|0,this._el=this._el+L|0,this._fl=this._fl+H|0,this._gl=this._gl+q|0,this._hl=this._hl+G|0,this._ah=this._ah+r+tr(this._al,f)|0,this._bh=this._bh+n+tr(this._bl,d)|0,this._ch=this._ch+i+tr(this._cl,I)|0,this._dh=this._dh+s+tr(this._dl,P)|0,this._eh=this._eh+o+tr(this._el,L)|0,this._fh=this._fh+a+tr(this._fl,H)|0,this._gh=this._gh+c+tr(this._gl,q)|0,this._hh=this._hh+l+tr(this._hl,G)|0};Sc.prototype._hash=function(){var t=J6.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var Hv=Sc,r5=Nt,n5=Hv,i5=aa,s5=Ir.Buffer,o5=new Array(160);function Ou(){this.init(),this._w=o5,i5.call(this,128,112)}r5(Ou,n5);Ou.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Ou.prototype._hash=function(){var t=s5.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var a5=Ou,co=g6.exports=function(e){e=e.toLowerCase();var r=co[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};co.sha=A6;co.sha1=M6;co.sha224=W6;co.sha256=Uv;co.sha384=a5;co.sha512=Hv;var Fv=Ir.Buffer,jv=Za.Transform,c5=mu.StringDecoder,f5=Nt;function Nn(t){jv.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}f5(Nn,jv);Nn.prototype.update=function(t,e,r){typeof t=="string"&&(t=Fv.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};Nn.prototype.setAutoPadding=function(){};Nn.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};Nn.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};Nn.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};Nn.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};Nn.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};Nn.prototype._finalOrDigest=function(t){var e=this.__final()||Fv.alloc(0);return t&&(e=this._toString(e,t,!0)),e};Nn.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new c5(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var u5=Nn,l5=Nt,d5=l6,h5=p6,p5=oh,Gv=u5;function Pu(t){Gv.call(this,"digest"),this._hash=t}l5(Pu,Gv);Pu.prototype._update=function(t){this._hash.update(t)};Pu.prototype._final=function(){return this._hash.digest()};var g5=function(e){return e=e.toLowerCase(),e==="md5"?new d5:e==="rmd160"||e==="ripemd160"?new h5:new Pu(p5(e))},jc=Ir.Buffer;function b5(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=jc.from(P)),!jc.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var L=0,H=0,q=0,G=P.length;q!==G&&P[q]===0;)q++,L++;for(var C=(G-q)*l+1>>>0,V=new Uint8Array(C);q!==G;){for(var U=P[q],F=0,j=C-1;(U!==0||F<H)&&j!==-1;j--,F++)U+=256*V[j]>>>0,V[j]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");H=F,q++}for(var y=C-H;y!==C&&V[y]===0;)y++;for(var _=a.repeat(L);y<C;++y)_+=t.charAt(V[y]);return _}function d(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return jc.alloc(0);for(var L=0,H=0,q=0;P[L]===a;)H++,L++;for(var G=(P.length-L)*c+1>>>0,C=new Uint8Array(G);P[L];){var V=e[P.charCodeAt(L)];if(V===255)return;for(var U=0,F=G-1;(V!==0||U<q)&&F!==-1;F--,U++)V+=o*C[F]>>>0,C[F]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");q=U,L++}for(var j=G-q;j!==G&&C[j]===0;)j++;var y=jc.allocUnsafe(H+(G-j));y.fill(0,0,H);for(var _=H;j!==G;)y[_++]=C[j++];return y}function I(P){var L=d(P);if(L)return L;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:d,decode:I}}var v5=b5,m5=v5,y5="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",E5=m5(y5),td=E5,_5=Ir.Buffer,w5=function(t){function e(s){var o=t(s);return td.encode(_5.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),a=s.slice(-4),c=t(o);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return o}function n(s){var o=td.decodeUnsafe(s);if(o)return r(o)}function i(s){var o=td.decode(s),a=r(o);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}},a1=g5,A5=w5;function x5(t){var e=a1("sha256").update(t).digest();return a1("sha256").update(e).digest()}var Yr=A5(x5),S5={};const R5="elliptic",I5="6.5.4",T5="EC cryptography",O5="lib/elliptic.js",P5=["lib"],N5={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},M5={type:"git",url:"git@github.com:indutny/elliptic"},L5=["EC","Elliptic","curve","Cryptography"],C5="Fedor Indutny <fedor@indutny.com>",B5="MIT",k5={url:"https://github.com/indutny/elliptic/issues"},D5="https://github.com/indutny/elliptic",U5={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},K5={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},H5={name:R5,version:I5,description:T5,main:O5,files:P5,scripts:N5,repository:M5,keywords:L5,author:C5,license:B5,bugs:k5,homepage:D5,devDependencies:U5,dependencies:K5};var en={},Tn={},F5={get exports(){return Tn},set exports(t){Tn=t}};(function(t){(function(e,r){function n(E,u){if(!E)throw new Error(u||"Assertion failed")}function i(E,u){E.super_=u;var p=function(){};p.prototype=u.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,u,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(E||0,u||10,p||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=vc.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,p){return u.cmp(p)>0?u:p},s.min=function(u,p){return u.cmp(p)<0?u:p},s.prototype._init=function(u,p,g){if(typeof u=="number")return this._initNumber(u,p,g);if(typeof u=="object")return this._initArray(u,p,g);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var b=0;u[0]==="-"&&(b++,this.negative=1),b<u.length&&(p===16?this._parseHex(u,b,g):(this._parseBase(u,p,b),g==="le"&&this._initArray(this.toArray(),p,g)))},s.prototype._initNumber=function(u,p,g){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),p,g)},s.prototype._initArray=function(u,p,g){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var h,S,T=0;if(g==="be")for(b=u.length-1,h=0;b>=0;b-=3)S=u[b]|u[b-1]<<8|u[b-2]<<16,this.words[h]|=S<<T&67108863,this.words[h+1]=S>>>26-T&67108863,T+=24,T>=26&&(T-=26,h++);else if(g==="le")for(b=0,h=0;b<u.length;b+=3)S=u[b]|u[b+1]<<8|u[b+2]<<16,this.words[h]|=S<<T&67108863,this.words[h+1]=S>>>26-T&67108863,T+=24,T>=26&&(T-=26,h++);return this.strip()};function a(E,u){var p=E.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function c(E,u,p){var g=a(E,p);return p-1>=u&&(g|=a(E,p-1)<<4),g}s.prototype._parseHex=function(u,p,g){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var h=0,S=0,T;if(g==="be")for(b=u.length-1;b>=p;b-=2)T=c(u,p,b)<<h,this.words[S]|=T&67108863,h>=18?(h-=18,S+=1,this.words[S]|=T>>>26):h+=8;else{var w=u.length-p;for(b=w%2===0?p+1:p;b<u.length;b+=2)T=c(u,p,b)<<h,this.words[S]|=T&67108863,h>=18?(h-=18,S+=1,this.words[S]|=T>>>26):h+=8}this.strip()};function l(E,u,p,g){for(var b=0,h=Math.min(E.length,p),S=u;S<h;S++){var T=E.charCodeAt(S)-48;b*=g,T>=49?b+=T-49+10:T>=17?b+=T-17+10:b+=T}return b}s.prototype._parseBase=function(u,p,g){this.words=[0],this.length=1;for(var b=0,h=1;h<=67108863;h*=p)b++;b--,h=h/p|0;for(var S=u.length-g,T=S%b,w=Math.min(S,S-T)+g,v=0,N=g;N<w;N+=b)v=l(u,N,N+b,p),this.imuln(h),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(T!==0){var ee=1;for(v=l(u,N,u.length,p),N=0;N<T;N++)ee*=p;this.imuln(ee),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,p){u=u||10,p=p|0||1;var g;if(u===16||u==="hex"){g="";for(var b=0,h=0,S=0;S<this.length;S++){var T=this.words[S],w=((T<<b|h)&16777215).toString(16);h=T>>>24-b&16777215,h!==0||S!==this.length-1?g=f[6-w.length]+w+g:g=w+g,b+=2,b>=26&&(b-=26,S--)}for(h!==0&&(g=h.toString(16)+g);g.length%p!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(u===(u|0)&&u>=2&&u<=36){var v=d[u],N=I[u];g="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var Y=ee.modn(N).toString(u);ee=ee.idivn(N),ee.isZero()?g=Y+g:g=f[v-Y.length]+Y+g}for(this.isZero()&&(g="0"+g);g.length%p!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(u,p){return n(typeof o<"u"),this.toArrayLike(o,u,p)},s.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},s.prototype.toArrayLike=function(u,p,g){var b=this.byteLength(),h=g||Math.max(1,b);n(b<=h,"byte array longer than desired length"),n(h>0,"Requested array length <= 0"),this.strip();var S=p==="le",T=new u(h),w,v,N=this.clone();if(S){for(v=0;!N.isZero();v++)w=N.andln(255),N.iushrn(8),T[v]=w;for(;v<h;v++)T[v]=0}else{for(v=0;v<h-b;v++)T[v]=0;for(v=0;!N.isZero();v++)w=N.andln(255),N.iushrn(8),T[h-v-1]=w}return T},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var p=u,g=0;return p>=4096&&(g+=13,p>>>=13),p>=64&&(g+=7,p>>>=7),p>=8&&(g+=4,p>>>=4),p>=2&&(g+=2,p>>>=2),g+p},s.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,g=0;return p&8191||(g+=13,p>>>=13),p&127||(g+=7,p>>>=7),p&15||(g+=4,p>>>=4),p&3||(g+=2,p>>>=2),p&1||g++,g},s.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function P(E){for(var u=new Array(E.bitLength()),p=0;p<u.length;p++){var g=p/26|0,b=p%26;u[p]=(E.words[g]&1<<b)>>>b}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var g=this._zeroBits(this.words[p]);if(u+=g,g!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]&u.words[g];return this.length=p.length,this.strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var p,g;this.length>u.length?(p=this,g=u):(p=u,g=this);for(var b=0;b<g.length;b++)this.words[b]=p.words[b]^g.words[b];if(this!==p)for(;b<p.length;b++)this.words[b]=p.words[b];return this.length=p.length,this.strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,g=u%26;this._expand(p),g>0&&p--;for(var b=0;b<p;b++)this.words[b]=~this.words[b]&67108863;return g>0&&(this.words[b]=~this.words[b]&67108863>>26-g),this.strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,p){n(typeof u=="number"&&u>=0);var g=u/26|0,b=u%26;return this._expand(g+1),p?this.words[g]=this.words[g]|1<<b:this.words[g]=this.words[g]&~(1<<b),this.strip()},s.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var g,b;this.length>u.length?(g=this,b=u):(g=u,b=this);for(var h=0,S=0;S<b.length;S++)p=(g.words[S]|0)+(b.words[S]|0)+h,this.words[S]=p&67108863,h=p>>>26;for(;h!==0&&S<g.length;S++)p=(g.words[S]|0)+h,this.words[S]=p&67108863,h=p>>>26;if(this.length=g.length,h!==0)this.words[this.length]=h,this.length++;else if(g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this},s.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var g=this.cmp(u);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,h;g>0?(b=this,h=u):(b=u,h=this);for(var S=0,T=0;T<h.length;T++)p=(b.words[T]|0)-(h.words[T]|0)+S,S=p>>26,this.words[T]=p&67108863;for(;S!==0&&T<b.length;T++)p=(b.words[T]|0)+S,S=p>>26,this.words[T]=p&67108863;if(S===0&&T<b.length&&b!==this)for(;T<b.length;T++)this.words[T]=b.words[T];return this.length=Math.max(this.length,T),b!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function L(E,u,p){p.negative=u.negative^E.negative;var g=E.length+u.length|0;p.length=g,g=g-1|0;var b=E.words[0]|0,h=u.words[0]|0,S=b*h,T=S&67108863,w=S/67108864|0;p.words[0]=T;for(var v=1;v<g;v++){for(var N=w>>>26,ee=w&67108863,Y=Math.min(v,u.length-1),ne=Math.max(0,v-E.length+1);ne<=Y;ne++){var se=v-ne|0;b=E.words[se]|0,h=u.words[ne]|0,S=b*h+ee,N+=S/67108864|0,ee=S&67108863}p.words[v]=ee|0,w=N|0}return w!==0?p.words[v]=w|0:p.length--,p.strip()}var H=function(u,p,g){var b=u.words,h=p.words,S=g.words,T=0,w,v,N,ee=b[0]|0,Y=ee&8191,ne=ee>>>13,se=b[1]|0,ae=se&8191,W=se>>>13,K=b[2]|0,k=K&8191,m=K>>>13,B=b[3]|0,X=B&8191,Z=B>>>13,ce=b[4]|0,ie=ce&8191,de=ce>>>13,ye=b[5]|0,ue=ye&8191,Ee=ye>>>13,xe=b[6]|0,me=xe&8191,ge=xe>>>13,Oe=b[7]|0,ve=Oe&8191,he=Oe>>>13,Ne=b[8]|0,M=Ne&8191,A=Ne>>>13,R=b[9]|0,D=R&8191,$=R>>>13,Q=h[0]|0,te=Q&8191,le=Q>>>13,Ae=h[1]|0,we=Ae&8191,Se=Ae>>>13,Fe=h[2]|0,gt=Fe&8191,mt=Fe>>>13,go=h[3]|0,At=go&8191,je=go>>>13,Vt=h[4]|0,Ge=Vt&8191,Ve=Vt>>>13,qt=h[5]|0,qe=qt&8191,$e=qt>>>13,$t=h[6]|0,ze=$t&8191,We=$t>>>13,zt=h[7]|0,Xe=zt&8191,Je=zt>>>13,Wt=h[8]|0,Ye=Wt&8191,Qe=Wt>>>13,rp=h[9]|0,kt=rp&8191,Dt=rp>>>13;g.negative=u.negative^p.negative,g.length=19,w=Math.imul(Y,te),v=Math.imul(Y,le),v=v+Math.imul(ne,te)|0,N=Math.imul(ne,le);var rl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(rl>>>26)|0,rl&=67108863,w=Math.imul(ae,te),v=Math.imul(ae,le),v=v+Math.imul(W,te)|0,N=Math.imul(W,le),w=w+Math.imul(Y,we)|0,v=v+Math.imul(Y,Se)|0,v=v+Math.imul(ne,we)|0,N=N+Math.imul(ne,Se)|0;var nl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(nl>>>26)|0,nl&=67108863,w=Math.imul(k,te),v=Math.imul(k,le),v=v+Math.imul(m,te)|0,N=Math.imul(m,le),w=w+Math.imul(ae,we)|0,v=v+Math.imul(ae,Se)|0,v=v+Math.imul(W,we)|0,N=N+Math.imul(W,Se)|0,w=w+Math.imul(Y,gt)|0,v=v+Math.imul(Y,mt)|0,v=v+Math.imul(ne,gt)|0,N=N+Math.imul(ne,mt)|0;var il=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(il>>>26)|0,il&=67108863,w=Math.imul(X,te),v=Math.imul(X,le),v=v+Math.imul(Z,te)|0,N=Math.imul(Z,le),w=w+Math.imul(k,we)|0,v=v+Math.imul(k,Se)|0,v=v+Math.imul(m,we)|0,N=N+Math.imul(m,Se)|0,w=w+Math.imul(ae,gt)|0,v=v+Math.imul(ae,mt)|0,v=v+Math.imul(W,gt)|0,N=N+Math.imul(W,mt)|0,w=w+Math.imul(Y,At)|0,v=v+Math.imul(Y,je)|0,v=v+Math.imul(ne,At)|0,N=N+Math.imul(ne,je)|0;var sl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(sl>>>26)|0,sl&=67108863,w=Math.imul(ie,te),v=Math.imul(ie,le),v=v+Math.imul(de,te)|0,N=Math.imul(de,le),w=w+Math.imul(X,we)|0,v=v+Math.imul(X,Se)|0,v=v+Math.imul(Z,we)|0,N=N+Math.imul(Z,Se)|0,w=w+Math.imul(k,gt)|0,v=v+Math.imul(k,mt)|0,v=v+Math.imul(m,gt)|0,N=N+Math.imul(m,mt)|0,w=w+Math.imul(ae,At)|0,v=v+Math.imul(ae,je)|0,v=v+Math.imul(W,At)|0,N=N+Math.imul(W,je)|0,w=w+Math.imul(Y,Ge)|0,v=v+Math.imul(Y,Ve)|0,v=v+Math.imul(ne,Ge)|0,N=N+Math.imul(ne,Ve)|0;var ol=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ol>>>26)|0,ol&=67108863,w=Math.imul(ue,te),v=Math.imul(ue,le),v=v+Math.imul(Ee,te)|0,N=Math.imul(Ee,le),w=w+Math.imul(ie,we)|0,v=v+Math.imul(ie,Se)|0,v=v+Math.imul(de,we)|0,N=N+Math.imul(de,Se)|0,w=w+Math.imul(X,gt)|0,v=v+Math.imul(X,mt)|0,v=v+Math.imul(Z,gt)|0,N=N+Math.imul(Z,mt)|0,w=w+Math.imul(k,At)|0,v=v+Math.imul(k,je)|0,v=v+Math.imul(m,At)|0,N=N+Math.imul(m,je)|0,w=w+Math.imul(ae,Ge)|0,v=v+Math.imul(ae,Ve)|0,v=v+Math.imul(W,Ge)|0,N=N+Math.imul(W,Ve)|0,w=w+Math.imul(Y,qe)|0,v=v+Math.imul(Y,$e)|0,v=v+Math.imul(ne,qe)|0,N=N+Math.imul(ne,$e)|0;var al=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(al>>>26)|0,al&=67108863,w=Math.imul(me,te),v=Math.imul(me,le),v=v+Math.imul(ge,te)|0,N=Math.imul(ge,le),w=w+Math.imul(ue,we)|0,v=v+Math.imul(ue,Se)|0,v=v+Math.imul(Ee,we)|0,N=N+Math.imul(Ee,Se)|0,w=w+Math.imul(ie,gt)|0,v=v+Math.imul(ie,mt)|0,v=v+Math.imul(de,gt)|0,N=N+Math.imul(de,mt)|0,w=w+Math.imul(X,At)|0,v=v+Math.imul(X,je)|0,v=v+Math.imul(Z,At)|0,N=N+Math.imul(Z,je)|0,w=w+Math.imul(k,Ge)|0,v=v+Math.imul(k,Ve)|0,v=v+Math.imul(m,Ge)|0,N=N+Math.imul(m,Ve)|0,w=w+Math.imul(ae,qe)|0,v=v+Math.imul(ae,$e)|0,v=v+Math.imul(W,qe)|0,N=N+Math.imul(W,$e)|0,w=w+Math.imul(Y,ze)|0,v=v+Math.imul(Y,We)|0,v=v+Math.imul(ne,ze)|0,N=N+Math.imul(ne,We)|0;var cl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(cl>>>26)|0,cl&=67108863,w=Math.imul(ve,te),v=Math.imul(ve,le),v=v+Math.imul(he,te)|0,N=Math.imul(he,le),w=w+Math.imul(me,we)|0,v=v+Math.imul(me,Se)|0,v=v+Math.imul(ge,we)|0,N=N+Math.imul(ge,Se)|0,w=w+Math.imul(ue,gt)|0,v=v+Math.imul(ue,mt)|0,v=v+Math.imul(Ee,gt)|0,N=N+Math.imul(Ee,mt)|0,w=w+Math.imul(ie,At)|0,v=v+Math.imul(ie,je)|0,v=v+Math.imul(de,At)|0,N=N+Math.imul(de,je)|0,w=w+Math.imul(X,Ge)|0,v=v+Math.imul(X,Ve)|0,v=v+Math.imul(Z,Ge)|0,N=N+Math.imul(Z,Ve)|0,w=w+Math.imul(k,qe)|0,v=v+Math.imul(k,$e)|0,v=v+Math.imul(m,qe)|0,N=N+Math.imul(m,$e)|0,w=w+Math.imul(ae,ze)|0,v=v+Math.imul(ae,We)|0,v=v+Math.imul(W,ze)|0,N=N+Math.imul(W,We)|0,w=w+Math.imul(Y,Xe)|0,v=v+Math.imul(Y,Je)|0,v=v+Math.imul(ne,Xe)|0,N=N+Math.imul(ne,Je)|0;var fl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(fl>>>26)|0,fl&=67108863,w=Math.imul(M,te),v=Math.imul(M,le),v=v+Math.imul(A,te)|0,N=Math.imul(A,le),w=w+Math.imul(ve,we)|0,v=v+Math.imul(ve,Se)|0,v=v+Math.imul(he,we)|0,N=N+Math.imul(he,Se)|0,w=w+Math.imul(me,gt)|0,v=v+Math.imul(me,mt)|0,v=v+Math.imul(ge,gt)|0,N=N+Math.imul(ge,mt)|0,w=w+Math.imul(ue,At)|0,v=v+Math.imul(ue,je)|0,v=v+Math.imul(Ee,At)|0,N=N+Math.imul(Ee,je)|0,w=w+Math.imul(ie,Ge)|0,v=v+Math.imul(ie,Ve)|0,v=v+Math.imul(de,Ge)|0,N=N+Math.imul(de,Ve)|0,w=w+Math.imul(X,qe)|0,v=v+Math.imul(X,$e)|0,v=v+Math.imul(Z,qe)|0,N=N+Math.imul(Z,$e)|0,w=w+Math.imul(k,ze)|0,v=v+Math.imul(k,We)|0,v=v+Math.imul(m,ze)|0,N=N+Math.imul(m,We)|0,w=w+Math.imul(ae,Xe)|0,v=v+Math.imul(ae,Je)|0,v=v+Math.imul(W,Xe)|0,N=N+Math.imul(W,Je)|0,w=w+Math.imul(Y,Ye)|0,v=v+Math.imul(Y,Qe)|0,v=v+Math.imul(ne,Ye)|0,N=N+Math.imul(ne,Qe)|0;var ul=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ul>>>26)|0,ul&=67108863,w=Math.imul(D,te),v=Math.imul(D,le),v=v+Math.imul($,te)|0,N=Math.imul($,le),w=w+Math.imul(M,we)|0,v=v+Math.imul(M,Se)|0,v=v+Math.imul(A,we)|0,N=N+Math.imul(A,Se)|0,w=w+Math.imul(ve,gt)|0,v=v+Math.imul(ve,mt)|0,v=v+Math.imul(he,gt)|0,N=N+Math.imul(he,mt)|0,w=w+Math.imul(me,At)|0,v=v+Math.imul(me,je)|0,v=v+Math.imul(ge,At)|0,N=N+Math.imul(ge,je)|0,w=w+Math.imul(ue,Ge)|0,v=v+Math.imul(ue,Ve)|0,v=v+Math.imul(Ee,Ge)|0,N=N+Math.imul(Ee,Ve)|0,w=w+Math.imul(ie,qe)|0,v=v+Math.imul(ie,$e)|0,v=v+Math.imul(de,qe)|0,N=N+Math.imul(de,$e)|0,w=w+Math.imul(X,ze)|0,v=v+Math.imul(X,We)|0,v=v+Math.imul(Z,ze)|0,N=N+Math.imul(Z,We)|0,w=w+Math.imul(k,Xe)|0,v=v+Math.imul(k,Je)|0,v=v+Math.imul(m,Xe)|0,N=N+Math.imul(m,Je)|0,w=w+Math.imul(ae,Ye)|0,v=v+Math.imul(ae,Qe)|0,v=v+Math.imul(W,Ye)|0,N=N+Math.imul(W,Qe)|0,w=w+Math.imul(Y,kt)|0,v=v+Math.imul(Y,Dt)|0,v=v+Math.imul(ne,kt)|0,N=N+Math.imul(ne,Dt)|0;var ll=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ll>>>26)|0,ll&=67108863,w=Math.imul(D,we),v=Math.imul(D,Se),v=v+Math.imul($,we)|0,N=Math.imul($,Se),w=w+Math.imul(M,gt)|0,v=v+Math.imul(M,mt)|0,v=v+Math.imul(A,gt)|0,N=N+Math.imul(A,mt)|0,w=w+Math.imul(ve,At)|0,v=v+Math.imul(ve,je)|0,v=v+Math.imul(he,At)|0,N=N+Math.imul(he,je)|0,w=w+Math.imul(me,Ge)|0,v=v+Math.imul(me,Ve)|0,v=v+Math.imul(ge,Ge)|0,N=N+Math.imul(ge,Ve)|0,w=w+Math.imul(ue,qe)|0,v=v+Math.imul(ue,$e)|0,v=v+Math.imul(Ee,qe)|0,N=N+Math.imul(Ee,$e)|0,w=w+Math.imul(ie,ze)|0,v=v+Math.imul(ie,We)|0,v=v+Math.imul(de,ze)|0,N=N+Math.imul(de,We)|0,w=w+Math.imul(X,Xe)|0,v=v+Math.imul(X,Je)|0,v=v+Math.imul(Z,Xe)|0,N=N+Math.imul(Z,Je)|0,w=w+Math.imul(k,Ye)|0,v=v+Math.imul(k,Qe)|0,v=v+Math.imul(m,Ye)|0,N=N+Math.imul(m,Qe)|0,w=w+Math.imul(ae,kt)|0,v=v+Math.imul(ae,Dt)|0,v=v+Math.imul(W,kt)|0,N=N+Math.imul(W,Dt)|0;var dl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(dl>>>26)|0,dl&=67108863,w=Math.imul(D,gt),v=Math.imul(D,mt),v=v+Math.imul($,gt)|0,N=Math.imul($,mt),w=w+Math.imul(M,At)|0,v=v+Math.imul(M,je)|0,v=v+Math.imul(A,At)|0,N=N+Math.imul(A,je)|0,w=w+Math.imul(ve,Ge)|0,v=v+Math.imul(ve,Ve)|0,v=v+Math.imul(he,Ge)|0,N=N+Math.imul(he,Ve)|0,w=w+Math.imul(me,qe)|0,v=v+Math.imul(me,$e)|0,v=v+Math.imul(ge,qe)|0,N=N+Math.imul(ge,$e)|0,w=w+Math.imul(ue,ze)|0,v=v+Math.imul(ue,We)|0,v=v+Math.imul(Ee,ze)|0,N=N+Math.imul(Ee,We)|0,w=w+Math.imul(ie,Xe)|0,v=v+Math.imul(ie,Je)|0,v=v+Math.imul(de,Xe)|0,N=N+Math.imul(de,Je)|0,w=w+Math.imul(X,Ye)|0,v=v+Math.imul(X,Qe)|0,v=v+Math.imul(Z,Ye)|0,N=N+Math.imul(Z,Qe)|0,w=w+Math.imul(k,kt)|0,v=v+Math.imul(k,Dt)|0,v=v+Math.imul(m,kt)|0,N=N+Math.imul(m,Dt)|0;var hl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(hl>>>26)|0,hl&=67108863,w=Math.imul(D,At),v=Math.imul(D,je),v=v+Math.imul($,At)|0,N=Math.imul($,je),w=w+Math.imul(M,Ge)|0,v=v+Math.imul(M,Ve)|0,v=v+Math.imul(A,Ge)|0,N=N+Math.imul(A,Ve)|0,w=w+Math.imul(ve,qe)|0,v=v+Math.imul(ve,$e)|0,v=v+Math.imul(he,qe)|0,N=N+Math.imul(he,$e)|0,w=w+Math.imul(me,ze)|0,v=v+Math.imul(me,We)|0,v=v+Math.imul(ge,ze)|0,N=N+Math.imul(ge,We)|0,w=w+Math.imul(ue,Xe)|0,v=v+Math.imul(ue,Je)|0,v=v+Math.imul(Ee,Xe)|0,N=N+Math.imul(Ee,Je)|0,w=w+Math.imul(ie,Ye)|0,v=v+Math.imul(ie,Qe)|0,v=v+Math.imul(de,Ye)|0,N=N+Math.imul(de,Qe)|0,w=w+Math.imul(X,kt)|0,v=v+Math.imul(X,Dt)|0,v=v+Math.imul(Z,kt)|0,N=N+Math.imul(Z,Dt)|0;var pl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(pl>>>26)|0,pl&=67108863,w=Math.imul(D,Ge),v=Math.imul(D,Ve),v=v+Math.imul($,Ge)|0,N=Math.imul($,Ve),w=w+Math.imul(M,qe)|0,v=v+Math.imul(M,$e)|0,v=v+Math.imul(A,qe)|0,N=N+Math.imul(A,$e)|0,w=w+Math.imul(ve,ze)|0,v=v+Math.imul(ve,We)|0,v=v+Math.imul(he,ze)|0,N=N+Math.imul(he,We)|0,w=w+Math.imul(me,Xe)|0,v=v+Math.imul(me,Je)|0,v=v+Math.imul(ge,Xe)|0,N=N+Math.imul(ge,Je)|0,w=w+Math.imul(ue,Ye)|0,v=v+Math.imul(ue,Qe)|0,v=v+Math.imul(Ee,Ye)|0,N=N+Math.imul(Ee,Qe)|0,w=w+Math.imul(ie,kt)|0,v=v+Math.imul(ie,Dt)|0,v=v+Math.imul(de,kt)|0,N=N+Math.imul(de,Dt)|0;var gl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(gl>>>26)|0,gl&=67108863,w=Math.imul(D,qe),v=Math.imul(D,$e),v=v+Math.imul($,qe)|0,N=Math.imul($,$e),w=w+Math.imul(M,ze)|0,v=v+Math.imul(M,We)|0,v=v+Math.imul(A,ze)|0,N=N+Math.imul(A,We)|0,w=w+Math.imul(ve,Xe)|0,v=v+Math.imul(ve,Je)|0,v=v+Math.imul(he,Xe)|0,N=N+Math.imul(he,Je)|0,w=w+Math.imul(me,Ye)|0,v=v+Math.imul(me,Qe)|0,v=v+Math.imul(ge,Ye)|0,N=N+Math.imul(ge,Qe)|0,w=w+Math.imul(ue,kt)|0,v=v+Math.imul(ue,Dt)|0,v=v+Math.imul(Ee,kt)|0,N=N+Math.imul(Ee,Dt)|0;var bl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(bl>>>26)|0,bl&=67108863,w=Math.imul(D,ze),v=Math.imul(D,We),v=v+Math.imul($,ze)|0,N=Math.imul($,We),w=w+Math.imul(M,Xe)|0,v=v+Math.imul(M,Je)|0,v=v+Math.imul(A,Xe)|0,N=N+Math.imul(A,Je)|0,w=w+Math.imul(ve,Ye)|0,v=v+Math.imul(ve,Qe)|0,v=v+Math.imul(he,Ye)|0,N=N+Math.imul(he,Qe)|0,w=w+Math.imul(me,kt)|0,v=v+Math.imul(me,Dt)|0,v=v+Math.imul(ge,kt)|0,N=N+Math.imul(ge,Dt)|0;var vl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(vl>>>26)|0,vl&=67108863,w=Math.imul(D,Xe),v=Math.imul(D,Je),v=v+Math.imul($,Xe)|0,N=Math.imul($,Je),w=w+Math.imul(M,Ye)|0,v=v+Math.imul(M,Qe)|0,v=v+Math.imul(A,Ye)|0,N=N+Math.imul(A,Qe)|0,w=w+Math.imul(ve,kt)|0,v=v+Math.imul(ve,Dt)|0,v=v+Math.imul(he,kt)|0,N=N+Math.imul(he,Dt)|0;var ml=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(ml>>>26)|0,ml&=67108863,w=Math.imul(D,Ye),v=Math.imul(D,Qe),v=v+Math.imul($,Ye)|0,N=Math.imul($,Qe),w=w+Math.imul(M,kt)|0,v=v+Math.imul(M,Dt)|0,v=v+Math.imul(A,kt)|0,N=N+Math.imul(A,Dt)|0;var yl=(T+w|0)+((v&8191)<<13)|0;T=(N+(v>>>13)|0)+(yl>>>26)|0,yl&=67108863,w=Math.imul(D,kt),v=Math.imul(D,Dt),v=v+Math.imul($,kt)|0,N=Math.imul($,Dt);var El=(T+w|0)+((v&8191)<<13)|0;return T=(N+(v>>>13)|0)+(El>>>26)|0,El&=67108863,S[0]=rl,S[1]=nl,S[2]=il,S[3]=sl,S[4]=ol,S[5]=al,S[6]=cl,S[7]=fl,S[8]=ul,S[9]=ll,S[10]=dl,S[11]=hl,S[12]=pl,S[13]=gl,S[14]=bl,S[15]=vl,S[16]=ml,S[17]=yl,S[18]=El,T!==0&&(S[19]=T,g.length++),g};Math.imul||(H=L);function q(E,u,p){p.negative=u.negative^E.negative,p.length=E.length+u.length;for(var g=0,b=0,h=0;h<p.length-1;h++){var S=b;b=0;for(var T=g&67108863,w=Math.min(h,u.length-1),v=Math.max(0,h-E.length+1);v<=w;v++){var N=h-v,ee=E.words[N]|0,Y=u.words[v]|0,ne=ee*Y,se=ne&67108863;S=S+(ne/67108864|0)|0,se=se+T|0,T=se&67108863,S=S+(se>>>26)|0,b+=S>>>26,S&=67108863}p.words[h]=T,g=S,S=b}return g!==0?p.words[h]=g:p.length--,p.strip()}function G(E,u,p){var g=new C;return g.mulp(E,u,p)}s.prototype.mulTo=function(u,p){var g,b=this.length+u.length;return this.length===10&&u.length===10?g=H(this,u,p):b<63?g=L(this,u,p):b<1024?g=q(this,u,p):g=G(this,u,p),g};function C(E,u){this.x=E,this.y=u}C.prototype.makeRBT=function(u){for(var p=new Array(u),g=s.prototype._countBits(u)-1,b=0;b<u;b++)p[b]=this.revBin(b,g,u);return p},C.prototype.revBin=function(u,p,g){if(u===0||u===g-1)return u;for(var b=0,h=0;h<p;h++)b|=(u&1)<<p-h-1,u>>=1;return b},C.prototype.permute=function(u,p,g,b,h,S){for(var T=0;T<S;T++)b[T]=p[u[T]],h[T]=g[u[T]]},C.prototype.transform=function(u,p,g,b,h,S){this.permute(S,u,p,g,b,h);for(var T=1;T<h;T<<=1)for(var w=T<<1,v=Math.cos(2*Math.PI/w),N=Math.sin(2*Math.PI/w),ee=0;ee<h;ee+=w)for(var Y=v,ne=N,se=0;se<T;se++){var ae=g[ee+se],W=b[ee+se],K=g[ee+se+T],k=b[ee+se+T],m=Y*K-ne*k;k=Y*k+ne*K,K=m,g[ee+se]=ae+K,b[ee+se]=W+k,g[ee+se+T]=ae-K,b[ee+se+T]=W-k,se!==w&&(m=v*Y-N*ne,ne=v*ne+N*Y,Y=m)}},C.prototype.guessLen13b=function(u,p){var g=Math.max(p,u)|1,b=g&1,h=0;for(g=g/2|0;g;g=g>>>1)h++;return 1<<h+1+b},C.prototype.conjugate=function(u,p,g){if(!(g<=1))for(var b=0;b<g/2;b++){var h=u[b];u[b]=u[g-b-1],u[g-b-1]=h,h=p[b],p[b]=-p[g-b-1],p[g-b-1]=-h}},C.prototype.normalize13b=function(u,p){for(var g=0,b=0;b<p/2;b++){var h=Math.round(u[2*b+1]/p)*8192+Math.round(u[2*b]/p)+g;u[b]=h&67108863,h<67108864?g=0:g=h/67108864|0}return u},C.prototype.convert13b=function(u,p,g,b){for(var h=0,S=0;S<p;S++)h=h+(u[S]|0),g[2*S]=h&8191,h=h>>>13,g[2*S+1]=h&8191,h=h>>>13;for(S=2*p;S<b;++S)g[S]=0;n(h===0),n((h&-8192)===0)},C.prototype.stub=function(u){for(var p=new Array(u),g=0;g<u;g++)p[g]=0;return p},C.prototype.mulp=function(u,p,g){var b=2*this.guessLen13b(u.length,p.length),h=this.makeRBT(b),S=this.stub(b),T=new Array(b),w=new Array(b),v=new Array(b),N=new Array(b),ee=new Array(b),Y=new Array(b),ne=g.words;ne.length=b,this.convert13b(u.words,u.length,T,b),this.convert13b(p.words,p.length,N,b),this.transform(T,S,w,v,b,h),this.transform(N,S,ee,Y,b,h);for(var se=0;se<b;se++){var ae=w[se]*ee[se]-v[se]*Y[se];v[se]=w[se]*Y[se]+v[se]*ee[se],w[se]=ae}return this.conjugate(w,v,b),this.transform(w,v,ne,S,b,h),this.conjugate(ne,S,b),this.normalize13b(ne,b),g.negative=u.negative^p.negative,g.length=u.length+p.length,g.strip()},s.prototype.mul=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},s.prototype.mulf=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),G(this,u,p)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){n(typeof u=="number"),n(u<67108864);for(var p=0,g=0;g<this.length;g++){var b=(this.words[g]|0)*u,h=(b&67108863)+(p&67108863);p>>=26,p+=b/67108864|0,p+=h>>>26,this.words[g]=h&67108863}return p!==0&&(this.words[g]=p,this.length++),this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var p=P(u);if(p.length===0)return new s(1);for(var g=this,b=0;b<p.length&&p[b]===0;b++,g=g.sqr());if(++b<p.length)for(var h=g.sqr();b<p.length;b++,h=h.sqr())p[b]!==0&&(g=g.mul(h));return g},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var p=u%26,g=(u-p)/26,b=67108863>>>26-p<<26-p,h;if(p!==0){var S=0;for(h=0;h<this.length;h++){var T=this.words[h]&b,w=(this.words[h]|0)-T<<p;this.words[h]=w|S,S=T>>>26-p}S&&(this.words[h]=S,this.length++)}if(g!==0){for(h=this.length-1;h>=0;h--)this.words[h+g]=this.words[h];for(h=0;h<g;h++)this.words[h]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,p,g){n(typeof u=="number"&&u>=0);var b;p?b=(p-p%26)/26:b=0;var h=u%26,S=Math.min((u-h)/26,this.length),T=67108863^67108863>>>h<<h,w=g;if(b-=S,b=Math.max(0,b),w){for(var v=0;v<S;v++)w.words[v]=this.words[v];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,v=0;v<this.length;v++)this.words[v]=this.words[v+S];else this.words[0]=0,this.length=1;var N=0;for(v=this.length-1;v>=0&&(N!==0||v>=b);v--){var ee=this.words[v]|0;this.words[v]=N<<26-h|ee>>>h,N=ee&T}return w&&N!==0&&(w.words[w.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(u,p,g){return n(this.negative===0),this.iushrn(u,p,g)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,g=(u-p)/26,b=1<<p;if(this.length<=g)return!1;var h=this.words[g];return!!(h&b)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,g=(u-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(p!==0&&g++,this.length=Math.min(g,this.length),p!==0){var b=67108863^67108863>>>p<<p;this.words[this.length-1]&=b}return this.strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,p,g){var b=u.length+g,h;this._expand(b);var S,T=0;for(h=0;h<u.length;h++){S=(this.words[h+g]|0)+T;var w=(u.words[h]|0)*p;S-=w&67108863,T=(S>>26)-(w/67108864|0),this.words[h+g]=S&67108863}for(;h<this.length-g;h++)S=(this.words[h+g]|0)+T,T=S>>26,this.words[h+g]=S&67108863;if(T===0)return this.strip();for(n(T===-1),T=0,h=0;h<this.length;h++)S=-(this.words[h]|0)+T,T=S>>26,this.words[h]=S&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(u,p){var g=this.length-u.length,b=this.clone(),h=u,S=h.words[h.length-1]|0,T=this._countBits(S);g=26-T,g!==0&&(h=h.ushln(g),b.iushln(g),S=h.words[h.length-1]|0);var w=b.length-h.length,v;if(p!=="mod"){v=new s(null),v.length=w+1,v.words=new Array(v.length);for(var N=0;N<v.length;N++)v.words[N]=0}var ee=b.clone()._ishlnsubmul(h,1,w);ee.negative===0&&(b=ee,v&&(v.words[w]=1));for(var Y=w-1;Y>=0;Y--){var ne=(b.words[h.length+Y]|0)*67108864+(b.words[h.length+Y-1]|0);for(ne=Math.min(ne/S|0,67108863),b._ishlnsubmul(h,ne,Y);b.negative!==0;)ne--,b.negative=0,b._ishlnsubmul(h,1,Y),b.isZero()||(b.negative^=1);v&&(v.words[Y]=ne)}return v&&v.strip(),b.strip(),p!=="div"&&g!==0&&b.iushrn(g),{div:v||null,mod:b}},s.prototype.divmod=function(u,p,g){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var b,h,S;return this.negative!==0&&u.negative===0?(S=this.neg().divmod(u,p),p!=="mod"&&(b=S.div.neg()),p!=="div"&&(h=S.mod.neg(),g&&h.negative!==0&&h.iadd(u)),{div:b,mod:h}):this.negative===0&&u.negative!==0?(S=this.divmod(u.neg(),p),p!=="mod"&&(b=S.div.neg()),{div:b,mod:S.mod}):this.negative&u.negative?(S=this.neg().divmod(u.neg(),p),p!=="div"&&(h=S.mod.neg(),g&&h.negative!==0&&h.isub(u)),{div:S.div,mod:h}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modn(u.words[0]))}:this._wordDiv(u,p)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var g=p.div.negative!==0?p.mod.isub(u):p.mod,b=u.ushrn(1),h=u.andln(1),S=g.cmp(b);return S<0||h===1&&S===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modn=function(u){n(u<=67108863);for(var p=(1<<26)%u,g=0,b=this.length-1;b>=0;b--)g=(p*g+(this.words[b]|0))%u;return g},s.prototype.idivn=function(u){n(u<=67108863);for(var p=0,g=this.length-1;g>=0;g--){var b=(this.words[g]|0)+p*67108864;this.words[g]=b/u|0,p=b%u}return this.strip()},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var p=this,g=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var b=new s(1),h=new s(0),S=new s(0),T=new s(1),w=0;p.isEven()&&g.isEven();)p.iushrn(1),g.iushrn(1),++w;for(var v=g.clone(),N=p.clone();!p.isZero();){for(var ee=0,Y=1;!(p.words[0]&Y)&&ee<26;++ee,Y<<=1);if(ee>0)for(p.iushrn(ee);ee-- >0;)(b.isOdd()||h.isOdd())&&(b.iadd(v),h.isub(N)),b.iushrn(1),h.iushrn(1);for(var ne=0,se=1;!(g.words[0]&se)&&ne<26;++ne,se<<=1);if(ne>0)for(g.iushrn(ne);ne-- >0;)(S.isOdd()||T.isOdd())&&(S.iadd(v),T.isub(N)),S.iushrn(1),T.iushrn(1);p.cmp(g)>=0?(p.isub(g),b.isub(S),h.isub(T)):(g.isub(p),S.isub(b),T.isub(h))}return{a:S,b:T,gcd:g.iushln(w)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var p=this,g=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var b=new s(1),h=new s(0),S=g.clone();p.cmpn(1)>0&&g.cmpn(1)>0;){for(var T=0,w=1;!(p.words[0]&w)&&T<26;++T,w<<=1);if(T>0)for(p.iushrn(T);T-- >0;)b.isOdd()&&b.iadd(S),b.iushrn(1);for(var v=0,N=1;!(g.words[0]&N)&&v<26;++v,N<<=1);if(v>0)for(g.iushrn(v);v-- >0;)h.isOdd()&&h.iadd(S),h.iushrn(1);p.cmp(g)>=0?(p.isub(g),b.isub(h)):(g.isub(p),h.isub(b))}var ee;return p.cmpn(1)===0?ee=b:ee=h,ee.cmpn(0)<0&&ee.iadd(u),ee},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),g=u.clone();p.negative=0,g.negative=0;for(var b=0;p.isEven()&&g.isEven();b++)p.iushrn(1),g.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;g.isEven();)g.iushrn(1);var h=p.cmp(g);if(h<0){var S=p;p=g,g=S}else if(h===0||g.cmpn(1)===0)break;p.isub(g)}while(!0);return g.iushln(b)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var p=u%26,g=(u-p)/26,b=1<<p;if(this.length<=g)return this._expand(g+1),this.words[g]|=b,this;for(var h=b,S=g;h!==0&&S<this.length;S++){var T=this.words[S]|0;T+=h,h=T>>>26,T&=67108863,this.words[S]=T}return h!==0&&(this.words[S]=h,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var g;if(this.length>1)g=1;else{p&&(u=-u),n(u<=67108863,"Number is too big");var b=this.words[0]|0;g=b===u?0:b<u?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,g=this.length-1;g>=0;g--){var b=this.words[g]|0,h=u.words[g]|0;if(b!==h){b<h?p=-1:b>h&&(p=1);break}}return p},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new O(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var V={k256:null,p224:null,p192:null,p25519:null};function U(E,u){this.name=E,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},U.prototype.ireduce=function(u){var p=u,g;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),g=p.bitLength();while(g>this.n);var b=g<this.n?-1:p.ucmp(this.p);return b===0?(p.words[0]=0,p.length=1):b>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},U.prototype.split=function(u,p){u.iushrn(this.n,0,p)},U.prototype.imulK=function(u){return u.imul(this.k)};function F(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,U),F.prototype.split=function(u,p){for(var g=4194303,b=Math.min(u.length,9),h=0;h<b;h++)p.words[h]=u.words[h];if(p.length=b,u.length<=9){u.words[0]=0,u.length=1;return}var S=u.words[9];for(p.words[p.length++]=S&g,h=10;h<u.length;h++){var T=u.words[h]|0;u.words[h-10]=(T&g)<<4|S>>>22,S=T}S>>>=22,u.words[h-10]=S,S===0&&u.length>10?u.length-=10:u.length-=9},F.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,g=0;g<u.length;g++){var b=u.words[g]|0;p+=b*977,u.words[g]=p&67108863,p=b*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function j(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(j,U);function y(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(y,U);function _(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(_,U),_.prototype.imulK=function(u){for(var p=0,g=0;g<u.length;g++){var b=(u.words[g]|0)*19+p,h=b&67108863;b>>>=26,u.words[g]=h,p=b}return p!==0&&(u.words[u.length++]=p),u},s._prime=function(u){if(V[u])return V[u];var p;if(u==="k256")p=new F;else if(u==="p224")p=new j;else if(u==="p192")p=new y;else if(u==="p25519")p=new _;else throw new Error("Unknown prime "+u);return V[u]=p,p};function O(E){if(typeof E=="string"){var u=s._prime(E);this.m=u.p,this.prime=u}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}O.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},O.prototype._verify2=function(u,p){n((u.negative|p.negative)===0,"red works only with positives"),n(u.red&&u.red===p.red,"red works only with red numbers")},O.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},O.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},O.prototype.add=function(u,p){this._verify2(u,p);var g=u.add(p);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},O.prototype.iadd=function(u,p){this._verify2(u,p);var g=u.iadd(p);return g.cmp(this.m)>=0&&g.isub(this.m),g},O.prototype.sub=function(u,p){this._verify2(u,p);var g=u.sub(p);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},O.prototype.isub=function(u,p){this._verify2(u,p);var g=u.isub(p);return g.cmpn(0)<0&&g.iadd(this.m),g},O.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},O.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},O.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},O.prototype.isqr=function(u){return this.imul(u,u.clone())},O.prototype.sqr=function(u){return this.mul(u,u)},O.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(u,g)}for(var b=this.m.subn(1),h=0;!b.isZero()&&b.andln(1)===0;)h++,b.iushrn(1);n(!b.isZero());var S=new s(1).toRed(this),T=S.redNeg(),w=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,w).cmp(T)!==0;)v.redIAdd(T);for(var N=this.pow(v,b),ee=this.pow(u,b.addn(1).iushrn(1)),Y=this.pow(u,b),ne=h;Y.cmp(S)!==0;){for(var se=Y,ae=0;se.cmp(S)!==0;ae++)se=se.redSqr();n(ae<ne);var W=this.pow(N,new s(1).iushln(ne-ae-1));ee=ee.redMul(W),N=W.redSqr(),Y=Y.redMul(N),ne=ae}return ee},O.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},O.prototype.pow=function(u,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var g=4,b=new Array(1<<g);b[0]=new s(1).toRed(this),b[1]=u;for(var h=2;h<b.length;h++)b[h]=this.mul(b[h-1],u);var S=b[0],T=0,w=0,v=p.bitLength()%26;for(v===0&&(v=26),h=p.length-1;h>=0;h--){for(var N=p.words[h],ee=v-1;ee>=0;ee--){var Y=N>>ee&1;if(S!==b[0]&&(S=this.sqr(S)),Y===0&&T===0){w=0;continue}T<<=1,T|=Y,w++,!(w!==g&&(h!==0||ee!==0))&&(S=this.mul(S,b[T]),w=0,T=0)}v=26}return S},O.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},O.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},s.mont=function(u){return new x(u)};function x(E){O.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(x,O),x.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},x.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},x.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var g=u.imul(p),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=g.isub(b).iushrn(this.shift),S=h;return h.cmp(this.m)>=0?S=h.isub(this.m):h.cmpn(0)<0&&(S=h.iadd(this.m)),S._forceRed(this)},x.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new s(0)._forceRed(this);var g=u.mul(p),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=g.isub(b).iushrn(this.shift),S=h;return h.cmp(this.m)>=0?S=h.isub(this.m):h.cmpn(0)<0&&(S=h.iadd(this.m)),S._forceRed(this)},x.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,Ua)})(F5);var fo=Vv;function Vv(t,e){if(!t)throw new Error(e||"Assertion failed")}Vv.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Zh={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),f=l>>8,d=l&255;f?a.push(f,d):a.push(d)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(Zh);(function(t){var e=t,r=Tn,n=fo,i=Zh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,d,I){var P=new Array(Math.max(f.bitLength(),I)+1);P.fill(0);for(var L=1<<d+1,H=f.clone(),q=0;q<P.length;q++){var G,C=H.andln(L-1);H.isOdd()?(C>(L>>1)-1?G=(L>>1)-C:G=C,H.isubn(G)):G=0,P[q]=G,H.iushrn(1)}return P}e.getNAF=s;function o(f,d){var I=[[],[]];f=f.clone(),d=d.clone();for(var P=0,L=0,H;f.cmpn(-P)>0||d.cmpn(-L)>0;){var q=f.andln(3)+P&3,G=d.andln(3)+L&3;q===3&&(q=-1),G===3&&(G=-1);var C;q&1?(H=f.andln(7)+P&7,(H===3||H===5)&&G===2?C=-q:C=q):C=0,I[0].push(C);var V;G&1?(H=d.andln(7)+L&7,(H===3||H===5)&&q===2?V=-G:V=G):V=0,I[1].push(V),2*P===C+1&&(P=1-P),2*L===V+1&&(L=1-L),f.iushrn(1),d.iushrn(1)}return I}e.getJSF=o;function a(f,d,I){var P="_"+d;f.prototype[d]=function(){return this[P]!==void 0?this[P]:this[P]=I.call(this)}}e.cachedProperty=a;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function l(f){return new r(f,"hex","le")}e.intFromLE=l})(en);var nc={},j5={get exports(){return nc},set exports(t){nc=t}},rd;j5.exports=function(e){return rd||(rd=new gs(null)),rd.generate(e)};function gs(t){this.rand=t}nc.Rand=gs;gs.prototype.generate=function(e){return this._rand(e)};gs.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?gs.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?gs.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(gs.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var c1=vc;if(typeof c1.randomBytes!="function")throw new Error("Not supported");gs.prototype._rand=function(e){return c1.randomBytes(e)}}catch{}var e0={},Bs=Tn,Rc=en,Mf=Rc.getNAF,G5=Rc.getJSF,Lf=Rc.assert;function Ns(t,e){this.type=t,this.p=new Bs(e.p,16),this.red=e.prime?Bs.red(e.prime):Bs.mont(this.p),this.zero=new Bs(0).toRed(this.red),this.one=new Bs(1).toRed(this.red),this.two=new Bs(2).toRed(this.red),this.n=e.n&&new Bs(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Nu=Ns;Ns.prototype.point=function(){throw new Error("Not implemented")};Ns.prototype.validate=function(){throw new Error("Not implemented")};Ns.prototype._fixedNafMul=function(e,r){Lf(e.precomputed);var n=e._getDoubles(),i=Mf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),I=s;I>0;I--){for(a=0;a<o.length;a++)c=o[a],c===I?d=d.mixedAdd(n.points[a]):c===-I&&(d=d.mixedAdd(n.points[a].neg()));f=f.add(d)}return f.toP()};Ns.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Mf(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var f=o[c];Lf(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};Ns.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,f,d,I;for(f=0;f<i;f++){I=r[f];var P=I._getNAFPoints(e);o[f]=P.wnd,a[f]=P.points}for(f=i-1;f>=1;f-=2){var L=f-1,H=f;if(o[L]!==1||o[H]!==1){c[L]=Mf(n[L],o[L],this._bitLength),c[H]=Mf(n[H],o[H],this._bitLength),l=Math.max(c[L].length,l),l=Math.max(c[H].length,l);continue}var q=[r[L],null,null,r[H]];r[L].y.cmp(r[H].y)===0?(q[1]=r[L].add(r[H]),q[2]=r[L].toJ().mixedAdd(r[H].neg())):r[L].y.cmp(r[H].y.redNeg())===0?(q[1]=r[L].toJ().mixedAdd(r[H]),q[2]=r[L].add(r[H].neg())):(q[1]=r[L].toJ().mixedAdd(r[H]),q[2]=r[L].toJ().mixedAdd(r[H].neg()));var G=[-3,-1,-5,-7,0,7,5,1,3],C=G5(n[L],n[H]);for(l=Math.max(C[0].length,l),c[L]=new Array(l),c[H]=new Array(l),d=0;d<l;d++){var V=C[0][d]|0,U=C[1][d]|0;c[L][d]=G[(V+1)*3+(U+1)],c[H][d]=0,a[L]=q}}var F=this.jpoint(null,null,null),j=this._wnafT4;for(f=l;f>=0;f--){for(var y=0;f>=0;){var _=!0;for(d=0;d<i;d++)j[d]=c[d][f]|0,j[d]!==0&&(_=!1);if(!_)break;y++,f--}if(f>=0&&y++,F=F.dblp(y),f<0)break;for(d=0;d<i;d++){var O=j[d];O!==0&&(O>0?I=a[d][O-1>>1]:O<0&&(I=a[d][-O-1>>1].neg()),I.type==="affine"?F=F.mixedAdd(I):F=F.add(I))}}for(f=0;f<i;f++)a[f]=null;return s?F:F.toP()};function hn(t,e){this.curve=t,this.type=e,this.precomputed=null}Ns.BasePoint=hn;hn.prototype.eq=function(){throw new Error("Not implemented")};hn.prototype.validate=function(){return this.curve.validate(this)};Ns.prototype.decodePoint=function(e,r){e=Rc.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Lf(e[e.length-1]%2===0):e[0]===7&&Lf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};hn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};hn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};hn.prototype.encode=function(e,r){return Rc.encode(this._encode(r),e)};hn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};hn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};hn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};hn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};hn.prototype._getBeta=function(){return null};hn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var V5=en,Ot=Tn,t0=Nt,ca=Nu,q5=V5.assert;function pn(t){ca.call(this,"short",t),this.a=new Ot(t.a,16).toRed(this.red),this.b=new Ot(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t0(pn,ca);var $5=pn;pn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ot(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ot(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],q5(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ot(a.a,16),b:new Ot(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};pn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ot.mont(e),n=new Ot(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ot(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};pn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ot(1),o=new Ot(0),a=new Ot(0),c=new Ot(1),l,f,d,I,P,L,H,q=0,G,C;n.cmpn(0)!==0;){var V=i.div(n);G=i.sub(V.mul(n)),C=a.sub(V.mul(s));var U=c.sub(V.mul(o));if(!d&&G.cmp(r)<0)l=H.neg(),f=s,d=G.neg(),I=C;else if(d&&++q===2)break;H=G,i=n,n=G,a=s,s=C,c=o,o=U}P=G.neg(),L=C;var F=d.sqr().add(I.sqr()),j=P.sqr().add(L.sqr());return j.cmp(F)>=0&&(P=l,L=f),d.negative&&(d=d.neg(),I=I.neg()),P.negative&&(P=P.neg(),L=L.neg()),[{a:d,b:I},{a:P,b:L}]};pn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),f=o.mul(i.b),d=e.sub(a).sub(c),I=l.add(f).neg();return{k1:d,k2:I}};pn.prototype.pointFromX=function(e,r){e=new Ot(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};pn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};pn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),d=0;d<o*2;d++)i[d]=null,s[d]=null;return f};function sr(t,e,r,n){ca.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ot(e,16),this.y=new Ot(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}t0(sr,ca.BasePoint);pn.prototype.point=function(e,r,n){return new sr(this,e,r,n)};pn.prototype.pointFromJSON=function(e,r){return sr.fromJSON(this,e,r)};sr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};sr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};sr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};sr.prototype.isInfinity=function(){return this.inf};sr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};sr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};sr.prototype.getX=function(){return this.x.fromRed()};sr.prototype.getY=function(){return this.y.fromRed()};sr.prototype.mul=function(e){return e=new Ot(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};sr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};sr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};sr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};sr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};sr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function fr(t,e,r,n){ca.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ot(0)):(this.x=new Ot(e,16),this.y=new Ot(r,16),this.z=new Ot(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}t0(fr,ca.BasePoint);pn.prototype.jpoint=function(e,r,n){return new fr(this,e,r,n)};fr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};fr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};fr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),I=i.redMul(f),P=l.redSqr().redIAdd(d).redISub(I).redISub(I),L=l.redMul(I.redISub(P)).redISub(o.redMul(d)),H=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(P,L,H)};fr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),f=l.redMul(a),d=n.redMul(l),I=c.redSqr().redIAdd(f).redISub(d).redISub(d),P=c.redMul(d.redISub(I)).redISub(s.redMul(f)),L=this.z.redMul(a);return this.curve.jpoint(I,P,L)};fr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),I=f.redSqr(),P=I.redSqr(),L=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(l)),H=o.redMul(I),q=L.redSqr().redISub(H.redAdd(H)),G=H.redISub(q),C=L.redMul(G);C=C.redIAdd(C).redISub(P);var V=f.redMul(c);r+1<e&&(l=l.redMul(P)),o=q,c=V,f=C}return this.curve.jpoint(o,f.redMul(s),c)};fr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};fr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=l,r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),I=this.y.redSqr(),P=I.redSqr(),L=this.x.redAdd(I).redSqr().redISub(d).redISub(P);L=L.redIAdd(L);var H=d.redAdd(d).redIAdd(d),q=H.redSqr(),G=P.redIAdd(P);G=G.redIAdd(G),G=G.redIAdd(G),e=q.redISub(L).redISub(L),r=H.redMul(L.redISub(e)).redISub(G),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};fr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),I=this.y.redSqr(),P=this.x.redMul(I),L=this.x.redSub(d).redMul(this.x.redAdd(d));L=L.redAdd(L).redIAdd(L);var H=P.redIAdd(P);H=H.redIAdd(H);var q=H.redAdd(H);e=L.redSqr().redISub(q),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(d);var G=I.redSqr();G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G),r=L.redMul(H.redISub(e)).redISub(G)}return this.curve.jpoint(e,r,n)};fr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var f=l.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),I=f.redISub(d),P=a.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=c.redMul(I).redISub(P),H=n.redAdd(n).redMul(i);return this.curve.jpoint(d,L,H)};fr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var I=this.x.redMul(c).redISub(d);I=I.redIAdd(I),I=I.redIAdd(I);var P=this.y.redMul(f.redMul(l.redISub(f)).redISub(a.redMul(c)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(I,P,L)};fr.prototype.mul=function(e,r){return e=new Ot(e,r),this.curve._wnafMul(this,e)};fr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};fr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};fr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};fr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Io=Tn,qv=Nt,Mu=Nu,z5=en;function fa(t){Mu.call(this,"mont",t),this.a=new Io(t.a,16).toRed(this.red),this.b=new Io(t.b,16).toRed(this.red),this.i4=new Io(4).toRed(this.red).redInvm(),this.two=new Io(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}qv(fa,Mu);var W5=fa;fa.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function ir(t,e,r){Mu.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Io(e,16),this.z=new Io(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}qv(ir,Mu.BasePoint);fa.prototype.decodePoint=function(e,r){return this.point(z5.toArray(e,r),1)};fa.prototype.point=function(e,r){return new ir(this,e,r)};fa.prototype.pointFromJSON=function(e){return ir.fromJSON(this,e)};ir.prototype.precompute=function(){};ir.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};ir.fromJSON=function(e,r){return new ir(e,r[0],r[1]||e.one)};ir.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};ir.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};ir.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};ir.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,f)};ir.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};ir.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};ir.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};ir.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};ir.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};ir.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var X5=en,Ui=Tn,$v=Nt,Lu=Nu,J5=X5.assert;function pi(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Lu.call(this,"edwards",t),this.a=new Ui(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Ui(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Ui(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),J5(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}$v(pi,Lu);var Y5=pi;pi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};pi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};pi.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};pi.prototype.pointFromX=function(e,r){e=new Ui(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};pi.prototype.pointFromY=function(e,r){e=new Ui(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};pi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function vt(t,e,r,n,i){Lu.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ui(e,16),this.y=new Ui(r,16),this.z=n?new Ui(n,16):this.curve.one,this.t=i&&new Ui(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}$v(vt,Lu.BasePoint);pi.prototype.pointFromJSON=function(e){return vt.fromJSON(this,e)};pi.prototype.point=function(e,r,n,i){return new vt(this,e,r,n,i)};vt.fromJSON=function(e,r){return new vt(e,r[0],r[1],r[2])};vt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};vt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),f=o.redMul(c),d=s.redMul(c),I=a.redMul(o);return this.curve.point(l,f,I,d)};vt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),l=f.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=f.redMul(a.redSub(n)),o=f.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};vt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),f=o.redMul(a),d=c.redMul(l),I=o.redMul(l),P=a.redMul(c);return this.curve.point(f,d,P,I)};vt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(l),d,I;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),I=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(i)),I=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,I)};vt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};vt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};vt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};vt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};vt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};vt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};vt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};vt.prototype.toP=vt.prototype.normalize;vt.prototype.mixedAdd=vt.prototype.add;(function(t){var e=t;e.base=Nu,e.short=$5,e.mont=W5,e.edwards=Y5})(e0);var Cu={},Bu={},Ze={},Q5=fo,Z5=Nt;Ze.inherits=Z5;function e4(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function t4(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):e4(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Ze.toArray=t4;function r4(t){for(var e="",r=0;r<t.length;r++)e+=Wv(t[r].toString(16));return e}Ze.toHex=r4;function zv(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ze.htonl=zv;function n4(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=zv(i)),r+=Xv(i.toString(16))}return r}Ze.toHex32=n4;function Wv(t){return t.length===1?"0"+t:t}Ze.zero2=Wv;function Xv(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ze.zero8=Xv;function i4(t,e,r,n){var i=r-e;Q5(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Ze.join32=i4;function s4(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Ze.split32=s4;function o4(t,e){return t>>>e|t<<32-e}Ze.rotr32=o4;function a4(t,e){return t<<e|t>>>32-e}Ze.rotl32=a4;function c4(t,e){return t+e>>>0}Ze.sum32=c4;function f4(t,e,r){return t+e+r>>>0}Ze.sum32_3=f4;function u4(t,e,r,n){return t+e+r+n>>>0}Ze.sum32_4=u4;function l4(t,e,r,n,i){return t+e+r+n+i>>>0}Ze.sum32_5=l4;function d4(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}Ze.sum64=d4;function h4(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Ze.sum64_hi=h4;function p4(t,e,r,n){var i=e+n;return i>>>0}Ze.sum64_lo=p4;function g4(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var f=t+r+i+o+c;return f>>>0}Ze.sum64_4_hi=g4;function b4(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}Ze.sum64_4_lo=b4;function v4(t,e,r,n,i,s,o,a,c,l){var f=0,d=e;d=d+n>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+a>>>0,f+=d<a?1:0,d=d+l>>>0,f+=d<l?1:0;var I=t+r+i+o+c+f;return I>>>0}Ze.sum64_5_hi=v4;function m4(t,e,r,n,i,s,o,a,c,l){var f=e+n+s+a+l;return f>>>0}Ze.sum64_5_lo=m4;function y4(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ze.rotr64_hi=y4;function E4(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.rotr64_lo=E4;function _4(t,e,r){return t>>>r}Ze.shr64_hi=_4;function w4(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.shr64_lo=w4;var ua={},f1=Ze,A4=fo;function ku(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ua.BlockHash=ku;ku.prototype.update=function(e,r){if(e=f1.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=f1.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};ku.prototype.digest=function(e){return this.update(this._pad()),A4(this.pending===null),this._digest(e)};ku.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var la={},gi={},x4=Ze,ri=x4.rotr32;function S4(t,e,r,n){if(t===0)return Jv(e,r,n);if(t===1||t===3)return Qv(e,r,n);if(t===2)return Yv(e,r,n)}gi.ft_1=S4;function Jv(t,e,r){return t&e^~t&r}gi.ch32=Jv;function Yv(t,e,r){return t&e^t&r^e&r}gi.maj32=Yv;function Qv(t,e,r){return t^e^r}gi.p32=Qv;function R4(t){return ri(t,2)^ri(t,13)^ri(t,22)}gi.s0_256=R4;function I4(t){return ri(t,6)^ri(t,11)^ri(t,25)}gi.s1_256=I4;function T4(t){return ri(t,7)^ri(t,18)^t>>>3}gi.g0_256=T4;function O4(t){return ri(t,17)^ri(t,19)^t>>>10}gi.g1_256=O4;var Go=Ze,P4=ua,N4=gi,nd=Go.rotl32,Pa=Go.sum32,M4=Go.sum32_5,L4=N4.ft_1,Zv=P4.BlockHash,C4=[1518500249,1859775393,2400959708,3395469782];function fi(){if(!(this instanceof fi))return new fi;Zv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Go.inherits(fi,Zv);var B4=fi;fi.blockSize=512;fi.outSize=160;fi.hmacStrength=80;fi.padLength=64;fi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=nd(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),d=M4(nd(s,5),L4(f,o,a,c),l,n[i],C4[f]);l=c,c=a,a=nd(o,30),o=s,s=d}this.h[0]=Pa(this.h[0],s),this.h[1]=Pa(this.h[1],o),this.h[2]=Pa(this.h[2],a),this.h[3]=Pa(this.h[3],c),this.h[4]=Pa(this.h[4],l)};fi.prototype._digest=function(e){return e==="hex"?Go.toHex32(this.h,"big"):Go.split32(this.h,"big")};var Vo=Ze,k4=ua,da=gi,D4=fo,bn=Vo.sum32,U4=Vo.sum32_4,K4=Vo.sum32_5,H4=da.ch32,F4=da.maj32,j4=da.s0_256,G4=da.s1_256,V4=da.g0_256,q4=da.g1_256,em=k4.BlockHash,$4=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ui(){if(!(this instanceof ui))return new ui;em.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$4,this.W=new Array(64)}Vo.inherits(ui,em);var tm=ui;ui.blockSize=512;ui.outSize=256;ui.hmacStrength=192;ui.padLength=64;ui.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=U4(q4(n[i-2]),n[i-7],V4(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],f=this.h[5],d=this.h[6],I=this.h[7];for(D4(this.k.length===n.length),i=0;i<n.length;i++){var P=K4(I,G4(l),H4(l,f,d),this.k[i],n[i]),L=bn(j4(s),F4(s,o,a));I=d,d=f,f=l,l=bn(c,P),c=a,a=o,o=s,s=bn(P,L)}this.h[0]=bn(this.h[0],s),this.h[1]=bn(this.h[1],o),this.h[2]=bn(this.h[2],a),this.h[3]=bn(this.h[3],c),this.h[4]=bn(this.h[4],l),this.h[5]=bn(this.h[5],f),this.h[6]=bn(this.h[6],d),this.h[7]=bn(this.h[7],I)};ui.prototype._digest=function(e){return e==="hex"?Vo.toHex32(this.h,"big"):Vo.split32(this.h,"big")};var ah=Ze,rm=tm;function $i(){if(!(this instanceof $i))return new $i;rm.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ah.inherits($i,rm);var z4=$i;$i.blockSize=512;$i.outSize=224;$i.hmacStrength=192;$i.padLength=64;$i.prototype._digest=function(e){return e==="hex"?ah.toHex32(this.h.slice(0,7),"big"):ah.split32(this.h.slice(0,7),"big")};var Ur=Ze,W4=ua,X4=fo,ni=Ur.rotr64_hi,ii=Ur.rotr64_lo,nm=Ur.shr64_hi,im=Ur.shr64_lo,ts=Ur.sum64,id=Ur.sum64_hi,sd=Ur.sum64_lo,J4=Ur.sum64_4_hi,Y4=Ur.sum64_4_lo,Q4=Ur.sum64_5_hi,Z4=Ur.sum64_5_lo,sm=W4.BlockHash,eA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function On(){if(!(this instanceof On))return new On;sm.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=eA,this.W=new Array(160)}Ur.inherits(On,sm);var om=On;On.blockSize=1024;On.outSize=512;On.hmacStrength=192;On.padLength=128;On.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=lA(n[i-4],n[i-3]),o=dA(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=fA(n[i-30],n[i-29]),f=uA(n[i-30],n[i-29]),d=n[i-32],I=n[i-31];n[i]=J4(s,o,a,c,l,f,d,I),n[i+1]=Y4(s,o,a,c,l,f,d,I)}};On.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],f=this.h[6],d=this.h[7],I=this.h[8],P=this.h[9],L=this.h[10],H=this.h[11],q=this.h[12],G=this.h[13],C=this.h[14],V=this.h[15];X4(this.k.length===n.length);for(var U=0;U<n.length;U+=2){var F=C,j=V,y=aA(I,P),_=cA(I,P),O=tA(I,P,L,H,q),x=rA(I,P,L,H,q,G),E=this.k[U],u=this.k[U+1],p=n[U],g=n[U+1],b=Q4(F,j,y,_,O,x,E,u,p,g),h=Z4(F,j,y,_,O,x,E,u,p,g);F=sA(i,s),j=oA(i,s),y=nA(i,s,o,a,c),_=iA(i,s,o,a,c,l);var S=id(F,j,y,_),T=sd(F,j,y,_);C=q,V=G,q=L,G=H,L=I,H=P,I=id(f,d,b,h),P=sd(d,d,b,h),f=c,d=l,c=o,l=a,o=i,a=s,i=id(b,h,S,T),s=sd(b,h,S,T)}ts(this.h,0,i,s),ts(this.h,2,o,a),ts(this.h,4,c,l),ts(this.h,6,f,d),ts(this.h,8,I,P),ts(this.h,10,L,H),ts(this.h,12,q,G),ts(this.h,14,C,V)};On.prototype._digest=function(e){return e==="hex"?Ur.toHex32(this.h,"big"):Ur.split32(this.h,"big")};function tA(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function rA(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function nA(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function iA(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function sA(t,e){var r=ni(t,e,28),n=ni(e,t,2),i=ni(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function oA(t,e){var r=ii(t,e,28),n=ii(e,t,2),i=ii(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function aA(t,e){var r=ni(t,e,14),n=ni(t,e,18),i=ni(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function cA(t,e){var r=ii(t,e,14),n=ii(t,e,18),i=ii(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function fA(t,e){var r=ni(t,e,1),n=ni(t,e,8),i=nm(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function uA(t,e){var r=ii(t,e,1),n=ii(t,e,8),i=im(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function lA(t,e){var r=ni(t,e,19),n=ni(e,t,29),i=nm(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function dA(t,e){var r=ii(t,e,19),n=ii(e,t,29),i=im(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var ch=Ze,am=om;function zi(){if(!(this instanceof zi))return new zi;am.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ch.inherits(zi,am);var hA=zi;zi.blockSize=1024;zi.outSize=384;zi.hmacStrength=192;zi.padLength=128;zi.prototype._digest=function(e){return e==="hex"?ch.toHex32(this.h.slice(0,12),"big"):ch.split32(this.h.slice(0,12),"big")};la.sha1=B4;la.sha224=z4;la.sha256=tm;la.sha384=hA;la.sha512=om;var cm={},to=Ze,pA=ua,Gc=to.rotl32,u1=to.sum32,Na=to.sum32_3,l1=to.sum32_4,fm=pA.BlockHash;function li(){if(!(this instanceof li))return new li;fm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}to.inherits(li,fm);cm.ripemd160=li;li.blockSize=512;li.outSize=160;li.hmacStrength=192;li.padLength=64;li.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,f=s,d=o,I=a,P=0;P<80;P++){var L=u1(Gc(l1(n,d1(P,i,s,o),e[vA[P]+r],gA(P)),yA[P]),a);n=a,a=o,o=Gc(s,10),s=i,i=L,L=u1(Gc(l1(c,d1(79-P,l,f,d),e[mA[P]+r],bA(P)),EA[P]),I),c=I,I=d,d=Gc(f,10),f=l,l=L}L=Na(this.h[1],s,d),this.h[1]=Na(this.h[2],o,I),this.h[2]=Na(this.h[3],a,c),this.h[3]=Na(this.h[4],n,l),this.h[4]=Na(this.h[0],i,f),this.h[0]=L};li.prototype._digest=function(e){return e==="hex"?to.toHex32(this.h,"little"):to.split32(this.h,"little")};function d1(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function gA(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function bA(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var vA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],mA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],yA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],EA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],_A=Ze,wA=fo;function qo(t,e,r){if(!(this instanceof qo))return new qo(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(_A.toArray(e,r))}var AA=qo;qo.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),wA(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};qo.prototype.update=function(e,r){return this.inner.update(e,r),this};qo.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ze,e.common=ua,e.sha=la,e.ripemd=cm,e.hmac=AA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Bu);var od,h1;function xA(){return h1||(h1=1,od={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),od}(function(t){var e=t,r=Bu,n=e0,i=en,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,f){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var d=new o(f);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:d}),d}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=xA()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Cu);var SA=Bu,Xs=Zh,um=fo;function Es(t){if(!(this instanceof Es))return new Es(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Xs.toArray(t.entropy,t.entropyEnc||"hex"),r=Xs.toArray(t.nonce,t.nonceEnc||"hex"),n=Xs.toArray(t.pers,t.persEnc||"hex");um(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var RA=Es;Es.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Es.prototype._hmac=function(){return new SA.hmac(this.hash,this.K)};Es.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Es.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Xs.toArray(e,r),n=Xs.toArray(n,i),um(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Es.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Xs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Xs.encode(o,r)};var IA=Tn,TA=en,fh=TA.assert;function Sr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var OA=Sr;Sr.fromPublic=function(e,r,n){return r instanceof Sr?r:new Sr(e,{pub:r,pubEnc:n})};Sr.fromPrivate=function(e,r,n){return r instanceof Sr?r:new Sr(e,{priv:r,privEnc:n})};Sr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Sr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Sr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Sr.prototype._importPrivate=function(e,r){this.priv=new IA(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Sr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?fh(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&fh(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Sr.prototype.derive=function(e){return e.validate()||fh(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Sr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Sr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Sr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Cf=Tn,r0=en,PA=r0.assert;function Du(t,e){if(t instanceof Du)return t;this._importDER(t,e)||(PA(t.r&&t.s,"Signature without r or s"),this.r=new Cf(t.r,16),this.s=new Cf(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var NA=Du;function MA(){this.place=0}function ad(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function p1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Du.prototype._importDER=function(e,r){e=r0.toArray(e,r);var n=new MA;if(e[n.place++]!==48)return!1;var i=ad(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=ad(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=ad(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Cf(o),this.s=new Cf(c),this.recoveryParam=null,!0};function cd(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Du.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=p1(r),n=p1(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];cd(i,r.length),i=i.concat(r),i.push(2),cd(i,n.length);var s=i.concat(n),o=[48];return cd(o,s.length),o=o.concat(s),r0.encode(o,e)};var Js=Tn,lm=RA,LA=en,fd=Cu,CA=nc,dm=LA.assert,n0=OA,Uu=NA;function ln(t){if(!(this instanceof ln))return new ln(t);typeof t=="string"&&(dm(Object.prototype.hasOwnProperty.call(fd,t),"Unknown curve "+t),t=fd[t]),t instanceof fd.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var BA=ln;ln.prototype.keyPair=function(e){return new n0(this,e)};ln.prototype.keyFromPrivate=function(e,r){return n0.fromPrivate(this,e,r)};ln.prototype.keyFromPublic=function(e,r){return n0.fromPublic(this,e,r)};ln.prototype.genKeyPair=function(e){e||(e={});for(var r=new lm({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||CA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Js(2));;){var s=new Js(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};ln.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};ln.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Js(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new lm({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new Js(1)),f=0;;f++){var d=i.k?i.k(f):new Js(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(l)>=0)){var I=this.g.mul(d);if(!I.isInfinity()){var P=I.getX(),L=P.umod(this.n);if(L.cmpn(0)!==0){var H=d.invm(this.n).mul(L.mul(r.getPrivate()).iadd(e));if(H=H.umod(this.n),H.cmpn(0)!==0){var q=(I.getY().isOdd()?1:0)|(P.cmp(L)!==0?2:0);return i.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),q^=1),new Uu({r:L,s:H,recoveryParam:q})}}}}}};ln.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Js(e,16)),n=this.keyFromPublic(n,i),r=new Uu(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};ln.prototype.recoverPubKey=function(t,e,r,n){dm((3&r)===r,"The recovery param is more than two bits"),e=new Uu(e,n);var i=this.n,s=new Js(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(i),d=i.sub(s).mul(f).umod(i),I=a.mul(f).umod(i);return this.g.mulAdd(d,o,I)};ln.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Uu(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Ic=en,hm=Ic.assert,g1=Ic.parseBytes,ha=Ic.cachedProperty;function nr(t,e){this.eddsa=t,this._secret=g1(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=g1(e.pub)}nr.fromPublic=function(e,r){return r instanceof nr?r:new nr(e,{pub:r})};nr.fromSecret=function(e,r){return r instanceof nr?r:new nr(e,{secret:r})};nr.prototype.secret=function(){return this._secret};ha(nr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});ha(nr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});ha(nr,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});ha(nr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});ha(nr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});ha(nr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});nr.prototype.sign=function(e){return hm(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};nr.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};nr.prototype.getSecret=function(e){return hm(this._secret,"KeyPair is public only"),Ic.encode(this.secret(),e)};nr.prototype.getPublic=function(e){return Ic.encode(this.pubBytes(),e)};var kA=nr,DA=Tn,Ku=en,UA=Ku.assert,Hu=Ku.cachedProperty,KA=Ku.parseBytes;function uo(t,e){this.eddsa=t,typeof e!="object"&&(e=KA(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),UA(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof DA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Hu(uo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Hu(uo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Hu(uo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Hu(uo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});uo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};uo.prototype.toHex=function(){return Ku.encode(this.toBytes(),"hex").toUpperCase()};var HA=uo,FA=Bu,jA=Cu,$o=en,GA=$o.assert,pm=$o.parseBytes,gm=kA,b1=HA;function Kr(t){if(GA(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Kr))return new Kr(t);t=jA[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=FA.sha512}var VA=Kr;Kr.prototype.sign=function(e,r){e=pm(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};Kr.prototype.verify=function(e,r,n){e=pm(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};Kr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return $o.intFromLE(e.digest()).umod(this.curve.n)};Kr.prototype.keyFromPublic=function(e){return gm.fromPublic(this,e)};Kr.prototype.keyFromSecret=function(e){return gm.fromSecret(this,e)};Kr.prototype.makeSignature=function(e){return e instanceof b1?e:new b1(this,e)};Kr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Kr.prototype.decodePoint=function(e){e=$o.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=$o.intFromLE(n);return this.curve.pointFromY(s,i)};Kr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Kr.prototype.decodeInt=function(e){return $o.intFromLE(e)};Kr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=H5.version,e.utils=en,e.rand=nc,e.curve=e0,e.curves=Cu,e.ec=BA,e.eddsa=VA})(S5);var re;(function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.TZ4="tz4",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.BLPK="BLpk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="B",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ",t.VH="vh",t.SASK="sask",t.ZET1="zet1",t.TXR1="txr1",t.TXI="txi",t.TXM="txm",t.TXC="txc",t.TXMR="txmr",t.TXRL="txM",t.TXW="txw",t.SR1="sr1",t.SRC1="src1"})(re||(re={}));const wr={[re.TZ1]:new Uint8Array([6,161,159]),[re.TZ2]:new Uint8Array([6,161,161]),[re.TZ3]:new Uint8Array([6,161,164]),[re.TZ4]:new Uint8Array([6,161,166]),[re.KT]:new Uint8Array([2,90,121]),[re.KT1]:new Uint8Array([2,90,121]),[re.EDSK]:new Uint8Array([43,246,78,7]),[re.EDSK2]:new Uint8Array([13,15,58,7]),[re.SPSK]:new Uint8Array([17,162,224,201]),[re.P2SK]:new Uint8Array([16,81,238,189]),[re.EDPK]:new Uint8Array([13,15,37,217]),[re.SPPK]:new Uint8Array([3,254,226,86]),[re.P2PK]:new Uint8Array([3,178,139,127]),[re.BLPK]:new Uint8Array([6,149,135,204]),[re.EDESK]:new Uint8Array([7,90,60,179,41]),[re.SPESK]:new Uint8Array([9,237,241,174,150]),[re.P2ESK]:new Uint8Array([9,48,57,115,171]),[re.EDSIG]:new Uint8Array([9,245,205,134,18]),[re.SPSIG]:new Uint8Array([13,115,101,19,63]),[re.P2SIG]:new Uint8Array([54,240,44,52]),[re.SIG]:new Uint8Array([4,130,43]),[re.NET]:new Uint8Array([87,82,0]),[re.NCE]:new Uint8Array([69,220,169]),[re.B]:new Uint8Array([1,52]),[re.O]:new Uint8Array([5,116]),[re.LO]:new Uint8Array([133,233]),[re.LLO]:new Uint8Array([29,159,109]),[re.P]:new Uint8Array([2,170]),[re.CO]:new Uint8Array([79,179]),[re.ID]:new Uint8Array([153,103]),[re.EXPR]:new Uint8Array([13,44,64,27]),[re.TZ]:new Uint8Array([2,90,121]),[re.VH]:new Uint8Array([1,106,242]),[re.SASK]:new Uint8Array([11,237,20,92]),[re.ZET1]:new Uint8Array([18,71,40,223]),[re.TXR1]:new Uint8Array([1,128,120,31]),[re.TXI]:new Uint8Array([79,148,196]),[re.TXM]:new Uint8Array([79,149,30]),[re.TXC]:new Uint8Array([79,148,17]),[re.TXMR]:new Uint8Array([18,7,206,87]),[re.TXRL]:new Uint8Array([79,146,82]),[re.TXW]:new Uint8Array([79,150,72]),[re.SR1]:new Uint8Array([6,124,117]),[re.SRC1]:new Uint8Array([17,165,134,138])},bm={[re.TZ1]:20,[re.TZ2]:20,[re.TZ3]:20,[re.TZ4]:20,[re.KT]:20,[re.KT1]:20,[re.EDPK]:32,[re.SPPK]:33,[re.P2PK]:33,[re.BLPK]:48,[re.EDSIG]:64,[re.SPSIG]:64,[re.P2SIG]:64,[re.SIG]:64,[re.NET]:4,[re.B]:32,[re.P]:32,[re.O]:32,[re.VH]:32,[re.SASK]:169,[re.ZET1]:43,[re.TXR1]:20,[re.TXI]:32,[re.TXM]:32,[re.TXC]:32,[re.TXMR]:32,[re.TXRL]:32,[re.TXW]:32,[re.SR1]:20,[re.SRC1]:32};class vm extends Error{constructor(e,r){super(),this.publicKey=e,this.name="InvalidPublicKeyError";const n=`The public key '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class ko extends Error{constructor(e){super(`The contract address '${e}' is invalid`),this.contractAddress=e,this.name="InvalidContractAddressError"}}class ft extends Error{constructor(e,r){super(),this.address=e,this.name="InvalidAddressError";const n=`The address '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class qA extends Error{constructor(e){super(`The chain id '${e}' is invalid`),this.chainId=e,this.name="InvalidChainIdError"}}class i0 extends Error{constructor(e){super(`The public key hash '${e}' is invalid`),this.keyHash=e,this.name="InvalidKeyHashError"}}class mm extends Error{constructor(e){super(`The operation hash '${e}' is invalid`),this.operationHash=e,this.name="InvalidOperationHashError"}}class Wi extends Error{constructor(e){super(`The operation kind '${e}' is unsupported`),this.operationKind=e,this.name="InvalidOperationKindError"}}class s0 extends Error{constructor(e){super(e),this.message=e,this.name="DeprecationError"}}class $A extends Error{constructor(e,r){super(`Unable to convert ${e} to a ${r}`),this.value=e,this.desiredType=r,this.name="ValueConversionError"}}var _e;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"})(_e||(_e={}));function zA(t){return typeof t!="string"?!1:t in wr}function Ms(t,e){const r=new RegExp(`^(${e.join("|")})`).exec(t);if(!r||r.length===0)return _e.NO_PREFIX_MATCHED;const n=r[0];if(!zA(n))return _e.NO_PREFIX_MATCHED;if(t.includes("%")&&(t=t.split("%")[0]),!/^(KT1\w{33})$/.test(t)&&n==="KT1")return _e.INVALID_CHECKSUM;let s=Yr.decodeUnsafe(t);return s?(s=s.slice(wr[n].length),s.length!==bm[n]?_e.INVALID_LENGTH:_e.VALID):_e.INVALID_CHECKSUM}const ym=[re.TZ1,re.TZ2,re.TZ3,re.TZ4],Em=[re.KT1,re.TXR1],WA=[re.EDSIG,re.P2SIG,re.SPSIG,re.SIG],XA=[re.EDPK,re.SPPK,re.P2PK,re.BLPK],JA=[re.O];re.P;const YA=[re.B];function ct(t){return Ms(t,[...ym,...Em])}function _m(t){return Ms(t,[re.NET])}function Do(t){return Ms(t,Em)}function o0(t){return Ms(t,ym)}function QA(t){return Ms(t,WA)}function ZA(t){return Ms(t,XA)}function wm(t){return Ms(t,JA)}function e8(t){return Ms(t,YA)}const t8=6,r8=3;function v1(t){switch(t){case"tz":return t8;case"mtz":return r8;case"mutez":default:return 0}}function a0(t="mutez",e="mutez",r){const n=new be(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,v1(t))).dividedBy(Math.pow(10,v1(e)))}function n8(t){const e=cw.blake2b(a8(t),void 0,32);return vs(e,wr.expr)}function vs(t,e){const r=typeof t=="string"?Uint8Array.from(Gi.Buffer.from(t,"hex")):t,n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),Yr.encode(Gi.Buffer.from(n.buffer))}const Am=(t,e)=>Yr.decode(t).slice(e.length);function i8(t){const e=Yr.decode(t),r={[wr.tz1.toString()]:"0000",[wr.tz2.toString()]:"0001",[wr.tz3.toString()]:"0002"},n={[wr.txr1.toString()]:"02"},i=r[new Uint8Array(e.slice(0,3)).toString()],s=n[new Uint8Array(e.slice(0,4)).toString()];if(i){const o=Va(e.slice(3));return i+o}else if(s){const o=Va(e.slice(4));return s+o+"00"}else return"01"+Va(e.slice(3,42))+"00"}function s8(t){const e=Yr.decode(t);return Va(e.slice(3,42))}function uh(t){if(t.substring(0,2)==="00"){const e={"0000":wr.tz1,"0001":wr.tz2,"0002":wr.tz3};return vs(t.substring(4),e[t.substring(0,4)])}else if(t.substring(0,2)==="02")return vs(t.substring(2,t.length-2),wr.txr1);return vs(t.substring(2,42),wr.KT)}function m1(t){return vs(t,wr.tz4)}function o8(t){if(t[0]==="0"){const e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return vs(t.substring(2),e[t.substring(0,2)])}}function y1(t){if(t[0]==="0"){const e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return vs(t.substring(2),e[t.substring(0,2)])}}const a8=t=>{const e=t.match(/[\da-f]{2}/gi);if(e)return new Uint8Array(e.map(r=>parseInt(r,16)));throw new $A(t,"Uint8Array")},Va=t=>{const e=new Uint8Array(t),r=[];return e.forEach(n=>{const s=`00${n.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function E1(t){return t.startsWith("0x")?t.slice(2):t}function Vc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Te(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}const c8="main",Pe={block:"head"};var _1;(function(t){t.GET_BAKING_RIGHTS="getBakingRights",t.GET_BALLOTS="getBallots",t.GET_BALLOT_LIST="getBallotList",t.GET_BIG_MAP_KEY="getBigMapKey",t.GET_BIG_MAP_EXPR="getBigMapExpr",t.GET_BLOCK_HASH="getBlockHash",t.GET_BLOCK="getBlock",t.GET_BLOCK_HEADER="getBlockHeader",t.GET_BLOCK_METADATA="getBlockMetadata",t.GET_BALANCE="getBalance",t.GET_CHAIN_ID="getChainId",t.GET_CONSTANTS="getConstants",t.GET_CONTRACT="getContract",t.GET_CURRENT_PERIOD="getCurrentPeriod",t.GET_CURRENT_PROPOSAL="getCurrentProposal",t.GET_CURRENT_QUORUM="getCurrentQuorum",t.GET_DELEGATE="getDelegate",t.GET_DELEGATES="getDelegates",t.GET_VOTING_INFO="getVotingInfo",t.GET_ENDORSING_RIGHTS="getEndorsingRights",t.GET_ENTRYPOINTS="getEntrypoints",t.GET_LIVE_BLOCKS="getLiveBlocks",t.GET_MANAGER_KEY="getManagerKey",t.GET_NORMALIZED_SCRIPT="getNormalizedScript",t.GET_PROPOSALS="getProposals",t.GET_PROTOCOLS="getProtocols",t.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",t.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",t.GET_SCRIPT="getScript",t.GET_STORAGE="getStorage",t.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",t.GET_TX_ROLLUP_INBOX="getTxRollupInbox",t.GET_TX_ROLLUP_STATE="getTxRollupState",t.GET_VOTES_LISTINGS="getVotesListings",t.PACK_DATA="packData",t.GET_STORAGE_USED_SPACE="getStorageUsedSpace",t.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",t.GET_TICKET_BALANCE="getTicketBalance",t.GET_ALL_TICKET_BALANCES="getAllTicketBalances"})(_1||(_1={}));function Ha(t,e){const r=Array.isArray(t);typeof e>"u"&&(e=Object.keys(t));const n=r?[]:{};return e.forEach(i=>{const s=t[i];let o;if(!(typeof s>"u")){if(Array.isArray(s)){o=Ha(s),n[i]=o;return}o=new be(s),n[i]=o}}),n}var w1;(function(t){t.TOO_LARGE="too large"})(w1||(w1={}));var A1;(function(t){t.BAKING_REWARDS="baking rewards",t.REWARDS="rewards",t.FEES="fees",t.DEPOSITS="deposits",t.LEGACY_REWARDS="legacy_rewards",t.LEGACY_FEES="legacy_fees",t.LEGACY_DEPOSITS="legacy_deposits",t.BLOCK_FEES="block fees",t.NONCE_REVELATION_REWARDS="nonce revelation rewards",t.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",t.ENDORSING_REWARDS="endorsing rewards",t.BAKING_BONUSES="baking bonuses",t.STORAGE_FEES="storage fees",t.PUNISHMENTS="punishments",t.LOST_ENDORSING_REWARDS="lost endorsing rewards",t.SUBSIDY="subsidy",t.BURNED="burned",t.COMMITMENT="commitment",t.BOOTSTRAP="bootstrap",t.INVOICE="invoice",t.MINTED="minted",t.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",t.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",t.BONDS="bonds"})(A1||(A1={}));var oe;(function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.PREENDORSEMENT="preendorsement",t.SET_DEPOSITS_LIMIT="set_deposits_limit",t.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",t.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot",t.FAILING_NOOP="failing_noop",t.REGISTER_GLOBAL_CONSTANT="register_global_constant",t.TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.TX_ROLLUP_COMMIT="tx_rollup_commit",t.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",t.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",t.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",t.TX_ROLLUP_REJECTION="tx_rollup_rejection",t.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",t.TRANSFER_TICKET="transfer_ticket",t.INCREASE_PAID_STORAGE="increase_paid_storage",t.UPDATE_CONSENSUS_KEY="update_consensus_key",t.DRAIN_DELEGATE="drain_delegate",t.VDF_REVELATION="vdf_revelation",t.EVENT="event",t.TICKET_UPDATES="ticket_updates",t.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(oe||(oe={}));class yf{constructor(e,r=c8,n=new y_){this.url=e,this.chain=r,this.httpBackend=n}createURL(e){return`${this.url.replace(/\/+$/g,"")}${e}`}validateAddress(e){if(ct(e)!==_e.VALID)throw new ft(e)}validateContract(e){if(Do(e)!==_e.VALID)throw new ft(e)}getBlockHash({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/balance`),method:"GET"});return new be(n)})}getStorage(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage`),method:"GET"})})}getScript(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/script`),method:"GET"})})}getNormalizedScript(e,r={unparsing_mode:"Readable"},{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/script/normalized`),method:"POST"},r)})}getContract(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new be(n.balance)})})}getManagerKey(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/manager_key`),method:"GET"})})}getDelegate(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/delegate`),method:"GET"})}catch(i){if(i instanceof sa&&i.status===Qa.NOT_FOUND)n=null;else throw i}return n})}getBigMapKey(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/big_map_get`),method:"POST"},r)})}getBigMapExpr(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/big_maps/${e}/${r}`),method:"GET"})})}getDelegates(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}`),method:"GET"}),i=Ha(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},n),i),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(s=>{var{deposit:o,deposits:a,fees:c,rewards:l}=s,f=Vc(s,["deposit","deposits","fees","rewards"]);const d=Ha({deposit:o,deposits:a,fees:c,rewards:l},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:d.deposit,deposits:d.deposits,fees:d.fees,rewards:d.rewards})}):void 0})})}getVotingInfo(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}/voting_info`),method:"GET"})})}getConstants({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),n=Ha(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},r),n)})}getBlock({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"})})}getBlockHeader({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"})})}getBakingRights(e={},{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:e})})}getEndorsingRights(e={},{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:e})})}getBallotList({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return Ha(r,["yay","nay","pass"])})}getCurrentProposal({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return r.map(n=>(n.voting_power&&(n.voting_power=new be(n.voting_power)),n)),r})}getProposals({block:e}=Pe){return Te(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return r.map(n=>n[1]=new be(n[1])),r})}forgeOperations(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},e)})}injectOperation(e){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},e)})}getEntrypoints(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/entrypoints`),method:"GET"})})}runOperation(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},e)})}runCode(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},e)})}runScriptView(e,{block:r}=Pe){var{unparsing_mode:n="Readable"}=e,i=Vc(e,["unparsing_mode"]);return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}runView(e,{block:r}=Pe){var{unparsing_mode:n="Readable"}=e,i=Vc(e,["unparsing_mode"]);return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}getChainId(){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},e),{gas:i}=n,s=Vc(n,["gas"]);let o=i;const a=new be(i||"");return a.isNaN()||(o=a),Object.assign({gas:o},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:e}=Pe){return Te(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${e}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:e}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getTxRollupState(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${e}/state`),method:"GET"})})}getTxRollupInbox(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/tx_rollup/${e}/inbox/${r}`),method:"GET"})})}getStorageUsedSpace(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/paid_space`),method:"GET"})})}getTicketBalance(e,r,{block:n}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/ticket_balance`),method:"POST"},r)})}getAllTicketBalances(e,{block:r}=Pe){return Te(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/all_ticket_balances`),method:"GET"})})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lh=function(t,e){return lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},lh(t,e)};function et(t,e){lh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Bf(t){return typeof t=="function"}var x1=!1,Wn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}x1=t},get useDeprecatedSynchronousErrorHandling(){return x1}};function To(t){setTimeout(function(){throw t},0)}var kf={closed:!0,next:function(t){},error:function(t){if(Wn.useDeprecatedSynchronousErrorHandling)throw t;To(t)},complete:function(){}},c0=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function xm(t){return t!==null&&typeof t=="object"}var f8=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),Ef=f8,Qr=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var c=n[a];c.remove(this)}if(Bf(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(d){e=d instanceof Ef?S1(d.errors):[d]}}if(c0(o))for(var a=-1,l=o.length;++a<l;){var f=o[a];if(xm(f))try{f.unsubscribe()}catch(I){e=e||[],I instanceof Ef?e=e.concat(S1(I.errors)):e.push(I)}}if(e)throw new Ef(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function S1(t){return t.reduce(function(e,r){return e.concat(r instanceof Ef?r.errors:r)},[])}var Df=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Bt=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=kf;break;case 1:if(!r){s.destination=kf;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new R1(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new R1(s,r,n,i);break}return s}return e.prototype[Df]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(Qr),R1=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,c=o;return Bf(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==kf&&(c=Object.create(n),Bf(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Wn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=Wn.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):To(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;To(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!Wn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),Wn.useDeprecatedSynchronousErrorHandling)throw i;To(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!Wn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Wn.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(To(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(Bt);function u8(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof Bt?t=n:t=null}return!0}function l8(t,e,r){if(t){if(t instanceof Bt)return t;if(t[Df])return t[Df]()}return!t&&!e&&!r?new Bt(kf):new Bt(t,e,r)}var Tc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function f0(t){return t}function d8(t){return t.length===0?f0:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var It=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=l8(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Wn.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Wn.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){Wn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),u8(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=I1(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[Tc]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:d8(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=I1(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function I1(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var h8=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Vs=h8,Sm=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(Qr),Rm=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(Bt),zo=function(t){et(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[Df]=function(){return new Rm(this)},e.prototype.lift=function(r){var n=new T1(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new Vs;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new Vs;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Vs;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new Vs;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new Vs;return this.hasError?(r.error(this.thrownError),Qr.EMPTY):this.isStopped?(r.complete(),Qr.EMPTY):(this.observers.push(r),new Sm(this,r))},e.prototype.asObservable=function(){var r=new It;return r.source=this,r},e.create=function(r,n){return new T1(r,n)},e}(It),T1=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):Qr.EMPTY},e}(zo);function ic(){return function(e){return e.lift(new p8(e))}}var p8=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new g8(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),g8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(Bt),b8=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new Qr,r.add(this.source.subscribe(new m8(this.getSubject(),this))),r.closed&&(this._connection=null,r=Qr.EMPTY)),r},e.prototype.refCount=function(){return ic()(this)},e}(It),v8=function(){var t=b8.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),m8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(Rm),Fu=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Vs;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(zo),y8=function(t){et(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(Qr),Im=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(y8),E8=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(Im),O1=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),Tm=function(t){et(e,t);function e(r,n){n===void 0&&(n=O1.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(O1),_8=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Tm),w8=new _8(E8),A8=w8,Om=new It(function(t){return t.complete()});function u0(t){return t?x8(t):Om}function x8(t){return new It(function(e){return t.schedule(function(){return e.complete()})})}function sc(t){return t&&typeof t.schedule=="function"}var Pm=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function l0(t,e){return new It(function(r){var n=new Qr,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function Nm(t,e){return e?l0(t,e):new It(Pm(t))}function pa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return sc(r)?(t.pop(),l0(t,r)):Nm(t)}function d0(t,e){return e?new It(function(r){return e.schedule(S8,0,{error:t,subscriber:r})}):new It(function(r){return r.error(t)})}function S8(t){var e=t.error,r=t.subscriber;r.error(e)}var ud=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return pa(this.value);case"E":return d0(this.error);case"C":return u0()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),R8=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new I8(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(ud.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(ud.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(ud.createComplete()),this.unsubscribe()},e}(Bt),I8=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),oc=function(t){et(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new T8(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new Vs;if(this.isStopped||this.hasError?a=Qr.EMPTY:(this.observers.push(r),a=new Sm(this,r)),s&&r.add(r=new R8(r,s)),n)for(var c=0;c<o&&!r.closed;c++)r.next(i[c]);else for(var c=0;c<o&&!r.closed;c++)r.next(i[c].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||A8).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(zo),T8=function(){function t(e,r){this.time=e,this.value=r}return t}(),O8=new Tm(Im),Mm=O8;function Ai(){}var P8=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),N8=P8,M8=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Lm=M8;function Ys(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new L8(t,e))}}var L8=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new C8(e,this.project,this.thisArg))},t}(),C8=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Bt),B8=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(Bt),k8=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Bt),D8=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,To),e}};function U8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ju=U8(),K8=function(t){return function(e){var r=t[ju]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},H8=function(t){return function(e){var r=t[Tc]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Cm=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Bm(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var h0=function(t){if(t&&typeof t[Tc]=="function")return H8(t);if(Cm(t))return Pm(t);if(Bm(t))return D8(t);if(t&&typeof t[ju]=="function")return K8(t);var e=xm(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function F8(t,e,r,n,i){if(i===void 0&&(i=new k8(t,r,n)),!i.closed)return e instanceof It?e.subscribe(i):h0(e)(i)}var P1={};function N1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return sc(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&c0(t[0])&&(t=t[0]),Nm(t,n).lift(new j8(r))}var j8=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new G8(e,this.resultSelector))},t}(),G8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(P1),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(F8(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===P1?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(B8);function V8(t,e){return new It(function(r){var n=new Qr;return n.add(e.schedule(function(){var i=t[Tc]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function q8(t,e){return new It(function(r){var n=new Qr;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function $8(t,e){if(!t)throw new Error("Iterable cannot be null");return new It(function(r){var n=new Qr,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[ju](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){r.error(c);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function z8(t){return t&&typeof t[Tc]=="function"}function W8(t){return t&&typeof t[ju]=="function"}function X8(t,e){if(t!=null){if(z8(t))return V8(t,e);if(Bm(t))return q8(t,e);if(Cm(t))return l0(t,e);if(W8(t)||typeof t=="string")return $8(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function lo(t,e){return e?X8(t,e):t instanceof It?t:new It(h0(t))}var Oc=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Bt),Pc=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Bt);function Nc(t,e){if(!e.closed){if(t instanceof It)return t.subscribe(e);var r;try{r=h0(t)(e)}catch(n){e.error(n)}return r}}function Gu(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(Gu(function(i,s){return lo(t(i,s)).pipe(Ys(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new J8(t,r))})}var J8=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new Y8(e,this.project,this.concurrent))},t}(),Y8=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new Oc(this),i=this.destination;i.add(n);var s=Nc(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(Pc);function Q8(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),Gu(f0,t)}function Z8(){return Q8(1)}function Uf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z8()(pa.apply(void 0,t))}function km(t){return new It(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?lo(r):u0();return n.subscribe(e)})}function M1(t){return!c0(t)&&t-parseFloat(t)+1>=0}var ex=new It(Ai);function Kf(t,e){return function(n){return n.lift(new tx(t,e))}}var tx=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new rx(e,this.predicate,this.thisArg))},t}(),rx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(Bt);function p0(t,e,r){return t===void 0&&(t=0),new It(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(nx,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function nx(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function L1(t,e,r){t===void 0&&(t=0);var n=-1;return M1(e)?n=Number(e)<1&&1||Number(e):sc(e)&&(r=e),sc(r)||(r=Mm),new It(function(i){var s=M1(t)?t:+t-r.now();return r.schedule(ix,s,{index:0,period:n,subscriber:i})})}function ix(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function g0(t){return function(r){var n=new sx(t),i=r.lift(n);return n.caught=i}}var sx=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new ox(e,this.selector,this.caught))},t}(),ox=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new Oc(this);this.add(i);var s=Nc(n,i);s!==i&&this.add(s)}},e}(Pc);function Mc(t,e){return Gu(t,e,1)}function ax(t){return t===void 0&&(t=null),function(e){return e.lift(new cx(t))}}var cx=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new fx(e,this.defaultValue))},t}(),fx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Bt);function ux(t){return t instanceof Date&&!isNaN(+t)}function Dm(t,e){return function(r){return r.lift(new lx(t,e))}}var lx=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new dx(e,this.compare,this.keySelector))},t}(),dx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(Bt);function hx(t,e){return Dm(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function px(t){return t===void 0&&(t=vx),function(e){return e.lift(new gx(t))}}var gx=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new bx(e,this.errorFactory))},t}(),bx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(Bt);function vx(){return new Lm}function mx(t){return function(e){return t===0?u0():e.lift(new yx(t))}}var yx=function(){function t(e){if(this.total=e,this.total<0)throw new N8}return t.prototype.call=function(e,r){return r.subscribe(new Ex(e,this.total))},t}(),Ex=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(Bt);function Um(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return Uf(r,pa.apply(void 0,t))}}function Bi(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Kf(function(i,s){return t(i,s,n)}):f0,mx(1),r?ax(e):px(function(){return new Lm}))}}function dh(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new _x(i,e));var s=Object.create(n,v8);return s.source=n,s.subjectFactory=i,s}}var _x=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function C1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return Ys(wx(t,r))(n)}}function wx(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i?.[t[s]];if(o!==void 0)i=o;else return}return i};return r}function Ax(t){return t?dh(function(){return new zo},t):dh(new zo)}function hh(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new oc(t,e,n);return function(o){return dh(function(){return s},i)(o)}}function Km(t){return t===void 0&&(t=-1),function(e){return e.lift(new xx(t,e))}}var xx=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new Sx(e,this.count,this.source))},t}(),Sx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(Bt);function B1(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(Rx(n))}}function Rx(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,c=0,l,f=!1,d=!1;return function(P){c++;var L;!a||f?(f=!1,a=new oc(r,i,o),L=a.subscribe(this),l=P.subscribe({next:function(H){a.next(H)},error:function(H){f=!0,a.error(H)},complete:function(){d=!0,l=void 0,a.complete()}}),d&&(l=void 0)):L=a.subscribe(this),this.add(function(){c--,L.unsubscribe(),L=void 0,l&&!d&&s&&c===0&&(l.unsubscribe(),l=void 0,a=void 0)})}}function Ix(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return sc(r)?(t.pop(),function(n){return Uf(t,n,r)}):function(n){return Uf(t,n)}}function ei(t,e){return typeof e=="function"?function(r){return r.pipe(ei(function(n,i){return lo(t(n,i)).pipe(Ys(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new Tx(t))}}var Tx=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new Ox(e,this.project))},t}(),Ox=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new Oc(this),s=this.destination;s.add(i),this.innerSubscription=Nc(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(Pc);function Px(t){return function(e){return e.lift(new Nx(t))}}var Nx=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new Mx(e),i=Nc(this.notifier,new Oc(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),Mx=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Pc);function Lx(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new Cx(t,e))}}var Cx=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new Bx(e,this.predicate,this.inclusive))},t}(),Bx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(Bt);function Hf(t,e,r){return function(i){return i.lift(new kx(t,e,r))}}var kx=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new Dx(e,this.nextOrObserver,this.error,this.complete))},t}(),Dx=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=Ai,o._tapError=Ai,o._tapComplete=Ai,o._tapError=i||Ai,o._tapComplete=s||Ai,Bf(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Ai,o._tapError=n.error||Ai,o._tapComplete=n.complete||Ai),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(Bt);function Hm(t,e,r){return r===void 0&&(r=Mm),function(n){var i=ux(t),s=i?+t-r.now():Math.abs(t);return n.lift(new Ux(s,i,e,r))}}var Ux=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new Kx(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),Kx=function(t){et(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(Nc(n,new Oc(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(Pc),Hx=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(o){return function(a,c){var l={key:a,value:o[a]},f={key:c,value:o[c]};return s(l,f)}}}(e.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,c;if(Array.isArray(o)){for(c="[",a=0;a<o.length;a++)a&&(c+=","),c+=s(o[a])||"null";return c+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,f=Object.keys(o).sort(n&&n(o));for(c="",a=0;a<f.length;a++){var d=f[a],I=s(o[d]);I&&(c&&(c+=","),c+=JSON.stringify(d)+":"+I)}return i.splice(l,1),"{"+c+"}"}}(t)},Fm;class Fx extends Error{constructor(e){super(`The map type '${e}' is invalid`),this.mapType=e,this.name="InvalidMapTypeError"}}const jm=Symbol.for("taquito-michelson-map-type-symbol"),jx=t=>"args"in t&&Array.isArray(t.args)&&t.args.length===2;class k1 extends Error{constructor(e,r,n){super(`${n} not compliant with underlying michelson type`),this.value=e,this.type=r,this.name="MapTypecheckError"}}class zr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[Fm]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&e[jm]===!0}setType(e){if(!jx(e))throw new Fx(e.toString());this.keySchema=new Wr(e.args[0]),this.valueSchema=new Wr(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,r){const n=new zr(r);return Object.keys(e).forEach(i=>{n.set(i,e[i])}),n}typecheckKey(e){return this.keySchema?this.keySchema.Typecheck(e):!0}typecheckValue(e){return this.valueSchema?this.valueSchema.Typecheck(e):!0}assertTypecheckValue(e){if(!this.typecheckValue(e))throw new k1(e,this.valueSchema,"value")}assertTypecheckKey(e){if(!this.typecheckKey(e))throw new k1(e,this.keySchema,"key")}serializeDeterministically(e){return Hx(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.valueMap.get(r)}set(e,r){this.assertTypecheckKey(e),this.assertTypecheckValue(r);const n=this.serializeDeterministically(e);this.keyMap.set(n,e),this.valueMap.set(n,r)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[r,n]of this.entries())e(n,r,this)}}Fm=jm;class dt extends Error{constructor(e,r,n){super(),this.value=e,this.token=r,this.name="ValidationError";const i=this.token.annot(),s=i?`[${i}] `:"";this.message=`${s}${n}`}}class Ft{constructor(e,r,n){this.val=e,this.idx=r,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=n=>{if(typeof n=="object"){if(Array.isArray(n))return n.map(o=>e(o));const i=n;return i.args?{prim:i.prim,args:i.args.map(s=>e(s))}:{prim:i.prim}}return n};return(n=>n.args?{prim:n.prim,args:n.args.map(i=>e(i))}:{prim:n.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Pt extends Ft{compare(e,r){return e===r?0:e<r?-1:1}}class D1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BigMapValidationError"}}class $r extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:$r.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(e){return zr.isMichelsonMap(e)?null:new D1(e,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(e){return e instanceof zr?e:typeof e=="object"?Object.keys(e).length===0?new zr:zr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[$r.prim]?r[$r.prim](n,this.val):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}Execute(e,r){if(r&&r[$r.prim])return r[$r.prim](e,this.val);if(Array.isArray(e)){const n=new zr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1]))}),n}else{if("int"in e)return e.int;throw new D1(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,r){return $r.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}$r.prim="big_map";class Gx extends Error{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class rt extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e[e.length-1],n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof rt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())===String(r)&&!(n instanceof rt))return e.pop(),{prim:"Left",args:[n.Encode(e)]};if(String(s.annot())===String(r)&&!(s instanceof rt))return e.pop(),{prim:"Right",args:[s.Encode(e)]};if(n instanceof rt){const o=n.Encode(e);if(o)return{prim:"Left",args:[o]}}if(s instanceof rt){const o=s.Encode(e);if(o)return{prim:"Right",args:[o]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let r=1;e instanceof rt&&(r=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+r),i=[];if(e instanceof rt)i.push(...e.ExtractSignature());else for(const s of e.ExtractSignature())i.push([e.annot(),...s]);if(n instanceof rt)i.push(...n.ExtractSignature());else for(const s of n.ExtractSignature())i.push([n.annot(),...s]);return i}EncodeObject(e,r){const n=Object.keys(e)[0],i=this.createToken(this.val.args[0],this.idx);let s=1;i instanceof rt&&(s=Object.keys(i.ExtractSchema()).length);const o=this.createToken(this.val.args[1],this.idx+s);if(String(i.annot())===String(n)&&!(i instanceof rt))return{prim:"Left",args:[i.EncodeObject(e[n],r)]};if(String(o.annot())===String(n)&&!(o instanceof rt))return{prim:"Right",args:[o.EncodeObject(e[n],r)]};if(i instanceof rt){const a=i.EncodeObject(e,r);if(a)return{prim:"Left",args:[a]}}if(o instanceof rt){const a=o.EncodeObject(e,r);if(a)return{prim:"Right",args:[a]}}return null}Execute(e,r){const n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof rt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(e.prim==="Right")return s instanceof rt?s.Execute(e.args[0],r):{[s.annot()]:s.Execute(e.args[0],r)};if(e.prim==="Left")return n instanceof rt?n.Execute(e.args[0],r):{[n.annot()]:n.Execute(e.args[0],r)};throw new Gx(`Was expecting Left or Right prim but got: ${e.prim}`)}traversal(e,r,n){const i=this.createToken(this.val.args[0],this.idx);let s=1,o;i instanceof rt&&!i.hasAnnotations()?(o=e(i),s=Object.keys(i.ExtractSchema()).length):o={[i.annot()]:e(i)};const a=this.createToken(this.val.args[1],this.idx+s);let c;return a instanceof rt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},n(o,c)}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}generateSchema(){return{__michelsonType:rt.prim,schema:this.traversal(e=>e instanceof rt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof rt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}}findToken(e){const r=this.createToken(this.val.args[0],this.idx);let n=1;r instanceof rt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+n);if(String(r.annot())===String(e)&&!(r instanceof rt)&&r instanceof Pt)return r;if(String(i.annot())===String(e)&&!(i instanceof rt)&&i instanceof Pt)return i;if(r instanceof rt){const s=r.findToken(e);if(s)return s}if(i instanceof rt){const s=i.findToken(e);if(s)return s}return null}compare(e,r){const n=Object.keys(e)[0],i=Object.keys(r)[0];if(n===i){const s=this.findToken(n);if(s instanceof Pt)return s.compare(e[n],r[n])}else{const s=JSON.stringify(this.EncodeObject(e)),o=JSON.stringify(this.EncodeObject(r));return s<o?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return rt.prim===e&&r.push(this),this.traversal(n=>n.findAndReturnTokens(e,r),n=>n.findAndReturnTokens(e,r),(n,i)=>Object.assign(Object.assign({},n),i)),r}}rt.prim="or";class Vx extends Error{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class qx extends Error{constructor(e,r){super(`Tokens ${e} and ${r} are not comparable`),this.val1=e,this.val2=r,this.name="TokenComparisonError"}}function ph(t,e=Kt.prim){if(Array.isArray(t))return ph({prim:e,args:t},e);if(t.args===void 0)throw new Vx("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return t.args.length>2?[t.args[0],{prim:e,args:t.args.slice(1)}]:[t.args[0],t.args[1]]}class Kt extends Pt{constructor(e,r,n){super(Array.isArray(e)?{prim:Kt.prim,args:e}:e.prim?e:{prim:Kt.prim,args:e},r,n)}args(){return ph(this.val)}tokens(){let e=0;return this.args().map(r=>{const n=this.createToken(r,this.idx+e);return n instanceof Kt?e+=Object.keys(n.ExtractSchema()).length:e++,n})}Encode(e){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(e))}}ExtractSignature(){const e=this.args(),r=this.createToken(e[0],this.idx);let n=1;r instanceof rt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(e[1],this.idx+n),s=[];for(const o of r.ExtractSignature())for(const a of i.ExtractSignature())s.push([...o,...a]);return s}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,r){const[n,i]=this.tokens();let s;n instanceof Kt&&!n.hasAnnotations()?s=e:s=e[n.annot()];let o;return i instanceof Kt&&!i.hasAnnotations()?o=e:o=e[i.annot()],{prim:"Pair",args:[n.EncodeObject(s,r),i.EncodeObject(o,r)]}}traversal(e,r){const n=this.args(),i=this.createToken(n[0],this.idx);let s=1,o;i instanceof Kt&&(s=Object.keys(i.ExtractSchema()).length),i instanceof Kt&&!i.hasAnnotations()?o=e(i):o={[i.annot()]:e(i)};const a=this.createToken(n[1],this.idx+s);let c;return a instanceof Kt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},Object.assign(Object.assign({},o),c)}Execute(e,r){const n=ph(e,"Pair");return this.traversal(i=>i.Execute(n[0],r),i=>i.Execute(n[1],r))}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema())}generateSchema(){return{__michelsonType:Kt.prim,schema:this.traversal(e=>e instanceof Kt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Kt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,r){const[n,i]=this.tokens(),s=(o,a)=>o instanceof Kt&&!o.hasAnnotations()?a:a[o.annot()];if(n instanceof Pt&&i instanceof Pt){const o=n.compare(s(n,e),s(n,r));return o===0?i.compare(s(i,e),s(i,r)):o}throw new qx(e,r)}findAndReturnTokens(e,r){return Kt.prim===e&&r.push(this),this.tokens().map(n=>n.findAndReturnTokens(e,r)),r}}Kt.prim="pair";class U1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NatValidationError"}}class Bn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new be(r).toFixed()}}isValid(e){const r=new be(e);return r.isNaN()?new U1(e,this,`Value is not a number: ${e}`):r.isNegative()?new U1(e,this,`Value cannot be negative: ${e}`):null}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Bn.prim]?r[Bn.prim](e):{int:new be(e).toFixed()}}ExtractSchema(){return Bn.prim}generateSchema(){return{__michelsonType:Bn.prim,schema:Bn.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Bn.prim}}}ToKey({int:e}){return new be(e)}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Bn.prim===e&&r.push(this),r}}Bn.prim="nat";class kn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return kn.prim}generateSchema(){return{__michelsonType:kn.prim,schema:kn.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[kn.prim]?r[kn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:kn.prim}}}findAndReturnTokens(e,r){return kn.prim===e&&r.push(this),r}}kn.prim="string";class ld extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="AddressValidationError"}}class Si extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:i8(e)},type:{prim:"bytes"}}}isValid(e){return ct(e)!==_e.VALID?new ld(e,this,`Address is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Si.prim]?r[Si.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new ld(e,this,`cannot be missing both string and bytes: ${e}`);return uh(e.bytes)}ExtractSchema(){return Si.prim}generateSchema(){return{__michelsonType:Si.prim,schema:Si.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new ld({bytes:e,string:r},this,`cannot be missing both string and bytes ${{string:r,bytes:e}}`);return uh(e)}compare(e,r){const n=o=>o.startsWith("tz"),i=n(e),s=n(r);return i&&!s?-1:s&&!i?1:super.compare(e,r)}findAndReturnTokens(e,r){return Si.prim===e&&r.push(this),r}}Si.prim="address";class $x extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MapValidationError"}}class bs extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return zr.isMichelsonMap(e)?null:new $x(e,this,"Value must be a MichelsonMap")}Execute(e,r){const n=new zr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1],r))}),n}objLitToMichelsonMap(e){return e instanceof zr?e:typeof e=="object"?Object.keys(e).length===0?new zr:zr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[bs.prim]?r[bs.prim](n):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:bs.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,r){return bs.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}bs.prim="map";class Dn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,r){return r&&r[Dn.prim]?r[Dn.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return Dn.prim}generateSchema(){return{__michelsonType:Dn.prim,schema:Dn.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:Dn.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,r){return e&&r||!e&&!r?0:e?1:-1}findAndReturnTokens(e,r){return Dn.prim===e&&r.push(this),r}}Dn.prim="bool";class qc extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="TxRollupL2AddressValidationError"}}class Ri extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:s8(e)},type:{prim:"bytes"}}}isValid(e){if(ct(e)!==_e.VALID)throw new qc(e,this,`tx_rollup_l2_address is not valid: ${e}`);return null}Encode(e){const r=e.pop();if(!r)throw new qc(r,this,`arg missing to encode: this -> "${r}"`);return this.isValid(r),{string:r}}EncodeObject(e,r){return this.isValid(e),r&&r[Ri.prim]?r[Ri.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new qc(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return m1(e.bytes)}ExtractSchema(){return Ri.prim}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new qc(e,this,`value cannot be missing string and byte value. must have one: bytes = ${e}`);return m1(e)}findAndReturnTokens(e,r){return Ri.prim===e&&r.push(this),r}}Ri.prim="tx_rollup_l2_address";class K1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ContractValidationError"}}class Dr extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return ct(e)!==_e.VALID?new K1(e,this,"Contract address is not valid"):null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new K1(e,this,"must contain bytes or string");return uh(e.bytes)}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Dr.prim]?r[Dr.prim](e):{string:e}}ExtractSchema(){return Dr.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:Dr.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,r){return Dr.prim===e&&r.push(this),r}}Dr.prim="contract";class zx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ListValidationError"}}class as extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(e){return Array.isArray(e)?null:new zx(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;const i=this.createToken(this.val.args[0],0);return r.reduce((s,o)=>[...s,i.EncodeObject(o)],[])}Execute(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return e.reduce((s,o)=>[...s,n.Execute(o,r)],[])}EncodeObject(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return r&&r[as.prim]?r[as.prim](e):e.reduce((s,o)=>[...s,n.EncodeObject(o)],[])}ExtractSchema(){return{[as.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:as.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,r){return as.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),r}}as.prim="list";class Wx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MutezValidationError"}}class Un extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}ExtractSchema(){return Un.prim}generateSchema(){return{__michelsonType:Un.prim,schema:Un.prim}}isValid(e){return new be(e).isNaN()?new Wx(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:String(r).toString()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Un.prim]?r[Un.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Un.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Un.prim===e&&r.push(this),r}}Un.prim="mutez";class Xx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BytesValidationError"}}class Kn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Kn.prim}}}isValid(e){return typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new Xx(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=E1(this.convertUint8ArrayToHexString(r));const n=this.isValid(r);if(n)throw n;return{bytes:String(r).toString()}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=E1(e));const n=this.isValid(e);if(n)throw n;return r&&r[Kn.prim]?r[Kn.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return Kn.prim}generateSchema(){return{__michelsonType:Kn.prim,schema:Kn.prim}}ToKey({bytes:e,string:r}){return r||e}findAndReturnTokens(e,r){return Kn.prim===e&&r.push(this),r}}Kn.prim="bytes";class Wo extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const r=e;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,r){const n=e;return n==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,r)]}}Execute(e,r){return e.prim==="None"?null:this.schema().Execute(e.args[0],r)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:Wo.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(e,r){if(e){if(!r)return 1}else return-1;return this.KeySchema.compare(e,r)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return Wo.prim===e&&r.push(this),this.subToken().findAndReturnTokens(e,r),r}}Wo.prim="option";class Hn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const r=e.pop();return typeof r=="number"?{int:String(r)}:{string:r}}EncodeObject(e,r){return r&&r[Hn.prim]?r[Hn.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}ExtractSchema(){return Hn.prim}generateSchema(){return{__michelsonType:Hn.prim,schema:Hn.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Hn.prim}}}findAndReturnTokens(e,r){return Hn.prim===e&&r.push(this),r}}Hn.prim="timestamp";class Jx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="IntValidationError"}}class _r extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}ExtractSchema(){return _r.prim}generateSchema(){return{__michelsonType:_r.prim,schema:_r.prim}}isValid(e){return new be(e).isNaN()?new Jx(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new be(r).toFixed()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[_r.prim]?r[_r.prim](e):{int:new be(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:_r.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return _r.prim===e&&r.push(this),r}}_r.prim="int";class Fn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,r){return r&&r[Fn.prim]?r[Fn.prim](e):{prim:"Unit"}}Execute(e){return z1}ExtractSchema(){return Fn.prim}generateSchema(){return{__michelsonType:Fn.prim,schema:Fn.prim}}compare(e,r){return 0}ToKey(e){return z1}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Fn.prim}}}findAndReturnTokens(e,r){return Fn.prim===e&&r.push(this),r}}Fn.prim="unit";const Yx=4;class Qx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyValidationError"}}class jn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:o8(e.bytes)}isValid(e){return ZA(e)!==_e.VALID?new Qx(e,this,"Key is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[jn.prim]?r[jn.prim](e):{string:e}}ExtractSchema(){return jn.prim}generateSchema(){return{__michelsonType:jn.prim,schema:jn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:jn.prim}}}compare(e,r){const n=this.getPrefix(e),i=this.getPrefix(r);if(n===re.EDPK&&i!==re.EDPK)return-1;if(n===re.SPPK&&i!==re.SPPK)return i===re.EDPK?1:-1;if(n===re.P2PK){if(i!==re.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(e),o=this.getP256PublicKeyComparableBytes(r);return Buffer.compare(s,o)}return super.compare(e,r)}getPrefix(e){return e.substring(0,Yx)}getP256PublicKeyComparableBytes(e){return Am(e,wr[re.P2PK]).slice(1)}findAndReturnTokens(e,r){return jn.prim===e&&r.push(this),r}}jn.prim="key";class Zx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyHashValidationError"}}class Gn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:y1(e.bytes)}isValid(e){return o0(e)!==_e.VALID?new Zx(e,this,`KeyHash is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Gn.prim]?r[Gn.prim](e):{string:e}}ExtractSchema(){return Gn.prim}generateSchema(){return{__michelsonType:Gn.prim,schema:Gn.prim}}ToKey({string:e,bytes:r}){return e||y1(r)}ToBigMapKey(e){return{key:{string:e},type:{prim:Gn.prim}}}findAndReturnTokens(e,r){return Gn.prim===e&&r.push(this),r}}Gn.prim="key_hash";class eS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SignatureValidationError"}}class Vn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:e.bytes}isValid(e){return QA(e)!==_e.VALID?new eS(e,this,"Signature is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Vn.prim]?r[Vn.prim](e):{string:e}}ExtractSchema(){return Vn.prim}generateSchema(){return{__michelsonType:Vn.prim,schema:Vn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Vn.prim}}}findAndReturnTokens(e,r){return Vn.prim===e&&r.push(this),r}}Vn.prim="signature";class cs extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,r){return r&&r[cs.prim]?r[cs.prim](e):e}ExtractSchema(){return{[cs.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:cs.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,r){return cs.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,r),r}}cs.prim="lambda";class Ii extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[Ii.prim]?r[Ii.prim](e):{string:e}}ExtractSchema(){return Ii.prim}generateSchema(){return{__michelsonType:Ii.prim,schema:Ii.prim}}findAndReturnTokens(e,r){return Ii.prim===e&&r.push(this),r}}Ii.prim="operation";class tS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SetValidationError"}}class fs extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Array.isArray(e)?null:new tS(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return r.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}Execute(e,r){return e.reduce((n,i)=>[...n,this.KeySchema.Execute(i,r)],[])}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[fs.prim]?r[fs.prim](e):e.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return fs.prim}generateSchema(){return{__michelsonType:fs.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,r){return fs.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),r}}fs.prim="set";class rS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChainIDValidationError"}}class qn extends Pt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return _m(e)!==_e.VALID?new rS(e,this,"ChainID is not valid"):null}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return qn.prim}generateSchema(){return{__michelsonType:qn.prim,schema:qn.prim}}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[qn.prim]?r[qn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:qn.prim}}}findAndReturnTokens(e,r){return qn.prim===e&&r.push(this),r}}qn.prim="chain_id";class H1 extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const nS={prim:"contract"},iS={prim:"int"};class Xn extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new H1}EncodeObject(e,r){if(r&&r[Xn.prim])return r[Xn.prim](e,this.val);throw new H1}Execute(e,r){if(r&&r[Xn.prim])return r[Xn.prim](e,this.val);const n=this.createToken(nS,this.idx),i=this.valueToken,s=this.createToken(iS,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Dr.prim,value:this.valueToken.ExtractSchema(),amount:_r.prim}}generateSchema(){return{__michelsonType:Xn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Dr.prim,schema:Dr.prim},amount:{__michelsonType:_r.prim,schema:_r.prim}}}}findAndReturnTokens(e,r){return Xn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}Xn.prim="ticket";class F1 extends Error{constructor(){super("Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"),this.name="TicketDeprecatedEncodeError"}}const sS={prim:"contract"},oS={prim:"int"};class Jn extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new F1}EncodeObject(e,r){if(r&&r[Jn.prim])return r[Jn.prim](e,this.val);throw new F1}Execute(e,r){if(r&&r[Jn.prim])return r[Jn.prim](e,this.val);const n=this.createToken(sS,this.idx),i=this.valueToken,s=this.createToken(oS,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Dr.prim,value:this.valueToken.ExtractSchema(),amount:_r.prim}}generateSchema(){return{__michelsonType:Jn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Dr.prim,schema:Dr.prim},amount:{__michelsonType:_r.prim,schema:_r.prim}}}}findAndReturnTokens(e,r){return Jn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}Jn.prim="ticket_deprecated";class dd extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NeverTokenError"}}class Ti extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e.pop();throw new dd(r,this,"Assigning a value to the type never is forbidden.")}EncodeObject(e,r){if(r&&r[Ti.prim])return r[Ti.prim](e);throw new dd(e,this,"Assigning a value to the type never is forbidden.")}Execute(e){throw new dd(e,this,"There is no literal value for the type never.")}ExtractSchema(){return Ti.prim}generateSchema(){return{__michelsonType:Ti.prim,schema:Ti.prim}}findAndReturnTokens(e,r){return Ti.prim===e&&r.push(this),r}}Ti.prim="never";class hd extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingStateValidationError"}}class $n extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,r){if(r&&r[$n.prim])return r[$n.prim](e,this.val);if("int"in e)return e.int;throw new hd(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(this.isValid(r))return[];throw new hd(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}EncodeObject(e,r){if(r&&r[$n.prim])return r[$n.prim](e);if(this.isValid(e))return[];throw new hd(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}ExtractSchema(){return{[$n.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:$n.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return $n.prim===e&&r.push(this),r}}$n.prim="sapling_state";class j1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionValidationError"}}class us extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new j1(e,this,"There is no literal value for the sapling_transaction type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new j1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[us.prim]?r[us.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[us.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:us.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return us.prim===e&&r.push(this),r}}us.prim="sapling_transaction";class G1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionDeprecatedValidationError"}}class ls extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new G1(e,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new G1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[ls.prim]?r[ls.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[ls.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:ls.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return ls.prim===e&&r.push(this),r}}ls.prim="sapling_transaction_deprecated";class aS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381frValidationError"}}class Oi extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new aS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}}EncodeObject(e,r){if(r&&r[Oi.prim])return r[Oi.prim](e);if(typeof e=="number")return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return{bytes:e}}}Execute(e){return e.bytes}ExtractSchema(){return Oi.prim}generateSchema(){return{__michelsonType:Oi.prim,schema:Oi.prim}}findAndReturnTokens(e,r){return Oi.prim===e&&r.push(this),r}}Oi.prim="bls12_381_fr";class cS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g1ValidationError"}}class Pi extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new cS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Pi.prim]?r[Pi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Pi.prim}generateSchema(){return{__michelsonType:Pi.prim,schema:Pi.prim}}findAndReturnTokens(e,r){return Pi.prim===e&&r.push(this),r}}Pi.prim="bls12_381_g1";class fS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g2ValidationError"}}class Ni extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new fS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ni.prim]?r[Ni.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ni.prim}generateSchema(){return{__michelsonType:Ni.prim,schema:Ni.prim}}findAndReturnTokens(e,r){return Ni.prim===e&&r.push(this),r}}Ni.prim="bls12_381_g2";class uS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestValidationError"}}class Mi extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new uS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Mi.prim]?r[Mi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Mi.prim}generateSchema(){return{__michelsonType:Mi.prim,schema:Mi.prim}}findAndReturnTokens(e,r){return Mi.prim===e&&r.push(this),r}}Mi.prim="chest";class lS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestKeyValidationError"}}class Li extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new lS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Li.prim]?r[Li.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Li.prim}generateSchema(){return{__michelsonType:Li.prim,schema:Li.prim}}findAndReturnTokens(e,r){return Li.prim===e&&r.push(this),r}}Li.prim="chest_key";class V1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantEncodingError"}}class dS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantDecodingError"}}class zn extends Ft{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e,r){if(r&&r[zn.prim])return r[zn.prim](e,this.val);throw new dS(e,this,`Unable to decode a value represented by a {} constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new V1(e,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,r){if(r&&r[zn.prim])return r[zn.prim](e);throw new V1(e,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return zn.prim}generateSchema(){return{__michelsonType:zn.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,r){return zn.prim===e&&r.push(this),r}}zn.prim="constant";const hS=[Kt,Bn,kn,$r,Si,Ri,bs,Dn,rt,Dr,as,Un,Kn,Wo,Hn,_r,Fn,jn,Gn,Vn,cs,Ii,fs,qn,Xn,Jn,Ti,$n,us,ls,Oi,Pi,Ni,Mi,Li,zn];class pS extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="Invalid token error"}}function ro(t,e){if(Array.isArray(t))return new Kt(t,e,ro);const r=hS.find(n=>n.prim===t.prim);if(!r)throw new pS("Malformed data expected a value with a valid prim property",t);return new r(t,e,ro)}class gS extends Error{constructor(e,r){super(`Unable to encode the parameter of the view: ${e}.`),this.smartContractViewName=e,this.originalError=r,this.name="ViewEncodingError"}}class q1 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidScriptError"}}class Gm extends Error{constructor(e){super("Invalid RPC response passed as argument(s)"),this.script=e,this.name="InvalidRpcResponseError"}}class $1 extends Error{constructor(e,r,n){super(`
      ${e}. Error encountered when trying to encode arguments: 

      [${r}]
    `),this.message=e,this.args=r,this.originalError=n,this.name="ParameterEncodingError"}}class $c extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchema"}}class bS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapDiff"}}class vS extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="BigMapEncodingError"}}class mS extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="StorageEncodingError"}}class yS extends Error{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var Vm;const qm=Symbol.for("taquito-schema-type-symbol");function ac(t,e=Kt.prim){var r,n;if(Array.isArray(t))return ac({prim:e,args:t},e);const i=t;return i.prim===e&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[(r=i.args)===null||r===void 0?void 0:r[0],{prim:e,args:(n=i.args)===null||n===void 0?void 0:n.slice(1)}]}):i}function $m(t,e){const r=ac(t),n=ac(e);return r.prim===n.prim&&(r.args===void 0&&n.args===void 0||r.args!==void 0&&n.args!==void 0&&r.args.length===n.args.length&&r.args.every((i,s)=>{var o,a;return $m(i,(a=(o=n.args)===null||o===void 0?void 0:o[s])!==null&&a!==void 0?a:{})}))&&(r.annots===void 0&&n.annots===void 0||r.annots!==void 0&&n.annots!==void 0&&r.annots.length===n.annots.length&&r.annots.every((i,s)=>{var o;return i===((o=n.annots)===null||o===void 0?void 0:o[s])}))}class Wr{constructor(e){if(this.val=e,this[Vm]=!0,this.root=ro(e,0),this.root instanceof $r)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const r=e.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new $r(r,0,ro))}}static isSchema(e){return e&&e[qm]===!0}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>{if(Array.isArray(n))this.fromRPCResponse({script:{code:n,storage:e.script.storage}});else{const i=n;return i.prim?i.prim==="storage":!1}});if(!r||!Array.isArray(r.args))throw new Gm(e.script);return new Wr(r.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof Kt||this.root instanceof rt)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,r){const n=this.root.Execute(e,r);return this.removeTopLevelAnnotation(n)}Typecheck(e){if(this.root instanceof $r&&Number.isInteger(Number(e))||this.root instanceof Xn&&e.ticketer&&e.value&&e.amount||this.root instanceof Jn&&e.ticketer&&e.value&&e.amount||this.root instanceof bs&&this.root.ValueSchema instanceof $r)return!0;try{return this.root.EncodeObject(e),!0}catch{return!1}}ExecuteOnBigMapDiff(e,r){if(!this.bigMap)throw new $c("Big map schema is undefined");if(!Array.isArray(e))throw new bS("Big map diff must be an array");const n=e.map(({key:i,value:s})=>({args:[i,s]}));return this.bigMap.Execute(n,r)}ExecuteOnBigMapValue(e,r){if(!this.bigMap)throw new $c("No big map schema");return this.bigMap.ValueSchema.Execute(e,r)}EncodeBigMapKey(e){if(!this.bigMap)throw new $c("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(r){throw new vS("big map key",r)}}Encode(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new mS("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,r){if(!this.bigMap)throw new $c("Big map schema is undefined");const n=e.reduce((i,s)=>Object.assign(Object.assign({},i),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(e,r){return this.findValue(this.root.val,e,r)}findValue(e,r,n){if($m(n,e))return r;if(Array.isArray(e)||e.prim==="pair"){const i=ac(e),s=ac(r,"Pair");if(i.args===void 0||s.args===void 0)throw new yS("Tokens have no arguments");if(i.args[0])return this.findValue(i.args[0],s.args[0],n)||this.findValue(i.args[1],s.args[1],n)}}findToken(e){const r=[];return this.root.findAndReturnTokens(e,r)}}Vm=qm;class Oo{constructor(e){this.root=ro(e,0)}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>n.prim==="parameter");if(!r||!Array.isArray(r.args))throw new Gm(e.script);return new Oo(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof rt||this.root instanceof Wo&&this.root.subToken()instanceof rt}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(e,r){return this.root.Execute(e,r)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(r){throw r instanceof dt?r:new $1("Unable to encode parameter",e.toString(),r)}}EncodeObject(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new $1("Unable to encode parameter object",e,n)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class b0{constructor(e){if(e.length!==4||!("string"in e[0]))throw new q1(`Invalid on-chain view: ${JSON.stringify(e)}`);this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=ro(this.viewArgsType,0),this.rootReturnType=ro(this.viewReturnType,0)}static fromRPCResponse(e){const r=[],n=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(i=>i.prim==="view");return n&&n.forEach(i=>{if(!i.args||i.args.length!==4)throw new q1(`Invalid on-chain view found in the script: ${JSON.stringify(i)}`);r.push(new b0(i.args))}),r}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(r){throw new gS(this.viewName,r)}}decodeViewResult(e,r){return this.rootReturnType.Execute(e,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}const z1=Symbol(),Or=Symbol("source_reference");class qs extends Error{constructor(e,r,n){super(n),this.src=e,this.idx=r,Object.setPrototypeOf(this,qs.prototype)}}var Pr;(function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"})(Pr||(Pr={}));const ES=new RegExp("\\s"),_S=new RegExp("[:@%_A-Za-z]"),wS=new RegExp("[@%_\\.A-Za-z0-9]"),W1=new RegExp("[0-9]"),AS=new RegExp("[0-9a-fA-F]");function*pd(t,e=!1){let r=0;for(;r<t.length;){for(;r<t.length&&ES.test(t[r]);)r++;if(r===t.length)return;const n=t[r],i=r;if(_S.test(n)){for(r++;r<t.length&&wS.test(t[r]);)r++;yield{t:Pr.Ident,v:t.slice(i,r),first:i,last:r}}else if(t.length-r>1&&t.substr(r,2)==="0x"){for(r+=2;r<t.length&&AS.test(t[r]);)r++;if(r-i&1)throw new qs(t,r,"Bytes literal length is expected to be power of two");yield{t:Pr.Bytes,v:t.slice(i,r),first:i,last:r}}else if(W1.test(n)||n==="-"){n==="-"&&r++;const s=r;for(;r<t.length&&W1.test(t[r]);)r++;if(s===r)throw new qs(t,r,"Number literal is too short");yield{t:Pr.Number,v:t.slice(i,r),first:i,last:r}}else if(n==='"'){r++;let s=!1;for(;r<t.length&&(s||t[r]!=='"');r++)!s&&t[r]==="\\"?s=!0:s=!1;if(r===t.length)throw new qs(t,r,"Unterminated string literal");r++,yield{t:Pr.String,v:t.slice(i,r),first:i,last:r}}else if(n==="#"){for(r++;r<t.length&&t[r]!==`
`;)r++;e&&(yield{t:Pr.Comment,v:t.slice(i,r),first:i,last:r})}else if(t.length-r>1&&t.substr(r,2)==="/*"){for(r+=2;r<t.length&&!(t.length-r>1&&t.substr(r,2)==="*/");)r++;if(r===t.length)throw new qs(t,r,"Unterminated C style comment");r+=2,e&&(yield{t:Pr.Comment,v:t.slice(i,r),first:i,last:r})}else if(n==="("||n===")"||n==="{"||n==="}"||n===";")r++,yield{t:n,v:n,first:i,last:r};else throw new qs(t,r,`Invalid character at offset ${r}: \`${n}'`)}}const zc=Symbol("ref_contract");var Ki;(function(t){t.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",t.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",t.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",t.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Ki||(Ki={}));const zm=Ki.Psithaca2,X1={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc:16,PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1:16,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:17};function Po(t,e){return X1[t]<X1[e]}class Xr extends Error{constructor(e,r){super(r),this.prim=e,Object.setPrototypeOf(this,Xr.prototype)}}function Et(t,e){var r,n;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new Xr(t,`macro ${t.prim} expects ${e} arguments, was given ${(n=t.args)===null||n===void 0?void 0:n.length}`)}function Ma(t){if(t.annots===void 0)return!0;throw new Xr(t,`unexpected annotation on macro ${t.prim}: ${t.annots}`)}function J1(t,e){if("int"in e)return!0;throw new Xr(t,`macro ${t.prim} expects int argument`)}function qa(t,e,r,n){let i=0,s=0;const o=[null,null];let a;if(i===e.length)throw new Xr(t,`unexpected end: ${t.prim}`);let c=e[i++];switch(c){case"P":{const{r:f,n:d,an:I}=qa(t,e.slice(i),r.slice(s),n);a=f,i+=d,s+=I;break}case"A":s!==r.length&&(o[0]=r[s++]);break;default:throw new Xr(t,`${t.prim}: unexpected character: ${c}`)}let l;if(i===e.length)throw new Xr(t,`unexpected end: ${t.prim}`);switch(c=e[i++],c){case"P":{const{r:f,n:d,an:I}=qa(t,e.slice(i),r.slice(s),n);l=f.map(([P,L])=>[P+1,L]),i+=d,s+=I;break}case"I":s!==r.length&&(o[1]=r[s++]);break;default:throw new Xr(t,`${t.prim}: unexpected character: ${c}`)}return{r:n(a,l,[0,o]),n:i,an:s}}function Ff(t,e,r,n){const i=e[0];switch(i){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},Ff(t,e.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:n.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},Ff(t,e.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:n.d;default:throw new Xr(t,`${t.prim}: unexpected character: ${i}`)}}function xS(t,e){let r=t.length;for(;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}function gd(t){const e=[],r=[];if(t!==void 0)for(const n of t)(n.length!==0&&n[0]==="%"?e:r).push(n);return{fields:e,rest:r}}function Xt({prim:t,annots:e,args:r}){return Object.assign(Object.assign({prim:t},e&&{annots:e}),r&&{args:r})}const SS=/^P[PAI]{3,}R$/,RS=/^UNP[PAI]{2,}R$/,IS=/^C[AD]{2,}R$/,TS=/^SET_C[AD]+R$/,OS=/^MAP_C[AD]+R$/,PS=/^DI{2,}P$/,NS=/^DU+P$/;function MS(t,e){const r=e?.protocol||zm;function n(i){return i!==void 0?[{prim:"RENAME",annots:i}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(Et(t,0))return[{prim:"COMPARE"},Xt({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(Et(t,2))return[{prim:t.prim.slice(2)},Xt({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(Et(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},Xt({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(Et(t,0)&&Ma(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(Et(t,0)&&Ma(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(Et(t,0)&&Ma(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(Et(t,0)&&Ma(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(Et(t,0)&&Ma(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(Et(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"ASSERT_LEFT":if(Et(t,0))return[{prim:"IF_LEFT",args:[n(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(Et(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"IF_SOME":if(Et(t,2))return[Xt({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(Et(t,2))return[Xt({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"CAR":case"CDR":if(t.args!==void 0){if(Et(t,1)&&J1(t,t.args[0])){const i=parseInt(t.args[0].int,10);return Xt({prim:"GET",args:[{int:t.prim==="CAR"?String(i*2+1):String(i*2)}],annots:t.annots})}}else return t}if(SS.test(t.prim)&&Et(t,0)){const{fields:i,rest:s}=gd(t.annots),{r:o}=qa(t,t.prim.slice(1),i,(a,c,l)=>[...a||[],...c||[],l]);return o.map(([a,c],l)=>{const f=[...xS(c,null).map(I=>I===null?"%":I),...a===0&&l===o.length-1?s:[]],d=Xt({prim:"PAIR",annots:f.length!==0?f:void 0});return a===0?d:{prim:"DIP",args:a===1?[[d]]:[{int:String(a)},[d]]}})}if(RS.test(t.prim))if(Po(r,Ki.PtEdo2Zk)&&Et(t,0)){const{r:i}=qa(t,t.prim.slice(3),t.annots||[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s,o])=>{const a=[{prim:"DUP"},Xt({prim:"CAR",annots:o[0]!==null?[o[0]]:void 0}),{prim:"DIP",args:[[Xt({prim:"CDR",annots:o[1]!==null?[o[1]]:void 0})]]}];return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}else{if(t.prim==="UNPAIR")return t;if(Et(t,0)){const{r:i}=qa(t,t.prim.slice(3),[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s])=>{const o=Xt({prim:"UNPAIR"});return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}}if(IS.test(t.prim)&&Et(t,0)){const i=[...t.prim.slice(1,t.prim.length-1)];return i.map((s,o)=>{const a=o===i.length-1?t.annots:void 0;switch(s){case"A":return Xt({prim:"CAR",annots:a});case"D":return Xt({prim:"CDR",annots:a});default:throw new Xr(t,`unexpected character: ${s}`)}})}if(TS.test(t.prim)&&Et(t,0)){const{fields:i,rest:s}=gd(t.annots);if(i.length>1)throw new Xr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const o=i.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:i},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[i[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:i},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return Ff(t,t.prim.slice(5,t.prim.length-1),s,o)}if(OS.test(t.prim)&&Et(t,1)){const{fields:i}=gd(t.annots);if(i.length>1)throw new Xr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[Xt({prim:"CAR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[i.length!==0?i[0]:"%","%@"]}],d:[{prim:"DUP"},Xt({prim:"CDR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i.length!==0?i[0]:"%"]}]};return Ff(t,t.prim.slice(5,t.prim.length-1),[],s)}if(PS.test(t.prim)&&Et(t,1)){let i=0;for(;t.prim[1+i]==="I";)i++;return Xt({prim:"DIP",args:[{int:String(i)},t.args[0]]})}if(NS.test(t.prim)){let i=0;for(;t.prim[1+i]==="U";)i++;if(Po(r,Ki.PtEdo2Zk)){if(i===1){if(t.args===void 0)return t;Et(t,1)&&J1(t,t.args[0])&&(i=parseInt(t.args[0].int,10))}else Et(t,0);return i===1?[Xt({prim:"DUP",annots:t.annots})]:i===2?[{prim:"DIP",args:[[Xt({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(i-1)},[Xt({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(i)}]}]}else{if(i===1)return t;if(Et(t,0))return Xt({prim:"DUP",args:[{int:String(i)}],annots:t.annots})}}return t}function LS(t,e){return t.args!==void 0&&t.args.length===1&&"string"in t.args[0]&&t.args[0].string in e?e[t.args[0].string]:t}class Uo extends Error{constructor(e,r){super(r),this.token=e,Object.setPrototypeOf(this,Uo.prototype)}}class Ln extends Error{constructor(e,r){super(r),this.node=e,Object.setPrototypeOf(this,Ln.prototype)}}const bd=new Uo(null,"Unexpected EOF");function Y1(t){return t.t===Pr.Ident&&(t.v[0]==="@"||t.v[0]==="%"||t.v[0]===":")}const CS=new RegExp("^-?[0-9]+$"),BS=new RegExp("^([0-9a-fA-F]{2})*$");class zs{constructor(e){this.opt=e}expand(e){var r,n,i;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&e.prim==="constant"){const s=LS(e,this.opt.expandGlobalConstant);return s!==e&&(s[Or]=Object.assign(Object.assign({},e[Or]||{first:0,last:0}),{globalConstant:e})),s}if(((n=this.opt)===null||n===void 0?void 0:n.expandMacros)===void 0||!((i=this.opt)===null||i===void 0)&&i.expandMacros){const s=MS(e,this.opt);return s!==e&&(s[Or]=Object.assign(Object.assign({},e[Or]||{first:0,last:0}),{macro:e})),s}else return e}parseListExpr(e,r){var n;const i={first:r.first,last:r.last},s=r.t==="(";let o;if(s){if(o=e.next(),o.done)throw bd;i.last=o.value.last}else o={value:r};if(o.value.t!==Pr.Ident)throw new Uo(o.value,`not an identifier: ${o.value.v}`);const a={prim:o.value.v,[Or]:i};for(;;){const c=e.next();if(c.done){if(s)throw bd;break}else if(c.value.t===")"){if(!s)throw new Uo(c.value,"unexpected closing bracket");i.last=c.value.last;break}else if(Y1(c.value))a.annots=a.annots||[],a.annots.push(c.value.v),i.last=c.value.last;else{a.args=a.args||[];const l=this.parseExpr(e,c.value);i.last=((n=l[Or])===null||n===void 0?void 0:n.last)||i.last,a.args.push(l)}}return this.expand(a)}parseArgs(e,r){var n;const i={first:r.first,last:r.last},s={prim:r.v,[Or]:i};for(;;){const o=e.next();if(o.done||o.value.t==="}"||o.value.t===";")return[s,o];if(Y1(o.value))i.last=o.value.last,s.annots=s.annots||[],s.annots.push(o.value.v);else{const a=this.parseExpr(e,o.value);i.last=((n=a[Or])===null||n===void 0?void 0:n.last)||i.last,s.args=s.args||[],s.args.push(a)}}}parseSequenceExpr(e,r){var n,i;const s={first:r.first,last:r.last},o=[];o[Or]=s;const a=r.t==="{";let c=r.t==="{"?null:{value:r};for(;;){if(c===null&&(c=e.next(),c.done||(s.last=c.value.last)),c.done){if(a)throw bd;return o}if(c.value.t==="}"){if(a)return o;throw new Uo(c.value,"unexpected closing bracket")}else if(c.value.t===Pr.Ident){const[l,f]=this.parseArgs(e,c.value);s.last=((n=l[Or])===null||n===void 0?void 0:n.last)||s.last,o.push(this.expand(l)),c=f}else{const l=this.parseExpr(e,c.value);s.last=((i=l[Or])===null||i===void 0?void 0:i.last)||s.last,o.push(l),c=null}c===null&&(c=e.next(),c.done||(s.last=c.value.last)),!c.done&&c.value.t===";"&&(c=null)}}parseExpr(e,r){switch(r.t){case Pr.Ident:return this.expand({prim:r.v,[Or]:{first:r.first,last:r.last}});case Pr.Number:return{int:r.v,[Or]:{first:r.first,last:r.last}};case Pr.String:return{string:JSON.parse(r.v),[Or]:{first:r.first,last:r.last}};case Pr.Bytes:return{bytes:r.v.slice(2),[Or]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(e,r);default:return this.parseListExpr(e,r)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=pd(e),n=r.next();return n.done?null:this.parseSequenceExpr(r,n.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=pd(e),n=r.next();return n.done?null:this.parseListExpr(r,n.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=pd(e),n=r.next();return n.done?null:this.parseExpr(r,n.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const r=[];for(const n of e){if(n===null||typeof n!="object")throw new Ln(n,`unexpected sequence element: ${n}`);r.push(this.parseJSON(n))}return r}else if("prim"in e){const r=e;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const n={prim:r.prim};if(r.annots!==void 0){for(const i of r.annots)if(typeof i!="string")throw new Ln(i,`string expected: ${i}`);n.annots=r.annots}if(r.args!==void 0){n.args=[];for(const i of r.args){if(i===null||typeof i!="object")throw new Ln(i,`unexpected argument: ${i}`);n.args.push(this.parseJSON(i))}}return this.expand(n)}throw new Ln(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new Ln(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&CS.test(e.int))return{int:e.int};throw new Ln(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&BS.test(e.bytes))return{bytes:e.bytes};throw new Ln(e,`malformed bytes literal: ${e}`)}else throw new Ln(e,`unexpected object: ${e}`)}}const kS=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],DS=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class gh extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}class US extends Error{constructor(e){super(e),this.message=e,this.name="InvalidMessageError"}}function Q1(t){const e=(t.length+9)%64,r=e===0?0:64-e;if(t.length>268435455)throw new US(`SHA-256 -- message length is too big: ${t.length}`);const n=t.length<<3,i=[...t,128,...new Array(r).fill(0),0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255];function s(f,d){return f>>>d|f<<32-d}const o=[...kS],a=new Array(64),c=new Array(8);for(let f=0;f<i.length;f+=64){let d=f,I=0;for(;I<16;)a[I]=i[d]<<24|i[d+1]<<16|i[d+2]<<8|i[d+3],d+=4,I++;for(;I<64;){const P=s(a[I-15],7)^s(a[I-15],18)^a[I-15]>>>3,L=s(a[I-2],17)^s(a[I-2],19)^a[I-2]>>>10;a[I]=(L|0)+a[I-7]+P+a[I-16]|0,I++}for(let P=0;P<8;P++)c[P]=o[P];for(let P=0;P<64;P++){const L=s(c[0],2)^s(c[0],13)^s(c[0],22),H=s(c[4],6)^s(c[4],11)^s(c[4],25),q=c[7]+H+(c[4]&c[5]^~c[4]&c[6])+DS[P]+a[P]|0,G=L+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+q|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=q+G|0}for(let P=0;P<8;P++)o[P]=o[P]+c[P]|0}const l=[];for(const f of o)l.push(f>>24&255),l.push(f>>16&255),l.push(f>>8&255),l.push(f&255);return l}const vd=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Z1(t,e){const r=t.charCodeAt(e)-49;if(r>=vd.length||vd[r]===-1)throw new gh(`Unexpected character at position ${e}: ${t[e]}`);return vd[r]}function KS(t){const e=[];let r=0;for(;r<t.length&&Z1(t,r)===0;)r++;let n=r;for(;r<t.length;){let i=Z1(t,r++),s=0;for(;i!==0||s<e.length;){const o=(e[s]||0)*58+i;e[s++]=o%256,i=Math.floor(o/256)}}for(;n-- >0;)e.push(0);return e.reverse()}function Wm(t){const e=KS(t);if(e.length<4)throw new gh(`Data is too short ${e.length}`);const r=e.slice(0,e.length-4),n=e.slice(e.length-4),i=Q1(Q1(r));if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==i[3])throw new gh("Invalid checksum");return r}class HS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidContractError"}}class FS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidTypeExpressionError"}}class jS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidDataExpressionError"}}class GS extends Error{constructor(e){super(`Contract has no entrypoint named: '${e}'`),this.entrypoint=e,this.name="InvalidEntrypointError"}}class VS extends Error{constructor(e){super(e),this.message=e,this.name="LongIntegerError"}}class Jr extends Error{constructor(e,r){super(r),this.val=e,Object.setPrototypeOf(this,Jr.prototype)}}class nt extends Jr{constructor(e,r,n){super(e,n),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,nt.prototype)}}class Xm{constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(r===0&&n===45)this.neg=!0;else{if(n<48||n>57)throw new VS(`unexpected character in integer constant: ${e[r]}`);this.append(n-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let r=0;for(;e!==0||r<this.buf.length;){const n=(this.buf[r]||0)*10+e;this.buf[r++]=n%256,e=Math.floor(n/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==e.buf.length)r=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let n=e.buf.length-1;for(;n>=0&&this.buf[n]===e.buf[n];)n--;r=n<0?0:this.buf[n]<e.buf[n]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function Ko(t){const e=[];for(let r=0;r<t.length;r+=2){const n=parseInt(t.slice(r,r+2),16);if(Number.isNaN(n))return null;e.push(n)}return e}function bh(t){try{return new Xm(t),!0}catch{return!1}}function Jm(t){try{return new Xm(t).sign>=0}catch{return!1}}const qS=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function Xo(t,e){if(Array.isArray(t))return{};let r,n,i;if(t.annots!==void 0){for(const s of t.annots)if(s.length!==0){if(!qS.test(s)||!e?.specialVar&&(s==="@%"||s==="@%%")||!e?.specialFields&&s==="%@")throw new Jr(t,`${t.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(e?.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(n=n||[],n.push(s));break;case"@":(e?.emptyVar||s.length>1)&&(i=i||[],i.push(s));break}}}return{f:r,t:n,v:i}}const $S={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function Wc(t,...e){const r=Wm(t);for(const n of e){const[i,s]=$S[n];if(r.length===i+s.length){let o=0;for(;o<s.length&&r[o]===s[o];)o++;if(o===s.length)return[n,r.slice(s.length)]}}return null}function wn(t,e){const r=e,n=Array.isArray(r)?r:r.args;return n.length===2?t==="pair"?{prim:"pair",args:n}:{prim:"Pair",args:n}:Object.assign(Object.assign({},Array.isArray(r)?{prim:t}:r),{args:[n[0],{prim:t,args:n.slice(1)}]})}function ds(t){return Array.isArray(t)||t.prim==="pair"}function zS(t){return Array.isArray(t)||"prim"in t&&t.prim==="Pair"}const WS=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function XS(t){if("string"in t){if(Jm(t.string))return new Date(parseInt(t.string,10));if(WS.test(t.string)){const e=new Date(t.string);if(!Number.isNaN(e.valueOf))return e}}else if(bh(t.int))return new Date(parseInt(t.int,10));return null}const JS=31,Ym={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0,BYTES:!0,NAT:!0},Qm=Object.assign({},Ym,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Zm={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},ga=Object.assign({},Zm,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class ut extends Jr{constructor(e,r){super(e,r),this.val=e,Object.setPrototypeOf(this,ut.prototype)}}function di(t){return"prim"in t}function YS(t){return Array.isArray(t)||"prim"in t}function e2(t){if(di(t))return!0;throw new ut(t,"prim expression expected")}function hs(t){if(Array.isArray(t))return!0;throw new ut(t,"sequence expression expected")}function yr(t){if(YS(t))return!0;throw new ut(t,"prim or sequence expression expected")}function md(t){if(t.int[0]==="-")throw new ut(t,"natural number expected")}function _f(t){if("int"in t)return!0;throw new ut(t,"int literal expected")}function t2(t){if("string"in t)return!0;throw new ut(t,"string literal expected")}function it(t,e){var r;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new ut(t,`${e} arguments expected`)}function An(t){var e,r;if(Array.isArray(t)){for(const n of t){if(!Array.isArray(n)&&!di(n))throw new ut(t,"sequence or prim expected");An(n)}return!0}if(e2(t)){if(Object.prototype.hasOwnProperty.call(Ym,t.prim))return it(t,0),!0;switch(t.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":t.args!==void 0&&it(t,1)&&_f(t.args[0])&&md(t.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":it(t,1)&&_f(t.args[0])&&md(t.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":it(t,1)&&ki(t.args[0]);break;case"UNPACK":it(t,1)&&v0(t.args[0]);break;case"CONTRACT":it(t,1)&&Vu(t.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":it(t,2)&&(hs(t.args[0])&&An(t.args[0]),hs(t.args[1])&&An(t.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":it(t,1)&&An(t.args[0]);break;case"CREATE_CONTRACT":it(t,1)&&n2(t.args[0]);break;case"DIP":if(((e=t.args)===null||e===void 0?void 0:e.length)===2)_f(t.args[0])&&md(t.args[0]),hs(t.args[1])&&An(t.args[1]);else if(((r=t.args)===null||r===void 0?void 0:r.length)===1)hs(t.args[0])&&An(t.args[0]);else throw new ut(t,"1 or 2 arguments expected");break;case"PUSH":it(t,2)&&(Jo(t.args[0]),$s(t.args[1]));break;case"EMPTY_SET":it(t,1)&&Hi(t.args[0]);break;case"EMPTY_MAP":it(t,2)&&(Hi(t.args[0]),ki(t.args[1]));break;case"EMPTY_BIG_MAP":it(t,2)&&(Hi(t.args[0]),qu(t.args[1]));break;case"LAMBDA_REC":case"LAMBDA":it(t,3)&&(ki(t.args[0]),ki(t.args[1]),hs(t.args[2])&&An(t.args[2]));break;case"VIEW":it(t,2)&&(t2(t.args[0])&&r2(t.args[0]),ki(t.args[1])&&Jo(t.args[1]));break;case"EMIT":t.args&&t.args.length>0?it(t,1):it(t,0);break;default:throw new ut(t,"instruction expected")}}return!0}function Hi(t){if(yr(t)){if(Array.isArray(t)||t.prim==="pair"||t.prim==="or"||t.prim==="option")ho(t,e=>Hi(e));else if(!Object.prototype.hasOwnProperty.call(Zm,t.prim))throw new ut(t,`${t.prim}: type is not comparable`)}return!0}function v0(t){if(yr(t)&&di(t)){if(!Object.prototype.hasOwnProperty.call(ga,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket")throw new ut(t,`${t.prim}: type can't be used inside PACK/UNPACK instructions`);ho(t,e=>v0(e))}return!0}function Jo(t){if(yr(t)&&di(t)){if(!Object.prototype.hasOwnProperty.call(ga,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be pushed`);ho(t,e=>Jo(e))}return!0}function m0(t){if(yr(t)&&di(t)){if(!Object.prototype.hasOwnProperty.call(ga,t.prim)||t.prim==="operation"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be used as part of a storage`);ho(t,e=>m0(e))}return!0}function Vu(t){if(yr(t)&&di(t)){if(!Object.prototype.hasOwnProperty.call(ga,t.prim)||t.prim==="operation")throw new ut(t,`${t.prim}: type can't be used as part of a parameter`);ho(t,e=>Vu(e))}return!0}function qu(t){if(yr(t)&&di(t)){if(!Object.prototype.hasOwnProperty.call(ga,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state")throw new ut(t,`${t.prim}: type can't be used inside a big_map`);ho(t,e=>qu(e))}return!0}const QS=new RegExp("^[a-zA-Z0-9_.%@]*$");function r2(t){if(t.string.length>JS)throw new ut(t,`view name too long: ${t.string}`);if(!QS.test(t.string))throw new ut(t,`invalid character(s) in view name: ${t.string}`)}function ki(t){if(yr(t)&&di(t)){if(!Object.prototype.hasOwnProperty.call(ga,t.prim))throw new ut(t,"type expected");ho(t,e=>ki(e))}return!0}function ho(t,e){if(Array.isArray(t)||t.prim==="pair"){const r=Array.isArray(t)?t:t.args;if(r===void 0||r.length<2)throw new ut(t,"at least 2 arguments expected");return r.forEach(n=>{yr(n)&&e(n)}),!0}switch(t.prim){case"option":case"list":it(t,1)&&yr(t.args[0])&&e(t.args[0]);break;case"contract":it(t,1)&&Vu(t.args[0]);break;case"or":it(t,2)&&yr(t.args[0])&&yr(t.args[1])&&(e(t.args[0]),e(t.args[1]));break;case"lambda":it(t,2)&&(ki(t.args[0]),ki(t.args[1]));break;case"set":it(t,1)&&Hi(t.args[0]);break;case"map":it(t,2)&&yr(t.args[0])&&yr(t.args[1])&&(Hi(t.args[0]),e(t.args[1]));break;case"big_map":it(t,2)&&yr(t.args[0])&&yr(t.args[1])&&(Hi(t.args[0]),qu(t.args[1]),e(t.args[1]));break;case"ticket":it(t,1)&&yr(t.args[0])&&Hi(t.args[0]);break;case"sapling_state":case"sapling_transaction":it(t,1)&&_f(t.args[0]);break;default:it(t,0)}return!0}function $s(t){if("int"in t||"string"in t||"bytes"in t)return!0;if(Array.isArray(t)){let e=0;for(const r of t)di(r)&&r.prim==="Elt"?(it(r,2)&&($s(r.args[0]),$s(r.args[1])),e++):$s(r);if(e!==0&&e!==t.length)throw new ut(t,"data entries and map elements can't be intermixed");return!0}if(di(t))switch(t.prim){case"Unit":case"True":case"False":case"None":it(t,0);break;case"Pair":if(t.args===void 0||t.args.length<2)throw new ut(t,"at least 2 arguments expected");for(const e of t.args)$s(e);break;case"Left":case"Right":case"Some":it(t,1)&&$s(t.args[0]);break;case"Lambda_rec":t.args&&An(t.args);break;default:if(Object.prototype.hasOwnProperty.call(Qm,t.prim))An(t);else throw new ut(t,"data entry or instruction expected")}else throw new ut(t,"data entry expected");return!0}function n2(t){if(hs(t)){const e={},r={};for(const n of t)if(e2(n)){if(n.prim!=="view"){if(n.prim in e)throw new ut(t,`duplicate contract section: ${n.prim}`);e[n.prim]=!0}switch(n.prim){case"code":it(n,1)&&hs(n.args[0])&&An(n.args[0]);break;case"parameter":if(it(n,1)&&Vu(n.args[0]),n.annots)throw new ut(n,"Annotation must be part of the parameter type");break;case"storage":it(n,1)&&m0(n.args[0]);break;case"view":if(it(n,4)){if(t2(n.args[0])){const i=n.args[0];if(i.string in r)throw new ut(t,`duplicate view name: ${i.string}`);r[i.string]=!0,r2(i)}Jo(n.args[1]),Jo(n.args[2]),hs(n.args[3])&&An(n.args[3])}break;default:throw new ut(t,`unexpected contract section: ${n.prim}`)}}}return!0}function i2(t){return Object.prototype.hasOwnProperty.call(Qm,t.prim)}function eg(t){if(!Array.isArray(t))return!1;for(const e of t)if("prim"in e){if(i2(e))throw new Jr(t,`Instruction outside of a lambda: ${JSON.stringify(t)}`);if(e.prim==="Elt")throw new Jr(t,`Elt item outside of a map literal: ${JSON.stringify(t)}`)}return!0}function ZS(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}const eR=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET","BYTES","NAT"];Object.assign({},...eR.map((t,e)=>({[t]:e})));var tg;(function(t){t[t.Int=0]="Int",t[t.String=1]="String",t[t.Sequence=2]="Sequence",t[t.Prim0=3]="Prim0",t[t.Prim0Annot=4]="Prim0Annot",t[t.Prim1=5]="Prim1",t[t.Prim1Annot=6]="Prim1Annot",t[t.Prim2=7]="Prim2",t[t.Prim2Annot=8]="Prim2Annot",t[t.Prim=9]="Prim",t[t.Bytes=10]="Bytes"})(tg||(tg={}));const rs=new Error("bounds out of range");class Yo{constructor(e,r=0,n=e.length){this.buffer=e,this.idx=r,this.cap=n}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw rs;const r=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,r}reader(e){if(this.cap-this.idx<e)throw rs;const r=new Yo(this.buffer,this.idx,this.idx+e);return this.idx+=e,r}copy(){return new Yo(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw rs;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw rs;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw rs;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return(e<<24|r<<16|n<<8|i)>>>0}readInt8(){if(this.cap-this.idx<1)throw rs;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw rs;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw rs;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return e<<24|r<<16|n<<8|i}}var jf;(function(t){t[t.Implicit=0]="Implicit",t[t.Originated=1]="Originated"})(jf||(jf={}));var $a;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})($a||($a={}));function s2(t){let e;const r=t.readUint8();switch(r){case $a.ED25519:e="ED25519PublicKeyHash";break;case $a.SECP256K1:e="SECP256K1PublicKeyHash";break;case $a.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:e,hash:t.readBytes(20)}}function tR(t){let e;const r=t.readUint8();switch(r){case jf.Implicit:e=s2(t);break;case jf.Originated:e={type:"ContractHash",hash:t.readBytes(20)},t.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(t.length!==0){const n=new TextDecoder;e.entryPoint=n.decode(new Uint8Array(t.readBytes(t.length)))}return e}var za;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(za||(za={}));function rR(t){let e,r;const n=t.readUint8();switch(n){case za.ED25519:r="ED25519PublicKey",e=32;break;case za.SECP256K1:r="SECP256K1PublicKey",e=33;break;case za.P256:r="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${n}`)}return{type:r,publicKey:t.readBytes(e)}}function nR(t){const e=Ko(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Yo(new Uint8Array(e));return tR(r)}function iR(t){const e=Ko(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Yo(new Uint8Array(e));return s2(r)}function sR(t){const e=Ko(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new Yo(new Uint8Array(e));return rR(r)}class Ue extends Jr{constructor(e,r,n){super(e,n),this.stackState=r,Object.setPrototypeOf(this,Ue.prototype)}}function lt(t){return Array.isArray(t)?"pair":t.prim}function Gf(t){return"prim"in t?t.args:t}function xn(t,e,r=!1){if(lt(t)!==lt(e))throw new nt(t,void 0,`types mismatch: ${lt(t)} != ${lt(e)}`);const n=[Xo(t),Xo(e)];if(n[0].t&&n[1].t&&n[0].t[0]!==n[1].t[0])throw new nt(t,void 0,`${lt(t)}: type names mismatch: ${n[0].t[0]} != ${n[1].t[0]}`);if(r&&n[0].f&&n[1].f&&n[0].f[0]!==n[1].f[0])throw new nt(t,void 0,`${lt(t)}: field names mismatch: ${n[0].f[0]} != ${n[1].f}`);if(ds(t)){const i=wn("pair",t),s=wn("pair",e);xn(i.args[0],s.args[0],!0),xn(i.args[1],s.args[1],!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":case"ticket":xn(t.args[0],e.args[0]);break;case"or":xn(t.args[0],e.args[0],!0),xn(t.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":xn(t.args[0],e.args[0]),xn(t.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(t.args[0].int,10)!==parseInt(e.args[0].int,10))throw new nt(t,void 0,`${lt(t)}: type argument mismatch: ${t.args[0].int} != ${e.args[0].int}`)}}function o2(t,e){if(t.length!==e.length)throw new nt(t,void 0,`stack length mismatch: ${t.length} != ${e.length}`);for(let r=0;r<t.length;r++)xn(t[r],e[r])}function wt(t,e=!1){var r,n,i;if(!Array.isArray(t)){const s=Xo(t);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new nt(t,void 0,`${t.prim}: at most one type annotation allowed: ${t.annots}`);if(e){if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>1)throw new nt(t,void 0,`${t.prim}: at most one field annotation allowed: ${t.annots}`)}else if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>0)throw new nt(t,void 0,`${t.prim}: field annotations aren't allowed: ${t.annots}`)}if(ds(t)){const s=Gf(t);for(const o of s)wt(o,!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":wt(t.args[0]);break;case"or":for(const s of t.args)wt(s,!0);break;case"lambda":case"map":case"big_map":wt(t.args[0]),wt(t.args[1])}}function a2(t){if(!Array.isArray(t))return!1;for(const e of t)if(!(Array.isArray(e)&&a2(e)||"prim"in e&&i2(e)))return!1;return!0}function _n(t,e,r){if(ds(e)){if(zS(t)){eg(t);const n=wn("Pair",t),i=wn("pair",e);_n(n.args[0],i.args[0],r),_n(n.args[1],i.args[1],r);return}throw new nt(e,t,`pair expected: ${JSON.stringify(t)}`)}switch(e.prim){case"int":if("int"in t&&bh(t.int))return;throw new nt(e,t,`integer value expected: ${JSON.stringify(t)}`);case"nat":case"mutez":if("int"in t&&Jm(t.int))return;throw new nt(e,t,`natural value expected: ${JSON.stringify(t)}`);case"string":if("string"in t)return;throw new nt(e,t,`string value expected: ${JSON.stringify(t)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in t&&Ko(t.bytes)!==null)return;throw new nt(e,t,`bytes value expected: ${JSON.stringify(t)}`);case"bool":if("prim"in t&&(t.prim==="True"||t.prim==="False"))return;throw new nt(e,t,`boolean value expected: ${JSON.stringify(t)}`);case"key_hash":if("string"in t&&Wc(t.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in t)try{iR(t);return}catch{}throw new nt(e,t,`key hash expected: ${JSON.stringify(t)}`);case"timestamp":if(("string"in t||"int"in t)&&XS(t)!==null)return;throw new nt(e,t,`timestamp expected: ${JSON.stringify(t)}`);case"address":if("string"in t){let n=t.string;const i=t.string.indexOf("%");if(i>=0&&(n=t.string.slice(0,i)),Wc(n,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in t)try{nR(t);return}catch{}throw new nt(e,t,`address expected: ${JSON.stringify(t)}`);case"key":if("string"in t&&Wc(t.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in t)try{sR(t);return}catch{}throw new nt(e,t,`public key expected: ${JSON.stringify(t)}`);case"unit":if("prim"in t&&t.prim==="Unit")return;throw new nt(e,t,`unit value expected: ${JSON.stringify(t)}`);case"signature":if("bytes"in t||"string"in t&&Wc(t.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new nt(e,t,`signature expected: ${JSON.stringify(t)}`);case"chain_id":if(("bytes"in t||"string"in t)&&("string"in t?Wm(t.string):Ko(t.bytes))!==null)return;throw new nt(e,t,`chain id expected: ${JSON.stringify(t)}`);case"option":if("prim"in t){if(t.prim==="None")return;if(t.prim==="Some"){_n(t.args[0],e.args[0],r);return}}throw new nt(e,t,`option expected: ${JSON.stringify(t)}`);case"list":case"set":if(eg(t)){for(const n of t)_n(n,e.args[0],r);return}throw new nt(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"or":if("prim"in t){if(t.prim==="Left"){_n(t.args[0],e.args[0],r);return}else if(t.prim==="Right"){_n(t.args[0],e.args[1],r);return}}throw new nt(e,t,`union (or) expected: ${JSON.stringify(t)}`);case"lambda":if(a2(t)){const n=Yt(t,[e.args[0]],r);if("failed"in n)throw new nt(e,t,`function is failed with error type: ${n.failed}`);if(n.length!==1)throw new nt(e,t,"function must return a value");xn(e.args[1],n[0]);return}throw new nt(e,t,`function expected: ${JSON.stringify(t)}`);case"map":case"big_map":if(Array.isArray(t)){for(const n of t){if(!("prim"in n)||n.prim!=="Elt")throw new nt(e,t,`map elements expected: ${JSON.stringify(t)}`);_n(n.args[0],e.args[0],r),_n(n.args[1],e.args[1],r)}return}throw new nt(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"bls12_381_fr":if("int"in t&&bh(t.int)||"bytes"in t&&Ko(t.bytes)!==null)return;throw new nt(e,t,`BLS12-381 element expected: ${JSON.stringify(t)}`);case"sapling_state":if(Array.isArray(t))return;throw new nt(e,t,`sapling state expected: ${JSON.stringify(t)}`);case"ticket":_n(t,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},r);return;default:throw new nt(e,t,`type ${lt(e)} don't have Michelson literal representation`)}}function oR(t,e,r){let n=e,i=e,s=0;for(const o of t){const a=Yt(o,i,r);if(n=a,"failed"in a)break;i=a,s++}if("failed"in n&&n.level==0&&(!("prim"in n.failed)||n.failed.prim!=="never")&&s!==t.length-1)throw new Ue(t,n,"FAIL must appear in a tail position");if(r?.traceCallback!==void 0){const o={op:t,in:e,out:n};r.traceCallback(o)}return"failed"in n?{failed:n.failed,level:n.level+1}:n}function Yt(t,e,r){const n=r?.protocol||zm;if(Array.isArray(t))return oR(t,e,r);const i=t;function s(x,...E){if(e.length<E.length+x)throw new Ue(i,e,`${i.prim}: stack must have at least ${E.length} element(s)`);let u=x;for(const p of E){if(p!==null&&p.length!==0){let g=0;for(;g<p.length&&p[g]!==lt(e[u]);)g++;if(g===p.length)throw new Ue(i,e,`${i.prim}: stack type mismatch: [${u}] expected to be ${p}, got ${lt(e[u])} instead`)}u++}return e.slice(x,E.length+x)}function o(x){return(...E)=>{try{return x(...E)}catch(u){throw u instanceof Jr?new Ue(i,e,u.message):u}}}function a(x){return E=>{try{return x(E)}catch(u){throw u instanceof Jr?new Ue(i,e,u.message):u}}}const c=o(Xo),l=o(o2),f=o(xn),d=a(Hi),I=a(v0),P=a(m0),L=a(Jo),H=a(qu);function q(x,E){const u=c(i,Object.assign(Object.assign({},E),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),p=(g,b,h)=>{if(g&&g.length>(b||0))throw new Ue(i,e,`${i.prim}: at most ${b||0} ${h} annotations allowed`)};return p(u.f,x.f,"field"),p(u.t,x.t,"type"),p(u.v,x.v,"variable"),u}function G(x,E){const u=x,p=Array.isArray(u)?{prim:"pair",args:u}:u,g=c(p),b=E.v!==void 0||E.t!==void 0||E.f!==void 0?[...(E.v===null?g.v:E.v)||[],...(E.t===null?g.t:E.t)||[],...(E.f===null?g.f:E.f)||[]]:void 0,h=ZS(p,["annots"]);return Object.assign(Object.assign({},h),b&&b.length!==0&&{annots:b})}function C(x,E){const u=q({v:1});return G(x,{v:u.v!==void 0?u.v:E!==void 0?[E]:null,t:null})}function V(x,E,u,p,g){var b,h,S,T;const w=(b=c(E).f)===null||b===void 0?void 0:b[0],v=(h=u.f)===null||h===void 0?void 0:h[p];if(v!==void 0&&v!=="%"&&w!==void 0&&v!==w)throw new Ue(i,e,`${i.prim}: field names doesn't match: ${v} !== ${w}`);const N=(S=u.v)===null||S===void 0?void 0:S[p],ee=(T=c(x).v)===null||T===void 0?void 0:T[0];return G(E,{t:null,v:N?N==="@%"?w?["@"+w.slice(1)]:void 0:N==="@%%"?ee?["@"+ee.slice(1)+"."+(w?w.slice(1):g)]:w?["@"+w.slice(1)]:void 0:[N]:null})}function U(x,E,u=E){const p=wn("pair",x);if(u===1)return[p.args[0]];if(u===2)return p.args;const g=p.args[1];if(ds(g))return[p.args[0],...U(g,E,u-1)];throw new Ue(i,e,`${i.prim}: at least ${E} fields are expected`)}function F(x,E,u=E){if(u===0)return x;const p=wn("pair",x);if(u===1)return p.args[0];const g=p.args[1];if(ds(g))return F(g,E,u-2);if(u===2)return g;throw new Ue(i,e,`${i.prim}: at least ${E+1} fields are expected`)}function j(x,E,u,p=u){if(p===0)return E;const g=wn("pair",x);if(p===1)return Object.assign(Object.assign({},g),{args:[E,g.args[1]]});const b=g.args[1];if(ds(b))return Object.assign(Object.assign({},g),{args:[g.args[0],j(b,E,u,p-2)]});if(p===2)return Object.assign(Object.assign({},g),{args:[g.args[0],E]});throw new Ue(i,e,`${i.prim}: at least ${u+1} fields are expected`)}const y=(x,E)=>["@"+(x.v?x.v[0].slice(1)+".":"")+E];function _(x,E){return"failed"in x||"failed"in E?"failed"in x?E:x:(l(x,E),x)}const O=(x=>{var E,u,p,g,b;switch(x.prim){case"DUP":{const h=x.args?parseInt(x.args[0].int,10):1;if(h===0)throw new Ue(x,e,"DUP 0 is forbidden");const S=s(h-1,null)[0];if(lt(S)==="ticket")throw new Ue(x,e,"ticket can't be DUPed");return[S,...e]}case"SWAP":{const h=s(0,null,null);return q({}),[h[1],h[0],...e.slice(2)]}case"SOME":return[G({prim:"option",args:[s(0,null)[0]]},q({t:1,v:1})),...e.slice(1)];case"UNIT":return[G({prim:"unit"},q({v:1,t:1})),...e];case"PAIR":{const h=x.args?parseInt(x.args[0].int,10):2;if(h<2)throw new Ue(x,e,`PAIR ${h} is forbidden`);const S=s(0,...new Array(h).fill(null)),T=q({f:h,t:1,v:1},{specialFields:!0}),w=N=>{const ee=N.lastIndexOf(".");return N.slice(ee>0?ee+1:1)},v=S.map((N,ee)=>{var Y;const ne=c(N),se=T.f&&T.f.length>ee&&T.f[ee]!=="%"?T.f[ee]==="%@"?ne.v?["%"+w(((Y=ne.v)===null||Y===void 0?void 0:Y[0])||"")]:void 0:[T.f[ee]]:void 0;return G(N,{v:null,t:null,f:se})});return[G({prim:"pair",args:v},{t:T.t,v:T.v}),...e.slice(h)]}case"UNPAIR":{const h=x.args?parseInt(x.args[0].int,10):2;if(h<2)throw new Ue(x,e,`UNPAIR ${h} is forbidden`);const S=s(0,["pair"])[0],T=q({f:2,v:2},{specialVar:!0});return[...U(S,h).map((v,N)=>V(S,v,T,N,N===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const h=wn("pair",s(0,["pair"])[0]),S=h.args[x.prim==="CAR"?0:1],T=q({f:1,v:1},{specialVar:!0});return[V(h,S,T,0,x.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const h=s(0,null,["list"]);return f(h[0],h[1].args[0]),[C({prim:"list",args:[h[1].args[0]]}),...e.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[C({prim:"nat"}),...e.slice(1)];case"MEM":{const h=s(0,null,["set","map","big_map"]);return d(h[0]),f(h[0],h[1].args[0]),[C({prim:"bool"}),...e.slice(2)]}case"GET":if(x.args){const h=parseInt(x.args[0].int,10),S=s(0,["pair"])[0];return[C(F(S,h)),...e.slice(1)]}else{const h=s(0,null,["map","big_map"]);return d(h[0]),f(h[0],h[1].args[0]),[C({prim:"option",args:[h[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(x.args){const h=parseInt(x.args[0].int,10),S=s(0,null,["pair"]);return[C(j(S[1],S[0],h)),...e.slice(2)]}else{const h=s(0,null,["bool","option"]);if(d(h[0]),h[1].prim==="bool"){const T=s(2,["set"]);return f(h[0],T[0].args[0]),[C({prim:"set",args:[G(h[0],{t:null})]}),...e.slice(3)]}const S=s(2,["map","big_map"]);return f(h[0],S[0].args[0]),S[0].prim==="map"?[C({prim:"map",args:[G(h[0],{t:null}),G(h[1].args[0],{t:null})]}),...e.slice(3)]:(H(h[1].args[0]),[C({prim:"big_map",args:[G(h[0],{t:null}),G(h[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const h=q({v:2}),S=s(0,null,["option"],["map","big_map"]);d(S[0]),f(S[0],S[2].args[0]),f(S[1].args[0],S[2].args[1]);const T=(E=h.v)===null||E===void 0?void 0:E.map(w=>w!=="@"?[w]:void 0);return S[2].prim==="map"?[G({prim:"option",args:[S[2].args[1]]},{v:T?.[0]}),G({prim:"map",args:[G(S[0],{t:null}),G(S[1].args[0],{t:null})]},{v:T?.[1]}),...e.slice(3)]:(H(S[1].args[0]),[G({prim:"option",args:[S[2].args[1]]},{v:T?.[0]}),G({prim:"big_map",args:[G(S[0],{t:null}),G(S[1].args[0],{t:null})]},{v:T?.[1]}),...e.slice(3)])}case"EXEC":{const h=s(0,null,["lambda"]);return f(h[0],h[1].args[0]),[C(h[1].args[1]),...e.slice(2)]}case"APPLY":{const h=s(0,null,["lambda"]);if(P(h[0]),L(h[0]),!ds(h[1].args[0]))throw new Ue(x,e,`${x.prim}: function's argument must be a pair: ${lt(h[1].args[0])}`);const S=h[1].args[0];return f(h[0],Gf(S)[0]),[C({prim:"lambda",args:[Gf(S)[1],h[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const h=s(0,null)[0];return Po(n,Ki.PtEdo2Zk)||I(h),{failed:h,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[C(s(0,null)[0]),...e.slice(1)];case"CONCAT":{const h=s(0,["string","list","bytes"]);if(h[0].prim==="list"){if(lt(h[0].args[0])!=="string"&&lt(h[0].args[0])!=="bytes")throw new Ue(x,e,`${x.prim}: can't concatenate list of ${lt(h[0].args[0])}'s`);return[C(h[0].args[0]),...e.slice(1)]}const S=s(1,["string","bytes"]);if(h[0].prim!==S[0].prim)throw new Ue(x,e,`${x.prim}: can't concatenate ${h[0].prim} with ${S[0].prim}`);return[C(S[0]),...e.slice(2)]}case"SLICE":return[C({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const h=s(0,null)[0];return I(h),[C({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const h=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(h[0].prim==="nat"&&h[1].prim==="int"||h[0].prim==="int"&&h[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(h[0].prim==="int"&&h[1].prim==="timestamp"||h[0].prim==="timestamp"&&h[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if((h[0].prim==="int"||h[0].prim==="nat"||h[0].prim==="mutez"||h[0].prim==="bls12_381_g1"||h[0].prim==="bls12_381_g2"||h[0].prim==="bls12_381_fr")&&h[0].prim===h[1].prim)return[C(h[0]),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't add ${h[0].prim} to ${h[1].prim}`)}case"SUB":{const h=Po(n,Ki.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((h[0].prim==="nat"||h[0].prim==="int")&&(h[1].prim==="nat"||h[1].prim==="int")||h[0].prim==="timestamp"&&h[1].prim==="timestamp")return[C({prim:"int"}),...e.slice(2)];if(h[0].prim==="timestamp"&&h[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if(h[0].prim==="mutez"&&h[1].prim==="mutez")return[C({prim:"mutez"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't subtract ${h[0].prim} from ${h[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[C({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const h=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(h[0].prim==="nat"&&h[1].prim==="int"||h[0].prim==="int"&&h[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(h[0].prim==="nat"&&h[1].prim==="mutez"||h[0].prim==="mutez"&&h[1].prim==="nat")return[C({prim:"mutez"}),...e.slice(2)];if((h[0].prim==="bls12_381_g1"||h[0].prim==="bls12_381_g2"||h[0].prim==="bls12_381_fr")&&h[1].prim==="bls12_381_fr"||(h[0].prim==="nat"||h[0].prim==="int")&&h[0].prim===h[1].prim)return[C(h[0]),...e.slice(2)];if((h[0].prim==="nat"||h[0].prim==="int")&&h[1].prim==="bls12_381_fr"||(h[1].prim==="nat"||h[1].prim==="int")&&h[0].prim==="bls12_381_fr")return[C({prim:"bls12_381_fr"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't multiply ${h[0].prim} by ${h[1].prim}`)}case"EDIV":{const h=(T,w)=>({prim:"option",args:[{prim:"pair",args:[{prim:T},{prim:w}]}]}),S=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(S[0].prim==="nat"&&S[1].prim==="nat")return[C(h("nat","nat")),...e.slice(2)];if((S[0].prim==="nat"||S[0].prim==="int")&&(S[1].prim==="nat"||S[1].prim==="int"))return[C(h("int","nat")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="nat")return[C(h("mutez","mutez")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="mutez")return[C(h("nat","mutez")),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't euclideally divide ${S[0].prim} by ${S[1].prim}`)}case"ABS":return s(0,["int"]),[C({prim:"nat"}),...e.slice(1)];case"ISNAT":return s(0,["int"]),[C({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return s(0,["nat","bls12_381_fr","bytes"]),[C({prim:"int"}),...e.slice(1)];case"BYTES":return s(0,["nat","int"]),[C({prim:"bytes"}),...e.slice(1)];case"NAT":return s(0,["bytes"]),[C({prim:"nat"}),...e.slice(1)];case"NEG":{const h=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return h.prim==="nat"||h.prim==="int"?[C({prim:"int"}),...e.slice(1)]:[C(h),...e.slice(1)]}case"LSL":case"LSR":return s(0,["nat","bytes"],["nat","bytes"]),[C({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const h=s(0,["nat","bytes","bool"],["nat","bytes","bool"]);if(h[0].prim!==h[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${h[0].prim}, ${h[1].prim}`);return[C(h[1]),...e.slice(2)]}case"AND":{const h=s(0,["nat","bytes","bool","int"],["nat","bytes","bool"]);if((h[0].prim!=="int"||h[1].prim!=="nat")&&h[0].prim!==h[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${h[0].prim}, ${h[1].prim}`);return[C(h[1]),...e.slice(2)]}case"NOT":return s(0,["nat","bytes","bool","int"])[0].prim==="bool"?[C({prim:"bool"}),...e.slice(1)]:[C({prim:"int"}),...e.slice(1)];case"COMPARE":{const h=s(0,null,null);return d(h[0]),d(h[1]),[C({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[C({prim:"bool"}),...e.slice(1)];case"SELF":{if(r?.contract===void 0)throw new Ue(x,e,`${x.prim}: contract required`);const h=q({f:1,v:1}),S=vh(r.contract,(u=h.f)===null||u===void 0?void 0:u[0]);if(S===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${S}`);return[G({prim:"contract",args:[S]},{v:h.v?h.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const h=s(0,null,["mutez"],["contract"]);return f(h[0],h[2].args[0]),[C({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const h=s(0,["option"])[0];if(lt(h.args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${lt(h.args[0])}`);return[C({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[C({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[C({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[C({prim:"mutez"},"@amount"),...e];case"BALANCE":return[C({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[C({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[C({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return s(0,["key"]),[C({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[C({prim:"address"},"@source"),...e];case"SENDER":return[C({prim:"address"},"@sender"),...e];case"ADDRESS":{const h=s(0,["contract"])[0],S=q({v:1});return[G({prim:"address",[zc]:h},{v:S.v?S.v:y(c(h),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const h={prim:"address"};return r?.contract!==void 0&&(h[zc]={prim:"contract",args:[si(r.contract,"parameter").args[0]]}),[C(h,"@address"),...e]}case"CHAIN_ID":return[C({prim:"chain_id"}),...e];case"DROP":{q({});const h=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(h-1,null),e.slice(h)}case"DIG":{q({});const h=parseInt(x.args[0].int,10);return[s(h,null)[0],...e.slice(0,h),...e.slice(h+1)]}case"DUG":{q({});const h=parseInt(x.args[0].int,10);return[...e.slice(1,h+1),s(0,null)[0],...e.slice(h+1)]}case"NONE":return wt(x.args[0]),[G({prim:"option",args:[x.args[0]]},q({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const h=s(0,null)[0],S=q({f:2,t:1,v:1},{specialFields:!0}),T=c(h),w=[G(h,{t:null,v:null,f:S.f&&S.f.length>0&&S.f[0]!=="%"?S.f[0]==="%@"?T.v?["%"+T.v[0].slice(1)]:void 0:S.f:void 0}),G(x.args[0],{t:null,f:S.f&&S.f.length>1&&S.f[1]!=="%"?S.f:void 0})];return[G({prim:"or",args:x.prim==="LEFT"?w:[w[1],w[0]]},{t:S.t,v:S.v}),...e.slice(1)]}case"NIL":return wt(x.args[0]),[G({prim:"list",args:[x.args[0]]},q({t:1,v:1})),...e];case"UNPACK":return s(0,["bytes"]),wt(x.args[0]),[C({prim:"option",args:[x.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const h=s(0,["address"])[0];wt(x.args[0]);const S=q({v:1,f:1}),T=h[zc];if(T!==void 0){const w=vh(T,(p=S.f)===null||p===void 0?void 0:p[0]);if(w===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${w}`);f(w,x.args[0])}return[G({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:S.v?S.v:y(c(h),"contract")}),...e.slice(1)]}case"CAST":{q({});const h=s(0,null)[0];return wt(x.args[0]),f(x.args[0],h),[x.args[0],...e.slice(1)]}case"IF_NONE":{q({});const h=s(0,["option"])[0],S=e.slice(1),T=Yt(x.args[0],S,r),w=Yt(x.args[1],[G(h.args[0],{t:null,v:y(c(h),"some")}),...S],r);return _(T,w)}case"IF_LEFT":{q({});const h=s(0,["or"])[0],S=c(h),T=c(h.args[0]),w=c(h.args[1]),v=e.slice(1),N=Yt(x.args[0],[G(h.args[0],{t:null,v:y(S,T.f?T.f[0].slice(1):"left")}),...v],r),ee=Yt(x.args[1],[G(h.args[1],{t:null,v:y(S,w.f?w.f[0].slice(1):"right")}),...v],r);return _(N,ee)}case"IF_CONS":{q({});const h=s(0,["list"])[0],S=c(h),T=e.slice(1),w=Yt(x.args[0],[G(h.args[0],{t:null,v:y(S,"hd")}),G(h,{t:null,v:y(S,"tl")}),...T],r),v=Yt(x.args[1],T,r);return _(w,v)}case"IF":{q({}),s(0,["bool"]);const h=e.slice(1),S=Yt(x.args[0],h,r),T=Yt(x.args[1],h,r);return _(S,T)}case"MAP":{const h=s(0,["list","map","option"])[0],S=e.slice(1),T=h.prim==="map"?{prim:"pair",args:h.args}:h.args[0],w=Yt(x.args[0],[G(T,{t:null,v:y(c(h),"elt")}),...S],r);if("failed"in w){if(!("prim"in w.failed)||w.failed.prim!=="never")throw new Ue(x,e,`${x.prim}: FAIL is not allowed in MAP`);return{failed:w.failed,level:w.level+1}}if(w.length<1)throw new Ue(x,e,`${x.prim}: function must return a value`);return l(w.slice(1),S),h.prim==="list"?[C({prim:"list",args:[w[0]]}),...S]:h.prim==="map"?[C({prim:"map",args:[h.args[0],w[0]]}),...S]:[C({prim:"option",args:[w[0]]}),...S]}case"ITER":{q({});const h=s(0,["set","list","map"])[0],S=e.slice(1),T=h.prim==="map"?{prim:"pair",args:h.args}:h.args[0],w=Yt(x.args[0],[G(T,{t:null,v:y(c(h),"elt")}),...S],r);return"failed"in w?{failed:w.failed,level:w.level+1}:(l(w,S),S)}case"LOOP":{q({}),s(0,["bool"]);const h=e.slice(1),S=Yt(x.args[0],h,r);return"failed"in S?{failed:S.failed,level:S.level+1}:(l(S,[{prim:"bool"},...h]),h)}case"LOOP_LEFT":{q({});const h=s(0,["or"])[0],S=e.slice(1),T=Yt(x.args[0],[G(h.args[0],{t:null,v:y(c(h),"left")}),...S],r);return"failed"in T?{failed:T.failed,level:T.level+1}:(l(T,[h,...S]),[G(h.args[1],{t:null,v:q({v:1}).v}),...S])}case"DIP":{q({});const h=x.args.length===2?parseInt(x.args[0].int,10):1;s(h-1,null);const S=e.slice(0,h),T=e.slice(h),w=x.args.length===2?Yt(x.args[1],T,r):Yt(x.args[0],T,r);return"failed"in w?{failed:w.failed,level:w.level+1}:[...S,...w]}case"CREATE_CONTRACT":{const h=q({v:2}),S=s(0,["option"],["mutez"],null);if(lt(S[0].args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${lt(S[0].args[0])}`);P(S[2])&&(f2(x.args[0]),xn(si(x.args[0],"storage").args[0],S[2]));const T=(g=h.v)===null||g===void 0?void 0:g.map(w=>w!=="@"?[w]:void 0);return[G({prim:"operation"},{v:T?.[0]}),G({prim:"address",[zc]:{prim:"contract",args:[si(x.args[0],"parameter").args[0]]}},{v:T?.[1]}),...e.slice(3)]}case"PUSH":return wt(x.args[0]),_n(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[C(x.args[0]),...e];case"EMPTY_SET":return wt(x.args[0]),d(x.args[0]),[G({prim:"set",args:x.args},q({t:1,v:1})),...e];case"EMPTY_MAP":return wt(x.args[0]),d(x.args[0]),wt(x.args[1]),[G({prim:"map",args:x.args},q({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return wt(x.args[0]),d(x.args[0]),wt(x.args[1]),H(x.args[0]),[G({prim:"big_map",args:x.args},q({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{wt(x.args[0]),wt(x.args[1]);const h=[x.args[0]];x.prim==="LAMBDA_REC"&&h.push({prim:"lambda",args:[x.args[0],x.args[1]]});const S=Yt(x.args[2],h,Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in S)return{failed:S.failed,level:S.level+1};if(S.length!==1)throw new Ue(x,e,`${x.prim}: function must return a value`);return f(x.args[1],S[0]),[C({prim:"lambda",args:[x.args[0],x.args[1]]}),...e]}case"LEVEL":return[C({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[C({prim:"nat"}),...e];case"VOTING_POWER":return s(0,["key_hash"]),[C({prim:"nat"}),...e.slice(1)];case"TICKET":{const h=s(0,null,["nat"])[0];return d(h),Po(n,Ki.PtLimaPtL)?[G({prim:"ticket",args:[h]},q({t:1,v:1})),...e.slice(2)]:[C({prim:"option",args:[G({prim:"ticket",args:[h]},q({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const h=wn("pair",s(0,["pair"])[0]);if(lt(h.args[0])!=="ticket")throw new Ue(x,e,`${x.prim}: ticket expected: ${lt(h.args[0])}`);return f(h.args[0],h.args[1]),[C({prim:"option",args:[G(h.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const h=s(0,["ticket"],["pair"]),S=wn("pair",h[1]);if(lt(S.args[0])!=="nat")throw new Ue(x,e,`${x.prim}: nat expected: ${lt(S.args[0])}`);return f(S.args[0],S.args[1]),[C({prim:"option",args:[{prim:"pair",args:[G(h[0],{t:null}),G(h[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const h=q({v:2}),S=s(0,["ticket"])[0],T=(b=h.v)===null||b===void 0?void 0:b.map(w=>w!=="@"?[w]:void 0);return[G({prim:"pair",args:[{prim:"address"},G(S.args[0],{t:null}),{prim:"nat"}]},{v:T?.[0]}),G(S,{v:T?.[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const h=s(0,["list"])[0].args[0];if(!ds(h))throw new Ue(x,e,`${x.prim}: pair expected: ${lt(h)}`);const S=wn("pair",h);if(lt(S.args[0])!=="bls12_381_g1")throw new Ue(x,e,`${x.prim}: bls12_381_g1 expected: ${lt(S.args[0])}`);if(lt(S.args[1])!=="bls12_381_g2")throw new Ue(x,e,`${x.prim}: bls12_381_g2 expected: ${lt(S.args[1])}`);return[C({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[G({prim:"sapling_state",args:[x.args[0]]},q({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const h=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(h[0].args[0].int,10)!==parseInt(h[1].args[0].int,10))throw new Ue(x,e,`${x.prim}: sapling memo size mismatch: ${h[0].args[0].int} != ${h[1].args[0].int}`);return Po(n,Ki.PtJakarta)?[C({prim:"option",args:[{prim:"pair",args:[{prim:"int"},G(h[1],{t:null})]}]}),...e.slice(2)]:[C({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},G(h[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[C({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const h=s(0,null,["address"]);return L(h[0]),[C({prim:"option",args:[x.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[C({prim:"nat"}),...e];case"EMIT":{const h=q({f:1,t:1});if(x.args){const S=s(0,null);return f(S[0],x.args[0]),[G({prim:"operation"},h),...e.slice(1)]}return[G({prim:"operation"},h),...e.slice(1)]}default:throw new Jr(x,`unexpected instruction: ${x.prim}`)}})(i);if(r?.traceCallback!==void 0){const x={op:i,in:e,out:O};r.traceCallback(x)}return O}function si(t,e){for(const r of t)if(r.prim===e)return r;throw new Jr(t,`missing contract section: ${e}`)}function aR(t){const e={};for(const r of t)r.prim==="view"&&(e[r.args[0].string]=r);return e}function c2(t){if(Array.isArray(t)){for(const e of t)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function vh(t,e){e=e||"%default";const r=Vf(t).find(n=>n[0]===e);return r!==void 0?r[1]:e==="%default"?c2(t)?si(t,"parameter").args[0]:t:null}function cR(t){return Array.isArray(t)||t.prim==="or"}function Vf(t){if(c2(t)){const e=si(t,"parameter"),r=Vf(e.args[0]),n=Xo(e);return n.f?[[n.f[0],e.args[0]],...r]:r}if(cR(t)){const e=Gf(t),r=n=>{const i=Xo(e[n]);if(lt(e[n])==="or"){const s=Vf(e[n]);return i.f?[[i.f[0],e[n]],...s]:s}return i.f?[[i.f[0],e[n]]]:[]};return[...r(0),...r(1)]}return[]}function f2(t,e){const r=(c,l,f,d)=>{wt(c,!0),wt(l);const I={prim:"pair",args:[Object.assign(Object.assign({},c),{annots:["@parameter"]}),Object.assign(Object.assign({},l),{annots:["@storage"]})]},P=Yt(d,[I],Object.assign(Object.assign({},e),{contract:t}));if("failed"in P)return P;try{o2(P,[f])}catch(L){throw L instanceof Jr?new Ue(d,P,L.message):L}return P},n=si(t,"parameter").args[0],i=si(t,"storage").args[0],s=si(t,"code").args[0],a=r(n,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},s);for(const c of Object.values(aR(t)))r(c.args[1],i,c.args[2],c.args[3]);return a}function u2(t,e,r){wt(e),_n(t,e,r||null)}function fR(t,e,r){for(const n of e)wt(n);if(r?.contract!==void 0)for(const n of["parameter","storage"]){const i=si(r.contract,n).args[0];wt(i)}return Yt(t,e,r||null)}function uR(t,e,r){try{return u2(t,e,r),!0}catch{return!1}}class y0{constructor(e,r){this.contract=e,this.ctx=Object.assign({contract:e},r),this.output=f2(e,this.ctx)}static parse(e,r){const n=new zs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new HS("empty contract");if(n2(i))return new y0(i,r)}static parseTypeExpression(e,r){const n=new zs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new FS("empty type expression");if(ki(i))return wt(i),i}static parseDataExpression(e,r){const n=new zs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new jS("empty data expression");if($s(i))return i;throw void 0}section(e){return si(this.contract,e)}entryPoints(){return Vf(this.contract)}entryPoint(e){return vh(this.contract,e)}assertDataValid(e,r){u2(e,r,this.ctx)}isDataValid(e,r){return uR(e,r,this.ctx)}assertParameterValid(e,r){const n=this.entryPoint(e||void 0);if(n===null)throw new GS(e?.toString());this.assertDataValid(r,n)}isParameterValid(e,r){try{return this.assertParameterValid(e,r),!0}catch{return!1}}functionType(e,r){return fR(e,r,this.ctx)}}new y0([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const rg=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),Tt=(t,e=8)=>t.toString(16).padStart(e,"0"),E0=31;var z;(function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.SMART_ROLLUP_ADDRESS="smart_rollup_address",t.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",t.VALUE="value",t.PADDED_BYTES="padded_bytes",t.SMART_ROLLUP_MESSAGE="smart_rollup_message",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_ENDORSEMENT="endorsement",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.BURN_LIMIT="burn_limit",t.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",t.TX_ROLLUP_ID="tx_rollup_id",t.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_DRAIN_DELEGATE="drain_delegate",t.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.PVM_KIND="pvm_kind",t.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(z||(z={}));const Cn={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT"},lR=(()=>{const t={};return Object.keys(Cn).forEach(e=>{t[Cn[e]]=e}),t})(),mh={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message"},ng=(()=>{const t={};return Object.keys(mh).forEach(e=>{const r=typeof e=="string"?parseInt(e,10):e;t[mh[r]]=Tt(r,2)}),t})(),qf={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit"},ig=(()=>{const t={};return Object.keys(qf).forEach(e=>{t[qf[e]]=e}),t})();class dR extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBlockHashError"}}class sg extends Error{constructor(e){super(e),this.message=e,this.name="InvalidOperationSchemaError"}}class l2 extends Error{constructor(e){super(`Oversized entrypoint: ${e}. The maximum length of entrypoint is ${E0}`),this.entrypoint=e,this.name="OversizedEntryPointError"}}class hR extends Error{constructor(e){super(`The ballot value '${e}' is invalid`),this.ballotValue=e,this.name="InvalidBallotValueError"}}class pR extends Error{constructor(e){super(`Failed to decode ballot value ${e}`),this.ballotValue=e,this.name="DecodeBallotValueError"}}class d2 extends Error{constructor(e){super(`The hex string '${e}' is invalid`),this.hexString=e,this.name="InvalidHexStringError"}}class gR extends Error{constructor(e){super(`Failed to encode michelson value '${e}'`),this.value=e,this.name="UnexpectedMichelsonValueError"}}class h2 extends Error{constructor(e){super(e),this.message=e,this.name="OperationDecodingError"}}class bR extends Error{constructor(e){super(e),this.message=e,this.name="OperationEncodingError"}}class vR extends Error{constructor(e){super(`The operation '${e}' is unsupported`),this.op=e,this.name="UnsupportedOperationError"}}class mR extends Error{constructor(e){super(`The Pvm "${e}" is not supported`),this.pvm=e,this.name="UnsupportedPvmKindError"}}class yR extends Error{constructor(e){super(`The encoded Pvm ${e} is not supported`),this.pvm=e,this.name="DecodePvmKindError"}}class ER extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class p2 extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class Pn{constructor(e,r=0){this.arr=e,this.offset=r}static fromHexString(e){const r=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const n=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(i=>parseInt(i,16)));return new Pn(n)}else throw new d2(r)}consume(e){const r=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,r}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,r){return new Pn(this.arr.slice(e,r))}}const _R=t=>"prim"in t,wR=t=>"bytes"in t&&typeof t.bytes=="string",AR=t=>"string"in t&&typeof t.string=="string",xR=t=>"int"in t&&typeof t.int=="string",SR=t=>{const e=_s(t.code),r=_s(t.storage);return`${Tt(e.length/2,8)}${e}${Tt(r.length/2,8)}${r}`},RR=t=>{const e=Zr(t),r=Zr(t);return{code:ws(new Pn(e)),storage:ws(new Pn(r))}},_s=t=>{if(Array.isArray(t)){const e=t.map(n=>_s(n)).join(""),r=e.length/2;return`02${Tt(r)}${e}`}else{if(_R(t))return CR(t);if(wR(t))return TR(t);if(AR(t))return PR(t);if(xR(t))return MR(t)}throw new gR(JSON.stringify(t))},ws=t=>{const e=t.consume(1);switch(e[0]){case 10:return OR(t);case 1:return NR(t);case 0:return LR(t);case 2:{const r=new Pn(Zr(t)),n=[];for(;r.length()>0;)n.push(ws(r));return n}default:return BR(t,e)}},Zr=(t,e=4)=>{const r=t.consume(e),n=parseInt(Buffer.from(r).toString("hex"),16);return t.consume(n)},IR=(t,e=4)=>{const r=[];let n=t;for(;n.length();){const i=n.consume(e),s=parseInt(Buffer.from(i).toString("hex"),16);r.push(n.consume(s)),n=n.slice(s+e)}return r},TR=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new d2(t.bytes);const e=t.bytes.length/2;return`0a${Tt(e)}${t.bytes}`},OR=t=>{const e=Zr(t);return{bytes:Buffer.from(e).toString("hex")}},PR=t=>{const e=Buffer.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${Tt(r)}${e}`},NR=t=>{const e=Zr(t);return{string:Buffer.from(e).toString("utf8")}},MR=({int:t})=>{const e=new be(t,10),r=e.toString(2)[0]==="-"?"1":"0",n=e.toString(2).replace(/-/g,""),i=n.length<=6?6:(n.length-6)%7?n.length+7-(n.length-6)%7:n.length,o=n.padStart(i,"0").match(/\d{6,7}/g).reverse();return o[0]=r+o[0],`00${o.map((c,l)=>parseInt((l===o.length-1?"0":"1")+c,2).toString(16).padStart(2,"0")).join("")}`},LR=t=>{let e=t.consume(1)[0];const r=[],n=1<<7;for(;e&n;)r.push(e),e=t.consume(1)[0];r.push(e);const i=!!(1<<6&r[0]);r[0]=r[0]&127;const s=r.map((a,c)=>a.toString(2).slice(c===0?-6:-7).padStart(c===0?6:7,"0")).reverse();let o=new be(s.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},CR=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,n=Tt(Math.min(2*r+e+3,9),2),i=lR[t.prim];let s=(t.args||[]).map(a=>_s(a)).join("");const o=Array.isArray(t.annots)?UR(t.annots):"";return(t.prim==="LAMBDA"||t.prim==="LAMBDA_REC")&&r&&(s=Tt(s.length/2)+s+Tt(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=o===""?Tt(s.length/2)+s+Tt(0):Tt(s.length/2)+s),t.prim==="view"&&t.args&&(s=Tt(s.length/2)+s+Tt(0)),`${n}${i}${s}${o}`},BR=(t,e)=>{const r=(e[0]-3)%2===1;let n=Math.floor((e[0]-3)/2);const i=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Cn[i]};if((Cn[i]==="LAMBDA"||Cn[i]==="LAMBDA_REC")&&t.consume(4),Cn[i]==="view")return n!=0?kR(t,s):s;let o,a;(Cn[i]==="pair"||Cn[i]==="Pair")&&n>2&&(o=DR(t),n=0,a=og(t));const c=new Array(n).fill(0).map(()=>ws(t));return(Cn[i]==="LAMBDA"||Cn[i]==="LAMBDA_REC")&&t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&a[0]!==""?s.annots=a:r&&(s.annots=og(t)),s},kR=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>ws(t)),t.consume(4),e),DR=t=>{const e=new Pn(Zr(t)),r=[];for(;e.length()>0;)r.push(ws(e));return r},UR=t=>{const e=t.map(n=>Buffer.from(n,"utf8").toString("hex")).join("20"),r=e.length/2;return`${Tt(r)}${e}`},og=t=>{const e=t.consume(4),r=parseInt(Buffer.from(e).toString("hex"),16),n=t.consume(r);return Buffer.from(n).toString("hex").split("20").map(s=>Buffer.from(s,"hex").toString("utf8"))},xr=t=>e=>Va(Buffer.from(Am(e,wr[t]))),Lr=t=>e=>{const r=e.consume(bm[t]);return vs(r,wr[t])},KR=Lr(re.TZ1),HR=Lr(re.B),_0=t=>{const e=t.consume(1);if(e[0]===0)return Lr(re.TZ1)(t);if(e[0]===1)return Lr(re.TZ2)(t);if(e[0]===2)return Lr(re.TZ3)(t)},FR=xr(re.B),jR=xr(re.TZ1),ag=t=>t?"ff":"00",g2=t=>xr(re.P)(t),b2=t=>Lr(re.P)(t),GR=t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(b2(t));return e},VR=t=>Tt(32*t.length)+t.map(e=>g2(e)).join(""),qR=t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new hR(t)}},$R=t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new pR(e[0].toString())}},zR=t=>{switch(t){case"arith":return"00";case"wasm_2_0_0":return"01";default:throw new mR(t)}},WR=t=>{const e=t.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";default:throw new yR(e[0].toString())}},XR=t=>t?ag(!0)+w0(t):ag(!1),JR=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<4;n++){const i=(4-(n+1))*8;r.push((e&255<<i)>>i)}return Buffer.from(r).toString("hex")},YR=t=>{const e=t.consume(4);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},QR=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<2;n++){const i=(2-(n+1))*8;r.push((e&255<<i)>>i)}return Buffer.from(r).toString("hex")},ZR=t=>{const e=t.consume(2);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},e9=t=>t.consume(1)[0]===255,t9=t=>{if(e9(t))return _0(t)},w0=t=>{switch(t.substring(0,3)){case re.TZ1:return"00"+xr(re.TZ1)(t);case re.TZ2:return"01"+xr(re.TZ2)(t);case re.TZ3:return"02"+xr(re.TZ3)(t);case re.TZ4:return"03"+xr(re.TZ4)(t);default:throw new i0(t)}},r9=t=>{switch(t.substring(0,4)){case re.EDPK:return"00"+xr(re.EDPK)(t);case re.SPPK:return"01"+xr(re.SPPK)(t);case re.P2PK:return"02"+xr(re.P2PK)(t);default:throw new vm(t)}},n9=t=>{switch(t.substring(0,3)){case re.TZ1:case re.TZ2:case re.TZ3:case re.TZ4:return"00"+w0(t);case re.KT1:return"01"+xr(re.KT1)(t)+"00";default:throw new ft(t)}},i9=t=>{if(t.substring(0,3)!==re.SR1)throw new ER(t);return xr(re.SR1)(t)},s9=t=>{if(t.substring(0,3)===re.KT1)return"01"+xr(re.KT1)(t)+"00";throw new ko(t)},o9=t=>{switch(t.consume(1)[0]){case 0:return Lr(re.EDPK)(t);case 1:return Lr(re.SPPK)(t);case 2:return Lr(re.P2PK)(t);default:throw new vm(t.toString())}},a9=t=>{if(t.substring(0,4)===re.SRC1)return xr(re.SRC1)(t);throw new p2(t)},c9=t=>{switch(t.consume(1)[0]){case 0:return _0(t);case 1:{const r=Lr(re.KT1)(t);return t.consume(1),r}default:throw new ft(t.toString())}},f9=t=>{const e=Lr(re.SR1)(t);if(e.substring(0,3)!==re.SR1)throw new ft(e);return e},u9=t=>{if(t.consume(1)[0]===1){const r=Lr(re.KT1)(t);return t.consume(1),r}throw new ko(t.toString())},l9=t=>{const e=Lr(re.SRC1)(t);if(e.substring(0,4)!==re.SRC1)throw new p2(e);return e},v2=t=>{const e=[];let r=new be(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;)if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}else{let n=r.mod(128);r=r.minus(n),r=r.dividedBy(128),n=n.plus(128),e.push(n.toString(16))}return e.join("")},m2=t=>{let e=0;for(;e<t.length()&&t.get(e)&128;)e+=1;let r=new be(0);for(let n=e;n>=0;n-=1){const i=t.get(n)&127;r=r.multipliedBy(128),r=r.plus(i)}return t.consume(e+1),new be(r).toString()},d9=t=>{const e=Tt(t.consume(1)[0],2);if(e in qf)return qf[e];{const r=Zr(t,1),n=Buffer.from(r).toString("utf8");if(n.length>E0)throw new l2(n);return n}},h9=t=>{if(t.consume(1)[0]!==0){const r=d9(t),n=Zr(t),i=ws(new Pn(n));return{entrypoint:r,value:i}}},p9=t=>{if(t in ig)return`${ig[t]}`;if(t.length>E0)throw new l2(t);return`ff${_s({string:t}).slice(8)}`},g9=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=p9(t.entrypoint),r=_s(t.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${n}${r}`},b9=t=>{const e=_s(t);return`${Tt(e.length/2)}${e}`},v9=t=>{const e=Zr(t);return ws(new Pn(e))},m9=xr(re.VH),y9=Lr(re.VH),E9=t=>`${_s({string:t}).slice(2)}`,_9=t=>{const e=Zr(t);return Buffer.from(e).toString("utf8")},w9=t=>"",A9=t=>({}),x9=xr(re.TXR1),S9=Lr(re.TXR1),R9=t=>`${Tt(t.length/2)}${t}`,I9=t=>{const e=Zr(t);return Buffer.from(e).toString("hex")},T9=t=>t?`ff${v2(t)}`:"00",O9=t=>{const e=t.consume(1);if(Buffer.from(e).toString("hex")!=="00")return m2(t)},P9=(t,e=8)=>`${Tt(t.length/2,e)}${t}`,N9=t=>{const e=Zr(t);return Buffer.from(e).toString("hex")},M9=t=>{const e=t.reduce((r,n)=>r+`${Tt(n.length/2)}${n}`,"");return`${Tt(e.length/2)}${e}`},L9=t=>{const e=Zr(t);return IR(new Pn(e)).map(n=>Buffer.from(n).toString("hex"))},y2={branch:z.BRANCH,contents:[z.OPERATION]},A0={pkh:z.TZ1,secret:z.SECRET},x0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,public_key:z.PUBLIC_KEY},S0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,delegate:z.DELEGATE},R0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,amount:z.ZARITH,destination:z.ADDRESS,parameters:z.PARAMETERS},I0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,balance:z.ZARITH,delegate:z.DELEGATE,script:z.SCRIPT},T0={source:z.PKH,period:z.INT32,proposal:z.PROPOSAL,ballot:z.BALLOT_STATEMENT},O0={slot:z.INT16,level:z.INT32,round:z.INT32,block_payload_hash:z.BLOCK_PAYLOAD_HASH},P0={level:z.INT32,nonce:z.RAW},N0={source:z.PKH,period:z.INT32,proposals:z.PROPOSAL_ARR},M0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,value:z.VALUE},L0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,ticket_contents:z.VALUE,ticket_ty:z.VALUE,ticket_ticketer:z.ADDRESS,ticket_amount:z.ZARITH,destination:z.ADDRESS,entrypoint:z.ENTRYPOINT},C0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,tx_rollup_origination:z.TX_ROLLUP_ORIGINATION_PARAM},B0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,rollup:z.TX_ROLLUP_ID,content:z.TX_ROLLUP_BATCH_CONTENT,burn_limit:z.BURN_LIMIT},k0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,amount:z.ZARITH,destination:z.SMART_CONTRACT_ADDRESS},D0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,pk:z.PUBLIC_KEY},U0={consensus_key:z.PKH,delegate:z.PKH,destination:z.PKH},K0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,pvm_kind:z.PVM_KIND,kernel:z.PADDED_BYTES,origination_proof:z.PADDED_BYTES,parameters_ty:z.VALUE},H0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,message:z.SMART_ROLLUP_MESSAGE},F0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,rollup:z.SMART_ROLLUP_ADDRESS,cemented_commitment:z.SMART_ROLLUP_COMMITMENT_HASH,output_proof:z.PADDED_BYTES},C9=t=>e=>{if(!(e.kind in t)||!(e.kind in ng))throw new Wi(e.kind);return ng[e.kind]+t[e.kind](e)},B9=t=>e=>{const r=e.consume(1),n=mh[r[0]];if(n===void 0)throw new vR(r[0].toString());const i=t[n](e);if(typeof i!="object")throw new h2("Decoded invalid operation");return Object.assign({kind:n},i)},jt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(r&&Array.isArray(o)){const a=t[o[0]],c=r[s];if(!Array.isArray(c))throw new bR(`Expected value to be Array ${JSON.stringify(c)}`);return i+c.reduce((l,f)=>l+a(f),"")}else{const a=t[o];return i+a(r[s])}},""),Gt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(Array.isArray(o)){const a=t[o[0]],c=[],l=r.length();for(;r.length()>0;)if(c.push(a(r)),l===r.length())throw new h2("Unable to decode value");return Object.assign(Object.assign({},i),{[s]:c})}else{const a=t[o],c=a(r);return typeof c<"u"?Object.assign(Object.assign({},i),{[s]:c}):Object.assign({},i)}},{}),Le={[z.SECRET]:t=>rg(t.consume(20)),[z.RAW]:t=>rg(t.consume(32)),[z.TZ1]:KR,[z.BRANCH]:HR,[z.ZARITH]:m2,[z.PUBLIC_KEY]:o9,[z.PKH]:_0,[z.DELEGATE]:t9,[z.INT32]:YR,[z.SCRIPT]:RR,[z.BALLOT_STATEMENT]:$R,[z.PROPOSAL]:b2,[z.PROPOSAL_ARR]:GR,[z.PARAMETERS]:h9,[z.ADDRESS]:c9,[z.SMART_ROLLUP_ADDRESS]:f9,[z.SMART_CONTRACT_ADDRESS]:u9,[z.SMART_ROLLUP_COMMITMENT_HASH]:l9,[z.VALUE]:v9,[z.INT16]:ZR,[z.BLOCK_PAYLOAD_HASH]:y9,[z.ENTRYPOINT]:_9,[z.TX_ROLLUP_ORIGINATION_PARAM]:A9,[z.TX_ROLLUP_ID]:S9,[z.TX_ROLLUP_BATCH_CONTENT]:I9,[z.BURN_LIMIT]:O9,[z.PVM_KIND]:WR,[z.PADDED_BYTES]:N9,[z.SMART_ROLLUP_MESSAGE]:L9};Le[z.OPERATION]=B9(Le);Le[z.OP_ACTIVATE_ACCOUNT]=t=>Gt(Le)(A0)(t);Le[z.OP_DELEGATION]=t=>Gt(Le)(S0)(t);Le[z.OP_TRANSACTION]=t=>Gt(Le)(R0)(t);Le[z.OP_ORIGINATION]=t=>Gt(Le)(I0)(t);Le[z.OP_BALLOT]=t=>Gt(Le)(T0)(t);Le[z.OP_ENDORSEMENT]=t=>Gt(Le)(O0)(t);Le[z.OP_SEED_NONCE_REVELATION]=t=>Gt(Le)(P0)(t);Le[z.OP_PROPOSALS]=t=>Gt(Le)(N0)(t);Le[z.OP_REVEAL]=t=>Gt(Le)(x0)(t);Le[z.OP_REGISTER_GLOBAL_CONSTANT]=t=>Gt(Le)(M0)(t);Le[z.OP_TRANSFER_TICKET]=t=>Gt(Le)(L0)(t);Le[z.OP_TX_ROLLUP_ORIGINATION]=t=>Gt(Le)(C0)(t);Le[z.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>Gt(Le)(B0)(t);Le[z.OP_INCREASE_PAID_STORAGE]=t=>Gt(Le)(k0)(t);Le[z.OP_UPDATE_CONSENSUS_KEY]=t=>Gt(Le)(D0)(t);Le[z.OP_DRAIN_DELEGATE]=t=>Gt(Le)(U0)(t);Le[z.OP_SMART_ROLLUP_ORIGINATE]=t=>Gt(Le)(K0)(t);Le[z.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Gt(Le)(H0)(t);Le[z.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Gt(Le)(F0)(t);Le[z.MANAGER]=Gt(Le)(y2);const Ce={[z.SECRET]:t=>t,[z.RAW]:t=>t,[z.TZ1]:jR,[z.BRANCH]:FR,[z.ZARITH]:v2,[z.PUBLIC_KEY]:r9,[z.PKH]:w0,[z.DELEGATE]:XR,[z.SCRIPT]:SR,[z.BALLOT_STATEMENT]:qR,[z.PROPOSAL]:g2,[z.PROPOSAL_ARR]:VR,[z.INT32]:JR,[z.PARAMETERS]:g9,[z.ADDRESS]:n9,[z.SMART_ROLLUP_ADDRESS]:i9,[z.SMART_CONTRACT_ADDRESS]:s9,[z.SMART_ROLLUP_COMMITMENT_HASH]:a9,[z.VALUE]:b9,[z.INT16]:QR,[z.BLOCK_PAYLOAD_HASH]:m9,[z.ENTRYPOINT]:E9,[z.TX_ROLLUP_ORIGINATION_PARAM]:w9,[z.TX_ROLLUP_ID]:x9,[z.TX_ROLLUP_BATCH_CONTENT]:R9,[z.BURN_LIMIT]:T9,[z.PVM_KIND]:zR,[z.PADDED_BYTES]:P9,[z.SMART_ROLLUP_MESSAGE]:M9};Ce[z.OPERATION]=C9(Ce);Ce[z.OP_ACTIVATE_ACCOUNT]=t=>jt(Ce)(A0)(t);Ce[z.OP_DELEGATION]=t=>jt(Ce)(S0)(t);Ce[z.OP_TRANSACTION]=t=>jt(Ce)(R0)(t);Ce[z.OP_ORIGINATION]=t=>jt(Ce)(I0)(t);Ce[z.OP_BALLOT]=t=>jt(Ce)(T0)(t);Ce[z.OP_ENDORSEMENT]=t=>jt(Ce)(O0)(t);Ce[z.OP_SEED_NONCE_REVELATION]=t=>jt(Ce)(P0)(t);Ce[z.OP_PROPOSALS]=t=>jt(Ce)(N0)(t);Ce[z.OP_REVEAL]=t=>jt(Ce)(x0)(t);Ce[z.OP_REGISTER_GLOBAL_CONSTANT]=t=>jt(Ce)(M0)(t);Ce[z.OP_TRANSFER_TICKET]=t=>jt(Ce)(L0)(t);Ce[z.OP_TX_ROLLUP_ORIGINATION]=t=>jt(Ce)(C0)(t);Ce[z.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>jt(Ce)(B0)(t);Ce[z.OP_INCREASE_PAID_STORAGE]=t=>jt(Ce)(k0)(t);Ce[z.OP_UPDATE_CONSENSUS_KEY]=t=>jt(Ce)(D0)(t);Ce[z.OP_DRAIN_DELEGATE]=t=>jt(Ce)(U0)(t);Ce[z.OP_SMART_ROLLUP_ORIGINATE]=t=>jt(Ce)(K0)(t);Ce[z.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>jt(Ce)(H0)(t);Ce[z.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>jt(Ce)(F0)(t);Ce[z.MANAGER]=jt(Ce)(y2);const E2={activate_account:A0,reveal:x0,delegation:S0,transaction:R0,origination:I0,ballot:T0,endorsement:O0,seed_nonce_revelation:P0,proposals:N0,register_global_constant:M0,transfer_ticket:L0,tx_rollup_origination:C0,tx_rollup_submit_batch:B0,increase_paid_storage:k0,update_consensus_key:D0,drain_delegate:U0,smart_rollup_originate:K0,smart_rollup_add_messages:H0,smart_rollup_execute_outbox_message:F0},k9=(t,e)=>e.filter(r=>!t.includes(r)),D9=(t,e)=>t.filter(r=>r!==e),U9=t=>Object.keys(E2).includes(t),K9=t=>{const e=t.kind,r=Object.keys(t),n=D9(r,"kind"),i=Object.keys(E2[e]);return k9(n,i)};var yh;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(yh||(yh={}));const H9=yh.PtMumbai2;function F9(t,e){return{encoder:Ce[t],decoder:r=>{const n=Pn.fromHexString(r);return Le[t](n)}}}class _2{constructor(e=H9){this.protocolHash=e,this.codec=F9(z.MANAGER,this.protocolHash)}forge(e){if(e8(e.branch)!==_e.VALID)throw new dR(`The block hash ${e.branch} is invalid`);for(const n of e.contents){if(!U9(n.kind))throw new Wi(n.kind);const i=K9(n);if(i.length===1){if(n.kind==="delegation"&&i[0]==="delegate")continue;if(n.kind==="origination"&&i[0]==="delegate")continue;if(n.kind==="transaction"&&i[0]==="parameters")continue;if(n.kind==="tx_rollup_submit_batch"&&i[0]==="burn_limit")continue;throw new sg(`Missing properties: ${i.join(", ").toString()}`)}else if(i.length>1)throw new sg(`Missing properties: ${i.join(", ").toString()}`)}const r=this.codec.encoder(e).toLowerCase();return Promise.resolve(r)}parse(e){return Promise.resolve(this.codec.decoder(e))}}new _2;function En(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function J(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Xc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function j9(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function G9(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const n=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new sa(`Http error response: (${t.status}) ${n}`,t.status,t.statusText,n,t.url)}else return t}class V9{constructor(e){this.context=e}inject(e){return J(this,void 0,void 0,function*(){let r;try{r=yield this.context.rpc.injectOperation(e)}catch(n){const i=". You may want to use --replace to provide adequate fee and replace it";throw n instanceof sa&&n.message.includes(i)?G9(n,i):n}return r})}}class Jc extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}class Eh{publicKey(){return J(this,void 0,void 0,function*(){throw new Jc})}publicKeyHash(){return J(this,void 0,void 0,function*(){throw new Jc})}secretKey(){return J(this,void 0,void 0,function*(){throw new Jc})}sign(e,r){return J(this,void 0,void 0,function*(){throw new Jc})}}function w2(t){return new It(e=>(t.on("data",r=>{e.next(r)}),t.on("error",r=>{e.error(r)}),t.on("close",()=>{e.complete()}),()=>{t.close()}))}var As;(function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL=1100]="REVEAL"})(As||(As={}));var xs;(function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=374]="REVEAL"})(xs||(xs={}));var Ss;(function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"})(Ss||(Ss={}));const q9=250;var Ut;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Ut||(Ut={}));Ut.Pt24m4xi,Ut.PsBABY5H,Ut.PsBabyM1,Ut.PsCARTHA,Ut.PsDELPH1,Ut.PtEdo2Zk,Ut.PsFLorena,Ut.PtGRANADs,Ut.PtHangz2,Ut.PsiThaCa,Ut.Psithaca2,Ut.PtJakart2,Ut.PtKathman,Ut.PtLimaPtL,Ut.PtMumbai2,Ut.ProtoALpha;var cg;(function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.ITHACANET2="NetXnHfVqm9iesp",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH",t.MUMBAINET="NetXQw6nWSnrJ5t",t.MUMBAINET2="NetXgbcrNtXD2yA"})(cg||(cg={}));class A2 extends Error{constructor(e,r,n){super(`${e} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractMethodName=e,this.sigs=r,this.args=n,this.name="Invalid parameters error"}}class $9 extends Error{constructor(e){super(`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`),this.source=e,this.name="Invalid delegation source error"}}class $f extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidCodeParameter"}}class x2 extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidInitParameter"}}class z9 extends Error{constructor(e,r,n,i){super(`Unable to encode the parameter of the view: ${e}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractViewName=e,this.sigs=r,this.args=n,this.originalError=i,this.name="Invalid view parameters error",this.cause=i}}class W9 extends Error{constructor(e,r,n,i){super(e),this.message=e,this.viewName=r,this.failWith=n,this.originalError=i,this.name="ViewSimulationError"}}const X9=t=>{if(J9(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},J9=t=>{try{JSON.parse(t)}catch{return!1}return!0};class fg extends Error{constructor(e){super(`${e} Please configure the context of the view execution in the executeView method.`),this.info=e,this.name="InvalidViewSimulationContext"}}class S2 extends Error{constructor(e){super(e),this.message=e,this.name="RevealOperationError"}}class Y9 extends Error{constructor(e){super(e),this.message=e,this.name="OriginationParameterError"}}class Q9 extends Error{constructor(e){super(e),this.message=e,this.name="IntegerError"}}const Qo=({code:t,init:e,balance:r="0",delegate:n,storage:i,fee:s=xs.ORIGINATION,gasLimit:o=As.ORIGINATION,storageLimit:a=Ss.ORIGINATION,mutez:c=!1})=>J(void 0,void 0,void 0,function*(){if(i!==void 0&&e!==void 0)throw new Y9("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new $f("Wrong code parameter type, expected an array",t);let l;if(i!==void 0){const I=t.find(L=>"prim"in L&&L.prim==="storage");if(I?.args===void 0)throw new $f("The storage section is missing from the script",t);l=new Wr(I.args[0]).Encode(i)}else if(e!==void 0&&typeof e=="object")l=e;else throw new x2("Wrong init parameter type, expected JSON Michelson",e);const f={code:t,storage:l};if(isNaN(Number(r)))throw new Q9(`Unexpected Invalid Integer ${r}`);const d={kind:oe.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:c?r.toString():a0("tz","mutez",r).toString(),script:f};return n&&(d.delegate=n),d}),Zo=({to:t,amount:e,parameter:r,fee:n=xs.TRANSFER,gasLimit:i=As.TRANSFER,storageLimit:s=Ss.TRANSFER,mutez:o=!1})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TRANSACTION,fee:n,gas_limit:i,storage_limit:s,amount:o?e.toString():a0("tz","mutez",e).toString(),destination:t,parameters:r}}),ea=({delegate:t,source:e,fee:r=xs.DELEGATION,gasLimit:n=As.DELEGATION,storageLimit:i=Ss.DELEGATION})=>J(void 0,void 0,void 0,function*(){return{kind:oe.DELEGATION,source:e,fee:r,gas_limit:n,storage_limit:i,delegate:t}}),R2=({fee:t=xs.DELEGATION,gasLimit:e=As.DELEGATION,storageLimit:r=Ss.DELEGATION},n)=>J(void 0,void 0,void 0,function*(){return{kind:oe.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:n}}),Rs=({fee:t=xs.REVEAL,gasLimit:e=As.REVEAL,storageLimit:r=Ss.REVEAL},n,i)=>J(void 0,void 0,void 0,function*(){return{kind:oe.REVEAL,fee:t,public_key:i,source:n,gas_limit:e,storage_limit:r}}),cc=({value:t,source:e,fee:r,gasLimit:n,storageLimit:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:n,storage_limit:i,source:e}}),fc=({source:t,fee:e,gasLimit:r,storageLimit:n})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TX_ROLLUP_ORIGINATION,fee:e,gas_limit:r,storage_limit:n,source:t,tx_rollup_origination:{}}}),uc=({content:t,rollup:e,source:r,fee:n,gasLimit:i,storageLimit:s})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TX_ROLLUP_SUBMIT_BATCH,fee:n,gas_limit:i,storage_limit:s,source:r,content:t,rollup:e}}),lc=({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:n,destination:i,entrypoint:s,source:o,fee:a,gasLimit:c,storageLimit:l})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TRANSFER_TICKET,fee:a,gas_limit:c,storage_limit:l,source:o,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:n,destination:i,entrypoint:s}}),ta=({source:t,fee:e,gasLimit:r,storageLimit:n,amount:i,destination:s})=>J(void 0,void 0,void 0,function*(){return{kind:oe.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:n,amount:i,destination:s}}),I2=({consensus_key:t,delegate:e,destination:r})=>J(void 0,void 0,void 0,function*(){return{kind:oe.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}}),T2=({source:t,proposal:e,ballot:r})=>J(void 0,void 0,void 0,function*(){return{kind:oe.BALLOT,source:t,proposal:e,ballot:r}}),O2=({source:t,proposals:e})=>J(void 0,void 0,void 0,function*(){return{kind:oe.PROPOSALS,source:t,proposals:e}}),j0=({source:t,fee:e,gasLimit:r,storageLimit:n,pk:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:i}}),dc=({source:t,fee:e,gasLimit:r,storageLimit:n,message:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.SMART_ROLLUP_ADD_MESSAGES,source:t,fee:e,gas_limit:r,storage_limit:n,message:i}}),Yc=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),ug=(t,e)=>{if(Array.isArray(t)){const r=t.find(n=>n.kind===e);if(r&&Z9(r,e))return r}},Z9=(t,e)=>t.kind===e,_h=t=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,zf=t=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,G0=t=>"metadata"in t,ba=t=>G0(t)&&"operation_result"in t.metadata,e7=t=>G0(t)&&"internal_operation_results"in t.metadata,t7=t=>"with"in t;class P2 extends Error{constructor(e,r){super(),this.errors=e,this.errorDetails=r,this.name="TezosOperationError";const n=e[e.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,t7(n)&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class r7 extends Error{constructor(e){super("Preapply returned an unexpected result"),this.result=e,this.name="TezosPreapplyFailureError"}}const oi=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].contents.length;i++){const s=e[n].contents[i];ba(s)&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(o=>r.push(o.result)))}return r},ra=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let n=[];for(let i=0;i<r.length;i++)for(let s=0;s<r[i].contents.length;s++){const o=r[i].contents[s];if(G0(o)&&(ba(o)&&o.metadata.operation_result.status===e&&(n=n.concat(o.metadata.operation_result.errors||[])),e7(o)&&Array.isArray(o.metadata.internal_operation_results)))for(const a of o.metadata.internal_operation_results)"result"in a&&a.result.status===e&&(n=n.concat(a.result.errors||[]))}return n};class n7 extends Error{constructor(e){super(e),this.message=e,this.name="OriginationOperationError"}}class yd extends Error{constructor(e){super(e),this.message=e,this.name="InvalidEstimateValueError"}}class N2 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidConfirmationCountError"}}class i7 extends Error{constructor(e){super(e),this.message=e,this.name="ConfirmationUndefinedError"}}class s7 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidFilterExpressionError"}}class Ws extends Error{constructor(e){super(e),this.message=e,this.name="RPCResponseError"}}class Tr{constructor(e,r,n,i){if(this.hash=e,this.raw=r,this.results=n,this.context=i,this._pollingConfig$=new oc(1),this.currentHead$=this._pollingConfig$.pipe(ei(s=>new Fu(s).pipe(Hm(s.timeout*1e3,d0(new Error("Confirmation polling timed out"))))),ei(()=>km(()=>w2(this.context.stream.subscribeBlock("head"))).pipe(ei(s=>{var o,a;const c=(a=(o=this.lastHead)===null||o===void 0?void 0:o.header.level)!==null&&a!==void 0?a:s.header.level-1;return p0(c+1,s.header.level-c-1).pipe(Mc(l=>this.context.readProvider.getBlock(l)),Um(s))}),Hf(s=>this.lastHead=s))),B1({refCount:!0})),this.confirmed$=this.currentHead$.pipe(Ys(s=>{for(let o=3;o>=0;o--)s.operations[o].forEach(a=>{a.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),Kf(s=>s!==void 0),Bi(),B1()),this._foundAt=Number.POSITIVE_INFINITY,wm(this.hash)!==_e.VALID)throw new mm(this.hash);this.confirmed$.pipe(Bi(),g0(()=>pa(Om))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>ba(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,r){return J(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new N2("Confirmation count must be at least 1");const{defaultConfirmationCount:n,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:r||i});const s=e!==void 0?e:n;return new Promise((o,a)=>{this.confirmed$.pipe(ei(()=>this.currentHead$),Kf(c=>c.header.level-this._foundAt>=s-1),Bi()).subscribe(c=>{o(this._foundAt+(s-1))},a)})})}}class o7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}getOriginatedContractAddresses(){const e=this.results.filter(n=>n.kind==="origination");let r=[];for(const n of e)n.metadata.operation_result.originated_contracts&&(r=[...r,...n.metadata.operation_result.originated_contracts]);return r}get status(){return this.results.filter(e=>M2.indexOf(e.kind)!==-1).map(e=>ba(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(oi({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(oi({contents:this.results}),"paid_storage_size_diff"))}get errors(){return ra({contents:this.results})}}class $u{constructor(e){this.context=e}get rpc(){return this.context.rpc}get signer(){return this.context.signer}isRevealOpNeeded(e,r){return J(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return J(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let r=!1;for(const n of e)zf(n)&&(r=!0);return r}prepareOperation({operation:e,source:r},n){return J(this,void 0,void 0,function*(){const i={};let s=[];const o=this.context.readProvider.getBlockHash("head~2"),a=this.context.readProvider.getNextProtocol("head");Array.isArray(e)?s=[...e]:s=[e];const c=n||(yield this.signer.publicKeyHash());let l=Promise.resolve(void 0),f=Promise.resolve(void 0);s.find(U=>J(this,void 0,void 0,function*(){if(U.kind==="ballot"||U.kind==="proposals")try{f=this.rpc.getCurrentPeriod()}catch(F){throw new Ws(`Failed to get the current voting period index: ${JSON.stringify(F)}`)}}));for(let U=0;U<s.length;U++)if(zf(s[U])||s[U].kind==="reveal"){l=this.context.readProvider.getCounter(c,"head");break}const[d,I,P,L]=yield Promise.all([o,a,l,f]),H=parseInt(P||"0",10);(!i[c]||i[c]<H)&&(i[c]=H);const q=U=>({counter:`${++i[c]}`,fee:typeof U.fee>"u"?"0":`${U.fee}`,gas_limit:typeof U.gas_limit>"u"?"0":`${U.gas_limit}`,storage_limit:typeof U.storage_limit>"u"?"0":`${U.storage_limit}`}),G=U=>({source:typeof U.source>"u"?r||c:U.source}),V=(U=>U.map(F=>{switch(F.kind){case oe.ACTIVATION:case oe.DRAIN_DELEGATE:return Object.assign({},F);case oe.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},F),{balance:typeof F.balance<"u"?`${F.balance}`:"0"}),G(F)),q(F));case oe.TRANSACTION:{const j=Object.assign(Object.assign(Object.assign(Object.assign({},F),{amount:typeof F.amount<"u"?`${F.amount}`:"0"}),G(F)),q(F));if(j.source.toLowerCase().startsWith("kt1"))throw new s0(`KT1 addresses are not supported as source since ${Ut.PsBabyM1}`);return j}case oe.REVEAL:case oe.DELEGATION:case oe.REGISTER_GLOBAL_CONSTANT:case oe.TX_ROLLUP_ORIGINATION:case oe.TX_ROLLUP_SUBMIT_BATCH:case oe.UPDATE_CONSENSUS_KEY:case oe.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},F),G(F)),q(F));case oe.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},F),{ticket_amount:`${F.ticket_amount}`}),G(F)),q(F));case oe.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},F),{amount:`${F.amount}`}),G(F)),q(F));case oe.BALLOT:if(L===void 0)throw new Ws("Failed to get the current voting period index");return Object.assign(Object.assign({},F),{period:L?.voting_period.index});case oe.PROPOSALS:if(L===void 0)throw new Ws("Failed to get the current voting period index");return Object.assign(Object.assign({},F),{period:L?.voting_period.index});default:throw new Wi(F.kind)}}))(s);return{opOb:{branch:d,contents:V,protocol:I},counter:H}})}forge({opOb:{branch:e,contents:r,protocol:n},counter:i}){return J(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:e,contents:r}),opOb:{branch:e,contents:r,protocol:n},counter:i}})}simulate(e){return J(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(e),op:e,context:this.context.clone()}})}estimate(e,r){var{fee:n,gasLimit:i,storageLimit:s}=e,o=En(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){let a=n,c=i,l=s;if(a&&a%1!==0)throw new yd(`Fee value must not be a decimal: ${a}`);if(c&&c%1!==0)throw new yd(`Gas Limit value must not be a decimal: ${c}`);if(l&&l%1!==0)throw new yd(`Storage Limit value must not be a decimal: ${l}`);if(n===void 0||i===void 0||s===void 0){const f=yield r(Object.assign({fee:n,gasLimit:i,storageLimit:s},o));a===void 0&&(a=f.suggestedFeeMutez),c===void 0&&(c=f.gasLimit),l===void 0&&(l=f.storageLimit)}return{fee:a,gasLimit:c,storageLimit:l}})}signAndInject(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=r.sbytes,e.opOb.signature=r.prefixSig;const n=[],i=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(i))throw new r7(i);for(let o=0;o<i.length;o++)for(let a=0;a<i[o].contents.length;a++)n.push(i[o].contents[a]);const s=ra(i);if(s.length)throw new P2(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:n,context:this.context.clone()}})}}const M2=[oe.ACTIVATION,oe.ORIGINATION,oe.TRANSACTION,oe.DELEGATION];class V0 extends $u{constructor(e,r){super(e),this.estimator=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:oe.TRANSACTION},e)),this}withTransferTicket(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination,"param destination");return this.operations.push(Object.assign({kind:oe.TRANSFER_TICKET},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:oe.DELEGATION},e)),this}withActivation({pkh:e,secret:r}){if(o0(e)!==_e.VALID)throw new i0(e);return this.operations.push({kind:oe.ACTIVATION,pkh:e,secret:r}),this}withOrigination(e){return this.operations.push(Object.assign({kind:oe.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:oe.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:oe.INCREASE_PAID_STORAGE},e)),this}withTxRollupOrigination(e){return this.operations.push(Object.assign({kind:oe.TX_ROLLUP_ORIGINATION},e)),this}withSmartRollupAddMessages(e){return this.operations.push(Object.assign({kind:oe.SMART_ROLLUP_ADD_MESSAGES},e)),this}withTxRollupSubmitBatch(e){return this.operations.push(Object.assign({kind:oe.TX_ROLLUP_SUBMIT_BATCH},e)),this}getRPCOp(e){return J(this,void 0,void 0,function*(){switch(e.kind){case oe.TRANSACTION:return Zo(Object.assign({},e));case oe.ORIGINATION:return Qo(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case oe.DELEGATION:return ea(Object.assign({},e));case oe.ACTIVATION:return Object.assign({},e);case oe.REGISTER_GLOBAL_CONSTANT:return cc(Object.assign({},e));case oe.INCREASE_PAID_STORAGE:return ta(Object.assign({},e));case oe.TX_ROLLUP_ORIGINATION:return fc(Object.assign({},e));case oe.TX_ROLLUP_SUBMIT_BATCH:return uc(Object.assign({},e));case oe.TRANSFER_TICKET:return lc(Object.assign({},e));case oe.SMART_ROLLUP_ADD_MESSAGES:return dc(Object.assign({},e));default:throw new Wi(e.kind)}})}with(e){for(const r of e)switch(r.kind){case oe.TRANSACTION:this.withTransfer(r);break;case oe.ORIGINATION:this.withOrigination(r);break;case oe.DELEGATION:this.withDelegation(r);break;case oe.ACTIVATION:this.withActivation(r);break;case oe.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case oe.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;case oe.TX_ROLLUP_ORIGINATION:this.withTxRollupOrigination(r);break;case oe.TX_ROLLUP_SUBMIT_BATCH:this.withTxRollupSubmitBatch(r);break;case oe.TRANSFER_TICKET:this.withTransferTicket(r);break;case oe.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(r);break;default:throw new Wi(r.kind)}return this}toPrepare(){return J(this,void 0,void 0,function*(){const e=yield this.signer.publicKeyHash(),r=yield this.signer.publicKey(),n=yield this.estimator.batch(this.operations),i=yield this.isRevealOpNeeded(this.operations,e);let s=i?1:0;const o=[];for(const a of this.operations){if(_h(a)){const c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[s]}));o.push(yield this.getRPCOp(Object.assign(Object.assign({},a),c)))}else o.push(Object.assign({},a));s++}if(i){const a={kind:oe.REVEAL},c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[0]}));o.unshift(yield Rs(Object.assign({},c),e,r))}return o})}send(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.signer.publicKey(),i=yield this.estimator.batch(this.operations),s=yield this.isRevealOpNeeded(this.operations,r);let o=s?1:0;const a=[];for(const H of this.operations){if(_h(H)){const q=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[o]}));a.push(yield this.getRPCOp(Object.assign(Object.assign({},H),q)))}else a.push(Object.assign({},H));o++}if(s){const H={kind:oe.REVEAL},q=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[0]}));a.unshift(yield Rs(Object.assign({},q),r,n))}const c=e&&e.source||r,l=yield this.prepareOperation({operation:a,source:c}),f=yield this.forge(l),{hash:d,context:I,forgedBytes:P,opResponse:L}=yield this.signAndInject(f);return new o7(d,a,c,P,L,I)})}}class a7{constructor(e,r){this.context=e,this.estimator=r}batch(e){const r=new V0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}const c7=(t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP});const n=oi({contents:t});let i=new be(0),s=new be(0),o=new be(0),a=new be(0),c=new be(0),l=new be(0);return n.forEach(f=>{o=o.plus(f.fee||0),a=a.plus(Array.isArray(f.originated_contracts)?f.originated_contracts.length*r:0),c=c.plus("allocated_destination_contract"in f?e:0),i=i.plus(f.consumed_milligas||0),l=l.plus("paid_storage_size_diff"in f&&Number(f.paid_storage_size_diff)||0)}),s=s.plus(c).plus(a).plus(l),{totalFee:o,totalMilliGas:i,totalGas:i.dividedBy(1e3),totalStorage:s,totalAllocationBurn:c,totalOriginationBurn:a,totalPaidStorageDiff:l,totalStorageBurn:new be(s.multipliedBy(q9))}},f7=60;class va{constructor(e,r,n){if(this.opHash=e,this.context=r,this._newHead$=n,this._operationResult=new oc(1),this._includedInBlock=new oc(1),this._included=!1,this.newHead$=this._newHead$.pipe(ei(i=>{var s,o;const a=(o=(s=this.lastHead)===null||s===void 0?void 0:s.header.level)!==null&&o!==void 0?o:i.header.level-1;return p0(a+1,i.header.level-a-1).pipe(Mc(c=>this.context.readProvider.getBlock(c)),Um(i))}),Hf(i=>this.lastHead=i),hh(1),ic()),this.confirmed$=this.newHead$.pipe(Ys(i=>{for(const s of i.operations)for(const o of s)if(o.hash===this.opHash)return this._included=!0,this._includedInBlock.next(i),this._operationResult.next(o.contents),i}),Kf(i=>typeof i<"u"),Bi(),hh(1),ic()),wm(this.opHash)!==_e.VALID)throw new mm(this.opHash);this.confirmed$.pipe(Bi(),g0(()=>pa(void 0))).subscribe()}operationResults(){return J(this,void 0,void 0,function*(){return this._operationResult.pipe(Bi()).toPromise()})}receipt(){return J(this,void 0,void 0,function*(){return c7(yield this.operationResults())})}getCurrentConfirmation(){return J(this,void 0,void 0,function*(){return this._included?N1([this._includedInBlock,lo(this.context.readProvider.getBlock("head"))]).pipe(Ys(([e,r])=>r.header.level-e.header.level+1),Bi()).toPromise():0})}isInCurrentBranch(e="head"){return J(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(e),n=yield this._includedInBlock.pipe(Bi()).toPromise(),i=r-n.header.level;if(i<=0)return!0;const s=Math.min(n.header.level+i,n.header.level+f7);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(n.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new N2("Confirmation count must be at least 1");const{defaultConfirmationCount:r}=this.context.config,n=e!==void 0?e:r;if(n===void 0)throw new i7("Default confirmation count can not be undefined!");return N1([this._includedInBlock,this.newHead$]).pipe(Dm(([,i],[,s])=>i.hash===s.hash),Ys(([i,s])=>({block:s,expectedConfirmation:n,currentConfirmation:s.header.level-i.header.level+1,completed:s.header.level-i.header.level>=n-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),Lx(({completed:i})=>!i,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}class u7 extends va{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r,this.getOriginatedContractAddresses=()=>J(this,void 0,void 0,function*(){const s=(yield this.operationResults()).filter(a=>a.kind==="origination");let o=[];for(const a of s)a.metadata.operation_result.originated_contracts&&(o=[...o,...a.metadata.operation_result.originated_contracts]);return o})}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}status(){return J(this,void 0,void 0,function*(){return this._included?(yield this.operationResults()).filter(r=>M2.indexOf(r.kind)!==-1).map(r=>ba(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown":"pending"})}}class l7 extends va{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}delegationOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.DELEGATION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class d7 extends va{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}increasePaidStorageOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.INCREASE_PAID_STORAGE)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}class h7 extends va{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}originationOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return ug(e,oe.ORIGINATION)})}revealOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return ug(e,oe.REVEAL)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return J(this,void 0,void 0,function*(){const e=yield this.originationOperation(),r=(e?.metadata.operation_result.originated_contracts||[])[0];return this.context.wallet.at(r)})}}class p7 extends va{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}transactionOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.TRANSACTION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}function g7(t){return function(r){return new Fu(null).pipe(Hm(t,d0(new Error("Confirmation polling timed out"))),Gu(()=>r))}}const b7=(t,e,r)=>t.pipe(g7(e.config.confirmationPollingTimeoutSecond*1e3),hh(1),ic());class v7{constructor(e){this.context=e,this.sharedHeadObs=km(()=>w2(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return J(this,void 0,void 0,function*(){return b7(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,r=1){return lo(this.context.readProvider.getBlock(e)).pipe(ei(n=>r===1?pa(n):p0(n.header.level,r-1).pipe(Ix(n),Mc(i=>J(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof i=="number"?i:i.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:e}){return J(this,void 0,void 0,function*(){const r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(yield this.createNewHeadObservable()),Uf(...r)})}createOperation(e,r={}){return J(this,void 0,void 0,function*(){return new va(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(e,r={}){return J(this,void 0,void 0,function*(){return new u7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(e,r={}){return J(this,void 0,void 0,function*(){return new p7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new l7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new h7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createIncreasePaidStorageOperation(e,r={}){return J(this,void 0,void 0,function*(){return new d7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class m7 extends $u{constructor(e){super(e)}getBalance(e){return J(this,void 0,void 0,function*(){if(ct(e)!==_e.VALID)throw new ft(e);return this.context.readProvider.getBalance(e,"head")})}getDelegate(e){return J(this,void 0,void 0,function*(){if(ct(e)!==_e.VALID)throw new ft(e);return this.context.readProvider.getDelegate(e,"head")})}activate(e,r){return J(this,void 0,void 0,function*(){if(o0(e)!==_e.VALID)throw new i0(e);const n={kind:oe.ACTIVATION,pkh:e,secret:r},i=yield this.prepareOperation({operation:[n],source:e}),s=yield this.forge(i),o=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new Tr(yield this.rpc.injectOperation(o),Object.assign(Object.assign({},s),{opbytes:o}),[],this.context.clone())})}}const Qc=100,y7=1,E7=.1,lg=100;class vr{constructor(e,r,n,i,s=Qc){this._milligasLimit=e,this._storageLimit=r,this.opSize=n,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const e=Math.max(Number(this._storageLimit),0);return e>0?e:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+lg)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+lg)*E7+Number(this.opSize)*y7}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(Qc+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+Qc*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),Qc)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let r=0,n=0,i=0,s=0,o;return e.forEach(a=>{r+=a.milligasLimit,n+=a.storageLimit,i+=a.opSize,s=Math.max(a.minimalFeePerStorageByteMutez,s),a.baseFeeMutez&&(o=o?o+a.baseFeeMutez:a.baseFeeMutez)}),new vr(r,n,i,s,o)}static createArrayEstimateInstancesFromProperties(e){return e.map(r=>new vr(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class dg extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}const Jt=(t,e)=>({fee:typeof t.fee>"u"?e.fee:t.fee,gasLimit:typeof t.gasLimit>"u"?e.gasLimit:t.gasLimit,storageLimit:typeof t.storageLimit>"u"?e.storageLimit:t.storageLimit}),_7="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class w7 extends $u{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128}getKeys(){return J(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}getAccountLimits(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.context.readProvider.getBalance(e,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:c}=r;return{fee:0,gasLimit:n?Math.floor(this.ajustGasForBatchOperation(o,s,n).toNumber()):s.toNumber(),storageLimit:Math.floor(be.min(i.dividedBy(c),a).toNumber())}})}ajustGasForBatchOperation(e,r,n){return be.min(r,e.div(n+1))}getEstimationPropertiesFromOperationContent(e,r,n,i){const s=oi({contents:[e]});let o=0,a=0;return s.forEach(c=>{a+="originated_contracts"in c&&typeof c.originated_contracts<"u"?c.originated_contracts.length*this.ORIGINATION_STORAGE:0,a+="allocated_destination_contract"in c?this.ALLOCATION_STORAGE:0,o+=Number(c.consumed_milligas)||0,a+="paid_storage_size_diff"in c&&Number(c.paid_storage_size_diff)||0,a+="storage_size"in c&&"global_address"in c&&Number(c.storage_size)||0,a+="originated_rollup"in c?i:0}),_h(e)?{milligasLimit:o||0,storageLimit:Number(a||0),opSize:r,minimalFeePerStorageByteMutez:n.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:n.toNumber(),baseFeeMutez:0}}prepareEstimate(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.prepareOperation(e,n),{opbytes:s,opOb:{branch:o,contents:a}}=yield this.forge(i),c={operation:{branch:o,contents:a,signature:_7},chain_id:yield this.context.readProvider.getChainId()},{opResponse:l}=yield this.simulate(c),{cost_per_byte:f,tx_rollup_origination_size:d}=r,I=[...ra(l,"backtracked"),...ra(l)];if(I.length)throw new P2(I,"Error occurred during estimation");let P=1;return Array.isArray(e.operation)&&e.operation.length>1&&(P=l.contents[0].kind==="reveal"?e.operation.length-1:e.operation.length),l.contents.map(L=>this.getEstimationPropertiesFromOperationContent(L,L.kind==="reveal"?this.OP_SIZE_REVEAL/2:s.length/2/P,f,d??0))})}originate(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const{publicKeyHash:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Qo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c)))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}transfer(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(ct(s.to)!==_e.VALID)throw new ft(s.to);if(s.source&&ct(s.source)!==_e.VALID)throw new ft(s.source);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Zo(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}transferTicket(e){var r,{fee:n,storageLimit:i,gasLimit:s}=e,o=En(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(ct(o.destination)!==_e.VALID)throw new ft(o.destination,"param destination");if(o.source&&ct(o.source)!==_e.VALID)throw new ft((r=o.source)!==null&&r!==void 0?r:"","param source");const a=(yield this.getKeys()).publicKeyHash,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield lc(Object.assign(Object.assign({},o),Jt({fee:n,storageLimit:i,gasLimit:s},l))),d=yield this.isRevealOpNeeded([f],a),I=d?yield this.addRevealOp([f],a):f,P=yield this.prepareEstimate({operation:I,source:a},c,a);return d&&P.shift(),vr.createEstimateInstanceFromProperties(P)})}setDelegate(e){var{fee:r,gasLimit:n,storageLimit:i}=e,s=En(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){if(s.source&&ct(s.source)!==_e.VALID)throw new ft(s.source);if(s.delegate&&ct(s.delegate)!==_e.VALID)throw new ft(s.delegate);const o=(yield this.getKeys()).publicKeyHash,a=s.source||o,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield ea(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:i,gasLimit:n},l))),d=yield this.isRevealOpNeeded([f],o),I=d?yield this.addRevealOp([f],o):f,P=yield this.prepareEstimate({operation:I,source:o},c,o);return d&&P.shift(),vr.createEstimateInstanceFromProperties(P)})}batch(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r}=yield this.getKeys();let n=[];const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i,e.length);for(const c of e)switch(c.kind){case oe.TRANSACTION:n.push(yield Zo(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.ORIGINATION:n.push(yield Qo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},c),Jt(c,s)))));break;case oe.DELEGATION:n.push(yield ea(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.ACTIVATION:n.push(Object.assign(Object.assign({},c),s));break;case oe.REGISTER_GLOBAL_CONSTANT:n.push(yield cc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.TX_ROLLUP_ORIGINATION:n.push(yield fc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.TX_ROLLUP_SUBMIT_BATCH:n.push(yield uc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.TRANSFER_TICKET:n.push(yield lc(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.INCREASE_PAID_STORAGE:n.push(yield ta(Object.assign(Object.assign({},c),Jt(c,s))));break;case oe.SMART_ROLLUP_ADD_MESSAGES:n.push(yield dc(Object.assign(Object.assign({},c),Jt(c,s))));break;default:throw new Wi(e.kind)}n=(yield this.isRevealOpNeeded(n,r))?yield this.addRevealOp(n,r):n;const a=yield this.prepareEstimate({operation:n,source:r},i,r);return vr.createArrayEstimateInstancesFromProperties(a)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=(yield this.getKeys()).publicKeyHash,n=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.getAccountLimits(r,n),s=yield R2(Object.assign(Object.assign({},e),i),r),o=yield this.isRevealOpNeeded([s],r),a=o?yield this.addRevealOp([s],r):s,c=yield this.prepareEstimate({operation:a,source:r},n,r);return o&&c.shift(),vr.createEstimateInstanceFromProperties(c)})}reveal(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:n}=yield this.getKeys();if(!n)throw new dg;if(yield this.isAccountRevealRequired(r)){const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i),o=yield Rs(Object.assign(Object.assign({},e),s),r,n),a=yield this.prepareEstimate({operation:o,source:r},i,r);return vr.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield cc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield ta(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){e=e||{};const{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield fc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield uc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield j0(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}smartRollupAddMessages(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=En(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield dc(Object.assign(Object.assign({},s),Jt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),vr.createEstimateInstanceFromProperties(I)})}addRevealOp(e,r){return J(this,void 0,void 0,function*(){const{publicKey:n}=yield this.getKeys();if(!n)throw new dg;return e.unshift(yield Rs(Object.assign({fee:xs.REVEAL,gasLimit:As.REVEAL,storageLimit:Ss.REVEAL}),r,yield this.signer.publicKey())),e})}}class hg extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="delegation"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class A7 extends Tr{constructor(e,r,n,i,s,o){super(e,n,i,s),this.params=r,this.contractProvider=o;const a=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(a)&&(this.contractAddress=a[0])}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="origination"),r=e&&ba(e)&&e.metadata.operation_result;return r||void 0}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,r){return J(this,void 0,void 0,function*(){if(!this.contractAddress)throw new n7("No contract was originated in this operation");return yield this.confirmation(e,r),this.contractProvider.at(this.contractAddress)})}}class x7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="register_global_constant"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get registeredExpression(){return this.params.value}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class S7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get publicKey(){return this.params.public_key}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(oi({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(oi({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(oi({contents:this.operationResults}),"storage_size"))}get errors(){return ra({contents:this.operationResults})}}class R7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new be(this.params.amount)}get destination(){return this.params.destination}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(oi({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(oi({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(oi({contents:this.operationResults}),"storage_size"))}get errors(){return ra({contents:this.operationResults})}}class I7{constructor(e,r,n,i,s,o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}validateArgs(e,r,n){const i=r.ExtractSignatures();if(!i.find(s=>s.length===e.length))throw new A2(n,i,e)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const e=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(e)return e.shift(),e}else{const e=this.parameterSchema.ExtractSignatures();return e.length==1?e[0]:e}}send(e={}){return this.provider instanceof zu?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:No,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class T7{constructor(e,r){this.id=e,this.provider=r}getSaplingDiff(e){return J(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}class O7{constructor(e,r){this.walletProvider=e,this.context=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:oe.TRANSACTION},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:oe.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:oe.ORIGINATION},e)),this}withIncreasePaidStorage(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination);return this.operations.push(Object.assign({kind:oe.INCREASE_PAID_STORAGE},e)),this}mapOperation(e){return J(this,void 0,void 0,function*(){switch(e.kind){case oe.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case oe.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case oe.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case oe.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e}));default:throw new Wi(e.kind)}})}with(e){for(const r of e)switch(r.kind){case oe.TRANSACTION:this.withTransfer(r);break;case oe.ORIGINATION:this.withOrigination(r);break;case oe.DELEGATION:this.withDelegation(r);break;case oe.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;default:throw new Wi(r.kind)}return this}send(){return J(this,void 0,void 0,function*(){const e=[];for(const n of this.operations)e.push(yield this.mapOperation(n));const r=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(r)})}}class zu{constructor(e){this.context=e,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:e}={}){return J(this,void 0,void 0,function*(){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(e){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(n)}))}setDelegate(e){if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createDelegationOperation(n)}))}registerDelegate(){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createTransactionOperation(n)}))}increasePaidStorage(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}batch(e){const r=new O7(this.walletProvider,this.context);return Array.isArray(e)&&r.with(e),r}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(Do(e)!==_e.VALID)throw new ko(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new C2(e,s,this,this.context.contract,o,n,i);return r(a,this.context)})}}class L2{constructor(e){this.context=e}getPKH(){return J(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return J(this,void 0,void 0,function*(){return Yc(yield e(),oe.INCREASE_PAID_STORAGE)})}sendOperations(e){return J(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}}class P7{constructor(e,r,n,i,s="unit",o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(e={}){return this.provider instanceof zu?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:No,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class N7{constructor(e,r,n,i,s,o="Unit"){this._rpc=e,this._readProvider=r,this._contractAddress=n,this._smartContractViewSchema=i,this._contractStorageType=s,this._args=o}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return J(this,void 0,void 0,function*(){this.verifyContextExecution(e);const r=yield this._readProvider.getChainId(),n=this.transformArgsToMichelson(),i={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:n,chain_id:r,source:e.viewCaller};return e.source&&(i.payer=e.source),this.executeViewAndDecodeResult(i)})}verifyContextExecution(e){if(e.source&&ct(e.source)!==_e.VALID)throw new fg(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||ct(e.viewCaller)!==_e.VALID)throw new fg(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new z9(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,r,n){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:n}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((s,o)=>{s.prim in i&&(e[o]=Object(i)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,n):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,n)}),e}executeViewAndDecodeResult(e){return J(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runScriptView(e)).data}catch(n){const i=X9(n);throw i?new W9(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(i)}`,this._smartContractViewSchema.viewName,i,n):n}return this._smartContractViewSchema.decodeViewResult(r)})}}class M7{constructor(e,r){this.provider=e,this.contractAddress=r}createContractMethodFlatParams(e,r,n,i=!0,s=!1){return new I7(this.provider,this.contractAddress,e,r,n,i,s)}createContractMethodObjectParam(e,r,n,i=!0,s=!1){return new P7(this.provider,this.contractAddress,e,r,n,i,s)}createContractViewObjectParam(e,r,n,i,s){return new N7(e,r,this.contractAddress,n,i,s)}}const No="default";class L7{constructor(e,r,n,i,s,o,a){this.currentContract=e,this.name=r,this.callbackParametersSchema=n,this.parameterSchema=i,this.args=s,this.rpc=o,this.readProvider=a}read(e){return J(this,void 0,void 0,function*(){if(Do(e??"")==_e.VALID)throw new s0("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&_m(e)!==_e.VALID)throw new qA(e);const r=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const C7=(t,e,r)=>{const n=e.ExtractSignatures();if(!n.find(i=>i.length===t.length))throw new A2(r,n,t)},B7=t=>{let e=!1;if("prim"in t&&t.prim==="pair"&&t.args){const r=t.args[t.args.length-1];"prim"in r&&r.prim==="contract"&&(e=!0)}return e};class C2{constructor(e,r,n,i,s,o,a){this.address=e,this.script=r,this.storageProvider=i,this.entrypoints=s,this.rpc=o,this.readProvider=a,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new M7(n,e),this.schema=Wr.fromRPCResponse({script:this.script}),this.parameterSchema=Oo.fromRPCResponse({script:this.script}),this.viewSchema=b0.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,o,this.readProvider,this.viewSchema),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,r,n,i){const s=this.parameterSchema,o=Object.keys(r);if(s.isMultipleEntryPoint)o.forEach(c=>{const l=new Oo(r[c]);if(this.methods[c]=function(...f){return e.contractMethodFactory.createContractMethodFlatParams(l,c,f)},this.methodsObject[c]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(l,c,f)},B7(r[c])){const f=function(...d){const I=r[c].args[0],P=new Oo(I),L=r[c].args[1].args[0],H=new Oo(L);return C7(d,P,c),new L7(e,c,H,P,d,n,i)};this.views[c]=f}}),Object.keys(s.ExtractSchema()).filter(c=>Object.keys(r).indexOf(c)===-1).forEach(c=>{this.methods[c]=function(...l){return e.contractMethodFactory.createContractMethodFlatParams(s,c,l,!1,!0)},this.methodsObject[c]=function(l){return e.contractMethodFactory.createContractMethodObjectParam(s,c,l,!1,!0)}});else{const a=this.parameterSchema;this.methods[No]=function(...c){return e.contractMethodFactory.createContractMethodFlatParams(a,No,c,!1)},this.methodsObject[No]=function(c){return e.contractMethodFactory.createContractMethodObjectParam(a,No,c,!1)}}}_initializeOnChainViews(e,r,n,i){const s=this.schema.val;i.forEach(o=>{this.contractViews[o.viewName]=function(a){return e.contractMethodFactory.createContractViewObjectParam(r,n,o,s,a)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(e){return this.storageProvider.getBigMapKey(this.address,e,this.schema)}}class k7{constructor(e,r,n){this.id=e,this.schema=r,this.provider=n}get(e,r){return J(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,r)}catch(n){if(n instanceof sa&&n.status===Qa.NOT_FOUND)return;throw n}})}getMultipleValues(e,r,n=5){return J(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),e,this.schema,r,n)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const pg=t=>({big_map:(e,r)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const n=new Wr(r);return new k7(new be(e.int),n,t)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new T7(new be(e.int),t)});class D7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.originatedRollup=this.operationResults&&this.operationResults.originated_rollup}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_origination"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class U7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_submit_batch"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get content(){return this.params.content}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class K7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="ballot");return r||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class H7 extends Tr{constructor(e,r,n,i,s){super(e,n,i,s),this.params=r}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="drain_delegate"),r=e&&e.metadata&&e.metadata.balance_updates;return r||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class F7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind===oe.TRANSFER_TICKET),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class j7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="increase_paid_storage"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class G7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="proposals");return r||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class V7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="update_consensus_key"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get pk(){return this.params.pk}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class q7 extends Tr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="smart_rollup_add_messages"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get message(){return this.params.message}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class $7 extends $u{constructor(e,r){super(e),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol")}getStorage(e,r){return J(this,void 0,void 0,function*(){if(Do(e)!==_e.VALID)throw new ko(e);const n=yield this.context.readProvider.getScript(e,"head");r||(r=n);let i;return Wr.isSchema(r)?i=r:i=Wr.fromRPCResponse({script:r}),i.Execute(n.storage,pg(this))})}getBigMapKey(e,r,n){return J(this,void 0,void 0,function*(){if(Do(e)!==_e.VALID)throw new ko(e);n||(n=(yield this.rpc.getContract(e)).script);let i;Wr.isSchema(n)?i=n:i=Wr.fromRPCResponse({script:n});const s=i.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(e,s);return i.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(e,r,n,i){return J(this,void 0,void 0,function*(){const{key:s,type:o}=n.EncodeBigMapKey(r),{packed:a}=yield this.context.packer.packData({data:s,type:o}),c=n8(a),l=i?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},i):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},"head");return n.ExecuteOnBigMapValue(l,pg(this))})}getBigMapKeysByID(e,r,n,i,s=5){return J(this,void 0,void 0,function*(){const o=yield this.getBlockForRequest(r,i),a=new zr;let c=0,l=[];for(;c<r.length;){const d=r.slice(c,c+s).map(I=>this.getBigMapValueOrUndefined(I,e,n,o));l=[...l,...yield Promise.all(d)],c+=s}for(let f=0;f<l.length;f++)a.set(r[f],l[f]);return a})}getBlockForRequest(e,r){return J(this,void 0,void 0,function*(){return e.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,r,n,i){return J(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,e,n,i)}catch(s){if(s instanceof sa&&s.status===Qa.NOT_FOUND)return;throw s}})}getSaplingDiffByID(e,r){return J(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(zf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimator.reveal();if(s){const o={kind:oe.REVEAL},a=yield this.estimate(o,()=>J(this,void 0,void 0,function*(){return s}));return n.unshift(yield Rs(Object.assign({},a),r,i)),n}}return e})}originate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield Qo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),r))),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s,source:n}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new A7(c,i,f,d,l,this)})}setDelegate(e){return J(this,void 0,void 0,function*(){if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);if(/kt1/i.test(e.source))throw new $9(e.source);const r=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield ea(Object.assign(Object.assign({},e),r)),s=e.source||n,o=yield this.addRevealOperationIfNeeded(i,n),a=yield this.prepareOperation({operation:o,source:s}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:I}=yield this.signAndInject(c);return new hg(l,i,s,d,I,f)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield R2(Object.assign(Object.assign({},e),r),n),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new hg(c,i,n,f,d,l)})}transfer(e){return J(this,void 0,void 0,function*(){if(ct(e.to)!==_e.VALID)throw new ft(e.to);if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),i=yield Zo(Object.assign(Object.assign({},e),n)),s=e.source||r,o=yield this.addRevealOperationIfNeeded(i,r),a=yield this.prepareOperation({operation:o,source:e.source}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:I}=yield this.signAndInject(c);return new R7(l,i,s,d,I,f)})}transferTicket(e){var r;return J(this,void 0,void 0,function*(){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination,"param destination");if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source,"param source");const n=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),s=yield lc(Object.assign(Object.assign({},e),i)),o=(r=e.source)!==null&&r!==void 0?r:n,a=yield this.addRevealOperationIfNeeded(s,n),c=yield this.prepareOperation({operation:a,source:e.source}),l=yield this.forge(c),{hash:f,context:d,forgedBytes:I,opResponse:P}=yield this.signAndInject(l);return new F7(f,s,o,I,P,d)})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimator.reveal(e);if(n){const i=yield this.estimate(e,()=>J(this,void 0,void 0,function*(){return n})),s=yield Rs(Object.assign({},i),r,yield this.signer.publicKey()),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new S7(c,s,r,f,d,l)}else throw new S2(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),i=yield cc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new x7(c,i,r,f,d,l)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),i=yield ta(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new j7(c,i,r,f,d,l)})}drainDelegate(e){return J(this,void 0,void 0,function*(){const r=yield I2(Object.assign({},e)),n=yield this.prepareOperation({operation:r}),i=yield this.forge(n),{hash:s,context:o,forgedBytes:a,opResponse:c}=yield this.signAndInject(i);return new H7(s,r,a,c,o)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e||{},this.estimator.txRollupOriginate.bind(this.estimator)),i=yield fc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new D7(c,i,r,f,d,l)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.txRollupSubmitBatch.bind(this.estimator)),i=yield uc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new U7(c,i,r,f,d,l)})}ballot(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield T2(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new K7(c,s,n,f,d,l)})}proposals(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield O2(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new G7(c,s,n,f,d,l)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),i=yield j0(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new V7(c,i,r,f,d,l)})}smartRollupAddMessages(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.smartRollupAddMessages.bind(this.estimator)),i=yield dc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new q7(c,i,r,f,d,l)})}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(Do(e)!==_e.VALID)throw new ko(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new C2(e,s,this,this,o,n,i);return r(a,this.context)})}batch(e){const r=new V0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class B2{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return J(this,void 0,void 0,function*(){return new zs({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return J(this,void 0,void 0,function*(){return new zs({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return J(this,void 0,void 0,function*(){return new zs({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return J(this,void 0,void 0,function*(){const r=e;if(r.code=yield this.formatCodeParam(e.code),e.init)r.init=yield this.formatInitParam(e.init);else if(e.storage){const n=r.code.find(o=>"prim"in o&&o.prim==="storage");if(!n?.args)throw new $f("The storage section is missing from the script",e.code);const i=new Wr(n.args[0]),s=yield this.findGlobalConstantsHashAndValue(i);if(Object.keys(s).length!==0){const a=new zs({expandGlobalConstant:s}).parseJSON(n.args[0]),c=new Wr(a);r.init=c.Encode(e.storage)}else r.init=i.Encode(e.storage);delete r.storage}return r})}formatCodeParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseScript(e);if(n===null)throw new $f("Invalid code parameter",e);r=n}else{const n=yield this.parseJSON(e),i=["parameter","storage","code"];r=n.sort((s,o)=>i.indexOf(s.prim)-i.indexOf(o.prim))}return r})}formatInitParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseMichelineExpression(e);if(n===null)throw new x2("Invalid init parameter",e);r=n}else r=yield this.parseJSON(e);return r})}findGlobalConstantsHashAndValue(e){return J(this,void 0,void 0,function*(){const r=e.findToken("constant"),n={};if(r.length!==0)for(const i of r){const s=i.tokenVal.args;if(s){const o=s[0];if(o.string){const a=o.string,c=yield this.context.globalConstantsProvider.getGlobalConstantByHash(a);Object.assign(n,{[a]:c})}}}return n})}}class k2{constructor(e){this.context=e}packData(e){return J(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class z7 extends Error{constructor(){super("No {} constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class D2{getGlobalConstantByHash(e){return J(this,void 0,void 0,function*(){throw new z7})}}class U2{constructor(e){this.rpc=e}getBalance(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(r)})})}getDelegate(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(r)})})}getNextProtocol(e){return J(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return J(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}})}getScript(e,r){return J(this,void 0,void 0,function*(){const{script:n}=yield this.rpc.getContract(e,{block:String(r)});return n})}getStorage(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(r)})})}getBlockHash(e){return J(this,void 0,void 0,function*(){const{hash:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBlockLevel(e){return J(this,void 0,void 0,function*(){const{level:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getCounter(e,r){return J(this,void 0,void 0,function*(){const{counter:n}=yield this.rpc.getContract(e,{block:String(r)});return n||"0"})}getBlockTimestamp(e){return J(this,void 0,void 0,function*(){const{timestamp:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBigMapValue(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(r)})})}getSaplingDiffById(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(r)})})}getSaplingDiffByContract(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(r)})})}getEntrypoints(e){return J(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return J(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,r){return J(this,void 0,void 0,function*(){const n=yield this.rpc.getManagerKey(e,{block:String(r)});return n&&typeof n=="object"?!!n.key:!!n})}getBlock(e){return J(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}}const W7=(t,e)=>t.hash===e.opHash,X7=(t,e)=>{switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}},J7=(t,e)=>"kind"in t&&t.kind===e.kind,Y7=(t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some(r=>r===e.destination);break;case"transaction":return t.destination===e.destination;default:return!1}},Q7=(t,e,r)=>t.kind==="event"?e&&r?t.source===e&&t.tag===r:e&&!r?t.source===e:r?t.tag===r:!0:!1,Z7=(t,e)=>"opHash"in e?W7(t,e):"source"in e?X7(t,e):"kind"in e?J7(t,e):"destination"in e?Y7(t,e):!1,eI=(t,e)=>{if(Array.isArray(e.and))return e.and.every(r=>wh(t,r));if(Array.isArray(e.or))return e.or.some(r=>wh(t,r));throw new s7("Filter expression must contain either and/or property")},wh=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every(n=>"and"in n||"or"in n?eI(t,n):Z7(t,n))};class gg extends Error{constructor(e){super(e),this.message=e,this.name="UnsupportedEventError"}}class Zc{constructor(e,r=!1,n=Km()){this.shouldRetry=r,this.operatorFunction=n,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new zo,e.pipe(Px(this.completed$),Hf(i=>{this.call(this.messageListeners,i)},i=>{this.call(this.errorListeners,i)},()=>{this.call(this.closeListeners)}),this.shouldRetry?n:Hf(),g0(()=>ex)).subscribe()}call(e,r){for(const n of e)try{n(r)}catch(i){console.error(i)}}remove(e,r){const n=e.indexOf(r);n!==-1&&e.splice(n,1)}on(e,r){switch(e){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new gg(`Trying to register on an unsupported event: ${e}`)}}off(e,r){switch(e){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new gg(`Trying to unregister on an unsupported event: ${e}`)}}close(){this.completed$.next()}}const tI={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:Km()},rI=t=>lo(t.rpc.getBlock()).pipe(Bi()),nI=t=>Mc(e=>new It(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents)wh(Object.assign({hash:i.hash},s),t)&&r.next(Object.assign({hash:i.hash},s));r.complete()})),iI=t=>Mc(e=>new It(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents){const a=s.metadata.internal_operation_results;if(a)for(const c of a)Q7(c,t?.address,t?.tag)&&r.next(Object.assign({opHash:i.hash,blockHash:e.hash,level:e.header.level},c))}r.complete()}));class Ah{constructor(e,r={}){this.context=e,this._config$=new Fu(Object.assign(Object.assign({},tI),r)),this.timer$=this._config$.pipe(C1("pollingIntervalMilliseconds"),ei(n=>n?L1(0,n):lo(this.getConfirmationPollingInterval()).pipe(ei(i=>L1(0,i))))),this.newBlock$=this.timer$.pipe(ei(()=>rI(this.context)),hx("hash"),Ax(),ic())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return J(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const n=yield this.context.readProvider.getProtocolConstants("head"),s=(n.minimal_block_delay?n.minimal_block_delay.multipliedBy(1e3):n.time_between_blocks?n.time_between_blocks[0].multipliedBy(1e3):new be(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new Zc(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new Zc(this.newBlock$.pipe(C1("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new Zc(this.newBlock$.pipe(nI(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new Zc(this.newBlock$.pipe(iI(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class K2{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge({branch:e,contents:r}){return J(this,void 0,void 0,function*(){return new _2(yield this.getNextProto()).forge({branch:e,contents:r})})}}var Fs;class sI{constructor(e){this.context=e,Fs.set(this,void 0),j9(this,Fs,{})}get rpc(){return this.context.rpc}get signer(){return this.context.signer}get estimate(){return this.context.estimate}get parser(){return this.context.parser}getPkh(){return J(this,void 0,void 0,function*(){return yield this.context.signer.publicKeyHash()})}getBlockHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash("head~2")})}getProtocolHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){var r;return J(this,void 0,void 0,function*(){return(r=this.context.readProvider.getCounter(e,"head"))!==null&&r!==void 0?r:"0"})}getFee(e,r,n){return(!Xc(this,Fs)[r]||Xc(this,Fs)[r]<n)&&(Xc(this,Fs)[r]=n),{counter:`${++Xc(this,Fs)[r]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,r,n){return{source:typeof e.source>"u"?n||r:e.source}}buildEstimates(e){return{fee:e.suggestedFeeMutez,gasLimit:e.gasLimit,storageLimit:e.storageLimit}}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(zf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimate.reveal();if(s){const o=this.buildEstimates(s);return n.unshift(yield Rs(Object.assign({},o),r,i)),n}}return e})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,r,n,i,s){return e.map(o=>{switch(o.kind){case oe.ACTIVATION:case oe.DRAIN_DELEGATE:return Object.assign({},o);case oe.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{balance:typeof o.balance<"u"?`${o.balance}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.TRANSACTION:{const a=Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:typeof o.amount<"u"?`${o.amount}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));if(a.source.toLowerCase().startsWith("kt1"))throw new s0(`KT1 addresses are not supported as source since ${Ut.PsBabyM1}`);return a}case oe.REVEAL:case oe.DELEGATION:case oe.REGISTER_GLOBAL_CONSTANT:case oe.TX_ROLLUP_ORIGINATION:case oe.TX_ROLLUP_SUBMIT_BATCH:case oe.UPDATE_CONSENSUS_KEY:case oe.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},o),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{ticket_amount:`${o.ticket_amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:`${o.amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.BALLOT:if(s===void 0)throw new Ws("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s?.voting_period.index});case oe.PROPOSALS:if(s===void 0)throw new Ws("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s?.voting_period.index});default:throw new Wi(o.kind)}})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate.reveal(e);if(n){const i=this.buildEstimates(n),s=yield Rs(Object.assign({},i),r,yield this.signer.publicKey()),o=this.convertIntoArray(s),a=yield this.getBlockHash(),c=yield this.getProtocolHash(),l=parseInt(yield this.getHeadCounter(r),10),f=this.constructOpContents(o,l,r);return{opOb:{branch:a,contents:f,protocol:c},counter:l}}else throw new S2(`The publicKeyHash '${r}' has already been revealed.`)})}originate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.originate(e),s=this.buildEstimates(i),o=yield Qo(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),s))),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}transaction(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transfer(e),s=this.buildEstimates(i),o=yield Zo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}delegation(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.setDelegate(e),s=this.buildEstimates(i),o=yield ea(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}registerGlobalConstant(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.registerGlobalConstant(e),s=this.buildEstimates(i),o=yield cc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}txRollupOrigination(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupOriginate(e),s=this.buildEstimates(i),o=yield fc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}txRollupSubmitBatch(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupSubmitBatch(e),s=this.buildEstimates(i),o=yield uc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}updateConsensusKey(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.updateConsensusKey(e),s=this.buildEstimates(i),o=yield j0(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}increasePaidStorage(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.increasePaidStorage(e),s=this.buildEstimates(i),o=yield ta(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}ballot(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield T2(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new Ws("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}proposals(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield O2(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new Ws("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}drainDelegate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield I2(Object.assign({},e)),s=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash(),c=parseInt(yield this.getHeadCounter(n),10),l=this.constructOpContents(s,c,n,r);return{opOb:{branch:o,contents:l,protocol:a},counter:c}})}transferTicket(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transferTicket(e),s=this.buildEstimates(i),o=yield lc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}smartRollupAddMessages(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.smartRollupAddMessages(e),s=this.buildEstimates(i),o=yield dc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}batch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=new V0(this.context,this.estimate);Array.isArray(e)&&n.with(e);const i=yield n.toPrepare(),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10),c=this.constructOpContents(i,a,r);return{opOb:{branch:s,contents:c,protocol:o},counter:a}})}contractCall(e){var r,n,i;return J(this,void 0,void 0,function*(){const s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=yield this.signer.publicKeyHash(),c=parseInt(yield this.getHeadCounter(a),10),l=e.toTransferParams(),f=yield this.estimate.transfer(l),d=[{kind:oe.TRANSACTION,fee:(r=l.fee)!==null&&r!==void 0?r:f.suggestedFeeMutez,gas_limit:(n=l.gasLimit)!==null&&n!==void 0?n:f.gasLimit,storage_limit:(i=l.storageLimit)!==null&&i!==void 0?i:f.storageLimit,amount:String(l.amount),destination:l.to}],I=this.constructOpContents(d,c,a);return{opOb:{branch:s,contents:I,protocol:o},counter:c}})}}Fs=new WeakMap;const oI={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class Wf{constructor(e,r=new Eh,n,i=new Fu(Object.assign({},oI)),s,o,a,c,l,f,d,I){this._rpc=e,this._signer=r,this._proto=n,this._config=i,this.providerDecorator=[],this.tz=new m7(this),this.estimate=new w7(this),this.contract=new $7(this,this.estimate),this.prepare=new sI(this),this.batch=new a7(this,this.estimate),this.wallet=new zu(this),this.withExtensions=()=>{let P=this.clone();return this.providerDecorator.forEach(L=>{P=L(P)}),P},typeof this._rpc=="string"?this._rpcClient=new yf(this._rpc):this._rpcClient=this._rpc,this._forger=s||new K2(this),this._injector=o||new V9(this),this.operationFactory=new v7(this),this._walletProvider=c||new L2(this),this._parser=l||new B2(this),this._packer=a||new k2(this),this._globalConstantsProvider=f||new D2,this._readProvider=d||new U2(this._rpcClient),this._stream=I||new Ah(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(e=[]){return J(this,void 0,void 0,function*(){if(this._proto)return e.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return e.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof Eh)}clone(){return new Wf(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const aI={commitHash:"c050a62135022aa2e61ba6ef72a98f9c89f1682c",version:"16.0.1"};class cI{constructor(e){this._rpc=e,this._options={},this.format=a0,typeof this._rpc=="string"?this._rpcClient=new yf(this._rpc):this._rpcClient=this._rpc,this._context=new Wf(e),this._wallet=new zu(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:e,stream:r,signer:n,protocol:i,config:s,forger:o,wallet:a,packer:c,globalConstantsProvider:l,readProvider:f,parserProvider:d}){this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(o),this.setWalletProvider(a),this.setPackerProvider(c),this.setGlobalConstantsProvider(l),this.setReadProvider(f),this.setParserProvider(d),this._context.proto=i,s&&this._context.setPartialConfig(s)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new Eh,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new yf(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const r=this.getFactory(K2)();this._options.forger=r,this._context.forger=r}}setStreamProvider(e){if(typeof e=="string"){const r=new Ah(new Wf(new yf(e)));this._options.stream=r,this._context.stream=r}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const r=this.getFactory(Ah)();this._options.stream=r,this._context.stream=r}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const r=this.getFactory(L2)();this._options.wallet=r,this._context.walletProvider=r}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const r=this.getFactory(k2)();this._context.packer=r,this._options.packer=r}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const r=new D2;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const r=e||new U2(this._context.rpc);this._options.readProvider=r,this._context.readProvider=r}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const r=new B2(this._context);this._context.parser=r,this._options.parserProvider=r}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(r=>r.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...r)=>new e(this._context,...r)}getVersionInfo(){return aI}}function q0(t){return Object.keys(t)}var Yn;(function(t){t.PENDING="pending",t.RESOLVED="resolved",t.REJECTED="rejected"})(Yn||(Yn={}));const bg=()=>{throw new Error("ExposedPromise not initialized yet.")};class Zt{constructor(){this._resolve=bg,this._reject=bg,this._status=Yn.PENDING,this._promise=new Promise((e,r)=>{this._resolve=n=>{this.isSettled()||(this._promiseResult=n,e(n),this._status=Yn.RESOLVED)},this._reject=n=>{this.isSettled()||(this._promiseError=n,r(n),this._status=Yn.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const r=new Zt;return r.resolve(e),r}static reject(e){const r=new Zt;return r.reject(e),r}isPending(){return this.status===Yn.PENDING}isResolved(){return this.status===Yn.RESOLVED}isRejected(){return this.status===Yn.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var na={},H2={},hc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=oo,r=Fr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(U){const F=new Float64Array(16);if(U)for(let j=0;j<U.length;j++)F[j]=U[j];return F}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(U){let F=1;for(let j=0;j<16;j++){let y=U[j]+F+65535;F=Math.floor(y/65536),U[j]=y-F*65536}U[0]+=F-1+37*(F-1)}function a(U,F,j){const y=~(j-1);for(let _=0;_<16;_++){const O=y&(U[_]^F[_]);U[_]^=O,F[_]^=O}}function c(U,F){const j=n(),y=n();for(let _=0;_<16;_++)y[_]=F[_];o(y),o(y),o(y);for(let _=0;_<2;_++){j[0]=y[0]-65517;for(let x=1;x<15;x++)j[x]=y[x]-65535-(j[x-1]>>16&1),j[x-1]&=65535;j[15]=y[15]-32767-(j[14]>>16&1);const O=j[15]>>16&1;j[14]&=65535,a(y,j,1-O)}for(let _=0;_<16;_++)U[2*_]=y[_]&255,U[2*_+1]=y[_]>>8}function l(U,F){for(let j=0;j<16;j++)U[j]=F[2*j]+(F[2*j+1]<<8);U[15]&=32767}function f(U,F,j){for(let y=0;y<16;y++)U[y]=F[y]+j[y]}function d(U,F,j){for(let y=0;y<16;y++)U[y]=F[y]-j[y]}function I(U,F,j){let y,_,O=0,x=0,E=0,u=0,p=0,g=0,b=0,h=0,S=0,T=0,w=0,v=0,N=0,ee=0,Y=0,ne=0,se=0,ae=0,W=0,K=0,k=0,m=0,B=0,X=0,Z=0,ce=0,ie=0,de=0,ye=0,ue=0,Ee=0,xe=j[0],me=j[1],ge=j[2],Oe=j[3],ve=j[4],he=j[5],Ne=j[6],M=j[7],A=j[8],R=j[9],D=j[10],$=j[11],Q=j[12],te=j[13],le=j[14],Ae=j[15];y=F[0],O+=y*xe,x+=y*me,E+=y*ge,u+=y*Oe,p+=y*ve,g+=y*he,b+=y*Ne,h+=y*M,S+=y*A,T+=y*R,w+=y*D,v+=y*$,N+=y*Q,ee+=y*te,Y+=y*le,ne+=y*Ae,y=F[1],x+=y*xe,E+=y*me,u+=y*ge,p+=y*Oe,g+=y*ve,b+=y*he,h+=y*Ne,S+=y*M,T+=y*A,w+=y*R,v+=y*D,N+=y*$,ee+=y*Q,Y+=y*te,ne+=y*le,se+=y*Ae,y=F[2],E+=y*xe,u+=y*me,p+=y*ge,g+=y*Oe,b+=y*ve,h+=y*he,S+=y*Ne,T+=y*M,w+=y*A,v+=y*R,N+=y*D,ee+=y*$,Y+=y*Q,ne+=y*te,se+=y*le,ae+=y*Ae,y=F[3],u+=y*xe,p+=y*me,g+=y*ge,b+=y*Oe,h+=y*ve,S+=y*he,T+=y*Ne,w+=y*M,v+=y*A,N+=y*R,ee+=y*D,Y+=y*$,ne+=y*Q,se+=y*te,ae+=y*le,W+=y*Ae,y=F[4],p+=y*xe,g+=y*me,b+=y*ge,h+=y*Oe,S+=y*ve,T+=y*he,w+=y*Ne,v+=y*M,N+=y*A,ee+=y*R,Y+=y*D,ne+=y*$,se+=y*Q,ae+=y*te,W+=y*le,K+=y*Ae,y=F[5],g+=y*xe,b+=y*me,h+=y*ge,S+=y*Oe,T+=y*ve,w+=y*he,v+=y*Ne,N+=y*M,ee+=y*A,Y+=y*R,ne+=y*D,se+=y*$,ae+=y*Q,W+=y*te,K+=y*le,k+=y*Ae,y=F[6],b+=y*xe,h+=y*me,S+=y*ge,T+=y*Oe,w+=y*ve,v+=y*he,N+=y*Ne,ee+=y*M,Y+=y*A,ne+=y*R,se+=y*D,ae+=y*$,W+=y*Q,K+=y*te,k+=y*le,m+=y*Ae,y=F[7],h+=y*xe,S+=y*me,T+=y*ge,w+=y*Oe,v+=y*ve,N+=y*he,ee+=y*Ne,Y+=y*M,ne+=y*A,se+=y*R,ae+=y*D,W+=y*$,K+=y*Q,k+=y*te,m+=y*le,B+=y*Ae,y=F[8],S+=y*xe,T+=y*me,w+=y*ge,v+=y*Oe,N+=y*ve,ee+=y*he,Y+=y*Ne,ne+=y*M,se+=y*A,ae+=y*R,W+=y*D,K+=y*$,k+=y*Q,m+=y*te,B+=y*le,X+=y*Ae,y=F[9],T+=y*xe,w+=y*me,v+=y*ge,N+=y*Oe,ee+=y*ve,Y+=y*he,ne+=y*Ne,se+=y*M,ae+=y*A,W+=y*R,K+=y*D,k+=y*$,m+=y*Q,B+=y*te,X+=y*le,Z+=y*Ae,y=F[10],w+=y*xe,v+=y*me,N+=y*ge,ee+=y*Oe,Y+=y*ve,ne+=y*he,se+=y*Ne,ae+=y*M,W+=y*A,K+=y*R,k+=y*D,m+=y*$,B+=y*Q,X+=y*te,Z+=y*le,ce+=y*Ae,y=F[11],v+=y*xe,N+=y*me,ee+=y*ge,Y+=y*Oe,ne+=y*ve,se+=y*he,ae+=y*Ne,W+=y*M,K+=y*A,k+=y*R,m+=y*D,B+=y*$,X+=y*Q,Z+=y*te,ce+=y*le,ie+=y*Ae,y=F[12],N+=y*xe,ee+=y*me,Y+=y*ge,ne+=y*Oe,se+=y*ve,ae+=y*he,W+=y*Ne,K+=y*M,k+=y*A,m+=y*R,B+=y*D,X+=y*$,Z+=y*Q,ce+=y*te,ie+=y*le,de+=y*Ae,y=F[13],ee+=y*xe,Y+=y*me,ne+=y*ge,se+=y*Oe,ae+=y*ve,W+=y*he,K+=y*Ne,k+=y*M,m+=y*A,B+=y*R,X+=y*D,Z+=y*$,ce+=y*Q,ie+=y*te,de+=y*le,ye+=y*Ae,y=F[14],Y+=y*xe,ne+=y*me,se+=y*ge,ae+=y*Oe,W+=y*ve,K+=y*he,k+=y*Ne,m+=y*M,B+=y*A,X+=y*R,Z+=y*D,ce+=y*$,ie+=y*Q,de+=y*te,ye+=y*le,ue+=y*Ae,y=F[15],ne+=y*xe,se+=y*me,ae+=y*ge,W+=y*Oe,K+=y*ve,k+=y*he,m+=y*Ne,B+=y*M,X+=y*A,Z+=y*R,ce+=y*D,ie+=y*$,de+=y*Q,ye+=y*te,ue+=y*le,Ee+=y*Ae,O+=38*se,x+=38*ae,E+=38*W,u+=38*K,p+=38*k,g+=38*m,b+=38*B,h+=38*X,S+=38*Z,T+=38*ce,w+=38*ie,v+=38*de,N+=38*ye,ee+=38*ue,Y+=38*Ee,_=1,y=O+_+65535,_=Math.floor(y/65536),O=y-_*65536,y=x+_+65535,_=Math.floor(y/65536),x=y-_*65536,y=E+_+65535,_=Math.floor(y/65536),E=y-_*65536,y=u+_+65535,_=Math.floor(y/65536),u=y-_*65536,y=p+_+65535,_=Math.floor(y/65536),p=y-_*65536,y=g+_+65535,_=Math.floor(y/65536),g=y-_*65536,y=b+_+65535,_=Math.floor(y/65536),b=y-_*65536,y=h+_+65535,_=Math.floor(y/65536),h=y-_*65536,y=S+_+65535,_=Math.floor(y/65536),S=y-_*65536,y=T+_+65535,_=Math.floor(y/65536),T=y-_*65536,y=w+_+65535,_=Math.floor(y/65536),w=y-_*65536,y=v+_+65535,_=Math.floor(y/65536),v=y-_*65536,y=N+_+65535,_=Math.floor(y/65536),N=y-_*65536,y=ee+_+65535,_=Math.floor(y/65536),ee=y-_*65536,y=Y+_+65535,_=Math.floor(y/65536),Y=y-_*65536,y=ne+_+65535,_=Math.floor(y/65536),ne=y-_*65536,O+=_-1+37*(_-1),_=1,y=O+_+65535,_=Math.floor(y/65536),O=y-_*65536,y=x+_+65535,_=Math.floor(y/65536),x=y-_*65536,y=E+_+65535,_=Math.floor(y/65536),E=y-_*65536,y=u+_+65535,_=Math.floor(y/65536),u=y-_*65536,y=p+_+65535,_=Math.floor(y/65536),p=y-_*65536,y=g+_+65535,_=Math.floor(y/65536),g=y-_*65536,y=b+_+65535,_=Math.floor(y/65536),b=y-_*65536,y=h+_+65535,_=Math.floor(y/65536),h=y-_*65536,y=S+_+65535,_=Math.floor(y/65536),S=y-_*65536,y=T+_+65535,_=Math.floor(y/65536),T=y-_*65536,y=w+_+65535,_=Math.floor(y/65536),w=y-_*65536,y=v+_+65535,_=Math.floor(y/65536),v=y-_*65536,y=N+_+65535,_=Math.floor(y/65536),N=y-_*65536,y=ee+_+65535,_=Math.floor(y/65536),ee=y-_*65536,y=Y+_+65535,_=Math.floor(y/65536),Y=y-_*65536,y=ne+_+65535,_=Math.floor(y/65536),ne=y-_*65536,O+=_-1+37*(_-1),U[0]=O,U[1]=x,U[2]=E,U[3]=u,U[4]=p,U[5]=g,U[6]=b,U[7]=h,U[8]=S,U[9]=T,U[10]=w,U[11]=v,U[12]=N,U[13]=ee,U[14]=Y,U[15]=ne}function P(U,F){I(U,F,F)}function L(U,F){const j=n();for(let y=0;y<16;y++)j[y]=F[y];for(let y=253;y>=0;y--)P(j,j),y!==2&&y!==4&&I(j,j,F);for(let y=0;y<16;y++)U[y]=j[y]}function H(U,F){const j=new Uint8Array(32),y=new Float64Array(80),_=n(),O=n(),x=n(),E=n(),u=n(),p=n();for(let S=0;S<31;S++)j[S]=U[S];j[31]=U[31]&127|64,j[0]&=248,l(y,F);for(let S=0;S<16;S++)O[S]=y[S];_[0]=E[0]=1;for(let S=254;S>=0;--S){const T=j[S>>>3]>>>(S&7)&1;a(_,O,T),a(x,E,T),f(u,_,x),d(_,_,x),f(x,O,E),d(O,O,E),P(E,u),P(p,_),I(_,x,_),I(x,O,u),f(u,_,x),d(_,_,x),P(O,_),d(x,E,p),I(_,x,s),f(_,_,E),I(x,x,_),I(_,E,p),I(E,O,y),P(O,u),a(_,O,T),a(x,E,T)}for(let S=0;S<16;S++)y[S+16]=_[S],y[S+32]=x[S],y[S+48]=O[S],y[S+64]=E[S];const g=y.subarray(32),b=y.subarray(16);L(g,g),I(b,b,g);const h=new Uint8Array(32);return c(h,b),h}t.scalarMult=H;function q(U){return H(U,i)}t.scalarMultBase=q;function G(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const F=new Uint8Array(U);return{publicKey:q(F),secretKey:F}}t.generateKeyPairFromSeed=G;function C(U){const F=(0,e.randomBytes)(32,U),j=G(F);return(0,r.wipe)(F),j}t.generateKeyPair=C;function V(U,F,j=!1){if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(F.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const y=H(U,F);if(j){let _=0;for(let O=0;O<y.length;O++)_|=y[O];if(_===0)throw new Error("X25519: invalid shared key")}return y}t.sharedKey=V})(hc);var ma={},Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});var br=De,xh=Fr,fI=20;function uI(t,e,r){for(var n=1634760805,i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],o=r[11]<<24|r[10]<<16|r[9]<<8|r[8],a=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,L=r[19]<<24|r[18]<<16|r[17]<<8|r[16],H=r[23]<<24|r[22]<<16|r[21]<<8|r[20],q=r[27]<<24|r[26]<<16|r[25]<<8|r[24],G=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=1797285236,V=n,U=i,F=s,j=o,y=a,_=c,O=l,x=f,E=d,u=I,p=P,g=L,b=H,h=q,S=G,T=C,w,v=0;v<fI;v+=2)w=V+b|0,y^=w<<7|w>>>32-7,w=y+V|0,E^=w<<9|w>>>32-9,w=E+y|0,b^=w<<13|w>>>32-13,w=b+E|0,V^=w<<18|w>>>32-18,w=_+U|0,u^=w<<7|w>>>32-7,w=u+_|0,h^=w<<9|w>>>32-9,w=h+u|0,U^=w<<13|w>>>32-13,w=U+h|0,_^=w<<18|w>>>32-18,w=p+O|0,S^=w<<7|w>>>32-7,w=S+p|0,F^=w<<9|w>>>32-9,w=F+S|0,O^=w<<13|w>>>32-13,w=O+F|0,p^=w<<18|w>>>32-18,w=T+g|0,j^=w<<7|w>>>32-7,w=j+T|0,x^=w<<9|w>>>32-9,w=x+j|0,g^=w<<13|w>>>32-13,w=g+x|0,T^=w<<18|w>>>32-18,w=V+j|0,U^=w<<7|w>>>32-7,w=U+V|0,F^=w<<9|w>>>32-9,w=F+U|0,j^=w<<13|w>>>32-13,w=j+F|0,V^=w<<18|w>>>32-18,w=_+y|0,O^=w<<7|w>>>32-7,w=O+_|0,x^=w<<9|w>>>32-9,w=x+O|0,y^=w<<13|w>>>32-13,w=y+x|0,_^=w<<18|w>>>32-18,w=p+u|0,g^=w<<7|w>>>32-7,w=g+p|0,E^=w<<9|w>>>32-9,w=E+g|0,u^=w<<13|w>>>32-13,w=u+E|0,p^=w<<18|w>>>32-18,w=T+S|0,b^=w<<7|w>>>32-7,w=b+T|0,h^=w<<9|w>>>32-9,w=h+b|0,S^=w<<13|w>>>32-13,w=S+h|0,T^=w<<18|w>>>32-18;br.writeUint32LE(V+n|0,t,0),br.writeUint32LE(U+i|0,t,4),br.writeUint32LE(F+s|0,t,8),br.writeUint32LE(j+o|0,t,12),br.writeUint32LE(y+a|0,t,16),br.writeUint32LE(_+c|0,t,20),br.writeUint32LE(O+l|0,t,24),br.writeUint32LE(x+f|0,t,28),br.writeUint32LE(E+d|0,t,32),br.writeUint32LE(u+I|0,t,36),br.writeUint32LE(p+P|0,t,40),br.writeUint32LE(g+L|0,t,44),br.writeUint32LE(b+H|0,t,48),br.writeUint32LE(h+q|0,t,52),br.writeUint32LE(S+G|0,t,56),br.writeUint32LE(T+C|0,t,60)}function F2(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(n.length<r.length)throw new Error("Salsa20: destination is shorter than source");var s,o;if(i===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");s=new Uint8Array(16),s.set(e),o=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");s=e,o=16-i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){uI(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];dI(s,o,s.length-o)}return xh.wipe(a),i===0&&xh.wipe(s),n}Wu.streamXOR=F2;function lI(t,e,r,n){return n===void 0&&(n=0),xh.wipe(r),F2(t,e,r,r,n)}Wu.stream=lI;function dI(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(ma,"__esModule",{value:!0});var ns=De,hI=Wu,j2=Fr;function G2(t,e,r,n,i){if(i===void 0&&(i=0),i===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var s=V2(t,e.subarray(0,16),new Uint8Array(32)),o=hI.streamXOR(s,e.subarray(16),r,n,i);return j2.wipe(s),o}ma.streamXOR=G2;function pI(t,e,r,n){return n===void 0&&(n=0),j2.wipe(r),G2(t,e,r,r,n)}ma.stream=pI;var gI=20;function V2(t,e,r){for(var n=1634760805,i=t[3]<<24|t[2]<<16|t[1]<<8|t[0],s=t[7]<<24|t[6]<<16|t[5]<<8|t[4],o=t[11]<<24|t[10]<<16|t[9]<<8|t[8],a=t[15]<<24|t[14]<<16|t[13]<<8|t[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,L=t[19]<<24|t[18]<<16|t[17]<<8|t[16],H=t[23]<<24|t[22]<<16|t[21]<<8|t[20],q=t[27]<<24|t[26]<<16|t[25]<<8|t[24],G=t[31]<<24|t[30]<<16|t[29]<<8|t[28],C=1797285236,V,U=0;U<gI;U+=2)V=n+H|0,a^=V<<7|V>>>32-7,V=a+n|0,d^=V<<9|V>>>32-9,V=d+a|0,H^=V<<13|V>>>32-13,V=H+d|0,n^=V<<18|V>>>32-18,V=c+i|0,I^=V<<7|V>>>32-7,V=I+c|0,q^=V<<9|V>>>32-9,V=q+I|0,i^=V<<13|V>>>32-13,V=i+q|0,c^=V<<18|V>>>32-18,V=P+l|0,G^=V<<7|V>>>32-7,V=G+P|0,s^=V<<9|V>>>32-9,V=s+G|0,l^=V<<13|V>>>32-13,V=l+s|0,P^=V<<18|V>>>32-18,V=C+L|0,o^=V<<7|V>>>32-7,V=o+C|0,f^=V<<9|V>>>32-9,V=f+o|0,L^=V<<13|V>>>32-13,V=L+f|0,C^=V<<18|V>>>32-18,V=n+o|0,i^=V<<7|V>>>32-7,V=i+n|0,s^=V<<9|V>>>32-9,V=s+i|0,o^=V<<13|V>>>32-13,V=o+s|0,n^=V<<18|V>>>32-18,V=c+a|0,l^=V<<7|V>>>32-7,V=l+c|0,f^=V<<9|V>>>32-9,V=f+l|0,a^=V<<13|V>>>32-13,V=a+f|0,c^=V<<18|V>>>32-18,V=P+I|0,L^=V<<7|V>>>32-7,V=L+P|0,d^=V<<9|V>>>32-9,V=d+L|0,I^=V<<13|V>>>32-13,V=I+d|0,P^=V<<18|V>>>32-18,V=C+G|0,H^=V<<7|V>>>32-7,V=H+C|0,q^=V<<9|V>>>32-9,V=q+H|0,G^=V<<13|V>>>32-13,V=G+q|0,C^=V<<18|V>>>32-18;return ns.writeUint32LE(n,r,0),ns.writeUint32LE(c,r,4),ns.writeUint32LE(P,r,8),ns.writeUint32LE(C,r,12),ns.writeUint32LE(l,r,16),ns.writeUint32LE(f,r,20),ns.writeUint32LE(d,r,24),ns.writeUint32LE(I,r,28),r}ma.hsalsa=V2;var ji={},q2={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});function bI(t,e,r){return~(t-1)&e|t-1&r}ya.select=bI;function vI(t,e){return(t|0)-(e|0)-1>>>31&1}ya.lessOrEqual=vI;function $2(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ya.compare=$2;function mI(t,e){return t.length===0||e.length===0?!1:$2(t,e)!==0}ya.equal=mI;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ya,r=Fr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(l>>>10|f<<6)&7939;var d=a[6]|a[7]<<8;this._r[3]=(f>>>7|d<<9)&8191;var I=a[8]|a[9]<<8;this._r[4]=(d>>>4|I<<12)&255,this._r[5]=I>>>1&8190;var P=a[10]|a[11]<<8;this._r[6]=(I>>>14|P<<2)&8191;var L=a[12]|a[13]<<8;this._r[7]=(P>>>11|L<<5)&8065;var H=a[14]|a[15]<<8;this._r[8]=(L>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var f=this._fin?0:2048,d=this._h[0],I=this._h[1],P=this._h[2],L=this._h[3],H=this._h[4],q=this._h[5],G=this._h[6],C=this._h[7],V=this._h[8],U=this._h[9],F=this._r[0],j=this._r[1],y=this._r[2],_=this._r[3],O=this._r[4],x=this._r[5],E=this._r[6],u=this._r[7],p=this._r[8],g=this._r[9];l>=16;){var b=a[c+0]|a[c+1]<<8;d+=b&8191;var h=a[c+2]|a[c+3]<<8;I+=(b>>>13|h<<3)&8191;var S=a[c+4]|a[c+5]<<8;P+=(h>>>10|S<<6)&8191;var T=a[c+6]|a[c+7]<<8;L+=(S>>>7|T<<9)&8191;var w=a[c+8]|a[c+9]<<8;H+=(T>>>4|w<<12)&8191,q+=w>>>1&8191;var v=a[c+10]|a[c+11]<<8;G+=(w>>>14|v<<2)&8191;var N=a[c+12]|a[c+13]<<8;C+=(v>>>11|N<<5)&8191;var ee=a[c+14]|a[c+15]<<8;V+=(N>>>8|ee<<8)&8191,U+=ee>>>5|f;var Y=0,ne=Y;ne+=d*F,ne+=I*(5*g),ne+=P*(5*p),ne+=L*(5*u),ne+=H*(5*E),Y=ne>>>13,ne&=8191,ne+=q*(5*x),ne+=G*(5*O),ne+=C*(5*_),ne+=V*(5*y),ne+=U*(5*j),Y+=ne>>>13,ne&=8191;var se=Y;se+=d*j,se+=I*F,se+=P*(5*g),se+=L*(5*p),se+=H*(5*u),Y=se>>>13,se&=8191,se+=q*(5*E),se+=G*(5*x),se+=C*(5*O),se+=V*(5*_),se+=U*(5*y),Y+=se>>>13,se&=8191;var ae=Y;ae+=d*y,ae+=I*j,ae+=P*F,ae+=L*(5*g),ae+=H*(5*p),Y=ae>>>13,ae&=8191,ae+=q*(5*u),ae+=G*(5*E),ae+=C*(5*x),ae+=V*(5*O),ae+=U*(5*_),Y+=ae>>>13,ae&=8191;var W=Y;W+=d*_,W+=I*y,W+=P*j,W+=L*F,W+=H*(5*g),Y=W>>>13,W&=8191,W+=q*(5*p),W+=G*(5*u),W+=C*(5*E),W+=V*(5*x),W+=U*(5*O),Y+=W>>>13,W&=8191;var K=Y;K+=d*O,K+=I*_,K+=P*y,K+=L*j,K+=H*F,Y=K>>>13,K&=8191,K+=q*(5*g),K+=G*(5*p),K+=C*(5*u),K+=V*(5*E),K+=U*(5*x),Y+=K>>>13,K&=8191;var k=Y;k+=d*x,k+=I*O,k+=P*_,k+=L*y,k+=H*j,Y=k>>>13,k&=8191,k+=q*F,k+=G*(5*g),k+=C*(5*p),k+=V*(5*u),k+=U*(5*E),Y+=k>>>13,k&=8191;var m=Y;m+=d*E,m+=I*x,m+=P*O,m+=L*_,m+=H*y,Y=m>>>13,m&=8191,m+=q*j,m+=G*F,m+=C*(5*g),m+=V*(5*p),m+=U*(5*u),Y+=m>>>13,m&=8191;var B=Y;B+=d*u,B+=I*E,B+=P*x,B+=L*O,B+=H*_,Y=B>>>13,B&=8191,B+=q*y,B+=G*j,B+=C*F,B+=V*(5*g),B+=U*(5*p),Y+=B>>>13,B&=8191;var X=Y;X+=d*p,X+=I*u,X+=P*E,X+=L*x,X+=H*O,Y=X>>>13,X&=8191,X+=q*_,X+=G*y,X+=C*j,X+=V*F,X+=U*(5*g),Y+=X>>>13,X&=8191;var Z=Y;Z+=d*g,Z+=I*p,Z+=P*u,Z+=L*E,Z+=H*x,Y=Z>>>13,Z&=8191,Z+=q*O,Z+=G*_,Z+=C*y,Z+=V*j,Z+=U*F,Y+=Z>>>13,Z&=8191,Y=(Y<<2)+Y|0,Y=Y+ne|0,ne=Y&8191,Y=Y>>>13,se+=Y,d=ne,I=se,P=ae,L=W,H=K,q=k,G=m,C=B,V=X,U=Z,c+=16,l-=16}this._h[0]=d,this._h[1]=I,this._h[2]=P,this._h[3]=L,this._h[4]=H,this._h[5]=q,this._h[6]=G,this._h[7]=C,this._h[8]=V,this._h[9]=U},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),f,d,I,P;if(this._leftover){for(P=this._leftover,this._buffer[P++]=1;P<16;P++)this._buffer[P]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,P=2;P<10;P++)this._h[P]+=f,f=this._h[P]>>>13,this._h[P]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,P=1;P<10;P++)l[P]=this._h[P]+f,f=l[P]>>>13,l[P]&=8191;for(l[9]-=1<<13,d=(f^1)-1,P=0;P<10;P++)l[P]&=d;for(d=~d,P=0;P<10;P++)this._h[P]=this._h[P]&d|l[P];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,I=this._h[0]+this._pad[0],this._h[0]=I&65535,P=1;P<8;P++)I=(this._h[P]+this._pad[P]|0)+(I>>>16)|0,this._h[P]=I&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,f;if(this._leftover){f=16-this._leftover,f>l&&(f=l);for(var d=0;d<f;d++)this._buffer[this._leftover+d]=a[c+d];if(l-=f,c+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(f=l-l%16,this._blocks(a,c,f),c+=f,l-=f),l){for(var d=0;d<l;d++)this._buffer[this._leftover+d]=a[c+d];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s})(q2);Object.defineProperty(ji,"__esModule",{value:!0});ji.generateKey=ji.openSecretBox=ji.secretBox=void 0;const Xf=ma,Sh=q2,Ho=Fr,yI=oo;function EI(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,Xf.stream)(t,i,n,8);const s=new Uint8Array(16+r.length);for(let a=0;a<32&&a<r.length;a++)s[16+a]=r[a]^n[32+a];r.length>32&&(0,Xf.streamXOR)(t,i,r.subarray(32),s.subarray(16+32),8);const o=(0,Sh.oneTimeAuth)(n.subarray(0,32),s.subarray(16));for(let a=0;a<o.length;a++)s[a]=o[a];return(0,Ho.wipe)(o),(0,Ho.wipe)(n),(0,Ho.wipe)(i),s}ji.secretBox=EI;function _I(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(r.length<16)throw new Error("secretBox data must be at least 16 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,Xf.stream)(t,i,n,8);const s=(0,Sh.oneTimeAuth)(n.subarray(0,32),r.subarray(16));if(!(0,Sh.equal)(s,r.subarray(0,16)))return null;const o=r.subarray(16),a=new Uint8Array(o.length);for(let c=0;c<32&&c<o.length;c++)a[c]=o[c]^n[32+c];return o.length>32&&(0,Xf.streamXOR)(t,i,o.subarray(32),a.subarray(32),8),(0,Ho.wipe)(s),(0,Ho.wipe)(n),(0,Ho.wipe)(i),a}ji.openSecretBox=_I;function wI(t){return(0,yI.randomBytes)(32,t)}ji.generateKey=wI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.openBox=t.box=t.precomputeSharedKey=t.generateKeyPair=void 0;const e=hc,r=ma,n=ji,i=Fr;var s=hc;Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return s.generateKeyPair}});const o=new Uint8Array(16);function a(f,d){const I=(0,e.scalarMult)(d,f);return(0,r.hsalsa)(I,o,I),I}t.precomputeSharedKey=a;function c(f,d,I,P){const L=a(f,d),H=(0,n.secretBox)(L,I,P);return(0,i.wipe)(L),H}t.box=c;function l(f,d,I,P){const L=a(f,d),H=(0,n.openSecretBox)(L,I,P);return(0,i.wipe)(L),H}t.openBox=l})(H2);(function(t){var e=Ua&&Ua.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=Ua&&Ua.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(H2,t),r(ji,t)})(na);var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});var vg="utf8: invalid string",yi="utf8: invalid source encoding";function AI(t){for(var e=new Uint8Array(z2(t)),r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=192|i>>6,e[r++]=128|i&63):i<55296?(e[r++]=224|i>>12,e[r++]=128|i>>6&63,e[r++]=128|i&63):(n++,i=(i&1023)<<10,i|=t.charCodeAt(n)&1023,i+=65536,e[r++]=240|i>>18,e[r++]=128|i>>12&63,e[r++]=128|i>>6&63,e[r++]=128|i&63)}return e}var Is=Xu.encode=AI;function z2(t){for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<128)e+=1;else if(n<2048)e+=2;else if(n<55296)e+=3;else if(n<=57343){if(r>=t.length-1)throw new Error(vg);r++,e+=4}else throw new Error(vg)}return e}Xu.encodedLength=z2;function xI(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n&128){var i=void 0;if(n<224){if(r>=t.length)throw new Error(yi);var s=t[++r];if((s&192)!==128)throw new Error(yi);n=(n&31)<<6|s&63,i=128}else if(n<240){if(r>=t.length-1)throw new Error(yi);var s=t[++r],o=t[++r];if((s&192)!==128||(o&192)!==128)throw new Error(yi);n=(n&15)<<12|(s&63)<<6|o&63,i=2048}else if(n<248){if(r>=t.length-2)throw new Error(yi);var s=t[++r],o=t[++r],a=t[++r];if((s&192)!==128||(o&192)!==128||(a&192)!==128)throw new Error(yi);n=(n&15)<<18|(s&63)<<12|(o&63)<<6|a&63,i=65536}else throw new Error(yi);if(n<i||n>=55296&&n<=57343)throw new Error(yi);if(n>=65536){if(n>1114111)throw new Error(yi);n-=65536,e.push(String.fromCharCode(55296|n>>10)),n=56320|n&1023}}e.push(String.fromCharCode(n))}return e.join("")}Xu.decode=xI;var W2={};Object.defineProperty(W2,"__esModule",{value:!0});function SI(){for(var t=0,e=0;e<arguments.length;e++)t+=arguments[e].length;for(var r=new Uint8Array(t),n=0,e=0;e<arguments.length;e++){var i=arguments[e];r.set(i,n),n+=i.length}return r}var RI=W2.concat=SI,bi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Rh=24;function Xi(t){return Buffer.from(t).toString("hex")}function Ro(t){return bi(this,void 0,void 0,function*(){return Xi(typeof t=="string"?un.hash(Is(t),32):un.hash(t,32))})}function mg(t){return bi(this,void 0,void 0,function*(){return qr.generateKeyPairFromSeed(un.hash(Is(t),32))})}function X2(t,e){return bi(this,void 0,void 0,function*(){const r=Buffer.from(oo.randomBytes(Rh)),n=Buffer.concat([r,Buffer.from(na.secretBox(e,r,Buffer.from(t,"utf8")))]);return Xi(n)})}function J2(t,e){return bi(this,void 0,void 0,function*(){const r=t.slice(0,Rh),n=t.slice(Rh),i=na.openSecretBox(e,r,n);if(!i)throw new Error("Decryption failed");return Buffer.from(i).toString("utf8")})}function II(t,e){return bi(this,void 0,void 0,function*(){const r=qr.convertPublicKeyToX25519(Buffer.from(e)),n=na.generateKeyPair(),s=new un.BLAKE2b(24).update(n.publicKey,32).update(r,32).digest(),o=typeof t=="string"?Is(t):t,a=na.box(r,n.secretKey,s,o);return Xi(RI(n.publicKey,a))})}function Y2(t,e,r){return bi(this,void 0,void 0,function*(){const n=qr.convertSecretKeyToX25519(Buffer.from(r)),i=qr.convertPublicKeyToX25519(Buffer.from(e)),s=typeof t=="string"?Is(t):t,o=s.slice(0,32),a=s.slice(32),l=new un.BLAKE2b(24).update(o,32).update(i,32).digest(),f=na.openBox(o,n,l,a);if(!f)throw new Error("Decryption failed");return Buffer.from(f).toString()})}function TI(t){return bi(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:Buffer.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,164]))}};let r,n;if(t.length===64)r=e.edpk.prefix,n=t;else{const s=Object.entries(e);for(let o=0;o<s.length;o++){const[a,c]=s[o];if(t.startsWith(a)&&t.length===c.length){r=c.prefix;const l=Yr.decode(t);n=l.slice(a.length,l.length).toString("hex");break}}}if(!r||!n)throw new Error(`invalid publicKey: ${t}`);const i=un.hash(Buffer.from(n,"hex"),20);return Yr.encode(Buffer.concat([r,Buffer.from(i)]))})}function yg(t,e){return`@${t}:${e}`}const OI=t=>bi(void 0,void 0,void 0,function*(){if(t.length%2!==0)return Is(t);let e=t;t.startsWith("0x")&&(e=t.slice(2));const r=Buffer.from(e,"hex");return r.length===e.length/2?r:Is(t)}),PI=(t,e=32)=>bi(void 0,void 0,void 0,function*(){return un.hash(t,e)}),NI=(t,e)=>bi(void 0,void 0,void 0,function*(){const r=yield OI(t),n=new Uint8Array([9,245,205,134,18]),i=yield PI(r),s=qr.sign(e.secretKey,i);return Yr.encode(Buffer.concat([Buffer.from(n),Buffer.from(s)]))});var MI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function Ji(){return MI(this,void 0,void 0,function*(){const t=oo.randomBytes(16);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(function(e){return Buffer.from(e).toString("hex")}).join("-")})}const Jf=24,Yf=16;var Ke;(function(t){t.BlockchainRequest="blockchain_request",t.PermissionRequest="permission_request",t.SignPayloadRequest="sign_payload_request",t.OperationRequest="operation_request",t.BroadcastRequest="broadcast_request",t.BlockchainResponse="blockchain_response",t.PermissionResponse="permission_response",t.SignPayloadResponse="sign_payload_response",t.OperationResponse="operation_response",t.BroadcastResponse="broadcast_response",t.Acknowledge="acknowledge",t.Disconnect="disconnect",t.Error="error"})(Ke||(Ke={}));var Sn;(function(t){t.SIGN="sign",t.OPERATION_REQUEST="operation_request",t.ENCRYPT="encrypt",t.NOTIFICATION="notification",t.THRESHOLD="threshold"})(Sn||(Sn={}));var Rt;(function(t){t.MAINNET="mainnet",t.GHOSTNET="ghostnet",t.MONDAYNET="mondaynet",t.DAILYNET="dailynet",t.DELPHINET="delphinet",t.EDONET="edonet",t.FLORENCENET="florencenet",t.GRANADANET="granadanet",t.HANGZHOUNET="hangzhounet",t.ITHACANET="ithacanet",t.JAKARTANET="jakartanet",t.KATHMANDUNET="kathmandunet",t.LIMANET="limanet",t.MUMBAINET="mumbainet",t.CUSTOM="custom"})(Rt||(Rt={}));var Eg;(function(t){t.ENDORSEMENT="endorsement",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.ACTIVATE_ACCOUNT="activate_account",t.PROPOSALS="proposals",t.BALLOT="ballot",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ORIGINATION="origination",t.DELEGATION="delegation"})(Eg||(Eg={}));var Rn;(function(t){t.WEBSITE="website",t.EXTENSION="extension",t.P2P="p2p"})(Rn||(Rn={}));var Fi;(function(t){t.BACKGROUND="toBackground",t.PAGE="toPage",t.EXTENSION="toExtension"})(Fi||(Fi={}));var pt;(function(t){t.BROADCAST_ERROR="BROADCAST_ERROR",t.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",t.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",t.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",t.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",t.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",t.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",t.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",t.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",t.ABORTED_ERROR="ABORTED_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR"})(pt||(pt={}));var fn;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED"})(fn||(fn={}));var no;(function(t){t.CHROME_MESSAGE="chrome_message",t.POST_MESSAGE="post_message",t.LEDGER="ledger",t.P2P="p2p"})(no||(no={}));var ke;(function(t){t.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",t.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",t.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",t.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",t.ACCOUNTS="beacon:accounts",t.ACTIVE_ACCOUNT="beacon:active-account",t.PUSH_TOKENS="beacon:push-tokens",t.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",t.APP_METADATA_LIST="beacon:app-metadata-list",t.PERMISSION_LIST="beacon:permissions",t.BEACON_SDK_VERSION="beacon:sdk_version",t.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",t.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",t.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",t.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(ke||(ke={}));const Ed={[ke.TRANSPORT_P2P_PEERS_DAPP]:[],[ke.TRANSPORT_P2P_PEERS_WALLET]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[ke.ACCOUNTS]:[],[ke.ACTIVE_ACCOUNT]:void 0,[ke.PUSH_TOKENS]:[],[ke.BEACON_SDK_SECRET_SEED]:void 0,[ke.APP_METADATA_LIST]:[],[ke.PERMISSION_LIST]:[],[ke.BEACON_SDK_VERSION]:void 0,[ke.MATRIX_PRESERVED_STATE]:{},[ke.MATRIX_PEER_ROOM_IDS]:{},[ke.MATRIX_SELECTED_NODE]:void 0,[ke.MULTI_NODE_SETUP_DONE]:void 0};var ss;(function(t){t.RAW="raw",t.OPERATION="operation",t.MICHELINE="micheline"})(ss||(ss={}));var Qf;(function(t){t.LIGHT="light",t.DARK="dark"})(Qf||(Qf={}));var Ih;(function(t){t.EUROPE_EAST="europe-east",t.EUROPE_WEST="europe-west",t.NORTH_AMERICA_EAST="north-america-east",t.NORTH_AMERICA_WEST="north-america-west",t.CENTRAL_AMERICA="central-america",t.SOUTH_AMERICA="south-america",t.ASIA_EAST="asia-east",t.ASIA_WEST="asia-west",t.AFRICA="africa",t.AUSTRALIA="australia"})(Ih||(Ih={}));const LI="3.3.4",Q2="3",ef=[t=>{}];let st={postMessage:(t,e)=>{console.log("GOT MOCK POST MESSAGE",t),ef.forEach(r=>{r({data:t})})},addEventListener:(t,e)=>{ef.push(e)},removeEventListener:(t,e)=>{ef.splice(ef.indexOf(r=>r===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(st=window)}catch(t){console.log(`not defined: ${t}`)}var tf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class CI{constructor(e){if(this._beaconId=new Zt,this._keyPair=new Zt,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,st.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):st.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return tf(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),st.beaconCreatedClientInstance=!1})}initSDK(){return tf(this,void 0,void 0,function*(){return this.storage.set(ke.BEACON_SDK_VERSION,LI).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve(Xi(e.publicKey))})})}removeBeaconEntriesFromStorage(){return tf(this,void 0,void 0,function*(){const e=Object.values(ke);yield Promise.all(e.map(r=>this.storage.delete(r)))})}loadOrCreateBeaconSecret(){return tf(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield mg(e));else{const r=yield Ji();yield this.storage.set(ke.BEACON_SDK_SECRET_SEED,r),this._keyPair.resolve(yield mg(r))}})}}var La=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class $0{constructor(e,r){this.storage=e,this.storageKey=r}getAll(){return La(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return La(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey);return r.find(e)})}addOne(e,r,n=!0){return La(this,void 0,void 0,function*(){const i=yield this.storage.get(this.storageKey);if(!i.some(r))i.push(e);else if(n)for(let s=0;s<i.length;s++)r(i[s])&&(i[s]=e);return this.storage.set(this.storageKey,i)})}remove(e){return La(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey),n=r.filter(i=>!e(i));return this.storage.set(this.storageKey,n)})}removeAll(){return La(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var BI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Th=(t,e)=>BI(void 0,void 0,void 0,function*(){const r=[t,e.type];e.name&&r.push(`name:${e.name}`),e.rpcUrl&&r.push(`rpc:${e.rpcUrl}`);const n=Buffer.from(un.hash(Is(r.join("-")),10));return Yr.encode(n)});var kI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class DI{static hasPermission(e,r,n){return kI(this,void 0,void 0,function*(){switch(e.type){case Ke.PermissionRequest:case Ke.BroadcastRequest:return!0;case Ke.OperationRequest:{const i=yield Th(e.sourceAddress,e.network),s=yield r(i);return s?s.scopes.includes(Sn.OPERATION_REQUEST):!1}case Ke.SignPayloadRequest:{const s=(yield n()).filter(o=>o.address===e.sourceAddress);return s.length===0?!1:s.some(o=>o.scopes.includes(Sn.SIGN))}default:throw new Error("Message not handled")}})}}var ks=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class UI{constructor(e){this.storageManager=new $0(e,ke.ACCOUNTS)}getAccounts(){return ks(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return ks(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.accountIdentifier===e)})}addAccount(e){return ks(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return ks(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.accountIdentifier===e)})}removeAccounts(e){return ks(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.accountIdentifier))})}removeAllAccounts(){return ks(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return ks(this,void 0,void 0,function*(){return DI.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var KI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const ia=t=>KI(void 0,void 0,void 0,function*(){const e=Buffer.from(un.hash(Buffer.from(t,"hex"),5));return Yr.encode(e)});let Z2=!!st.beaconSdkDebugEnabled;Z2&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const HI=()=>Z2;class FI{constructor(){}debug(e,r,...n){this._log("debug",e,r,n)}log(e,r,...n){this._log("log",e,r,n)}warn(e,r,...n){this._log("warn",e,r,n)}error(e,r,...n){this._log("error",e,r,n)}_log(e,r,n,i=[]){if(!HI())return;let s=`[BEACON] ${new Date().toISOString()} [${r}](${n})`,o=i;switch(i[0]&&typeof i[0]=="string"&&(s+=` ${i[0]}`,o=i.slice(1)),e){case"error":console.group(s),console.error(...o);break;case"warn":console.group(s),console.warn(...o);break;case"debug":console.groupCollapsed(s),console.debug(...o);break;default:console.group(s),console.log(...o)}console.groupEnd()}}class tn{constructor(e){this.name=e}debug(e,...r){rf.debug(this.name,e,r)}log(e,...r){rf.log(this.name,e,r)}warn(e,...r){rf.warn(this.name,e,r)}error(e,...r){rf.error(this.name,e,r)}}let rf=new FI;var Cr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const jI=new tn("Client");class GI extends CI{constructor(e){var r;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new Zt,this.accountManager=new UI(e.storage),this.matrixNodes=(r=e.matrixNodes)!==null&&r!==void 0?r:{},this.handleResponse=(n,i)=>{throw new Error(`not overwritten${JSON.stringify(n)} - ${JSON.stringify(i)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,r;return(r=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&r!==void 0?r:fn.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return Cr(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return Cr(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return Cr(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return Cr(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return Cr(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(r=>r+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return Cr(this,void 0,void 0,function*(){return this._transport.status===Yn.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return Cr(this,void 0,void 0,function*(){return{senderId:yield ia(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return Cr(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return Cr(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return Cr(this,void 0,void 0,function*(){this._transport.status===Yn.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return Cr(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=Zt.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new Zt)})}addListener(e){return Cr(this,void 0,void 0,function*(){e.addListener((r,n)=>Cr(this,void 0,void 0,function*(){if(typeof r=="string"){const i=yield new io().deserialize(r);this.handleResponse(i,n)}})).catch(r=>jI.error("addListener",r))})}sendDisconnectToPeer(e,r){return Cr(this,void 0,void 0,function*(){const n={id:yield Ji(),version:e.version,senderId:yield ia(yield this.beaconId),type:Ke.Disconnect},i=yield new io().serialize(n);yield(r??(yield this.transport)).send(i,e)})}}class rn{constructor(e,r){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${r}`,this.description=r}get fullDescription(){return{description:this.description}}static getError(e,r){switch(e){case pt.BROADCAST_ERROR:return new VI;case pt.NETWORK_NOT_SUPPORTED:return new qI;case pt.NO_ADDRESS_ERROR:return new $I;case pt.NO_PRIVATE_KEY_FOUND_ERROR:return new zI;case pt.NOT_GRANTED_ERROR:return new WI;case pt.PARAMETERS_INVALID_ERROR:return new XI;case pt.TOO_MANY_OPERATIONS:return new JI;case pt.TRANSACTION_INVALID_ERROR:return new YI(r);case pt.SIGNATURE_TYPE_NOT_SUPPORTED:return new nT;case pt.ABORTED_ERROR:return new eT;case pt.UNKNOWN_ERROR:return new ey}}}class VI extends rn{constructor(){super(pt.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class qI extends rn{constructor(){super(pt.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class $I extends rn{constructor(){super(pt.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class zI extends rn{constructor(){super(pt.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class WI extends rn{constructor(){super(pt.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class XI extends rn{constructor(){super(pt.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class JI extends rn{constructor(){super(pt.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class YI extends rn{constructor(e){super(pt.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class ey extends rn{constructor(){super(pt.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var vn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ei=new tn("Transport");class ty{constructor(e,r,n){this.type=no.POST_MESSAGE,this._isConnected=fn.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=r,this.peerManager=n}get connectionStatus(){return this._isConnected}static isAvailable(){return vn(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return vn(this,void 0,void 0,function*(){Ei.log("connect"),this._isConnected=fn.CONNECTED})}disconnect(){return vn(this,void 0,void 0,function*(){Ei.log("disconnect"),this._isConnected=fn.NOT_CONNECTED})}send(e,r){return vn(this,void 0,void 0,function*(){if(r)return this.client.sendMessage(e,r);{const i=(yield this.getPeers()).map(s=>this.client.sendMessage(e,s));return(yield Promise.all(i))[0]}})}addListener(e){return vn(this,void 0,void 0,function*(){Ei.debug("addListener"),this.listeners.push(e)})}removeListener(e){return vn(this,void 0,void 0,function*(){Ei.log("removeListener"),this.listeners=this.listeners.filter(r=>r!==e)})}getPeers(){return vn(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,r=!0){return vn(this,void 0,void 0,function*(){Ei.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return vn(this,void 0,void 0,function*(){Ei.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return vn(this,void 0,void 0,function*(){Ei.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,r){return vn(this,void 0,void 0,function*(){this.listeners.length===0?Ei.warn("notifyListeners","0 listeners notified!",this):Ei.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(n=>{n(e,r)})})}}globalThis&&globalThis.__awaiter;var nf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class QI{constructor(e){this.prefix=e}static isSupported(){return nf(this,void 0,void 0,function*(){return Promise.resolve(typeof window<"u"&&!!window.localStorage)})}get(e){return nf(this,void 0,void 0,function*(){const r=localStorage.getItem(this.getPrefixedKey(e));if(r)try{return JSON.parse(r)}catch{return r}else return typeof Ed[e]=="object"?JSON.parse(JSON.stringify(Ed[e])):Ed[e]})}set(e,r){return nf(this,void 0,void 0,function*(){return typeof r=="string"?localStorage.setItem(this.getPrefixedKey(e),r):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(r))})}delete(e){return nf(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;var _g=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class io{serialize(e){return _g(this,void 0,void 0,function*(){const r=JSON.stringify(e);return Yr.encode(Buffer.from(r))})}deserialize(e){return _g(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse(Yr.decode(e).toString())})}}var _o=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class ZI{constructor(e){this.storageManager=new $0(e,ke.APP_METADATA_LIST)}getAppMetadataList(){return _o(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return _o(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.senderId===e)})}addAppMetadata(e){return _o(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.senderId===e.senderId)})}removeAppMetadata(e){return _o(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.senderId===e)})}removeAppMetadatas(e){return _o(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.senderId))})}removeAllAppMetadata(){return _o(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class eT extends rn{constructor(){super(pt.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var Ds=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Zf{constructor(e,r){this.storageManager=new $0(e,r)}hasPeer(e){return Ds(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return Ds(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return Ds(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.publicKey===e)})}addPeer(e){return Ds(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.publicKey===e.publicKey)})}removePeer(e){return Ds(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.publicKey===e)})}removePeers(e){return Ds(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.publicKey))})}removeAllPeers(){return Ds(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var _d={},wd={},wg;function tT(){return wg||(wg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.X25519Session=t.SECRET_SEED_LENGTH=t.SAVED_STATE_LENGTH=t.ACCEPT_MESSAGE_LENGTH=t.OFFER_MESSAGE_LENGTH=void 0;const e=oo,r=Fr,n=hc,i=ry();t.OFFER_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.ACCEPT_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.SAVED_STATE_LENGTH=n.SECRET_KEY_LENGTH,t.SECRET_SEED_LENGTH=n.SECRET_KEY_LENGTH;class s{constructor(a,c){this.offerMessageLength=t.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=t.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=n.SHARED_KEY_LENGTH,this.savedStateLength=t.SAVED_STATE_LENGTH,this._seed=a||(0,e.randomBytes)(n.SECRET_KEY_LENGTH,c)}saveState(){return new Uint8Array(this._seed)}restoreState(a){return this._seed=new Uint8Array(a),this}clean(){this._seed&&(0,r.wipe)(this._seed),this._keyPair&&((0,r.wipe)(this._keyPair.secretKey),(0,r.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,r.wipe)(this._sharedKey),this._sessionKeys&&((0,r.wipe)(this._sessionKeys.receive),(0,r.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,n.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(a){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(a.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const c=(0,n.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,n.sharedKey)(c.secretKey,a),this._sessionKeys=(0,i.clientSessionKeysFromSharedKey)(this._sharedKey,c.publicKey,a),(0,r.wipe)(c.secretKey),c.publicKey}finish(a){if(a.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,n.sharedKey)(this._keyPair.secretKey,a),this._sessionKeys=(0,i.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,a),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}t.X25519Session=s}(wd)),wd}var Ag;function ry(){return Ag||(Ag=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.clientSessionKeys=t.serverSessionKeys=t.clientSessionKeysFromSharedKey=t.serverSessionKeysFromSharedKey=t.X25519Session=void 0;const e=un,r=hc;var n=tT();Object.defineProperty(t,"X25519Session",{enumerable:!0,get:function(){return n.X25519Session}});const i=32;function s(l,f,d,I=e.BLAKE2b){const P=new I;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const L=P.update(l).update(d).update(f).digest();return{send:L.subarray(0,i),receive:L.subarray(i)}}t.serverSessionKeysFromSharedKey=s;function o(l,f,d,I=e.BLAKE2b){const P=new I;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const L=P.update(l).update(f).update(d).digest();return{receive:L.subarray(0,i),send:L.subarray(i)}}t.clientSessionKeysFromSharedKey=o;function a(l,f,d=e.BLAKE2b){const I=(0,r.sharedKey)(l.secretKey,f);return s(I,l.publicKey,f,d)}t.serverSessionKeys=a;function c(l,f,d=e.BLAKE2b){const I=(0,r.sharedKey)(l.secretKey,f);return o(I,l.publicKey,f,d)}t.clientSessionKeys=c}(_d)),_d}var xg=ry(),Ca=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class ny{constructor(e){this.keyPair=e}getPublicKey(){return Ca(this,void 0,void 0,function*(){return Xi(this.keyPair.publicKey)})}getPublicKeyHash(){return Ca(this,void 0,void 0,function*(){return Ro(this.keyPair.publicKey)})}createCryptoBoxServer(e,r){return Ca(this,void 0,void 0,function*(){return xg.serverSessionKeys({publicKey:qr.convertPublicKeyToX25519(r.publicKey),secretKey:qr.convertSecretKeyToX25519(r.secretKey)},qr.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}createCryptoBoxClient(e,r){return Ca(this,void 0,void 0,function*(){return xg.clientSessionKeys({publicKey:qr.convertPublicKeyToX25519(r.publicKey),secretKey:qr.convertSecretKeyToX25519(r.secretKey)},qr.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}encryptMessageAsymmetric(e,r){return Ca(this,void 0,void 0,function*(){return II(r,Buffer.from(e,"hex"))})}}var Us=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class rT extends ny{constructor(e,r){super(r),this.name=e,this.init().catch(console.error)}start(){return Us(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return Us(this,void 0,void 0,function*(){return{id:yield Ji(),type:"postmessage-pairing-request",name:this.name,version:Q2,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return Us(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return Us(this,void 0,void 0,function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return Us(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,r){return Us(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxServer(e,this.keyPair),i=Buffer.from(r,"hex");if(i.length>=Jf+Yf)try{return yield J2(i,n.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,r){return Us(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(e,this.keyPair);return X2(r,n.send)})}}class nT extends rn{constructor(){super(pt.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var Oh={},iT={get exports(){return Oh},set exports(t){Oh=t}},eu={},sT={get exports(){return eu},set exports(t){eu=t}},iy=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},oT=iy,po=Object.prototype.toString;function z0(t){return po.call(t)==="[object Array]"}function Ph(t){return typeof t>"u"}function aT(t){return t!==null&&!Ph(t)&&t.constructor!==null&&!Ph(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function cT(t){return po.call(t)==="[object ArrayBuffer]"}function fT(t){return typeof FormData<"u"&&t instanceof FormData}function uT(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function lT(t){return typeof t=="string"}function dT(t){return typeof t=="number"}function sy(t){return t!==null&&typeof t=="object"}function wf(t){if(po.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function hT(t){return po.call(t)==="[object Date]"}function pT(t){return po.call(t)==="[object File]"}function gT(t){return po.call(t)==="[object Blob]"}function oy(t){return po.call(t)==="[object Function]"}function bT(t){return sy(t)&&oy(t.pipe)}function vT(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function mT(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function yT(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function W0(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),z0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Nh(){var t={};function e(i,s){wf(t[s])&&wf(i)?t[s]=Nh(t[s],i):wf(i)?t[s]=Nh({},i):z0(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)W0(arguments[r],e);return t}function ET(t,e,r){return W0(e,function(i,s){r&&typeof i=="function"?t[s]=oT(i,r):t[s]=i}),t}function _T(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var nn={isArray:z0,isArrayBuffer:cT,isBuffer:aT,isFormData:fT,isArrayBufferView:uT,isString:lT,isNumber:dT,isObject:sy,isPlainObject:wf,isUndefined:Ph,isDate:hT,isFile:pT,isBlob:gT,isFunction:oy,isStream:bT,isURLSearchParams:vT,isStandardBrowserEnv:yT,forEach:W0,merge:Nh,extend:ET,trim:mT,stripBOM:_T},wo=nn;function Sg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ay=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(wo.isURLSearchParams(r))i=r.toString();else{var s=[];wo.forEach(r,function(c,l){c===null||typeof c>"u"||(wo.isArray(c)?l=l+"[]":c=[c],wo.forEach(c,function(d){wo.isDate(d)?d=d.toISOString():wo.isObject(d)&&(d=JSON.stringify(d)),s.push(Sg(l)+"="+Sg(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},wT=nn;function Ju(){this.handlers=[]}Ju.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Ju.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Ju.prototype.forEach=function(e){wT.forEach(this.handlers,function(n){n!==null&&e(n)})};var AT=Ju,xT=nn,ST=function(e,r){xT.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},cy=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Ad,Rg;function fy(){if(Rg)return Ad;Rg=1;var t=cy;return Ad=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},Ad}var xd,Ig;function RT(){if(Ig)return xd;Ig=1;var t=fy();return xd=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},xd}var Sd,Tg;function IT(){if(Tg)return Sd;Tg=1;var t=nn;return Sd=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Sd}var Rd,Og;function TT(){return Og||(Og=1,Rd=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Rd}var Id,Pg;function OT(){return Pg||(Pg=1,Id=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Id}var Td,Ng;function PT(){if(Ng)return Td;Ng=1;var t=TT(),e=OT();return Td=function(n,i){return n&&!t(i)?e(n,i):i},Td}var Od,Mg;function NT(){if(Mg)return Od;Mg=1;var t=nn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Od=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Od}var Pd,Lg;function MT(){if(Lg)return Pd;Lg=1;var t=nn;return Pd=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Pd}var Nd,Cg;function Yu(){if(Cg)return Nd;Cg=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Nd=t,Nd}var Md,Bg;function kg(){if(Bg)return Md;Bg=1;var t=nn,e=RT(),r=IT(),n=ay,i=PT(),s=NT(),o=MT(),a=fy(),c=Qu(),l=Yu();return Md=function(d){return new Promise(function(P,L){var H=d.data,q=d.headers,G=d.responseType,C;function V(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete q["Content-Type"];var U=new XMLHttpRequest;if(d.auth){var F=d.auth.username||"",j=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";q.Authorization="Basic "+btoa(F+":"+j)}var y=i(d.baseURL,d.url);U.open(d.method.toUpperCase(),n(y,d.params,d.paramsSerializer),!0),U.timeout=d.timeout;function _(){if(U){var x="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,E=!G||G==="text"||G==="json"?U.responseText:U.response,u={data:E,status:U.status,statusText:U.statusText,headers:x,config:d,request:U};e(function(g){P(g),V()},function(g){L(g),V()},u),U=null}}if("onloadend"in U?U.onloadend=_:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(_)},U.onabort=function(){U&&(L(a("Request aborted",d,"ECONNABORTED",U)),U=null)},U.onerror=function(){L(a("Network Error",d,null,U)),U=null},U.ontimeout=function(){var E=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c.transitional;d.timeoutErrorMessage&&(E=d.timeoutErrorMessage),L(a(E,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},t.isStandardBrowserEnv()){var O=(d.withCredentials||o(y))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;O&&(q[d.xsrfHeaderName]=O)}"setRequestHeader"in U&&t.forEach(q,function(E,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete q[u]:U.setRequestHeader(u,E)}),t.isUndefined(d.withCredentials)||(U.withCredentials=!!d.withCredentials),G&&G!=="json"&&(U.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&U.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(x){U&&(L(!x||x&&x.type?new l("canceled"):x),U.abort(),U=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),H||(H=null),U.send(H)})},Md}var Ld,Dg;function Qu(){if(Dg)return Ld;Dg=1;var t=nn,e=ST,r=cy,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=kg()),c}function o(c,l,f){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(f||JSON.stringify)(c)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(l,f){return e(f,"Accept"),e(f,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(f,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||f&&f["Content-Type"]==="application/json"?(i(f,"application/json"),o(l)):l}],transformResponse:[function(l){var f=this.transitional||a.transitional,d=f&&f.silentJSONParsing,I=f&&f.forcedJSONParsing,P=!d&&this.responseType==="json";if(P||I&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(L){if(P)throw L.name==="SyntaxError"?r(L,this,"E_JSON_PARSE"):L}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){a.headers[l]={}}),t.forEach(["post","put","patch"],function(l){a.headers[l]=t.merge(n)}),Ld=a,Ld}var LT=nn,CT=Qu(),BT=function(e,r,n){var i=this||CT;return LT.forEach(n,function(o){e=o.call(i,e,r)}),e},Cd,Ug;function uy(){return Ug||(Ug=1,Cd=function(e){return!!(e&&e.__CANCEL__)}),Cd}var Kg=nn,Bd=BT,kT=uy(),DT=Qu(),UT=Yu();function kd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new UT("canceled")}var KT=function(e){kd(e),e.headers=e.headers||{},e.data=Bd.call(e,e.data,e.headers,e.transformRequest),e.headers=Kg.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Kg.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||DT.adapter;return r(e).then(function(i){return kd(e),i.data=Bd.call(e,i.data,i.headers,e.transformResponse),i},function(i){return kT(i)||(kd(e),i&&i.response&&(i.response.data=Bd.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Gr=nn,ly=function(e,r){r=r||{};var n={};function i(f,d){return Gr.isPlainObject(f)&&Gr.isPlainObject(d)?Gr.merge(f,d):Gr.isPlainObject(d)?Gr.merge({},d):Gr.isArray(d)?d.slice():d}function s(f){if(Gr.isUndefined(r[f])){if(!Gr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Gr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Gr.isUndefined(r[f])){if(!Gr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Gr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var I=l[d]||s,P=I(d);Gr.isUndefined(P)&&I!==c||(n[d]=P)}),n},Dd,Hg;function dy(){return Hg||(Hg=1,Dd={version:"0.24.0"}),Dd}var HT=dy().version,X0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){X0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Fg={};X0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+HT+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Fg[o]&&(Fg[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function FT(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var jT={assertOptions:FT,validators:X0},hy=nn,GT=ay,jg=AT,Gg=KT,Zu=ly,py=jT,Ao=py.validators;function Lc(t){this.defaults=t,this.interceptors={request:new jg,response:new jg}}Lc.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Zu(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&py.assertOptions(r,{silentJSONParsing:Ao.transitional(Ao.boolean),forcedJSONParsing:Ao.transitional(Ao.boolean),clarifyTimeoutError:Ao.transitional(Ao.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(e)===!1||(i=i&&I.synchronous,n.unshift(I.fulfilled,I.rejected))});var s=[];this.interceptors.response.forEach(function(I){s.push(I.fulfilled,I.rejected)});var o;if(!i){var a=[Gg,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),f=n.shift();try{c=l(c)}catch(d){f(d);break}}try{o=Gg(c)}catch(d){return Promise.reject(d)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Lc.prototype.getUri=function(e){return e=Zu(this.defaults,e),GT(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};hy.forEach(["delete","get","head","options"],function(e){Lc.prototype[e]=function(r,n){return this.request(Zu(n||{},{method:e,url:r,data:(n||{}).data}))}});hy.forEach(["post","put","patch"],function(e){Lc.prototype[e]=function(r,n,i){return this.request(Zu(i||{},{method:e,url:r,data:n}))}});var VT=Lc,Ud,Vg;function qT(){if(Vg)return Ud;Vg=1;var t=Yu();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Ud=e,Ud}var Kd,qg;function $T(){return qg||(qg=1,Kd=function(e){return function(n){return e.apply(null,n)}}),Kd}var Hd,$g;function zT(){return $g||($g=1,Hd=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Hd}var zg=nn,WT=iy,Af=VT,XT=ly,JT=Qu();function gy(t){var e=new Af(t),r=WT(Af.prototype.request,e);return zg.extend(r,Af.prototype,e),zg.extend(r,e),r.create=function(i){return gy(XT(t,i))},r}var vi=gy(JT);vi.Axios=Af;vi.Cancel=Yu();vi.CancelToken=qT();vi.isCancel=uy();vi.VERSION=dy().version;vi.all=function(e){return Promise.all(e)};vi.spread=$T();vi.isAxiosError=zT();sT.exports=vi;eu.default=vi;(function(t){t.exports=eu})(iT);const tu=hb(Oh);var ru;(function(t){t.TEXT="m.text"})(ru||(ru={}));class J0{constructor(e,r,n,i){this.type=e,this.sender=r,this.content=n,this.timestamp=i}static from(e){if(ZT(e))return new J0(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const YT=t=>t.type==="m.room.create"&&t.content instanceof Object&&"creator"in t.content,QT=t=>t.type==="m.room.member"&&t.content instanceof Object&&"membership"in t.content&&t.content.membership==="join",by=t=>t.type==="m.room.message",ZT=t=>by(t)&&t.content instanceof Object&&"msgtype"in t.content&&t.content.msgtype===ru.TEXT;var Ar;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JOINED=1]="JOINED",t[t.INVITED=2]="INVITED",t[t.LEFT=3]="LEFT"})(Ar||(Ar={}));class Ct{constructor(e,r=Ar.UNKNOWN,n=[],i=[]){this.id=e,this.status=r,this.members=n,this.messages=i}static fromSync(e){var r,n,i;if(!e)return[];function s(o,a){return Object.entries(o).map(([c,l])=>a(c,l))}return[...s((r=e.join)!==null&&r!==void 0?r:{},Ct.fromJoined),...s((n=e.invite)!==null&&n!==void 0?n:{},Ct.fromInvited),...s((i=e.leave)!==null&&i!==void 0?i:{},Ct.fromLeft)]}static from(e,r){return typeof e=="string"?new Ct(e,r||Ar.UNKNOWN):r!==void 0?new Ct(e.id,r,e.members,e.messages):e}static merge(e,r){return!r||r.id!==e.id?Ct.from(e):new Ct(e.id,e.status,[...r.members,...e.members].filter((n,i,s)=>s.indexOf(n)===i),[...r.messages,...e.messages])}static fromJoined(e,r){const n=[...r.state.events,...r.timeline.events],i=Ct.getMembersFromEvents(n),s=Ct.getMessagesFromEvents(n);return new Ct(e,Ar.JOINED,i,s)}static fromInvited(e,r){const n=Ct.getMembersFromEvents(r.invite_state.events);return new Ct(e,Ar.INVITED,n)}static fromLeft(e,r){const n=[...r.state.events,...r.timeline.events],i=Ct.getMembersFromEvents(n),s=Ct.getMessagesFromEvents(n);return new Ct(e,Ar.LEFT,i,s)}static getMembersFromEvents(e){return Ct.getUniqueEvents(e.filter(r=>YT(r)||QT(r))).map(r=>r.sender).filter((r,n,i)=>i.indexOf(r)===n)}static getMessagesFromEvents(e){return Ct.getUniqueEvents(e.filter(by)).map(r=>J0.from(r)).filter(Boolean)}static getUniqueEvents(e){const r={},n=[];return e.forEach((i,s)=>{const o=i.event_id;(o===void 0||!(o in r))&&(o!==void 0&&(r[o]=s),n.push(i))}),n}}var sf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Wg=["syncToken","rooms"];class eO{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((r,n)=>sf(this,void 0,void 0,function*(){try{yield this.initFromStorage(),r()}catch(i){n(i)}}))}get(e){return this.state[e]}getRoom(e){const r=Ct.from(e,Ar.UNKNOWN);return this.state.rooms[r.id]||r}update(e){return sf(this,void 0,void 0,function*(){yield this.waitReady();const r=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(r,this.state,e)})}onStateChanged(e,...r){r.length>0?r.forEach(n=>{this.onStateChangedListeners.set(n,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return sf(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return sf(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const n=["rooms"].some(i=>e[i]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(n.rooms||{}).forEach(i=>{i.messages=[]}),n}updateStorage(e){if(Object.entries(e).filter(([n,i])=>Wg.includes(n)&&!!i).length>0){const n={};Wg.forEach(i=>{n[i]=this.state[i]}),this.storage.set(ke.MATRIX_PRESERVED_STATE,this.prepareData(n))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,r){if(!r)return e;const n=Array.isArray(r)?r:Object.values(r),i=Object.assign({},e);return n.forEach(s=>{i[s.id]=Ct.merge(s,e[s.id])}),i}notifyListeners(e,r,n){const i=this.onStateChangedListeners.get("all");i&&i(e,r,n),q0(n).filter(s=>n[s]!==void 0).forEach(s=>{const o=this.onStateChangedListeners.get(s);o&&o(e,r,n)})}}var Ba=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const tO=new tn("MatrixHttpClient"),rO="/_matrix/client/r0";class nO{constructor(e){this.baseUrl=e,this.cancelTokenSource=tu.CancelToken.source()}get(e,r,n){return Ba(this,void 0,void 0,function*(){return this.send("GET",e,n,r)})}post(e,r,n,i){return Ba(this,void 0,void 0,function*(){return this.send("POST",e,n,i,r)})}put(e,r,n,i){return Ba(this,void 0,void 0,function*(){return this.send("PUT",e,n,i,r)})}cancelAllRequests(){return Ba(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,r,n,i,s){return Ba(this,void 0,void 0,function*(){const o=n?this.getHeaders(n):void 0,a=i?this.getParams(i):void 0;let c;try{c=yield tu.request({method:e,url:r,baseURL:this.apiUrl(rO),headers:o,data:s,params:a,cancelToken:this.cancelTokenSource.token})}catch(l){const f=l;throw tO.error("send",f.code,f.message,f.response.data),l.response.data}return c.data})}getHeaders(e){const r={},n=[];if(e.accessToken&&n.push(["Authorization",`Bearer ${e.accessToken}`]),n.length!==0){for(const[i,s]of n)r[i]=s;return r}}getParams(e){if(!e)return;const r=Object.assign(e,{});return q0(r).forEach(n=>r[n]===void 0&&delete r[n]),r}apiUrl(...e){const r=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,n=e.map(i=>i.startsWith("/")?i.substr(1):i);return[r,...n].join("/")}}var of=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class iO{constructor(e){this.httpClient=e}createRoom(e,r={}){return of(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",r,{accessToken:e})})}inviteToRoom(e,r,n){return of(this,void 0,void 0,function*(){return n.status!==Ar.JOINED&&n.status!==Ar.UNKNOWN?Promise.reject(`User is not a member of room ${n.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(n.id)}/invite`,{user_id:r},{accessToken:e})})}joinRoom(e,r){return of(this,void 0,void 0,function*(){return r.status===Ar.JOINED?Promise.resolve({room_id:r.id}):this.httpClient.post(`/rooms/${encodeURIComponent(r.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return of(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var sO=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class oO{constructor(e){this.httpClient=e}login(e,r,n){return sO(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:r,device_id:n})})}}var Fd=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class aO{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,r){return Fd(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:r?r.pollingTimeout:void 0,since:r?r.syncToken:void 0},{accessToken:e}))})}sendMessage(e,r,n,i){return Fd(this,void 0,void 0,function*(){return new Promise((s,o)=>this.scheduleEvent({accessToken:e,roomId:r,type:"m.room.message",content:n,txnId:i,onSuccess:s,onError:o}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return Fd(this,void 0,void 0,function*(){const{roomId:r,type:n,txnId:i,content:s,accessToken:o}=e;try{const a=yield this.httpClient.put(`/rooms/${encodeURIComponent(r)}/send/${n}/${encodeURIComponent(i)}`,s,{accessToken:o});e.onSuccess(a)}catch(a){e.onError(a)}})}withCache(e,r){let n=this.cachedPromises.get(e);return n||(n=r().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,n)),n}}class cO{constructor(){this.events={}}on(e,r){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(r),()=>this.removeListener(e,r)}removeListener(e,r){if(typeof this.events[e]!="object")return;if(!r){this.events[e]=[];return}const n=this.events[e].indexOf(r);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...r){typeof this.events[e]=="object"&&[...this.events[e]].forEach(n=>n.apply(this,r))}once(e,r){const n=this.on(e,(...i)=>{n(),r.apply(this,i)});return n}}var Vr;(function(t){t.INVITE="invite",t.MESSAGE="message"})(Vr||(Vr={}));class fO extends cO{constructor(){super(...arguments),this.eventEmitProviders=new Map([[Vr.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[Vr.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,r,n){for(const i of q0(Vr))this.emitIfEvent(Vr[i],n)}emitIfEvent(e,r){const n=this.eventEmitProviders.get(e);if(n){const[i,s]=n();i(r)&&s(e,r)}}emitClientEvent(e,r,n){this.emit(e,{type:e,content:r,timestamp:n})}isInvite(e){return e.rooms?e.rooms.some(r=>r.status===Ar.INVITED):!1}emitInvite(e,r){r.rooms.filter(n=>n.status===Ar.INVITED).map(n=>[n.id,n.members]).forEach(([n,i])=>{this.emitClientEvent(e,{roomId:n,members:i})})}isMessage(e){return e.rooms?e.rooms.some(r=>r.messages.length>0):!1}emitMessage(e,r){r.rooms.filter(n=>n.messages.length>0).map(n=>n.messages.map(i=>[n.id,i,i.timestamp])).reduce((n,i)=>n.concat(i),[]).forEach(([n,i,s])=>{this.emitClientEvent(e,{roomId:n,message:i},s)})}}var St=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const jd=new tn("MatrixClient"),uO=3,lO=5e3;class Y0{constructor(e,r,n,i,s,o){this.store=e,this.eventEmitter=r,this.userService=n,this.roomService=i,this.eventService=s,this.httpClient=o,this.isActive=!0,this._isReady=new Zt,this.store.onStateChanged((a,c,l)=>{this.eventEmitter.onStateChanged(a,c,l)},"rooms")}static create(e){const r=new eO(e.storage),n=new fO,i=new nO(e.baseUrl),s=new oO(i),o=new iO(i),a=new aO(i);return new Y0(r,n,s,o,a,i)}get joinedRooms(){return new Promise(e=>St(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===Ar.JOINED))}))}get invitedRooms(){return new Promise(e=>St(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===Ar.INVITED))}))}get leftRooms(){return new Promise(e=>St(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===Ar.LEFT))}))}start(e){return St(this,void 0,void 0,function*(){const r=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:r.access_token});const n=new Promise((i,s)=>St(this,void 0,void 0,function*(){yield this.poll(0,o=>St(this,void 0,void 0,function*(){this.store.get("isRunning")||i(),yield this.store.update({isRunning:!0,syncToken:o.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:Ct.fromSync(o.rooms)})}),o=>St(this,void 0,void 0,function*(){this.store.get("isRunning")||s(o),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return n.then(()=>{this._isReady.resolve()}).catch(console.error),n})}isConnected(){return St(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return St(this,void 0,void 0,function*(){return jd.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new Zt,this.httpClient.cancelAllRequests()})}subscribe(e,r){this.eventEmitter.on(e,r)}unsubscribe(e,r){r&&this.eventEmitter.removeListener(e,r)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return St(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return St(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",r=>St(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(r,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...r){return St(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",n=>Promise.all(r.map(i=>{const s=this.store.getRoom(i);this.roomService.inviteToRoom(n,e,s).catch(o=>jd.warn("inviteToRooms",o))})))})}joinRooms(...e){return St(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",r=>Promise.all(e.map(n=>{const i=this.store.getRoom(n);return this.roomService.joinRoom(r,i)})))})}sendTextMessage(e,r){return St(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",n=>St(this,void 0,void 0,function*(){const i=yield this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:r},i)}))})}poll(e,r,n){return St(this,void 0,void 0,function*(){const i=this.store,s=this.sync.bind(this),o=(a,c)=>St(this,void 0,void 0,function*(){let l=0;try{const f=yield s();r(f)}catch(f){n(f),l=i.get("pollingRetries"),this.isActive&&jd.log(`Retry syncing... ${l} retries so far`)}finally{this.isActive?setTimeout(()=>St(this,void 0,void 0,function*(){yield o(a,c)}),l>uO?lO+e:e):c(new Error("Syncing stopped manually."))}});return new Promise(o)})}sync(){return St(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>St(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,r){return St(this,void 0,void 0,function*(){const n=this.store.get("accessToken");return n?r(n):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return St(this,void 0,void 0,function*(){const e=new Date().getTime(),r=this.store.get("txnNo");return yield this.store.update({txnNo:r+1}),`m${e}.${r}`})}}var tt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Re=new tn("P2PCommunicationClient"),Xg={[Ih.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"]};class dO extends ny{constructor(e,r,n,i,s,o,a){super(r),this.name=e,this.replicationCount=n,this.storage=i,this.iconUrl=o,this.appUrl=a,this.client=new Zt,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,Re.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=Xg,s&&(this.ENABLED_RELAY_SERVERS=Object.assign(Object.assign({},Xg),s))}getPairingRequestInfo(){return tt(this,void 0,void 0,function*(){const e={id:yield Ji(),type:"p2p-pairing-request",name:this.name,version:Q2,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return tt(this,void 0,void 0,function*(){const r={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(r.icon=this.iconUrl),this.appUrl&&(r.appUrl=this.appUrl),r})}findBestRegion(){return tt(this,void 0,void 0,function*(){if(this.selectedRegion)return this.selectedRegion;const e=Object.keys(this.ENABLED_RELAY_SERVERS),r=[];e.forEach(i=>{var s;const o=(s=this.ENABLED_RELAY_SERVERS[i])!==null&&s!==void 0?s:[],a=Math.floor(Math.random()*o.length);r.push(this.getBeaconInfo(o[a]).then(c=>({region:i,server:o[a],response:c})).catch(c=>new Promise((l,f)=>{setTimeout(()=>f(c),2e3)})))});const n=yield Promise.race(r);return this.selectedRegion=n.region,n.region})}getRelayServer(){return tt(this,void 0,void 0,function*(){if(this.relayServer){const s=yield this.relayServer.promise;if(Date.now()-s.localTimestamp<60*1e3)return{server:s.server,timestamp:s.timestamp};const o=yield this.getBeaconInfo(s.server);return this.relayServer.resolve({server:s.server,timestamp:o.timestamp,localTimestamp:new Date().getTime()}),{server:s.server,timestamp:o.timestamp}}else this.relayServer=new Zt;const e=yield this.storage.get(ke.MATRIX_SELECTED_NODE);if(e&&e.length>0){const s=yield this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:s.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:s.timestamp}}const r=yield this.findBestRegion(),n=this.ENABLED_RELAY_SERVERS[r];if(!n)throw new Error(`No servers found for region ${r}`);const i=[...n];for(;i.length>0;){const s=Math.floor(Math.random()*i.length),o=i[s];try{const a=yield this.getBeaconInfo(o);return this.storage.set(ke.MATRIX_SELECTED_NODE,o).catch(c=>Re.log(c)),this.relayServer.resolve({server:o,timestamp:a.timestamp,localTimestamp:new Date().getTime()}),{server:o,timestamp:a.timestamp}}catch{Re.log(`Ignoring server "${o}", trying another one...`),i.splice(s,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}getBeaconInfo(e){return tt(this,void 0,void 0,function*(){return tu.get(`https://${e}/_synapse/client/beacon/info`).then(r=>({region:r.data.region,known_servers:r.data.known_servers,timestamp:Math.floor(r.data.timestamp)}))})}tryJoinRooms(e,r=1){return tt(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(n){r<=10&&n.errcode==="M_FORBIDDEN"?(Re.log("Retrying to join...",n),setTimeout(()=>tt(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,r+1)}),200)):Re.log(`Failed to join after ${r} tries.`,n)}})}start(){var e,r;return tt(this,void 0,void 0,function*(){Re.log("start","starting client"),Re.log("start","connecting to server");const n=yield this.getRelayServer(),i=Y0.create({baseUrl:`https://${n.server}`,storage:this.storage});if(this.initialListener=f=>tt(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&f&&f.timestamp?this.initialEvent.timestamp<f.timestamp&&(this.initialEvent=f):this.initialEvent=f}),i.subscribe(Vr.MESSAGE,this.initialListener),i.subscribe(Vr.INVITE,f=>tt(this,void 0,void 0,function*(){let d;f.content.members.length===1&&(d=f.content.members[0]),yield this.tryJoinRooms(f.content.roomId),d&&(yield this.updateRelayServer(d),yield this.updatePeerRoom(d,f.content.roomId))})),!n.timestamp)throw new Error("No timestamp received from relay server");const s=Math.floor(n.timestamp),o=`login:${Math.floor(s/(5*60))}`;Re.log("start",`login ${o}, ${yield this.getPublicKeyHash()} on ${n.server}`);const a=un.hash(Is(o),32),c=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,l=qr.sign(c,a);try{yield i.start({id:yield this.getPublicKeyHash(),password:`ed:${Xi(l)}:${yield this.getPublicKey()}`,deviceId:Xi(this.keyPair.publicKey)})}catch{if(Re.error("start","Could not log in, retrying"),yield this.reset(),!this.selectedRegion)throw new Error("No region selected.");if(this.loginCounter<=((r=this.ENABLED_RELAY_SERVERS[this.selectedRegion])!==null&&r!==void 0?r:[]).length){this.loginCounter++,this.start();return}else throw Re.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}Re.log("start","login successful, client is ready"),this.client.resolve(i)})}stop(){return tt(this,void 0,void 0,function*(){Re.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>Re.error(e))),yield this.reset()})}reset(){return tt(this,void 0,void 0,function*(){Re.log("reset","resetting connection"),yield this.storage.delete(ke.MATRIX_PEER_ROOM_IDS).catch(e=>Re.log(e)),yield this.storage.delete(ke.MATRIX_PRESERVED_STATE).catch(e=>Re.log(e)),yield this.storage.delete(ke.MATRIX_SELECTED_NODE).catch(e=>Re.log(e)),this.relayServer=void 0,this.client=new Zt,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,r){return tt(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;Re.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const n=yield this.createCryptoBoxServer(e,this.keyPair),i=a=>tt(this,void 0,void 0,function*(){if(this.isTextMessage(a.content)&&(yield this.isSender(a,e))){let c;yield this.updateRelayServer(a.content.message.sender),yield this.updatePeerRoom(a.content.message.sender,a.content.roomId);try{c=Buffer.from(a.content.message.content,"hex")}catch{}if(c&&c.length>=Jf+Yf)try{const l=yield J2(c,n.receive);Re.log("listenForEncryptedMessage",`received a message from ${e}`,l),r(l)}catch{}}});this.activeListeners.set(e,i),(yield this.client.promise).subscribe(Vr.MESSAGE,i);const s=this.initialEvent;s&&s.timestamp&&new Date().getTime()-s.timestamp<5*60*1e3?(Re.log("listenForEncryptedMessage","Handling previous event"),yield i(s)):Re.log("listenForEncryptedMessage","No previous event found");const o=this.initialListener;o&&(yield this.client.promise).unsubscribe(Vr.MESSAGE,o),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return tt(this,void 0,void 0,function*(){const r=this.activeListeners.get(e);r&&((yield this.client.promise).unsubscribe(Vr.MESSAGE,r),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return tt(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(Vr.MESSAGE),this.activeListeners.clear()})}sendMessage(e,r){return tt(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(r.publicKey,this.keyPair),i=yield Ro(Buffer.from(r.publicKey,"hex")),s=yg(i,r.relayServer),o=yield this.getRelevantRoom(s);yield this.waitForJoin(o);const a=yield X2(e,n.send);Re.log("sendMessage","sending encrypted message",r.publicKey,o,e),(yield this.client.promise).sendTextMessage(o,a).catch(c=>tt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Re.log("sendMessage","M_FORBIDDEN",o,c),yield this.deleteRoomIdFromRooms(o);const l=yield this.getRelevantRoom(s);Re.log("sendMessage","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>tt(this,void 0,void 0,function*(){Re.log("sendMessage","inner error",l,f)}))}else Re.log("sendMessage","unexpected error",c)}))})}updatePeerRoom(e,r){return tt(this,void 0,void 0,function*(){Re.log("updatePeerRoom",e,r);const n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw new Error("Invalid sender");const i=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),s=i[e];s===r&&Re.debug("updatePeerRoom","rooms are the same, not updating"),Re.debug("updatePeerRoom","current room",s,"new room",r),s&&s[1]&&(Re.log("updatePeerRoom",`adding room "${s[1]}" to ignored array`),this.ignoredRooms.push(s[1])),i[e]=r,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,i)})}deleteRoomIdFromRooms(e){return tt(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),n=Object.entries(r).filter(i=>i[1]!==e).reduce((i,s)=>Object.assign(Object.assign({},i),{[s[0]]:s[1]}),{});yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,n),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return tt(this,void 0,void 0,function*(){Re.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(Vr.MESSAGE,r=>tt(this,void 0,void 0,function*(){if(this.isTextMessage(r.content)&&(yield this.isChannelOpenMessage(r.content))){Re.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(r)),yield this.updateRelayServer(r.content.message.sender),yield this.updatePeerRoom(r.content.message.sender,r.content.roomId);const n=r.content.message.content.split(":"),i=Buffer.from(n[n.length-1],"hex");if(i.length>=Jf+Yf)try{const s=JSON.parse(yield Y2(i,this.keyPair.publicKey,this.keyPair.secretKey));Re.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(s)),e(Object.assign(Object.assign({},s),{senderId:yield ia(s.publicKey)}))}catch{}}}))})}waitForJoin(e,r=0){return tt(this,void 0,void 0,function*(){const n=yield(yield this.client.promise).getRoomById(e);if(Re.log("waitForJoin",`Currently ${n.members.length} members, we need at least 2`),!(n.members.length>=2||n.members.length===0)){if(r<=200)return Re.log(`Waiting for join... Try: ${r}`),new Promise(i=>{setTimeout(()=>tt(this,void 0,void 0,function*(){i(this.waitForJoin(e,r+1))}),100*(r>50?10:1))});throw new Error(`No one joined after ${r} tries.`)}})}sendPairingResponse(e){return tt(this,void 0,void 0,function*(){Re.log("sendPairingResponse");const r=yield Ro(Buffer.from(e.publicKey,"hex")),n=yg(r,e.relayServer),i=yield(yield this.client.promise).createTrustedPrivateRoom(n);Re.debug("sendPairingResponse",`Connecting to room "${i}"`),yield this.updatePeerRoom(n,i),yield this.waitForJoin(i),Re.debug("sendPairingResponse","Successfully joined room.");const s=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));Re.debug("sendPairingResponse","Sending pairing response",s);const o=yield this.encryptMessageAsymmetric(e.publicKey,s),a=["@channel-open",n,o].join(":");(yield this.client.promise).sendTextMessage(i,a).catch(c=>tt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Re.log("sendPairingResponse","M_FORBIDDEN",i,c),yield this.deleteRoomIdFromRooms(i);const l=yield this.getRelevantRoom(n);Re.log("sendPairingResponse","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>tt(this,void 0,void 0,function*(){Re.log("sendPairingResponse","inner error",l,f)}))}else Re.log("sendPairingResponse","unexpected error",c)}))})}isTextMessage(e){return e.message.type===ru.TEXT}updateRelayServer(e){return tt(this,void 0,void 0,function*(){Re.log("updateRelayServer",e);const r=e.split(":");if(r.length<2||!r[0].startsWith("@"))throw new Error("Invalid sender");const n=r.shift(),i=r.join(":"),s=localStorage.getItem("beacon:communication-peers-dapp")?new Zf(this.storage,ke.TRANSPORT_P2P_PEERS_DAPP):new Zf(this.storage,ke.TRANSPORT_P2P_PEERS_WALLET),a=(yield s.getPeers()).map(c=>tt(this,void 0,void 0,function*(){`@${yield Ro(Buffer.from(c.publicKey,"hex"))}`===n&&c.relayServer!==i&&(c.relayServer=i,yield s.addPeer(c))}));yield Promise.all(a)})}isChannelOpenMessage(e){return tt(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield Ro(Buffer.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,r){return tt(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield Ro(Buffer.from(r,"hex"))}`)})}getRelevantRoom(e){return tt(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS);let n=r[e];if(!n){Re.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const i=yield this.getRelevantJoinedRoom(e);n=i.id,r[e]=i.id,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,r)}return Re.log("getRelevantRoom",`Using room ${n}`),n})}getRelevantJoinedRoom(e){return tt(this,void 0,void 0,function*(){const r=yield(yield this.client.promise).joinedRooms;Re.log("checking joined rooms",r,e);const n=r.filter(s=>!this.ignoredRooms.some(o=>s.id===o)).filter(s=>s.members.some(o=>o===e));let i;if(n.length===0||this.ignoredRooms.length>0){Re.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const s=yield(yield this.client.promise).createTrustedPrivateRoom(e);i=yield(yield this.client.promise).getRoomById(s),Re.log("getRelevantJoinedRoom",`waiting for other party to join room: ${i.id}`),yield this.waitForJoin(s),Re.log("getRelevantJoinedRoom",`new room created and peer invited: ${i.id}`)}else i=n[0],Re.log("getRelevantJoinedRoom",`channel already open, reusing room ${i.id}`);return i})}}var Ks=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Gd=new tn("P2PTransport");class hO extends ty{constructor(e,r,n,i,s,o,a){super(e,new dO(e,r,1,n,i,o,a),new Zf(n,s)),this.type=no.P2P}static isAvailable(){return Ks(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Ks(this,void 0,void 0,function*(){if(this._isConnected!==fn.NOT_CONNECTED)return;Gd.log("connect"),this._isConnected=fn.CONNECTING,yield this.client.start();const r=yield this.getPeers();if(r.length>0){Gd.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Ks(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>Gd.error("connect",i))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return Ks(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return Ks(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Ks(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Ks(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,r=>{const n={origin:Rn.P2P,id:e};this.notifyListeners(r,n).catch(i=>{throw i})}).catch(r=>{throw r})})}}var _i=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class pO extends rT{constructor(){super(...arguments),this.activeListeners=new Map}init(){return _i(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,r){return _i(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const n=(i,s)=>_i(this,void 0,void 0,function*(){try{const o=yield this.decryptMessage(e,i.encryptedPayload);r(o,s)}catch{}});this.activeListeners.set(e,n)})}sendMessage(e,r){return _i(this,void 0,void 0,function*(){const n=yield this.encryptMessage(r.publicKey,e),i=r?.extensionId,s={target:Fi.EXTENSION,encryptedPayload:n,targetId:i};st.postMessage(s,st.location.origin)})}listenForChannelOpening(e){return _i(this,void 0,void 0,function*(){const r=n=>_i(this,void 0,void 0,function*(){var i,s;if(n.source!==st||n.origin!==st.location.origin)return;const o=(i=n?.data)===null||i===void 0?void 0:i.message;if(o&&o.target===Fi.PAGE&&(yield this.isChannelOpenMessage(o))){const a=Buffer.from(o.payload,"hex");if(a.length>=Jf+Yf)try{const c=JSON.parse(yield Y2(a,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},c),{senderId:yield ia(c.publicKey),extensionId:(s=n?.data)===null||s===void 0?void 0:s.sender.id}))}catch{}}});st.addEventListener("message",r)})}sendPairingRequest(e){return _i(this,void 0,void 0,function*(){const r={target:Fi.EXTENSION,payload:yield new io().serialize(yield this.getPairingRequestInfo()),targetId:e};st.postMessage(r,st.location.origin)})}isChannelOpenMessage(e){return _i(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return _i(this,void 0,void 0,function*(){st.addEventListener("message",e=>{if(!(e.source!==st||e.origin!==st.location.origin)&&typeof e=="object"&&e){const r=e.data;r.message&&r.message.target===Fi.PAGE&&this.activeListeners.forEach(n=>{n(r.message,{origin:Rn.EXTENSION,id:r.sender.id||""})})}})})}}var Hs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const ka=new tn("PostMessageTransport");let Jg=!1,Da,Qn;const gO=t=>{Qn||(Qn=[]),Qn.some(e=>e.id===t.id)||(Qn.push(t),st.postMessage("extensionsUpdated",st.location.origin))};class Cc extends ty{constructor(e,r,n,i){super(e,new pO(e,r),new Zf(n,i)),this.type=no.POST_MESSAGE}static isAvailable(){return Hs(this,void 0,void 0,function*(){return new Promise(e=>{const r=i=>{const s=i.data;s&&s.payload==="pong"&&(e(!0),st.removeEventListener("message",r))};st.addEventListener("message",r);const n={target:Fi.EXTENSION,payload:"ping"};st.postMessage(n,st.location.origin)})})}static getAvailableExtensions(){return Hs(this,void 0,void 0,function*(){return Da||Qn||(Qn=[],Da=new Promise(e=>{Cc.listenForExtensions(),setTimeout(()=>{e(Qn??[])},1e3)}).finally(()=>{Da=void 0}),Da)})}static listenForExtensions(){if(Jg)return;const e=n=>{if(n.source!==st||n.origin!==st.location.origin)return;const i=n.data,s=i.sender;i&&i.payload==="pong"&&s&&(ka.log("getAvailableExtensions",`extension "${s.name}" is available`,s),gO(s))};st.addEventListener("message",e);const r={target:Fi.EXTENSION,payload:"ping"};st.postMessage(r,st.location.origin),Jg=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Hs(this,void 0,void 0,function*(){if(ka.log("connect"),this._isConnected!==fn.NOT_CONNECTED)return;this._isConnected=fn.CONNECTING;const r=yield this.getPeers();if(r.length>0){ka.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Hs(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>ka.error("connect",i))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return Hs(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Hs(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Hs(this,void 0,void 0,function*(){ka.log("listen",e),yield this.client.listenForEncryptedMessage(e,(r,n)=>{const i={origin:Rn.EXTENSION,id:n.id};this.notifyListeners(r,i).catch(s=>{throw s})}).catch(r=>{throw r})})}}const Yg={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}

.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},nu=(t,e)=>e.test(t.navigator.userAgent),bO=(t,e)=>t.matchMedia(e).matches,Mh=t=>bO(t,"(any-pointer:coarse)"),vO=t=>!!(nu(t,/iPad/i)||nu(t,/Macintosh/i)&&Mh(t)),vy=t=>nu(t,/iPhone|iPod/i)||vO(t),my=t=>nu(t,/android|sink/i);var iu={},mO={get exports(){return iu},set exports(t){iu=t}};(function(t,e){var r=function(){var n=function(F,j){var y=236,_=17,O=F,x=s[j],E=null,u=0,p=null,g=[],b={},h=function(K,k){u=O*4+17,E=function(m){for(var B=new Array(m),X=0;X<m;X+=1){B[X]=new Array(m);for(var Z=0;Z<m;Z+=1)B[X][Z]=null}return B}(u),S(0,0),S(u-7,0),S(0,u-7),v(),w(),ee(K,k),O>=7&&N(K),p==null&&(p=se(O,x,g)),Y(p,k)},S=function(K,k){for(var m=-1;m<=7;m+=1)if(!(K+m<=-1||u<=K+m))for(var B=-1;B<=7;B+=1)k+B<=-1||u<=k+B||(0<=m&&m<=6&&(B==0||B==6)||0<=B&&B<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=B&&B<=4?E[K+m][k+B]=!0:E[K+m][k+B]=!1)},T=function(){for(var K=0,k=0,m=0;m<8;m+=1){h(!0,m);var B=a.getLostPoint(b);(m==0||K>B)&&(K=B,k=m)}return k},w=function(){for(var K=8;K<u-8;K+=1)E[K][6]==null&&(E[K][6]=K%2==0);for(var k=8;k<u-8;k+=1)E[6][k]==null&&(E[6][k]=k%2==0)},v=function(){for(var K=a.getPatternPosition(O),k=0;k<K.length;k+=1)for(var m=0;m<K.length;m+=1){var B=K[k],X=K[m];if(E[B][X]==null)for(var Z=-2;Z<=2;Z+=1)for(var ce=-2;ce<=2;ce+=1)Z==-2||Z==2||ce==-2||ce==2||Z==0&&ce==0?E[B+Z][X+ce]=!0:E[B+Z][X+ce]=!1}},N=function(K){for(var k=a.getBCHTypeNumber(O),m=0;m<18;m+=1){var B=!K&&(k>>m&1)==1;E[Math.floor(m/3)][m%3+u-8-3]=B}for(var m=0;m<18;m+=1){var B=!K&&(k>>m&1)==1;E[m%3+u-8-3][Math.floor(m/3)]=B}},ee=function(K,k){for(var m=x<<3|k,B=a.getBCHTypeInfo(m),X=0;X<15;X+=1){var Z=!K&&(B>>X&1)==1;X<6?E[X][8]=Z:X<8?E[X+1][8]=Z:E[u-15+X][8]=Z}for(var X=0;X<15;X+=1){var Z=!K&&(B>>X&1)==1;X<8?E[8][u-X-1]=Z:X<9?E[8][15-X-1+1]=Z:E[8][15-X-1]=Z}E[u-8][8]=!K},Y=function(K,k){for(var m=-1,B=u-1,X=7,Z=0,ce=a.getMaskFunction(k),ie=u-1;ie>0;ie-=2)for(ie==6&&(ie-=1);;){for(var de=0;de<2;de+=1)if(E[B][ie-de]==null){var ye=!1;Z<K.length&&(ye=(K[Z]>>>X&1)==1);var ue=ce(B,ie-de);ue&&(ye=!ye),E[B][ie-de]=ye,X-=1,X==-1&&(Z+=1,X=7)}if(B+=m,B<0||u<=B){B-=m,m=-m;break}}},ne=function(K,k){for(var m=0,B=0,X=0,Z=new Array(k.length),ce=new Array(k.length),ie=0;ie<k.length;ie+=1){var de=k[ie].dataCount,ye=k[ie].totalCount-de;B=Math.max(B,de),X=Math.max(X,ye),Z[ie]=new Array(de);for(var ue=0;ue<Z[ie].length;ue+=1)Z[ie][ue]=255&K.getBuffer()[ue+m];m+=de;var Ee=a.getErrorCorrectPolynomial(ye),xe=l(Z[ie],Ee.getLength()-1),me=xe.mod(Ee);ce[ie]=new Array(Ee.getLength()-1);for(var ue=0;ue<ce[ie].length;ue+=1){var ge=ue+me.getLength()-ce[ie].length;ce[ie][ue]=ge>=0?me.getAt(ge):0}}for(var Oe=0,ue=0;ue<k.length;ue+=1)Oe+=k[ue].totalCount;for(var ve=new Array(Oe),he=0,ue=0;ue<B;ue+=1)for(var ie=0;ie<k.length;ie+=1)ue<Z[ie].length&&(ve[he]=Z[ie][ue],he+=1);for(var ue=0;ue<X;ue+=1)for(var ie=0;ie<k.length;ie+=1)ue<ce[ie].length&&(ve[he]=ce[ie][ue],he+=1);return ve},se=function(K,k,m){for(var B=f.getRSBlocks(K,k),X=d(),Z=0;Z<m.length;Z+=1){var ce=m[Z];X.put(ce.getMode(),4),X.put(ce.getLength(),a.getLengthInBits(ce.getMode(),K)),ce.write(X)}for(var ie=0,Z=0;Z<B.length;Z+=1)ie+=B[Z].dataCount;if(X.getLengthInBits()>ie*8)throw"code length overflow. ("+X.getLengthInBits()+">"+ie*8+")";for(X.getLengthInBits()+4<=ie*8&&X.put(0,4);X.getLengthInBits()%8!=0;)X.putBit(!1);for(;!(X.getLengthInBits()>=ie*8||(X.put(y,8),X.getLengthInBits()>=ie*8));)X.put(_,8);return ne(X,B)};b.addData=function(K,k){k=k||"Byte";var m=null;switch(k){case"Numeric":m=I(K);break;case"Alphanumeric":m=P(K);break;case"Byte":m=L(K);break;case"Kanji":m=H(K);break;default:throw"mode:"+k}g.push(m),p=null},b.isDark=function(K,k){if(K<0||u<=K||k<0||u<=k)throw K+","+k;return E[K][k]},b.getModuleCount=function(){return u},b.make=function(){if(O<1){for(var K=1;K<40;K++){for(var k=f.getRSBlocks(K,x),m=d(),B=0;B<g.length;B++){var X=g[B];m.put(X.getMode(),4),m.put(X.getLength(),a.getLengthInBits(X.getMode(),K)),X.write(m)}for(var Z=0,B=0;B<k.length;B++)Z+=k[B].dataCount;if(m.getLengthInBits()<=Z*8)break}O=K}h(!1,T())},b.createTableTag=function(K,k){K=K||2,k=typeof k>"u"?K*4:k;var m="";m+='<table style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: "+k+"px;",m+='">',m+="<tbody>";for(var B=0;B<b.getModuleCount();B+=1){m+="<tr>";for(var X=0;X<b.getModuleCount();X+=1)m+='<td style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: 0px;",m+=" width: "+K+"px;",m+=" height: "+K+"px;",m+=" background-color: ",m+=b.isDark(B,X)?"#000000":"#ffffff",m+=";",m+='"/>';m+="</tr>"}return m+="</tbody>",m+="</table>",m},b.createSvgTag=function(K,k,m,B){var X={};typeof arguments[0]=="object"&&(X=arguments[0],K=X.cellSize,k=X.margin,m=X.alt,B=X.title),K=K||2,k=typeof k>"u"?K*4:k,m=typeof m=="string"?{text:m}:m||{},m.text=m.text||null,m.id=m.text?m.id||"qrcode-description":null,B=typeof B=="string"?{text:B}:B||{},B.text=B.text||null,B.id=B.text?B.id||"qrcode-title":null;var Z=b.getModuleCount()*K+k*2,ce,ie,de,ye,ue="",Ee;for(Ee="l"+K+",0 0,"+K+" -"+K+",0 0,-"+K+"z ",ue+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ue+=X.scalable?"":' width="'+Z+'px" height="'+Z+'px"',ue+=' viewBox="0 0 '+Z+" "+Z+'" ',ue+=' preserveAspectRatio="xMinYMin meet"',ue+=B.text||m.text?' role="img" aria-labelledby="'+ae([B.id,m.id].join(" ").trim())+'"':"",ue+=">",ue+=B.text?'<title id="'+ae(B.id)+'">'+ae(B.text)+"</title>":"",ue+=m.text?'<description id="'+ae(m.id)+'">'+ae(m.text)+"</description>":"",ue+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ue+='<path d="',de=0;de<b.getModuleCount();de+=1)for(ye=de*K+k,ce=0;ce<b.getModuleCount();ce+=1)b.isDark(de,ce)&&(ie=ce*K+k,ue+="M"+ie+","+ye+Ee);return ue+='" stroke="transparent" fill="black"/>',ue+="</svg>",ue},b.createDataURL=function(K,k){K=K||2,k=typeof k>"u"?K*4:k;var m=b.getModuleCount()*K+k*2,B=k,X=m-k;return U(m,m,function(Z,ce){if(B<=Z&&Z<X&&B<=ce&&ce<X){var ie=Math.floor((Z-B)/K),de=Math.floor((ce-B)/K);return b.isDark(de,ie)?0:1}else return 1})},b.createImgTag=function(K,k,m){K=K||2,k=typeof k>"u"?K*4:k;var B=b.getModuleCount()*K+k*2,X="";return X+="<img",X+=' src="',X+=b.createDataURL(K,k),X+='"',X+=' width="',X+=B,X+='"',X+=' height="',X+=B,X+='"',m&&(X+=' alt="',X+=ae(m),X+='"'),X+="/>",X};var ae=function(K){for(var k="",m=0;m<K.length;m+=1){var B=K.charAt(m);switch(B){case"<":k+="&lt;";break;case">":k+="&gt;";break;case"&":k+="&amp;";break;case'"':k+="&quot;";break;default:k+=B;break}}return k},W=function(K){var k=1;K=typeof K>"u"?k*2:K;var m=b.getModuleCount()*k+K*2,B=K,X=m-K,Z,ce,ie,de,ye,ue={"██":"█","█ ":"▀"," █":"▄","  ":" "},Ee={"██":"▀","█ ":"▀"," █":" ","  ":" "},xe="";for(Z=0;Z<m;Z+=2){for(ie=Math.floor((Z-B)/k),de=Math.floor((Z+1-B)/k),ce=0;ce<m;ce+=1)ye="█",B<=ce&&ce<X&&B<=Z&&Z<X&&b.isDark(ie,Math.floor((ce-B)/k))&&(ye=" "),B<=ce&&ce<X&&B<=Z+1&&Z+1<X&&b.isDark(de,Math.floor((ce-B)/k))?ye+=" ":ye+="█",xe+=K<1&&Z+1>=X?Ee[ye]:ue[ye];xe+=`
`}return m%2&&K>0?xe.substring(0,xe.length-m-1)+Array(m+1).join("▀"):xe.substring(0,xe.length-1)};return b.createASCII=function(K,k){if(K=K||1,K<2)return W(k);K-=1,k=typeof k>"u"?K*2:k;var m=b.getModuleCount()*K+k*2,B=k,X=m-k,Z,ce,ie,de,ye=Array(K+1).join("██"),ue=Array(K+1).join("  "),Ee="",xe="";for(Z=0;Z<m;Z+=1){for(ie=Math.floor((Z-B)/K),xe="",ce=0;ce<m;ce+=1)de=1,B<=ce&&ce<X&&B<=Z&&Z<X&&b.isDark(ie,Math.floor((ce-B)/K))&&(de=0),xe+=de?ye:ue;for(ie=0;ie<K;ie+=1)Ee+=xe+`
`}return Ee.substring(0,Ee.length-1)},b.renderTo2dContext=function(K,k){k=k||2;for(var m=b.getModuleCount(),B=0;B<m;B++)for(var X=0;X<m;X++)K.fillStyle=b.isDark(B,X)?"black":"white",K.fillRect(B*k,X*k,k,k)},b};n.stringToBytesFuncs={default:function(F){for(var j=[],y=0;y<F.length;y+=1){var _=F.charCodeAt(y);j.push(_&255)}return j}},n.stringToBytes=n.stringToBytesFuncs.default,n.createStringToBytes=function(F,j){var y=function(){for(var O=C(F),x=function(){var w=O.read();if(w==-1)throw"eof";return w},E=0,u={};;){var p=O.read();if(p==-1)break;var g=x(),b=x(),h=x(),S=String.fromCharCode(p<<8|g),T=b<<8|h;u[S]=T,E+=1}if(E!=j)throw E+" != "+j;return u}(),_="?".charCodeAt(0);return function(O){for(var x=[],E=0;E<O.length;E+=1){var u=O.charCodeAt(E);if(u<128)x.push(u);else{var p=y[O.charAt(E)];typeof p=="number"?(p&255)==p?x.push(p):(x.push(p>>>8),x.push(p&255)):x.push(_)}}return x}};var i={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},s={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var F=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],j=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,y=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,_=1<<14|1<<12|1<<10|1<<4|1<<1,O={},x=function(E){for(var u=0;E!=0;)u+=1,E>>>=1;return u};return O.getBCHTypeInfo=function(E){for(var u=E<<10;x(u)-x(j)>=0;)u^=j<<x(u)-x(j);return(E<<10|u)^_},O.getBCHTypeNumber=function(E){for(var u=E<<12;x(u)-x(y)>=0;)u^=y<<x(u)-x(y);return E<<12|u},O.getPatternPosition=function(E){return F[E-1]},O.getMaskFunction=function(E){switch(E){case o.PATTERN000:return function(u,p){return(u+p)%2==0};case o.PATTERN001:return function(u,p){return u%2==0};case o.PATTERN010:return function(u,p){return p%3==0};case o.PATTERN011:return function(u,p){return(u+p)%3==0};case o.PATTERN100:return function(u,p){return(Math.floor(u/2)+Math.floor(p/3))%2==0};case o.PATTERN101:return function(u,p){return u*p%2+u*p%3==0};case o.PATTERN110:return function(u,p){return(u*p%2+u*p%3)%2==0};case o.PATTERN111:return function(u,p){return(u*p%3+(u+p)%2)%2==0};default:throw"bad maskPattern:"+E}},O.getErrorCorrectPolynomial=function(E){for(var u=l([1],0),p=0;p<E;p+=1)u=u.multiply(l([1,c.gexp(p)],0));return u},O.getLengthInBits=function(E,u){if(1<=u&&u<10)switch(E){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw"mode:"+E}else if(u<27)switch(E){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw"mode:"+E}else if(u<41)switch(E){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw"mode:"+E}else throw"type:"+u},O.getLostPoint=function(E){for(var u=E.getModuleCount(),p=0,g=0;g<u;g+=1)for(var b=0;b<u;b+=1){for(var h=0,S=E.isDark(g,b),T=-1;T<=1;T+=1)if(!(g+T<0||u<=g+T))for(var w=-1;w<=1;w+=1)b+w<0||u<=b+w||T==0&&w==0||S==E.isDark(g+T,b+w)&&(h+=1);h>5&&(p+=3+h-5)}for(var g=0;g<u-1;g+=1)for(var b=0;b<u-1;b+=1){var v=0;E.isDark(g,b)&&(v+=1),E.isDark(g+1,b)&&(v+=1),E.isDark(g,b+1)&&(v+=1),E.isDark(g+1,b+1)&&(v+=1),(v==0||v==4)&&(p+=3)}for(var g=0;g<u;g+=1)for(var b=0;b<u-6;b+=1)E.isDark(g,b)&&!E.isDark(g,b+1)&&E.isDark(g,b+2)&&E.isDark(g,b+3)&&E.isDark(g,b+4)&&!E.isDark(g,b+5)&&E.isDark(g,b+6)&&(p+=40);for(var b=0;b<u;b+=1)for(var g=0;g<u-6;g+=1)E.isDark(g,b)&&!E.isDark(g+1,b)&&E.isDark(g+2,b)&&E.isDark(g+3,b)&&E.isDark(g+4,b)&&!E.isDark(g+5,b)&&E.isDark(g+6,b)&&(p+=40);for(var N=0,b=0;b<u;b+=1)for(var g=0;g<u;g+=1)E.isDark(g,b)&&(N+=1);var ee=Math.abs(100*N/u/u-50)/5;return p+=ee*10,p},O}(),c=function(){for(var F=new Array(256),j=new Array(256),y=0;y<8;y+=1)F[y]=1<<y;for(var y=8;y<256;y+=1)F[y]=F[y-4]^F[y-5]^F[y-6]^F[y-8];for(var y=0;y<255;y+=1)j[F[y]]=y;var _={};return _.glog=function(O){if(O<1)throw"glog("+O+")";return j[O]},_.gexp=function(O){for(;O<0;)O+=255;for(;O>=256;)O-=255;return F[O]},_}();function l(F,j){if(typeof F.length>"u")throw F.length+"/"+j;var y=function(){for(var O=0;O<F.length&&F[O]==0;)O+=1;for(var x=new Array(F.length-O+j),E=0;E<F.length-O;E+=1)x[E]=F[E+O];return x}(),_={};return _.getAt=function(O){return y[O]},_.getLength=function(){return y.length},_.multiply=function(O){for(var x=new Array(_.getLength()+O.getLength()-1),E=0;E<_.getLength();E+=1)for(var u=0;u<O.getLength();u+=1)x[E+u]^=c.gexp(c.glog(_.getAt(E))+c.glog(O.getAt(u)));return l(x,0)},_.mod=function(O){if(_.getLength()-O.getLength()<0)return _;for(var x=c.glog(_.getAt(0))-c.glog(O.getAt(0)),E=new Array(_.getLength()),u=0;u<_.getLength();u+=1)E[u]=_.getAt(u);for(var u=0;u<O.getLength();u+=1)E[u]^=c.gexp(c.glog(O.getAt(u))+x);return l(E,0).mod(O)},_}var f=function(){var F=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j=function(O,x){var E={};return E.totalCount=O,E.dataCount=x,E},y={},_=function(O,x){switch(x){case s.L:return F[(O-1)*4+0];case s.M:return F[(O-1)*4+1];case s.Q:return F[(O-1)*4+2];case s.H:return F[(O-1)*4+3];default:return}};return y.getRSBlocks=function(O,x){var E=_(O,x);if(typeof E>"u")throw"bad rs block @ typeNumber:"+O+"/errorCorrectionLevel:"+x;for(var u=E.length/3,p=[],g=0;g<u;g+=1)for(var b=E[g*3+0],h=E[g*3+1],S=E[g*3+2],T=0;T<b;T+=1)p.push(j(h,S));return p},y}(),d=function(){var F=[],j=0,y={};return y.getBuffer=function(){return F},y.getAt=function(_){var O=Math.floor(_/8);return(F[O]>>>7-_%8&1)==1},y.put=function(_,O){for(var x=0;x<O;x+=1)y.putBit((_>>>O-x-1&1)==1)},y.getLengthInBits=function(){return j},y.putBit=function(_){var O=Math.floor(j/8);F.length<=O&&F.push(0),_&&(F[O]|=128>>>j%8),j+=1},y},I=function(F){var j=i.MODE_NUMBER,y=F,_={};_.getMode=function(){return j},_.getLength=function(E){return y.length},_.write=function(E){for(var u=y,p=0;p+2<u.length;)E.put(O(u.substring(p,p+3)),10),p+=3;p<u.length&&(u.length-p==1?E.put(O(u.substring(p,p+1)),4):u.length-p==2&&E.put(O(u.substring(p,p+2)),7))};var O=function(E){for(var u=0,p=0;p<E.length;p+=1)u=u*10+x(E.charAt(p));return u},x=function(E){if("0"<=E&&E<="9")return E.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+E};return _},P=function(F){var j=i.MODE_ALPHA_NUM,y=F,_={};_.getMode=function(){return j},_.getLength=function(x){return y.length},_.write=function(x){for(var E=y,u=0;u+1<E.length;)x.put(O(E.charAt(u))*45+O(E.charAt(u+1)),11),u+=2;u<E.length&&x.put(O(E.charAt(u)),6)};var O=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-"0".charCodeAt(0);if("A"<=x&&x<="Z")return x.charCodeAt(0)-"A".charCodeAt(0)+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return _},L=function(F){var j=i.MODE_8BIT_BYTE,y=n.stringToBytes(F),_={};return _.getMode=function(){return j},_.getLength=function(O){return y.length},_.write=function(O){for(var x=0;x<y.length;x+=1)O.put(y[x],8)},_},H=function(F){var j=i.MODE_KANJI,y=n.stringToBytesFuncs.SJIS;if(!y)throw"sjis not supported.";(function(x,E){var u=y(x);if(u.length!=2||(u[0]<<8|u[1])!=E)throw"sjis not supported."})("友",38726);var _=y(F),O={};return O.getMode=function(){return j},O.getLength=function(x){return~~(_.length/2)},O.write=function(x){for(var E=_,u=0;u+1<E.length;){var p=(255&E[u])<<8|255&E[u+1];if(33088<=p&&p<=40956)p-=33088;else if(57408<=p&&p<=60351)p-=49472;else throw"illegal char at "+(u+1)+"/"+p;p=(p>>>8&255)*192+(p&255),x.put(p,13),u+=2}if(u<E.length)throw"illegal char at "+(u+1)},O},q=function(){var F=[],j={};return j.writeByte=function(y){F.push(y&255)},j.writeShort=function(y){j.writeByte(y),j.writeByte(y>>>8)},j.writeBytes=function(y,_,O){_=_||0,O=O||y.length;for(var x=0;x<O;x+=1)j.writeByte(y[x+_])},j.writeString=function(y){for(var _=0;_<y.length;_+=1)j.writeByte(y.charCodeAt(_))},j.toByteArray=function(){return F},j.toString=function(){var y="";y+="[";for(var _=0;_<F.length;_+=1)_>0&&(y+=","),y+=F[_];return y+="]",y},j},G=function(){var F=0,j=0,y=0,_="",O={},x=function(u){_+=String.fromCharCode(E(u&63))},E=function(u){if(!(u<0)){if(u<26)return 65+u;if(u<52)return 97+(u-26);if(u<62)return 48+(u-52);if(u==62)return 43;if(u==63)return 47}throw"n:"+u};return O.writeByte=function(u){for(F=F<<8|u&255,j+=8,y+=1;j>=6;)x(F>>>j-6),j-=6},O.flush=function(){if(j>0&&(x(F<<6-j),F=0,j=0),y%3!=0)for(var u=3-y%3,p=0;p<u;p+=1)_+="="},O.toString=function(){return _},O},C=function(F){var j=F,y=0,_=0,O=0,x={};x.read=function(){for(;O<8;){if(y>=j.length){if(O==0)return-1;throw"unexpected end of file./"+O}var u=j.charAt(y);if(y+=1,u=="=")return O=0,-1;if(u.match(/^\s$/))continue;_=_<<6|E(u.charCodeAt(0)),O+=6}var p=_>>>O-8&255;return O-=8,p};var E=function(u){if(65<=u&&u<=90)return u-65;if(97<=u&&u<=122)return u-97+26;if(48<=u&&u<=57)return u-48+52;if(u==43)return 62;if(u==47)return 63;throw"c:"+u};return x},V=function(F,j){var y=F,_=j,O=new Array(F*j),x={};x.setPixel=function(g,b,h){O[b*y+g]=h},x.write=function(g){g.writeString("GIF87a"),g.writeShort(y),g.writeShort(_),g.writeByte(128),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(255),g.writeByte(255),g.writeByte(255),g.writeString(","),g.writeShort(0),g.writeShort(0),g.writeShort(y),g.writeShort(_),g.writeByte(0);var b=2,h=u(b);g.writeByte(b);for(var S=0;h.length-S>255;)g.writeByte(255),g.writeBytes(h,S,255),S+=255;g.writeByte(h.length-S),g.writeBytes(h,S,h.length-S),g.writeByte(0),g.writeString(";")};var E=function(g){var b=g,h=0,S=0,T={};return T.write=function(w,v){if(w>>>v)throw"length over";for(;h+v>=8;)b.writeByte(255&(w<<h|S)),v-=8-h,w>>>=8-h,S=0,h=0;S=w<<h|S,h=h+v},T.flush=function(){h>0&&b.writeByte(S)},T},u=function(g){for(var b=1<<g,h=(1<<g)+1,S=g+1,T=p(),w=0;w<b;w+=1)T.add(String.fromCharCode(w));T.add(String.fromCharCode(b)),T.add(String.fromCharCode(h));var v=q(),N=E(v);N.write(b,S);var ee=0,Y=String.fromCharCode(O[ee]);for(ee+=1;ee<O.length;){var ne=String.fromCharCode(O[ee]);ee+=1,T.contains(Y+ne)?Y=Y+ne:(N.write(T.indexOf(Y),S),T.size()<4095&&(T.size()==1<<S&&(S+=1),T.add(Y+ne)),Y=ne)}return N.write(T.indexOf(Y),S),N.write(h,S),N.flush(),v.toByteArray()},p=function(){var g={},b=0,h={};return h.add=function(S){if(h.contains(S))throw"dup key:"+S;g[S]=b,b+=1},h.size=function(){return b},h.indexOf=function(S){return g[S]},h.contains=function(S){return typeof g[S]<"u"},h};return x},U=function(F,j,y){for(var _=V(F,j),O=0;O<j;O+=1)for(var x=0;x<F;x+=1)_.setPixel(x,O,y(x,O));var E=q();_.write(E);for(var u=G(),p=E.toByteArray(),g=0;g<p.length;g+=1)u.writeByte(p[g]);return u.flush(),"data:image/gif;base64,"+u};return n}();(function(){r.stringToBytesFuncs["UTF-8"]=function(n){function i(s){for(var o=[],a=0;a<s.length;a++){var c=s.charCodeAt(a);c<128?o.push(c):c<2048?o.push(192|c>>6,128|c&63):c<55296||c>=57344?o.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return o}return i(n)}})(),function(n){t.exports=n()}(function(){return r})})(mO);const yO=iu,EO=Ny({__proto__:null,default:yO},[iu]),_O=new tn("QR"),wO=(t,e)=>{const i=EO(0,"L");t.length>500&&_O.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(i.addData(t),i.make(),e==="svg")return i.createSvgTag();if(e==="ascii"){const s=i.getModuleCount(),o="\x1B[40m  \x1B[0m",a="\x1B[47m  \x1B[0m",c=new Array(s+3).join(a),l=new Array(s+3).join(o);let f="";f+=`${l}
`,f+=`${c}
`;for(let d=0;d<s;d++){f+=a;for(let I=0;I<s;I++)f+=i.isDark(d,I)?o:a;f+=`${a}
`}return f+=c,f+=l,f}else return i.createDataURL()}catch(s){throw console.error("error",s),s}},Fa=(t,e)=>`${t}?type=tzip10&data=${e}`,AO=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIIElEQVR4Ae3Ba5BeZWEA4Oc9u9kkJGHZkIQkLhQziQmVBpJwOTDg7saKEIQwnYq2/WWnUjuxHTOOgbYq77ZqSVGrtZliae2P/gE74zQIodoZEmwrR6pQlTYJ0DWNuWAChBBIyN7exsGZL2e/3Xy3Xf3RPI+zzvr/LfgFyGMKCMPHX/JT7eec75RUxJD8nAVTKI/JKe1YjquxEsuwCHOPH/phm9ER5yy8fAQv4yCeww/wHezGcBGDqRJMgTymaejD+3AjFhvHC09+SRodtijfaAIH8CgexI4ihiGTLJhEeUzn4Q58CG9Vw7MP/po0OmL5b2xVhx/hPny5iOGoSRJMgjymmfgwNmGeOowOnfD0F5eQRq36yIBs2ix1OoR7saWI4YQWBS3IYwrowxasMLGEo3gK/4UfDXz9d+ce+t79HydZsPp3PrPk1vtfxBK8HatxLoKJ7cQGbC9i0KygSXlM0/EpbESbagl78QAewneLGAZVbMTnvWkT7vUzeUwduBK34b24CEG1YXwOdxcxnNSEoAl5TAvwAPpUS3gS9+CRIoYh43sYN3vTNtxsHHlMHViHu3AVgmqP4f1FDIc1KGhQHtMSPIIVqu3GXXioiGHUxGZhAAu86UUswTETyGPKsB6bsUy1nXhPEcOABgQNyGNagn/BEmXD+BI+WcTwmtquxJPKrsUTashjmo0/we+jXdkA3lXEMKBOQZ3ymBbgcaxQdgQfKGLYqn6bsFnZH+HP1CmP6TZ8BV3KdqKniOGwOrSpQx7TdGzFFcr24sYihsc15hNYqmwU/6BO+3b07+rujd/EOnSqmI813b3xwX07+kfUkKkhjyngU+hVthfvLmL4vsbMwRrVrkCnBhQxPI0b8GNla9Gfx6SWTG192KjsCG4tYtilcZdinmpdWKlBRQy7sB5HlH0UfWrInEEe00xsQZuKYXygiOH7mvOrJtarCUUMT+O3MayiHVvymGY6g8yZfRgrlP1lEcNWzesxsT5NKmL4J2xRdgk2OIPMBPKYunCnst24W/POxWoTW43zNO8TeF7Zx/KYOk0gM7EP4nwVCXcVMbymeavQZWKdWKVJRQzHsAlJxQLcYQKZceQxTcPvKfs2HtKatWrr1ZqteFLZh/KY2o0jM761uFhFwr1FDKNa06O2Pi0oYhjFPUgqlqDXODJj5DE55XZl/4ttWtOFy9V2OeZqzTbsVXa7cWSqteNGZQ8UMQxpzRXoVNscrNGCIoZB/KOydXlMbcbIVFuOxSoSvq51PerXo3VbkVS8BcuNkal2jbKj+K7WBPSq31oErfkPvKrsamNkql2q7HtFDINaMxeXqd9KnK8FRQwn8bSylcbIVFum7L+17irMVr9ZuFLrnlG21BiZ0+QxBSxWNqB1PRrXq3V7lC3OYwpOkykL6FJ2WGsCejVuLYLWHFI2F8FpMtVmKntda+Zjpca9HfO1ZlBZZozM1LsaMzVuJq42xTLVTiibpTU9mterNR3KRo2RKUs4omy+5mVYq3l9yDRvgbKXkZwmc5oihoQDypZo3gW4RPMuwQWad7GyA0UMyWky1Z5T9sual2OG5s1ArnmXKnveGJlqzyhbk8fUoTl9WterCXlM07FK2Q+Mkan2hLJOXKFxbejVuj60adyVOFfZd4yRqbYbB1QE3KJxC7Fc65ZjocatR1CxH7uNkak2jH9W9v48pmkacy06tK4D12pAHlMH3qtsWxHDiDEyYxQxOOWryn4J6zTmnSZPn8bcjIuUfdU4MuN7DHtUBHwsjylTnzZcb/L0oE0d8pgy3ImgYgA7jCMzjiKGIfy1smtxq/osxttMnrdhsfqsx1XK7itiGDaOzMTux0sqAu7JY5qttneg3eRpx3VqyGOagz9HUHEIf2MCmQkUMRzBZmXL0a+2PpNvrdr+FEuV3VvEcNQEMmf2V9il7A/ymNabWDuuM/muR7sJ5DHdhg3KdmKLM8icQRHDCWzAiIp2/H0e02XGdyGWmnxL0W0ceUyr8BW0qxjGhiKGE84gU9t2/IWyLjyUx7RCtR60mXxtuM4YeUwrsBVdyj6H7WrI1FDEkPBxbFd2Eb6Rx3SZsl5T551Ok8e0Ct/Ehcoew91FDGppU4d9O/pHunvjo7gF81R04n3dvXH3vh39uzANmzHX1JiN+zCax3QbvoYLlO3Ee4oYXlWHNnXat6P/9e7e+ChuQZeKmfj17t7YdeTZh38ydOzgnQimxnmzFq/52pqPHrgTn8UsZQO4qYhhvzq1acC+Hf1Hunvjw3g35qnIcI00+puvPPvIDFMnXNjX/1uzFq3pQaZsJ24qYhjQgEyDihgG0IPtxji299/mmGKv7nl8jmqPoaeIYUCDMk0oYjiEm/BZjDgljQw6tvffTbVjP/62NDLoZ4axGeuKGA5rQqZJRQwnsQk3YNcbL/+Pk6/sMdVOvrLHyVf2OGUnbsBdRQwnNSmYBHlMM/d/69Mb9//rZzaNDh3vNIWy9hlHu3s+uXnx9X/4hSKGE1oUTKKLb/ri/ENP/d2GwVf33zF84qVFJlH7jK4XOjq7vyylLccPPXPYJAmmwII1H+x44+Xn140Onbj9jRd33zj8xpEuTWibcd6R6Z0XfaN9ZteDM+Yu23boqb8dNMmCKfSWd/yx0eGT04ZeO3j56wefytPwyV8ZOv7israO2RekkcFFieCUQAptHQdHBl/7ybRz5j0X2qf/cNai1cW02Qv/M2ufMbT/W582VYJfgEXXfCQMHXshS2nET4XQZtqchaMHn/hCctZZZ/08/R8wPGmSSU1PIgAAAABJRU5ErkJggg==",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAGbElEQVR4Ae3B32/ddR3H8efr/f1+z2m7dT1n3Vp+De22EsxmxARvCNDGhBvDj3/AaxdMJEpIUAOJxl8IXJnFGyNX3i3BiEG9ELIqZNSLmRBYYD+7CS3tuv5Y23N6es7n87Zd2uULxAXDt2cmnseDjo6Ojo6Ojo6Ojo7/S6Jgje/sGdTdu1+2ewZvwwQSMsAEJjCBBCYwwAQSMoEJDDCBBCYwgQmJN3XLH79JwUSBGt/dO4jzmqrlQ/bQEJhAQgaYwAQmkMAEBphAQiYwgQEmkMAEJjAhsYxU1eArLQpkFKTx5MAg0mskOuTLTVgLFErsBO6lYEZRTN8i0SESgQmfq1M4MUrBUoqS6E2xTgIBc6twWy8bfLkJszWukfgUgZMj1okN6iujQ3vYNAI8R4FSCiLTCaQGoozA51cRmxotwvFLEBxChOAQHYJDiHhwCA7RIUQIDsEBRweqZF/qBxPr7vfLj6Xa+4cWBUkpSOkXU/W1Z28fRzwIgloTmgFKKezuJnn4IAiQQIDENQIkJECsEwgQ+L+WCK9fxCeX0Z29rNsJ3Au8RUFSipTYGOJBNkj4QgMNpEjAQA+YwAQSmMAAE0jIBCYwwAQS2ttD+NM5/PQc3NnLNWIUeIuCGEVKdJxEkBgkgoUGn8uuMvSWiKeukDNCgYwiJTpBYg0SQSL8aoP/RnhtApyPSY98leTRg+Tc71ceSymIUaDSDy/WSTROIkgMVlvQinwW8Z3LhGPv49Mr5OmWHejOXeTsBN1LQYyimY0pMZQIJYKlBp+FBnaAwE/P8xmMUpCUginVceBZJAiR8Oo5MKHUIDVIDUoJ9pUBdFeVLRroQdUu4pk5bHQfG/zSVcKJD1EpgVICpQSVzCmnH1CQlKKZTiA1CLEcT07jy2uQJZAaZAalBB2s4HN1RJU83bUbPzMPDgioduFTy1BOoZxAOXVKdiR78tzvKIhRsOyJM3VCHI/jU/jCKh9jQkN9qDuDpTVYDeTZcBVfWsOnV9ig3hKqdLHJcT+SPXnuNxQoZRuEv33wbVbW9pEZeTZcfZSe7HFCxB18ro56etmi4d0g8LPz6NadbEge+uJL4ZWzx3DmSj+Y+AcFS9kGXS+vvgu8C5G8tRcH52jFx3Fng8/W0R29bNFAD6p0Ec8sYA/sY4P27aqUfj75F7aJ0U7BTxLiVYJDK+IzK3yShqv4uXlyRuLkw8Y2Mdqo9PSFFi1/g1aE4LDYgFqLPBuu4str+MwKm/qBw2wTo91CHCM4tCK0HJ9ZIU8HqyDhZxfIGWWbGO3WiscJEYJDiPjUCnna240qZeK5eXJG2CZGu0U/SStepRUhOD65xCfpYBU/v8B10oh/9IixDYw2K/1ssuXB3/AQ8VbE51dhpUmeHajgy018psamfuAw28C4GVpxjOAQIgTHJ5fI04EqkvDzC+SMsg1SbgL1ZL32tVtAYoN2d5OnPd2oUsbPL8B9t7NpBPgVBTParPG9vU95rfmMbutFBypouAr93XyMQPsrxAsL5Iz49KNGwYw2ajw1+BSpvUBm+EyNG9GBCiw38cs1rhH9wGEKZrTJ2vdv/bIye0FZgjLDZ2vciPZXQODnF7hOjFIwo11SO02W1MkMsgTmV7kR9XejvjJ+YZGcEQpmtEnppx82yOwEpQQyw+stWAvciPZXiBOL4GwZ8cuPGQVKaadSMob4OhJEJ/z+DHSlKDPoLZE8cAd0p2zRUAXeuQyzNRjsYV0/cBh4m4IYbaTMjitLkMBPzRLfu4KfmiVOLEK9hV+pk6ehPpCIE4vkjFIgo51SGwfq8Z/T+GKDa7pTbKgP3PGZGnnq70Z9ZfzCIteJEQqU0EY/+fNceOb2cNpn66+T6FUSe9UO7XkQKBMc1gI2XAUJJJDwj1bwS4sk990BEkgDP3r67hd//Pz7TgFS2qz80uIxctbu4RFC/Abu+HyAWgt2ZmzRUB/x1Cx+pY729rCuH3QYeJsCGDdbM4zRjNCM0Az41DJ5+kIfSPjEIjmjFCTlZmvG47iDA9EJf72ITk5DapAIMoNEhPEpfLoGBkg9FCTlZmvFkx79Ku67fHIZ5huQGaSGMoMdGSTCP1omzNbAdBT4JQUxbrLSc1MtmuENv7QEM3U+pRGgGdl0FHiifPSKU5CU/wE+ufI8l2t/JzH+I2eW6L8t/3rO6ejo6Ojo6Ojo6Ojo+Jz+DTK0Yr9D+W0JAAAAAElFTkSuQmCC",link:"https://templewallet.com/"}],xO=[{key:"infinity_wallet",name:"Infinity Wallet",shortName:"Infinity Wallet",color:"rgb(52, 147, 218)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANkUlEQVR4AeXBf5DfdZ0f8Mfr/fl+d5NsdvODIBBJgkIi/iJwAkHUO+/wR394P7wbZ27sdari+Ud7106n7T/tzP5va2c602nnxrmj1Ws7vd5YqjhOiygWT9FDJeGHEqVAAgiEsEKy2c3ufr+fZ2NGcsAJJIF/zn08ynNs23Vd4ZfxMfwytqLzN9sYj+E2/Cd87eEffiV+pvzMtl3XnYM/wm+j+cXU4/P4xMM//MphJ3RO2LbrunNwM65D+cVVeCPet+Gc13/uyFMPLnTbdl3nhD/FdVaP87Frwzmv/x8N78YHrT6/iV9r+Bia1adwfcMvW73e1bDV6nVeQ7N6tWaVa1a5ZpVrVrlmlRtIvDrCeEzrnNSP6QZeFeMxrVHFeExrVHk1DOKVin7degu/8h7HL7vCeOMmEt3cYWu/d4d1f3GrWl52VqosXv0OC3uuNTrvAuk63dEjJu+719StN+ueOkyVV6Iu3PmrI3TORh/HL3+bZ/7e9fqJSRLPU6U7dtTGP/kPJh74EVVOSxhvOdfcJ/6J0XkX0Peep0qlN/2FPzf11Ztp5SyNu5nNr5tFc6bSW7zqHZ75+5+gmkpUqFChQiUymHD8yrebOPCA7vCTKC9ndO555v7pv9LPbFR9VKhQoUIlhOVL30o3MLH/+1Q5C+lmNl80i+ZMJI5fea1nPny9QoUKFSpUqFCh4oRy/Io9Jg4+oDt8iPKixueeZ+4P/6UMJ1WoaipUqFChQoXqY+XiNzAcmNh/L1XOULrpTRfNojld6S295Urz1/2O4cEnDA48YfD4nDa/KJNDhkMSgiCIE8rxK642PPig7qlDKC803nyOp3//X2hHlgx+fNjwoccMHnpcm1/Uz0zRGkEQBH2svH6XDIcm9t9DNWcg3czmHbNoTkd6S7v3mP/Ah9XK2ElVatxrRxZMHHhce/qIbJqmNRUqVKhQytLlewwPPqB76hDlr4zHjnz0Hxuft5XhgNZoTSXaT46a2H+QCTIzoxIVKlSoPkav28XEpIn77qaV05RuZvNFs2heTt9buuIaRz78CQYDGQ4YDhgMGAwYDrVjc2Zu/I/WfvOrlnbvYXINQRDESUtXXGPi4Qd1Tx2iyklV5n/9d+k6uo6JIa1J69Ro2fqvfNa6275kvGmL0dYdJARB0MfKRTtZs9bEfXfTmtOQbmbTjlk0LyWxdPkeR3/3E2o8dlLXGA6ZGMpwaDD3uOkbP00/VqMVa757u6W3XMWatSpUqFChwtLl1xg88qDu8BMkfmr5rVfKuhnlhCoZDrWVJTP//d9rx47Qmsl7vicbNhlv3aESFSpUqD5G2y+RNWtN7L+LKi8j3fSmHbNoXkx6y5dfY/5DH1fjsQoVKlTQmsGhR8185t8xHjlltGLNnd+y/KZfYnKdChUqVKjE8u49Bo88aOmKay1e+2vWfenPLV9+raqmlDZ/xIY//qR25CdOqTLx/TtlZpPx1h2qjwoVKlQfo+2XyJp1hj+8hyovId30xu2zaH6exPLuPeZ/5+P0IQiCOGnwyAEzf/JvWFnxQrWybHLvty2/6ZdkzRRBEARh+bKrjS7aqS0uWvvVm6y54zbdk4+bvPsO6z//X9TCvL+uTPxgr356o/HWHfQIgqCP0faLGUwa3n8PyotIN71pxyyaF0os797j2G9fr/qoUKFChcLwkQNmbvgUoxUvpkYrJvd928qll7NmSoUKFSpUqFCJNbd/WY1GBo89rHviUfrei6oycd8+Wb/ReOsO1UeFChXa0op+81ZZP2P4/+6lys+RbnrT9lk0z5VYvuwaC7/1MZWoUKFChQqDRw+Y/s+fYrTi5dRo2eRd37byhstZO6VChQoVKmidNd/4385IMdy/T9Zv1F+wQyUq1GisFo5rC8eNtl8iMxsN77+b8kLppjdun0VzSqxceoWFD/4+CUEQBKH78QHrP/Nv1WjF6arRiom7/9LKzstk7XqCIAhaZ/Jbt6jRyJkpw/379NMbjc/fwXisLS5pC0tqcYmuM7r4jTIYGj7wfZTnSIuIiIjo101b+PWPqr5XfVQf1Uf1UX0MHn3I+s98itGyiIiIiIiIiIiIiIgIi/Mm7turQvVRfVQf1Udp+rVTIiIiIiIiIiIiIiIiIlKsvemzJr97m7a4ohaW1MKSduw4VWo8tvz29xtt3ykiIiKiCYIgsbznPXRD+tCHPvShj+7HB0x99lOsrBAEQRAEQRAEQRBGF11q6R1/lxQpevShDz1ZN0MQBEEQBEEQBEEQJ5Q1X/ysie99XS0uaYtL6vgya9bQh/HY0js/wHhMEIQBcUo/Ntp5uRr3nq+0QwdN/em/Zjx2tgYP/sD0J/+hzJyj33COftMWmdms33guw6H25KOIs1Zl8qt/pvYs6s+/VNatpZoax0+NX3uJTEyq0YpnDTzXYChTG1Uff6XUM4dNffaT9L1XpEqtLKunHtOeeswpCelpnVesNRPf/oKVK4eW3vVuNe6d0jqZ2aTmDnnWIIlTEnov0Bvuf1DGI5RXReKkKqdUI/GqSIwuupBuQO85In0k8ayB5xqtaEeelpnNntUOPcXktJV3/p7hN/4biVdq+X2/J5NrtacPq6Nz6ukn1ZE57egcK8tUOWvpLX/g4/odl6o+nme0oh39iecaEKdU6e7fZ3T5uz2rzR2RiQnZcLHl915v4st/TOJsZc16o7e8k35s7IQqFFV+auLWPzO481bKmUss/+3rjXa9jXHvhbqD+1lepHWe1QRBnFCG3/myGo1UH21pRSVMTDAc6re9wdJv/AHVCIIgCIIgCIIgCEItLajlZdVH9VHjXo3HajQyuH+vwZ23OikIgiAIgiAIgiCx/P6PGu96mxr3qo/qo/qoPioMv3kT1REEoUVEREQ4Omd4y39VKbUyYmKC4ZDhkMFALnyD5d/4R9JKREREREREREREREREREYr2uKC6qP6qD6qj+ojW7brZ84RERERERERERERERERsfy+j+p3XanGveqj+qg+qo9KGd7+RfXYAyIiIiK69TMXzqI5pbQnH1aL87LtzSyvMDnJ5ASDjkSmt8j5r9f98Dskzkii33W1rJ0mCIKgm9Dvukp7YK86vuB0jd77Ef3Oq0hPEARxQtN952aD22+iygukWz/z2lk0z1WlPfGQOj4v297MxJDBQIUKlTCzRc6/WLv/DhKnL3LRZUxvUaFChQoVdEPZdZX24F61dMzLGb3nI/qdV6m+V6FChQpVzeC7NxvcfiNVfo40L6ZKu/c23R3/SwYTqqd6qqd6ahzZutPo7/wB1byUbH+z/tJrZf1mEjX/tArVUz3VUz3VUz2G64x+65/LhnO9qDC+7iNy8ZVq3Kue6qme6ilN992bdd+8kWpeTDc1vXUWzc9V6skD6tgzctFl9CEIgmD9OXLBxepHd5B4nsGE8W/+M/3u98q2N+vf+qvq6Sfohiwd191yg+zcQzWCIAi6oX7n1erBvRw/5vlifN1H5eK30YcgCOKEpu39svat/0k1LyHd1MxrZ9G8mCr15AE1/zQ7dqu+V6FChUpYfw7nX6Lu/0undAP93/pDtmxTiQqVyIVv1P2fP9Luv0MtHlUP7WPnNaqaChUqVKg2kJ171IN71dKCkxK59sNs302iUKhQoTRt3y3atz5H67yMdFPTW2fRvKRSTx5Q83Ns360SFSpUqIT1m+X8nepHt9M6rv4HTG2hj6qmqlSowYT6wW2sLPmpWpxXD+3jkj2qOhUqVKhQbcCua9RDe1l4ht0f5DWXqpWRGo0Y9ypRSlVTd92ifetztM5pSDc1vXUWzcupUocPMj/H9t0kBEEQTG3i4rdrEztUt4Zxr/ow7lG0xuJRdeeXUJ5Vx+fVQ/vk4j1U56QgCKqTS9+lzn2L6tep0YjRWK2MGI3VaKT6qHu/qt1xI61zmtKtm75gFs3pqOKpg+ronNq2W/VRoUKFCoZr5DXnMe7V4qJaXmbcqz4o9X9v4Nicv2ZpXh3cp15/tapOhQoVKlQws1E2bKCPWllRKyPSq8GQ+/+CfTfRmjOQbmr91lk0p6146mHm59h2GUEQBHFCsX5KNm+WDRuYmmLNJLfdwI/vQ/m5jh/j4F287kragBRBEATVmFonGzbIxk3MbOCBb3DnF6jmDKWbmr5gFs2ZqGLuEebn1IWXqUSFChUqVKhQSiV87dM8+n2qvKSleR6+W110pWoDFSpUqFChQoVC3XsL372Ras5Cuqn1F8yiOWPFTx7hJ4+prW9W1VSoUKFCpVg6Jl/7NI/vRzktS8c4uFdd8CY1MaUSFSpUqFDB3pvkri+hOUvpptafP4vmbB15nB99g36sJtZRA0YrcuQJ9t8m3/wMRw85Y8sL/OjrcuxpJtapbkjfy7GnOfA9+eZneORuqrwCqS3nXzFC5xULfU/rEPqe1nlV9GOqUUU/phpVXgXjgcSrphqJk6qReFVUc1JCNSclXg3NKjeQWM0GsboNiNVsIFa1AenRWZ36QXgM261Oh7q1615zJS6zOn2p4QbE6hPc0HArPm/1+SJu6RYXDlm77jVfwftxvtXhLnxo7vA9xzonLC4cWli77jWfwy68AeUXU/BFfGju8D2HnFCeY/OWtxSuw8fwLpyH5m+2HofwddyAW+YO3xM/8/8BSHXLEHo7BSYAAAAASUVORK5CYII=",deepLink:"infinity://"},{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAN6ElEQVR4Ad3BC3SW9X3A8e/v/7yX3IAQCLdwhyCKGlARRBRorbdZaWu1lx27Xlydp+txW1vtXLs2nh0723o6e13VdhU7dahzFdGCchOEAAICohAScg/kfnnzXvI+z/P/7U0lPVlGIIE31O3zEYaZqoI2OerlTLfqzzJGJnmJ7rxAOJiFVZP0bTJkJKJOoEGUanGkFMdvhxGICMNNSDNVhY62IBnBpSpcD+5SVRagZINyRiIKUilGSnDZJMZ5lYycWhFhOAhpoloBfv6Vat0vqdXbUB1DOohYEXbiOE+JJJ/GjO0QEdJFOEdquyQRdz8WDsj9av1FDCeRTjHBXx1vbPnhpIJd9SJ3cK6Es6SqqI0tU899BOtfzvkkEhcn9KgY7yFxciOcA+EsWK87Dxv7kfr2TkD4UxFTK478tQRG/U5EOBvCEKgqfjK2QrR7FaqT+YAQE3wiltR7c0aMijFEDoOkWoF6oW/gJ54EcvkgUXtZKCC3fLf4W+uKH3yonSFwGAS11vG73V9i7TcBwweR6gTr+5/+bvHfbC5+8JF6BsnhDDQRDagXexrkc3zACeSgwU8X33//tuLvPVzNIDichlrfqO3+jar/Gf7vCKsjnywu/vbrxQ8+VM8ZOAxAVfGT7Q+j/j0MM5vsRpwAaRS2vr+y+MFvvVD84PfaOQ3DAGyy689F9RsMIzfSRndLA1UvPkW6CYy3rn0x2R3P4jQMp6Be9wVY95cMM7ezDT/RRe3a1cSO15B26hcFSD6qqgzE0I/aSMB6sadAszlPrO9R/uSPGQ5qvbvUi6xkAIZ+1NevonYh51nr/t207HmT4aC+9zP14yM4BUMf6sfHqe99hz+R8qd+hnoeaadaoL77gOpq+jOcpKokE7EHUB3FeeDFuvBiXfQVb6in9vfPMxzUevdGI9dNoh/DSWqTEwKOfJnzpOLZx/DicfqrfvEp3K5O0k41MyvD+bqq0pehl9/1V6hmch50lr1L/WsvcSpeLErVC79hOKj1v4StG0UfhhS10YBauYvzQK1P6eM/BFUGUv/6SySajpN2qiPVjvgsfRhS1Pc+jGoB50Ht2tVEq49xOup5VD73a4aD+v6dqkovo6rg2ds4DxJNJ6h6/jcMRuO214nVVZN2yiKiHZM5ydDUKCp6M+fB0V//CD/ZzWCoKlX/+STpp0aN3sRJhrwRc1AKGGZNJZtofXsnQ9G0YyPxEzWknWNWqCo9jNrkYlCGkxfrouzJnzBUqkrNmv8g3VTtYminhwEpYphVPPsYyfZWzkbD1nW4kQ7SS6fjB3JJMVh7AcOo8+gh6l9fw9myrsuJTWtJK1VRnzmkGIWpDBP1fUof/yGoci6Ob3wZVEknC1NJMaDjGSY1Lz9DtKaCcxVvqKf93X2kk7H+eFIMMJJhEG+oo+qFVaTL8U1rSSdfdQQpBtUQw+DoE49g3STp0rxrK148Sro4jgmRYgBLmjW88Xva3tlLOlk3SVPJJtJGxJJiEBMjjdxIO+VP/Zzh0LjtddLFT7oxUgxoK2lUvupnuF2dDIf29/aT7GglHZxQqJUUA1LHIFlrUQbWdmA3Ddte438TQAABBBAQ+hAGRZWW3dtIB1XqSQkI5phil3AG1lruL/457ZEY//T3dzE+P4/+wmPGMf87P+Z/EFKEPxAQThIwoRA9ir79I1BlMMKjx3LuBEHKSQlgvEP4nFYy6fL14l+wbssuetz02fv4yuc/zp133EAoGKCXk5FFtPYYg9Xd2kCPcN54BkVh5OyLOGdCVIKRSlICSOgtSDKQxuZ27v2HR9l76Ci9ovEE3//FM6x6fh1f/PTNfPKjy8jOyiQ0egxNJZtpKtnCcJj9hXsxwSBDYa3ltS17eOfdMv72nk9hjCFlHzLBJyUgSd2pjrioBuln85v7eOCfH6elrZNTOdHUykM/+S3/8thzXL98ITcsX8hVf/lNUEvTzq2k0+zP30vB9R9nMKxV9h8qY/2W3bz82nYaW9rpUd/QwsP/eA/BYHibiNAjQDQRkVGh7ar+Mk5qaGrl+z99hpc37GAwYt3d/Ne6bfxu3TYcY5hXOJWrE1nMz4iRDi9E80luOMYFFauZUjCO/DG55ORk4WDw1CcSidLY0k5VbQOHj1ax/1AZXfEE/b28sYSW9ghfu/v29ZwkpNhE+9+p+o80NrXx62de4ZkXXyfhuvQwIiiKtSACRgQFVJXTcUS5e0wr8zPjnItn23PZGMmhPxFSBFRRhkJa4k2HJ9ZVH3NJCZCy6ulnV+8+WPf998pqnDmzp3PNVQvooVZRAd9TMsLg++C6EAg6gI+Ig7VKIGA4VlVHWUUNyvt8FX7Zksfn89qYGkpyNkrcsTiXXc0NpIhQXllLWUUNiKBKijJUin2+rvqYy0kBepi5tT4n1o8ckXPTpq07sYAqgyICapUZUydx3bLFiCrGMRyrqqO0vIpfteQhDJ1y0pad/IEqs2ZM5vrlV4EqIhBLJDlaXkV9YzOO46CqnEnCDf4bfQgnTbtk5U3BUPIV0kGVGVMLuGDWNKwq8USCnXvfIel6pI0qmeEQhbOmM3H8GHzf8j5FRFCrBEMhPN9HfZduV/HV7nzj1R2LKys300s4KTD/MpnmjNsryHzOgghY35I/ZjSTC8YzJncUoVCIZLKb7KxsFl5xCQcOHKa5rR0siAHHOPjWJxwOknQ9GpvbqKiqIxKNImI4WyKCquK7HggEwyFCJkA4y3xiz8YXX6QPoY+pl3/01hDe7xgEVSU/L5eLLyok6Bh6iDE0t7RRU3eC5tZOPM8lEAzSQ1XpTwQEwfU8Ao7D+Pw8ZkwrYGRODmotCBw6coza442ICOfG7Kn0Wei9vVbpI0AfsUT1S8HgxI3iyIc4BccYFi6Yx6gR2YDQ3NLG9p37SHo+p+IEAqgqA1EFRXEcBwVONLVyoqmVXgJ87o5b6IrGiMYSHK2opryiBkQYIk3GE1/z3t2g9CP0M6Xo2gvDgex9QJgeqswtnMGMKZPwrWXX3ndoj3QhAoKgpKiipN81VxbR1NbJ4aMVqCqFM6cyZ8YURAxbS/bSGY0xGKr+qvLwlL9gx6/oT+jv9tuZVRa7LxDg4aWLFpCdmUEymcQ4BmsVARQLOCjvM6KoVUSEHj5wtKySmvoGEGGoFLhpxVW8d7SSqtrj9DU2L5eii+bQnXQZNSKbg++VU11/nIEI1HZ1ZRcdP/J8K6cgnMLd93zFXLH42nVHSyuv64onKK+qpbyiBjEGVeVMHCMUzpzOtMnjQZWE67HzrYMkkknOJOA4rLxxGZve3ENrewd9BRyHlTcu5/mXNyACqHLpRYVcueASXt24jboTTfTj+9Z+pGLfuk0MQBjAvKU35yei/i4xZjrnKBwKseSKS8nMCHO4rJJj1XWcSu7IHK67djFr1m2h23XpS4DbbrmONes20+169LrmyiKq6hoZm5dLwYSxbN25j/bOLnq4ycR9Eqn4QWVlJQMRTmPCrI9cnJMbeAMYTTqoMrdwJrOnFVBaUU3psWp6zZ09nakFE1i/pYT+FFh54wq2vLmTjkiMXpdfOpdorJvDZRX0EOCaxZeRGQ6xedvbj3eM9b5c+8oaTsfhNLrajjVOnFH4hu9zBxAmRQRUwXoWtRaL4DgGYRBEaG5tp7SimrGjc7l64Xyam9tZumgB8XiCHXsO0J8RuO3mFWx+8y06IlF6zb+oEAEOHi6nr6ra4zQ2Na1+4tEHvvjIfd9QzkAYhE996atXjcoZvTZgzGirihEwThAERC1J1wUMxoAxhtb2CAcOHSHpeigDK5iQzyf+7MOsWr2GjkiU/jJCIT56wzJe3bCNrlicXpfOLSQUNLx18Aj9+RL87fjM6BdKtm7wGARhkBbfcvvFTfWda0TMdE5DVckbNZKii+cQCgYQMZRVVFNWWYuI0CM7K4PlS66gsamV3fsPAUJ/UyaO4/KiC1mzfiu+tfS6/JILAGXPwVL6s+r+oK3KfrOtZaNlkIQhmHHhsnwysp52DNcxWKoUzpzKzOlTCAUcfN+SSCTZsmMPvlr6U4VrFy3A8z127DlIX1cvLKKto4t3S8vpJxpL2rtDGa3/Xrl7N0MhDFHBkmtNOJH5dSPmQSDMIMyYMomL5syksyvKm7vexqpyKuPGjmbpwgVs27WPxpY2eglw04eXcuhIOVW1x+lL0d3GDd159MBLRzgLwtm4/XYmVMcvzEqYn5qA+yFOIRQMsGRhEVkZGVTU1PFeaQWIcCrhYJAVS6+kIxJh++4DiPBHeaNGsGLpItZv3k4kGuOPNNDRnbTFMXPiJy0H9nicJeEc5M6YQzB/zq0jfa9YkPkoFM0rZNL4fJKux/bd+4l3dzOQjFCIa6+6DBQ273iLpOvxR6osvryIzIwQm7a/RR/xOP5j3SbwUPPuVxo5R0IaBJYslWmJSTd+8uZFX92xd//19Q1NDgNRZea0ycydPZ3uZJI3Svbheh59TRw3lsWXXULJ3gMcb2zhfVLneYEnWqIj/jWyIHmC554jHYR0Gnkr4yc0TM4MmDska9StjsoSgaAIzJs7m4IJ+QhCeVUtpeVVIEJf2VkZLF+ykKamVnbtP0RKXbdNvOIkEi90BXI2NB98zSPNhGGSPXEiubnTRnzuMx9bNH3yxCtWPbN2XkNL50zEFACjQTMBA7jhcCiy8sblDR0dsepX168/4pnAft/rLIn62aXthzcr/1/kXng15OQzadZCcifPkbyCQpORP5fr77qLd8rKgHmcb/8N3VaULP16cD8AAAAASUVORK5CYII=",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://"},{key:"atomex_desktop",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE6UlEQVR4AeXBe0xVdQDA8e/53XNFQFJ5e0NAAUXeMQHJByo+cM6Z+WrO0h66uelEatl0U9egnDa1rczN1eq/Mg39I8WQphYOo4z54K0Cgl6eQy6IXO49J/2DZk3k4r0c2c7nI6mPoGMCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc7JvCD1ZgslpWasNoXJE7yJjvDjRZDRWGt7NzsPnCfv4k1UlX/FTPJj//Z0osJ90ZJAQ5YuK6u35nLmwk1Ulf+4XtnMii0nuFHVgpYEGjr4zWWqatroT9eDXj7cV4CqohmBRux2lR/zyhnI9cpmSqub0YpAI+aWTjo6e3BE5e02tCLQiFEWOMpoNKAVgUb8fTwJCvRiIJIkkTAlAK0INPTeqgQGsmhWGEGBXmhFoKF1y+JYPCec/kSEepOTlYaWZDQkhMQXuxaSHGvi6LES6s0dPDbay40VGVPY9nYyXp4j0JKMhn46W46/jyfrl8exbnkcza0PsNnsBPiOwmCQeBEEGjl/uZb39xZQeKWexyTA38cDU4AXBoPEr0U1HPr2D7Qm0ECD2UJmdj7R4b5krk/iacpvtvL5d8XUmzvQkmCIWXvtbNqdh6KqfPXxItxGyDzN6wsikSSJY2fK0JJgiOUcLuRqRRMHd85n/LiX6E+gnydpycEcP1OOoqhoReBCPVY795o66bHa6GNXVLZvnEZ6aigDWb04ioZGC7/9eQetyLhA3d37fHLkEgWXarD22jHKgtkpIezYNJ3sbWk4Kj01FN+xHuT+UkFacjBakHFSxa1WVm3Npb3jIX16bQr5hbcpKmng+0PLiJnkhyOMsmDf9rnIBoFWBE5QVcj69BztHQ95GkuXlczsfBRFxVHpqaGkJQfTR1FUhpKME65VNHG9splnqapto/jaPVLiTTjC2mvnh59Lyc2vpLSqmZ5eOwE+nsxMGs+7KxOInOiDK8k4oaq2DUdU17aREm9iIHV377Nh52nKb7XypHvNnRw7XcaJsxVkvZPM5rVTcRUZJ3i4G3GEx0gjF4vrOHWukplTg5mVNB7vMe48qbW9mzcyT9LQaKE/drvC/qNFGIRg05pEXEHGCUmxJoyyoNem0B+DkEhJMHG1vImLxXc4nleOEBLxkf7MTglhydwIwoLHknO4kIZGC4747OsiFsyYQFjwWJxl2PMIz8nD3UhHl5UrN8z0Z+3SWJbOm0R4iDcbViUwf8ZETH6jqLvbwclzVZRVtzBnWggf7C1AUVUcoSgqSBJzpoXgLBknfbQxlbb2bk6cLef/lsyNYNfmGfSRJImYCD9iIvzY/OZU7lt6UBSVS3/XY7MrDEbhX/W4goyTZFlwYMc8Vi+O4vSFaszNXfj7eJAxK4zpiUE8y2gvNx5rbOlisBpbOnEFGRdJiTeREm/ieXi4GxksT3cjriAYBmIn+zNYsZP9cQXBMBAV7suUMF8GY3lGJK4gGAYkYPeWmQgh4YhXE4PImDkRVxAME6mvvExO1mwMBolniY7w48s9C5EkCVeQGUbWLIkmIsSb7MO/U1LWyJM8PYy89VosW9cl4z5SxlVkhpmkuHGcOrKSmvp2blS10N1jY5z/KBKjA3F3k3E1mWEqNGgMoUFjGGoCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc79A200jdqC2KUJAAAAAElFTkSuQmCC",deepLink:"atomex://"}],SO=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHNklEQVR4Ae3BbWyUhQEA4Ofevg0f7d0RsAllEJSpQVy1K3SQIQro2HRoVIymS/Zj6w8xfk6NWzRzoJkO48d0MUaTZv6yMRFNxM2EIX4wIthSUJERgrCmjHZWCXdXapsWbgk/iLbvlXuPsgHjeZx11ln/1xJiaGjMV+NazMU0lDs1DKADm7GmuSnRqUgJRWhozF+AR7EMoVPbIFbjoeamxOeOI+E4Ghrzy/EMxjq99OGe5qbEi0ZQZgQNjfk/4HGETj8hltbUrRi3fevKdQooU0BDY345Hnf6u6ymbkXX9q0rt4gQiNDQmL8Azzhz/LGhMf9dEQLRHsVYZ46x+L0IgSEaGvPVWObMs6yhMV9tiNBw1yJ0EiQSVJ1D9WQmTmDsGEf19XPgIJ1ddH9JPu9kCHEtXvINoeHmGkXl5cyppb6Oiy8iWWlE2Rw7dtLSRus2BgaMprl4yTeEhptmFIwfz9VXsWQxyUpFSyWZV8+8enI9rF3P2+vo7TUaphkiNFy5IowZwyWzSCbZ287edsdcMZ+Gm0glnZBkJcuu40eLeOU1PtjomPOmM+Ncsjk+/Yy+fsUoN0SoBOfP4L7bSacds6mFtev56Y+ZXWtUpZIs/wX13+cva/nJlfxgtmMyGZ56nt17xBaKacwY7ruddNq3zKtnXr2TanYts2sNk05z3+3c8yD9/WIJxXTJLNJpJ+RQL51dZHOOSiWpnkzFeCVLp7lkFi1bxRKKadw4Jen+inc30NrGvv0iTZ3CnDoWLaBqktjGjRNbKKb2DrH0HOLV13lvA4ePGNG+/ezbz5q/snABt9xIZYWitXeILRBTewd/36QoO3fxwMO88z6Hjyja4SO88z4PPMzOXYqycTPtHWILlODFP/PxdiPa8jGPPc3BjJIdzPDY02z52Ii2fcoLTUoSKMHhw3T8S0E7d/HsCwwOOmGDgzz7Ajt3KWjffo4cUZJACcrLWThfpJ5DPPcig4NGzeAgz71IzyGRLv8h5eVKEijBnFoqK0V69XUOZhQlnSKVVJSDGV59XaRUkjm1ShIqQX2dSN1f8d4GI0qnuGEp8+pJJR2VzbGphTfeIpNV0HsbuO4aqiYZpr6OD1vEFogpkeB7s0R6dwOHjyjo/BmsWsmSxaSSjkklWbKYVSs5f4aCDh/h3Q0iXXwRiYTYAjFVnUNlhUitbQpKp7j/TlJJBaWS3H8n6ZSCWttESlZSdY7YAjFVTxbpUC/79ivohqWkko4rleSGpQrat59DvSJVTxZbIKaJE0Tq7DKiefWKNq/eiDq7RJo4QWyBmMaOESmbU1AqSSqpaKkkqaSCsjmRxo4RW+C/IJFwygrE1NcvUiqpoEyWbE7RsjmyOQWlkiL19YstENOBgyJVTzaiTS2KtqnFiKoni3TgoNgCMXV2iVQxnqlTFPTGW2Rzjiub4423FDR1ChXjRersElsgpu4v6Tkk0pw6BWWyPPknsjkFZbI8+ScyWQXNqRMp10P3l2ILxJTPs32HSIsWUBYoaPcefv071q4nm3NMNsfa9fxmBbv3KKgsYNECkT77B/m82EIlaGljXr1hqiaxcAHvvK+gTJaXX+HlV0glHZXNKcrCBVRNEqmlTUkCJWjdRk+PSLfcyIS0omRzZHOKMiHNLTeKlM3Ruk1JAiUYGOC9jSJVVnDXrYShUROG3HUrlRUifbCRgQElCZSgLGDqFAXNvJC7byMMnbAw5O7bmHmhgqZ+hyBQkkAJljdSW2NEsy/lwXuZkFayCWkevJfZlxpRbQ23NSpJIKbp05g/V1FmXsgTj3DlFZQFilYWcOUVPPEIMy9UlPlzmT5NbKGYpk8TS2UFjT/numt4dwOtbezbL9LUKcypY9ECqiaJbfo02jvEEorp66+VpGoSN1/PzddzqJfOLrI5R6WSVE+mYrwT8vXXYgvF9MkOMhnSaSWrGM/5M4yqTIZPdogtEFN/P089TybjWz7awiNPsGWbk2bLNh55go+2+JZMhqeep79fbKES7N7Drx6k5mJSSfb8k73tjtq5i8vn87ObSCWNimyOV17jg42O2rmL86Yz41yyOT79jL5+JQkNN6AIff20tIn0wUZat3L1VSxZTLJSSXI9rF3P2+vo7fUte9vZ2y6uAUOEhuswCnp7Wf0mb77NnFrq65g1k1TSiLI5duykpY3WbQwMGE0dhggNtxm/NEoGBviwhQ9bSCSoOofqyUycwNgxjurr58BBOrvo/pJ83smy2RCh4dbgeYRGWT7PF9180e1/YRBrDBEYorkp0YnVzjyrm5sSnYYIRPst+pw5+vCQCGUibN+68kBN3YqvsNSZ4Y7mpsTfRChTwPatK1tr6laMw2VOb6uamxKrFFBmBNu3rlxXU7fi37gKodNLH+5obkqsMoKEIjQ05i/Ao1iG0KltEKvxUHNT4nPHkRBDQ2O+GtdiLqah3KlhAB3YjDXNTYlOZ5111llF+A8aUDCF69BprwAAAABJRU5ErkJggg==",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app",limanet:"https://limanet.kukai.app",mumbainet:"https://mumbainet.kukai.app"}}],RO=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAJ60lEQVR4AeXBe2xdd2HA8e/vd865N9f34ce1r+36GcexnTRpmj4S2gbSkbYq64BVTKggJsYfLWxisEkriG4sgECjmjZRVIQ2dTw0aYitaFC2wUYofajQNU3S5uE4sWM7tuPY8eP6Xt/nOfec3zYhT4dbP37XsdM//PkI9b/YwiRbnGSLk2xxki1OssVJ3gYFz6VcpuTwdpDcQLN2gT86/Su6jz1Lua5jz/LoG69wrZjnRjK5AYqeyzdGBvjyxTdYcGzqrCDlbM/lH8Yu8uzVUf6iZx+f3L6boJRsNpNNpIDR1DzfuHSOv50YQkfKsXn83HG+OTLAl/pu45GW7Ugh2Cwmm0ABY+kkZ2aukioWyDg2awlKA3BYMpxb5CMnX+TJodMc7d3Pw83tCAQbzWQDeUoxkpqnf26adLFAJf6gfSd/PXSGcmfSSX7v+PPsidXy2e69fLBlO5aQbBSTDZB1bC4tzDKYnKNQcliPr+6+g72xWv78/AnG81nKnU0n+f2TL/G58yd4rKOXj7XvpGVbFdfLZJ0Kbonx9AKXU/Ncy2VQrEywNgF8pHUHH2ju5OmRfp4cOsO8XaTcRD7LXw6c5IsXTvFb9c18qKWL9ze3U2cFWQ+TCqTtIpOLKSYyKa7lMiilWE3QMNkVT5APh2F6DB0hw+Dx7r18vLOPp4bP8bVL/SSdIuVcpTg2M8mxmUk+8abkcH0T72tq57cTrXSFo+gy0XRiaoKB+WvoCFsB+uIJumvqMaXk9XyGSsVMi8/33MqfdN3M341e4Knhc1wp5FiOozyOzUxybGaSTwFHe2/laO9+dJhoyjo2qxFAUyTGztp6WiPVCCHYCFHT4s+69/Dprt384Opl/v7yAC/OTqFY2Wgugy4TTbZbYjl126roqK6lM1ZLlRVAh6JylpQ80rKdR1q2M5Jb5HsTw3x/coQz6STl5uwiukw02Z6LX1u0htsaW4gEgqwlKA38sq5D1i0RNkzWY3tVlCd69vFEzz4uZlL86dnX+Mm1CZYknSK6JJocz8MvURUhEgiiY3e0Gj/b8/jjM6+SdUtcr55INXfXJfBLlRx0mWgquS5+ppTo2huroy9SzUAmxZLvjA3yTxOXiBgWHgrFrzUGQxyqS/BYRy8HahvQETUt/NKOjS6JppLy8DOlRJcAntx9B+Vsz2PeKbLg2KQcm5RjczGT4ltjg9z18r/x2JuvUPRc1hI1LfwypRK6JJpKnoefISWVeG9TO1/edRu6FPDM5Yt88PVf4CnFaqoME7+sW0KXRIOrFOUMIanUEzv38cMDR+iNVKPrx1PjPD1yntVUGQZ+Rc/FUwodJho85VFOCsF6vK+pnfc2tXM6PU//4gK25yEAKQSuUrw0N8V3x4fwlGLJXw2e5g87+7CkZDlBw6Bc0fMIGQZrMdGglKKcFIL1EsC+WB37YnWU+2hbN7dXx/nkmVdZMl3M88vkNQ7Hm1hOQBiUs5VLCIO1SDQo3kog2Cwf7+yjxgrgd35xgZWYUlDO9RQ6JBqU4i2EYNMYQrBNGviVlGIlEkE5D4UOiQYheAvF5jk2M8lUMY9fZ1WEzWCiQSAop5SiUlm3xJxdRKFYjuN5PD97lc/1v45flWHyrngTK3GVopwhBDpMNEghKOcphQ7b83jm8gWeGbvIm6kkCkWlHuvsJWZarMRRHuUsIdFhokEKQTlXeaxlPJ/ld1/7OadSc6zXzdEavtS7n9UUXJdyQcNAh4kGKQRSCDylWFLyPFaTdGyO/PKnDGXTrNedNfX88MARIqbFarJuCb+AlFhCosNEkyUNim6JJY7rsprP9h9nKJtmPfZEa/lEZy+PdvZiCcla0o6NX9S00GWiKWgYFN0SS4quy0qmi3m+Oz6EX40V4It9+7mnrhFDCJZjCEFzsIp4IEgl5pwifnVWEF0mmoKmBXaRJYWSw0qOzUzieB5+zx24j0PxRjbDVCGPXyK4DV0STVWmhV/GKbKS4dwifr2Rag7FG9ksl3KL+LWGwuiSaIoFt+E3X8izEonAz/E8NtOJhVn8+iI16JJoioeq8Ms5NuligeX0RqrxG84t8tzUGJvh7GKSyUIOvwO19egy0ZSoiiCFwFOKJZfTC+xtaKLc/Q03UWWY5NwSSx55/QU+veNm3lHbgCEESwJC0hOpprMqwnr885UR/ILS4J11jegy0WRJg8ZwlKuZNEsuLcyyp74RIQR+1VaAT3Xt5quDp1lS8FyeHDzNSvZXx/nKrtt4MNGKLsfz+PbYIH73NdxExLTQJalAV3UdflnHZjSdZDlHe2/l7roEuk6l5njo1Z/xlYtvousfJ4a4Usjh99G2biohqUB7rJaQaeF3euYqrvIoF5QG//GOB3i4uQNdCvj8wEn+ZXKUtWTdEl+48AZ+baEw729upxKSCkgh2BVP4Jexi5ydmWI5MdPiB3e+m5/e9QAfuKmTpmAIwdoeP3ecklKs5gsDp5jIZ/H7TPdeLCGphEmFeuoauDA/Q9axWdI/N01LtJr6UJjlPNDQwgMNLfwfxW+at4t8pv843x4bZMlYPsMr89McjjexnBdmp/ja8Dn8usMxHu3opVKSChlCcntTK36eUrw8MUy+5LAWAQhAAAKIB4J885a7qbEC+J1NJ1nOeD7Lh068gKsUfl/fe5CAlFRKsg5t0Ro6qmvxyzkOvxi7hO26VCogJY3BEH5516XcvF3koVd/xnQxj9/H2nfyYKKV9ZCs08GmdqKBIH7JQo7nxwYpuiU22oxd4P5f/SdnF5P47YrW8NSeg6yXZJ0sw+Bw2w4saeA3l8/xXyMXWbSLVEJRRvD/LmRSHHr53zmVmsOvzgryr3e+m4hpsV6S61Ad3Mbhti4MIfFL2wV+MjzAaCqJPoWf4Ne+d2WYgy/9mMFsGr+wYfKjg/fRE6nmephcp8ZwlHvbd/Di+CVKnscSx3N55coIl9Pz3N7YSiQQpBKXcxkefu3n/GhqjHIR0+K5A0e4py7B9TLZAE3hKEc6dvLi+DCFkoPfxGKKyUyaHTVx+uIJYoFtLEcpfsPTI+dZTlMwxHMH7+OOmno2gskGqQ+Fec/2Xl6eGGE2n8XPU4rB5CyDyVkaw1HuuqmDsBWgUnfVJvj+HffSGgqzUSQbqMoKcH9nD7c0NCOFYDnT2UVOTE1QiYCUHO29lRcOvYfWUJiNZLLBpBDsbWimI1bLyekrXMmkKJe2C+h6MNHK39x8J7uiNWwGk00SC27j3vYdzOaz9M9OM5FJoZRChyEEDzW28Xj3Hu6pa2QzmWyy+lCYd7V1kS85jKaSjKbmUSjKmVJyS6yWD7fu4MMtXbSGwtwIJjdIyLTYFU+wK57AVR7l/vudv0PEtLjRJG8DQ0jKRUyLt4Nki5NscZItTrLFSba4/wG5rKPEn6lO8wAAAABJRU5ErkJggg==",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"naan - your portal to web3 ",shortName:"naan",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACDklEQVR4Ae3BMWgTcRTA4d97/aNBI2SpOKmbgjrUBNvBQbsJOggd2sG14NCILg52sEPr3ExZnVwLTgUJggq2TUAwiJNkkapEdAjUoeR5NuAtSe3JUXt5fp9YsWSkZ0Ea9YdErFjaAnIMdlsa9erixOeCmH7j37ilOKc4pzinOKc4pzinOBfY3QdgnZ7rQJ4ho+yuJo36jDTqM8AnhpDinOKc4pzinOJcIHs6XewmAyhcA7nHHgWyZ3t+7fgzBlga/3KaBALZM/Jool0i0sU2H7we/Uhkabx9UQQ1654igUD2HDOzDXbYIjDPDntlRg6EJBTnFOcC6TpnxdI0PSNkQCBdU8AUGaI4pzinOKc4pzinOKc4F4A5BnvHb7YAUiA9L/nF2ALm+BsidWJ3gUAissF/zolRfgycZP+tCJVlIlbLV4EzpGNdJjv3iVjtaAXkAoOtBuAScJb91yRWBEqk4wexMeAyg7UU5xTnFOcU5xTnFOcCB9820KanAORIUeDga8pkZ4yI1fJPgGlSpDinOKc4pzinOBdITKpgX+lLRsFmyZBAcstC5T19GHfOA7NkiOJcIDFrGOUu8Fyo3CBilJ8CV8CUjAkkd4SeHLEckCeDFOcCw+ew1fIn6DnEHwSGz1Vgkz1SnFOcU5xTnFOcU5xTnAvAKtAkubfEXgDfSUTeEKsBLfprEVsDAump/wQutXPS0gaA0QAAAABJRU5ErkJggg==",universalLink:"https://www.naan.app/",deepLink:"naan://"},{key:"altme_wallet",name:"Altme Wallet",shortName:"Altme",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF7klEQVR4AeXBW5DVdQEA4O/3O/+zexYWlEWQe6W4hhJQDBdRCRaMFMfrjICAyjg+ODXm9NDlofGp0pp8sRqnxqeaQqbsMo1O4ziJ17QAwWuikxaKQiIBC8tyzvk1gzM0O8vZ5dz25XxfWCslLSxqcVGLi1pc1OKiFhe1uKjFRS0uanFRi8uMsJCn2EHWQdt0lDj+b8r95I6SikZUZiQVGH8xV9/J3B7GTiCVOfghO57gsQc58AaOGzGZkdJO91Xc/VPOnkgIThk9likzWbSaH93Ku0+jaEREIyFSmMpdDzDuXEIwSAhMmM5Xfkw8y4iJRkKBlbfQNdmwps1iwXXIGxFRswVCgRW3EoJhhcCXNlEebUREzZbjomWcO8MZu3ARUy8mZJouarKUsWIDIThjuYxl60mjNV3UTJGubuZdgaAql15L+3hETRU1USpw6Q10dKpa12TmrSJ0aKqoibLxLF2rJgErbya1a6qoSeIouuczdabaBC6Yz9TZhDZNEzVJMWPlJmLOIKlM7yHee5P33qT3ECkZpK3AF2+iFDRNpglCxvjzmLvUIB/v43f388Lj9O5z0qgJLL6C67/OuHOdEgKXXMsj36fvPU2RaYJUYPE1jDrLAB++y/fWs28n4Rip5KTDe3l8Nzu38u1fMek8p3RNYe4qXvwF6YSGi5qgnGfFRkJwSqnIT+5m33YcIZX8XwlH2L+TB75KueSUGLniNk5kmiJqtDwXLWHSpw2w+2+8vhXHVJT62P00rz1rgAsXMX0echouarByoOc2Ys4A25+jLRlWVmbnswbI2li6jtCp4aJGCoyZxoIrCcEAR3sJwfDK9B02yLK1xDGIGipqpAJL1lAYbZCJEyiXDC9H12RSMsDZ5/D5KwkdGipqpLPoudlpLbqKcgeiygKlHItXE4JBVq6n3KGhogYJBboXMuMipzVxBl++E2OcXiCMZdXXmHyewQKzFjFpJiGvYaIGKXfQs4EYnVYIrPsGX7ydNJ7QTsgRcoQCzuHyW1j/LRXl21m2jnKmYTKNkDF2Cl9YYUjtHdxxH0uu5i8Ps/cVEibPZvkaZl9OLlNRCFxyLb+/l+N9SOqWaYQCC6+hc5xh5TLmLGfOckpFJ+UyZ2zCdD63kr//GkV1ixogFOhZQ3BmUiIlQiREUkJyRmJkxW2UcxoiU6fQxswFzJiFYFjlEm/v5K+P8v52Yp4Z81lyDdO6CdGwZl3C1IXsfQ4ldcnUqYiejeTyhvXRHh76Jtv+RCwRfGL7o/zhPi7fyMZ76BxnSO0dXHYDW3YQjqhLVKexU5i/ihAMae873HMdO35DPIxeUi+pF0dIH/PUz/juag5+YFhLbyI/Ud2iOoQCC66nc5wh/Xc/P1jPgVfRj2SwhGO8s537N3DsiCF1TWLuUmKnukR1OJFn1a2EoKJSkYe+wwcvkfoM7zhvPs+WeymXVBQDq27neE5dolrlOX8Bn5qjopTY9hgv/hJHnbFwlD//nLd2IDm9wKxFTL6AkKlZVKsxrNhECCrqP8aWewl9qneYzT+kWFRRLmP5BlK7mkW1yNFxDotXqygldj3Jnl0oqVo6xhvP8NZLKgqBpTeSdSKoSVSLAguvpvNslSWe3EIsqlk6yNYthjR+CnNXIqcmUQ3CKJatMaSD+3n1GdIJtTvOtsfoPaSiEOnZhIKaRFUKbUy7mPPnEYLTSoltT9B3ACW1K3FoD7ueMqTZS5jQjZyqRVUqB+YtJ8sb0tMPE4+qW+jlqc2G1NbBZy8j5FUtqlJCrt2Q/vkyu18g9atfkZf/yJ5/IKkoC0iqFlUplnj+txzcR0oGSIn9/+LBO0gHkDRE6RgP3sXHH5KSAVLio/fZuZVUVLWwVkqqlTFxNpetY2q3k0pF3n6J5zdz6F0UNVaerm4W38hn5hBzJOx5nWc2859XUFa1TC2K7NvFI69RzDkpJHIJ/Uga7wQHXuPR3ZRyJJ/ISiiirCaZWpXRT2YEJfST0zhRi4taXNTiohYXtbioxUUtLmpxUYuLWtz/AIepoFxQZk61AAAAAElFTkSuQmCC",universalLink:"https://app.altme.io/app/download"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADS0lEQVR4AeXBXWiVZQAA4Gcvh+lYP4xGBBsc7Wal2UyWQ9gWSAYzhSgcgtBUSCwKMfulS2+iG7vJlUGJSzHBqwSLZhAYKgmZNac3tQNbizpTapPJYTun6zGDL/e+dPE9T53aYE2OBTkX5FyQc0HOBTkX5FyQc0HOBTlXkMLpy5TKoireR2+72ApSODjEqR9EtekxetvFFuRckHNBzgU5F6QwUxHdTEUKQWyzc1wqie5Sidk5sQWxHTvH5LToJqc5fl5sQUzXJth3TDJ7j3JtQkxBDLNzfPYdXfspT0mmPEXXfo6cZXZODAVZnf6Rg2csMFPhUonJabfV3caWtRSbCUEm1SqlMie/59ur5ilP0f8Rrx5ldZGGegu89CS9j8qiIKvSJKd+kFlDPYd30dfpjr3yFCcusP0QMxXzTE5zZthtPb1aVkEqh3fR12nR+jo5vEsqQQpPPERfp2j6Ouluk0KQwnOPi27LWikEKRSbRVdslkKQwo2bortxUwpBCmeGRTc0LIUghc8vcHVCNCO/ceKCFIIUKrM8c4Cx6xZt7DrPvk9lVgoFqVyboP0d3tzElrUUmwl1MqnWGP2Tkxd59wuuT0ulTm2wZjFmKlz8lQ+GOHGemvT6Onl5Ax3Laai3GAWL1VBPdxvdbfS2s/MQ1ZokQh2fvEB/t1iCmPq72LdRMq9tpL9bTEFsb29mSUF0Swq8tVlsQWxNjaxZJro1y2hqFFuQQlOj6JoapRCkMFoW3WhZCkFsV8YZGRfdyDjDY2ILYqpW2TNITXw17D1KtSqmIJapW2wbYGhYMl//zLYPmb4lloKsSmV+GrPATIWLv3DkLL//ZYE6PNzCsmZCkEm1ymiZkXFq5jt+jm+G2d5Dx3Ia6i2wqpVisywKsjp9mRc/9Z9seIQD21jZ6o5cGWfPIEPD5vnjb9475V8N7GD3elkEqWxdx5evs7LVHVvRwldvsHWdVIIU7r+Hj3cSgkULgUM7eeBeKQQpbO/hrqWiuXspz3dJIUihY7noOh6UQpBCQ73oGuqlEORckHNBzgU5V5BVTxsDO2SyqlV0q1oZ2CGTnjZZFWS1ooUVLf43xWZ2rxdbkHNBzgU5F+RckHNBzgU5F+RckHP/AKis3ntPQOcLAAAAAElFTkSuQmCC",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIAElEQVR4AeXB3W9b9RnA8e/znHOcOGliO3aiUkLfCyNDLdIkShtKIu2GiwlVbNP2d3C7m11Mu9jlNG2X7AJpm5i0MSGtEpu0ZKhMoxUVsJVBm5emaUtI7DiB+Pjl93uGXRzaDBGGT10kfz4CGD1M6XFKj1N6nNLjlB6n9Dilxyk9LiRBx8cizn7nARChRQAREED4hIAAAiJCiwAiIIAILQKIgHCbCAgg8KtfL7KyWiUpIQk5MRpy7uwQheceQIZSoAICqCAqIAIKiIAKCKACIqACAqICKiACCoiACoiAAipcXdjixd9fJylKAk6Mhpz7boaRwQBWt9jJjN0JX8Bomz6dJ0lKh06MhZz7fpaRwQBUsLUKX4mxO4OpyQJJUjo09VCKkYEAVCBQKMZ8FSLsTuDIwUHG96VJSkiHZpbqEAiI0GQ1B1t12JOipdLA1ipsEz4htAi3CRhNAsJnhNsCRR8fAwMEpifzvPjSdZIQ0qG3P6xTqsFIWkBosWKM7EnRUnP4vyyAN3AG3sAZeA/OwBt4A2eYN3AG3sAZeAPvkbFBZHwIGR2gafp0gRdfuk4SQjrkDV5brvHsI2laRGA9hv3DtGT60FMPghmfy/hixRj/zofY3DoyNkDT1GSepIQkYPZajWcfHQABRLD1KsJn5NE8IgIKiIAKCKACIqACAqICKiACCohApYG/eAt7rwgn94HAkUODjO9Lc/1GhU4pCZhZqEEgoAoqUHdQabDN+D8Z2wYjJNePv7xGmwDTkwWSoCTg7Q9qlKpAIBAIqGLlmG3C7oTbzADhTvLICNQ9rFVom57MkwQlAd7g79eqEAioQCBQrrHN+FL8Wyu4VxfZKTh7jOhn05BP0zY1WSAJSkJm52NQgUBBBdussk3YnYfGC+9gl1f5Mo4eGmR8X5pOKQmZmY8hEFCBQKDhoepoMXanIAeG8XPr4DxfxLht+qkCnQpJyNs3apRiIzeotHjD/3kOUgEEAoFAoBAI9AXot/YiuX7upA+P4K6UsMUN5GiWJlvdwr9xE8IAIkUihVCxSHGlmE6FJMQbvDZf5dnjg+ANf2kF26xCoBApEiqECn0BcjQHqxXI9bPNQI7lQMC/XyQ4mqVJ9qTw7xYhpUgqwFIhpJTnXynxm9l1OqUkaOZqBQz8GzexYkyL8JlAkENZJBVgxZid5FAGUgH2folt/SEyNgAIIBjw/Mtr/GJ2nSSEJOiv727x5qvLUIohUAiA0CDw9KeFb0zkoC/AnEG5CnUPqYA2CRU9lMXPl8EZhELTan4Py//5CCLHC29V+OU/NklKSIL+dbPKE6/wKc+dBlPKyiklcgZmYGDFGNk7SIvQIsdycLWELW4gR7I0/TPo5+wLq9wLSpd8XPNcWIzBeXAGzmOrW2wzWuRYDkTwV0q0nTk5gqpwLyhdNHOlAs7AGTiDlS3aRGjRAxlIKXalRFsuE3FiYph7Qemi2asVcB6cB2dYMYa6o8n4VKTowSy2UAZntE2fznMvKF10frFKrebBeXAenMdWtthJjmWxuseWNmibOpXnXlC6aKtuXFiqgjNwBg2PffAxLcY2OZIDAX+lRNuZkyOoCklTumx2PsacYc5jzrAbH7GTHsggqQCbW6ctl404MTFM0pQum1mogfPgDLxhqxWoOu4SCnIwgy2UwXnapk7nSZrSZa8v16jVPDgPzkPDYzc/AuEOghzJQt1jS5u0TZ/OkzSly7bqxoUbNXAGzsB5bHmTnfRIFlSwuXXazjyZR1VIUkiXjaaV0eMFgskxEAEB6QvBAGGb7B+GSPFz6+i3D9CUy0ScmBjmzXfKJEXpotG0cu57WR5OeSSfRgpppDAAmT4Q7hYqciCDLW6AN9qmJvMkSemS0QHl3A9yPLY3wkoxeGM3cjgLDYdd36Rt+nSBJCldoALnfjjCY3tTECkiYMWYuxj/Qw9nQQSbW6ftzJMjqApJUbrAG6T6FIkUCRVCxVYr7EYeGoJI8fNl2nLZFMcnhkmK0iWzS3UIFcIAQoVSzK5CRfZnsKUNcAZCy/RknqQoXTJzrQaRQqQQKbZRBW9sEz6XHs5A3WPLm7RNTRZISkiXzM7HECqIgADlKo2fX4RIIQogHRJMjqMTee4kh7Lwt2vYQhk5kAGBp5/Moyp4b3RK6ZJbm473Sg6JFDZq+H+vYeUqtlGDrTqST2NrW+wk40MQBfiFMggtI7mI498cJglKF83Mx1gpxl/6ALzRJKEih7MQCFaMsZrjLqEi+4expU1wRpMB05MFkhAAP6ZL1jcbVK6WuVgyLm7AxXXj8ZMFgv4QvIEzNJ9GhlMgAiIgAuUqNreOPpxDMv2IQFwzfveHZToV0kXnF6ucp83T9PgTDU7tD8AbGNitj5EHh7iTHMzArGALZWR/hqanT+VRFbw3OqHcZzPvV6DuoeGh4fA3NtlJxocgUmxxg7aRbMTxiWE6pdxnM3MxNBw0PDQ8rGxh1QZ3CQR5aAh/fRO80Tb1VIFOhdxnry9VqVU9kQBmsFGj/qNZCBVCRUKFVAD9AThP/afnIVRKVWPmj2U6pdxnW3XjwlIVGh5KMbZQhqqDqoOqw6oOnIe4AXUPdU9xo8EzL61z6VadTilfAzMLVSjG2HwZvLGT1R3W8DQVY+OZlze49GGDJIR8Dfz2ckz9lgcMFFAPaqAeVEAFVECFPy3WeWvNkZSQr4HLJcdPSnzKAKNblB6n9Dilxyk9TulxSo9TepzS4/4Lz8MqhS9ENeQAAAAASUVORK5CYII=",universalLink:"https://templewallet.com",deepLink:"temple://"},{key:"atomex_ios",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFIUlEQVR4AeXBfWyMdwDA8e/ze55r6dbW6Ol71cvKVekQZmyGMVtWzMu6YoRI9oeXTWJsppMzr40lnXbxNjYEwZiXKVWtlqMlq5eWVus1nWp7Srz2mHP3LP1DIovq1Z1Hk+fzkQwBJhUdE+icQOcEOifQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TuEVaRUeSo9unfEyGCgquUDBmXOoaE9BY8YWzUldModhcQORJIknThUW8+XXiRScLUFLsuxjNKMRfz9fstM20KdXdyRJ4mnBgUZGjYxjf5YF6/UbaEWgoTkzJ2OKaktdfF9/jVVL5yNJEloRaESWZcYmDKM+XTpHExvTAa0INBIaHEgzf19cEd2hHVoRaOSR3Y6rHj2yoxWBRqqs1ZRdvUZ9VFXl75OFaEWgoaXL11GfHXsOUHa1Aq0INLRszSa27UqnLufOX2LKjLloSZZ9jGY0oqoqO/Yc4Oat25ii2tDM349at+/cZdW6LYyf9C23bt9FS5IhwKSikTHxQ6iyVpN1KA9JkghsGYDBoFBReR2Hw8GrINDIoA/eY03qQvr36UktVVWpslZztbwSh8PBxwPfJ3HGJLQm0EBEeAhrlyVRcKaEeUuW8SydoqNI/GYSkRGhaEnwknl7e7F5TTJCSCRMnMbDh//yLBu37sapqowbNQwtCV6yxeYZdI2NYcLkWVwpK6cu1yqtZBw8wriEYQgh0IrAg7y9vQgLCaJJE2+eUGSZHxYkszcjh/qs3bidiLBgBrzfC60oeECbyHAWzplO3KB+eHkZsNsfk551mFlzf2LqzB9xVVrGIazVNxkdP5iM7CNoQZZ9jGbc0NH0Jof3bqJrbEdkWaaWLAvat2vNmPghZObkUmWtxhVOp5PSC1coOFvCpSv/oAWBGyRJ4rdfFtH8DX+exd/Pl7XLk5CFwFV7M3LIOHiEJ4QQvEwKbuga25EunaN5HlNUW3q93RVLXj6u8PIyMGHMSEZ/FkdsjIkm3l5UVF0nMyeXlJXrOVt8Hk9ScIMpqi2uMEW1xZKXT33aRIazbX0qMaYonhYWEsT40cP5In4oc5NSSfp5FZ6i4IYamw1X3LfZGNi3NwkjPiHzUC4Hso9y4+YtnmYMaE7Gjt+JCAuhLooiM2/2NJxOJ0tSVuMJCm44euwkdrsdg8FAXRwOB5bcfLp1iWFAv96MTfgUh8PJidNn2Z9lYevOfZReuEySeQYRYSG4wvzdV+zem0XpxSu4S5Z9jGZeUI3tAf5+vrzTvQt1+XXdVjb/mUbJ+cukrFjHX+nZlFdU0ToynISRccTGdCA98zCrUxcghMAVsiyolZ5lwV0Kbkqcn0xAi+aM/Xwo//fHzn1MT1zME06nyqnCYk4VFrM4eSXN/P2QZZm+7/ZAURQaon+fnniCgpvs9sdMnDKLtRu3M3zwh4QGB1JprWZnWibZlmM8z+07d6kVEtSShgoOaoknKHiIJS8fS14+L+J+jY2Gqqmx4QmCRuBkQRENdaKgCE8QNAKFRaUUFpXSEBu27MITBI2AqqpMn70Ih8OJK7Itx9mZloknyLKP0UwjUHb1Gtbr1Xw0oA9CCOpy+sw5RoydjM32AE+QZR+jmUbiZEExOZbjRLdvR2hIIE+7d7+GlBXrmTj1e+7cvYenSIYAk0oj1K5NK97qZKJp0yaUX6vieP5pbA8e4mkKjdTFy2VcvFzGyybQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TqBzAp0T6Nx/Vg+o6CnFmfYAAAAASUVORK5CYII=",universalLink:"https://atomex.me",deepLink:"atomex://"},{key:"umami_ios",name:"Umami Mobile",shortName:"Umami Mobile",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://",universalLink:"https://umamiwallet.com/"}];var mn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let yy=xO,Ey=AO,_y=SO,wy=RO;const su=()=>yy,IO=t=>{yy=t},Wa=()=>Ey,TO=t=>{Ey=t},Lh=()=>_y,OO=t=>{_y=t},Xa=()=>wy,PO=t=>{wy=t},xo=new io,Vd=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var os;(function(t){t[t.DESKTOP=0]="DESKTOP",t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"})(os||(os={}));var mr;(function(t){t.IOS="ios",t.ANDROID="android",t.EXTENSION="extension",t.DESKTOP="desktop",t.WEB="web"})(mr||(mr={}));class xi{static getPlatfrom(){return mn(this,void 0,void 0,function*(){return my(window)?os.ANDROID:vy(window)?os.IOS:os.DESKTOP})}static getPairingInfo(e,r,n,i){return mn(this,void 0,void 0,function*(){const s=i??(yield xi.getPlatfrom()),o=e.p2pSyncCode,a=e.postmessageSyncCode,c=e.preferredNetwork;switch(s){case os.DESKTOP:return xi.getDesktopPairingAlert(o,r,a,n,c);case os.IOS:return xi.getIOSPairingAlert(o,r,c);case os.ANDROID:return xi.getAndroidPairingAlert(o,r,c);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,r,n,i,s){return mn(this,void 0,void 0,function*(){const o=yield Cc.getAvailableExtensions();o.forEach(c=>{const l=Vd.indexOf(c.id);l>=0&&Vd.splice(l,1)});const a=[];return Wa().length>0&&a.push({title:"Browser Extensions",type:mr.EXTENSION,wallets:[...o.map(c=>{var l,f,d,I,P;const L=Wa().find(H=>H.id===c.id);return{key:(l=L?.key)!==null&&l!==void 0?l:c.id,name:(f=c.name)!==null&&f!==void 0?f:L?.name,logo:(d=c.iconUrl)!==null&&d!==void 0?d:L?.logo,shortName:(I=c.shortName)!==null&&I!==void 0?I:L?.shortName,color:(P=c.color)!==null&&P!==void 0?P:L?.color,enabled:!0,clicked:!1,clickHandler(){return mn(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,n){const H=yield xo.serialize(yield n()),q={target:Fi.EXTENSION,payload:H,targetId:c.id};st.postMessage(q,st.location.origin)}r(mr.EXTENSION,this)}})}}}),...Wa().filter(c=>Vd.some(l=>l===c.id)).map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!1,clickHandler:()=>{window.open(c.link,"_blank")}}))].sort((c,l)=>c.key.localeCompare(l.key))}),su().length>0&&a.push({title:"Desktop & Web Wallets",type:mr.DESKTOP,wallets:[...su().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return mn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield xo.serialize(yield e()),f=Fa(c.deepLink,l);window.open(f,"_blank"),r(mr.DESKTOP,this,!0)})}})),...yield xi.getWebList(e,r,s)].sort((c,l)=>c.key.localeCompare(l.key))}),Xa().length>0&&a.push({title:"Mobile Wallets",type:mr.IOS,wallets:[...Xa().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return mn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield xo.serialize(yield e());i(l),r(mr.IOS,this,!0)})}}))].sort((c,l)=>c.key.localeCompare(l.key))}),{walletLists:a,buttons:[]}})}static getIOSPairingAlert(e,r,n){return mn(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:mr.IOS,wallets:Xa().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){var s;return mn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const o=yield xo.serialize(yield e()),a=Fa((s=i.deepLink)!==null&&s!==void 0?s:i.universalLink,o),c=document.createElement("a");c.setAttribute("href",a),c.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),r(mr.IOS,this,!0)})}})).sort((i,s)=>i.key.localeCompare(s.key))},{title:"Web Wallets",type:mr.WEB,wallets:[...yield xi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[]}})}static getAndroidPairingAlert(e,r,n){return mn(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:mr.WEB,wallets:[...yield xi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>mn(this,void 0,void 0,function*(){const i=yield xo.serialize(yield e()),s=Fa("tezos://",i);window.open(s,"_blank"),r(mr.ANDROID)})}]}})}static getWebList(e,r,n){return mn(this,void 0,void 0,function*(){return Lh().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const s=window.open("","_blank");e().then(o=>xo.serialize(o)).then(o=>{var a;const c=Fa((a=i.links[n])!==null&&a!==void 0?a:i.links[Rt.MAINNET],o);s?s.location.href=c:window.open(c,"_blank"),r(mr.WEB,this,!0)}).catch(o=>{console.error(o)})}})).sort((i,s)=>i.key.localeCompare(s.key))})}}const pe=(t,e,r,n)=>{const i=document.createElement(t);return e.length>0&&i.classList.add(...e.filter(s=>!!s).map(s=>Zs(s))),r.forEach(s=>{i.setAttribute(Zs(s[0]),Zs(s[1]))}),typeof n=="object"&&Array.isArray(n)?n.filter(s=>!!s).forEach(s=>{i.appendChild(s)}):typeof n=="string"&&(i.innerText=n),i},Qs=(t,e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.length>0&&n.classList.add(...t.filter(i=>!!i)),e.forEach(i=>{n.setAttribute(Zs(i[0]),Zs(i[1]))}),typeof r=="object"&&Array.isArray(r)&&r.filter(i=>!!i).forEach(i=>{n.appendChild(i)}),n},cn=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return t.forEach(r=>{e.setAttribute(Zs(r[0]),Zs(r[1]))}),e},NO=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t.filter(r=>!!r).forEach(r=>{e.appendChild(r)}),e},MO=()=>Qs(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[cn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),Zs=t=>{const e=document.createElement("div");return e.innerText=t,e.innerHTML},Qg=t=>{t.innerHTML=""};var yn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Zg=new tn("Alert"),eb=new io,LO=(t,e,r)=>yn(void 0,void 0,void 0,function*(){const n=()=>yn(void 0,void 0,void 0,function*(){return xi.getPairingInfo(r,(_,O,x)=>yn(void 0,void 0,void 0,function*(){x||(yield el())}),()=>yn(void 0,void 0,void 0,function*(){y()}))}),i=yield n(),s=e.getElementById("pairing-container");if(!s)throw new Error("container not found");const o=document.createElement("span");s.appendChild(o),i.buttons.forEach(_=>yn(void 0,void 0,void 0,function*(){const O=yield Ji(),x=pe("div",["beacon-list__title"],[],_.title),E=pe("button",["beacon-modal__button","connect__btn"],[],_.text),u=document.createElement("a");u.id=`button_${O}`,u.appendChild(x),u.appendChild(E),o.appendChild(u);const p=e.getElementById(u.id);p&&p.addEventListener("click",()=>yn(void 0,void 0,void 0,function*(){_.clickHandler()}))}));const a=(_,O,x)=>{const E=`Open in ${x.name}`,u=x.key,p=x.logo?pe("div",[],[],[pe("img",["beacon-selection__img"],[["src",x.logo]],"")]):Qs(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[cn([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),g=pe("div",["beacon-selection__name"],[],[pe("span",[],[],x.name),x.enabled?void 0:pe("p",[],[],"Not installed")]),b=pe("a",["beacon-selection__list",x.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${u}`],["alt",E],["target","_blank"]],[g,p]),h=document.createElement("span");h.appendChild(b),_.appendChild(h);const S=e.getElementById(`wallet_${u}`),T=w=>yn(void 0,void 0,void 0,function*(){if(w&&w.key!=="Enter")return;x.clickHandler();const v=e.getElementById("beacon-modal__content");v&&O!==mr.EXTENSION&&O!==mr.IOS&&(Qg(v),v.appendChild(pe("p",["beacon-alert__title"],[],"Establishing Connection..")),v.appendChild(pe("div",["progress-line"],[["id","beacon-toast-loader"]],"")),v.appendChild(pe("div",["beacon--selected__container"],[],[...x.logo?[pe("img",["beacon-selection__img"],[["src",x.logo]],""),pe("img",["beacon--selection__name__lg"],[],x.name)]:[]])))});S&&(S.addEventListener("click",()=>T()),S.addEventListener("keydown",T))},c=document.createElement("span");s.appendChild(c);const l=_=>{Qg(c),_.forEach(O=>{const x=document.createElement("div");x.classList.add("beacon-list__wrapper"),c.appendChild(x),x.appendChild(pe("div",["beacon-list__title"],[],O.title));const E=document.createElement("span");x.appendChild(E),O.wallets.forEach(u=>yn(void 0,void 0,void 0,function*(){a(E,O.type,u)}))})};l(i.walletLists);const f=_=>yn(void 0,void 0,void 0,function*(){if(_.data==="extensionsUpdated"){const O=yield n();l(O.walletLists)}});let d;d=_=>{_.data===`closeAlert-${t}`&&(st.removeEventListener("message",f),st.removeEventListener("message",d))},st.addEventListener("message",f),st.addEventListener("message",d);const I=e.getElementById("beacon--qr__container"),P=e.getElementById("beacon--qr__copy"),L=e.getElementById("beacon-title"),H=my(window)?"android":vy(window)?"ios":"desktop",q=e.getElementById("beacon-main-text"),G=e.getElementById("pairing-container"),C=e.getElementById("beacon--switch__container"),V=()=>yn(void 0,void 0,void 0,function*(){const _=r?yield eb.serialize(yield r.p2pSyncCode()):"";navigator.clipboard.writeText(_).then(()=>{P&&(P.innerText="Copied"),Zg.log("Copying to clipboard was successful!")},O=>{Zg.error("Could not copy text to clipboard: ",O)})});let U=!1;const F=_=>yn(void 0,void 0,void 0,function*(){const O=e.getElementById("beacon-switch");if(O&&(O.innerText=_==="none"?"Pair wallet on same device":"Pair wallet on another device"),q&&G&&C&&P&&I&&L)switch(q.style.display="none",L.style.textAlign="center",G.style.display="none",C.style.display="initial",_){case"ios":G.style.display="initial";break;case"android":G.style.display="initial";break;case"desktop":G.style.display="initial",L.style.textAlign="left",q.style.display="none",C.style.display="initial";break;default:if(!U){U=!0;const x=yield eb.serialize(yield r.p2pSyncCode()),E=Fa("tezos://",x),p=wO(E,"svg").replace("<svg",'<svg class="beacon-alert__image"');I.insertAdjacentHTML("afterbegin",p),P&&P.addEventListener("click",V),I&&I.addEventListener("click",V)}q.style.display="initial"}});let j=!1;const y=()=>{F(j?"none":H),j=!j};y();{const _=e.getElementById("beacon-switch");_&&_.addEventListener("click",y)}});let Ay=Qf.LIGHT;const tb=t=>{Ay=t},Q0=()=>Ay,CO=t=>pe("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[pe("div",["beacon-toast__content"],[],[pe("span",[],[["id","beacon-text"]],[pe("p",[],[["id","beacon-text-content"]],t),pe("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[pe("span",[],[],"Open"),Qs(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[cn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),Qs(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[cn([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),Qs(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[cn([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),pe("div",["progress-line"],[["id","beacon-toast-loader"]],""),pe("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),pe("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),BO=()=>pe("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),Qs([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[pe("title",[],[],"beacon_logo"),cn([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),cn([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),cn([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),xy=(t,e,r,n)=>pe("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${t}`]],[pe("div",["beacon-modal__wrapper"],[],[pe("div",["beacon-modal__header"],[],[Qs([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[pe("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),cn([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),cn([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),cn([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),NO([cn([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),pe("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${t}-close`]],[pe("div",["beacon-modal__close__icon"],[],[pe("div",["beacon-modal__close__line1"],[],[]),pe("div",["beacon-modal__close__line2"],[],[])])])]),pe("div",["beacon-modal__base"],[],[pe("div",[],[["id","beacon-modal__content"]],[pe("div",[],[],[pe("p",["beacon-alert__title"],[],e),...n,pe("div",["beacon-action__container"],[],r)])])])])]),kO=(t,e,r,n)=>xy(t,e,r,[pe("div",["beacon-alert__text"],[["id","beacon-main-text"]],n)]),DO=(t,e,r,n)=>xy(t,e,r,[pe("span",[],[["id","pairing-container"]],""),pe("div",["beacon-alert__text"],[["id","beacon-main-text"]],[pe("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet. "),pe("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...n])]),pe("div",[],[["id","beacon--switch__container"]],[pe("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),pe("div",[],[["id","beacon--disclaimer"]],"")]);var Ci=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let Ch,ps;typeof window<"u"&&typeof window.document<"u"&&(ps=window.document);const Bh={},UO=t=>typeof t=="string"?pe("div",[],[["id","beacon--qr__container"]],[pe("div",[],[["id","beacon--qr__copy__container"]],[pe("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):pe("span",[],[],""),KO=(t,e,r,n,i)=>{const s=r,o=n.map((f,d)=>pe("button",[`beacon-modal__button${f.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${t}-${d}`]],f.text));let a=Yg.default.css;i&&(a+=Yg.pair.css);const c=pe("span",[],[],s),l=i?DO(t,[c],o,[e]):kO(t,[c],o,[e]);return{style:a,html:l}},xf=t=>(st.postMessage(`closeAlert-${t}`),new Promise(e=>{var r;const n=ps.getElementById(`beacon-alert-wrapper-${t}`);if(!n)return e();const i=(r=n.shadowRoot)===null||r===void 0?void 0:r.getElementById(`beacon-alert-modal-${t}`);if(i){const o=Bh[t];o&&(clearTimeout(o),Bh[t]=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const a=n.parentNode;a&&a.removeChild(n),Ch&&Ch.focus(),e()},300)}else e()})),el=()=>Ci(void 0,void 0,void 0,function*(){return new Promise(t=>Ci(void 0,void 0,void 0,function*(){const e=ps.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const r=[];e.forEach(n=>Ci(void 0,void 0,void 0,function*(){r.push(n.id.split("-")[3])})),yield Promise.all(r.map(xf)),t()}else t()}))}),Ea=t=>Ci(void 0,void 0,void 0,function*(){var e,r;const n=t.body,i=t.data,s=t.title,o=t.timer,a=t.pairingPayload,c=t.disclaimerText,l=t.closeButtonCallback;yield el();const f=(yield Ji()).split("-").join(""),d=ps.createElement("div");d.setAttribute("id",`beacon-alert-wrapper-${f}`);const I=d.attachShadow({mode:"open"}),P=ps.createElement("div");P.setAttribute("tabindex","0"),I.appendChild(P);const L=[...(r=(e=t.buttons)===null||e===void 0?void 0:e.map(_=>{var O,x;return{text:_.text,actionCallback:(O=_.actionCallback)!==null&&O!==void 0?O:()=>Promise.resolve(),style:(x=_.style)!==null&&x!==void 0?x:"outline"}}))!==null&&r!==void 0?r:[]];let H=a?UO(n):pe("span",[],[],n??"");i&&(H=pe("span",[],[],[H,pe("pre",[],[["style","text-align: left"]],i)]));const{style:q,html:G}=KO(f,H,s,L,!!a?.p2pSyncCode);P.appendChild(G);const C=ps.createElement("style");C.textContent=q,I.appendChild(C),o&&(Bh[f]=window.setTimeout(()=>Ci(void 0,void 0,void 0,function*(){yield xf(f)}),o)),ps.body.prepend(d);const V=I.getElementById(`beacon-alert-${f}-close`),U=()=>Ci(void 0,void 0,void 0,function*(){l&&l(),yield xf(f)});if(c){const _=I.getElementById("beacon--disclaimer");_&&(_.innerText=c)}const F=Q0(),j=I.getElementById(`beacon-alert-modal-${f}`);j&&(j.classList.add(`theme__${F}`),j.addEventListener("click",U));const y=I.querySelectorAll(".beacon-modal__wrapper");return y.length>0&&y[0].addEventListener("click",_=>{_.stopPropagation()}),Ch=ps.activeElement,P.focus(),L.forEach((_,O)=>{const x=I.getElementById(`beacon-alert-${f}-${O}`);x&&x.addEventListener("click",()=>Ci(void 0,void 0,void 0,function*(){yield xf(f),_.actionCallback&&(yield _.actionCallback())}))}),V&&V.addEventListener("click",()=>Ci(void 0,void 0,void 0,function*(){yield U()})),window.addEventListener("keydown",_=>Ci(void 0,void 0,void 0,function*(){_.key==="Escape"&&(yield U())})),a&&(yield LO(f,I,a)),f}),HO={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var Nr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let In;typeof window<"u"&&typeof window.document<"u"&&(In=window.document);const Sy=5*1e3;let Ja,ou,Mr;const FO=t=>Nr(void 0,void 0,void 0,function*(){const{text:e,isBold:r,actionText:n,actionLogo:i,actionCallback:s}=t,o=yield Ji(),a=In.createElement("div");a.classList.add("beacon-toast__action__item"),kh(a);const c=l=>pe("strong",[],[],l);if(s){e.length>0&&a.appendChild(pe("p",[],[],e));const l=pe("span",[],[],[pe("span",[],[],n),i&&i==="external"?MO():void 0]);a.appendChild(pe("p",[],[],[pe("a",[],[["id",o]],[r?c([l]):l])]))}else if(n){e.length>0&&a.appendChild(pe("p",["beacon-toast__action__item__subtitle"],[],e));const l=pe("span",[],[],n);a.appendChild(pe("p",[],[],[r?c([l]):l]))}else{const l=pe("p",[],[],e);a.appendChild(r?c([l]):l)}return s&&a.addEventListener("click",s),a}),kh=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},Ry=t=>{var e,r;const n=(e=Mr?.walletInfo)===null||e===void 0?void 0:e.icon,i=(r=Mr?.walletInfo)===null||r===void 0?void 0:r.name;let s;const o=pe("strong",[],[],i??"Wallet");n?s=pe("span",["beacon-toast__wallet__container"],[],[pe("img",["beacon-toast__content__img"],[["src",n]],""),o]):s=o;const a=t.split("{{wallet}}");if(a.length===1)return[pe("span",[],[],t)];{const c=[];for(let l=0;l<a.length;l++)c.push(pe("span",[],[],a[l])),l<a.length-1&&c.push(s);return c}},jO=t=>{const e=t.body,r=Ry(e),n=pe("span",["beacon-toast__wallet__outer"],[],r),i=CO([n]);return{style:HO.default.css,html:i}},Rr=()=>new Promise(t=>{var e;Mr=void 0;const r=In.getElementById("beacon-toast-wrapper");if(!r)return t();const n=(e=r.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");n?(Ja&&(clearTimeout(Ja),Ja=void 0),n.className=n.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const s=r.parentNode;s&&s.removeChild(r),t()},300)):t()}),qd=(t,e,r)=>{const n=t.getElementById(e);return n&&n.addEventListener("click",()=>Nr(void 0,void 0,void 0,function*(){yield r(n)})),n},Z0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.remove("hide"),r.classList.add("show"))},ep=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.add("hide"),r.classList.remove("show"))},GO=t=>{ep(t,"beacon-toast-loader"),Z0(t,"beacon-toast-loader-placeholder")},VO=t=>{Z0(t,"beacon-toast-button-expand"),ep(t,"beacon-toast-button-close")},Iy=t=>{Z0(t,"beacon-toast-button-close"),ep(t,"beacon-toast-button-expand")},Ty=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.remove("beacon-toast__upside_down"),r.classList.add("hide"),r.classList.remove("show"))},Oy=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.add("beacon-toast__upside_down"),r.classList.remove("hide"),r.classList.add("show"))},Dh=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.contains("beacon-toast__upside_down")?Ty(t):Oy(t))},Py=(t,e,r)=>Nr(void 0,void 0,void 0,function*(){const n=e.actions;if(n&&n.length>0){const i=n.map(a=>Nr(void 0,void 0,void 0,function*(){return FO(a)}));(yield Promise.all(i)).forEach(a=>r.appendChild(a));const o=In.createElement("small");o.classList.add("beacon-toast__powered"),o.appendChild(BO()),r.appendChild(o),VO(t)}else Iy(t),Ty(t)}),rb=t=>Nr(void 0,void 0,void 0,function*(){Mr=t;const e=t.timer,r=In.createElement("div");r.setAttribute("id","beacon-toast-wrapper");const n=r.attachShadow({mode:"open"}),i=In.createElement("div"),{style:s,html:o}=jO(t);i.appendChild(o);const a=In.createElement("style");a.textContent=s,n.appendChild(i),n.appendChild(a),e&&(Ja=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}),e)),In.body.prepend(r);const c=Q0(),l=n.getElementById("beacon-toast");l&&l.classList.add(`theme__${c}`);const f=n.getElementById("beacon-toast-list");f&&(yield Py(n,t,f));const d=n.getElementById("beacon-open-wallet");d&&(t.openWalletAction?d.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()}):d.classList.add("hide")),Mr.state==="loading"&&(ou=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){const P=n.getElementById("beacon-toast-button-expand");P&&!P.classList.contains("beacon-toast__upside_down")&&Dh(n)}),Sy)),qd(n,"beacon-toast-button-done",()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}));const I=qd(n,"beacon-toast-button-close",()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}));I&&Mr.state==="loading"&&I.classList.add("hide"),qd(n,"beacon-toast-button-expand",()=>Nr(void 0,void 0,void 0,function*(){Dh(n)}))}),qO=t=>Nr(void 0,void 0,void 0,function*(){Mr=Object.assign(Object.assign({},Mr),t);const e=t.timer,r=In.getElementById("beacon-toast-wrapper");if(!r)return;const n=r.shadowRoot;if(!n)return;const i=n.getElementById("beacon-toast-list");i&&(kh(i),yield Py(n,t,i)),Mr.state==="loading"&&(ou=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){const c=n.getElementById("beacon-toast-button-expand");c&&!c.classList.contains("beacon-toast__upside_down")&&Dh(n)}),Sy));const s=n.getElementById("beacon-text-content");s&&(kh(s),s.appendChild(pe("span",["beacon-toast__wallet__outer"],[],Ry(t.body))));const o=n.getElementById("beacon-open-wallet");o&&(t.openWalletAction?(o.classList.remove("hide"),o.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()})):o.classList.add("hide")),e&&(Ja=window.setTimeout(()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}),e));const a=n.getElementById("beacon-toast-button-done");a&&a.addEventListener("click",()=>Nr(void 0,void 0,void 0,function*(){yield Rr()}))}),Ls=t=>Nr(void 0,void 0,void 0,function*(){var e;if(ou&&clearTimeout(ou),In.getElementById("beacon-toast-wrapper")?t.forceNew?(yield Rr(),yield rb(t)):yield qO(t):yield rb(t),Mr&&Mr.state==="finished"){const n=(e=In.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;n&&(GO(n),Iy(n),Oy(n))}}),tl=t=>t.length>=12?`${t.substr(0,5)}...${t.substr(-5)}`:t;var bt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const pc=new tn("BeaconEvents"),Bc=5*1e3;var fe;(function(t){t.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",t.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",t.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",t.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",t.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",t.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",t.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",t.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",t.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",t.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",t.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",t.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",t.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",t.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",t.NO_PERMISSIONS="NO_PERMISSIONS",t.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",t.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",t.SHOW_PREPARE="SHOW_PREPARE",t.HIDE_UI="HIDE_UI",t.PAIR_INIT="PAIR_INIT",t.PAIR_SUCCESS="PAIR_SUCCESS",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.INTERNAL_ERROR="INTERNAL_ERROR",t.UNKNOWN="UNKNOWN"})(fe||(fe={}));const af=t=>bt(void 0,void 0,void 0,function*(){let e;const r=[];if(t.walletInfo.deeplink&&(t.walletInfo.type==="web"||t.walletInfo.type==="mobile"&&Mh(window)||t.walletInfo.type==="desktop"&&!Mh(window))){const n=t.walletInfo.deeplink;e=()=>bt(void 0,void 0,void 0,function*(){const i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("target","_blank"),i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}r.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),r.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Rr()})}),r.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Rr();const n=t.extraInfo.resetCallback;n&&(pc.log("showSentToast","resetCallback invoked"),yield n())})}),Ls({body:"Request sent to  {{wallet}}",walletInfo:t.walletInfo,state:"loading",actions:r,openWalletAction:e}).catch(n=>console.error(n))}),$O=t=>bt(void 0,void 0,void 0,function*(){Ls({body:"Awaiting confirmation in  {{wallet}}",state:"acknowledge",walletInfo:t.walletInfo}).catch(e=>console.error(e))}),zO=t=>bt(void 0,void 0,void 0,function*(){const e=t.walletInfo?"Preparing Request for  {{wallet}}...":"Preparing Request...";Ls({body:e,state:"prepare",walletInfo:t.walletInfo}).catch(r=>console.error(r))}),WO=t=>bt(void 0,void 0,void 0,function*(){t?(t.includes("alert")&&el(),t.includes("toast")&&Rr()):Rr()}),XO=()=>bt(void 0,void 0,void 0,function*(){yield Ea({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),cf=(t,e)=>bt(void 0,void 0,void 0,function*(){var r,n,i,s,o,a;const c=t.errorResponse.errorType?rn.getError(t.errorResponse.errorType,t.errorResponse.errorData):new ey,l=[{text:c.title,isBold:!0}];if(t.errorResponse.errorType===pt.TRANSACTION_INVALID_ERROR&&t.errorResponse.errorData){const f=t.errorResponse.errorData,d=t.errorMessages;let I=!1;if(!((r=f[0])===null||r===void 0)&&r.contract_handle&&d&&d?.[f[0].contract_handle]){const P=(s=(i=(n=f[1])===null||n===void 0?void 0:n.with)===null||i===void 0?void 0:i.int)!==null&&s!==void 0?s:(a=(o=f[1])===null||o===void 0?void 0:o.with)===null||a===void 0?void 0:a.string,L=d?.[f[0].contract_handle];P&&L?.[P]&&(l.push({text:L?.[P],isBold:!0}),I=!0)}I||l.push({text:c.description}),l.push({text:"",actionText:"Show Details",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Rr(),yield Ea({title:c.title,body:c.fullDescription.description,data:c.fullDescription.data,buttons:e})})})}yield Ls({body:"{{wallet}}  has returned an error",timer:t.errorResponse.errorType===pt.ABORTED_ERROR?Bc:void 0,state:"finished",walletInfo:t.walletInfo,actions:l})}),JO=()=>bt(void 0,void 0,void 0,function*(){Ea({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(t=>console.error(t))}),YO=()=>bt(void 0,void 0,void 0,function*(){yield el()}),QO=()=>bt(void 0,void 0,void 0,function*(){yield Ea({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),ZO=t=>bt(void 0,void 0,void 0,function*(){var e;const r=[...(e=t.buttons)!==null&&e!==void 0?e:[]];r.push({text:"Done",style:"outline"});const n={title:"Internal Error",body:t.text,buttons:r};yield Ea(n)}),eP=t=>bt(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:t.p2pPeerInfo,postmessageSyncCode:t.postmessagePeerInfo,preferredNetwork:t.preferredNetwork},closeButtonCallback:t.abortedHandler,disclaimerText:t.disclaimerText};yield Ea(e)}),tP=t=>bt(void 0,void 0,void 0,function*(){const{output:e}=t;yield Ls({body:"{{wallet}}  has granted permission",timer:Bc,walletInfo:t.walletInfo,state:"finished",actions:[{text:"Address",actionText:tl(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),rP=t=>bt(void 0,void 0,void 0,function*(){const{account:e,output:r,blockExplorer:n}=t;yield Ls({body:"{{wallet}}  successfully submitted operation",timer:Bc,state:"finished",walletInfo:t.walletInfo,actions:[{text:tl(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>bt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e.network);window.open(i,"_blank"),yield Rr()})}]})}),nP=t=>bt(void 0,void 0,void 0,function*(){const e=t.output;yield Ls({body:"{{wallet}}  successfully signed payload",timer:Bc,state:"finished",walletInfo:t.walletInfo,actions:[{text:`Signature: ${tl(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>bt(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{pc.log("showSignSuccessAlert","Copying to clipboard was successful!")},r=>{pc.error("showSignSuccessAlert","Could not copy text to clipboard: ",r)}),yield Rr()})}]})}),iP=t=>bt(void 0,void 0,void 0,function*(){const{network:e,output:r,blockExplorer:n}=t;yield Ls({body:"{{wallet}}  successfully injected operation",timer:Bc,state:"finished",walletInfo:t.walletInfo,actions:[{text:tl(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>bt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e);window.open(i,"_blank"),yield Rr()})}]})}),$d=()=>()=>bt(void 0,void 0,void 0,function*(){}),_t={[fe.PERMISSION_REQUEST_SENT]:af,[fe.PERMISSION_REQUEST_SUCCESS]:tP,[fe.PERMISSION_REQUEST_ERROR]:cf,[fe.OPERATION_REQUEST_SENT]:af,[fe.OPERATION_REQUEST_SUCCESS]:rP,[fe.OPERATION_REQUEST_ERROR]:cf,[fe.SIGN_REQUEST_SENT]:af,[fe.SIGN_REQUEST_SUCCESS]:nP,[fe.SIGN_REQUEST_ERROR]:cf,[fe.BROADCAST_REQUEST_SENT]:af,[fe.BROADCAST_REQUEST_SUCCESS]:iP,[fe.BROADCAST_REQUEST_ERROR]:cf,[fe.ACKNOWLEDGE_RECEIVED]:$O,[fe.LOCAL_RATE_LIMIT_REACHED]:JO,[fe.NO_PERMISSIONS]:XO,[fe.ACTIVE_ACCOUNT_SET]:$d(),[fe.ACTIVE_TRANSPORT_SET]:$d(),[fe.SHOW_PREPARE]:zO,[fe.HIDE_UI]:WO,[fe.PAIR_INIT]:eP,[fe.PAIR_SUCCESS]:YO,[fe.CHANNEL_CLOSED]:QO,[fe.INTERNAL_ERROR]:ZO,[fe.UNKNOWN]:$d()};class nb{constructor(e={},r){this.callbackMap={[fe.PERMISSION_REQUEST_SENT]:[_t.PERMISSION_REQUEST_SENT],[fe.PERMISSION_REQUEST_SUCCESS]:[_t.PERMISSION_REQUEST_SUCCESS],[fe.PERMISSION_REQUEST_ERROR]:[_t.PERMISSION_REQUEST_ERROR],[fe.OPERATION_REQUEST_SENT]:[_t.OPERATION_REQUEST_SENT],[fe.OPERATION_REQUEST_SUCCESS]:[_t.OPERATION_REQUEST_SUCCESS],[fe.OPERATION_REQUEST_ERROR]:[_t.OPERATION_REQUEST_ERROR],[fe.SIGN_REQUEST_SENT]:[_t.SIGN_REQUEST_SENT],[fe.SIGN_REQUEST_SUCCESS]:[_t.SIGN_REQUEST_SUCCESS],[fe.SIGN_REQUEST_ERROR]:[_t.SIGN_REQUEST_ERROR],[fe.BROADCAST_REQUEST_SENT]:[_t.BROADCAST_REQUEST_SENT],[fe.BROADCAST_REQUEST_SUCCESS]:[_t.BROADCAST_REQUEST_SUCCESS],[fe.BROADCAST_REQUEST_ERROR]:[_t.BROADCAST_REQUEST_ERROR],[fe.ACKNOWLEDGE_RECEIVED]:[_t.ACKNOWLEDGE_RECEIVED],[fe.LOCAL_RATE_LIMIT_REACHED]:[_t.LOCAL_RATE_LIMIT_REACHED],[fe.NO_PERMISSIONS]:[_t.NO_PERMISSIONS],[fe.ACTIVE_ACCOUNT_SET]:[_t.ACTIVE_ACCOUNT_SET],[fe.ACTIVE_TRANSPORT_SET]:[_t.ACTIVE_TRANSPORT_SET],[fe.SHOW_PREPARE]:[_t.SHOW_PREPARE],[fe.HIDE_UI]:[_t.HIDE_UI],[fe.PAIR_INIT]:[_t.PAIR_INIT],[fe.PAIR_SUCCESS]:[_t.PAIR_SUCCESS],[fe.CHANNEL_CLOSED]:[_t.CHANNEL_CLOSED],[fe.INTERNAL_ERROR]:[_t.INTERNAL_ERROR],[fe.UNKNOWN]:[_t.UNKNOWN]},r&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,r){return bt(this,void 0,void 0,function*(){const n=this.callbackMap[e]||[];n.push(r),this.callbackMap[e]=n})}emit(e,r,n){return bt(this,void 0,void 0,function*(){const i=this.callbackMap[e];i&&i.length>0&&i.forEach(s=>bt(this,void 0,void 0,function*(){try{yield s(r,n)}catch(o){pc.error(`error handling event ${e}`,o)}}))})}overrideDefaults(e){Object.keys(e).forEach(r=>{const n=r,i=e[n];i&&(this.callbackMap[n]=[i.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(r=>{const n=r;this.callbackMap[n]=[],e?this.callbackMap[n].push(e):this.callbackMap[n].push((...i)=>{pc.log(r,...i)})})}}const ff={[Ke.BlockchainRequest]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.BlockchainResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.PermissionRequest]:{sent:fe.PERMISSION_REQUEST_SENT,success:fe.PERMISSION_REQUEST_SUCCESS,error:fe.PERMISSION_REQUEST_ERROR},[Ke.PermissionResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.OperationRequest]:{sent:fe.OPERATION_REQUEST_SENT,success:fe.OPERATION_REQUEST_SUCCESS,error:fe.OPERATION_REQUEST_ERROR},[Ke.OperationResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.SignPayloadRequest]:{sent:fe.SIGN_REQUEST_SENT,success:fe.SIGN_REQUEST_SUCCESS,error:fe.SIGN_REQUEST_ERROR},[Ke.SignPayloadResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.BroadcastRequest]:{sent:fe.BROADCAST_REQUEST_SENT,success:fe.BROADCAST_REQUEST_SUCCESS,error:fe.BROADCAST_REQUEST_ERROR},[Ke.BroadcastResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Acknowledge]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Disconnect]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Error]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN}};var sP=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class oP{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return sP(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var ib=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class aP extends oP{constructor(e={[Rt.MAINNET]:"https://tzkt.io",[Rt.GHOSTNET]:"https://ghostnet.tzkt.io",[Rt.MONDAYNET]:"https://mondaynet.tzkt.io",[Rt.DAILYNET]:"https://dailynet.tzkt.io",[Rt.DELPHINET]:"https://delphinet.tzkt.io",[Rt.EDONET]:"https://edonet.tzkt.io",[Rt.FLORENCENET]:"https://florencenet.tzkt.io",[Rt.GRANADANET]:"https://granadanet.tzkt.io",[Rt.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[Rt.ITHACANET]:"https://ithacanet.tzkt.io",[Rt.JAKARTANET]:"https://jakartanet.tzkt.io",[Rt.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[Rt.LIMANET]:"https://limanet.tzkt.io",[Rt.MUMBAINET]:"https://mumbainet.tzkt.io",[Rt.CUSTOM]:"https://mumbainet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,r){return ib(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}getTransactionLink(e,r){return ib(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}}var uf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const zd=new tn("DappPostMessageTransport");class cP extends Cc{constructor(e,r,n){super(e,r,n,ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return uf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>uf(this,void 0,void 0,function*(){zd.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=fn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return uf(this,void 0,void 0,function*(){zd.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return uf(this,void 0,void 0,function*(){zd.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var lf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Wd=new tn("DappP2PTransport");class fP extends hO{constructor(e,r,n,i,s,o){super(e,r,n,i,ke.TRANSPORT_P2P_PEERS_DAPP,s,o)}startOpenChannelListener(){return lf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>lf(this,void 0,void 0,function*(){Wd.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=fn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return lf(this,void 0,void 0,function*(){Wd.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return lf(this,void 0,void 0,function*(){Wd.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Ie=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Lt=new tn("DAppClient");class uP extends GI{constructor(e){var r,n,i,s,o;super(Object.assign({storage:e&&e.storage?e.storage:new QI},e)),this.events=new nb,this.openRequests=new Map,this._activeAccount=new Zt,this._activePeer=new Zt,this.blockchains=new Map,this.events=new nb(e.eventHandlers,(r=e.disableDefaultEvents)!==null&&r!==void 0?r:!1),this.blockExplorer=(n=e.blockExplorer)!==null&&n!==void 0?n:new aP,this.preferredNetwork=(i=e.preferredNetwork)!==null&&i!==void 0?i:Rt.MAINNET,tb((s=e.colorMode)!==null&&s!==void 0?s:Qf.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=(o=e.errorMessages)!==null&&o!==void 0?o:{},this.appMetadataManager=new ZI(this.storage),this.activeAccountLoaded=this.storage.get(ke.ACTIVE_ACCOUNT).then(a=>Ie(this,void 0,void 0,function*(){a?yield this.setActiveAccount(yield this.accountManager.getAccount(a)):yield this.setActiveAccount(void 0)})).catch(a=>Ie(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(a)})),this.handleResponse=(a,c)=>Ie(this,void 0,void 0,function*(){var l,f;const d=this.openRequests.get(a.id);if(Lt.log("handleResponse","Received message",a,c),a.version==="3"){const I=a;if(d&&I.message.type===Ke.Acknowledge)Lt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(fe.ACKNOWLEDGE_RECEIVED,{message:I.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d){const P=I.message.blockchainData.appMetadata;I.message.type===Ke.PermissionResponse&&P&&(yield this.appMetadataManager.addAppMetadata(P)),console.timeLog(I.id,"response"),console.timeEnd(I.id),I.message.type===Ke.Error?d.reject(I.message):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(I.id)}else if(I.message.type===Ke.Disconnect){const P=c.origin===Rn.P2P?this.p2pTransport:(l=this.postMessageTransport)!==null&&l!==void 0?l:yield this.transport;if(P){const H=(yield P.getPeers()).find(q=>q.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(fe.CHANNEL_CLOSED)):Lt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Lt.error("handleResponse","no request found for id ",a.id,a)}else{const I=a;if(d&&I.type===Ke.Acknowledge)Lt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(fe.ACKNOWLEDGE_RECEIVED,{message:I,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d)I.type===Ke.PermissionResponse&&I.appMetadata&&(yield this.appMetadataManager.addAppMetadata(I.appMetadata)),console.timeLog(I.id,"response"),console.timeEnd(I.id),I.type===Ke.Error||a.errorType?d.reject(I):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(I.id);else if(I.type===Ke.Disconnect||a.typedMessage.type===Ke.Disconnect){const P=c.origin===Rn.P2P?this.p2pTransport:(f=this.postMessageTransport)!==null&&f!==void 0?f:yield this.transport;if(P){const H=(yield P.getPeers()).find(q=>q.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(fe.CHANNEL_CLOSED)):Lt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Lt.error("handleResponse","no request found for id ",a.id,a)}})}initInternalTransports(){return Ie(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new cP(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new fP(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const r=Object.create(null,{init:{get:()=>super.init}});return Ie(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(n=>Ie(this,void 0,void 0,function*(){if(e)yield this.addListener(e),n(yield r.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),n(yield r.init.call(this,yield this.transport));else{const i=yield this.getActiveAccount(),s=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),i&&i.origin){const o=i.origin.type;o===Rn.EXTENSION?n(yield r.init.call(this,this.postMessageTransport)):o===Rn.P2P&&n(yield r.init.call(this,this.p2pTransport))}else{const o=this.p2pTransport,a=this.postMessageTransport;a.listenForNewPeer(c=>{Lt.log("init","postmessage transport peer connected",c),this.events.emit(fe.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),s(),n(no.POST_MESSAGE)}).catch(console.error),o.listenForNewPeer(c=>{Lt.log("init","p2p transport peer connected",c),this.events.emit(fe.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),s(),n(no.P2P)}).catch(console.error),Cc.getAvailableExtensions().then(()=>Ie(this,void 0,void 0,function*(){this.events.emit(fe.PAIR_INIT,{p2pPeerInfo:()=>(o.connect().then().catch(console.error),o.getPairingRequestInfo()),postmessagePeerInfo:()=>a.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{console.log("ABORTED"),this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(c=>console.warn(c))})).catch(c=>{this._initPromise=void 0,console.error(c)})}}})),this._initPromise})}getActiveAccount(){return Ie(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return Ie(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=Zt.resolve(e):this._activeAccount.resolve(e),e){const r=e.origin.type;yield this.initInternalTransports(),r===Rn.EXTENSION?yield this.setTransport(this.postMessageTransport):r===Rn.P2P&&(yield this.setTransport(this.p2pTransport));const n=yield this.getPeer(e);yield this.setActivePeer(n)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(ke.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(fe.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return Ie(this,void 0,void 0,function*(){return tb(e)})}getColorMode(){return Ie(this,void 0,void 0,function*(){return Q0()})}getAppMetadata(){return Ie(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return Ie(this,void 0,void 0,function*(){const e=yield(()=>Ie(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(fe.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return Ie(this,void 0,void 0,function*(){yield this.events.emit(fe.HIDE_UI,e)})}removeAccount(e){const r=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return Ie(this,void 0,void 0,function*(){const n=r.removeAccount.call(this,e),i=yield this.getActiveAccount();return i&&i.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),n})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return Ie(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,r=!1){return Ie(this,void 0,void 0,function*(){const n=yield this.transport,i=n.removePeer(e);return yield this.removeAccountsForPeers([e]),r&&(yield this.sendDisconnectToPeer(e,n)),i})}removeAllPeers(e=!1){return Ie(this,void 0,void 0,function*(){const r=yield this.transport,n=yield r.getPeers(),i=r.removeAllPeers();if(yield this.removeAccountsForPeers(n),e){const s=n.map(o=>this.sendDisconnectToPeer(o,r));yield Promise.all(s)}return i})}subscribeToEvent(e,r){return Ie(this,void 0,void 0,function*(){yield this.events.on(e,r)})}checkPermissions(e){return Ie(this,void 0,void 0,function*(){if(e===Ke.PermissionRequest)return!0;const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account set!");const n=r.scopes;switch(e){case Ke.OperationRequest:return n.includes(Sn.OPERATION_REQUEST);case Ke.SignPayloadRequest:return n.includes(Sn.SIGN);case Ke.BroadcastRequest:return!0;default:return!1}})}sendNotification(e,r,n,i){var s,o,a;return Ie(this,void 0,void 0,function*(){const c=yield this.getActiveAccount();if(!c||c&&!c.scopes.includes(Sn.NOTIFICATION)&&!c.notification)throw new Error("notification permissions not given");if(!(!((s=c.notification)===null||s===void 0)&&s.token))throw new Error("No AccessToken");const l=(o=c.notification)===null||o===void 0?void 0:o.apiUrl;if(!l)throw new Error("No Push URL set");return this.sendNotificationWithAccessToken({url:l,recipient:c.address,title:e,body:r,payload:n,protocolIdentifier:i,accessToken:(a=c.notification)===null||a===void 0?void 0:a.token})})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(r=>{IO(r.desktopList),TO(r.extensionList),OO(r.webList),PO(r.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return Ie(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const n=Object.assign(Object.assign({},e),{type:Ke.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",n);const{message:i,connectionInfo:s}=yield this.makeRequestV3(n).catch(c=>Ie(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",i,s);const o=yield r.getAccountInfosFromPermissionResponse(i.message),a={accountIdentifier:o[0].accountId,senderId:i.senderId,origin:{type:s.origin,id:s.id},address:o[0].address,publicKey:o[0].publicKey,scopes:i.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:i.message.blockchainData};return yield this.accountManager.addAccount(a),yield this.setActiveAccount(a),yield r.handleResponse({request:n,account:a,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(n,{account:a,output:{address:o[0].address,network:{type:Rt.MAINNET},scopes:[Sn.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i.message})}request(e){return Ie(this,void 0,void 0,function*(){console.log("REQUEST",e);const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${r}" not supported by dAppClient`);yield r.validateRequest(e);const n=yield this.getActiveAccount();if(!n)throw yield this.sendInternalError("No active account!");const i=Object.assign(Object.assign({},e),{type:Ke.BlockchainRequest,accountId:n.accountIdentifier}),{message:s,connectionInfo:o}=yield this.makeRequestV3(i).catch(a=>Ie(this,void 0,void 0,function*(){throw console.error(a),new Error("TODO")}));return yield r.handleResponse({request:i,account:n,output:s,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),s.message})}requestPermissions(e){return Ie(this,void 0,void 0,function*(){const r={appMetadata:yield this.getOwnAppMetadata(),type:Ke.PermissionRequest,network:e&&e.network?e.network:{type:Rt.MAINNET},scopes:e&&e.scopes?e.scopes:[Sn.OPERATION_REQUEST,Sn.SIGN]},{message:n,connectionInfo:i}=yield this.makeRequest(r).catch(l=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,l)})),s=n.publicKey||n.pubkey||n.pubKey,o=yield TI(s),a={accountIdentifier:yield Th(o,n.network),senderId:n.senderId,origin:{type:i.origin,id:i.id},address:o,publicKey:s,network:n.network,scopes:n.scopes,threshold:n.threshold,notification:n.notification,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(a),yield this.setActiveAccount(a);const c=Object.assign(Object.assign({},n),{address:o,accountInfo:a});return yield this.notifySuccess(r,{account:a,output:c,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),c})}requestSignPayload(e){return Ie(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n=e.payload;if(typeof n!="string")throw new Error("Payload must be a string");const i=(()=>{switch(e.signingType){case ss.OPERATION:if(!n.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return ss.OPERATION;case ss.MICHELINE:if(!n.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return ss.MICHELINE;case ss.RAW:default:return ss.RAW}})(),s={type:Ke.SignPayloadRequest,signingType:i,payload:n,sourceAddress:e.sourceAddress||r.address},{message:o,connectionInfo:a}=yield this.makeRequest(s).catch(c=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(s,c)}));return yield this.notifySuccess(s,{account:r,output:o,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}requestOperation(e){return Ie(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n={type:Ke.OperationRequest,network:r.network||{type:Rt.MAINNET},operationDetails:e.operationDetails,sourceAddress:r.address||""},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{account:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}requestBroadcast(e){return Ie(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const r=e.network||{type:Rt.MAINNET},n={type:Ke.BroadcastRequest,network:r,signedTransaction:e.signedTransaction},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{network:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}setActivePeer(e){return Ie(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=Zt.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const r=Object.create(null,{setTransport:{get:()=>super.setTransport}});return Ie(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const n=r.setTransport.call(this,e);return yield this.events.emit(fe.ACTIVE_TRANSPORT_SET,e),n})}sendInternalError(e){return Ie(this,void 0,void 0,function*(){throw yield this.events.emit(fe.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return Ie(this,void 0,void 0,function*(){const r=yield this.accountManager.getAccounts(),n=e.map(a=>a.senderId),s=r.filter(a=>n.includes(a.senderId)).map(a=>a.accountIdentifier);yield this.accountManager.removeAccounts(s);const o=yield this.getActiveAccount();o&&s.includes(o.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,r){return Ie(this,void 0,void 0,function*(){if(Lt.error("handleRequestError","error response",r),r.errorType){const n=[];if(r.errorType===pt.NO_PRIVATE_KEY_FOUND_ERROR){const o=()=>Ie(this,void 0,void 0,function*(){const a=e;let c;if(a.sourceAddress&&a.network){const l=yield Th(a.sourceAddress,a.network);c=yield this.getAccount(l),c&&(yield this.removeAccount(c.accountIdentifier))}});n.push({text:"Remove account",actionCallback:o})}const i=yield this.getPeer(),s=yield this.getActiveAccount();throw e.type===Ke.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(ff[e.type].error,{errorResponse:r,walletInfo:yield this.getWalletInfo(i,s),errorMessages:this.errorMessages},n).catch(o=>Lt.error("handleRequestError",o)),rn.getError(r.errorType,r.errorData)}throw r})}notifySuccess(e,r){return Ie(this,void 0,void 0,function*(){this.events.emit(ff[e.type].success,r).catch(n=>console.warn(n))})}getWalletInfo(e,r){var n,i;return Ie(this,void 0,void 0,function*(){const s=r||(yield this.getActiveAccount()),o=e||(yield this.getPeer(s));let a;s&&(a=yield this.appMetadataManager.getAppMetadata(s.senderId));const c=o;a||(a={name:c.name,icon:c.icon});const l=(I,P)=>I&&P?I.toLowerCase()===P.toLowerCase():!1;let f,d;if(Xa().find(I=>l(I.name,a?.name))?(f=Xa().find(I=>l(I.name,a?.name)),d="mobile"):Lh().find(I=>l(I.name,a?.name))?(f=Lh().find(I=>l(I.name,a?.name)),d="web"):su().find(I=>l(I.name,a?.name))?(f=su().find(I=>l(I.name,a?.name)),d="desktop"):Wa().find(I=>l(I.name,a?.name))&&(f=Wa().find(I=>l(I.name,a?.name)),d="extension"),f){let I;return f.hasOwnProperty("links")?I=f.links[(n=s?.network.type)!==null&&n!==void 0?n:this.preferredNetwork]:f.hasOwnProperty("deepLink")&&(I=f.deepLink),{name:a.name,icon:(i=a.icon)!==null&&i!==void 0?i:f.logo,deeplink:I,type:d}}return a})}getPeer(e){var r,n,i,s;return Ie(this,void 0,void 0,function*(){let o;if(e){Lt.log("getPeer","We have an account",e);const a=(n=yield(r=this.postMessageTransport)===null||r===void 0?void 0:r.getPeers())!==null&&n!==void 0?n:[],c=(s=yield(i=this.p2pTransport)===null||i===void 0?void 0:i.getPeers())!==null&&s!==void 0?s:[],l=[...a,...c];Lt.log("getPeer","Found peers",l,e),o=l.find(f=>f.senderId===e.senderId),o||(o=l.find(f=>f.extensionId===e.origin.id))}else o=yield this._activePeer.promise,Lt.log("getPeer","Active peer",o);if(!o)throw new Error("No matching peer found.");return o})}makeRequest(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield Ji();if(console.time(n),Lt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Lt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(fe.LOCAL_RATE_LIMIT_REACHED).catch(f=>console.warn(f)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(fe.NO_PERMISSIONS).catch(f=>console.warn(f)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i=Object.assign({id:n,version:"2",senderId:yield ia(yield this.beaconId)},e),s=new Zt;this.addOpenRequest(i.id,s);const o=yield new io().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Lt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(f){throw this.events.emit(fe.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Rr(),this.disconnect()})}]}),console.timeLog(n,"send error"),f}return console.timeLog(n,"sent"),this.events.emit(ff[e.type].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(f=>console.warn(f)),s.promise})}makeRequestV3(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield Ji();if(console.time(n),Lt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Lt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(fe.LOCAL_RATE_LIMIT_REACHED).catch(d=>console.warn(d)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i={id:n,version:"3",senderId:yield ia(yield this.beaconId),message:e},s=new Zt;this.addOpenRequest(i.id,s);const o=yield new io().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Lt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(d){throw this.events.emit(fe.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Rr(),this.disconnect()})}]}),console.timeLog(n,"send error"),d}console.timeLog(n,"sent");const f=e.type;return this.events.emit(ff[f].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(d=>console.warn(d)),s.promise})}disconnect(){return Ie(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,r){Lt.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,r)}sendNotificationWithAccessToken(e){return Ie(this,void 0,void 0,function*(){const{url:r,recipient:n,title:i,body:s,payload:o,protocolIdentifier:a,accessToken:c}=e,l=new Date().toISOString(),f=yield this.keyPair,d=f.publicKey,I=Buffer.from(new Uint8Array([13,15,37,217])),P=Yr.encode(Buffer.concat([I,Buffer.from(d)])),L=["Tezos Signed Message: ",n,i,s,l,o].join(" "),H=Xi(L),q="0501"+H.length.toString(16).padStart(8,"0")+H,G=yield NI(q,{secretKey:Buffer.from(f.secretKey)});return(yield tu.post(`${r}/send`,{recipient:n,title:i,body:s,timestamp:l,payload:o,accessToken:c,protocolIdentifier:a,sender:{name:this.name,publicKey:P,signature:G}})).data})}}let is;const lP=(t,e)=>(is&&e&&(is.disconnect(),is=void 0),is||(is||(is=new uP(t)),is));function wi(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}class sb extends Error{constructor(){super("You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"),this.name="BeaconWalletNotInitialized"}}class dP extends Error{constructor(e){super(`Required permissions scopes were not granted: ${e.join(",")}`),this.requiredScopes=e,this.name="MissingRequiredScopes"}}class hP{constructor(e){this.client=lP(e)}validateRequiredScopesOrFail(e,r){const n=new Set(r);for(const i of e)n.has(i)&&n.delete(i);if(n.size>0)throw new dP(Array.from(n))}requestPermissions(e){return wi(this,void 0,void 0,function*(){yield this.client.requestPermissions(e)})}getPKH(){return wi(this,void 0,void 0,function*(){const e=yield this.client.getActiveAccount();if(!e)throw new sb;return e.address})}mapTransferParamsToWalletParams(e){return wi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Zo(this.formatParameters(r)))})}mapIncreasePaidStorageWalletParams(e){return wi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield ta(this.formatParameters(r)))})}mapOriginateParamsToWalletParams(e){return wi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Qo(this.formatParameters(r)))})}mapDelegateParamsToWalletParams(e){return wi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield ea(this.formatParameters(r)))})}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,r){return e.fee||delete r.fee,e.storageLimit||delete r.storage_limit,e.gasLimit||delete r.gas_limit,r}sendOperations(e){return wi(this,void 0,void 0,function*(){const r=yield this.client.getActiveAccount();if(!r)throw new sb;const n=r.scopes;this.validateRequiredScopesOrFail(n,[Sn.OPERATION_REQUEST]);const{transactionHash:i}=yield this.client.requestOperation({operationDetails:e});return i})}disconnect(){return wi(this,void 0,void 0,function*(){yield this.client.destroy()})}clearActiveAccount(){return wi(this,void 0,void 0,function*(){yield this.client.setActiveAccount()})}}function ob(t){let e,r=t[4]?t[6]?"Congratulations! Please don't forget to disconnect your wallet before you leave":t[5]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.",n,i,s;return{c(){e=cr("p"),n=ti(r),yt(e,"class","textcenter font_8 svelte-2maynr")},m(o,a){rr(o,e,a),Er(e,n),s=!0},p(o,a){(!s||a&112)&&r!==(r=o[4]?o[6]?"Congratulations! Please don't forget to disconnect your wallet before you leave":o[5]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.")&&gc(n,r)},i(o){s||(Vi(()=>{s&&(i||(i=ai(e,ys,{duration:500},!0)),i.run(1))}),s=!0)},o(o){i||(i=ai(e,ys,{duration:500},!1)),i.run(0),s=!1},d(o){o&&Ht(e),o&&i&&i.end()}}}function ab(t){let e=t[5],r,n,i=ob(t);return{c(){i.c(),r=Eb()},m(s,o){i.m(s,o),rr(s,r,o),n=!0},p(s,o){o&32&&fu(e,e=s[5])?(js(),kr(i,1,1,ms),Gs(),i=ob(s),i.c(),Qt(i,1),i.m(r.parentNode,r)):i.p(s,o)},i(s){n||(Qt(i),n=!0)},o(s){kr(i),n=!1},d(s){s&&Ht(r),i.d(s)}}}function cb(t){let e=t[6],r,n,i=ab(t);return{c(){i.c(),r=Eb()},m(s,o){i.m(s,o),rr(s,r,o),n=!0},p(s,o){o&64&&fu(e,e=s[6])?(js(),kr(i,1,1,ms),Gs(),i=ab(s),i.c(),Qt(i,1),i.m(r.parentNode,r)):i.p(s,o)},i(s){n||(Qt(i),n=!0)},o(s){kr(i),n=!1},d(s){s&&Ht(r),i.d(s)}}}function fb(t){let e,r,n,i;return{c(){e=cr("img"),yt(e,"id","image"),yt(e,"alt","visiblr portrait"),ip(e.src,r=t[3])||yt(e,"src",r),yt(e,"class","svelte-2maynr")},m(s,o){rr(s,e,o),i=!0},p(s,o){(!i||o&8&&!ip(e.src,r=s[3]))&&yt(e,"src",r)},i(s){i||(Vi(()=>{i&&(n||(n=ai(e,cp,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=ai(e,cp,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&Ht(e),s&&n&&n.end()}}}function ub(t){let e,r,n,i;return{c(){e=cr("p"),r=ti(t[0]),yt(e,"class","textcenter font_8 svelte-2maynr")},m(s,o){rr(s,e,o),Er(e,r),i=!0},p(s,o){(!i||o&1)&&gc(r,s[0])},i(s){i||(Vi(()=>{i&&(n||(n=ai(e,ys,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=ai(e,ys,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&Ht(e),s&&n&&n.end()}}}function lb(t){let e,r,n,i,s;return{c(){e=cr("p"),r=cr("a"),n=ti(t[1]),yt(r,"href",t[1]),yt(r,"target","_blank"),yt(e,"class","textcenter font_8 svelte-2maynr")},m(o,a){rr(o,e,a),Er(e,r),Er(r,n),s=!0},p(o,a){(!s||a&2)&&gc(n,o[1]),(!s||a&2)&&yt(r,"href",o[1])},i(o){s||(Vi(()=>{s&&(i||(i=ai(e,ys,{delay:6e3,duration:2e3},!0)),i.run(1))}),s=!0)},o(o){i||(i=ai(e,ys,{delay:6e3,duration:2e3},!1)),i.run(0),s=!1},d(o){o&&Ht(e),o&&i&&i.end()}}}function db(t){let e,r,n,i,s,o;return{c(){e=cr("p"),r=ti("Visit the complete Visiblr collection: "),n=cr("a"),i=ti(t[2]),yt(n,"href",t[2]),yt(n,"target","_blank"),yt(e,"class","textcenter font_8 svelte-2maynr")},m(a,c){rr(a,e,c),Er(e,r),Er(e,n),Er(n,i),o=!0},p(a,c){(!o||c&4)&&gc(i,a[2]),(!o||c&4)&&yt(n,"href",a[2])},i(a){o||(Vi(()=>{o&&(s||(s=ai(e,ys,{delay:8e3,duration:2e3},!0)),s.run(1))}),o=!0)},o(a){s||(s=ai(e,ys,{delay:8e3,duration:2e3},!1)),s.run(0),o=!1},d(a){a&&Ht(e),a&&s&&s.end()}}}function pP(t){let e,r,n=t[4]?"Disconnect":"Connect Wallet",i,s,o,a,c,l,f,d,I,P,L,H=t[4],q,G,C,V,U,F,j,y,_,O,x,E=cb(t),u=t[6]&&fb(t),p=t[6]&&ub(t),g=t[6]&&lb(t),b=t[6]&&db(t);return{c(){e=cr("div"),r=cr("button"),i=ti(n),s=Cs(),o=cr("button"),a=ti("Check If Your Visiblr Portrait is Ready"),l=Cs(),f=cr("button"),d=ti("Reveal Your Visiblr Portrait"),P=Cs(),L=cr("div"),E.c(),q=Cs(),G=cr("div"),u&&u.c(),C=Cs(),V=cr("div"),p&&p.c(),U=Cs(),F=cr("div"),g&&g.c(),j=Cs(),y=cr("div"),b&&b.c(),yt(r,"class","font_8"),yt(o,"class","font_8"),o.disabled=c=!t[4],yt(f,"class","font_8"),f.disabled=I=!(t[5]&&t[4]),yt(e,"class","button-container svelte-2maynr"),yt(L,"class","transition-container svelte-2maynr"),yt(G,"class","imagecenter transition-container svelte-2maynr"),yt(G,"id","imageframe"),yt(V,"id","titleframe"),yt(F,"id","linkframe"),yt(y,"id","collectionframe")},m(h,S){rr(h,e,S),Er(e,r),Er(r,i),Er(e,s),Er(e,o),Er(o,a),Er(e,l),Er(e,f),Er(f,d),rr(h,P,S),rr(h,L,S),E.m(L,null),rr(h,q,S),rr(h,G,S),u&&u.m(G,null),rr(h,C,S),rr(h,V,S),p&&p.m(V,null),rr(h,U,S),rr(h,F,S),g&&g.m(F,null),rr(h,j,S),rr(h,y,S),b&&b.m(y,null),_=!0,O||(x=[wl(r,"click",function(){cu(t[4]?t[9]:t[8])&&(t[4]?t[9]:t[8]).apply(this,arguments)}),wl(o,"click",t[7]),wl(f,"click",t[10])],O=!0)},p(h,[S]){t=h,(!_||S&16)&&n!==(n=t[4]?"Disconnect":"Connect Wallet")&&gc(i,n),(!_||S&16&&c!==(c=!t[4]))&&(o.disabled=c),(!_||S&48&&I!==(I=!(t[5]&&t[4])))&&(f.disabled=I),S&16&&fu(H,H=t[4])?(js(),kr(E,1,1,ms),Gs(),E=cb(t),E.c(),Qt(E,1),E.m(L,null)):E.p(t,S),t[6]?u?(u.p(t,S),S&64&&Qt(u,1)):(u=fb(t),u.c(),Qt(u,1),u.m(G,null)):u&&(js(),kr(u,1,1,()=>{u=null}),Gs()),t[6]?p?(p.p(t,S),S&64&&Qt(p,1)):(p=ub(t),p.c(),Qt(p,1),p.m(V,null)):p&&(js(),kr(p,1,1,()=>{p=null}),Gs()),t[6]?g?(g.p(t,S),S&64&&Qt(g,1)):(g=lb(t),g.c(),Qt(g,1),g.m(F,null)):g&&(js(),kr(g,1,1,()=>{g=null}),Gs()),t[6]?b?(b.p(t,S),S&64&&Qt(b,1)):(b=db(t),b.c(),Qt(b,1),b.m(y,null)):b&&(js(),kr(b,1,1,()=>{b=null}),Gs())},i(h){_||(Qt(E),Qt(u),Qt(p),Qt(g),Qt(b),_=!0)},o(h){kr(E),kr(u),kr(p),kr(g),kr(b),_=!1},d(h){h&&Ht(e),h&&Ht(P),h&&Ht(L),E.d(h),h&&Ht(q),h&&Ht(G),u&&u.d(),h&&Ht(C),h&&Ht(V),p&&p.d(),h&&Ht(U),h&&Ht(F),g&&g.d(),h&&Ht(j),h&&Ht(y),b&&b.d(),O=!1,so(x)}}}const tp="KT1MNbfFFqNqDXXdNJ3aUoiiHWazueLArVWB",gP="https://ipfs.io/ipfs/",bP="https://objkt.com/asset/",vP="https://objkt.com/collection/",mP="https://data.objkt.com/v3/graphql",yP="https://mainnet.api.tez.ie";function EP(t){const r=t.token_holder[0].token.display_uri.replace(/^ipfs?\:\/\//i,"");return`${gP}${r}`}function _P(t){const e=t.token_holder[0].token.token_id;return`${bP}${tp}/${e}`}function wP(t){return`${vP}${tp}`}function AP(t){return t.token_holder[0].token.name}async function xP(t){const{errors:e,data:r}=await SP(t,"MyQuery",{});return e?(console.error(e),e):(console.log(r),r)}async function SP(t,e,r){return await(await fetch(mP,{method:"POST",body:JSON.stringify({query:t,variables:r,operationName:e})})).json()}async function RP(t){return await t.getPKH()}function IP(t){return t==null||t.token_holder==null||t.token_holder.length==null||t.errors||t.token_holder.length===0?(console.log("Warning: no token detected"),!1):!0}function TP(t){return t.token_holder.length!=1?(console.log("Warning: multiple tokens detected"),!1):!0}function OP(t,e,r){const n=new cI(yP);let i,s="",o="",a="",c="",l,f=!1,d=!1,I=!1;eE(async()=>{const C={name:"Your Visiblr Portrait Reveal"};i=new hP(C)});async function P(){const C=await RP(i),V=await L(C,tp,1);r(5,d=IP(V)&&TP(V))}async function L(C,V,U=1){const F=`
      query MyQuery {
        token_holder(
          where: {_and: {holder_address: {_eq: "${C}"}, token: {fa_contract: {_eq: "${V}"}}, quantity: {_eq: "${U}"}}}
        ) {
          quantity
          token {
            fa_contract
            token_id
            thumbnail_uri
            artifact_uri
            display_uri
            name
          }
        }
      }
    `;return l=l=await xP(F),l}async function H(){await i.requestPermissions(),n.setWalletProvider(i),r(4,f=!0)}async function q(){await i.client.clearActiveAccount(),r(4,f=!1)}async function G(){r(0,s=AP(l)),r(1,o=_P(l)),r(2,a=wP());const C=EP(l);fetch(C).then(V=>{if(!V.ok)throw new Error(`HTTP error! Status: ${V.status}`);return V.blob()}).then(V=>{r(3,c=URL.createObjectURL(V))}),r(6,I=!0)}return[s,o,a,c,f,d,I,P,H,q,G]}class PP extends lE{constructor(e){super(),uE(this,e,OP,pP,fu,{})}}new PP({target:document.getElementById("app")});export{Rb as a,qE as b,Op as c,KE as s,Hr as u};
