function I2(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function Ka(){}const Rg=t=>t;function Ig(t){return t()}function A0(){return Object.create(null)}function Zs(t){t.forEach(Ig)}function qf(t){return typeof t=="function"}function T2(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let mc;function x0(t,e){return mc||(mc=document.createElement("a")),mc.href=e,t===mc.href}function O2(t){return Object.keys(t).length===0}const Tg=typeof window<"u";let P2=Tg?()=>window.performance.now():()=>Date.now(),fh=Tg?t=>requestAnimationFrame(t):Ka;const Ro=new Set;function Og(t){Ro.forEach(e=>{e.c(t)||(Ro.delete(e),e.f())}),Ro.size!==0&&fh(Og)}function N2(t){let e;return Ro.size===0&&fh(Og),{promise:new Promise(r=>{Ro.add(e={c:t,f:r})}),abort(){Ro.delete(e)}}}function An(t,e){t.appendChild(e)}function Pg(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function M2(t){const e=Sr("style");return L2(Pg(t),e),e.sheet}function L2(t,e){return An(t.head||t,e),e.sheet}function Wt(t,e,r){t.insertBefore(e,r||null)}function Mt(t){t.parentNode&&t.parentNode.removeChild(t)}function Sr(t){return document.createElement(t)}function Mi(t){return document.createTextNode(t)}function Ps(){return Mi(" ")}function Zu(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function Yt(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function C2(t){return Array.from(t.childNodes)}function Ha(t,e){e=""+e,t.data!==e&&(t.data=e)}function B2(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}const af=new Map;let cf=0;function k2(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function D2(t,e){const r={stylesheet:M2(e),rules:{}};return af.set(t,r),r}function S0(t,e,r,n,i,s,o,a=0){const c=16.666/n;let l=`{
`;for(let q=0;q<=1;q+=c){const V=e+(r-e)*s(q);l+=q*100+`%{${o(V,1-V)}}
`}const f=l+`100% {${o(r,1-r)}}
}`,d=`__svelte_${k2(f)}_${a}`,O=Pg(t),{stylesheet:L,rules:D}=af.get(O)||D2(O,t);D[d]||(D[d]=!0,L.insertRule(`@keyframes ${d} ${f}`,L.cssRules.length));const z=t.style.animation||"";return t.style.animation=`${z?`${z}, `:""}${d} ${n}ms linear ${i}ms 1 both`,cf+=1,d}function U2(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(t.style.animation=n.join(", "),cf-=i,cf||K2())}function K2(){fh(()=>{cf||(af.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&Mt(e)}),af.clear())})}let Fa;function Na(t){Fa=t}function H2(){if(!Fa)throw new Error("Function called outside component initialization");return Fa}function F2(t){H2().$$.on_mount.push(t)}const yo=[],R0=[];let Io=[];const I0=[],j2=Promise.resolve();let wd=!1;function G2(){wd||(wd=!0,j2.then(Ng))}function hs(t){Io.push(t)}const el=new Set;let fo=0;function Ng(){if(fo!==0)return;const t=Fa;do{try{for(;fo<yo.length;){const e=yo[fo];fo++,Na(e),V2(e.$$)}}catch(e){throw yo.length=0,fo=0,e}for(Na(null),yo.length=0,fo=0;R0.length;)R0.pop()();for(let e=0;e<Io.length;e+=1){const r=Io[e];el.has(r)||(el.add(r),r())}Io.length=0}while(yo.length);for(;I0.length;)I0.pop()();wd=!1,el.clear(),Na(t)}function V2(t){if(t.fragment!==null){t.update(),Zs(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(hs)}}function q2(t){const e=[],r=[];Io.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),Io=e}let la;function $2(){return la||(la=Promise.resolve(),la.then(()=>{la=null})),la}function tl(t,e,r){t.dispatchEvent(B2(`${e?"intro":"outro"}${r}`))}const Xc=new Set;let Li;function yc(){Li={r:0,c:[],p:Li}}function Ec(){Li.r||Zs(Li.c),Li=Li.p}function Kr(t,e){t&&t.i&&(Xc.delete(t),t.i(e))}function qi(t,e,r,n){if(t&&t.o){if(Xc.has(t))return;Xc.add(t),Li.c.push(()=>{Xc.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}const z2={duration:0};function ps(t,e,r,n){const i={direction:"both"};let s=e(t,r,i),o=n?0:1,a=null,c=null,l=null;function f(){l&&U2(t,l)}function d(L,D){const z=L.b-o;return D*=Math.abs(z),{a:o,b:L.b,d:z,duration:D,start:L.start,end:L.start+D,group:L.group}}function O(L){const{delay:D=0,duration:z=300,easing:q=Rg,tick:V=Ka,css:U}=s||z2,W={start:P2()+D,b:L};L||(W.group=Li,Li.r+=1),a||c?c=W:(U&&(f(),l=S0(t,o,L,z,D,q,U)),L&&V(0,1),a=d(W,z),hs(()=>tl(t,L,"start")),N2(F=>{if(c&&F>c.start&&(a=d(c,z),c=null,tl(t,a.b,"start"),U&&(f(),l=S0(t,o,a.b,a.duration,0,q,s.css))),a){if(F>=a.end)V(o=a.b,1-o),tl(t,a.b,"end"),c||(a.b?f():--a.group.r||Zs(a.group.c)),a=null;else if(F>=a.start){const j=F-a.start;o=a.a+a.d*q(j/a.duration),V(o,1-o)}}return!!(a||c)}))}return{run(L){qf(s)?$2().then(()=>{s=s(i),O(L)}):O(L)},end(){f(),a=c=null}}}function W2(t,e,r,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,r),n||hs(()=>{const o=t.$$.on_mount.map(Ig).filter(qf);t.$$.on_destroy?t.$$.on_destroy.push(...o):Zs(o),t.$$.on_mount=[]}),s.forEach(hs)}function X2(t,e){const r=t.$$;r.fragment!==null&&(q2(r.after_update),Zs(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function J2(t,e){t.$$.dirty[0]===-1&&(yo.push(t),G2(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y2(t,e,r,n,i,s,o,a=[-1]){const c=Fa;Na(t);const l=t.$$={fragment:null,ctx:[],props:s,update:Ka,not_equal:i,bound:A0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:A0(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let f=!1;if(l.ctx=r?r(t,e.props||{},(d,O,...L)=>{const D=L.length?L[0]:O;return l.ctx&&i(l.ctx[d],l.ctx[d]=D)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](D),f&&J2(t,d)),O}):[],l.update(),f=!0,Zs(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=C2(e.target);l.fragment&&l.fragment.l(d),d.forEach(Mt)}else l.fragment&&l.fragment.c();e.intro&&Kr(t.$$.fragment),W2(t,e.target,e.anchor,e.customElement),Ng()}Na(c)}class Q2{$destroy(){X2(this,1),this.$destroy=Ka}$on(e,r){if(!qf(r))return Ka;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!O2(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function gs(t,{delay:e=0,duration:r=400,easing:n=Rg}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}const Z2="modulepreload",ey=function(t){return"/reveal/"+t},T0={},ty=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=ey(s),s in T0)return;T0[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":Z2,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,d)=>{l.addEventListener("load",f),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},tt={},ry=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"}));var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ny(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Ad={},iy={get exports(){return Ad},set exports(t){Ad=t}},ff={},sy={get exports(){return ff},set exports(t){ff=t}},Lg=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},oy=Lg,Ss=Object.prototype.toString;function uh(t){return Array.isArray(t)}function xd(t){return typeof t>"u"}function ay(t){return t!==null&&!xd(t)&&t.constructor!==null&&!xd(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Cg(t){return Ss.call(t)==="[object ArrayBuffer]"}function cy(t){return Ss.call(t)==="[object FormData]"}function fy(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Cg(t.buffer),e}function uy(t){return typeof t=="string"}function ly(t){return typeof t=="number"}function Bg(t){return t!==null&&typeof t=="object"}function Jc(t){if(Ss.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function dy(t){return Ss.call(t)==="[object Date]"}function hy(t){return Ss.call(t)==="[object File]"}function py(t){return Ss.call(t)==="[object Blob]"}function kg(t){return Ss.call(t)==="[object Function]"}function gy(t){return Bg(t)&&kg(t.pipe)}function by(t){return Ss.call(t)==="[object URLSearchParams]"}function vy(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function my(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function lh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),uh(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Sd(){var t={};function e(i,s){Jc(t[s])&&Jc(i)?t[s]=Sd(t[s],i):Jc(i)?t[s]=Sd({},i):uh(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)lh(arguments[r],e);return t}function yy(t,e,r){return lh(e,function(i,s){r&&typeof i=="function"?t[s]=oy(i,r):t[s]=i}),t}function Ey(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Br={isArray:uh,isArrayBuffer:Cg,isBuffer:ay,isFormData:cy,isArrayBufferView:fy,isString:uy,isNumber:ly,isObject:Bg,isPlainObject:Jc,isUndefined:xd,isDate:dy,isFile:hy,isBlob:py,isFunction:kg,isStream:gy,isURLSearchParams:by,isStandardBrowserEnv:my,forEach:lh,merge:Sd,extend:yy,trim:vy,stripBOM:Ey},uo=Br;function O0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Dg=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(uo.isURLSearchParams(r))i=r.toString();else{var s=[];uo.forEach(r,function(c,l){c===null||typeof c>"u"||(uo.isArray(c)?l=l+"[]":c=[c],uo.forEach(c,function(d){uo.isDate(d)?d=d.toISOString():uo.isObject(d)&&(d=JSON.stringify(d)),s.push(O0(l)+"="+O0(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},_y=Br;function $f(){this.handlers=[]}$f.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};$f.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};$f.prototype.forEach=function(e){_y.forEach(this.handlers,function(n){n!==null&&e(n)})};var wy=$f,Ay=Br,xy=function(e,r){Ay.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Ug=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Kg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sy=Ug,Hg=function(e,r,n,i,s){var o=new Error(e);return Sy(o,r,n,i,s)},Ry=Hg,Iy=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Ry("Request failed with status code "+n.status,n.config,null,n.request,n))},rl,P0;function Ty(){if(P0)return rl;P0=1;var t=Br;return rl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),rl}var Oy=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Py=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Ny=Oy,My=Py,Ly=function(e,r){return e&&!Ny(r)?My(e,r):r},nl,N0;function Cy(){if(N0)return nl;N0=1;var t=Br,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return nl=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},nl}var il,M0;function By(){if(M0)return il;M0=1;var t=Br;return il=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),il}var sl,L0;function zf(){if(L0)return sl;L0=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,sl=t,sl}var ol,C0;function B0(){if(C0)return ol;C0=1;var t=Br,e=Iy,r=Ty(),n=Dg,i=Ly,s=Cy(),o=By(),a=Hg,c=Kg,l=zf();return ol=function(d){return new Promise(function(L,D){var z=d.data,q=d.headers,V=d.responseType,U;function W(){d.cancelToken&&d.cancelToken.unsubscribe(U),d.signal&&d.signal.removeEventListener("abort",U)}t.isFormData(z)&&delete q["Content-Type"];var F=new XMLHttpRequest;if(d.auth){var j=d.auth.username||"",G=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";q.Authorization="Basic "+btoa(j+":"+G)}var E=i(d.baseURL,d.url);F.open(d.method.toUpperCase(),n(E,d.params,d.paramsSerializer),!0),F.timeout=d.timeout;function y(){if(F){var x="getAllResponseHeaders"in F?s(F.getAllResponseHeaders()):null,_=!V||V==="text"||V==="json"?F.responseText:F.response,u={data:_,status:F.status,statusText:F.statusText,headers:x,config:d,request:F};e(function(b){L(b),W()},function(b){D(b),W()},u),F=null}}if("onloadend"in F?F.onloadend=y:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(y)},F.onabort=function(){F&&(D(a("Request aborted",d,"ECONNABORTED",F)),F=null)},F.onerror=function(){D(a("Network Error",d,null,F)),F=null},F.ontimeout=function(){var _=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c;d.timeoutErrorMessage&&(_=d.timeoutErrorMessage),D(a(_,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",F)),F=null},t.isStandardBrowserEnv()){var T=(d.withCredentials||o(E))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;T&&(q[d.xsrfHeaderName]=T)}"setRequestHeader"in F&&t.forEach(q,function(_,u){typeof z>"u"&&u.toLowerCase()==="content-type"?delete q[u]:F.setRequestHeader(u,_)}),t.isUndefined(d.withCredentials)||(F.withCredentials=!!d.withCredentials),V&&V!=="json"&&(F.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&F.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(U=function(x){F&&(D(!x||x&&x.type?new l("canceled"):x),F.abort(),F=null)},d.cancelToken&&d.cancelToken.subscribe(U),d.signal&&(d.signal.aborted?U():d.signal.addEventListener("abort",U))),z||(z=null),F.send(z)})},ol}var ir=Br,k0=xy,ky=Ug,Dy=Kg,Uy={"Content-Type":"application/x-www-form-urlencoded"};function D0(t,e){!ir.isUndefined(t)&&ir.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Ky(){var t;return(typeof XMLHttpRequest<"u"||typeof tt<"u"&&Object.prototype.toString.call(tt)==="[object process]")&&(t=B0()),t}function Hy(t,e,r){if(ir.isString(t))try{return(e||JSON.parse)(t),ir.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Wf={transitional:Dy,adapter:Ky(),transformRequest:[function(e,r){return k0(r,"Accept"),k0(r,"Content-Type"),ir.isFormData(e)||ir.isArrayBuffer(e)||ir.isBuffer(e)||ir.isStream(e)||ir.isFile(e)||ir.isBlob(e)?e:ir.isArrayBufferView(e)?e.buffer:ir.isURLSearchParams(e)?(D0(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ir.isObject(e)||r&&r["Content-Type"]==="application/json"?(D0(r,"application/json"),Hy(e)):e}],transformResponse:[function(e){var r=this.transitional||Wf.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&ir.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?ky(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ir.forEach(["delete","get","head"],function(e){Wf.headers[e]={}});ir.forEach(["post","put","patch"],function(e){Wf.headers[e]=ir.merge(Uy)});var dh=Wf,Fy=Br,jy=dh,Gy=function(e,r,n){var i=this||jy;return Fy.forEach(n,function(o){e=o.call(i,e,r)}),e},al,U0;function Fg(){return U0||(U0=1,al=function(e){return!!(e&&e.__CANCEL__)}),al}var K0=Br,cl=Gy,Vy=Fg(),qy=dh,$y=zf();function fl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $y("canceled")}var zy=function(e){fl(e),e.headers=e.headers||{},e.data=cl.call(e,e.data,e.headers,e.transformRequest),e.headers=K0.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),K0.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||qy.adapter;return r(e).then(function(i){return fl(e),i.data=cl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Vy(i)||(fl(e),i&&i.response&&(i.response.data=cl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Dr=Br,jg=function(e,r){r=r||{};var n={};function i(f,d){return Dr.isPlainObject(f)&&Dr.isPlainObject(d)?Dr.merge(f,d):Dr.isPlainObject(d)?Dr.merge({},d):Dr.isArray(d)?d.slice():d}function s(f){if(Dr.isUndefined(r[f])){if(!Dr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Dr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Dr.isUndefined(r[f])){if(!Dr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Dr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var O=l[d]||s,L=O(d);Dr.isUndefined(L)&&O!==c||(n[d]=L)}),n},ul,H0;function Gg(){return H0||(H0=1,ul={version:"0.26.1"}),ul}var Wy=Gg().version,hh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){hh[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var F0={};hh.transitional=function(e,r,n){function i(s,o){return"[Axios v"+Wy+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!F0[o]&&(F0[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Xy(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Jy={assertOptions:Xy,validators:hh},Vg=Br,Yy=Dg,j0=wy,G0=zy,Xf=jg,qg=Jy,lo=qg.validators;function rc(t){this.defaults=t,this.interceptors={request:new j0,response:new j0}}rc.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Xf(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&qg.assertOptions(n,{silentJSONParsing:lo.transitional(lo.boolean),forcedJSONParsing:lo.transitional(lo.boolean),clarifyTimeoutError:lo.transitional(lo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(r)===!1||(s=s&&L.synchronous,i.unshift(L.fulfilled,L.rejected))});var o=[];this.interceptors.response.forEach(function(L){o.push(L.fulfilled,L.rejected)});var a;if(!s){var c=[G0,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var f=i.shift(),d=i.shift();try{l=f(l)}catch(O){d(O);break}}try{a=G0(l)}catch(O){return Promise.reject(O)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};rc.prototype.getUri=function(e){return e=Xf(this.defaults,e),Yy(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Vg.forEach(["delete","get","head","options"],function(e){rc.prototype[e]=function(r,n){return this.request(Xf(n||{},{method:e,url:r,data:(n||{}).data}))}});Vg.forEach(["post","put","patch"],function(e){rc.prototype[e]=function(r,n,i){return this.request(Xf(i||{},{method:e,url:r,data:n}))}});var Qy=rc,ll,V0;function Zy(){if(V0)return ll;V0=1;var t=zf();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},ll=e,ll}var dl,q0;function eE(){return q0||(q0=1,dl=function(e){return function(n){return e.apply(null,n)}}),dl}var hl,$0;function tE(){if($0)return hl;$0=1;var t=Br;return hl=function(r){return t.isObject(r)&&r.isAxiosError===!0},hl}var z0=Br,rE=Lg,Yc=Qy,nE=jg,iE=dh;function $g(t){var e=new Yc(t),r=rE(Yc.prototype.request,e);return z0.extend(r,Yc.prototype,e),z0.extend(r,e),r.create=function(i){return $g(nE(t,i))},r}var ci=$g(iE);ci.Axios=Yc;ci.Cancel=zf();ci.CancelToken=Zy();ci.isCancel=Fg();ci.VERSION=Gg().version;ci.all=function(e){return Promise.all(e)};ci.spread=eE();ci.isAxiosError=tE();sy.exports=ci;ff.default=ci;(function(t){t.exports=ff})(iy);const W0=Mg(Ad);function sE(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}var ja;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(ja||(ja={}));const zg=typeof tt<"u"&&tt.versions!=null&&tt.versions.node!=null,X0=zg?void 0:ty(()=>import("./index-c199094a.js"),[]).then(t=>t.default).catch(()=>{});var uf;(function(t){t.TEXT="text",t.JSON="json"})(uf||(uf={}));class Jo extends Error{constructor(e,r,n,i,s){super(e),this.message=e,this.status=r,this.statusText=n,this.body=i,this.url=s,this.name="HttpResponse"}}class oE extends Error{constructor(e){super(e),this.message=e,this.name="HttpRequestFailed"}}class aE{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const r=[];for(const i in e)if(e.hasOwnProperty(i)&&typeof e[i]<"u"){const s=typeof e[i].toJSON=="function"?e[i].toJSON():e[i];if(s===null){r.push(encodeURIComponent(i));continue}if(Array.isArray(s)){s.forEach(o=>{r.push(encodeURIComponent(i)+"="+encodeURIComponent(o))});continue}r.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}const n=r.join("&");return n?`?${n}`:""}createRequest({url:e,method:r,timeout:n=this.timeout,query:i,headers:s={},json:o=!0},a){return sE(this,void 0,void 0,function*(){let c,l;s["Content-Type"]||(s["Content-Type"]="application/json"),o?c=uf.JSON:(c=uf.TEXT,l=[f=>f]);try{const f=X0&&(yield X0);return(yield W0.request({url:e+this.serialize(i),method:r??"GET",headers:s,responseType:c,transformResponse:l,timeout:n,data:a,adapter:f})).data}catch(f){if(W0.isAxiosError(f)&&f.response||!zg&&f.response){let d;throw typeof f.response.data=="object"?d=JSON.stringify(f.response.data):d=f.response.data,new Jo(`Http error response: (${f.response.status}) ${d}`,f.response.status,f.response.statusText,d,e+this.serialize(i))}else throw new oE(`${r} ${e+this.serialize(i)} ${String(f)}`)}})}}var cE=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,pl=Math.ceil,Pn=Math.floor,Nr="[BigNumber Error] ",J0=Nr+"Number primitive has more than 15 significant digits: ",ln=1e14,Le=14,gl=9007199254740991,bl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$i=1e7,Qt=1e9;function Wg(t){var e,r,n,i=U.prototype={constructor:U,toString:null,valueOf:null},s=new U(1),o=20,a=4,c=-7,l=21,f=-1e7,d=1e7,O=!1,L=1,D=0,z={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},q="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function U(y,T){var x,_,u,p,b,g,h,S,P=this;if(!(P instanceof U))return new U(y,T);if(T==null){if(y&&y._isBigNumber===!0){P.s=y.s,!y.c||y.e>d?P.c=P.e=null:y.e<f?P.c=[P.e=0]:(P.e=y.e,P.c=y.c.slice());return}if((g=typeof y=="number")&&y*0==0){if(P.s=1/y<0?(y=-y,-1):1,y===~~y){for(p=0,b=y;b>=10;b/=10,p++);p>d?P.c=P.e=null:(P.e=p,P.c=[y]);return}S=String(y)}else{if(!cE.test(S=String(y)))return n(P,S,g);P.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(p=S.indexOf("."))>-1&&(S=S.replace(".","")),(b=S.search(/e/i))>0?(p<0&&(p=b),p+=+S.slice(b+1),S=S.substring(0,b)):p<0&&(p=S.length)}else{if(wt(T,2,q.length,"Base"),T==10&&V)return P=new U(y),G(P,o+P.e+1,a);if(S=String(y),g=typeof y=="number"){if(y*0!=0)return n(P,S,g,T);if(P.s=1/y<0?(S=S.slice(1),-1):1,U.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(J0+y)}else P.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(x=q.slice(0,T),p=b=0,h=S.length;b<h;b++)if(x.indexOf(_=S.charAt(b))<0){if(_=="."){if(b>p){p=h;continue}}else if(!u&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){u=!0,b=-1,p=0;continue}return n(P,String(y),g,T)}g=!1,S=r(S,T,10,P.s),(p=S.indexOf("."))>-1?S=S.replace(".",""):p=S.length}for(b=0;S.charCodeAt(b)===48;b++);for(h=S.length;S.charCodeAt(--h)===48;);if(S=S.slice(b,++h)){if(h-=b,g&&U.DEBUG&&h>15&&(y>gl||y!==Pn(y)))throw Error(J0+P.s*y);if((p=p-b-1)>d)P.c=P.e=null;else if(p<f)P.c=[P.e=0];else{if(P.e=p,P.c=[],b=(p+1)%Le,p<0&&(b+=Le),b<h){for(b&&P.c.push(+S.slice(0,b)),h-=Le;b<h;)P.c.push(+S.slice(b,b+=Le));b=Le-(S=S.slice(b)).length}else b-=h;for(;b--;S+="0");P.c.push(+S)}}else P.c=[P.e=0]}U.clone=Wg,U.ROUND_UP=0,U.ROUND_DOWN=1,U.ROUND_CEIL=2,U.ROUND_FLOOR=3,U.ROUND_HALF_UP=4,U.ROUND_HALF_DOWN=5,U.ROUND_HALF_EVEN=6,U.ROUND_HALF_CEIL=7,U.ROUND_HALF_FLOOR=8,U.EUCLID=9,U.config=U.set=function(y){var T,x;if(y!=null)if(typeof y=="object"){if(y.hasOwnProperty(T="DECIMAL_PLACES")&&(x=y[T],wt(x,0,Qt,T),o=x),y.hasOwnProperty(T="ROUNDING_MODE")&&(x=y[T],wt(x,0,8,T),a=x),y.hasOwnProperty(T="EXPONENTIAL_AT")&&(x=y[T],x&&x.pop?(wt(x[0],-Qt,0,T),wt(x[1],0,Qt,T),c=x[0],l=x[1]):(wt(x,-Qt,Qt,T),c=-(l=x<0?-x:x))),y.hasOwnProperty(T="RANGE"))if(x=y[T],x&&x.pop)wt(x[0],-Qt,-1,T),wt(x[1],1,Qt,T),f=x[0],d=x[1];else if(wt(x,-Qt,Qt,T),x)f=-(d=x<0?-x:x);else throw Error(Nr+T+" cannot be zero: "+x);if(y.hasOwnProperty(T="CRYPTO"))if(x=y[T],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))O=x;else throw O=!x,Error(Nr+"crypto unavailable");else O=x;else throw Error(Nr+T+" not true or false: "+x);if(y.hasOwnProperty(T="MODULO_MODE")&&(x=y[T],wt(x,0,9,T),L=x),y.hasOwnProperty(T="POW_PRECISION")&&(x=y[T],wt(x,0,Qt,T),D=x),y.hasOwnProperty(T="FORMAT"))if(x=y[T],typeof x=="object")z=x;else throw Error(Nr+T+" not an object: "+x);if(y.hasOwnProperty(T="ALPHABET"))if(x=y[T],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))V=x.slice(0,10)=="0123456789",q=x;else throw Error(Nr+T+" invalid: "+x)}else throw Error(Nr+"Object expected: "+y);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[f,d],CRYPTO:O,MODULO_MODE:L,POW_PRECISION:D,FORMAT:z,ALPHABET:q}},U.isBigNumber=function(y){if(!y||y._isBigNumber!==!0)return!1;if(!U.DEBUG)return!0;var T,x,_=y.c,u=y.e,p=y.s;e:if({}.toString.call(_)=="[object Array]"){if((p===1||p===-1)&&u>=-Qt&&u<=Qt&&u===Pn(u)){if(_[0]===0){if(u===0&&_.length===1)return!0;break e}if(T=(u+1)%Le,T<1&&(T+=Le),String(_[0]).length==T){for(T=0;T<_.length;T++)if(x=_[T],x<0||x>=ln||x!==Pn(x))break e;if(x!==0)return!0}}}else if(_===null&&u===null&&(p===null||p===1||p===-1))return!0;throw Error(Nr+"Invalid BigNumber: "+y)},U.maximum=U.max=function(){return F(arguments,i.lt)},U.minimum=U.min=function(){return F(arguments,i.gt)},U.random=function(){var y=9007199254740992,T=Math.random()*y&2097151?function(){return Pn(Math.random()*y)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var _,u,p,b,g,h=0,S=[],P=new U(s);if(x==null?x=o:wt(x,0,Qt),b=pl(x/Le),O)if(crypto.getRandomValues){for(_=crypto.getRandomValues(new Uint32Array(b*=2));h<b;)g=_[h]*131072+(_[h+1]>>>11),g>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),_[h]=u[0],_[h+1]=u[1]):(S.push(g%1e14),h+=2);h=b/2}else if(crypto.randomBytes){for(_=crypto.randomBytes(b*=7);h<b;)g=(_[h]&31)*281474976710656+_[h+1]*1099511627776+_[h+2]*4294967296+_[h+3]*16777216+(_[h+4]<<16)+(_[h+5]<<8)+_[h+6],g>=9e15?crypto.randomBytes(7).copy(_,h):(S.push(g%1e14),h+=7);h=b/7}else throw O=!1,Error(Nr+"crypto unavailable");if(!O)for(;h<b;)g=T(),g<9e15&&(S[h++]=g%1e14);for(b=S[--h],x%=Le,b&&x&&(g=bl[Le-x],S[h]=Pn(b/g)*g);S[h]===0;S.pop(),h--);if(h<0)S=[p=0];else{for(p=-1;S[0]===0;S.splice(0,1),p-=Le);for(h=1,g=S[0];g>=10;g/=10,h++);h<Le&&(p-=Le-h)}return P.e=p,P.c=S,P}}(),U.sum=function(){for(var y=1,T=arguments,x=new U(T[0]);y<T.length;)x=x.plus(T[y++]);return x},r=function(){var y="0123456789";function T(x,_,u,p){for(var b,g=[0],h,S=0,P=x.length;S<P;){for(h=g.length;h--;g[h]*=_);for(g[0]+=p.indexOf(x.charAt(S++)),b=0;b<g.length;b++)g[b]>u-1&&(g[b+1]==null&&(g[b+1]=0),g[b+1]+=g[b]/u|0,g[b]%=u)}return g.reverse()}return function(x,_,u,p,b){var g,h,S,P,w,m,M,ee,Z=x.indexOf("."),oe=o,ae=a;for(Z>=0&&(P=D,D=0,x=x.replace(".",""),ee=new U(_),m=ee.pow(x.length-Z),D=P,ee.c=T(hi(en(m.c),m.e,"0"),10,u,y),ee.e=ee.c.length),M=T(x,_,u,b?(g=q,y):(g=y,q)),S=P=M.length;M[--P]==0;M.pop());if(!M[0])return g.charAt(0);if(Z<0?--S:(m.c=M,m.e=S,m.s=p,m=e(m,ee,oe,ae,u),M=m.c,w=m.r,S=m.e),h=S+oe+1,Z=M[h],P=u/2,w=w||h<0||M[h+1]!=null,w=ae<4?(Z!=null||w)&&(ae==0||ae==(m.s<0?3:2)):Z>P||Z==P&&(ae==4||w||ae==6&&M[h-1]&1||ae==(m.s<0?8:7)),h<1||!M[0])x=w?hi(g.charAt(1),-oe,g.charAt(0)):g.charAt(0);else{if(M.length=h,w)for(--u;++M[--h]>u;)M[h]=0,h||(++S,M=[1].concat(M));for(P=M.length;!M[--P];);for(Z=0,x="";Z<=P;x+=g.charAt(M[Z++]));x=hi(x,S,g.charAt(0))}return x}}(),e=function(){function y(_,u,p){var b,g,h,S,P=0,w=_.length,m=u%$i,M=u/$i|0;for(_=_.slice();w--;)h=_[w]%$i,S=_[w]/$i|0,b=M*h+S*m,g=m*h+b%$i*$i+P,P=(g/p|0)+(b/$i|0)+M*S,_[w]=g%p;return P&&(_=[P].concat(_)),_}function T(_,u,p,b){var g,h;if(p!=b)h=p>b?1:-1;else for(g=h=0;g<p;g++)if(_[g]!=u[g]){h=_[g]>u[g]?1:-1;break}return h}function x(_,u,p,b){for(var g=0;p--;)_[p]-=g,g=_[p]<u[p]?1:0,_[p]=g*b+_[p]-u[p];for(;!_[0]&&_.length>1;_.splice(0,1));}return function(_,u,p,b,g){var h,S,P,w,m,M,ee,Z,oe,ae,X,K,k,B,v,R,N,$=_.s==u.s?1:-1,re=_.c,ie=u.c;if(!re||!re[0]||!ie||!ie[0])return new U(!_.s||!u.s||(re?ie&&re[0]==ie[0]:!ie)?NaN:re&&re[0]==0||!ie?$*0:$/0);for(Z=new U($),oe=Z.c=[],S=_.e-u.e,$=p+S+1,g||(g=ln,S=tn(_.e/Le)-tn(u.e/Le),$=$/Le|0),P=0;ie[P]==(re[P]||0);P++);if(ie[P]>(re[P]||0)&&S--,$<0)oe.push(1),w=!0;else{for(B=re.length,R=ie.length,P=0,$+=2,m=Pn(g/(ie[0]+1)),m>1&&(ie=y(ie,m,g),re=y(re,m,g),R=ie.length,B=re.length),k=R,ae=re.slice(0,R),X=ae.length;X<R;ae[X++]=0);N=ie.slice(),N=[0].concat(N),v=ie[0],ie[1]>=g/2&&v++;do{if(m=0,h=T(ie,ae,R,X),h<0){if(K=ae[0],R!=X&&(K=K*g+(ae[1]||0)),m=Pn(K/v),m>1)for(m>=g&&(m=g-1),M=y(ie,m,g),ee=M.length,X=ae.length;T(M,ae,ee,X)==1;)m--,x(M,R<ee?N:ie,ee,g),ee=M.length,h=1;else m==0&&(h=m=1),M=ie.slice(),ee=M.length;if(ee<X&&(M=[0].concat(M)),x(ae,M,X,g),X=ae.length,h==-1)for(;T(ie,ae,R,X)<1;)m++,x(ae,R<X?N:ie,X,g),X=ae.length}else h===0&&(m++,ae=[0]);oe[P++]=m,ae[0]?ae[X++]=re[k]||0:(ae=[re[k]],X=1)}while((k++<B||ae[0]!=null)&&$--);w=ae[0]!=null,oe[0]||oe.splice(0,1)}if(g==ln){for(P=1,$=oe[0];$>=10;$/=10,P++);G(Z,p+(Z.e=P+S*Le-1)+1,b,w)}else Z.e=S,Z.r=+w;return Z}}();function W(y,T,x,_){var u,p,b,g,h;if(x==null?x=a:wt(x,0,8),!y.c)return y.toString();if(u=y.c[0],b=y.e,T==null)h=en(y.c),h=_==1||_==2&&(b<=c||b>=l)?wc(h,b):hi(h,b,"0");else if(y=G(new U(y),T,x),p=y.e,h=en(y.c),g=h.length,_==1||_==2&&(T<=p||p<=c)){for(;g<T;h+="0",g++);h=wc(h,p)}else if(T-=b,h=hi(h,p,"0"),p+1>g){if(--T>0)for(h+=".";T--;h+="0");}else if(T+=p-g,T>0)for(p+1==g&&(h+=".");T--;h+="0");return y.s<0&&u?"-"+h:h}function F(y,T){for(var x,_=1,u=new U(y[0]);_<y.length;_++)if(x=new U(y[_]),x.s)T.call(u,x)&&(u=x);else{u=x;break}return u}function j(y,T,x){for(var _=1,u=T.length;!T[--u];T.pop());for(u=T[0];u>=10;u/=10,_++);return(x=_+x*Le-1)>d?y.c=y.e=null:x<f?y.c=[y.e=0]:(y.e=x,y.c=T),y}n=function(){var y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,x=/^\.([^.]+)$/,_=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,b,g,h){var S,P=g?b:b.replace(u,"");if(_.test(P))p.s=isNaN(P)?null:P<0?-1:1;else{if(!g&&(P=P.replace(y,function(w,m,M){return S=(M=M.toLowerCase())=="x"?16:M=="b"?2:8,!h||h==S?m:w}),h&&(S=h,P=P.replace(T,"$1").replace(x,"0.$1")),b!=P))return new U(P,S);if(U.DEBUG)throw Error(Nr+"Not a"+(h?" base "+h:"")+" number: "+b);p.s=null}p.c=p.e=null}}();function G(y,T,x,_){var u,p,b,g,h,S,P,w=y.c,m=bl;if(w){e:{for(u=1,g=w[0];g>=10;g/=10,u++);if(p=T-u,p<0)p+=Le,b=T,h=w[S=0],P=h/m[u-b-1]%10|0;else if(S=pl((p+1)/Le),S>=w.length)if(_){for(;w.length<=S;w.push(0));h=P=0,u=1,p%=Le,b=p-Le+1}else break e;else{for(h=g=w[S],u=1;g>=10;g/=10,u++);p%=Le,b=p-Le+u,P=b<0?0:h/m[u-b-1]%10|0}if(_=_||T<0||w[S+1]!=null||(b<0?h:h%m[u-b-1]),_=x<4?(P||_)&&(x==0||x==(y.s<0?3:2)):P>5||P==5&&(x==4||_||x==6&&(p>0?b>0?h/m[u-b]:0:w[S-1])%10&1||x==(y.s<0?8:7)),T<1||!w[0])return w.length=0,_?(T-=y.e+1,w[0]=m[(Le-T%Le)%Le],y.e=-T||0):w[0]=y.e=0,y;if(p==0?(w.length=S,g=1,S--):(w.length=S+1,g=m[Le-p],w[S]=b>0?Pn(h/m[u-b]%m[b])*g:0),_)for(;;)if(S==0){for(p=1,b=w[0];b>=10;b/=10,p++);for(b=w[0]+=g,g=1;b>=10;b/=10,g++);p!=g&&(y.e++,w[0]==ln&&(w[0]=1));break}else{if(w[S]+=g,w[S]!=ln)break;w[S--]=0,g=1}for(p=w.length;w[--p]===0;w.pop());}y.e>d?y.c=y.e=null:y.e<f&&(y.c=[y.e=0])}return y}function E(y){var T,x=y.e;return x===null?y.toString():(T=en(y.c),T=x<=c||x>=l?wc(T,x):hi(T,x,"0"),y.s<0?"-"+T:T)}return i.absoluteValue=i.abs=function(){var y=new U(this);return y.s<0&&(y.s=1),y},i.comparedTo=function(y,T){return ho(this,new U(y,T))},i.decimalPlaces=i.dp=function(y,T){var x,_,u,p=this;if(y!=null)return wt(y,0,Qt),T==null?T=a:wt(T,0,8),G(new U(p),y+p.e+1,T);if(!(x=p.c))return null;if(_=((u=x.length-1)-tn(this.e/Le))*Le,u=x[u])for(;u%10==0;u/=10,_--);return _<0&&(_=0),_},i.dividedBy=i.div=function(y,T){return e(this,new U(y,T),o,a)},i.dividedToIntegerBy=i.idiv=function(y,T){return e(this,new U(y,T),0,1)},i.exponentiatedBy=i.pow=function(y,T){var x,_,u,p,b,g,h,S,P,w=this;if(y=new U(y),y.c&&!y.isInteger())throw Error(Nr+"Exponent not an integer: "+E(y));if(T!=null&&(T=new U(T)),g=y.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!y.c||!y.c[0])return P=new U(Math.pow(+E(w),g?y.s*(2-_c(y)):+E(y))),T?P.mod(T):P;if(h=y.s<0,T){if(T.c?!T.c[0]:!T.s)return new U(NaN);_=!h&&w.isInteger()&&T.isInteger(),_&&(w=w.mod(T))}else{if(y.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||g&&w.c[1]>=24e7:w.c[0]<8e13||g&&w.c[0]<=9999975e7)))return p=w.s<0&&_c(y)?-0:0,w.e>-1&&(p=1/p),new U(h?1/p:p);D&&(p=pl(D/Le+2))}for(g?(x=new U(.5),h&&(y.s=1),S=_c(y)):(u=Math.abs(+E(y)),S=u%2),P=new U(s);;){if(S){if(P=P.times(w),!P.c)break;p?P.c.length>p&&(P.c.length=p):_&&(P=P.mod(T))}if(u){if(u=Pn(u/2),u===0)break;S=u%2}else if(y=y.times(x),G(y,y.e+1,1),y.e>14)S=_c(y);else{if(u=+E(y),u===0)break;S=u%2}w=w.times(w),p?w.c&&w.c.length>p&&(w.c.length=p):_&&(w=w.mod(T))}return _?P:(h&&(P=s.div(P)),T?P.mod(T):p?G(P,D,a,b):P)},i.integerValue=function(y){var T=new U(this);return y==null?y=a:wt(y,0,8),G(T,T.e+1,y)},i.isEqualTo=i.eq=function(y,T){return ho(this,new U(y,T))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(y,T){return ho(this,new U(y,T))>0},i.isGreaterThanOrEqualTo=i.gte=function(y,T){return(T=ho(this,new U(y,T)))===1||T===0},i.isInteger=function(){return!!this.c&&tn(this.e/Le)>this.c.length-2},i.isLessThan=i.lt=function(y,T){return ho(this,new U(y,T))<0},i.isLessThanOrEqualTo=i.lte=function(y,T){return(T=ho(this,new U(y,T)))===-1||T===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(y,T){var x,_,u,p,b=this,g=b.s;if(y=new U(y,T),T=y.s,!g||!T)return new U(NaN);if(g!=T)return y.s=-T,b.plus(y);var h=b.e/Le,S=y.e/Le,P=b.c,w=y.c;if(!h||!S){if(!P||!w)return P?(y.s=-T,y):new U(w?b:NaN);if(!P[0]||!w[0])return w[0]?(y.s=-T,y):new U(P[0]?b:a==3?-0:0)}if(h=tn(h),S=tn(S),P=P.slice(),g=h-S){for((p=g<0)?(g=-g,u=P):(S=h,u=w),u.reverse(),T=g;T--;u.push(0));u.reverse()}else for(_=(p=(g=P.length)<(T=w.length))?g:T,g=T=0;T<_;T++)if(P[T]!=w[T]){p=P[T]<w[T];break}if(p&&(u=P,P=w,w=u,y.s=-y.s),T=(_=w.length)-(x=P.length),T>0)for(;T--;P[x++]=0);for(T=ln-1;_>g;){if(P[--_]<w[_]){for(x=_;x&&!P[--x];P[x]=T);--P[x],P[_]+=ln}P[_]-=w[_]}for(;P[0]==0;P.splice(0,1),--S);return P[0]?j(y,P,S):(y.s=a==3?-1:1,y.c=[y.e=0],y)},i.modulo=i.mod=function(y,T){var x,_,u=this;return y=new U(y,T),!u.c||!y.s||y.c&&!y.c[0]?new U(NaN):!y.c||u.c&&!u.c[0]?new U(u):(L==9?(_=y.s,y.s=1,x=e(u,y,0,3),y.s=_,x.s*=_):x=e(u,y,0,L),y=u.minus(x.times(y)),!y.c[0]&&L==1&&(y.s=u.s),y)},i.multipliedBy=i.times=function(y,T){var x,_,u,p,b,g,h,S,P,w,m,M,ee,Z,oe,ae=this,X=ae.c,K=(y=new U(y,T)).c;if(!X||!K||!X[0]||!K[0])return!ae.s||!y.s||X&&!X[0]&&!K||K&&!K[0]&&!X?y.c=y.e=y.s=null:(y.s*=ae.s,!X||!K?y.c=y.e=null:(y.c=[0],y.e=0)),y;for(_=tn(ae.e/Le)+tn(y.e/Le),y.s*=ae.s,h=X.length,w=K.length,h<w&&(ee=X,X=K,K=ee,u=h,h=w,w=u),u=h+w,ee=[];u--;ee.push(0));for(Z=ln,oe=$i,u=w;--u>=0;){for(x=0,m=K[u]%oe,M=K[u]/oe|0,b=h,p=u+b;p>u;)S=X[--b]%oe,P=X[b]/oe|0,g=M*S+P*m,S=m*S+g%oe*oe+ee[p]+x,x=(S/Z|0)+(g/oe|0)+M*P,ee[p--]=S%Z;ee[p]=x}return x?++_:ee.splice(0,1),j(y,ee,_)},i.negated=function(){var y=new U(this);return y.s=-y.s||null,y},i.plus=function(y,T){var x,_=this,u=_.s;if(y=new U(y,T),T=y.s,!u||!T)return new U(NaN);if(u!=T)return y.s=-T,_.minus(y);var p=_.e/Le,b=y.e/Le,g=_.c,h=y.c;if(!p||!b){if(!g||!h)return new U(u/0);if(!g[0]||!h[0])return h[0]?y:new U(g[0]?_:u*0)}if(p=tn(p),b=tn(b),g=g.slice(),u=p-b){for(u>0?(b=p,x=h):(u=-u,x=g),x.reverse();u--;x.push(0));x.reverse()}for(u=g.length,T=h.length,u-T<0&&(x=h,h=g,g=x,T=u),u=0;T;)u=(g[--T]=g[T]+h[T]+u)/ln|0,g[T]=ln===g[T]?0:g[T]%ln;return u&&(g=[u].concat(g),++b),j(y,g,b)},i.precision=i.sd=function(y,T){var x,_,u,p=this;if(y!=null&&y!==!!y)return wt(y,1,Qt),T==null?T=a:wt(T,0,8),G(new U(p),y,T);if(!(x=p.c))return null;if(u=x.length-1,_=u*Le+1,u=x[u]){for(;u%10==0;u/=10,_--);for(u=x[0];u>=10;u/=10,_++);}return y&&p.e+1>_&&(_=p.e+1),_},i.shiftedBy=function(y){return wt(y,-gl,gl),this.times("1e"+y)},i.squareRoot=i.sqrt=function(){var y,T,x,_,u,p=this,b=p.c,g=p.s,h=p.e,S=o+4,P=new U("0.5");if(g!==1||!b||!b[0])return new U(!g||g<0&&(!b||b[0])?NaN:b?p:1/0);if(g=Math.sqrt(+E(p)),g==0||g==1/0?(T=en(b),(T.length+h)%2==0&&(T+="0"),g=Math.sqrt(+T),h=tn((h+1)/2)-(h<0||h%2),g==1/0?T="5e"+h:(T=g.toExponential(),T=T.slice(0,T.indexOf("e")+1)+h),x=new U(T)):x=new U(g+""),x.c[0]){for(h=x.e,g=h+S,g<3&&(g=0);;)if(u=x,x=P.times(u.plus(e(p,u,S,1))),en(u.c).slice(0,g)===(T=en(x.c)).slice(0,g))if(x.e<h&&--g,T=T.slice(g-3,g+1),T=="9999"||!_&&T=="4999"){if(!_&&(G(u,u.e+o+2,0),u.times(u).eq(p))){x=u;break}S+=4,g+=4,_=1}else{(!+T||!+T.slice(1)&&T.charAt(0)=="5")&&(G(x,x.e+o+2,1),y=!x.times(x).eq(p));break}}return G(x,x.e+o+1,a,y)},i.toExponential=function(y,T){return y!=null&&(wt(y,0,Qt),y++),W(this,y,T,1)},i.toFixed=function(y,T){return y!=null&&(wt(y,0,Qt),y=y+this.e+1),W(this,y,T)},i.toFormat=function(y,T,x){var _,u=this;if(x==null)y!=null&&T&&typeof T=="object"?(x=T,T=null):y&&typeof y=="object"?(x=y,y=T=null):x=z;else if(typeof x!="object")throw Error(Nr+"Argument not an object: "+x);if(_=u.toFixed(y,T),u.c){var p,b=_.split("."),g=+x.groupSize,h=+x.secondaryGroupSize,S=x.groupSeparator||"",P=b[0],w=b[1],m=u.s<0,M=m?P.slice(1):P,ee=M.length;if(h&&(p=g,g=h,h=p,ee-=p),g>0&&ee>0){for(p=ee%g||g,P=M.substr(0,p);p<ee;p+=g)P+=S+M.substr(p,g);h>0&&(P+=S+M.slice(p)),m&&(P="-"+P)}_=w?P+(x.decimalSeparator||"")+((h=+x.fractionGroupSize)?w.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):w):P}return(x.prefix||"")+_+(x.suffix||"")},i.toFraction=function(y){var T,x,_,u,p,b,g,h,S,P,w,m,M=this,ee=M.c;if(y!=null&&(g=new U(y),!g.isInteger()&&(g.c||g.s!==1)||g.lt(s)))throw Error(Nr+"Argument "+(g.isInteger()?"out of range: ":"not an integer: ")+E(g));if(!ee)return new U(M);for(T=new U(s),S=x=new U(s),_=h=new U(s),m=en(ee),p=T.e=m.length-M.e-1,T.c[0]=bl[(b=p%Le)<0?Le+b:b],y=!y||g.comparedTo(T)>0?p>0?T:S:g,b=d,d=1/0,g=new U(m),h.c[0]=0;P=e(g,T,0,1),u=x.plus(P.times(_)),u.comparedTo(y)!=1;)x=_,_=u,S=h.plus(P.times(u=S)),h=u,T=g.minus(P.times(u=T)),g=u;return u=e(y.minus(x),_,0,1),h=h.plus(u.times(S)),x=x.plus(u.times(_)),h.s=S.s=M.s,p=p*2,w=e(S,_,p,a).minus(M).abs().comparedTo(e(h,x,p,a).minus(M).abs())<1?[S,_]:[h,x],d=b,w},i.toNumber=function(){return+E(this)},i.toPrecision=function(y,T){return y!=null&&wt(y,1,Qt),W(this,y,T,2)},i.toString=function(y){var T,x=this,_=x.s,u=x.e;return u===null?_?(T="Infinity",_<0&&(T="-"+T)):T="NaN":(y==null?T=u<=c||u>=l?wc(en(x.c),u):hi(en(x.c),u,"0"):y===10&&V?(x=G(new U(x),o+u+1,a),T=hi(en(x.c),x.e,"0")):(wt(y,2,q.length,"Base"),T=r(hi(en(x.c),u,"0"),10,y,_,!0)),_<0&&x.c[0]&&(T="-"+T)),T},i.valueOf=i.toJSON=function(){return E(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&U.set(t),U}function tn(t){var e=t|0;return t>0||t===e?e:e-1}function en(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=Le-e.length;r--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function ho(t,e){var r,n,i=t.c,s=e.c,o=t.s,a=e.s,c=t.e,l=e.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function wt(t,e,r,n){if(t<e||t>r||t!==Pn(t))throw Error(Nr+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _c(t){var e=t.c.length-1;return tn(t.e/Le)==e&&t.c[e]%2!=0}function wc(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function hi(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var ye=Wg(),ge={},Jf={};Jf.byteLength=lE;Jf.toByteArray=hE;Jf.fromByteArray=bE;var Yn=[],rn=[],fE=typeof Uint8Array<"u"?Uint8Array:Array,vl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var po=0,uE=vl.length;po<uE;++po)Yn[po]=vl[po],rn[vl.charCodeAt(po)]=po;rn["-".charCodeAt(0)]=62;rn["_".charCodeAt(0)]=63;function Xg(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function lE(t){var e=Xg(t),r=e[0],n=e[1];return(r+n)*3/4-n}function dE(t,e,r){return(e+r)*3/4-r}function hE(t){var e,r=Xg(t),n=r[0],i=r[1],s=new fE(dE(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=rn[t.charCodeAt(c)]<<18|rn[t.charCodeAt(c+1)]<<12|rn[t.charCodeAt(c+2)]<<6|rn[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=rn[t.charCodeAt(c)]<<2|rn[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=rn[t.charCodeAt(c)]<<10|rn[t.charCodeAt(c+1)]<<4|rn[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function pE(t){return Yn[t>>18&63]+Yn[t>>12&63]+Yn[t>>6&63]+Yn[t&63]}function gE(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(pE(n));return i.join("")}function bE(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(gE(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Yn[e>>2]+Yn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Yn[e>>10]+Yn[e>>4&63]+Yn[e<<2&63]+"=")),i.join("")}var ph={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ph.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,d=r?i-1:0,O=r?-1:1,L=t[e+d];for(d+=O,s=L&(1<<-f)-1,L>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=O,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+d],d+=O,f-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(L?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(L?-1:1)*o*Math.pow(2,s-n)};ph.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,f=(1<<l)-1,d=f>>1,O=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=n?0:s-1,D=n?1:-1,z=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=O/c:e+=O*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+L]=a&255,L+=D,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+L]=o&255,L+=D,o/=256,l-=8);t[r+L-D]|=z*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Jf,r=ph,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=U,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const C=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(C,A),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(C){if(C>i)throw new RangeError('The value "'+C+'" is invalid for option "size"');const A=new Uint8Array(C);return Object.setPrototypeOf(A,a.prototype),A}function a(C,A,I){if(typeof C=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(C)}return c(C,A,I)}a.poolSize=8192;function c(C,A,I){if(typeof C=="string")return O(C,A);if(ArrayBuffer.isView(C))return D(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(be(C,ArrayBuffer)||C&&be(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(C,SharedArrayBuffer)||C&&be(C.buffer,SharedArrayBuffer)))return z(C,A,I);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=C.valueOf&&C.valueOf();if(H!=null&&H!==C)return a.from(H,A,I);const J=q(C);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),A,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,A,I){return c(C,A,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function f(C,A,I){return l(C),C<=0?o(C):A!==void 0?typeof I=="string"?o(C).fill(A,I):o(C).fill(A):o(C)}a.alloc=function(C,A,I){return f(C,A,I)};function d(C){return l(C),o(C<0?0:V(C)|0)}a.allocUnsafe=function(C){return d(C)},a.allocUnsafeSlow=function(C){return d(C)};function O(C,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const I=W(C,A)|0;let H=o(I);const J=H.write(C,A);return J!==I&&(H=H.slice(0,J)),H}function L(C){const A=C.length<0?0:V(C.length)|0,I=o(A);for(let H=0;H<A;H+=1)I[H]=C[H]&255;return I}function D(C){if(be(C,Uint8Array)){const A=new Uint8Array(C);return z(A.buffer,A.byteOffset,A.byteLength)}return L(C)}function z(C,A,I){if(A<0||C.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<A+(I||0))throw new RangeError('"length" is outside of buffer bounds');let H;return A===void 0&&I===void 0?H=new Uint8Array(C):I===void 0?H=new Uint8Array(C,A):H=new Uint8Array(C,A,I),Object.setPrototypeOf(H,a.prototype),H}function q(C){if(a.isBuffer(C)){const A=V(C.length)|0,I=o(A);return I.length===0||C.copy(I,0,0,A),I}if(C.length!==void 0)return typeof C.length!="number"||Oe(C.length)?o(0):L(C);if(C.type==="Buffer"&&Array.isArray(C.data))return L(C.data)}function V(C){if(C>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return C|0}function U(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,I){if(be(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),be(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(A)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===I)return 0;let H=A.length,J=I.length;for(let te=0,ne=Math.min(H,J);te<ne;++te)if(A[te]!==I[te]){H=A[te],J=I[te];break}return H<J?-1:J<H?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,I){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let H;if(I===void 0)for(I=0,H=0;H<A.length;++H)I+=A[H].length;const J=a.allocUnsafe(I);let te=0;for(H=0;H<A.length;++H){let ne=A[H];if(be(ne,Uint8Array))te+ne.length>J.length?(a.isBuffer(ne)||(ne=a.from(ne)),ne.copy(J,te)):Uint8Array.prototype.set.call(J,ne,te);else if(a.isBuffer(ne))ne.copy(J,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=ne.length}return J};function W(C,A){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||be(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const I=C.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&I===0)return 0;let J=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return he(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Ae(C).length;default:if(J)return H?-1:he(C).length;A=(""+A).toLowerCase(),J=!0}}a.byteLength=W;function F(C,A,I){let H=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,A>>>=0,I<=A))return"";for(C||(C="utf8");;)switch(C){case"hex":return w(this,A,I);case"utf8":case"utf-8":return b(this,A,I);case"ascii":return S(this,A,I);case"latin1":case"binary":return P(this,A,I);case"base64":return p(this,A,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,A,I);default:if(H)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),H=!0}}a.prototype._isBuffer=!0;function j(C,A,I){const H=C[A];C[A]=C[I],C[I]=H}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<A;I+=2)j(this,I,I+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<A;I+=4)j(this,I,I+3),j(this,I+1,I+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<A;I+=8)j(this,I,I+7),j(this,I+1,I+6),j(this,I+2,I+5),j(this,I+3,I+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?b(this,0,A):F.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const I=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(A+=" ... "),"<Buffer "+A+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(A,I,H,J,te){if(be(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(I===void 0&&(I=0),H===void 0&&(H=A?A.length:0),J===void 0&&(J=0),te===void 0&&(te=this.length),I<0||H>A.length||J<0||te>this.length)throw new RangeError("out of range index");if(J>=te&&I>=H)return 0;if(J>=te)return-1;if(I>=H)return 1;if(I>>>=0,H>>>=0,J>>>=0,te>>>=0,this===A)return 0;let ne=te-J,de=H-I;const Se=Math.min(ne,de),xe=this.slice(J,te),Re=A.slice(I,H);for(let Fe=0;Fe<Se;++Fe)if(xe[Fe]!==Re[Fe]){ne=xe[Fe],de=Re[Fe];break}return ne<de?-1:de<ne?1:0};function G(C,A,I,H,J){if(C.length===0)return-1;if(typeof I=="string"?(H=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,Oe(I)&&(I=J?0:C.length-1),I<0&&(I=C.length+I),I>=C.length){if(J)return-1;I=C.length-1}else if(I<0)if(J)I=0;else return-1;if(typeof A=="string"&&(A=a.from(A,H)),a.isBuffer(A))return A.length===0?-1:E(C,A,I,H,J);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(C,A,I):Uint8Array.prototype.lastIndexOf.call(C,A,I):E(C,[A],I,H,J);throw new TypeError("val must be string, number or Buffer")}function E(C,A,I,H,J){let te=1,ne=C.length,de=A.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(C.length<2||A.length<2)return-1;te=2,ne/=2,de/=2,I/=2}function Se(Re,Fe){return te===1?Re[Fe]:Re.readUInt16BE(Fe*te)}let xe;if(J){let Re=-1;for(xe=I;xe<ne;xe++)if(Se(C,xe)===Se(A,Re===-1?0:xe-Re)){if(Re===-1&&(Re=xe),xe-Re+1===de)return Re*te}else Re!==-1&&(xe-=xe-Re),Re=-1}else for(I+de>ne&&(I=ne-de),xe=I;xe>=0;xe--){let Re=!0;for(let Fe=0;Fe<de;Fe++)if(Se(C,xe+Fe)!==Se(A,Fe)){Re=!1;break}if(Re)return xe}return-1}a.prototype.includes=function(A,I,H){return this.indexOf(A,I,H)!==-1},a.prototype.indexOf=function(A,I,H){return G(this,A,I,H,!0)},a.prototype.lastIndexOf=function(A,I,H){return G(this,A,I,H,!1)};function y(C,A,I,H){I=Number(I)||0;const J=C.length-I;H?(H=Number(H),H>J&&(H=J)):H=J;const te=A.length;H>te/2&&(H=te/2);let ne;for(ne=0;ne<H;++ne){const de=parseInt(A.substr(ne*2,2),16);if(Oe(de))return ne;C[I+ne]=de}return ne}function T(C,A,I,H){return Ee(he(A,C.length-I),C,I,H)}function x(C,A,I,H){return Ee(le(A),C,I,H)}function _(C,A,I,H){return Ee(Ae(A),C,I,H)}function u(C,A,I,H){return Ee(_e(A,C.length-I),C,I,H)}a.prototype.write=function(A,I,H,J){if(I===void 0)J="utf8",H=this.length,I=0;else if(H===void 0&&typeof I=="string")J=I,H=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(H)?(H=H>>>0,J===void 0&&(J="utf8")):(J=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-I;if((H===void 0||H>te)&&(H=te),A.length>0&&(H<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let ne=!1;for(;;)switch(J){case"hex":return y(this,A,I,H);case"utf8":case"utf-8":return T(this,A,I,H);case"ascii":case"latin1":case"binary":return x(this,A,I,H);case"base64":return _(this,A,I,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,A,I,H);default:if(ne)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),ne=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function p(C,A,I){return A===0&&I===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(A,I))}function b(C,A,I){I=Math.min(C.length,I);const H=[];let J=A;for(;J<I;){const te=C[J];let ne=null,de=te>239?4:te>223?3:te>191?2:1;if(J+de<=I){let Se,xe,Re,Fe;switch(de){case 1:te<128&&(ne=te);break;case 2:Se=C[J+1],(Se&192)===128&&(Fe=(te&31)<<6|Se&63,Fe>127&&(ne=Fe));break;case 3:Se=C[J+1],xe=C[J+2],(Se&192)===128&&(xe&192)===128&&(Fe=(te&15)<<12|(Se&63)<<6|xe&63,Fe>2047&&(Fe<55296||Fe>57343)&&(ne=Fe));break;case 4:Se=C[J+1],xe=C[J+2],Re=C[J+3],(Se&192)===128&&(xe&192)===128&&(Re&192)===128&&(Fe=(te&15)<<18|(Se&63)<<12|(xe&63)<<6|Re&63,Fe>65535&&Fe<1114112&&(ne=Fe))}}ne===null?(ne=65533,de=1):ne>65535&&(ne-=65536,H.push(ne>>>10&1023|55296),ne=56320|ne&1023),H.push(ne),J+=de}return h(H)}const g=4096;function h(C){const A=C.length;if(A<=g)return String.fromCharCode.apply(String,C);let I="",H=0;for(;H<A;)I+=String.fromCharCode.apply(String,C.slice(H,H+=g));return I}function S(C,A,I){let H="";I=Math.min(C.length,I);for(let J=A;J<I;++J)H+=String.fromCharCode(C[J]&127);return H}function P(C,A,I){let H="";I=Math.min(C.length,I);for(let J=A;J<I;++J)H+=String.fromCharCode(C[J]);return H}function w(C,A,I){const H=C.length;(!A||A<0)&&(A=0),(!I||I<0||I>H)&&(I=H);let J="";for(let te=A;te<I;++te)J+=me[C[te]];return J}function m(C,A,I){const H=C.slice(A,I);let J="";for(let te=0;te<H.length-1;te+=2)J+=String.fromCharCode(H[te]+H[te+1]*256);return J}a.prototype.slice=function(A,I){const H=this.length;A=~~A,I=I===void 0?H:~~I,A<0?(A+=H,A<0&&(A=0)):A>H&&(A=H),I<0?(I+=H,I<0&&(I=0)):I>H&&(I=H),I<A&&(I=A);const J=this.subarray(A,I);return Object.setPrototypeOf(J,a.prototype),J};function M(C,A,I){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+A>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,I,H){A=A>>>0,I=I>>>0,H||M(A,I,this.length);let J=this[A],te=1,ne=0;for(;++ne<I&&(te*=256);)J+=this[A+ne]*te;return J},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,I,H){A=A>>>0,I=I>>>0,H||M(A,I,this.length);let J=this[A+--I],te=1;for(;I>0&&(te*=256);)J+=this[A+--I]*te;return J},a.prototype.readUint8=a.prototype.readUInt8=function(A,I){return A=A>>>0,I||M(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,I){return A=A>>>0,I||M(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,I){return A=A>>>0,I||M(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,I){return A=A>>>0,I||M(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,I){return A=A>>>0,I||M(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=pe(function(A){A=A>>>0,$(A,"offset");const I=this[A],H=this[A+7];(I===void 0||H===void 0)&&re(A,this.length-8);const J=I+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,te=this[++A]+this[++A]*2**8+this[++A]*2**16+H*2**24;return BigInt(J)+(BigInt(te)<<BigInt(32))}),a.prototype.readBigUInt64BE=pe(function(A){A=A>>>0,$(A,"offset");const I=this[A],H=this[A+7];(I===void 0||H===void 0)&&re(A,this.length-8);const J=I*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],te=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+H;return(BigInt(J)<<BigInt(32))+BigInt(te)}),a.prototype.readIntLE=function(A,I,H){A=A>>>0,I=I>>>0,H||M(A,I,this.length);let J=this[A],te=1,ne=0;for(;++ne<I&&(te*=256);)J+=this[A+ne]*te;return te*=128,J>=te&&(J-=Math.pow(2,8*I)),J},a.prototype.readIntBE=function(A,I,H){A=A>>>0,I=I>>>0,H||M(A,I,this.length);let J=I,te=1,ne=this[A+--J];for(;J>0&&(te*=256);)ne+=this[A+--J]*te;return te*=128,ne>=te&&(ne-=Math.pow(2,8*I)),ne},a.prototype.readInt8=function(A,I){return A=A>>>0,I||M(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,I){A=A>>>0,I||M(A,2,this.length);const H=this[A]|this[A+1]<<8;return H&32768?H|4294901760:H},a.prototype.readInt16BE=function(A,I){A=A>>>0,I||M(A,2,this.length);const H=this[A+1]|this[A]<<8;return H&32768?H|4294901760:H},a.prototype.readInt32LE=function(A,I){return A=A>>>0,I||M(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,I){return A=A>>>0,I||M(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=pe(function(A){A=A>>>0,$(A,"offset");const I=this[A],H=this[A+7];(I===void 0||H===void 0)&&re(A,this.length-8);const J=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(H<<24);return(BigInt(J)<<BigInt(32))+BigInt(I+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=pe(function(A){A=A>>>0,$(A,"offset");const I=this[A],H=this[A+7];(I===void 0||H===void 0)&&re(A,this.length-8);const J=(I<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt(J)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+H)}),a.prototype.readFloatLE=function(A,I){return A=A>>>0,I||M(A,4,this.length),r.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,I){return A=A>>>0,I||M(A,4,this.length),r.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,I){return A=A>>>0,I||M(A,8,this.length),r.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,I){return A=A>>>0,I||M(A,8,this.length),r.read(this,A,!1,52,8)};function ee(C,A,I,H,J,te){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>J||A<te)throw new RangeError('"value" argument is out of bounds');if(I+H>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,I,H,J){if(A=+A,I=I>>>0,H=H>>>0,!J){const de=Math.pow(2,8*H)-1;ee(this,A,I,H,de,0)}let te=1,ne=0;for(this[I]=A&255;++ne<H&&(te*=256);)this[I+ne]=A/te&255;return I+H},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,I,H,J){if(A=+A,I=I>>>0,H=H>>>0,!J){const de=Math.pow(2,8*H)-1;ee(this,A,I,H,de,0)}let te=H-1,ne=1;for(this[I+te]=A&255;--te>=0&&(ne*=256);)this[I+te]=A/ne&255;return I+H},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,1,255,0),this[I]=A&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,2,65535,0),this[I]=A&255,this[I+1]=A>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,2,65535,0),this[I]=A>>>8,this[I+1]=A&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,4,4294967295,0),this[I+3]=A>>>24,this[I+2]=A>>>16,this[I+1]=A>>>8,this[I]=A&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,4,4294967295,0),this[I]=A>>>24,this[I+1]=A>>>16,this[I+2]=A>>>8,this[I+3]=A&255,I+4};function Z(C,A,I,H,J){N(A,H,J,C,I,7);let te=Number(A&BigInt(4294967295));C[I++]=te,te=te>>8,C[I++]=te,te=te>>8,C[I++]=te,te=te>>8,C[I++]=te;let ne=Number(A>>BigInt(32)&BigInt(4294967295));return C[I++]=ne,ne=ne>>8,C[I++]=ne,ne=ne>>8,C[I++]=ne,ne=ne>>8,C[I++]=ne,I}function oe(C,A,I,H,J){N(A,H,J,C,I,7);let te=Number(A&BigInt(4294967295));C[I+7]=te,te=te>>8,C[I+6]=te,te=te>>8,C[I+5]=te,te=te>>8,C[I+4]=te;let ne=Number(A>>BigInt(32)&BigInt(4294967295));return C[I+3]=ne,ne=ne>>8,C[I+2]=ne,ne=ne>>8,C[I+1]=ne,ne=ne>>8,C[I]=ne,I+8}a.prototype.writeBigUInt64LE=pe(function(A,I=0){return Z(this,A,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=pe(function(A,I=0){return oe(this,A,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,I,H,J){if(A=+A,I=I>>>0,!J){const Se=Math.pow(2,8*H-1);ee(this,A,I,H,Se-1,-Se)}let te=0,ne=1,de=0;for(this[I]=A&255;++te<H&&(ne*=256);)A<0&&de===0&&this[I+te-1]!==0&&(de=1),this[I+te]=(A/ne>>0)-de&255;return I+H},a.prototype.writeIntBE=function(A,I,H,J){if(A=+A,I=I>>>0,!J){const Se=Math.pow(2,8*H-1);ee(this,A,I,H,Se-1,-Se)}let te=H-1,ne=1,de=0;for(this[I+te]=A&255;--te>=0&&(ne*=256);)A<0&&de===0&&this[I+te+1]!==0&&(de=1),this[I+te]=(A/ne>>0)-de&255;return I+H},a.prototype.writeInt8=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,1,127,-128),A<0&&(A=255+A+1),this[I]=A&255,I+1},a.prototype.writeInt16LE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,2,32767,-32768),this[I]=A&255,this[I+1]=A>>>8,I+2},a.prototype.writeInt16BE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,2,32767,-32768),this[I]=A>>>8,this[I+1]=A&255,I+2},a.prototype.writeInt32LE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,4,2147483647,-2147483648),this[I]=A&255,this[I+1]=A>>>8,this[I+2]=A>>>16,this[I+3]=A>>>24,I+4},a.prototype.writeInt32BE=function(A,I,H){return A=+A,I=I>>>0,H||ee(this,A,I,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[I]=A>>>24,this[I+1]=A>>>16,this[I+2]=A>>>8,this[I+3]=A&255,I+4},a.prototype.writeBigInt64LE=pe(function(A,I=0){return Z(this,A,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=pe(function(A,I=0){return oe(this,A,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(C,A,I,H,J,te){if(I+H>C.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function X(C,A,I,H,J){return A=+A,I=I>>>0,J||ae(C,A,I,4),r.write(C,A,I,H,23,4),I+4}a.prototype.writeFloatLE=function(A,I,H){return X(this,A,I,!0,H)},a.prototype.writeFloatBE=function(A,I,H){return X(this,A,I,!1,H)};function K(C,A,I,H,J){return A=+A,I=I>>>0,J||ae(C,A,I,8),r.write(C,A,I,H,52,8),I+8}a.prototype.writeDoubleLE=function(A,I,H){return K(this,A,I,!0,H)},a.prototype.writeDoubleBE=function(A,I,H){return K(this,A,I,!1,H)},a.prototype.copy=function(A,I,H,J){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(H||(H=0),!J&&J!==0&&(J=this.length),I>=A.length&&(I=A.length),I||(I=0),J>0&&J<H&&(J=H),J===H||A.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),A.length-I<J-H&&(J=A.length-I+H);const te=J-H;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,H,J):Uint8Array.prototype.set.call(A,this.subarray(H,J),I),te},a.prototype.fill=function(A,I,H,J){if(typeof A=="string"){if(typeof I=="string"?(J=I,I=0,H=this.length):typeof H=="string"&&(J=H,H=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!a.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(A.length===1){const ne=A.charCodeAt(0);(J==="utf8"&&ne<128||J==="latin1")&&(A=ne)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(I<0||this.length<I||this.length<H)throw new RangeError("Out of range index");if(H<=I)return this;I=I>>>0,H=H===void 0?this.length:H>>>0,A||(A=0);let te;if(typeof A=="number")for(te=I;te<H;++te)this[te]=A;else{const ne=a.isBuffer(A)?A:a.from(A,J),de=ne.length;if(de===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(te=0;te<H-I;++te)this[te+I]=ne[te%de]}return this};const k={};function B(C,A,I){k[C]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}B("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(C,A){return`The "${C}" argument must be of type number. Received type ${typeof A}`},TypeError),B("ERR_OUT_OF_RANGE",function(C,A,I){let H=`The value of "${C}" is out of range.`,J=I;return Number.isInteger(I)&&Math.abs(I)>2**32?J=v(String(I)):typeof I=="bigint"&&(J=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(J=v(J)),J+="n"),H+=` It must be ${A}. Received ${J}`,H},RangeError);function v(C){let A="",I=C.length;const H=C[0]==="-"?1:0;for(;I>=H+4;I-=3)A=`_${C.slice(I-3,I)}${A}`;return`${C.slice(0,I)}${A}`}function R(C,A,I){$(A,"offset"),(C[A]===void 0||C[A+I]===void 0)&&re(A,C.length-(I+1))}function N(C,A,I,H,J,te){if(C>I||C<A){const ne=typeof A=="bigint"?"n":"";let de;throw te>3?A===0||A===BigInt(0)?de=`>= 0${ne} and < 2${ne} ** ${(te+1)*8}${ne}`:de=`>= -(2${ne} ** ${(te+1)*8-1}${ne}) and < 2 ** ${(te+1)*8-1}${ne}`:de=`>= ${A}${ne} and <= ${I}${ne}`,new k.ERR_OUT_OF_RANGE("value",de,C)}R(H,J,te)}function $(C,A){if(typeof C!="number")throw new k.ERR_INVALID_ARG_TYPE(A,"number",C)}function re(C,A,I){throw Math.floor(C)!==C?($(C,I),new k.ERR_OUT_OF_RANGE(I||"offset","an integer",C)):A<0?new k.ERR_BUFFER_OUT_OF_BOUNDS:new k.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${A}`,C)}const ie=/[^+/0-9A-Za-z-_]/g;function fe(C){if(C=C.split("=")[0],C=C.trim().replace(ie,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function he(C,A){A=A||1/0;let I;const H=C.length;let J=null;const te=[];for(let ne=0;ne<H;++ne){if(I=C.charCodeAt(ne),I>55295&&I<57344){if(!J){if(I>56319){(A-=3)>-1&&te.push(239,191,189);continue}else if(ne+1===H){(A-=3)>-1&&te.push(239,191,189);continue}J=I;continue}if(I<56320){(A-=3)>-1&&te.push(239,191,189),J=I;continue}I=(J-55296<<10|I-56320)+65536}else J&&(A-=3)>-1&&te.push(239,191,189);if(J=null,I<128){if((A-=1)<0)break;te.push(I)}else if(I<2048){if((A-=2)<0)break;te.push(I>>6|192,I&63|128)}else if(I<65536){if((A-=3)<0)break;te.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((A-=4)<0)break;te.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return te}function le(C){const A=[];for(let I=0;I<C.length;++I)A.push(C.charCodeAt(I)&255);return A}function _e(C,A){let I,H,J;const te=[];for(let ne=0;ne<C.length&&!((A-=2)<0);++ne)I=C.charCodeAt(ne),H=I>>8,J=I%256,te.push(J),te.push(H);return te}function Ae(C){return e.toByteArray(fe(C))}function Ee(C,A,I,H){let J;for(J=0;J<H&&!(J+I>=A.length||J>=C.length);++J)A[J+I]=C[J];return J}function be(C,A){return C instanceof A||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===A.name}function Oe(C){return C!==C}const me=function(){const C="0123456789abcdef",A=new Array(256);for(let I=0;I<16;++I){const H=I*16;for(let J=0;J<16;++J)A[H+J]=C[I]+C[J]}return A}();function pe(C){return typeof BigInt>"u"?Pe:C}function Pe(){throw new Error("BigInt not supported")}})(ge);var Fr={},eo={},Yf={},Qf={};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.BrowserRandomSource=void 0;const Y0=65536;class vE{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Y0)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Y0)));return r}}Qf.BrowserRandomSource=vE;function mE(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zf={},kr={};Object.defineProperty(kr,"__esModule",{value:!0});function yE(t){for(var e=0;e<t.length;e++)t[e]=0;return t}kr.wipe=yE;const bs=ny(ry);Object.defineProperty(Zf,"__esModule",{value:!0});Zf.NodeRandomSource=void 0;const EE=kr;class _E{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof mE<"u"){const e=bs;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,EE.wipe)(r),n}}Zf.NodeRandomSource=_E;Object.defineProperty(Yf,"__esModule",{value:!0});Yf.SystemRandomSource=void 0;const wE=Qf,AE=Zf;class xE{constructor(){if(this.isAvailable=!1,this.name="",this._source=new wE.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new AE.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Yf.SystemRandomSource=xE;var Ue={},Jg={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,f=a&65535,d=c>>>16&65535,O=c&65535;return f*O+(l*O+f*d<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Jg);Object.defineProperty(Ue,"__esModule",{value:!0});var Yg=Jg;function SE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Ue.readInt16BE=SE;function RE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Ue.readUint16BE=RE;function IE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Ue.readInt16LE=IE;function TE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Ue.readUint16LE=TE;function Qg(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Ue.writeUint16BE=Qg;Ue.writeInt16BE=Qg;function Zg(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Ue.writeUint16LE=Zg;Ue.writeInt16LE=Zg;function Rd(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Ue.readInt32BE=Rd;function Id(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Ue.readUint32BE=Id;function Td(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Ue.readInt32LE=Td;function Od(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Ue.readUint32LE=Od;function lf(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Ue.writeUint32BE=lf;Ue.writeInt32BE=lf;function df(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Ue.writeUint32LE=df;Ue.writeInt32LE=df;function OE(t,e){e===void 0&&(e=0);var r=Rd(t,e),n=Rd(t,e+4);return r*4294967296+n-(n>>31)*4294967296}Ue.readInt64BE=OE;function PE(t,e){e===void 0&&(e=0);var r=Id(t,e),n=Id(t,e+4);return r*4294967296+n}Ue.readUint64BE=PE;function NE(t,e){e===void 0&&(e=0);var r=Td(t,e),n=Td(t,e+4);return n*4294967296+r-(r>>31)*4294967296}Ue.readInt64LE=NE;function ME(t,e){e===void 0&&(e=0);var r=Od(t,e),n=Od(t,e+4);return n*4294967296+r}Ue.readUint64LE=ME;function eb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),lf(t/4294967296>>>0,e,r),lf(t>>>0,e,r+4),e}Ue.writeUint64BE=eb;Ue.writeInt64BE=eb;function tb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),df(t>>>0,e,r),df(t/4294967296>>>0,e,r+4),e}Ue.writeUint64LE=tb;Ue.writeInt64LE=tb;function LE(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}Ue.readUintBE=LE;function CE(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}Ue.readUintLE=CE;function BE(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Yg.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}Ue.writeUintBE=BE;function kE(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Yg.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}Ue.writeUintLE=kE;function DE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Ue.readFloat32BE=DE;function UE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Ue.readFloat32LE=UE;function KE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Ue.readFloat64BE=KE;function HE(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Ue.readFloat64LE=HE;function FE(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}Ue.writeFloat32BE=FE;function jE(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}Ue.writeFloat32LE=jE;function GE(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}Ue.writeFloat64BE=GE;function VE(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}Ue.writeFloat64LE=VE;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Yf,r=Ue,n=kr;t.defaultRandomSource=new e.SystemRandomSource;function i(l,f=t.defaultRandomSource){return f.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const f=i(4,l),d=(0,r.readUint32LE)(f);return(0,n.wipe)(f),d}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=o,d=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let O="";const L=f.length,D=256-256%L;for(;l>0;){const z=i(Math.ceil(l*256/D),d);for(let q=0;q<z.length&&l>0;q++){const V=z[q];V<D&&(O+=f.charAt(V%L),l--)}(0,n.wipe)(z)}return O}t.randomString=a;function c(l,f=o,d=t.defaultRandomSource){const O=Math.ceil(l/(Math.log(f.length)/Math.LN2));return a(O,f,d)}t.randomStringForEntropy=c})(eo);var rb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ue,r=kr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[f++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[f++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,d=l/536870912|0,O=l<<3,L=l%128<112?128:256;this._buffer[f]=128;for(var D=f+1;D<L-8;D++)this._buffer[D]=0;e.writeUint32BE(d,this._buffer,L-8),e.writeUint32BE(O,this._buffer,L-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,L),this._finished=!0}for(var D=0;D<this.digestLength/8;D++)e.writeUint32BE(this._stateHi[D],c,D*8),e.writeUint32BE(this._stateLo[D],c,D*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,f,d,O,L){for(var D=l[0],z=l[1],q=l[2],V=l[3],U=l[4],W=l[5],F=l[6],j=l[7],G=f[0],E=f[1],y=f[2],T=f[3],x=f[4],_=f[5],u=f[6],p=f[7],b,g,h,S,P,w,m,M;L>=128;){for(var ee=0;ee<16;ee++){var Z=8*ee+O;a[ee]=e.readUint32BE(d,Z),c[ee]=e.readUint32BE(d,Z+4)}for(var ee=0;ee<80;ee++){var oe=D,ae=z,X=q,K=V,k=U,B=W,v=F,R=j,N=G,$=E,re=y,ie=T,fe=x,he=_,le=u,_e=p;if(b=j,g=p,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=(U>>>14|x<<32-14)^(U>>>18|x<<32-18)^(x>>>41-32|U<<32-(41-32)),g=(x>>>14|U<<32-14)^(x>>>18|U<<32-18)^(U>>>41-32|x<<32-(41-32)),P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,b=U&W^~U&F,g=x&_^~x&u,P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,b=i[ee*2],g=i[ee*2+1],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,b=a[ee%16],g=c[ee%16],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,h=m&65535|M<<16,S=P&65535|w<<16,b=h,g=S,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=(D>>>28|G<<32-28)^(G>>>34-32|D<<32-(34-32))^(G>>>39-32|D<<32-(39-32)),g=(G>>>28|D<<32-28)^(D>>>34-32|G<<32-(34-32))^(D>>>39-32|G<<32-(39-32)),P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,b=D&z^D&q^z&q,g=G&E^G&y^E&y,P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,R=m&65535|M<<16,_e=P&65535|w<<16,b=K,g=ie,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=h,g=S,P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,K=m&65535|M<<16,ie=P&65535|w<<16,z=oe,q=ae,V=X,U=K,W=k,F=B,j=v,D=R,E=N,y=$,T=re,x=ie,_=fe,u=he,p=le,G=_e,ee%16===15)for(var Z=0;Z<16;Z++)b=a[Z],g=c[Z],P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=a[(Z+9)%16],g=c[(Z+9)%16],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,h=a[(Z+1)%16],S=c[(Z+1)%16],b=(h>>>1|S<<32-1)^(h>>>8|S<<32-8)^h>>>7,g=(S>>>1|h<<32-1)^(S>>>8|h<<32-8)^(S>>>7|h<<32-7),P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,h=a[(Z+14)%16],S=c[(Z+14)%16],b=(h>>>19|S<<32-19)^(S>>>61-32|h<<32-(61-32))^h>>>6,g=(S>>>19|h<<32-19)^(h>>>61-32|S<<32-(61-32))^(S>>>6|h<<32-6),P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,a[Z]=m&65535|M<<16,c[Z]=P&65535|w<<16}b=D,g=G,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[0],g=f[0],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[0]=D=m&65535|M<<16,f[0]=G=P&65535|w<<16,b=z,g=E,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[1],g=f[1],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[1]=z=m&65535|M<<16,f[1]=E=P&65535|w<<16,b=q,g=y,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[2],g=f[2],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[2]=q=m&65535|M<<16,f[2]=y=P&65535|w<<16,b=V,g=T,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[3],g=f[3],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[3]=V=m&65535|M<<16,f[3]=T=P&65535|w<<16,b=U,g=x,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[4],g=f[4],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[4]=U=m&65535|M<<16,f[4]=x=P&65535|w<<16,b=W,g=_,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[5],g=f[5],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[5]=W=m&65535|M<<16,f[5]=_=P&65535|w<<16,b=F,g=u,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[6],g=f[6],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[6]=F=m&65535|M<<16,f[6]=u=P&65535|w<<16,b=j,g=p,P=g&65535,w=g>>>16,m=b&65535,M=b>>>16,b=l[7],g=f[7],P+=g&65535,w+=g>>>16,m+=b&65535,M+=b>>>16,w+=P>>>16,m+=w>>>16,M+=m>>>16,l[7]=j=m&65535|M<<16,f[7]=p=P&65535|w<<16,O+=128,L-=128}return O}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(rb);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=eo,r=rb,n=kr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(K){const k=new Float64Array(16);if(K)for(let B=0;B<K.length;B++)k[B]=K[B];return k}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),O=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function L(K,k){for(let B=0;B<16;B++)K[B]=k[B]|0}function D(K){let k=1;for(let B=0;B<16;B++){let v=K[B]+k+65535;k=Math.floor(v/65536),K[B]=v-k*65536}K[0]+=k-1+37*(k-1)}function z(K,k,B){const v=~(B-1);for(let R=0;R<16;R++){const N=v&(K[R]^k[R]);K[R]^=N,k[R]^=N}}function q(K,k){const B=i(),v=i();for(let R=0;R<16;R++)v[R]=k[R];D(v),D(v),D(v);for(let R=0;R<2;R++){B[0]=v[0]-65517;for(let $=1;$<15;$++)B[$]=v[$]-65535-(B[$-1]>>16&1),B[$-1]&=65535;B[15]=v[15]-32767-(B[14]>>16&1);const N=B[15]>>16&1;B[14]&=65535,z(v,B,1-N)}for(let R=0;R<16;R++)K[2*R]=v[R]&255,K[2*R+1]=v[R]>>8}function V(K,k){let B=0;for(let v=0;v<32;v++)B|=K[v]^k[v];return(1&B-1>>>8)-1}function U(K,k){const B=new Uint8Array(32),v=new Uint8Array(32);return q(B,K),q(v,k),V(B,v)}function W(K){const k=new Uint8Array(32);return q(k,K),k[0]&1}function F(K,k){for(let B=0;B<16;B++)K[B]=k[2*B]+(k[2*B+1]<<8);K[15]&=32767}function j(K,k,B){for(let v=0;v<16;v++)K[v]=k[v]+B[v]}function G(K,k,B){for(let v=0;v<16;v++)K[v]=k[v]-B[v]}function E(K,k,B){let v,R,N=0,$=0,re=0,ie=0,fe=0,he=0,le=0,_e=0,Ae=0,Ee=0,be=0,Oe=0,me=0,pe=0,Pe=0,C=0,A=0,I=0,H=0,J=0,te=0,ne=0,de=0,Se=0,xe=0,Re=0,Fe=0,pt=0,vt=0,co=0,_t=0,je=B[0],Ft=B[1],Ge=B[2],Ve=B[3],jt=B[4],qe=B[5],$e=B[6],Gt=B[7],ze=B[8],We=B[9],Vt=B[10],Xe=B[11],Je=B[12],qt=B[13],Ye=B[14],Qe=B[15];v=k[0],N+=v*je,$+=v*Ft,re+=v*Ge,ie+=v*Ve,fe+=v*jt,he+=v*qe,le+=v*$e,_e+=v*Gt,Ae+=v*ze,Ee+=v*We,be+=v*Vt,Oe+=v*Xe,me+=v*Je,pe+=v*qt,Pe+=v*Ye,C+=v*Qe,v=k[1],$+=v*je,re+=v*Ft,ie+=v*Ge,fe+=v*Ve,he+=v*jt,le+=v*qe,_e+=v*$e,Ae+=v*Gt,Ee+=v*ze,be+=v*We,Oe+=v*Vt,me+=v*Xe,pe+=v*Je,Pe+=v*qt,C+=v*Ye,A+=v*Qe,v=k[2],re+=v*je,ie+=v*Ft,fe+=v*Ge,he+=v*Ve,le+=v*jt,_e+=v*qe,Ae+=v*$e,Ee+=v*Gt,be+=v*ze,Oe+=v*We,me+=v*Vt,pe+=v*Xe,Pe+=v*Je,C+=v*qt,A+=v*Ye,I+=v*Qe,v=k[3],ie+=v*je,fe+=v*Ft,he+=v*Ge,le+=v*Ve,_e+=v*jt,Ae+=v*qe,Ee+=v*$e,be+=v*Gt,Oe+=v*ze,me+=v*We,pe+=v*Vt,Pe+=v*Xe,C+=v*Je,A+=v*qt,I+=v*Ye,H+=v*Qe,v=k[4],fe+=v*je,he+=v*Ft,le+=v*Ge,_e+=v*Ve,Ae+=v*jt,Ee+=v*qe,be+=v*$e,Oe+=v*Gt,me+=v*ze,pe+=v*We,Pe+=v*Vt,C+=v*Xe,A+=v*Je,I+=v*qt,H+=v*Ye,J+=v*Qe,v=k[5],he+=v*je,le+=v*Ft,_e+=v*Ge,Ae+=v*Ve,Ee+=v*jt,be+=v*qe,Oe+=v*$e,me+=v*Gt,pe+=v*ze,Pe+=v*We,C+=v*Vt,A+=v*Xe,I+=v*Je,H+=v*qt,J+=v*Ye,te+=v*Qe,v=k[6],le+=v*je,_e+=v*Ft,Ae+=v*Ge,Ee+=v*Ve,be+=v*jt,Oe+=v*qe,me+=v*$e,pe+=v*Gt,Pe+=v*ze,C+=v*We,A+=v*Vt,I+=v*Xe,H+=v*Je,J+=v*qt,te+=v*Ye,ne+=v*Qe,v=k[7],_e+=v*je,Ae+=v*Ft,Ee+=v*Ge,be+=v*Ve,Oe+=v*jt,me+=v*qe,pe+=v*$e,Pe+=v*Gt,C+=v*ze,A+=v*We,I+=v*Vt,H+=v*Xe,J+=v*Je,te+=v*qt,ne+=v*Ye,de+=v*Qe,v=k[8],Ae+=v*je,Ee+=v*Ft,be+=v*Ge,Oe+=v*Ve,me+=v*jt,pe+=v*qe,Pe+=v*$e,C+=v*Gt,A+=v*ze,I+=v*We,H+=v*Vt,J+=v*Xe,te+=v*Je,ne+=v*qt,de+=v*Ye,Se+=v*Qe,v=k[9],Ee+=v*je,be+=v*Ft,Oe+=v*Ge,me+=v*Ve,pe+=v*jt,Pe+=v*qe,C+=v*$e,A+=v*Gt,I+=v*ze,H+=v*We,J+=v*Vt,te+=v*Xe,ne+=v*Je,de+=v*qt,Se+=v*Ye,xe+=v*Qe,v=k[10],be+=v*je,Oe+=v*Ft,me+=v*Ge,pe+=v*Ve,Pe+=v*jt,C+=v*qe,A+=v*$e,I+=v*Gt,H+=v*ze,J+=v*We,te+=v*Vt,ne+=v*Xe,de+=v*Je,Se+=v*qt,xe+=v*Ye,Re+=v*Qe,v=k[11],Oe+=v*je,me+=v*Ft,pe+=v*Ge,Pe+=v*Ve,C+=v*jt,A+=v*qe,I+=v*$e,H+=v*Gt,J+=v*ze,te+=v*We,ne+=v*Vt,de+=v*Xe,Se+=v*Je,xe+=v*qt,Re+=v*Ye,Fe+=v*Qe,v=k[12],me+=v*je,pe+=v*Ft,Pe+=v*Ge,C+=v*Ve,A+=v*jt,I+=v*qe,H+=v*$e,J+=v*Gt,te+=v*ze,ne+=v*We,de+=v*Vt,Se+=v*Xe,xe+=v*Je,Re+=v*qt,Fe+=v*Ye,pt+=v*Qe,v=k[13],pe+=v*je,Pe+=v*Ft,C+=v*Ge,A+=v*Ve,I+=v*jt,H+=v*qe,J+=v*$e,te+=v*Gt,ne+=v*ze,de+=v*We,Se+=v*Vt,xe+=v*Xe,Re+=v*Je,Fe+=v*qt,pt+=v*Ye,vt+=v*Qe,v=k[14],Pe+=v*je,C+=v*Ft,A+=v*Ge,I+=v*Ve,H+=v*jt,J+=v*qe,te+=v*$e,ne+=v*Gt,de+=v*ze,Se+=v*We,xe+=v*Vt,Re+=v*Xe,Fe+=v*Je,pt+=v*qt,vt+=v*Ye,co+=v*Qe,v=k[15],C+=v*je,A+=v*Ft,I+=v*Ge,H+=v*Ve,J+=v*jt,te+=v*qe,ne+=v*$e,de+=v*Gt,Se+=v*ze,xe+=v*We,Re+=v*Vt,Fe+=v*Xe,pt+=v*Je,vt+=v*qt,co+=v*Ye,_t+=v*Qe,N+=38*A,$+=38*I,re+=38*H,ie+=38*J,fe+=38*te,he+=38*ne,le+=38*de,_e+=38*Se,Ae+=38*xe,Ee+=38*Re,be+=38*Fe,Oe+=38*pt,me+=38*vt,pe+=38*co,Pe+=38*_t,R=1,v=N+R+65535,R=Math.floor(v/65536),N=v-R*65536,v=$+R+65535,R=Math.floor(v/65536),$=v-R*65536,v=re+R+65535,R=Math.floor(v/65536),re=v-R*65536,v=ie+R+65535,R=Math.floor(v/65536),ie=v-R*65536,v=fe+R+65535,R=Math.floor(v/65536),fe=v-R*65536,v=he+R+65535,R=Math.floor(v/65536),he=v-R*65536,v=le+R+65535,R=Math.floor(v/65536),le=v-R*65536,v=_e+R+65535,R=Math.floor(v/65536),_e=v-R*65536,v=Ae+R+65535,R=Math.floor(v/65536),Ae=v-R*65536,v=Ee+R+65535,R=Math.floor(v/65536),Ee=v-R*65536,v=be+R+65535,R=Math.floor(v/65536),be=v-R*65536,v=Oe+R+65535,R=Math.floor(v/65536),Oe=v-R*65536,v=me+R+65535,R=Math.floor(v/65536),me=v-R*65536,v=pe+R+65535,R=Math.floor(v/65536),pe=v-R*65536,v=Pe+R+65535,R=Math.floor(v/65536),Pe=v-R*65536,v=C+R+65535,R=Math.floor(v/65536),C=v-R*65536,N+=R-1+37*(R-1),R=1,v=N+R+65535,R=Math.floor(v/65536),N=v-R*65536,v=$+R+65535,R=Math.floor(v/65536),$=v-R*65536,v=re+R+65535,R=Math.floor(v/65536),re=v-R*65536,v=ie+R+65535,R=Math.floor(v/65536),ie=v-R*65536,v=fe+R+65535,R=Math.floor(v/65536),fe=v-R*65536,v=he+R+65535,R=Math.floor(v/65536),he=v-R*65536,v=le+R+65535,R=Math.floor(v/65536),le=v-R*65536,v=_e+R+65535,R=Math.floor(v/65536),_e=v-R*65536,v=Ae+R+65535,R=Math.floor(v/65536),Ae=v-R*65536,v=Ee+R+65535,R=Math.floor(v/65536),Ee=v-R*65536,v=be+R+65535,R=Math.floor(v/65536),be=v-R*65536,v=Oe+R+65535,R=Math.floor(v/65536),Oe=v-R*65536,v=me+R+65535,R=Math.floor(v/65536),me=v-R*65536,v=pe+R+65535,R=Math.floor(v/65536),pe=v-R*65536,v=Pe+R+65535,R=Math.floor(v/65536),Pe=v-R*65536,v=C+R+65535,R=Math.floor(v/65536),C=v-R*65536,N+=R-1+37*(R-1),K[0]=N,K[1]=$,K[2]=re,K[3]=ie,K[4]=fe,K[5]=he,K[6]=le,K[7]=_e,K[8]=Ae,K[9]=Ee,K[10]=be,K[11]=Oe,K[12]=me,K[13]=pe,K[14]=Pe,K[15]=C}function y(K,k){E(K,k,k)}function T(K,k){const B=i();let v;for(v=0;v<16;v++)B[v]=k[v];for(v=253;v>=0;v--)y(B,B),v!==2&&v!==4&&E(B,B,k);for(v=0;v<16;v++)K[v]=B[v]}function x(K,k){const B=i();let v;for(v=0;v<16;v++)B[v]=k[v];for(v=250;v>=0;v--)y(B,B),v!==1&&E(B,B,k);for(v=0;v<16;v++)K[v]=B[v]}function _(K,k){const B=i(),v=i(),R=i(),N=i(),$=i(),re=i(),ie=i(),fe=i(),he=i();G(B,K[1],K[0]),G(he,k[1],k[0]),E(B,B,he),j(v,K[0],K[1]),j(he,k[0],k[1]),E(v,v,he),E(R,K[3],k[3]),E(R,R,l),E(N,K[2],k[2]),j(N,N,N),G($,v,B),G(re,N,R),j(ie,N,R),j(fe,v,B),E(K[0],$,re),E(K[1],fe,ie),E(K[2],ie,re),E(K[3],$,fe)}function u(K,k,B){for(let v=0;v<4;v++)z(K[v],k[v],B)}function p(K,k){const B=i(),v=i(),R=i();T(R,k[2]),E(B,k[0],R),E(v,k[1],R),q(K,v),K[31]^=W(B)<<7}function b(K,k,B){L(K[0],o),L(K[1],a),L(K[2],a),L(K[3],o);for(let v=255;v>=0;--v){const R=B[v/8|0]>>(v&7)&1;u(K,k,R),_(k,K),_(K,K),u(K,k,R)}}function g(K,k){const B=[i(),i(),i(),i()];L(B[0],f),L(B[1],d),L(B[2],a),E(B[3],f,d),b(K,B,k)}function h(K){if(K.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const k=(0,r.hash)(K);k[0]&=248,k[31]&=127,k[31]|=64;const B=new Uint8Array(32),v=[i(),i(),i(),i()];g(v,k),p(B,v);const R=new Uint8Array(64);return R.set(K),R.set(B,32),{publicKey:B,secretKey:R}}t.generateKeyPairFromSeed=h;function S(K){const k=(0,e.randomBytes)(32,K),B=h(k);return(0,n.wipe)(k),B}t.generateKeyPair=S;function P(K){if(K.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(K.subarray(32))}t.extractPublicKeyFromSecretKey=P;const w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function m(K,k){let B,v,R,N;for(v=63;v>=32;--v){for(B=0,R=v-32,N=v-12;R<N;++R)k[R]+=B-16*k[v]*w[R-(v-32)],B=Math.floor((k[R]+128)/256),k[R]-=B*256;k[R]+=B,k[v]=0}for(B=0,R=0;R<32;R++)k[R]+=B-(k[31]>>4)*w[R],B=k[R]>>8,k[R]&=255;for(R=0;R<32;R++)k[R]-=B*w[R];for(v=0;v<32;v++)k[v+1]+=k[v]>>8,K[v]=k[v]&255}function M(K){const k=new Float64Array(64);for(let B=0;B<64;B++)k[B]=K[B];for(let B=0;B<64;B++)K[B]=0;m(K,k)}function ee(K,k){const B=new Float64Array(64),v=[i(),i(),i(),i()],R=(0,r.hash)(K.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const N=new Uint8Array(64);N.set(R.subarray(32),32);const $=new r.SHA512;$.update(N.subarray(32)),$.update(k);const re=$.digest();$.clean(),M(re),g(v,re),p(N,v),$.reset(),$.update(N.subarray(0,32)),$.update(K.subarray(32)),$.update(k);const ie=$.digest();M(ie);for(let fe=0;fe<32;fe++)B[fe]=re[fe];for(let fe=0;fe<32;fe++)for(let he=0;he<32;he++)B[fe+he]+=ie[fe]*R[he];return m(N.subarray(32),B),N}t.sign=ee;function Z(K,k){const B=i(),v=i(),R=i(),N=i(),$=i(),re=i(),ie=i();return L(K[2],a),F(K[1],k),y(R,K[1]),E(N,R,c),G(R,R,K[2]),j(N,K[2],N),y($,N),y(re,$),E(ie,re,$),E(B,ie,R),E(B,B,N),x(B,B),E(B,B,R),E(B,B,N),E(B,B,N),E(K[0],B,N),y(v,K[0]),E(v,v,N),U(v,R)&&E(K[0],K[0],O),y(v,K[0]),E(v,v,N),U(v,R)?-1:(W(K[0])===k[31]>>7&&G(K[0],o,K[0]),E(K[3],K[0],K[1]),0)}function oe(K,k,B){const v=new Uint8Array(32),R=[i(),i(),i(),i()],N=[i(),i(),i(),i()];if(B.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Z(N,K))return!1;const $=new r.SHA512;$.update(B.subarray(0,32)),$.update(K),$.update(k);const re=$.digest();return M(re),b(R,N,re),g(N,B.subarray(32)),_(R,N),p(v,R),!V(B,v)}t.verify=oe;function ae(K){let k=[i(),i(),i(),i()];if(Z(k,K))throw new Error("Ed25519: invalid public key");let B=i(),v=i(),R=k[1];j(B,a,R),G(v,a,R),T(v,v),E(B,B,v);let N=new Uint8Array(32);return q(N,B),N}t.convertPublicKeyToX25519=ae;function X(K){const k=(0,r.hash)(K.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const B=new Uint8Array(k.subarray(0,32));return(0,n.wipe)(k),B}t.convertSecretKeyToX25519=X})(Fr);var on={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ue,r=kr;t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function a(c,l){if(c===void 0&&(c=64),this.digestLength=c,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),c<1||c>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");l&&this.validateConfig(l);var f=0;l&&l.key&&(f=l.key.length);var d=1,O=1;l&&l.tree&&(d=l.tree.fanout,O=l.tree.maxDepth),this._state[0]^=c|f<<8|d<<16|O<<24,l&&l.tree&&(this._state[1]^=l.tree.leafSize,this._state[2]^=l.tree.nodeOffsetLowBits,this._state[3]^=l.tree.nodeOffsetHighBits,this._state[4]^=l.tree.nodeDepth|l.tree.innerDigestLength<<8,this._lastNode=l.tree.lastNode),l&&l.salt&&(this._state[8]^=e.readUint32LE(l.salt,0),this._state[9]^=e.readUint32LE(l.salt,4),this._state[10]^=e.readUint32LE(l.salt,8),this._state[11]^=e.readUint32LE(l.salt,12)),l&&l.personalization&&(this._state[12]^=e.readUint32LE(l.personalization,0),this._state[13]^=e.readUint32LE(l.personalization,4),this._state[14]^=e.readUint32LE(l.personalization,8),this._state[15]^=e.readUint32LE(l.personalization,12)),this._initialState=new Uint32Array(this._state),l&&l.key&&f>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(l.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return a.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},a.prototype.validateConfig=function(c){if(c.key&&c.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(c.salt&&c.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(c.personalization&&c.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(c.tree){if(c.tree.fanout<0||c.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(c.tree.maxDepth<0||c.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(c.tree.leafSize<0||c.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(c.tree.innerDigestLength<0||c.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var f=t.BLOCK_SIZE-this._bufferLength,d=0;if(l===0)return this;if(l>f){for(var O=0;O<f;O++)this._buffer[this._bufferLength+O]=c[d+O];this._processBlock(t.BLOCK_SIZE),d+=f,l-=f,this._bufferLength=0}for(;l>t.BLOCK_SIZE;){for(var O=0;O<t.BLOCK_SIZE;O++)this._buffer[O]=c[d+O];this._processBlock(t.BLOCK_SIZE),d+=t.BLOCK_SIZE,l-=t.BLOCK_SIZE,this._bufferLength=0}for(var O=0;O<l;O++)this._buffer[this._bufferLength+O]=c[d+O];return this._bufferLength+=l,this},a.prototype.finish=function(c){if(!this._finished){for(var l=this._bufferLength;l<t.BLOCK_SIZE;l++)this._buffer[l]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var f=this._buffer.subarray(0,64),l=0;l<16;l++)e.writeUint32LE(this._state[l],f,l*4);return c.set(f.subarray(0,c.length)),this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},a.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._buffer.set(c.buffer),this._bufferLength=c.bufferLength,this._ctr.set(c.ctr),this._flag.set(c.flag),this._lastNode=c.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=c.paddedKey?new Uint8Array(c.paddedKey):void 0,this._initialState.set(c.initialState),this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),r.wipe(c.buffer),r.wipe(c.initialState),c.paddedKey&&r.wipe(c.paddedKey),c.bufferLength=0,r.wipe(c.ctr),r.wipe(c.flag),c.lastNode=!1},a.prototype._G=function(c,l,f,d,O,L,D,z,q,V,U,W,F){var j=c[l],G=c[L],E=c[f],y=c[D],T=c[d],x=c[z],_=c[O],u=c[q],p=j&65535,b=j>>>16,g=G&65535,h=G>>>16;p+=E&65535,b+=E>>>16,g+=y&65535,h+=y>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,G=g&65535|h<<16,j=p&65535|b<<16,p=j&65535,b=j>>>16,g=G&65535,h=G>>>16,p+=V&65535,b+=V>>>16,g+=U&65535,h+=U>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,G=g&65535|h<<16,j=p&65535|b<<16,_^=j,u^=G,p=u,u=_,_=p,p=T&65535,b=T>>>16,g=x&65535,h=x>>>16,p+=_&65535,b+=_>>>16,g+=u&65535,h+=u>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,x=g&65535|h<<16,T=p&65535|b<<16,E^=T,y^=x,p=E<<8|y>>>24,E=y<<8|E>>>24,y=p,p=j&65535,b=j>>>16,g=G&65535,h=G>>>16,p+=E&65535,b+=E>>>16,g+=y&65535,h+=y>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,G=g&65535|h<<16,j=p&65535|b<<16,p=j&65535,b=j>>>16,g=G&65535,h=G>>>16,p+=W&65535,b+=W>>>16,g+=F&65535,h+=F>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,G=g&65535|h<<16,j=p&65535|b<<16,_^=j,u^=G,p=_<<16|u>>>16,_=u<<16|_>>>16,u=p,p=T&65535,b=T>>>16,g=x&65535,h=x>>>16,p+=_&65535,b+=_>>>16,g+=u&65535,h+=u>>>16,b+=p>>>16,g+=b>>>16,h+=g>>>16,x=g&65535|h<<16,T=p&65535|b<<16,E^=T,y^=x,p=y<<1|E>>>31,E=E<<1|y>>>31,y=p,c[l]=j,c[L]=G,c[f]=E,c[D]=y,c[d]=T,c[z]=x,c[O]=_,c[q]=u},a.prototype._incrementCounter=function(c){for(var l=0;l<3;l++){var f=this._ctr[l]+c;if(this._ctr[l]=f>>>0,this._ctr[l]===f)return;c=1}},a.prototype._processBlock=function(c){this._incrementCounter(c);var l=this._vtmp;l.set(this._state),l.set(n,16),l[12*2+0]^=this._ctr[0],l[12*2+1]^=this._ctr[1],l[13*2+0]^=this._ctr[2],l[13*2+1]^=this._ctr[3],l[14*2+0]^=this._flag[0],l[14*2+1]^=this._flag[1],l[15*2+0]^=this._flag[2],l[15*2+1]^=this._flag[3];for(var f=this._mtmp,d=0;d<32;d++)f[d]=e.readUint32LE(this._buffer,d*4);for(var O=0;O<12;O++)this._G(l,0,8,16,24,1,9,17,25,f[i[O][0]],f[i[O][0]+1],f[i[O][1]],f[i[O][1]+1]),this._G(l,2,10,18,26,3,11,19,27,f[i[O][2]],f[i[O][2]+1],f[i[O][3]],f[i[O][3]+1]),this._G(l,4,12,20,28,5,13,21,29,f[i[O][4]],f[i[O][4]+1],f[i[O][5]],f[i[O][5]+1]),this._G(l,6,14,22,30,7,15,23,31,f[i[O][6]],f[i[O][6]+1],f[i[O][7]],f[i[O][7]+1]),this._G(l,0,10,20,30,1,11,21,31,f[i[O][8]],f[i[O][8]+1],f[i[O][9]],f[i[O][9]+1]),this._G(l,2,12,22,24,3,13,23,25,f[i[O][10]],f[i[O][10]+1],f[i[O][11]],f[i[O][11]+1]),this._G(l,4,14,16,26,5,15,17,27,f[i[O][12]],f[i[O][12]+1],f[i[O][13]],f[i[O][13]+1]),this._G(l,6,8,18,28,7,9,19,29,f[i[O][14]],f[i[O][14]+1],f[i[O][15]],f[i[O][15]+1]);for(var d=0;d<16;d++)this._state[d]^=l[d]^l[d+16]},a}();t.BLAKE2b=s;function o(a,c,l){c===void 0&&(c=t.DIGEST_LENGTH);var f=new s(c,l);f.update(a);var d=f.digest();return f.clean(),d}t.hash=o})(on);const qE="Input must be an string, Buffer or Uint8Array";function $E(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(qE);return e}function zE(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Ac(t){return(4294967296+t).toString(16).substring(1)}function WE(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=Ac(e[i]).toUpperCase(),n+=" ",n+=Ac(e[i+1]).toUpperCase();else if(r===64)n+=Ac(e[i+1]).toUpperCase(),n+=Ac(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function XE(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var nb={normalizeInput:$E,toHex:zE,debugPrint:WE,testSpeed:XE};const Qc=nb;function xc(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function Q0(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function ib(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function zi(t,e,r,n,i,s){const o=Ta[i],a=Ta[i+1],c=Ta[s],l=Ta[s+1];xc(ke,t,e),Q0(ke,t,o,a);let f=ke[n]^ke[t],d=ke[n+1]^ke[t+1];ke[n]=d,ke[n+1]=f,xc(ke,r,n),f=ke[e]^ke[r],d=ke[e+1]^ke[r+1],ke[e]=f>>>24^d<<8,ke[e+1]=d>>>24^f<<8,xc(ke,t,e),Q0(ke,t,c,l),f=ke[n]^ke[t],d=ke[n+1]^ke[t+1],ke[n]=f>>>16^d<<16,ke[n+1]=d>>>16^f<<16,xc(ke,r,n),f=ke[e]^ke[r],d=ke[e+1]^ke[r+1],ke[e]=d>>>31^f<<1,ke[e+1]=f>>>31^d<<1}const sb=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),JE=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],or=new Uint8Array(JE.map(function(t){return t*2})),ke=new Uint32Array(32),Ta=new Uint32Array(32);function ob(t,e){let r=0;for(r=0;r<16;r++)ke[r]=t.h[r],ke[r+16]=sb[r];for(ke[24]=ke[24]^t.t,ke[25]=ke[25]^t.t/4294967296,e&&(ke[28]=~ke[28],ke[29]=~ke[29]),r=0;r<32;r++)Ta[r]=ib(t.b,4*r);for(r=0;r<12;r++)zi(0,8,16,24,or[r*16+0],or[r*16+1]),zi(2,10,18,26,or[r*16+2],or[r*16+3]),zi(4,12,20,28,or[r*16+4],or[r*16+5]),zi(6,14,22,30,or[r*16+6],or[r*16+7]),zi(0,10,20,30,or[r*16+8],or[r*16+9]),zi(2,12,22,24,or[r*16+10],or[r*16+11]),zi(4,14,16,26,or[r*16+12],or[r*16+13]),zi(6,8,18,28,or[r*16+14],or[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^ke[r]^ke[r+16]}const Wi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function ab(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Wi.fill(0),Wi[0]=t,e&&(Wi[1]=e.length),Wi[2]=1,Wi[3]=1,r&&Wi.set(r,32),n&&Wi.set(n,48);for(let s=0;s<16;s++)i.h[s]=sb[s]^ib(Wi,s*4);return e&&(gh(i,e),i.c=128),i}function gh(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,ob(t,!1),t.c=0),t.b[t.c++]=e[r]}function cb(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;ob(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function fb(t,e,r,n,i){r=r||64,t=Qc.normalizeInput(t),n&&(n=Qc.normalizeInput(n)),i&&(i=Qc.normalizeInput(i));const s=ab(r,e,n,i);return gh(s,t),cb(s)}function YE(t,e,r,n,i){const s=fb(t,e,r,n,i);return Qc.toHex(s)}var QE={blake2b:fb,blake2bHex:YE,blake2bInit:ab,blake2bUpdate:gh,blake2bFinal:cb};const ub=nb;function ZE(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Xi(t,e,r,n,i,s){at[t]=at[t]+at[e]+i,at[n]=Sc(at[n]^at[t],16),at[r]=at[r]+at[n],at[e]=Sc(at[e]^at[r],12),at[t]=at[t]+at[e]+s,at[n]=Sc(at[n]^at[t],8),at[r]=at[r]+at[n],at[e]=Sc(at[e]^at[r],7)}function Sc(t,e){return t>>>e^t<<32-e}const lb=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ar=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),at=new Uint32Array(16),nr=new Uint32Array(16);function db(t,e){let r=0;for(r=0;r<8;r++)at[r]=t.h[r],at[r+8]=lb[r];for(at[12]^=t.t,at[13]^=t.t/4294967296,e&&(at[14]=~at[14]),r=0;r<16;r++)nr[r]=ZE(t.b,4*r);for(r=0;r<10;r++)Xi(0,4,8,12,nr[ar[r*16+0]],nr[ar[r*16+1]]),Xi(1,5,9,13,nr[ar[r*16+2]],nr[ar[r*16+3]]),Xi(2,6,10,14,nr[ar[r*16+4]],nr[ar[r*16+5]]),Xi(3,7,11,15,nr[ar[r*16+6]],nr[ar[r*16+7]]),Xi(0,5,10,15,nr[ar[r*16+8]],nr[ar[r*16+9]]),Xi(1,6,11,12,nr[ar[r*16+10]],nr[ar[r*16+11]]),Xi(2,7,8,13,nr[ar[r*16+12]],nr[ar[r*16+13]]),Xi(3,4,9,14,nr[ar[r*16+14]],nr[ar[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=at[r]^at[r+8]}function hb(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(lb),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(bh(n,e),n.c=64),n}function bh(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,db(t,!1),t.c=0),t.b[t.c++]=e[r]}function pb(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;db(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function gb(t,e,r){r=r||32,t=ub.normalizeInput(t);const n=hb(r,e);return bh(n,t),pb(n)}function e_(t,e,r){const n=gb(t,e,r);return ub.toHex(n)}var t_={blake2s:gb,blake2sHex:e_,blake2sInit:hb,blake2sUpdate:bh,blake2sFinal:pb};const da=QE,ha=t_;var r_={blake2b:da.blake2b,blake2bHex:da.blake2bHex,blake2bInit:da.blake2bInit,blake2bUpdate:da.blake2bUpdate,blake2bFinal:da.blake2bFinal,blake2s:ha.blake2s,blake2sHex:ha.blake2sHex,blake2sInit:ha.blake2sInit,blake2sUpdate:ha.blake2sUpdate,blake2sFinal:ha.blake2sFinal},Ot={},Z0={get exports(){return Ot},set exports(t){Ot=t}};typeof Object.create=="function"?Z0.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Z0.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var wr={},n_={get exports(){return wr},set exports(t){wr=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=ge,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(n_,wr);var hf={},i_={get exports(){return hf},set exports(t){hf=t}},bb=bs.EventEmitter,ml,ep;function s_(){if(ep)return ml;ep=1;function t(D,z){var q=Object.keys(D);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(D);z&&(V=V.filter(function(U){return Object.getOwnPropertyDescriptor(D,U).enumerable})),q.push.apply(q,V)}return q}function e(D){for(var z=1;z<arguments.length;z++){var q=arguments[z]!=null?arguments[z]:{};z%2?t(Object(q),!0).forEach(function(V){r(D,V,q[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(q)):t(Object(q)).forEach(function(V){Object.defineProperty(D,V,Object.getOwnPropertyDescriptor(q,V))})}return D}function r(D,z,q){return z=o(z),z in D?Object.defineProperty(D,z,{value:q,enumerable:!0,configurable:!0,writable:!0}):D[z]=q,D}function n(D,z){if(!(D instanceof z))throw new TypeError("Cannot call a class as a function")}function i(D,z){for(var q=0;q<z.length;q++){var V=z[q];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(D,o(V.key),V)}}function s(D,z,q){return z&&i(D.prototype,z),q&&i(D,q),Object.defineProperty(D,"prototype",{writable:!1}),D}function o(D){var z=a(D,"string");return typeof z=="symbol"?z:String(z)}function a(D,z){if(typeof D!="object"||D===null)return D;var q=D[Symbol.toPrimitive];if(q!==void 0){var V=q.call(D,z||"default");if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(D)}var c=ge,l=c.Buffer,f=bs,d=f.inspect,O=d&&d.custom||"inspect";function L(D,z,q){l.prototype.copy.call(D,z,q)}return ml=function(){function D(){n(this,D),this.head=null,this.tail=null,this.length=0}return s(D,[{key:"push",value:function(q){var V={data:q,next:null};this.length>0?this.tail.next=V:this.head=V,this.tail=V,++this.length}},{key:"unshift",value:function(q){var V={data:q,next:this.head};this.length===0&&(this.tail=V),this.head=V,++this.length}},{key:"shift",value:function(){if(this.length!==0){var q=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,q}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(q){if(this.length===0)return"";for(var V=this.head,U=""+V.data;V=V.next;)U+=q+V.data;return U}},{key:"concat",value:function(q){if(this.length===0)return l.alloc(0);for(var V=l.allocUnsafe(q>>>0),U=this.head,W=0;U;)L(U.data,V,W),W+=U.data.length,U=U.next;return V}},{key:"consume",value:function(q,V){var U;return q<this.head.data.length?(U=this.head.data.slice(0,q),this.head.data=this.head.data.slice(q)):q===this.head.data.length?U=this.shift():U=V?this._getString(q):this._getBuffer(q),U}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(q){var V=this.head,U=1,W=V.data;for(q-=W.length;V=V.next;){var F=V.data,j=q>F.length?F.length:q;if(j===F.length?W+=F:W+=F.slice(0,q),q-=j,q===0){j===F.length?(++U,V.next?this.head=V.next:this.head=this.tail=null):(this.head=V,V.data=F.slice(j));break}++U}return this.length-=U,W}},{key:"_getBuffer",value:function(q){var V=l.allocUnsafe(q),U=this.head,W=1;for(U.data.copy(V),q-=U.data.length;U=U.next;){var F=U.data,j=q>F.length?F.length:q;if(F.copy(V,V.length-q,0,j),q-=j,q===0){j===F.length?(++W,U.next?this.head=U.next:this.head=this.tail=null):(this.head=U,U.data=F.slice(j));break}++W}return this.length-=W,V}},{key:O,value:function(q,V){return d(this,e(e({},V),{},{depth:0,customInspect:!1}))}}]),D}(),ml}function o_(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,tt.nextTick(Pd,this,t)):tt.nextTick(Pd,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?tt.nextTick(Zc,r):(r._writableState.errorEmitted=!0,tt.nextTick(tp,r,s)):tt.nextTick(tp,r,s):e?(tt.nextTick(Zc,r),e(s)):tt.nextTick(Zc,r)}),this)}function tp(t,e){Pd(t,e),Zc(t)}function Zc(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a_(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Pd(t,e){t.emit("error",e)}function c_(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var vb={destroy:o_,undestroy:a_,errorOrDestroy:c_},to={};function f_(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var mb={};function cn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){f_(o,s);function o(a,c,l){return s.call(this,n(a,c,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,mb[t]=i}function rp(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function u_(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function l_(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function d_(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}cn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);cn("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&u_(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(l_(t," argument"))i="The ".concat(t," ").concat(n," ").concat(rp(e,"type"));else{var s=d_(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(rp(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);cn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");cn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});cn("ERR_STREAM_PREMATURE_CLOSE","Premature close");cn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});cn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");cn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");cn("ERR_STREAM_WRITE_AFTER_END","write after end");cn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);cn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);cn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");to.codes=mb;var h_=to.codes.ERR_INVALID_OPT_VALUE;function p_(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function g_(t,e,r,n){var i=p_(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new h_(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var yb={getHighWaterMark:g_},b_=v_;function v_(t,e){if(yl("noDeprecation"))return t;var r=!1;function n(){if(!r){if(yl("throwDeprecation"))throw new Error(e);yl("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function yl(t){try{if(!xn.localStorage)return!1}catch{return!1}var e=xn.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var El,np;function Eb(){if(np)return El;np=1,El=y;function t(X){var K=this;this.next=null,this.entry=null,this.finish=function(){ae(K,X)}}var e;y.WritableState=G;var r={deprecate:b_},n=bb,i=ge.Buffer,s=(typeof xn<"u"?xn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(X){return i.from(X)}function a(X){return i.isBuffer(X)||X instanceof s}var c=vb,l=yb,f=l.getHighWaterMark,d=to.codes,O=d.ERR_INVALID_ARG_TYPE,L=d.ERR_METHOD_NOT_IMPLEMENTED,D=d.ERR_MULTIPLE_CALLBACK,z=d.ERR_STREAM_CANNOT_PIPE,q=d.ERR_STREAM_DESTROYED,V=d.ERR_STREAM_NULL_VALUES,U=d.ERR_STREAM_WRITE_AFTER_END,W=d.ERR_UNKNOWN_ENCODING,F=c.errorOrDestroy;Ot(y,n);function j(){}function G(X,K,k){e=e||Lo(),X=X||{},typeof k!="boolean"&&(k=K instanceof e),this.objectMode=!!X.objectMode,k&&(this.objectMode=this.objectMode||!!X.writableObjectMode),this.highWaterMark=f(this,X,"writableHighWaterMark",k),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var B=X.decodeStrings===!1;this.decodeStrings=!B,this.defaultEncoding=X.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(v){h(K,v)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}G.prototype.getBuffer=function(){for(var K=this.bufferedRequest,k=[];K;)k.push(K),K=K.next;return k},function(){try{Object.defineProperty(G.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var E;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(K){return E.call(this,K)?!0:this!==y?!1:K&&K._writableState instanceof G}})):E=function(K){return K instanceof this};function y(X){e=e||Lo();var K=this instanceof e;if(!K&&!E.call(y,this))return new y(X);this._writableState=new G(X,this,K),this.writable=!0,X&&(typeof X.write=="function"&&(this._write=X.write),typeof X.writev=="function"&&(this._writev=X.writev),typeof X.destroy=="function"&&(this._destroy=X.destroy),typeof X.final=="function"&&(this._final=X.final)),n.call(this)}y.prototype.pipe=function(){F(this,new z)};function T(X,K){var k=new U;F(X,k),tt.nextTick(K,k)}function x(X,K,k,B){var v;return k===null?v=new V:typeof k!="string"&&!K.objectMode&&(v=new O("chunk",["string","Buffer"],k)),v?(F(X,v),tt.nextTick(B,v),!1):!0}y.prototype.write=function(X,K,k){var B=this._writableState,v=!1,R=!B.objectMode&&a(X);return R&&!i.isBuffer(X)&&(X=o(X)),typeof K=="function"&&(k=K,K=null),R?K="buffer":K||(K=B.defaultEncoding),typeof k!="function"&&(k=j),B.ending?T(this,k):(R||x(this,B,X,k))&&(B.pendingcb++,v=u(this,B,R,X,K,k)),v},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var X=this._writableState;X.corked&&(X.corked--,!X.writing&&!X.corked&&!X.bufferProcessing&&X.bufferedRequest&&w(this,X))},y.prototype.setDefaultEncoding=function(K){if(typeof K=="string"&&(K=K.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((K+"").toLowerCase())>-1))throw new W(K);return this._writableState.defaultEncoding=K,this},Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function _(X,K,k){return!X.objectMode&&X.decodeStrings!==!1&&typeof K=="string"&&(K=i.from(K,k)),K}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function u(X,K,k,B,v,R){if(!k){var N=_(K,B,v);B!==N&&(k=!0,v="buffer",B=N)}var $=K.objectMode?1:B.length;K.length+=$;var re=K.length<K.highWaterMark;if(re||(K.needDrain=!0),K.writing||K.corked){var ie=K.lastBufferedRequest;K.lastBufferedRequest={chunk:B,encoding:v,isBuf:k,callback:R,next:null},ie?ie.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else p(X,K,!1,$,B,v,R);return re}function p(X,K,k,B,v,R,N){K.writelen=B,K.writecb=N,K.writing=!0,K.sync=!0,K.destroyed?K.onwrite(new q("write")):k?X._writev(v,K.onwrite):X._write(v,R,K.onwrite),K.sync=!1}function b(X,K,k,B,v){--K.pendingcb,k?(tt.nextTick(v,B),tt.nextTick(Z,X,K),X._writableState.errorEmitted=!0,F(X,B)):(v(B),X._writableState.errorEmitted=!0,F(X,B),Z(X,K))}function g(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0}function h(X,K){var k=X._writableState,B=k.sync,v=k.writecb;if(typeof v!="function")throw new D;if(g(k),K)b(X,k,B,K,v);else{var R=m(k)||X.destroyed;!R&&!k.corked&&!k.bufferProcessing&&k.bufferedRequest&&w(X,k),B?tt.nextTick(S,X,k,R,v):S(X,k,R,v)}}function S(X,K,k,B){k||P(X,K),K.pendingcb--,B(),Z(X,K)}function P(X,K){K.length===0&&K.needDrain&&(K.needDrain=!1,X.emit("drain"))}function w(X,K){K.bufferProcessing=!0;var k=K.bufferedRequest;if(X._writev&&k&&k.next){var B=K.bufferedRequestCount,v=new Array(B),R=K.corkedRequestsFree;R.entry=k;for(var N=0,$=!0;k;)v[N]=k,k.isBuf||($=!1),k=k.next,N+=1;v.allBuffers=$,p(X,K,!0,K.length,v,"",R.finish),K.pendingcb++,K.lastBufferedRequest=null,R.next?(K.corkedRequestsFree=R.next,R.next=null):K.corkedRequestsFree=new t(K),K.bufferedRequestCount=0}else{for(;k;){var re=k.chunk,ie=k.encoding,fe=k.callback,he=K.objectMode?1:re.length;if(p(X,K,!1,he,re,ie,fe),k=k.next,K.bufferedRequestCount--,K.writing)break}k===null&&(K.lastBufferedRequest=null)}K.bufferedRequest=k,K.bufferProcessing=!1}y.prototype._write=function(X,K,k){k(new L("_write()"))},y.prototype._writev=null,y.prototype.end=function(X,K,k){var B=this._writableState;return typeof X=="function"?(k=X,X=null,K=null):typeof K=="function"&&(k=K,K=null),X!=null&&this.write(X,K),B.corked&&(B.corked=1,this.uncork()),B.ending||oe(this,B,k),this},Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function m(X){return X.ending&&X.length===0&&X.bufferedRequest===null&&!X.finished&&!X.writing}function M(X,K){X._final(function(k){K.pendingcb--,k&&F(X,k),K.prefinished=!0,X.emit("prefinish"),Z(X,K)})}function ee(X,K){!K.prefinished&&!K.finalCalled&&(typeof X._final=="function"&&!K.destroyed?(K.pendingcb++,K.finalCalled=!0,tt.nextTick(M,X,K)):(K.prefinished=!0,X.emit("prefinish")))}function Z(X,K){var k=m(K);if(k&&(ee(X,K),K.pendingcb===0&&(K.finished=!0,X.emit("finish"),K.autoDestroy))){var B=X._readableState;(!B||B.autoDestroy&&B.endEmitted)&&X.destroy()}return k}function oe(X,K,k){K.ending=!0,Z(X,K),k&&(K.finished?tt.nextTick(k):X.once("finish",k)),K.ended=!0,X.writable=!1}function ae(X,K,k){var B=X.entry;for(X.entry=null;B;){var v=B.callback;K.pendingcb--,v(k),B=B.next}K.corkedRequestsFree.next=X}return Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(K){this._writableState&&(this._writableState.destroyed=K)}}),y.prototype.destroy=c.destroy,y.prototype._undestroy=c.undestroy,y.prototype._destroy=function(X,K){K(X)},El}var _l,ip;function Lo(){if(ip)return _l;ip=1;var t=Object.keys||function(l){var f=[];for(var d in l)f.push(d);return f};_l=o;var e=wb(),r=Eb();Ot(o,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(l){if(!(this instanceof o))return new o(l);e.call(this,l),r.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||tt.nextTick(c,this)}function c(l){l.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),_l}var pf={},vh=wr.Buffer,sp=vh.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function m_(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function y_(t){var e=m_(t);if(typeof e!="string"&&(vh.isEncoding===sp||!sp(t)))throw new Error("Unknown encoding: "+t);return e||t}pf.StringDecoder=nc;function nc(t){this.encoding=y_(t);var e;switch(this.encoding){case"utf16le":this.text=S_,this.end=R_,e=4;break;case"utf8":this.fillLast=w_,e=4;break;case"base64":this.text=I_,this.end=T_,e=3;break;default:this.write=O_,this.end=P_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=vh.allocUnsafe(e)}nc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};nc.prototype.end=x_;nc.prototype.text=A_;nc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function wl(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function E_(t,e,r){var n=e.length-1;if(n<r)return 0;var i=wl(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=wl(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=wl(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function __(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function w_(t){var e=this.lastTotal-this.lastNeed,r=__(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function A_(t,e){var r=E_(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function x_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function S_(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function R_(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function I_(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function T_(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function O_(t){return t.toString(this.encoding)}function P_(t){return t&&t.length?this.write(t):""}var op=to.codes.ERR_STREAM_PREMATURE_CLOSE;function N_(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function M_(){}function L_(t){return t.setHeader&&typeof t.abort=="function"}function _b(t,e,r){if(typeof e=="function")return _b(t,null,e);e||(e={}),r=N_(r||M_);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,i||r.call(t)},f=function(D){r.call(t,D)},d=function(){var D;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(D=new op),r.call(t,D);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(D=new op),r.call(t,D)},O=function(){t.req.on("finish",a)};return L_(t)?(t.on("complete",a),t.on("abort",d),t.req?O():t.on("request",O)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",O),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",d)}}var mh=_b,Al,ap;function C_(){if(ap)return Al;ap=1;var t;function e(W,F,j){return F=r(F),F in W?Object.defineProperty(W,F,{value:j,enumerable:!0,configurable:!0,writable:!0}):W[F]=j,W}function r(W){var F=n(W,"string");return typeof F=="symbol"?F:String(F)}function n(W,F){if(typeof W!="object"||W===null)return W;var j=W[Symbol.toPrimitive];if(j!==void 0){var G=j.call(W,F||"default");if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(W)}var i=mh,s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function O(W,F){return{value:W,done:F}}function L(W){var F=W[s];if(F!==null){var j=W[d].read();j!==null&&(W[l]=null,W[s]=null,W[o]=null,F(O(j,!1)))}}function D(W){tt.nextTick(L,W)}function z(W,F){return function(j,G){W.then(function(){if(F[c]){j(O(void 0,!0));return}F[f](j,G)},G)}}var q=Object.getPrototypeOf(function(){}),V=Object.setPrototypeOf((t={get stream(){return this[d]},next:function(){var F=this,j=this[a];if(j!==null)return Promise.reject(j);if(this[c])return Promise.resolve(O(void 0,!0));if(this[d].destroyed)return new Promise(function(T,x){tt.nextTick(function(){F[a]?x(F[a]):T(O(void 0,!0))})});var G=this[l],E;if(G)E=new Promise(z(G,this));else{var y=this[d].read();if(y!==null)return Promise.resolve(O(y,!1));E=new Promise(this[f])}return this[l]=E,E}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var F=this;return new Promise(function(j,G){F[d].destroy(null,function(E){if(E){G(E);return}j(O(void 0,!0))})})}),t),q),U=function(F){var j,G=Object.create(V,(j={},e(j,d,{value:F,writable:!0}),e(j,s,{value:null,writable:!0}),e(j,o,{value:null,writable:!0}),e(j,a,{value:null,writable:!0}),e(j,c,{value:F._readableState.endEmitted,writable:!0}),e(j,f,{value:function(y,T){var x=G[d].read();x?(G[l]=null,G[s]=null,G[o]=null,y(O(x,!1))):(G[s]=y,G[o]=T)},writable:!0}),j));return G[l]=null,i(F,function(E){if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=G[o];y!==null&&(G[l]=null,G[s]=null,G[o]=null,y(E)),G[a]=E;return}var T=G[s];T!==null&&(G[l]=null,G[s]=null,G[o]=null,T(O(void 0,!0))),G[c]=!0}),F.on("readable",D.bind(null,G)),G};return Al=U,Al}var xl,cp;function B_(){return cp||(cp=1,xl=function(){throw new Error("Readable.from is not available in the browser")}),xl}var Sl,fp;function wb(){if(fp)return Sl;fp=1,Sl=T;var t;T.ReadableState=y,bs.EventEmitter;var e=function(N,$){return N.listeners($).length},r=bb,n=ge.Buffer,i=(typeof xn<"u"?xn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(R){return n.from(R)}function o(R){return n.isBuffer(R)||R instanceof i}var a=bs,c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var l=s_(),f=vb,d=yb,O=d.getHighWaterMark,L=to.codes,D=L.ERR_INVALID_ARG_TYPE,z=L.ERR_STREAM_PUSH_AFTER_EOF,q=L.ERR_METHOD_NOT_IMPLEMENTED,V=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,U,W,F;Ot(T,r);var j=f.errorOrDestroy,G=["error","close","destroy","pause","resume"];function E(R,N,$){if(typeof R.prependListener=="function")return R.prependListener(N,$);!R._events||!R._events[N]?R.on(N,$):Array.isArray(R._events[N])?R._events[N].unshift($):R._events[N]=[$,R._events[N]]}function y(R,N,$){t=t||Lo(),R=R||{},typeof $!="boolean"&&($=N instanceof t),this.objectMode=!!R.objectMode,$&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=O(this,R,"readableHighWaterMark",$),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(U||(U=pf.StringDecoder),this.decoder=new U(R.encoding),this.encoding=R.encoding)}function T(R){if(t=t||Lo(),!(this instanceof T))return new T(R);var N=this instanceof t;this._readableState=new y(R,this,N),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),r.call(this)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(N){this._readableState&&(this._readableState.destroyed=N)}}),T.prototype.destroy=f.destroy,T.prototype._undestroy=f.undestroy,T.prototype._destroy=function(R,N){N(R)},T.prototype.push=function(R,N){var $=this._readableState,re;return $.objectMode?re=!0:typeof R=="string"&&(N=N||$.defaultEncoding,N!==$.encoding&&(R=n.from(R,N),N=""),re=!0),x(this,R,N,!1,re)},T.prototype.unshift=function(R){return x(this,R,null,!0,!1)};function x(R,N,$,re,ie){c("readableAddChunk",N);var fe=R._readableState;if(N===null)fe.reading=!1,h(R,fe);else{var he;if(ie||(he=u(fe,N)),he)j(R,he);else if(fe.objectMode||N&&N.length>0)if(typeof N!="string"&&!fe.objectMode&&Object.getPrototypeOf(N)!==n.prototype&&(N=s(N)),re)fe.endEmitted?j(R,new V):_(R,fe,N,!0);else if(fe.ended)j(R,new z);else{if(fe.destroyed)return!1;fe.reading=!1,fe.decoder&&!$?(N=fe.decoder.write(N),fe.objectMode||N.length!==0?_(R,fe,N,!1):w(R,fe)):_(R,fe,N,!1)}else re||(fe.reading=!1,w(R,fe))}return!fe.ended&&(fe.length<fe.highWaterMark||fe.length===0)}function _(R,N,$,re){N.flowing&&N.length===0&&!N.sync?(N.awaitDrain=0,R.emit("data",$)):(N.length+=N.objectMode?1:$.length,re?N.buffer.unshift($):N.buffer.push($),N.needReadable&&S(R)),w(R,N)}function u(R,N){var $;return!o(N)&&typeof N!="string"&&N!==void 0&&!R.objectMode&&($=new D("chunk",["string","Buffer","Uint8Array"],N)),$}T.prototype.isPaused=function(){return this._readableState.flowing===!1},T.prototype.setEncoding=function(R){U||(U=pf.StringDecoder);var N=new U(R);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var $=this._readableState.buffer.head,re="";$!==null;)re+=N.write($.data),$=$.next;return this._readableState.buffer.clear(),re!==""&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var p=1073741824;function b(R){return R>=p?R=p:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}function g(R,N){return R<=0||N.length===0&&N.ended?0:N.objectMode?1:R!==R?N.flowing&&N.length?N.buffer.head.data.length:N.length:(R>N.highWaterMark&&(N.highWaterMark=b(R)),R<=N.length?R:N.ended?N.length:(N.needReadable=!0,0))}T.prototype.read=function(R){c("read",R),R=parseInt(R,10);var N=this._readableState,$=R;if(R!==0&&(N.emittedReadable=!1),R===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return c("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?k(this):S(this),null;if(R=g(R,N),R===0&&N.ended)return N.length===0&&k(this),null;var re=N.needReadable;c("need readable",re),(N.length===0||N.length-R<N.highWaterMark)&&(re=!0,c("length less than watermark",re)),N.ended||N.reading?(re=!1,c("reading or ended",re)):re&&(c("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(R=g($,N)));var ie;return R>0?ie=K(R,N):ie=null,ie===null?(N.needReadable=N.length<=N.highWaterMark,R=0):(N.length-=R,N.awaitDrain=0),N.length===0&&(N.ended||(N.needReadable=!0),$!==R&&N.ended&&k(this)),ie!==null&&this.emit("data",ie),ie};function h(R,N){if(c("onEofChunk"),!N.ended){if(N.decoder){var $=N.decoder.end();$&&$.length&&(N.buffer.push($),N.length+=N.objectMode?1:$.length)}N.ended=!0,N.sync?S(R):(N.needReadable=!1,N.emittedReadable||(N.emittedReadable=!0,P(R)))}}function S(R){var N=R._readableState;c("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(c("emitReadable",N.flowing),N.emittedReadable=!0,tt.nextTick(P,R))}function P(R){var N=R._readableState;c("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&(N.length||N.ended)&&(R.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,X(R)}function w(R,N){N.readingMore||(N.readingMore=!0,tt.nextTick(m,R,N))}function m(R,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){var $=N.length;if(c("maybeReadMore read 0"),R.read(0),$===N.length)break}N.readingMore=!1}T.prototype._read=function(R){j(this,new q("_read()"))},T.prototype.pipe=function(R,N){var $=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=R;break;case 1:re.pipes=[re.pipes,R];break;default:re.pipes.push(R);break}re.pipesCount+=1,c("pipe count=%d opts=%j",re.pipesCount,N);var ie=(!N||N.end!==!1)&&R!==tt.stdout&&R!==tt.stderr,fe=ie?le:Pe;re.endEmitted?tt.nextTick(fe):$.once("end",fe),R.on("unpipe",he);function he(C,A){c("onunpipe"),C===$&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,Ee())}function le(){c("onend"),R.end()}var _e=M($);R.on("drain",_e);var Ae=!1;function Ee(){c("cleanup"),R.removeListener("close",me),R.removeListener("finish",pe),R.removeListener("drain",_e),R.removeListener("error",Oe),R.removeListener("unpipe",he),$.removeListener("end",le),$.removeListener("end",Pe),$.removeListener("data",be),Ae=!0,re.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&_e()}$.on("data",be);function be(C){c("ondata");var A=R.write(C);c("dest.write",A),A===!1&&((re.pipesCount===1&&re.pipes===R||re.pipesCount>1&&v(re.pipes,R)!==-1)&&!Ae&&(c("false write response, pause",re.awaitDrain),re.awaitDrain++),$.pause())}function Oe(C){c("onerror",C),Pe(),R.removeListener("error",Oe),e(R,"error")===0&&j(R,C)}E(R,"error",Oe);function me(){R.removeListener("finish",pe),Pe()}R.once("close",me);function pe(){c("onfinish"),R.removeListener("close",me),Pe()}R.once("finish",pe);function Pe(){c("unpipe"),$.unpipe(R)}return R.emit("pipe",$),re.flowing||(c("pipe resume"),$.resume()),R};function M(R){return function(){var $=R._readableState;c("pipeOnDrain",$.awaitDrain),$.awaitDrain&&$.awaitDrain--,$.awaitDrain===0&&e(R,"data")&&($.flowing=!0,X(R))}}T.prototype.unpipe=function(R){var N=this._readableState,$={hasUnpiped:!1};if(N.pipesCount===0)return this;if(N.pipesCount===1)return R&&R!==N.pipes?this:(R||(R=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,R&&R.emit("unpipe",this,$),this);if(!R){var re=N.pipes,ie=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var fe=0;fe<ie;fe++)re[fe].emit("unpipe",this,{hasUnpiped:!1});return this}var he=v(N.pipes,R);return he===-1?this:(N.pipes.splice(he,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),R.emit("unpipe",this,$),this)},T.prototype.on=function(R,N){var $=r.prototype.on.call(this,R,N),re=this._readableState;return R==="data"?(re.readableListening=this.listenerCount("readable")>0,re.flowing!==!1&&this.resume()):R==="readable"&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,c("on readable",re.length,re.reading),re.length?S(this):re.reading||tt.nextTick(Z,this)),$},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(R,N){var $=r.prototype.removeListener.call(this,R,N);return R==="readable"&&tt.nextTick(ee,this),$},T.prototype.removeAllListeners=function(R){var N=r.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&tt.nextTick(ee,this),N};function ee(R){var N=R._readableState;N.readableListening=R.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:R.listenerCount("data")>0&&R.resume()}function Z(R){c("readable nexttick read 0"),R.read(0)}T.prototype.resume=function(){var R=this._readableState;return R.flowing||(c("resume"),R.flowing=!R.readableListening,oe(this,R)),R.paused=!1,this};function oe(R,N){N.resumeScheduled||(N.resumeScheduled=!0,tt.nextTick(ae,R,N))}function ae(R,N){c("resume",N.reading),N.reading||R.read(0),N.resumeScheduled=!1,R.emit("resume"),X(R),N.flowing&&!N.reading&&R.read(0)}T.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function X(R){var N=R._readableState;for(c("flow",N.flowing);N.flowing&&R.read()!==null;);}T.prototype.wrap=function(R){var N=this,$=this._readableState,re=!1;R.on("end",function(){if(c("wrapped end"),$.decoder&&!$.ended){var he=$.decoder.end();he&&he.length&&N.push(he)}N.push(null)}),R.on("data",function(he){if(c("wrapped data"),$.decoder&&(he=$.decoder.write(he)),!($.objectMode&&he==null)&&!(!$.objectMode&&(!he||!he.length))){var le=N.push(he);le||(re=!0,R.pause())}});for(var ie in R)this[ie]===void 0&&typeof R[ie]=="function"&&(this[ie]=function(le){return function(){return R[le].apply(R,arguments)}}(ie));for(var fe=0;fe<G.length;fe++)R.on(G[fe],this.emit.bind(this,G[fe]));return this._read=function(he){c("wrapped _read",he),re&&(re=!1,R.resume())},this},typeof Symbol=="function"&&(T.prototype[Symbol.asyncIterator]=function(){return W===void 0&&(W=C_()),W(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}}),T._fromList=K,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function K(R,N){if(N.length===0)return null;var $;return N.objectMode?$=N.buffer.shift():!R||R>=N.length?(N.decoder?$=N.buffer.join(""):N.buffer.length===1?$=N.buffer.first():$=N.buffer.concat(N.length),N.buffer.clear()):$=N.buffer.consume(R,N.decoder),$}function k(R){var N=R._readableState;c("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,tt.nextTick(B,N,R))}function B(R,N){if(c("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,N.readable=!1,N.emit("end"),R.autoDestroy)){var $=N._writableState;(!$||$.autoDestroy&&$.finished)&&N.destroy()}}typeof Symbol=="function"&&(T.from=function(R,N){return F===void 0&&(F=B_()),F(T,R,N)});function v(R,N){for(var $=0,re=R.length;$<re;$++)if(R[$]===N)return $;return-1}return Sl}var Ab=Ki,eu=to.codes,k_=eu.ERR_METHOD_NOT_IMPLEMENTED,D_=eu.ERR_MULTIPLE_CALLBACK,U_=eu.ERR_TRANSFORM_ALREADY_TRANSFORMING,K_=eu.ERR_TRANSFORM_WITH_LENGTH_0,tu=Lo();Ot(Ki,tu);function H_(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new D_);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ki(t){if(!(this instanceof Ki))return new Ki(t);tu.call(this,t),this._transformState={afterTransform:H_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",F_)}function F_(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){up(t,e,r)}):up(this,null,null)}Ki.prototype.push=function(t,e){return this._transformState.needTransform=!1,tu.prototype.push.call(this,t,e)};Ki.prototype._transform=function(t,e,r){r(new k_("_transform()"))};Ki.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ki.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ki.prototype._destroy=function(t,e){tu.prototype._destroy.call(this,t,function(r){e(r)})};function up(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new K_;if(t._transformState.transforming)throw new U_;return t.push(null)}var j_=Ga,xb=Ab;Ot(Ga,xb);function Ga(t){if(!(this instanceof Ga))return new Ga(t);xb.call(this,t)}Ga.prototype._transform=function(t,e,r){r(null,t)};var Rl;function G_(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Sb=to.codes,V_=Sb.ERR_MISSING_ARGS,q_=Sb.ERR_STREAM_DESTROYED;function lp(t){if(t)throw t}function $_(t){return t.setHeader&&typeof t.abort=="function"}function z_(t,e,r,n){n=G_(n);var i=!1;t.on("close",function(){i=!0}),Rl===void 0&&(Rl=mh),Rl(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,$_(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new q_("pipe"))}}}function dp(t){t()}function W_(t,e){return t.pipe(e)}function X_(t){return!t.length||typeof t[t.length-1]!="function"?lp:t.pop()}function J_(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=X_(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new V_("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,l=a>0;return z_(o,c,l,function(f){i||(i=f),f&&s.forEach(dp),!c&&(s.forEach(dp),n(i))})});return e.reduce(W_)}var Y_=J_;(function(t,e){e=t.exports=wb(),e.Stream=e,e.Readable=e,e.Writable=Eb(),e.Duplex=Lo(),e.Transform=Ab,e.PassThrough=j_,e.finished=mh,e.pipeline=Y_})(i_,hf);var gf=wr.Buffer,Rb=hf.Transform,Q_=Ot;function Z_(t,e){if(!gf.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Rs(t){Rb.call(this),this._block=gf.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Q_(Rs,Rb);Rs.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Rs.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Rs.prototype.update=function(t,e){if(Z_(t,"Data"),this._finalized)throw new Error("Digest already called");gf.isBuffer(t)||(t=gf.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,o=t.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};Rs.prototype._update=function(){throw new Error("_update is not implemented")};Rs.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Rs.prototype._digest=function(){throw new Error("_digest is not implemented")};var Ib=Rs,e3=Ot,Tb=Ib,t3=wr.Buffer,r3=new Array(16);function ru(){Tb.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}e3(ru,Tb);ru.prototype._update=function(){for(var t=r3,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=cr(r,n,i,s,t[0],3614090360,7),s=cr(s,r,n,i,t[1],3905402710,12),i=cr(i,s,r,n,t[2],606105819,17),n=cr(n,i,s,r,t[3],3250441966,22),r=cr(r,n,i,s,t[4],4118548399,7),s=cr(s,r,n,i,t[5],1200080426,12),i=cr(i,s,r,n,t[6],2821735955,17),n=cr(n,i,s,r,t[7],4249261313,22),r=cr(r,n,i,s,t[8],1770035416,7),s=cr(s,r,n,i,t[9],2336552879,12),i=cr(i,s,r,n,t[10],4294925233,17),n=cr(n,i,s,r,t[11],2304563134,22),r=cr(r,n,i,s,t[12],1804603682,7),s=cr(s,r,n,i,t[13],4254626195,12),i=cr(i,s,r,n,t[14],2792965006,17),n=cr(n,i,s,r,t[15],1236535329,22),r=fr(r,n,i,s,t[1],4129170786,5),s=fr(s,r,n,i,t[6],3225465664,9),i=fr(i,s,r,n,t[11],643717713,14),n=fr(n,i,s,r,t[0],3921069994,20),r=fr(r,n,i,s,t[5],3593408605,5),s=fr(s,r,n,i,t[10],38016083,9),i=fr(i,s,r,n,t[15],3634488961,14),n=fr(n,i,s,r,t[4],3889429448,20),r=fr(r,n,i,s,t[9],568446438,5),s=fr(s,r,n,i,t[14],3275163606,9),i=fr(i,s,r,n,t[3],4107603335,14),n=fr(n,i,s,r,t[8],1163531501,20),r=fr(r,n,i,s,t[13],2850285829,5),s=fr(s,r,n,i,t[2],4243563512,9),i=fr(i,s,r,n,t[7],1735328473,14),n=fr(n,i,s,r,t[12],2368359562,20),r=ur(r,n,i,s,t[5],4294588738,4),s=ur(s,r,n,i,t[8],2272392833,11),i=ur(i,s,r,n,t[11],1839030562,16),n=ur(n,i,s,r,t[14],4259657740,23),r=ur(r,n,i,s,t[1],2763975236,4),s=ur(s,r,n,i,t[4],1272893353,11),i=ur(i,s,r,n,t[7],4139469664,16),n=ur(n,i,s,r,t[10],3200236656,23),r=ur(r,n,i,s,t[13],681279174,4),s=ur(s,r,n,i,t[0],3936430074,11),i=ur(i,s,r,n,t[3],3572445317,16),n=ur(n,i,s,r,t[6],76029189,23),r=ur(r,n,i,s,t[9],3654602809,4),s=ur(s,r,n,i,t[12],3873151461,11),i=ur(i,s,r,n,t[15],530742520,16),n=ur(n,i,s,r,t[2],3299628645,23),r=lr(r,n,i,s,t[0],4096336452,6),s=lr(s,r,n,i,t[7],1126891415,10),i=lr(i,s,r,n,t[14],2878612391,15),n=lr(n,i,s,r,t[5],4237533241,21),r=lr(r,n,i,s,t[12],1700485571,6),s=lr(s,r,n,i,t[3],2399980690,10),i=lr(i,s,r,n,t[10],4293915773,15),n=lr(n,i,s,r,t[1],2240044497,21),r=lr(r,n,i,s,t[8],1873313359,6),s=lr(s,r,n,i,t[15],4264355552,10),i=lr(i,s,r,n,t[6],2734768916,15),n=lr(n,i,s,r,t[13],1309151649,21),r=lr(r,n,i,s,t[4],4149444226,6),s=lr(s,r,n,i,t[11],3174756917,10),i=lr(i,s,r,n,t[2],718787259,15),n=lr(n,i,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0};ru.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=t3.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function nu(t,e){return t<<e|t>>>32-e}function cr(t,e,r,n,i,s,o){return nu(t+(e&r|~e&n)+i+s|0,o)+e|0}function fr(t,e,r,n,i,s,o){return nu(t+(e&n|r&~n)+i+s|0,o)+e|0}function ur(t,e,r,n,i,s,o){return nu(t+(e^r^n)+i+s|0,o)+e|0}function lr(t,e,r,n,i,s,o){return nu(t+(r^(e|~n))+i+s|0,o)+e|0}var n3=ru,Il=ge.Buffer,i3=Ot,Ob=Ib,s3=new Array(16),pa=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ga=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],ba=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],va=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ma=[0,1518500249,1859775393,2400959708,2840853838],ya=[1352829926,1548603684,1836072691,2053994217,0];function iu(){Ob.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}i3(iu,Ob);iu.prototype._update=function(){for(var t=s3,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._a|0,c=this._b|0,l=this._c|0,f=this._d|0,d=this._e|0,O=0;O<80;O+=1){var L,D;O<16?(L=hp(r,n,i,s,o,t[pa[O]],ma[0],ba[O]),D=vp(a,c,l,f,d,t[ga[O]],ya[0],va[O])):O<32?(L=pp(r,n,i,s,o,t[pa[O]],ma[1],ba[O]),D=bp(a,c,l,f,d,t[ga[O]],ya[1],va[O])):O<48?(L=gp(r,n,i,s,o,t[pa[O]],ma[2],ba[O]),D=gp(a,c,l,f,d,t[ga[O]],ya[2],va[O])):O<64?(L=bp(r,n,i,s,o,t[pa[O]],ma[3],ba[O]),D=pp(a,c,l,f,d,t[ga[O]],ya[3],va[O])):(L=vp(r,n,i,s,o,t[pa[O]],ma[4],ba[O]),D=hp(a,c,l,f,d,t[ga[O]],ya[4],va[O])),r=o,o=s,s=Ws(i,10),i=n,n=L,a=d,d=f,f=Ws(l,10),l=c,c=D}var z=this._b+i+f|0;this._b=this._c+s+d|0,this._c=this._d+o+a|0,this._d=this._e+r+c|0,this._e=this._a+n+l|0,this._a=z};iu.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Il.alloc?Il.alloc(20):new Il(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function Ws(t,e){return t<<e|t>>>32-e}function hp(t,e,r,n,i,s,o,a){return Ws(t+(e^r^n)+s+o|0,a)+i|0}function pp(t,e,r,n,i,s,o,a){return Ws(t+(e&r|~e&n)+s+o|0,a)+i|0}function gp(t,e,r,n,i,s,o,a){return Ws(t+((e|~r)^n)+s+o|0,a)+i|0}function bp(t,e,r,n,i,s,o,a){return Ws(t+(e&n|r&~n)+s+o|0,a)+i|0}function vp(t,e,r,n,i,s,o,a){return Ws(t+(e^(r|~n))+s+o|0,a)+i|0}var o3=iu,Nd={},a3={get exports(){return Nd},set exports(t){Nd=t}},Pb=wr.Buffer;function su(t,e){this._block=Pb.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}su.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Pb.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,c=Math.min(i-o,n-a),l=0;l<c;l++)r[a+l]=t[o+l];s+=c,o+=c,s%n===0&&this._update(r)}return this._len+=i,this};su.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};su.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Yo=su,c3=Ot,Nb=Yo,f3=wr.Buffer,u3=[1518500249,1859775393,-1894007588,-899497514],l3=new Array(80);function ic(){this.init(),this._w=l3,Nb.call(this,64,56)}c3(ic,Nb);ic.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function d3(t){return t<<5|t>>>27}function h3(t){return t<<30|t>>>2}function p3(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}ic.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var c=0;c<80;++c){var l=~~(c/20),f=d3(r)+p3(l,n,i,s)+o+e[c]+u3[l]|0;o=s,s=i,i=h3(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};ic.prototype._hash=function(){var t=f3.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var g3=ic,b3=Ot,Mb=Yo,v3=wr.Buffer,m3=[1518500249,1859775393,-1894007588,-899497514],y3=new Array(80);function sc(){this.init(),this._w=y3,Mb.call(this,64,56)}b3(sc,Mb);sc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function E3(t){return t<<1|t>>>31}function _3(t){return t<<5|t>>>27}function w3(t){return t<<30|t>>>2}function A3(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}sc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=E3(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var c=0;c<80;++c){var l=~~(c/20),f=_3(r)+A3(l,n,i,s)+o+e[c]+m3[l]|0;o=s,s=i,i=w3(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};sc.prototype._hash=function(){var t=v3.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var x3=sc,S3=Ot,Lb=Yo,R3=wr.Buffer,I3=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T3=new Array(64);function oc(){this.init(),this._w=T3,Lb.call(this,64,56)}S3(oc,Lb);oc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function O3(t,e,r){return r^t&(e^r)}function P3(t,e,r){return t&e|r&(t|e)}function N3(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function M3(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function L3(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function C3(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}oc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,l=this._h|0,f=0;f<16;++f)e[f]=t.readInt32BE(f*4);for(;f<64;++f)e[f]=C3(e[f-2])+e[f-7]+L3(e[f-15])+e[f-16]|0;for(var d=0;d<64;++d){var O=l+M3(o)+O3(o,a,c)+I3[d]+e[d]|0,L=N3(r)+P3(r,n,i)|0;l=c,c=a,a=o,o=s+O|0,s=i,i=n,n=r,r=O+L|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0};oc.prototype._hash=function(){var t=R3.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Cb=oc,B3=Ot,k3=Cb,D3=Yo,U3=wr.Buffer,K3=new Array(64);function ou(){this.init(),this._w=K3,D3.call(this,64,56)}B3(ou,k3);ou.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};ou.prototype._hash=function(){var t=U3.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var H3=ou,F3=Ot,Bb=Yo,j3=wr.Buffer,mp=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],G3=new Array(160);function ac(){this.init(),this._w=G3,Bb.call(this,128,112)}F3(ac,Bb);ac.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function yp(t,e,r){return r^t&(e^r)}function Ep(t,e,r){return t&e|r&(t|e)}function _p(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function wp(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function V3(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function q3(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function $3(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function z3(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Zt(t,e){return t>>>0<e>>>0?1:0}ac.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,l=this._hh|0,f=this._al|0,d=this._bl|0,O=this._cl|0,L=this._dl|0,D=this._el|0,z=this._fl|0,q=this._gl|0,V=this._hl|0,U=0;U<32;U+=2)e[U]=t.readInt32BE(U*4),e[U+1]=t.readInt32BE(U*4+4);for(;U<160;U+=2){var W=e[U-30],F=e[U-15*2+1],j=V3(W,F),G=q3(F,W);W=e[U-2*2],F=e[U-2*2+1];var E=$3(W,F),y=z3(F,W),T=e[U-7*2],x=e[U-7*2+1],_=e[U-16*2],u=e[U-16*2+1],p=G+x|0,b=j+T+Zt(p,G)|0;p=p+y|0,b=b+E+Zt(p,y)|0,p=p+u|0,b=b+_+Zt(p,u)|0,e[U]=b,e[U+1]=p}for(var g=0;g<160;g+=2){b=e[g],p=e[g+1];var h=Ep(r,n,i),S=Ep(f,d,O),P=_p(r,f),w=_p(f,r),m=wp(o,D),M=wp(D,o),ee=mp[g],Z=mp[g+1],oe=yp(o,a,c),ae=yp(D,z,q),X=V+M|0,K=l+m+Zt(X,V)|0;X=X+ae|0,K=K+oe+Zt(X,ae)|0,X=X+Z|0,K=K+ee+Zt(X,Z)|0,X=X+p|0,K=K+b+Zt(X,p)|0;var k=w+S|0,B=P+h+Zt(k,w)|0;l=c,V=q,c=a,q=z,a=o,z=D,D=L+X|0,o=s+K+Zt(D,L)|0,s=i,L=O,i=n,O=d,n=r,d=f,f=X+k|0,r=K+B+Zt(f,X)|0}this._al=this._al+f|0,this._bl=this._bl+d|0,this._cl=this._cl+O|0,this._dl=this._dl+L|0,this._el=this._el+D|0,this._fl=this._fl+z|0,this._gl=this._gl+q|0,this._hl=this._hl+V|0,this._ah=this._ah+r+Zt(this._al,f)|0,this._bh=this._bh+n+Zt(this._bl,d)|0,this._ch=this._ch+i+Zt(this._cl,O)|0,this._dh=this._dh+s+Zt(this._dl,L)|0,this._eh=this._eh+o+Zt(this._el,D)|0,this._fh=this._fh+a+Zt(this._fl,z)|0,this._gh=this._gh+c+Zt(this._gl,q)|0,this._hh=this._hh+l+Zt(this._hl,V)|0};ac.prototype._hash=function(){var t=j3.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var kb=ac,W3=Ot,X3=kb,J3=Yo,Y3=wr.Buffer,Q3=new Array(160);function au(){this.init(),this._w=Q3,J3.call(this,128,112)}W3(au,X3);au.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};au.prototype._hash=function(){var t=Y3.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var Z3=au,ro=a3.exports=function(e){e=e.toLowerCase();var r=ro[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};ro.sha=g3;ro.sha1=x3;ro.sha224=H3;ro.sha256=Cb;ro.sha384=Z3;ro.sha512=kb;var Db=wr.Buffer,Ub=bs.Transform,ew=pf.StringDecoder,tw=Ot;function On(t){Ub.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}tw(On,Ub);On.prototype.update=function(t,e,r){typeof t=="string"&&(t=Db.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};On.prototype.setAutoPadding=function(){};On.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};On.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};On.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};On.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};On.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};On.prototype._finalOrDigest=function(t){var e=this.__final()||Db.alloc(0);return t&&(e=this._toString(e,t,!0)),e};On.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new ew(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var rw=On,nw=Ot,iw=n3,sw=o3,ow=Nd,Kb=rw;function cu(t){Kb.call(this,"digest"),this._hash=t}nw(cu,Kb);cu.prototype._update=function(t){this._hash.update(t)};cu.prototype._final=function(){return this._hash.digest()};var aw=function(e){return e=e.toLowerCase(),e==="md5"?new iw:e==="rmd160"||e==="ripemd160"?new sw:new cu(ow(e))},Rc=wr.Buffer;function cw(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=Rc.from(L)),!Rc.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var D=0,z=0,q=0,V=L.length;q!==V&&L[q]===0;)q++,D++;for(var U=(V-q)*l+1>>>0,W=new Uint8Array(U);q!==V;){for(var F=L[q],j=0,G=U-1;(F!==0||j<z)&&G!==-1;G--,j++)F+=256*W[G]>>>0,W[G]=F%o>>>0,F=F/o>>>0;if(F!==0)throw new Error("Non-zero carry");z=j,q++}for(var E=U-z;E!==U&&W[E]===0;)E++;for(var y=a.repeat(D);E<U;++E)y+=t.charAt(W[E]);return y}function d(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return Rc.alloc(0);for(var D=0,z=0,q=0;L[D]===a;)z++,D++;for(var V=(L.length-D)*c+1>>>0,U=new Uint8Array(V);L[D];){var W=e[L.charCodeAt(D)];if(W===255)return;for(var F=0,j=V-1;(W!==0||F<q)&&j!==-1;j--,F++)W+=o*U[j]>>>0,U[j]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");q=F,D++}for(var G=V-q;G!==V&&U[G]===0;)G++;var E=Rc.allocUnsafe(z+(V-G));E.fill(0,0,z);for(var y=z;G!==V;)E[y++]=U[G++];return E}function O(L){var D=d(L);if(D)return D;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:d,decode:O}}var fw=cw,uw=fw,lw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",dw=uw(lw),Tl=dw,hw=wr.Buffer,pw=function(t){function e(s){var o=t(s);return Tl.encode(hw.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),a=s.slice(-4),c=t(o);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return o}function n(s){var o=Tl.decodeUnsafe(s);if(o)return r(o)}function i(s){var o=Tl.decode(s),a=r(o);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}},Ap=aw,gw=pw;function bw(t){var e=Ap("sha256").update(t).digest();return Ap("sha256").update(e).digest()}var zr=gw(bw),vw={};const mw="elliptic",yw="6.5.4",Ew="EC cryptography",_w="lib/elliptic.js",ww=["lib"],Aw={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},xw={type:"git",url:"git@github.com:indutny/elliptic"},Sw=["EC","Elliptic","curve","Cryptography"],Rw="Fedor Indutny <fedor@indutny.com>",Iw="MIT",Tw={url:"https://github.com/indutny/elliptic/issues"},Ow="https://github.com/indutny/elliptic",Pw={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Nw={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Mw={name:mw,version:yw,description:Ew,main:_w,files:ww,scripts:Aw,repository:xw,keywords:Sw,author:Rw,license:Iw,bugs:Tw,homepage:Ow,devDependencies:Pw,dependencies:Nw};var Jr={},Rn={},Lw={get exports(){return Rn},set exports(t){Rn=t}};(function(t){(function(e,r){function n(_,u){if(!_)throw new Error(u||"Assertion failed")}function i(_,u){_.super_=u;var p=function(){};p.prototype=u.prototype,_.prototype=new p,_.prototype.constructor=_}function s(_,u,p){if(s.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(_||0,u||10,p||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=bs.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,p){return u.cmp(p)>0?u:p},s.min=function(u,p){return u.cmp(p)<0?u:p},s.prototype._init=function(u,p,b){if(typeof u=="number")return this._initNumber(u,p,b);if(typeof u=="object")return this._initArray(u,p,b);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var g=0;u[0]==="-"&&(g++,this.negative=1),g<u.length&&(p===16?this._parseHex(u,g,b):(this._parseBase(u,p,g),b==="le"&&this._initArray(this.toArray(),p,b)))},s.prototype._initNumber=function(u,p,b){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),p,b)},s.prototype._initArray=function(u,p,b){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var h,S,P=0;if(b==="be")for(g=u.length-1,h=0;g>=0;g-=3)S=u[g]|u[g-1]<<8|u[g-2]<<16,this.words[h]|=S<<P&67108863,this.words[h+1]=S>>>26-P&67108863,P+=24,P>=26&&(P-=26,h++);else if(b==="le")for(g=0,h=0;g<u.length;g+=3)S=u[g]|u[g+1]<<8|u[g+2]<<16,this.words[h]|=S<<P&67108863,this.words[h+1]=S>>>26-P&67108863,P+=24,P>=26&&(P-=26,h++);return this.strip()};function a(_,u){var p=_.charCodeAt(u);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function c(_,u,p){var b=a(_,p);return p-1>=u&&(b|=a(_,p-1)<<4),b}s.prototype._parseHex=function(u,p,b){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var h=0,S=0,P;if(b==="be")for(g=u.length-1;g>=p;g-=2)P=c(u,p,g)<<h,this.words[S]|=P&67108863,h>=18?(h-=18,S+=1,this.words[S]|=P>>>26):h+=8;else{var w=u.length-p;for(g=w%2===0?p+1:p;g<u.length;g+=2)P=c(u,p,g)<<h,this.words[S]|=P&67108863,h>=18?(h-=18,S+=1,this.words[S]|=P>>>26):h+=8}this.strip()};function l(_,u,p,b){for(var g=0,h=Math.min(_.length,p),S=u;S<h;S++){var P=_.charCodeAt(S)-48;g*=b,P>=49?g+=P-49+10:P>=17?g+=P-17+10:g+=P}return g}s.prototype._parseBase=function(u,p,b){this.words=[0],this.length=1;for(var g=0,h=1;h<=67108863;h*=p)g++;g--,h=h/p|0;for(var S=u.length-b,P=S%g,w=Math.min(S,S-P)+b,m=0,M=b;M<w;M+=g)m=l(u,M,M+g,p),this.imuln(h),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(P!==0){var ee=1;for(m=l(u,M,u.length,p),M=0;M<P;M++)ee*=p;this.imuln(ee),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this.strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,p){u=u||10,p=p|0||1;var b;if(u===16||u==="hex"){b="";for(var g=0,h=0,S=0;S<this.length;S++){var P=this.words[S],w=((P<<g|h)&16777215).toString(16);h=P>>>24-g&16777215,h!==0||S!==this.length-1?b=f[6-w.length]+w+b:b=w+b,g+=2,g>=26&&(g-=26,S--)}for(h!==0&&(b=h.toString(16)+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(u===(u|0)&&u>=2&&u<=36){var m=d[u],M=O[u];b="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var Z=ee.modn(M).toString(u);ee=ee.idivn(M),ee.isZero()?b=Z+b:b=f[m-Z.length]+Z+b}for(this.isZero()&&(b="0"+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(u,p){return n(typeof o<"u"),this.toArrayLike(o,u,p)},s.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)},s.prototype.toArrayLike=function(u,p,b){var g=this.byteLength(),h=b||Math.max(1,g);n(g<=h,"byte array longer than desired length"),n(h>0,"Requested array length <= 0"),this.strip();var S=p==="le",P=new u(h),w,m,M=this.clone();if(S){for(m=0;!M.isZero();m++)w=M.andln(255),M.iushrn(8),P[m]=w;for(;m<h;m++)P[m]=0}else{for(m=0;m<h-g;m++)P[m]=0;for(m=0;!M.isZero();m++)w=M.andln(255),M.iushrn(8),P[h-m-1]=w}return P},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var p=u,b=0;return p>=4096&&(b+=13,p>>>=13),p>=64&&(b+=7,p>>>=7),p>=8&&(b+=4,p>>>=4),p>=2&&(b+=2,p>>>=2),b+p},s.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,b=0;return p&8191||(b+=13,p>>>=13),p&127||(b+=7,p>>>=7),p&15||(b+=4,p>>>=4),p&3||(b+=2,p>>>=2),p&1||b++,b},s.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function L(_){for(var u=new Array(_.bitLength()),p=0;p<u.length;p++){var b=p/26|0,g=p%26;u[p]=(_.words[b]&1<<g)>>>g}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var b=this._zeroBits(this.words[p]);if(u+=b,b!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this.strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var b=0;b<p.length;b++)this.words[b]=this.words[b]&u.words[b];return this.length=p.length,this.strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var p,b;this.length>u.length?(p=this,b=u):(p=u,b=this);for(var g=0;g<b.length;g++)this.words[g]=p.words[g]^b.words[g];if(this!==p)for(;g<p.length;g++)this.words[g]=p.words[g];return this.length=p.length,this.strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,b=u%26;this._expand(p),b>0&&p--;for(var g=0;g<p;g++)this.words[g]=~this.words[g]&67108863;return b>0&&(this.words[g]=~this.words[g]&67108863>>26-b),this.strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,p){n(typeof u=="number"&&u>=0);var b=u/26|0,g=u%26;return this._expand(b+1),p?this.words[b]=this.words[b]|1<<g:this.words[b]=this.words[b]&~(1<<g),this.strip()},s.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var b,g;this.length>u.length?(b=this,g=u):(b=u,g=this);for(var h=0,S=0;S<g.length;S++)p=(b.words[S]|0)+(g.words[S]|0)+h,this.words[S]=p&67108863,h=p>>>26;for(;h!==0&&S<b.length;S++)p=(b.words[S]|0)+h,this.words[S]=p&67108863,h=p>>>26;if(this.length=b.length,h!==0)this.words[this.length]=h,this.length++;else if(b!==this)for(;S<b.length;S++)this.words[S]=b.words[S];return this},s.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var b=this.cmp(u);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,h;b>0?(g=this,h=u):(g=u,h=this);for(var S=0,P=0;P<h.length;P++)p=(g.words[P]|0)-(h.words[P]|0)+S,S=p>>26,this.words[P]=p&67108863;for(;S!==0&&P<g.length;P++)p=(g.words[P]|0)+S,S=p>>26,this.words[P]=p&67108863;if(S===0&&P<g.length&&g!==this)for(;P<g.length;P++)this.words[P]=g.words[P];return this.length=Math.max(this.length,P),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function D(_,u,p){p.negative=u.negative^_.negative;var b=_.length+u.length|0;p.length=b,b=b-1|0;var g=_.words[0]|0,h=u.words[0]|0,S=g*h,P=S&67108863,w=S/67108864|0;p.words[0]=P;for(var m=1;m<b;m++){for(var M=w>>>26,ee=w&67108863,Z=Math.min(m,u.length-1),oe=Math.max(0,m-_.length+1);oe<=Z;oe++){var ae=m-oe|0;g=_.words[ae]|0,h=u.words[oe]|0,S=g*h+ee,M+=S/67108864|0,ee=S&67108863}p.words[m]=ee|0,w=M|0}return w!==0?p.words[m]=w|0:p.length--,p.strip()}var z=function(u,p,b){var g=u.words,h=p.words,S=b.words,P=0,w,m,M,ee=g[0]|0,Z=ee&8191,oe=ee>>>13,ae=g[1]|0,X=ae&8191,K=ae>>>13,k=g[2]|0,B=k&8191,v=k>>>13,R=g[3]|0,N=R&8191,$=R>>>13,re=g[4]|0,ie=re&8191,fe=re>>>13,he=g[5]|0,le=he&8191,_e=he>>>13,Ae=g[6]|0,Ee=Ae&8191,be=Ae>>>13,Oe=g[7]|0,me=Oe&8191,pe=Oe>>>13,Pe=g[8]|0,C=Pe&8191,A=Pe>>>13,I=g[9]|0,H=I&8191,J=I>>>13,te=h[0]|0,ne=te&8191,de=te>>>13,Se=h[1]|0,xe=Se&8191,Re=Se>>>13,Fe=h[2]|0,pt=Fe&8191,vt=Fe>>>13,co=h[3]|0,_t=co&8191,je=co>>>13,Ft=h[4]|0,Ge=Ft&8191,Ve=Ft>>>13,jt=h[5]|0,qe=jt&8191,$e=jt>>>13,Gt=h[6]|0,ze=Gt&8191,We=Gt>>>13,Vt=h[7]|0,Xe=Vt&8191,Je=Vt>>>13,qt=h[8]|0,Ye=qt&8191,Qe=qt>>>13,w0=h[9]|0,Ct=w0&8191,Bt=w0>>>13;b.negative=u.negative^p.negative,b.length=19,w=Math.imul(Z,ne),m=Math.imul(Z,de),m=m+Math.imul(oe,ne)|0,M=Math.imul(oe,de);var Cu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Cu>>>26)|0,Cu&=67108863,w=Math.imul(X,ne),m=Math.imul(X,de),m=m+Math.imul(K,ne)|0,M=Math.imul(K,de),w=w+Math.imul(Z,xe)|0,m=m+Math.imul(Z,Re)|0,m=m+Math.imul(oe,xe)|0,M=M+Math.imul(oe,Re)|0;var Bu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Bu>>>26)|0,Bu&=67108863,w=Math.imul(B,ne),m=Math.imul(B,de),m=m+Math.imul(v,ne)|0,M=Math.imul(v,de),w=w+Math.imul(X,xe)|0,m=m+Math.imul(X,Re)|0,m=m+Math.imul(K,xe)|0,M=M+Math.imul(K,Re)|0,w=w+Math.imul(Z,pt)|0,m=m+Math.imul(Z,vt)|0,m=m+Math.imul(oe,pt)|0,M=M+Math.imul(oe,vt)|0;var ku=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(ku>>>26)|0,ku&=67108863,w=Math.imul(N,ne),m=Math.imul(N,de),m=m+Math.imul($,ne)|0,M=Math.imul($,de),w=w+Math.imul(B,xe)|0,m=m+Math.imul(B,Re)|0,m=m+Math.imul(v,xe)|0,M=M+Math.imul(v,Re)|0,w=w+Math.imul(X,pt)|0,m=m+Math.imul(X,vt)|0,m=m+Math.imul(K,pt)|0,M=M+Math.imul(K,vt)|0,w=w+Math.imul(Z,_t)|0,m=m+Math.imul(Z,je)|0,m=m+Math.imul(oe,_t)|0,M=M+Math.imul(oe,je)|0;var Du=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Du>>>26)|0,Du&=67108863,w=Math.imul(ie,ne),m=Math.imul(ie,de),m=m+Math.imul(fe,ne)|0,M=Math.imul(fe,de),w=w+Math.imul(N,xe)|0,m=m+Math.imul(N,Re)|0,m=m+Math.imul($,xe)|0,M=M+Math.imul($,Re)|0,w=w+Math.imul(B,pt)|0,m=m+Math.imul(B,vt)|0,m=m+Math.imul(v,pt)|0,M=M+Math.imul(v,vt)|0,w=w+Math.imul(X,_t)|0,m=m+Math.imul(X,je)|0,m=m+Math.imul(K,_t)|0,M=M+Math.imul(K,je)|0,w=w+Math.imul(Z,Ge)|0,m=m+Math.imul(Z,Ve)|0,m=m+Math.imul(oe,Ge)|0,M=M+Math.imul(oe,Ve)|0;var Uu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Uu>>>26)|0,Uu&=67108863,w=Math.imul(le,ne),m=Math.imul(le,de),m=m+Math.imul(_e,ne)|0,M=Math.imul(_e,de),w=w+Math.imul(ie,xe)|0,m=m+Math.imul(ie,Re)|0,m=m+Math.imul(fe,xe)|0,M=M+Math.imul(fe,Re)|0,w=w+Math.imul(N,pt)|0,m=m+Math.imul(N,vt)|0,m=m+Math.imul($,pt)|0,M=M+Math.imul($,vt)|0,w=w+Math.imul(B,_t)|0,m=m+Math.imul(B,je)|0,m=m+Math.imul(v,_t)|0,M=M+Math.imul(v,je)|0,w=w+Math.imul(X,Ge)|0,m=m+Math.imul(X,Ve)|0,m=m+Math.imul(K,Ge)|0,M=M+Math.imul(K,Ve)|0,w=w+Math.imul(Z,qe)|0,m=m+Math.imul(Z,$e)|0,m=m+Math.imul(oe,qe)|0,M=M+Math.imul(oe,$e)|0;var Ku=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,w=Math.imul(Ee,ne),m=Math.imul(Ee,de),m=m+Math.imul(be,ne)|0,M=Math.imul(be,de),w=w+Math.imul(le,xe)|0,m=m+Math.imul(le,Re)|0,m=m+Math.imul(_e,xe)|0,M=M+Math.imul(_e,Re)|0,w=w+Math.imul(ie,pt)|0,m=m+Math.imul(ie,vt)|0,m=m+Math.imul(fe,pt)|0,M=M+Math.imul(fe,vt)|0,w=w+Math.imul(N,_t)|0,m=m+Math.imul(N,je)|0,m=m+Math.imul($,_t)|0,M=M+Math.imul($,je)|0,w=w+Math.imul(B,Ge)|0,m=m+Math.imul(B,Ve)|0,m=m+Math.imul(v,Ge)|0,M=M+Math.imul(v,Ve)|0,w=w+Math.imul(X,qe)|0,m=m+Math.imul(X,$e)|0,m=m+Math.imul(K,qe)|0,M=M+Math.imul(K,$e)|0,w=w+Math.imul(Z,ze)|0,m=m+Math.imul(Z,We)|0,m=m+Math.imul(oe,ze)|0,M=M+Math.imul(oe,We)|0;var Hu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Hu>>>26)|0,Hu&=67108863,w=Math.imul(me,ne),m=Math.imul(me,de),m=m+Math.imul(pe,ne)|0,M=Math.imul(pe,de),w=w+Math.imul(Ee,xe)|0,m=m+Math.imul(Ee,Re)|0,m=m+Math.imul(be,xe)|0,M=M+Math.imul(be,Re)|0,w=w+Math.imul(le,pt)|0,m=m+Math.imul(le,vt)|0,m=m+Math.imul(_e,pt)|0,M=M+Math.imul(_e,vt)|0,w=w+Math.imul(ie,_t)|0,m=m+Math.imul(ie,je)|0,m=m+Math.imul(fe,_t)|0,M=M+Math.imul(fe,je)|0,w=w+Math.imul(N,Ge)|0,m=m+Math.imul(N,Ve)|0,m=m+Math.imul($,Ge)|0,M=M+Math.imul($,Ve)|0,w=w+Math.imul(B,qe)|0,m=m+Math.imul(B,$e)|0,m=m+Math.imul(v,qe)|0,M=M+Math.imul(v,$e)|0,w=w+Math.imul(X,ze)|0,m=m+Math.imul(X,We)|0,m=m+Math.imul(K,ze)|0,M=M+Math.imul(K,We)|0,w=w+Math.imul(Z,Xe)|0,m=m+Math.imul(Z,Je)|0,m=m+Math.imul(oe,Xe)|0,M=M+Math.imul(oe,Je)|0;var Fu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Fu>>>26)|0,Fu&=67108863,w=Math.imul(C,ne),m=Math.imul(C,de),m=m+Math.imul(A,ne)|0,M=Math.imul(A,de),w=w+Math.imul(me,xe)|0,m=m+Math.imul(me,Re)|0,m=m+Math.imul(pe,xe)|0,M=M+Math.imul(pe,Re)|0,w=w+Math.imul(Ee,pt)|0,m=m+Math.imul(Ee,vt)|0,m=m+Math.imul(be,pt)|0,M=M+Math.imul(be,vt)|0,w=w+Math.imul(le,_t)|0,m=m+Math.imul(le,je)|0,m=m+Math.imul(_e,_t)|0,M=M+Math.imul(_e,je)|0,w=w+Math.imul(ie,Ge)|0,m=m+Math.imul(ie,Ve)|0,m=m+Math.imul(fe,Ge)|0,M=M+Math.imul(fe,Ve)|0,w=w+Math.imul(N,qe)|0,m=m+Math.imul(N,$e)|0,m=m+Math.imul($,qe)|0,M=M+Math.imul($,$e)|0,w=w+Math.imul(B,ze)|0,m=m+Math.imul(B,We)|0,m=m+Math.imul(v,ze)|0,M=M+Math.imul(v,We)|0,w=w+Math.imul(X,Xe)|0,m=m+Math.imul(X,Je)|0,m=m+Math.imul(K,Xe)|0,M=M+Math.imul(K,Je)|0,w=w+Math.imul(Z,Ye)|0,m=m+Math.imul(Z,Qe)|0,m=m+Math.imul(oe,Ye)|0,M=M+Math.imul(oe,Qe)|0;var ju=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(ju>>>26)|0,ju&=67108863,w=Math.imul(H,ne),m=Math.imul(H,de),m=m+Math.imul(J,ne)|0,M=Math.imul(J,de),w=w+Math.imul(C,xe)|0,m=m+Math.imul(C,Re)|0,m=m+Math.imul(A,xe)|0,M=M+Math.imul(A,Re)|0,w=w+Math.imul(me,pt)|0,m=m+Math.imul(me,vt)|0,m=m+Math.imul(pe,pt)|0,M=M+Math.imul(pe,vt)|0,w=w+Math.imul(Ee,_t)|0,m=m+Math.imul(Ee,je)|0,m=m+Math.imul(be,_t)|0,M=M+Math.imul(be,je)|0,w=w+Math.imul(le,Ge)|0,m=m+Math.imul(le,Ve)|0,m=m+Math.imul(_e,Ge)|0,M=M+Math.imul(_e,Ve)|0,w=w+Math.imul(ie,qe)|0,m=m+Math.imul(ie,$e)|0,m=m+Math.imul(fe,qe)|0,M=M+Math.imul(fe,$e)|0,w=w+Math.imul(N,ze)|0,m=m+Math.imul(N,We)|0,m=m+Math.imul($,ze)|0,M=M+Math.imul($,We)|0,w=w+Math.imul(B,Xe)|0,m=m+Math.imul(B,Je)|0,m=m+Math.imul(v,Xe)|0,M=M+Math.imul(v,Je)|0,w=w+Math.imul(X,Ye)|0,m=m+Math.imul(X,Qe)|0,m=m+Math.imul(K,Ye)|0,M=M+Math.imul(K,Qe)|0,w=w+Math.imul(Z,Ct)|0,m=m+Math.imul(Z,Bt)|0,m=m+Math.imul(oe,Ct)|0,M=M+Math.imul(oe,Bt)|0;var Gu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Gu>>>26)|0,Gu&=67108863,w=Math.imul(H,xe),m=Math.imul(H,Re),m=m+Math.imul(J,xe)|0,M=Math.imul(J,Re),w=w+Math.imul(C,pt)|0,m=m+Math.imul(C,vt)|0,m=m+Math.imul(A,pt)|0,M=M+Math.imul(A,vt)|0,w=w+Math.imul(me,_t)|0,m=m+Math.imul(me,je)|0,m=m+Math.imul(pe,_t)|0,M=M+Math.imul(pe,je)|0,w=w+Math.imul(Ee,Ge)|0,m=m+Math.imul(Ee,Ve)|0,m=m+Math.imul(be,Ge)|0,M=M+Math.imul(be,Ve)|0,w=w+Math.imul(le,qe)|0,m=m+Math.imul(le,$e)|0,m=m+Math.imul(_e,qe)|0,M=M+Math.imul(_e,$e)|0,w=w+Math.imul(ie,ze)|0,m=m+Math.imul(ie,We)|0,m=m+Math.imul(fe,ze)|0,M=M+Math.imul(fe,We)|0,w=w+Math.imul(N,Xe)|0,m=m+Math.imul(N,Je)|0,m=m+Math.imul($,Xe)|0,M=M+Math.imul($,Je)|0,w=w+Math.imul(B,Ye)|0,m=m+Math.imul(B,Qe)|0,m=m+Math.imul(v,Ye)|0,M=M+Math.imul(v,Qe)|0,w=w+Math.imul(X,Ct)|0,m=m+Math.imul(X,Bt)|0,m=m+Math.imul(K,Ct)|0,M=M+Math.imul(K,Bt)|0;var Vu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Vu>>>26)|0,Vu&=67108863,w=Math.imul(H,pt),m=Math.imul(H,vt),m=m+Math.imul(J,pt)|0,M=Math.imul(J,vt),w=w+Math.imul(C,_t)|0,m=m+Math.imul(C,je)|0,m=m+Math.imul(A,_t)|0,M=M+Math.imul(A,je)|0,w=w+Math.imul(me,Ge)|0,m=m+Math.imul(me,Ve)|0,m=m+Math.imul(pe,Ge)|0,M=M+Math.imul(pe,Ve)|0,w=w+Math.imul(Ee,qe)|0,m=m+Math.imul(Ee,$e)|0,m=m+Math.imul(be,qe)|0,M=M+Math.imul(be,$e)|0,w=w+Math.imul(le,ze)|0,m=m+Math.imul(le,We)|0,m=m+Math.imul(_e,ze)|0,M=M+Math.imul(_e,We)|0,w=w+Math.imul(ie,Xe)|0,m=m+Math.imul(ie,Je)|0,m=m+Math.imul(fe,Xe)|0,M=M+Math.imul(fe,Je)|0,w=w+Math.imul(N,Ye)|0,m=m+Math.imul(N,Qe)|0,m=m+Math.imul($,Ye)|0,M=M+Math.imul($,Qe)|0,w=w+Math.imul(B,Ct)|0,m=m+Math.imul(B,Bt)|0,m=m+Math.imul(v,Ct)|0,M=M+Math.imul(v,Bt)|0;var qu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(qu>>>26)|0,qu&=67108863,w=Math.imul(H,_t),m=Math.imul(H,je),m=m+Math.imul(J,_t)|0,M=Math.imul(J,je),w=w+Math.imul(C,Ge)|0,m=m+Math.imul(C,Ve)|0,m=m+Math.imul(A,Ge)|0,M=M+Math.imul(A,Ve)|0,w=w+Math.imul(me,qe)|0,m=m+Math.imul(me,$e)|0,m=m+Math.imul(pe,qe)|0,M=M+Math.imul(pe,$e)|0,w=w+Math.imul(Ee,ze)|0,m=m+Math.imul(Ee,We)|0,m=m+Math.imul(be,ze)|0,M=M+Math.imul(be,We)|0,w=w+Math.imul(le,Xe)|0,m=m+Math.imul(le,Je)|0,m=m+Math.imul(_e,Xe)|0,M=M+Math.imul(_e,Je)|0,w=w+Math.imul(ie,Ye)|0,m=m+Math.imul(ie,Qe)|0,m=m+Math.imul(fe,Ye)|0,M=M+Math.imul(fe,Qe)|0,w=w+Math.imul(N,Ct)|0,m=m+Math.imul(N,Bt)|0,m=m+Math.imul($,Ct)|0,M=M+Math.imul($,Bt)|0;var $u=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+($u>>>26)|0,$u&=67108863,w=Math.imul(H,Ge),m=Math.imul(H,Ve),m=m+Math.imul(J,Ge)|0,M=Math.imul(J,Ve),w=w+Math.imul(C,qe)|0,m=m+Math.imul(C,$e)|0,m=m+Math.imul(A,qe)|0,M=M+Math.imul(A,$e)|0,w=w+Math.imul(me,ze)|0,m=m+Math.imul(me,We)|0,m=m+Math.imul(pe,ze)|0,M=M+Math.imul(pe,We)|0,w=w+Math.imul(Ee,Xe)|0,m=m+Math.imul(Ee,Je)|0,m=m+Math.imul(be,Xe)|0,M=M+Math.imul(be,Je)|0,w=w+Math.imul(le,Ye)|0,m=m+Math.imul(le,Qe)|0,m=m+Math.imul(_e,Ye)|0,M=M+Math.imul(_e,Qe)|0,w=w+Math.imul(ie,Ct)|0,m=m+Math.imul(ie,Bt)|0,m=m+Math.imul(fe,Ct)|0,M=M+Math.imul(fe,Bt)|0;var zu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(zu>>>26)|0,zu&=67108863,w=Math.imul(H,qe),m=Math.imul(H,$e),m=m+Math.imul(J,qe)|0,M=Math.imul(J,$e),w=w+Math.imul(C,ze)|0,m=m+Math.imul(C,We)|0,m=m+Math.imul(A,ze)|0,M=M+Math.imul(A,We)|0,w=w+Math.imul(me,Xe)|0,m=m+Math.imul(me,Je)|0,m=m+Math.imul(pe,Xe)|0,M=M+Math.imul(pe,Je)|0,w=w+Math.imul(Ee,Ye)|0,m=m+Math.imul(Ee,Qe)|0,m=m+Math.imul(be,Ye)|0,M=M+Math.imul(be,Qe)|0,w=w+Math.imul(le,Ct)|0,m=m+Math.imul(le,Bt)|0,m=m+Math.imul(_e,Ct)|0,M=M+Math.imul(_e,Bt)|0;var Wu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Wu>>>26)|0,Wu&=67108863,w=Math.imul(H,ze),m=Math.imul(H,We),m=m+Math.imul(J,ze)|0,M=Math.imul(J,We),w=w+Math.imul(C,Xe)|0,m=m+Math.imul(C,Je)|0,m=m+Math.imul(A,Xe)|0,M=M+Math.imul(A,Je)|0,w=w+Math.imul(me,Ye)|0,m=m+Math.imul(me,Qe)|0,m=m+Math.imul(pe,Ye)|0,M=M+Math.imul(pe,Qe)|0,w=w+Math.imul(Ee,Ct)|0,m=m+Math.imul(Ee,Bt)|0,m=m+Math.imul(be,Ct)|0,M=M+Math.imul(be,Bt)|0;var Xu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Xu>>>26)|0,Xu&=67108863,w=Math.imul(H,Xe),m=Math.imul(H,Je),m=m+Math.imul(J,Xe)|0,M=Math.imul(J,Je),w=w+Math.imul(C,Ye)|0,m=m+Math.imul(C,Qe)|0,m=m+Math.imul(A,Ye)|0,M=M+Math.imul(A,Qe)|0,w=w+Math.imul(me,Ct)|0,m=m+Math.imul(me,Bt)|0,m=m+Math.imul(pe,Ct)|0,M=M+Math.imul(pe,Bt)|0;var Ju=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Ju>>>26)|0,Ju&=67108863,w=Math.imul(H,Ye),m=Math.imul(H,Qe),m=m+Math.imul(J,Ye)|0,M=Math.imul(J,Qe),w=w+Math.imul(C,Ct)|0,m=m+Math.imul(C,Bt)|0,m=m+Math.imul(A,Ct)|0,M=M+Math.imul(A,Bt)|0;var Yu=(P+w|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Yu>>>26)|0,Yu&=67108863,w=Math.imul(H,Ct),m=Math.imul(H,Bt),m=m+Math.imul(J,Ct)|0,M=Math.imul(J,Bt);var Qu=(P+w|0)+((m&8191)<<13)|0;return P=(M+(m>>>13)|0)+(Qu>>>26)|0,Qu&=67108863,S[0]=Cu,S[1]=Bu,S[2]=ku,S[3]=Du,S[4]=Uu,S[5]=Ku,S[6]=Hu,S[7]=Fu,S[8]=ju,S[9]=Gu,S[10]=Vu,S[11]=qu,S[12]=$u,S[13]=zu,S[14]=Wu,S[15]=Xu,S[16]=Ju,S[17]=Yu,S[18]=Qu,P!==0&&(S[19]=P,b.length++),b};Math.imul||(z=D);function q(_,u,p){p.negative=u.negative^_.negative,p.length=_.length+u.length;for(var b=0,g=0,h=0;h<p.length-1;h++){var S=g;g=0;for(var P=b&67108863,w=Math.min(h,u.length-1),m=Math.max(0,h-_.length+1);m<=w;m++){var M=h-m,ee=_.words[M]|0,Z=u.words[m]|0,oe=ee*Z,ae=oe&67108863;S=S+(oe/67108864|0)|0,ae=ae+P|0,P=ae&67108863,S=S+(ae>>>26)|0,g+=S>>>26,S&=67108863}p.words[h]=P,b=S,S=g}return b!==0?p.words[h]=b:p.length--,p.strip()}function V(_,u,p){var b=new U;return b.mulp(_,u,p)}s.prototype.mulTo=function(u,p){var b,g=this.length+u.length;return this.length===10&&u.length===10?b=z(this,u,p):g<63?b=D(this,u,p):g<1024?b=q(this,u,p):b=V(this,u,p),b};function U(_,u){this.x=_,this.y=u}U.prototype.makeRBT=function(u){for(var p=new Array(u),b=s.prototype._countBits(u)-1,g=0;g<u;g++)p[g]=this.revBin(g,b,u);return p},U.prototype.revBin=function(u,p,b){if(u===0||u===b-1)return u;for(var g=0,h=0;h<p;h++)g|=(u&1)<<p-h-1,u>>=1;return g},U.prototype.permute=function(u,p,b,g,h,S){for(var P=0;P<S;P++)g[P]=p[u[P]],h[P]=b[u[P]]},U.prototype.transform=function(u,p,b,g,h,S){this.permute(S,u,p,b,g,h);for(var P=1;P<h;P<<=1)for(var w=P<<1,m=Math.cos(2*Math.PI/w),M=Math.sin(2*Math.PI/w),ee=0;ee<h;ee+=w)for(var Z=m,oe=M,ae=0;ae<P;ae++){var X=b[ee+ae],K=g[ee+ae],k=b[ee+ae+P],B=g[ee+ae+P],v=Z*k-oe*B;B=Z*B+oe*k,k=v,b[ee+ae]=X+k,g[ee+ae]=K+B,b[ee+ae+P]=X-k,g[ee+ae+P]=K-B,ae!==w&&(v=m*Z-M*oe,oe=m*oe+M*Z,Z=v)}},U.prototype.guessLen13b=function(u,p){var b=Math.max(p,u)|1,g=b&1,h=0;for(b=b/2|0;b;b=b>>>1)h++;return 1<<h+1+g},U.prototype.conjugate=function(u,p,b){if(!(b<=1))for(var g=0;g<b/2;g++){var h=u[g];u[g]=u[b-g-1],u[b-g-1]=h,h=p[g],p[g]=-p[b-g-1],p[b-g-1]=-h}},U.prototype.normalize13b=function(u,p){for(var b=0,g=0;g<p/2;g++){var h=Math.round(u[2*g+1]/p)*8192+Math.round(u[2*g]/p)+b;u[g]=h&67108863,h<67108864?b=0:b=h/67108864|0}return u},U.prototype.convert13b=function(u,p,b,g){for(var h=0,S=0;S<p;S++)h=h+(u[S]|0),b[2*S]=h&8191,h=h>>>13,b[2*S+1]=h&8191,h=h>>>13;for(S=2*p;S<g;++S)b[S]=0;n(h===0),n((h&-8192)===0)},U.prototype.stub=function(u){for(var p=new Array(u),b=0;b<u;b++)p[b]=0;return p},U.prototype.mulp=function(u,p,b){var g=2*this.guessLen13b(u.length,p.length),h=this.makeRBT(g),S=this.stub(g),P=new Array(g),w=new Array(g),m=new Array(g),M=new Array(g),ee=new Array(g),Z=new Array(g),oe=b.words;oe.length=g,this.convert13b(u.words,u.length,P,g),this.convert13b(p.words,p.length,M,g),this.transform(P,S,w,m,g,h),this.transform(M,S,ee,Z,g,h);for(var ae=0;ae<g;ae++){var X=w[ae]*ee[ae]-m[ae]*Z[ae];m[ae]=w[ae]*Z[ae]+m[ae]*ee[ae],w[ae]=X}return this.conjugate(w,m,g),this.transform(w,m,oe,S,g,h),this.conjugate(oe,S,g),this.normalize13b(oe,g),b.negative=u.negative^p.negative,b.length=u.length+p.length,b.strip()},s.prototype.mul=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},s.prototype.mulf=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),V(this,u,p)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){n(typeof u=="number"),n(u<67108864);for(var p=0,b=0;b<this.length;b++){var g=(this.words[b]|0)*u,h=(g&67108863)+(p&67108863);p>>=26,p+=g/67108864|0,p+=h>>>26,this.words[b]=h&67108863}return p!==0&&(this.words[b]=p,this.length++),this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var p=L(u);if(p.length===0)return new s(1);for(var b=this,g=0;g<p.length&&p[g]===0;g++,b=b.sqr());if(++g<p.length)for(var h=b.sqr();g<p.length;g++,h=h.sqr())p[g]!==0&&(b=b.mul(h));return b},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,g=67108863>>>26-p<<26-p,h;if(p!==0){var S=0;for(h=0;h<this.length;h++){var P=this.words[h]&g,w=(this.words[h]|0)-P<<p;this.words[h]=w|S,S=P>>>26-p}S&&(this.words[h]=S,this.length++)}if(b!==0){for(h=this.length-1;h>=0;h--)this.words[h+b]=this.words[h];for(h=0;h<b;h++)this.words[h]=0;this.length+=b}return this.strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,p,b){n(typeof u=="number"&&u>=0);var g;p?g=(p-p%26)/26:g=0;var h=u%26,S=Math.min((u-h)/26,this.length),P=67108863^67108863>>>h<<h,w=b;if(g-=S,g=Math.max(0,g),w){for(var m=0;m<S;m++)w.words[m]=this.words[m];w.length=S}if(S!==0)if(this.length>S)for(this.length-=S,m=0;m<this.length;m++)this.words[m]=this.words[m+S];else this.words[0]=0,this.length=1;var M=0;for(m=this.length-1;m>=0&&(M!==0||m>=g);m--){var ee=this.words[m]|0;this.words[m]=M<<26-h|ee>>>h,M=ee&P}return w&&M!==0&&(w.words[w.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(u,p,b){return n(this.negative===0),this.iushrn(u,p,b)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,g=1<<p;if(this.length<=b)return!1;var h=this.words[b];return!!(h&g)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(p!==0&&b++,this.length=Math.min(b,this.length),p!==0){var g=67108863^67108863>>>p<<p;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,p,b){var g=u.length+b,h;this._expand(g);var S,P=0;for(h=0;h<u.length;h++){S=(this.words[h+b]|0)+P;var w=(u.words[h]|0)*p;S-=w&67108863,P=(S>>26)-(w/67108864|0),this.words[h+b]=S&67108863}for(;h<this.length-b;h++)S=(this.words[h+b]|0)+P,P=S>>26,this.words[h+b]=S&67108863;if(P===0)return this.strip();for(n(P===-1),P=0,h=0;h<this.length;h++)S=-(this.words[h]|0)+P,P=S>>26,this.words[h]=S&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(u,p){var b=this.length-u.length,g=this.clone(),h=u,S=h.words[h.length-1]|0,P=this._countBits(S);b=26-P,b!==0&&(h=h.ushln(b),g.iushln(b),S=h.words[h.length-1]|0);var w=g.length-h.length,m;if(p!=="mod"){m=new s(null),m.length=w+1,m.words=new Array(m.length);for(var M=0;M<m.length;M++)m.words[M]=0}var ee=g.clone()._ishlnsubmul(h,1,w);ee.negative===0&&(g=ee,m&&(m.words[w]=1));for(var Z=w-1;Z>=0;Z--){var oe=(g.words[h.length+Z]|0)*67108864+(g.words[h.length+Z-1]|0);for(oe=Math.min(oe/S|0,67108863),g._ishlnsubmul(h,oe,Z);g.negative!==0;)oe--,g.negative=0,g._ishlnsubmul(h,1,Z),g.isZero()||(g.negative^=1);m&&(m.words[Z]=oe)}return m&&m.strip(),g.strip(),p!=="div"&&b!==0&&g.iushrn(b),{div:m||null,mod:g}},s.prototype.divmod=function(u,p,b){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,h,S;return this.negative!==0&&u.negative===0?(S=this.neg().divmod(u,p),p!=="mod"&&(g=S.div.neg()),p!=="div"&&(h=S.mod.neg(),b&&h.negative!==0&&h.iadd(u)),{div:g,mod:h}):this.negative===0&&u.negative!==0?(S=this.divmod(u.neg(),p),p!=="mod"&&(g=S.div.neg()),{div:g,mod:S.mod}):this.negative&u.negative?(S=this.neg().divmod(u.neg(),p),p!=="div"&&(h=S.mod.neg(),b&&h.negative!==0&&h.isub(u)),{div:S.div,mod:h}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modn(u.words[0]))}:this._wordDiv(u,p)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var b=p.div.negative!==0?p.mod.isub(u):p.mod,g=u.ushrn(1),h=u.andln(1),S=b.cmp(g);return S<0||h===1&&S===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modn=function(u){n(u<=67108863);for(var p=(1<<26)%u,b=0,g=this.length-1;g>=0;g--)b=(p*b+(this.words[g]|0))%u;return b},s.prototype.idivn=function(u){n(u<=67108863);for(var p=0,b=this.length-1;b>=0;b--){var g=(this.words[b]|0)+p*67108864;this.words[b]=g/u|0,p=g%u}return this.strip()},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var g=new s(1),h=new s(0),S=new s(0),P=new s(1),w=0;p.isEven()&&b.isEven();)p.iushrn(1),b.iushrn(1),++w;for(var m=b.clone(),M=p.clone();!p.isZero();){for(var ee=0,Z=1;!(p.words[0]&Z)&&ee<26;++ee,Z<<=1);if(ee>0)for(p.iushrn(ee);ee-- >0;)(g.isOdd()||h.isOdd())&&(g.iadd(m),h.isub(M)),g.iushrn(1),h.iushrn(1);for(var oe=0,ae=1;!(b.words[0]&ae)&&oe<26;++oe,ae<<=1);if(oe>0)for(b.iushrn(oe);oe-- >0;)(S.isOdd()||P.isOdd())&&(S.iadd(m),P.isub(M)),S.iushrn(1),P.iushrn(1);p.cmp(b)>=0?(p.isub(b),g.isub(S),h.isub(P)):(b.isub(p),S.isub(g),P.isub(h))}return{a:S,b:P,gcd:b.iushln(w)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var g=new s(1),h=new s(0),S=b.clone();p.cmpn(1)>0&&b.cmpn(1)>0;){for(var P=0,w=1;!(p.words[0]&w)&&P<26;++P,w<<=1);if(P>0)for(p.iushrn(P);P-- >0;)g.isOdd()&&g.iadd(S),g.iushrn(1);for(var m=0,M=1;!(b.words[0]&M)&&m<26;++m,M<<=1);if(m>0)for(b.iushrn(m);m-- >0;)h.isOdd()&&h.iadd(S),h.iushrn(1);p.cmp(b)>=0?(p.isub(b),g.isub(h)):(b.isub(p),h.isub(g))}var ee;return p.cmpn(1)===0?ee=g:ee=h,ee.cmpn(0)<0&&ee.iadd(u),ee},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),b=u.clone();p.negative=0,b.negative=0;for(var g=0;p.isEven()&&b.isEven();g++)p.iushrn(1),b.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;b.isEven();)b.iushrn(1);var h=p.cmp(b);if(h<0){var S=p;p=b,b=S}else if(h===0||b.cmpn(1)===0)break;p.isub(b)}while(!0);return b.iushln(g)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var p=u%26,b=(u-p)/26,g=1<<p;if(this.length<=b)return this._expand(b+1),this.words[b]|=g,this;for(var h=g,S=b;h!==0&&S<this.length;S++){var P=this.words[S]|0;P+=h,h=P>>>26,P&=67108863,this.words[S]=P}return h!==0&&(this.words[S]=h,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var b;if(this.length>1)b=1;else{p&&(u=-u),n(u<=67108863,"Number is too big");var g=this.words[0]|0;b=g===u?0:g<u?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,b=this.length-1;b>=0;b--){var g=this.words[b]|0,h=u.words[b]|0;if(g!==h){g<h?p=-1:g>h&&(p=1);break}}return p},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new T(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var W={k256:null,p224:null,p192:null,p25519:null};function F(_,u){this.name=_,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},F.prototype.ireduce=function(u){var p=u,b;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),b=p.bitLength();while(b>this.n);var g=b<this.n?-1:p.ucmp(this.p);return g===0?(p.words[0]=0,p.length=1):g>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},F.prototype.split=function(u,p){u.iushrn(this.n,0,p)},F.prototype.imulK=function(u){return u.imul(this.k)};function j(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(j,F),j.prototype.split=function(u,p){for(var b=4194303,g=Math.min(u.length,9),h=0;h<g;h++)p.words[h]=u.words[h];if(p.length=g,u.length<=9){u.words[0]=0,u.length=1;return}var S=u.words[9];for(p.words[p.length++]=S&b,h=10;h<u.length;h++){var P=u.words[h]|0;u.words[h-10]=(P&b)<<4|S>>>22,S=P}S>>>=22,u.words[h-10]=S,S===0&&u.length>10?u.length-=10:u.length-=9},j.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,b=0;b<u.length;b++){var g=u.words[b]|0;p+=g*977,u.words[b]=p&67108863,p=g*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function G(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(G,F);function E(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(E,F);function y(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(y,F),y.prototype.imulK=function(u){for(var p=0,b=0;b<u.length;b++){var g=(u.words[b]|0)*19+p,h=g&67108863;g>>>=26,u.words[b]=h,p=g}return p!==0&&(u.words[u.length++]=p),u},s._prime=function(u){if(W[u])return W[u];var p;if(u==="k256")p=new j;else if(u==="p224")p=new G;else if(u==="p192")p=new E;else if(u==="p25519")p=new y;else throw new Error("Unknown prime "+u);return W[u]=p,p};function T(_){if(typeof _=="string"){var u=s._prime(_);this.m=u.p,this.prime=u}else n(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}T.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},T.prototype._verify2=function(u,p){n((u.negative|p.negative)===0,"red works only with positives"),n(u.red&&u.red===p.red,"red works only with red numbers")},T.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},T.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},T.prototype.add=function(u,p){this._verify2(u,p);var b=u.add(p);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},T.prototype.iadd=function(u,p){this._verify2(u,p);var b=u.iadd(p);return b.cmp(this.m)>=0&&b.isub(this.m),b},T.prototype.sub=function(u,p){this._verify2(u,p);var b=u.sub(p);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},T.prototype.isub=function(u,p){this._verify2(u,p);var b=u.isub(p);return b.cmpn(0)<0&&b.iadd(this.m),b},T.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},T.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},T.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},T.prototype.isqr=function(u){return this.imul(u,u.clone())},T.prototype.sqr=function(u){return this.mul(u,u)},T.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(u,b)}for(var g=this.m.subn(1),h=0;!g.isZero()&&g.andln(1)===0;)h++,g.iushrn(1);n(!g.isZero());var S=new s(1).toRed(this),P=S.redNeg(),w=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new s(2*m*m).toRed(this);this.pow(m,w).cmp(P)!==0;)m.redIAdd(P);for(var M=this.pow(m,g),ee=this.pow(u,g.addn(1).iushrn(1)),Z=this.pow(u,g),oe=h;Z.cmp(S)!==0;){for(var ae=Z,X=0;ae.cmp(S)!==0;X++)ae=ae.redSqr();n(X<oe);var K=this.pow(M,new s(1).iushln(oe-X-1));ee=ee.redMul(K),M=K.redSqr(),Z=Z.redMul(M),oe=X}return ee},T.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},T.prototype.pow=function(u,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var b=4,g=new Array(1<<b);g[0]=new s(1).toRed(this),g[1]=u;for(var h=2;h<g.length;h++)g[h]=this.mul(g[h-1],u);var S=g[0],P=0,w=0,m=p.bitLength()%26;for(m===0&&(m=26),h=p.length-1;h>=0;h--){for(var M=p.words[h],ee=m-1;ee>=0;ee--){var Z=M>>ee&1;if(S!==g[0]&&(S=this.sqr(S)),Z===0&&P===0){w=0;continue}P<<=1,P|=Z,w++,!(w!==b&&(h!==0||ee!==0))&&(S=this.mul(S,g[P]),w=0,P=0)}m=26}return S},T.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},T.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},s.mont=function(u){return new x(u)};function x(_){T.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(x,T),x.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},x.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},x.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var b=u.imul(p),g=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=b.isub(g).iushrn(this.shift),S=h;return h.cmp(this.m)>=0?S=h.isub(this.m):h.cmpn(0)<0&&(S=h.iadd(this.m)),S._forceRed(this)},x.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new s(0)._forceRed(this);var b=u.mul(p),g=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),h=b.isub(g).iushrn(this.shift),S=h;return h.cmp(this.m)>=0?S=h.isub(this.m):h.cmpn(0)<0&&(S=h.iadd(this.m)),S._forceRed(this)},x.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(t,xn)})(Lw);var no=Hb;function Hb(t,e){if(!t)throw new Error(e||"Assertion failed")}Hb.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var yh={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),f=l>>8,d=l&255;f?a.push(f,d):a.push(d)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(yh);(function(t){var e=t,r=Rn,n=no,i=yh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,d,O){var L=new Array(Math.max(f.bitLength(),O)+1);L.fill(0);for(var D=1<<d+1,z=f.clone(),q=0;q<L.length;q++){var V,U=z.andln(D-1);z.isOdd()?(U>(D>>1)-1?V=(D>>1)-U:V=U,z.isubn(V)):V=0,L[q]=V,z.iushrn(1)}return L}e.getNAF=s;function o(f,d){var O=[[],[]];f=f.clone(),d=d.clone();for(var L=0,D=0,z;f.cmpn(-L)>0||d.cmpn(-D)>0;){var q=f.andln(3)+L&3,V=d.andln(3)+D&3;q===3&&(q=-1),V===3&&(V=-1);var U;q&1?(z=f.andln(7)+L&7,(z===3||z===5)&&V===2?U=-q:U=q):U=0,O[0].push(U);var W;V&1?(z=d.andln(7)+D&7,(z===3||z===5)&&q===2?W=-V:W=V):W=0,O[1].push(W),2*L===U+1&&(L=1-L),2*D===W+1&&(D=1-D),f.iushrn(1),d.iushrn(1)}return O}e.getJSF=o;function a(f,d,O){var L="_"+d;f.prototype[d]=function(){return this[L]!==void 0?this[L]:this[L]=O.call(this)}}e.cachedProperty=a;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function l(f){return new r(f,"hex","le")}e.intFromLE=l})(Jr);var Va={},Cw={get exports(){return Va},set exports(t){Va=t}},Ol;Cw.exports=function(e){return Ol||(Ol=new us(null)),Ol.generate(e)};function us(t){this.rand=t}Va.Rand=us;us.prototype.generate=function(e){return this._rand(e)};us.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?us.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?us.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(us.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var xp=bs;if(typeof xp.randomBytes!="function")throw new Error("Not supported");us.prototype._rand=function(e){return xp.randomBytes(e)}}catch{}var Eh={},Ns=Rn,cc=Jr,bf=cc.getNAF,Bw=cc.getJSF,vf=cc.assert;function Is(t,e){this.type=t,this.p=new Ns(e.p,16),this.red=e.prime?Ns.red(e.prime):Ns.mont(this.p),this.zero=new Ns(0).toRed(this.red),this.one=new Ns(1).toRed(this.red),this.two=new Ns(2).toRed(this.red),this.n=e.n&&new Ns(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var fu=Is;Is.prototype.point=function(){throw new Error("Not implemented")};Is.prototype.validate=function(){throw new Error("Not implemented")};Is.prototype._fixedNafMul=function(e,r){vf(e.precomputed);var n=e._getDoubles(),i=bf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),O=s;O>0;O--){for(a=0;a<o.length;a++)c=o[a],c===O?d=d.mixedAdd(n.points[a]):c===-O&&(d=d.mixedAdd(n.points[a].neg()));f=f.add(d)}return f.toP()};Is.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=bf(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var f=o[c];vf(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};Is.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,f,d,O;for(f=0;f<i;f++){O=r[f];var L=O._getNAFPoints(e);o[f]=L.wnd,a[f]=L.points}for(f=i-1;f>=1;f-=2){var D=f-1,z=f;if(o[D]!==1||o[z]!==1){c[D]=bf(n[D],o[D],this._bitLength),c[z]=bf(n[z],o[z],this._bitLength),l=Math.max(c[D].length,l),l=Math.max(c[z].length,l);continue}var q=[r[D],null,null,r[z]];r[D].y.cmp(r[z].y)===0?(q[1]=r[D].add(r[z]),q[2]=r[D].toJ().mixedAdd(r[z].neg())):r[D].y.cmp(r[z].y.redNeg())===0?(q[1]=r[D].toJ().mixedAdd(r[z]),q[2]=r[D].add(r[z].neg())):(q[1]=r[D].toJ().mixedAdd(r[z]),q[2]=r[D].toJ().mixedAdd(r[z].neg()));var V=[-3,-1,-5,-7,0,7,5,1,3],U=Bw(n[D],n[z]);for(l=Math.max(U[0].length,l),c[D]=new Array(l),c[z]=new Array(l),d=0;d<l;d++){var W=U[0][d]|0,F=U[1][d]|0;c[D][d]=V[(W+1)*3+(F+1)],c[z][d]=0,a[D]=q}}var j=this.jpoint(null,null,null),G=this._wnafT4;for(f=l;f>=0;f--){for(var E=0;f>=0;){var y=!0;for(d=0;d<i;d++)G[d]=c[d][f]|0,G[d]!==0&&(y=!1);if(!y)break;E++,f--}if(f>=0&&E++,j=j.dblp(E),f<0)break;for(d=0;d<i;d++){var T=G[d];T!==0&&(T>0?O=a[d][T-1>>1]:T<0&&(O=a[d][-T-1>>1].neg()),O.type==="affine"?j=j.mixedAdd(O):j=j.add(O))}}for(f=0;f<i;f++)a[f]=null;return s?j:j.toP()};function fn(t,e){this.curve=t,this.type=e,this.precomputed=null}Is.BasePoint=fn;fn.prototype.eq=function(){throw new Error("Not implemented")};fn.prototype.validate=function(){return this.curve.validate(this)};Is.prototype.decodePoint=function(e,r){e=cc.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?vf(e[e.length-1]%2===0):e[0]===7&&vf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};fn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};fn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};fn.prototype.encode=function(e,r){return cc.encode(this._encode(r),e)};fn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};fn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};fn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};fn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};fn.prototype._getBeta=function(){return null};fn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var kw=Jr,It=Rn,_h=Ot,Qo=fu,Dw=kw.assert;function un(t){Qo.call(this,"short",t),this.a=new It(t.a,16).toRed(this.red),this.b=new It(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_h(un,Qo);var Uw=un;un.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new It(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new It(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Dw(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new It(a.a,16),b:new It(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};un.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:It.mont(e),n=new It(2).toRed(r).redInvm(),i=n.redNeg(),s=new It(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};un.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new It(1),o=new It(0),a=new It(0),c=new It(1),l,f,d,O,L,D,z,q=0,V,U;n.cmpn(0)!==0;){var W=i.div(n);V=i.sub(W.mul(n)),U=a.sub(W.mul(s));var F=c.sub(W.mul(o));if(!d&&V.cmp(r)<0)l=z.neg(),f=s,d=V.neg(),O=U;else if(d&&++q===2)break;z=V,i=n,n=V,a=s,s=U,c=o,o=F}L=V.neg(),D=U;var j=d.sqr().add(O.sqr()),G=L.sqr().add(D.sqr());return G.cmp(j)>=0&&(L=l,D=f),d.negative&&(d=d.neg(),O=O.neg()),L.negative&&(L=L.neg(),D=D.neg()),[{a:d,b:O},{a:L,b:D}]};un.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),f=o.mul(i.b),d=e.sub(a).sub(c),O=l.add(f).neg();return{k1:d,k2:O}};un.prototype.pointFromX=function(e,r){e=new It(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};un.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};un.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),d=0;d<o*2;d++)i[d]=null,s[d]=null;return f};function rr(t,e,r,n){Qo.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new It(e,16),this.y=new It(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_h(rr,Qo.BasePoint);un.prototype.point=function(e,r,n){return new rr(this,e,r,n)};un.prototype.pointFromJSON=function(e,r){return rr.fromJSON(this,e,r)};rr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};rr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};rr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};rr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};rr.prototype.isInfinity=function(){return this.inf};rr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};rr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};rr.prototype.getX=function(){return this.x.fromRed()};rr.prototype.getY=function(){return this.y.fromRed()};rr.prototype.mul=function(e){return e=new It(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};rr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};rr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};rr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};rr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};rr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function sr(t,e,r,n){Qo.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new It(0)):(this.x=new It(e,16),this.y=new It(r,16),this.z=new It(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}_h(sr,Qo.BasePoint);un.prototype.jpoint=function(e,r,n){return new sr(this,e,r,n)};sr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};sr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};sr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),O=i.redMul(f),L=l.redSqr().redIAdd(d).redISub(O).redISub(O),D=l.redMul(O.redISub(L)).redISub(o.redMul(d)),z=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(L,D,z)};sr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),f=l.redMul(a),d=n.redMul(l),O=c.redSqr().redIAdd(f).redISub(d).redISub(d),L=c.redMul(d.redISub(O)).redISub(s.redMul(f)),D=this.z.redMul(a);return this.curve.jpoint(O,L,D)};sr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),O=f.redSqr(),L=O.redSqr(),D=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(l)),z=o.redMul(O),q=D.redSqr().redISub(z.redAdd(z)),V=z.redISub(q),U=D.redMul(V);U=U.redIAdd(U).redISub(L);var W=f.redMul(c);r+1<e&&(l=l.redMul(L)),o=q,c=W,f=U}return this.curve.jpoint(o,f.redMul(s),c)};sr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};sr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=l,r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),O=this.y.redSqr(),L=O.redSqr(),D=this.x.redAdd(O).redSqr().redISub(d).redISub(L);D=D.redIAdd(D);var z=d.redAdd(d).redIAdd(d),q=z.redSqr(),V=L.redIAdd(L);V=V.redIAdd(V),V=V.redIAdd(V),e=q.redISub(D).redISub(D),r=z.redMul(D.redISub(e)).redISub(V),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};sr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),O=this.y.redSqr(),L=this.x.redMul(O),D=this.x.redSub(d).redMul(this.x.redAdd(d));D=D.redAdd(D).redIAdd(D);var z=L.redIAdd(L);z=z.redIAdd(z);var q=z.redAdd(z);e=D.redSqr().redISub(q),n=this.y.redAdd(this.z).redSqr().redISub(O).redISub(d);var V=O.redSqr();V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V),r=D.redMul(z.redISub(e)).redISub(V)}return this.curve.jpoint(e,r,n)};sr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var f=l.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),O=f.redISub(d),L=a.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var D=c.redMul(O).redISub(L),z=n.redAdd(n).redMul(i);return this.curve.jpoint(d,D,z)};sr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var O=this.x.redMul(c).redISub(d);O=O.redIAdd(O),O=O.redIAdd(O);var L=this.y.redMul(f.redMul(l.redISub(f)).redISub(a.redMul(c)));L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var D=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(O,L,D)};sr.prototype.mul=function(e,r){return e=new It(e,r),this.curve._wnafMul(this,e)};sr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};sr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};sr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};sr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var _o=Rn,Fb=Ot,uu=fu,Kw=Jr;function Zo(t){uu.call(this,"mont",t),this.a=new _o(t.a,16).toRed(this.red),this.b=new _o(t.b,16).toRed(this.red),this.i4=new _o(4).toRed(this.red).redInvm(),this.two=new _o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Fb(Zo,uu);var Hw=Zo;Zo.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function tr(t,e,r){uu.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new _o(e,16),this.z=new _o(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Fb(tr,uu.BasePoint);Zo.prototype.decodePoint=function(e,r){return this.point(Kw.toArray(e,r),1)};Zo.prototype.point=function(e,r){return new tr(this,e,r)};Zo.prototype.pointFromJSON=function(e){return tr.fromJSON(this,e)};tr.prototype.precompute=function(){};tr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};tr.fromJSON=function(e,r){return new tr(e,r[0],r[1]||e.one)};tr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};tr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};tr.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};tr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};tr.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,f)};tr.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};tr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};tr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};tr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};tr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};tr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Fw=Jr,Ci=Rn,jb=Ot,lu=fu,jw=Fw.assert;function fi(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,lu.call(this,"edwards",t),this.a=new Ci(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Ci(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Ci(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),jw(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}jb(fi,lu);var Gw=fi;fi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};fi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};fi.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};fi.prototype.pointFromX=function(e,r){e=new Ci(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};fi.prototype.pointFromY=function(e,r){e=new Ci(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};fi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function bt(t,e,r,n,i){lu.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ci(e,16),this.y=new Ci(r,16),this.z=n?new Ci(n,16):this.curve.one,this.t=i&&new Ci(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}jb(bt,lu.BasePoint);fi.prototype.pointFromJSON=function(e){return bt.fromJSON(this,e)};fi.prototype.point=function(e,r,n,i){return new bt(this,e,r,n,i)};bt.fromJSON=function(e,r){return new bt(e,r[0],r[1],r[2])};bt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};bt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};bt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),f=o.redMul(c),d=s.redMul(c),O=a.redMul(o);return this.curve.point(l,f,O,d)};bt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),l=f.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=f.redMul(a.redSub(n)),o=f.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};bt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};bt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),f=o.redMul(a),d=c.redMul(l),O=o.redMul(l),L=a.redMul(c);return this.curve.point(f,d,L,O)};bt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(l),d,O;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),O=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(i)),O=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,O)};bt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};bt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};bt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};bt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};bt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};bt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};bt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};bt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};bt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};bt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};bt.prototype.toP=bt.prototype.normalize;bt.prototype.mixedAdd=bt.prototype.add;(function(t){var e=t;e.base=fu,e.short=Uw,e.mont=Hw,e.edwards=Gw})(Eh);var du={},hu={},Ze={},Vw=no,qw=Ot;Ze.inherits=qw;function $w(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function zw(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):$w(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Ze.toArray=zw;function Ww(t){for(var e="",r=0;r<t.length;r++)e+=Vb(t[r].toString(16));return e}Ze.toHex=Ww;function Gb(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ze.htonl=Gb;function Xw(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Gb(i)),r+=qb(i.toString(16))}return r}Ze.toHex32=Xw;function Vb(t){return t.length===1?"0"+t:t}Ze.zero2=Vb;function qb(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ze.zero8=qb;function Jw(t,e,r,n){var i=r-e;Vw(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Ze.join32=Jw;function Yw(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Ze.split32=Yw;function Qw(t,e){return t>>>e|t<<32-e}Ze.rotr32=Qw;function Zw(t,e){return t<<e|t>>>32-e}Ze.rotl32=Zw;function e6(t,e){return t+e>>>0}Ze.sum32=e6;function t6(t,e,r){return t+e+r>>>0}Ze.sum32_3=t6;function r6(t,e,r,n){return t+e+r+n>>>0}Ze.sum32_4=r6;function n6(t,e,r,n,i){return t+e+r+n+i>>>0}Ze.sum32_5=n6;function i6(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}Ze.sum64=i6;function s6(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Ze.sum64_hi=s6;function o6(t,e,r,n){var i=e+n;return i>>>0}Ze.sum64_lo=o6;function a6(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var f=t+r+i+o+c;return f>>>0}Ze.sum64_4_hi=a6;function c6(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}Ze.sum64_4_lo=c6;function f6(t,e,r,n,i,s,o,a,c,l){var f=0,d=e;d=d+n>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+a>>>0,f+=d<a?1:0,d=d+l>>>0,f+=d<l?1:0;var O=t+r+i+o+c+f;return O>>>0}Ze.sum64_5_hi=f6;function u6(t,e,r,n,i,s,o,a,c,l){var f=e+n+s+a+l;return f>>>0}Ze.sum64_5_lo=u6;function l6(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ze.rotr64_hi=l6;function d6(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.rotr64_lo=d6;function h6(t,e,r){return t>>>r}Ze.shr64_hi=h6;function p6(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.shr64_lo=p6;var ea={},Sp=Ze,g6=no;function pu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ea.BlockHash=pu;pu.prototype.update=function(e,r){if(e=Sp.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=Sp.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};pu.prototype.digest=function(e){return this.update(this._pad()),g6(this.pending===null),this._digest(e)};pu.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var ta={},ui={},b6=Ze,Zn=b6.rotr32;function v6(t,e,r,n){if(t===0)return $b(e,r,n);if(t===1||t===3)return Wb(e,r,n);if(t===2)return zb(e,r,n)}ui.ft_1=v6;function $b(t,e,r){return t&e^~t&r}ui.ch32=$b;function zb(t,e,r){return t&e^t&r^e&r}ui.maj32=zb;function Wb(t,e,r){return t^e^r}ui.p32=Wb;function m6(t){return Zn(t,2)^Zn(t,13)^Zn(t,22)}ui.s0_256=m6;function y6(t){return Zn(t,6)^Zn(t,11)^Zn(t,25)}ui.s1_256=y6;function E6(t){return Zn(t,7)^Zn(t,18)^t>>>3}ui.g0_256=E6;function _6(t){return Zn(t,17)^Zn(t,19)^t>>>10}ui.g1_256=_6;var Co=Ze,w6=ea,A6=ui,Pl=Co.rotl32,Ea=Co.sum32,x6=Co.sum32_5,S6=A6.ft_1,Xb=w6.BlockHash,R6=[1518500249,1859775393,2400959708,3395469782];function ii(){if(!(this instanceof ii))return new ii;Xb.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Co.inherits(ii,Xb);var I6=ii;ii.blockSize=512;ii.outSize=160;ii.hmacStrength=80;ii.padLength=64;ii.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Pl(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),d=x6(Pl(s,5),S6(f,o,a,c),l,n[i],R6[f]);l=c,c=a,a=Pl(o,30),o=s,s=d}this.h[0]=Ea(this.h[0],s),this.h[1]=Ea(this.h[1],o),this.h[2]=Ea(this.h[2],a),this.h[3]=Ea(this.h[3],c),this.h[4]=Ea(this.h[4],l)};ii.prototype._digest=function(e){return e==="hex"?Co.toHex32(this.h,"big"):Co.split32(this.h,"big")};var Bo=Ze,T6=ea,ra=ui,O6=no,dn=Bo.sum32,P6=Bo.sum32_4,N6=Bo.sum32_5,M6=ra.ch32,L6=ra.maj32,C6=ra.s0_256,B6=ra.s1_256,k6=ra.g0_256,D6=ra.g1_256,Jb=T6.BlockHash,U6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function si(){if(!(this instanceof si))return new si;Jb.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=U6,this.W=new Array(64)}Bo.inherits(si,Jb);var Yb=si;si.blockSize=512;si.outSize=256;si.hmacStrength=192;si.padLength=64;si.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=P6(D6(n[i-2]),n[i-7],k6(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],f=this.h[5],d=this.h[6],O=this.h[7];for(O6(this.k.length===n.length),i=0;i<n.length;i++){var L=N6(O,B6(l),M6(l,f,d),this.k[i],n[i]),D=dn(C6(s),L6(s,o,a));O=d,d=f,f=l,l=dn(c,L),c=a,a=o,o=s,s=dn(L,D)}this.h[0]=dn(this.h[0],s),this.h[1]=dn(this.h[1],o),this.h[2]=dn(this.h[2],a),this.h[3]=dn(this.h[3],c),this.h[4]=dn(this.h[4],l),this.h[5]=dn(this.h[5],f),this.h[6]=dn(this.h[6],d),this.h[7]=dn(this.h[7],O)};si.prototype._digest=function(e){return e==="hex"?Bo.toHex32(this.h,"big"):Bo.split32(this.h,"big")};var Md=Ze,Qb=Yb;function Hi(){if(!(this instanceof Hi))return new Hi;Qb.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Md.inherits(Hi,Qb);var K6=Hi;Hi.blockSize=512;Hi.outSize=224;Hi.hmacStrength=192;Hi.padLength=64;Hi.prototype._digest=function(e){return e==="hex"?Md.toHex32(this.h.slice(0,7),"big"):Md.split32(this.h.slice(0,7),"big")};var Lr=Ze,H6=ea,F6=no,ei=Lr.rotr64_hi,ti=Lr.rotr64_lo,Zb=Lr.shr64_hi,ev=Lr.shr64_lo,Ji=Lr.sum64,Nl=Lr.sum64_hi,Ml=Lr.sum64_lo,j6=Lr.sum64_4_hi,G6=Lr.sum64_4_lo,V6=Lr.sum64_5_hi,q6=Lr.sum64_5_lo,tv=H6.BlockHash,$6=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function In(){if(!(this instanceof In))return new In;tv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=$6,this.W=new Array(160)}Lr.inherits(In,tv);var rv=In;In.blockSize=1024;In.outSize=512;In.hmacStrength=192;In.padLength=128;In.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=n5(n[i-4],n[i-3]),o=i5(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=t5(n[i-30],n[i-29]),f=r5(n[i-30],n[i-29]),d=n[i-32],O=n[i-31];n[i]=j6(s,o,a,c,l,f,d,O),n[i+1]=G6(s,o,a,c,l,f,d,O)}};In.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],f=this.h[6],d=this.h[7],O=this.h[8],L=this.h[9],D=this.h[10],z=this.h[11],q=this.h[12],V=this.h[13],U=this.h[14],W=this.h[15];F6(this.k.length===n.length);for(var F=0;F<n.length;F+=2){var j=U,G=W,E=Z6(O,L),y=e5(O,L),T=z6(O,L,D,z,q),x=W6(O,L,D,z,q,V),_=this.k[F],u=this.k[F+1],p=n[F],b=n[F+1],g=V6(j,G,E,y,T,x,_,u,p,b),h=q6(j,G,E,y,T,x,_,u,p,b);j=Y6(i,s),G=Q6(i,s),E=X6(i,s,o,a,c),y=J6(i,s,o,a,c,l);var S=Nl(j,G,E,y),P=Ml(j,G,E,y);U=q,W=V,q=D,V=z,D=O,z=L,O=Nl(f,d,g,h),L=Ml(d,d,g,h),f=c,d=l,c=o,l=a,o=i,a=s,i=Nl(g,h,S,P),s=Ml(g,h,S,P)}Ji(this.h,0,i,s),Ji(this.h,2,o,a),Ji(this.h,4,c,l),Ji(this.h,6,f,d),Ji(this.h,8,O,L),Ji(this.h,10,D,z),Ji(this.h,12,q,V),Ji(this.h,14,U,W)};In.prototype._digest=function(e){return e==="hex"?Lr.toHex32(this.h,"big"):Lr.split32(this.h,"big")};function z6(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function W6(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function X6(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function J6(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function Y6(t,e){var r=ei(t,e,28),n=ei(e,t,2),i=ei(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Q6(t,e){var r=ti(t,e,28),n=ti(e,t,2),i=ti(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Z6(t,e){var r=ei(t,e,14),n=ei(t,e,18),i=ei(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function e5(t,e){var r=ti(t,e,14),n=ti(t,e,18),i=ti(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function t5(t,e){var r=ei(t,e,1),n=ei(t,e,8),i=Zb(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function r5(t,e){var r=ti(t,e,1),n=ti(t,e,8),i=ev(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function n5(t,e){var r=ei(t,e,19),n=ei(e,t,29),i=Zb(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function i5(t,e){var r=ti(t,e,19),n=ti(e,t,29),i=ev(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var Ld=Ze,nv=rv;function Fi(){if(!(this instanceof Fi))return new Fi;nv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ld.inherits(Fi,nv);var s5=Fi;Fi.blockSize=1024;Fi.outSize=384;Fi.hmacStrength=192;Fi.padLength=128;Fi.prototype._digest=function(e){return e==="hex"?Ld.toHex32(this.h.slice(0,12),"big"):Ld.split32(this.h.slice(0,12),"big")};ta.sha1=I6;ta.sha224=K6;ta.sha256=Yb;ta.sha384=s5;ta.sha512=rv;var iv={},Xs=Ze,o5=ea,Ic=Xs.rotl32,Rp=Xs.sum32,_a=Xs.sum32_3,Ip=Xs.sum32_4,sv=o5.BlockHash;function oi(){if(!(this instanceof oi))return new oi;sv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Xs.inherits(oi,sv);iv.ripemd160=oi;oi.blockSize=512;oi.outSize=160;oi.hmacStrength=192;oi.padLength=64;oi.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,f=s,d=o,O=a,L=0;L<80;L++){var D=Rp(Ic(Ip(n,Tp(L,i,s,o),e[f5[L]+r],a5(L)),l5[L]),a);n=a,a=o,o=Ic(s,10),s=i,i=D,D=Rp(Ic(Ip(c,Tp(79-L,l,f,d),e[u5[L]+r],c5(L)),d5[L]),O),c=O,O=d,d=Ic(f,10),f=l,l=D}D=_a(this.h[1],s,d),this.h[1]=_a(this.h[2],o,O),this.h[2]=_a(this.h[3],a,c),this.h[3]=_a(this.h[4],n,l),this.h[4]=_a(this.h[0],i,f),this.h[0]=D};oi.prototype._digest=function(e){return e==="hex"?Xs.toHex32(this.h,"little"):Xs.split32(this.h,"little")};function Tp(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function a5(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function c5(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var f5=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u5=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l5=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d5=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h5=Ze,p5=no;function ko(t,e,r){if(!(this instanceof ko))return new ko(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(h5.toArray(e,r))}var g5=ko;ko.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),p5(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};ko.prototype.update=function(e,r){return this.inner.update(e,r),this};ko.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ze,e.common=ea,e.sha=ta,e.ripemd=iv,e.hmac=g5,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hu);var Ll,Op;function b5(){return Op||(Op=1,Ll={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Ll}(function(t){var e=t,r=hu,n=Eh,i=Jr,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,f){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var d=new o(f);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:d}),d}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=b5()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(du);var v5=hu,Gs=yh,ov=no;function vs(t){if(!(this instanceof vs))return new vs(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Gs.toArray(t.entropy,t.entropyEnc||"hex"),r=Gs.toArray(t.nonce,t.nonceEnc||"hex"),n=Gs.toArray(t.pers,t.persEnc||"hex");ov(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var m5=vs;vs.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};vs.prototype._hmac=function(){return new v5.hmac(this.hash,this.K)};vs.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};vs.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Gs.toArray(e,r),n=Gs.toArray(n,i),ov(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};vs.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Gs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Gs.encode(o,r)};var y5=Rn,E5=Jr,Cd=E5.assert;function Er(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var _5=Er;Er.fromPublic=function(e,r,n){return r instanceof Er?r:new Er(e,{pub:r,pubEnc:n})};Er.fromPrivate=function(e,r,n){return r instanceof Er?r:new Er(e,{priv:r,privEnc:n})};Er.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Er.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Er.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Er.prototype._importPrivate=function(e,r){this.priv=new y5(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Er.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Cd(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Cd(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Er.prototype.derive=function(e){return e.validate()||Cd(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Er.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Er.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Er.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var mf=Rn,wh=Jr,w5=wh.assert;function gu(t,e){if(t instanceof gu)return t;this._importDER(t,e)||(w5(t.r&&t.s,"Signature without r or s"),this.r=new mf(t.r,16),this.s=new mf(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var A5=gu;function x5(){this.place=0}function Cl(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function Pp(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}gu.prototype._importDER=function(e,r){e=wh.toArray(e,r);var n=new x5;if(e[n.place++]!==48)return!1;var i=Cl(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Cl(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=Cl(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new mf(o),this.s=new mf(c),this.recoveryParam=null,!0};function Bl(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}gu.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Pp(r),n=Pp(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Bl(i,r.length),i=i.concat(r),i.push(2),Bl(i,n.length);var s=i.concat(n),o=[48];return Bl(o,s.length),o=o.concat(s),wh.encode(o,e)};var Vs=Rn,av=m5,S5=Jr,kl=du,R5=Va,cv=S5.assert,Ah=_5,bu=A5;function an(t){if(!(this instanceof an))return new an(t);typeof t=="string"&&(cv(Object.prototype.hasOwnProperty.call(kl,t),"Unknown curve "+t),t=kl[t]),t instanceof kl.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var I5=an;an.prototype.keyPair=function(e){return new Ah(this,e)};an.prototype.keyFromPrivate=function(e,r){return Ah.fromPrivate(this,e,r)};an.prototype.keyFromPublic=function(e,r){return Ah.fromPublic(this,e,r)};an.prototype.genKeyPair=function(e){e||(e={});for(var r=new av({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||R5(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Vs(2));;){var s=new Vs(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};an.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};an.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Vs(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new av({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new Vs(1)),f=0;;f++){var d=i.k?i.k(f):new Vs(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(l)>=0)){var O=this.g.mul(d);if(!O.isInfinity()){var L=O.getX(),D=L.umod(this.n);if(D.cmpn(0)!==0){var z=d.invm(this.n).mul(D.mul(r.getPrivate()).iadd(e));if(z=z.umod(this.n),z.cmpn(0)!==0){var q=(O.getY().isOdd()?1:0)|(L.cmp(D)!==0?2:0);return i.canonical&&z.cmp(this.nh)>0&&(z=this.n.sub(z),q^=1),new bu({r:D,s:z,recoveryParam:q})}}}}}};an.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Vs(e,16)),n=this.keyFromPublic(n,i),r=new bu(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};an.prototype.recoverPubKey=function(t,e,r,n){cv((3&r)===r,"The recovery param is more than two bits"),e=new bu(e,n);var i=this.n,s=new Vs(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(i),d=i.sub(s).mul(f).umod(i),O=a.mul(f).umod(i);return this.g.mulAdd(d,o,O)};an.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new bu(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var fc=Jr,fv=fc.assert,Np=fc.parseBytes,na=fc.cachedProperty;function er(t,e){this.eddsa=t,this._secret=Np(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Np(e.pub)}er.fromPublic=function(e,r){return r instanceof er?r:new er(e,{pub:r})};er.fromSecret=function(e,r){return r instanceof er?r:new er(e,{secret:r})};er.prototype.secret=function(){return this._secret};na(er,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});na(er,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});na(er,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});na(er,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});na(er,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});na(er,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});er.prototype.sign=function(e){return fv(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};er.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};er.prototype.getSecret=function(e){return fv(this._secret,"KeyPair is public only"),fc.encode(this.secret(),e)};er.prototype.getPublic=function(e){return fc.encode(this.pubBytes(),e)};var T5=er,O5=Rn,vu=Jr,P5=vu.assert,mu=vu.cachedProperty,N5=vu.parseBytes;function io(t,e){this.eddsa=t,typeof e!="object"&&(e=N5(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),P5(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof O5&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}mu(io,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});mu(io,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});mu(io,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});mu(io,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});io.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};io.prototype.toHex=function(){return vu.encode(this.toBytes(),"hex").toUpperCase()};var M5=io,L5=hu,C5=du,Do=Jr,B5=Do.assert,uv=Do.parseBytes,lv=T5,Mp=M5;function Cr(t){if(B5(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Cr))return new Cr(t);t=C5[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=L5.sha512}var k5=Cr;Cr.prototype.sign=function(e,r){e=uv(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};Cr.prototype.verify=function(e,r,n){e=uv(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};Cr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Do.intFromLE(e.digest()).umod(this.curve.n)};Cr.prototype.keyFromPublic=function(e){return lv.fromPublic(this,e)};Cr.prototype.keyFromSecret=function(e){return lv.fromSecret(this,e)};Cr.prototype.makeSignature=function(e){return e instanceof Mp?e:new Mp(this,e)};Cr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Cr.prototype.decodePoint=function(e){e=Do.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Do.intFromLE(n);return this.curve.pointFromY(s,i)};Cr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Cr.prototype.decodeInt=function(e){return Do.intFromLE(e)};Cr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=Mw.version,e.utils=Jr,e.rand=Va,e.curve=Eh,e.curves=du,e.ec=I5,e.eddsa=k5})(vw);var se;(function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.TZ4="tz4",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.BLPK="BLpk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="B",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ",t.VH="vh",t.SASK="sask",t.ZET1="zet1",t.TXR1="txr1",t.TXI="txi",t.TXM="txm",t.TXC="txc",t.TXMR="txmr",t.TXRL="txM",t.TXW="txw",t.SR1="sr1",t.SRC1="src1"})(se||(se={}));const vr={[se.TZ1]:new Uint8Array([6,161,159]),[se.TZ2]:new Uint8Array([6,161,161]),[se.TZ3]:new Uint8Array([6,161,164]),[se.TZ4]:new Uint8Array([6,161,166]),[se.KT]:new Uint8Array([2,90,121]),[se.KT1]:new Uint8Array([2,90,121]),[se.EDSK]:new Uint8Array([43,246,78,7]),[se.EDSK2]:new Uint8Array([13,15,58,7]),[se.SPSK]:new Uint8Array([17,162,224,201]),[se.P2SK]:new Uint8Array([16,81,238,189]),[se.EDPK]:new Uint8Array([13,15,37,217]),[se.SPPK]:new Uint8Array([3,254,226,86]),[se.P2PK]:new Uint8Array([3,178,139,127]),[se.BLPK]:new Uint8Array([6,149,135,204]),[se.EDESK]:new Uint8Array([7,90,60,179,41]),[se.SPESK]:new Uint8Array([9,237,241,174,150]),[se.P2ESK]:new Uint8Array([9,48,57,115,171]),[se.EDSIG]:new Uint8Array([9,245,205,134,18]),[se.SPSIG]:new Uint8Array([13,115,101,19,63]),[se.P2SIG]:new Uint8Array([54,240,44,52]),[se.SIG]:new Uint8Array([4,130,43]),[se.NET]:new Uint8Array([87,82,0]),[se.NCE]:new Uint8Array([69,220,169]),[se.B]:new Uint8Array([1,52]),[se.O]:new Uint8Array([5,116]),[se.LO]:new Uint8Array([133,233]),[se.LLO]:new Uint8Array([29,159,109]),[se.P]:new Uint8Array([2,170]),[se.CO]:new Uint8Array([79,179]),[se.ID]:new Uint8Array([153,103]),[se.EXPR]:new Uint8Array([13,44,64,27]),[se.TZ]:new Uint8Array([2,90,121]),[se.VH]:new Uint8Array([1,106,242]),[se.SASK]:new Uint8Array([11,237,20,92]),[se.ZET1]:new Uint8Array([18,71,40,223]),[se.TXR1]:new Uint8Array([1,128,120,31]),[se.TXI]:new Uint8Array([79,148,196]),[se.TXM]:new Uint8Array([79,149,30]),[se.TXC]:new Uint8Array([79,148,17]),[se.TXMR]:new Uint8Array([18,7,206,87]),[se.TXRL]:new Uint8Array([79,146,82]),[se.TXW]:new Uint8Array([79,150,72]),[se.SR1]:new Uint8Array([6,124,117]),[se.SRC1]:new Uint8Array([17,165,134,138])},dv={[se.TZ1]:20,[se.TZ2]:20,[se.TZ3]:20,[se.TZ4]:20,[se.KT]:20,[se.KT1]:20,[se.EDPK]:32,[se.SPPK]:33,[se.P2PK]:33,[se.BLPK]:48,[se.EDSIG]:64,[se.SPSIG]:64,[se.P2SIG]:64,[se.SIG]:64,[se.NET]:4,[se.B]:32,[se.P]:32,[se.O]:32,[se.VH]:32,[se.SASK]:169,[se.ZET1]:43,[se.TXR1]:20,[se.TXI]:32,[se.TXM]:32,[se.TXC]:32,[se.TXMR]:32,[se.TXRL]:32,[se.TXW]:32,[se.SR1]:20,[se.SRC1]:32};class hv extends Error{constructor(e,r){super(),this.publicKey=e,this.name="InvalidPublicKeyError";const n=`The public key '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class To extends Error{constructor(e){super(`The contract address '${e}' is invalid`),this.contractAddress=e,this.name="InvalidContractAddressError"}}class ft extends Error{constructor(e,r){super(),this.address=e,this.name="InvalidAddressError";const n=`The address '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class D5 extends Error{constructor(e){super(`The chain id '${e}' is invalid`),this.chainId=e,this.name="InvalidChainIdError"}}class xh extends Error{constructor(e){super(`The public key hash '${e}' is invalid`),this.keyHash=e,this.name="InvalidKeyHashError"}}class pv extends Error{constructor(e){super(`The operation hash '${e}' is invalid`),this.operationHash=e,this.name="InvalidOperationHashError"}}class ji extends Error{constructor(e){super(`The operation kind '${e}' is unsupported`),this.operationKind=e,this.name="InvalidOperationKindError"}}class Sh extends Error{constructor(e){super(e),this.message=e,this.name="DeprecationError"}}class U5 extends Error{constructor(e,r){super(`Unable to convert ${e} to a ${r}`),this.value=e,this.desiredType=r,this.name="ValueConversionError"}}var we;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"})(we||(we={}));function K5(t){return typeof t!="string"?!1:t in vr}function Ts(t,e){const r=new RegExp(`^(${e.join("|")})`).exec(t);if(!r||r.length===0)return we.NO_PREFIX_MATCHED;const n=r[0];if(!K5(n))return we.NO_PREFIX_MATCHED;if(t.includes("%")&&(t=t.split("%")[0]),!/^(KT1\w{33})$/.test(t)&&n==="KT1")return we.INVALID_CHECKSUM;let s=zr.decodeUnsafe(t);return s?(s=s.slice(vr[n].length),s.length!==dv[n]?we.INVALID_LENGTH:we.VALID):we.INVALID_CHECKSUM}const gv=[se.TZ1,se.TZ2,se.TZ3,se.TZ4],bv=[se.KT1,se.TXR1],H5=[se.EDSIG,se.P2SIG,se.SPSIG,se.SIG],F5=[se.EDPK,se.SPPK,se.P2PK,se.BLPK],j5=[se.O];se.P;const G5=[se.B];function ct(t){return Ts(t,[...gv,...bv])}function vv(t){return Ts(t,[se.NET])}function Oo(t){return Ts(t,bv)}function Rh(t){return Ts(t,gv)}function V5(t){return Ts(t,H5)}function q5(t){return Ts(t,F5)}function mv(t){return Ts(t,j5)}function $5(t){return Ts(t,G5)}const z5=6,W5=3;function Lp(t){switch(t){case"tz":return z5;case"mtz":return W5;case"mutez":default:return 0}}function Ih(t="mutez",e="mutez",r){const n=new ye(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,Lp(t))).dividedBy(Math.pow(10,Lp(e)))}function X5(t){const e=r_.blake2b(Z5(t),void 0,32);return ds(e,vr.expr)}function ds(t,e){const r=typeof t=="string"?Uint8Array.from(ge.Buffer.from(t,"hex")):t,n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),zr.encode(ge.Buffer.from(n.buffer))}const yv=(t,e)=>zr.decode(t).slice(e.length);function J5(t){const e=zr.decode(t),r={[vr.tz1.toString()]:"0000",[vr.tz2.toString()]:"0001",[vr.tz3.toString()]:"0002"},n={[vr.txr1.toString()]:"02"},i=r[new Uint8Array(e.slice(0,3)).toString()],s=n[new Uint8Array(e.slice(0,4)).toString()];if(i){const o=Ma(e.slice(3));return i+o}else if(s){const o=Ma(e.slice(4));return s+o+"00"}else return"01"+Ma(e.slice(3,42))+"00"}function Y5(t){const e=zr.decode(t);return Ma(e.slice(3,42))}function Bd(t){if(t.substring(0,2)==="00"){const e={"0000":vr.tz1,"0001":vr.tz2,"0002":vr.tz3};return ds(t.substring(4),e[t.substring(0,4)])}else if(t.substring(0,2)==="02")return ds(t.substring(2,t.length-2),vr.txr1);return ds(t.substring(2,42),vr.KT)}function Cp(t){return ds(t,vr.tz4)}function Q5(t){if(t[0]==="0"){const e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return ds(t.substring(2),e[t.substring(0,2)])}}function Bp(t){if(t[0]==="0"){const e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return ds(t.substring(2),e[t.substring(0,2)])}}const Z5=t=>{const e=t.match(/[\da-f]{2}/gi);if(e)return new Uint8Array(e.map(r=>parseInt(r,16)));throw new U5(t,"Uint8Array")},Ma=t=>{const e=new Uint8Array(t),r=[];return e.forEach(n=>{const s=`00${n.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function kp(t){return t.startsWith("0x")?t.slice(2):t}function Tc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Ne(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}const e4="main",Me={block:"head"};var Dp;(function(t){t.GET_BAKING_RIGHTS="getBakingRights",t.GET_BALLOTS="getBallots",t.GET_BALLOT_LIST="getBallotList",t.GET_BIG_MAP_KEY="getBigMapKey",t.GET_BIG_MAP_EXPR="getBigMapExpr",t.GET_BLOCK_HASH="getBlockHash",t.GET_BLOCK="getBlock",t.GET_BLOCK_HEADER="getBlockHeader",t.GET_BLOCK_METADATA="getBlockMetadata",t.GET_BALANCE="getBalance",t.GET_CHAIN_ID="getChainId",t.GET_CONSTANTS="getConstants",t.GET_CONTRACT="getContract",t.GET_CURRENT_PERIOD="getCurrentPeriod",t.GET_CURRENT_PROPOSAL="getCurrentProposal",t.GET_CURRENT_QUORUM="getCurrentQuorum",t.GET_DELEGATE="getDelegate",t.GET_DELEGATES="getDelegates",t.GET_VOTING_INFO="getVotingInfo",t.GET_ENDORSING_RIGHTS="getEndorsingRights",t.GET_ENTRYPOINTS="getEntrypoints",t.GET_LIVE_BLOCKS="getLiveBlocks",t.GET_MANAGER_KEY="getManagerKey",t.GET_NORMALIZED_SCRIPT="getNormalizedScript",t.GET_PROPOSALS="getProposals",t.GET_PROTOCOLS="getProtocols",t.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",t.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",t.GET_SCRIPT="getScript",t.GET_STORAGE="getStorage",t.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",t.GET_TX_ROLLUP_INBOX="getTxRollupInbox",t.GET_TX_ROLLUP_STATE="getTxRollupState",t.GET_VOTES_LISTINGS="getVotesListings",t.PACK_DATA="packData",t.GET_STORAGE_USED_SPACE="getStorageUsedSpace",t.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",t.GET_TICKET_BALANCE="getTicketBalance",t.GET_ALL_TICKET_BALANCES="getAllTicketBalances"})(Dp||(Dp={}));function Oa(t,e){const r=Array.isArray(t);typeof e>"u"&&(e=Object.keys(t));const n=r?[]:{};return e.forEach(i=>{const s=t[i];let o;if(!(typeof s>"u")){if(Array.isArray(s)){o=Oa(s),n[i]=o;return}o=new ye(s),n[i]=o}}),n}var Up;(function(t){t.TOO_LARGE="too large"})(Up||(Up={}));var Kp;(function(t){t.BAKING_REWARDS="baking rewards",t.REWARDS="rewards",t.FEES="fees",t.DEPOSITS="deposits",t.LEGACY_REWARDS="legacy_rewards",t.LEGACY_FEES="legacy_fees",t.LEGACY_DEPOSITS="legacy_deposits",t.BLOCK_FEES="block fees",t.NONCE_REVELATION_REWARDS="nonce revelation rewards",t.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",t.ENDORSING_REWARDS="endorsing rewards",t.BAKING_BONUSES="baking bonuses",t.STORAGE_FEES="storage fees",t.PUNISHMENTS="punishments",t.LOST_ENDORSING_REWARDS="lost endorsing rewards",t.SUBSIDY="subsidy",t.BURNED="burned",t.COMMITMENT="commitment",t.BOOTSTRAP="bootstrap",t.INVOICE="invoice",t.MINTED="minted",t.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",t.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",t.BONDS="bonds"})(Kp||(Kp={}));var ce;(function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.PREENDORSEMENT="preendorsement",t.SET_DEPOSITS_LIMIT="set_deposits_limit",t.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",t.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot",t.FAILING_NOOP="failing_noop",t.REGISTER_GLOBAL_CONSTANT="register_global_constant",t.TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.TX_ROLLUP_COMMIT="tx_rollup_commit",t.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",t.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",t.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",t.TX_ROLLUP_REJECTION="tx_rollup_rejection",t.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",t.TRANSFER_TICKET="transfer_ticket",t.INCREASE_PAID_STORAGE="increase_paid_storage",t.UPDATE_CONSENSUS_KEY="update_consensus_key",t.DRAIN_DELEGATE="drain_delegate",t.VDF_REVELATION="vdf_revelation",t.EVENT="event",t.TICKET_UPDATES="ticket_updates",t.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(ce||(ce={}));class ef{constructor(e,r=e4,n=new aE){this.url=e,this.chain=r,this.httpBackend=n}createURL(e){return`${this.url.replace(/\/+$/g,"")}${e}`}validateAddress(e){if(ct(e)!==we.VALID)throw new ft(e)}validateContract(e){if(Oo(e)!==we.VALID)throw new ft(e)}getBlockHash({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/balance`),method:"GET"});return new ye(n)})}getStorage(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage`),method:"GET"})})}getScript(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/script`),method:"GET"})})}getNormalizedScript(e,r={unparsing_mode:"Readable"},{block:n}=Me){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/script/normalized`),method:"POST"},r)})}getContract(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new ye(n.balance)})})}getManagerKey(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/manager_key`),method:"GET"})})}getDelegate(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/delegate`),method:"GET"})}catch(i){if(i instanceof Jo&&i.status===ja.NOT_FOUND)n=null;else throw i}return n})}getBigMapKey(e,r,{block:n}=Me){return Ne(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/big_map_get`),method:"POST"},r)})}getBigMapExpr(e,r,{block:n}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/big_maps/${e}/${r}`),method:"GET"})})}getDelegates(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}`),method:"GET"}),i=Oa(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},n),i),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(s=>{var{deposit:o,deposits:a,fees:c,rewards:l}=s,f=Tc(s,["deposit","deposits","fees","rewards"]);const d=Oa({deposit:o,deposits:a,fees:c,rewards:l},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:d.deposit,deposits:d.deposits,fees:d.fees,rewards:d.rewards})}):void 0})})}getVotingInfo(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}/voting_info`),method:"GET"})})}getConstants({block:e}=Me){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),n=Oa(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},r),n)})}getBlock({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"})})}getBlockHeader({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"})})}getBakingRights(e={},{block:r}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:e})})}getEndorsingRights(e={},{block:r}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:e})})}getBallotList({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots({block:e}=Me){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return Oa(r,["yay","nay","pass"])})}getCurrentProposal({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:e}=Me){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return r.map(n=>(n.voting_power&&(n.voting_power=new ye(n.voting_power)),n)),r})}getProposals({block:e}=Me){return Ne(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return r.map(n=>n[1]=new ye(n[1])),r})}forgeOperations(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},e)})}injectOperation(e){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},e)})}getEntrypoints(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/entrypoints`),method:"GET"})})}runOperation(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},e)})}runCode(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},e)})}runScriptView(e,{block:r}=Me){var{unparsing_mode:n="Readable"}=e,i=Tc(e,["unparsing_mode"]);return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}runView(e,{block:r}=Me){var{unparsing_mode:n="Readable"}=e,i=Tc(e,["unparsing_mode"]);return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}getChainId(){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},e),{gas:i}=n,s=Tc(n,["gas"]);let o=i;const a=new ye(i||"");return a.isNaN()||(o=a),Object.assign({gas:o},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:e}=Me){return Ne(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${e}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:e}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getTxRollupState(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${e}/state`),method:"GET"})})}getTxRollupInbox(e,r,{block:n}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/tx_rollup/${e}/inbox/${r}`),method:"GET"})})}getStorageUsedSpace(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/paid_space`),method:"GET"})})}getTicketBalance(e,r,{block:n}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/ticket_balance`),method:"POST"},r)})}getAllTicketBalances(e,{block:r}=Me){return Ne(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/all_ticket_balances`),method:"GET"})})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kd=function(t,e){return kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},kd(t,e)};function et(t,e){kd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function yf(t){return typeof t=="function"}var Hp=!1,$n={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}Hp=t},get useDeprecatedSynchronousErrorHandling(){return Hp}};function wo(t){setTimeout(function(){throw t},0)}var Ef={closed:!0,next:function(t){},error:function(t){if($n.useDeprecatedSynchronousErrorHandling)throw t;wo(t)},complete:function(){}},Th=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function Ev(t){return t!==null&&typeof t=="object"}var t4=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),tf=t4,Wr=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var c=n[a];c.remove(this)}if(yf(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(d){e=d instanceof tf?Fp(d.errors):[d]}}if(Th(o))for(var a=-1,l=o.length;++a<l;){var f=o[a];if(Ev(f))try{f.unsubscribe()}catch(O){e=e||[],O instanceof tf?e=e.concat(Fp(O.errors)):e.push(O)}}if(e)throw new tf(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function Fp(t){return t.reduce(function(e,r){return e.concat(r instanceof tf?r.errors:r)},[])}var _f=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Lt=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Ef;break;case 1:if(!r){s.destination=Ef;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new jp(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new jp(s,r,n,i);break}return s}return e.prototype[_f]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(Wr),jp=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,c=o;return yf(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Ef&&(c=Object.create(n),yf(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!$n.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=$n.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):wo(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;wo(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!$n.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),$n.useDeprecatedSynchronousErrorHandling)throw i;wo(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!$n.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return $n.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(wo(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(Lt);function r4(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof Lt?t=n:t=null}return!0}function n4(t,e,r){if(t){if(t instanceof Lt)return t;if(t[_f])return t[_f]()}return!t&&!e&&!r?new Lt(Ef):new Lt(t,e,r)}var uc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Oh(t){return t}function i4(t){return t.length===0?Oh:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var St=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=n4(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||$n.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),$n.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){$n.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),r4(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Gp(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[uc]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:i4(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Gp(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function Gp(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var s4=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),Us=s4,_v=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(Wr),wv=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(Lt),Uo=function(t){et(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[_f]=function(){return new wv(this)},e.prototype.lift=function(r){var n=new Vp(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new Us;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new Us;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Us;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new Us;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new Us;return this.hasError?(r.error(this.thrownError),Wr.EMPTY):this.isStopped?(r.complete(),Wr.EMPTY):(this.observers.push(r),new _v(this,r))},e.prototype.asObservable=function(){var r=new St;return r.source=this,r},e.create=function(r,n){return new Vp(r,n)},e}(St),Vp=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):Wr.EMPTY},e}(Uo);function qa(){return function(e){return e.lift(new o4(e))}}var o4=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new a4(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),a4=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(Lt),c4=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new Wr,r.add(this.source.subscribe(new u4(this.getSubject(),this))),r.closed&&(this._connection=null,r=Wr.EMPTY)),r},e.prototype.refCount=function(){return qa()(this)},e}(St),f4=function(){var t=c4.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),u4=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(wv),yu=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Us;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(Uo),l4=function(t){et(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(Wr),Av=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(l4),d4=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(Av),qp=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),xv=function(t){et(e,t);function e(r,n){n===void 0&&(n=qp.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(qp),h4=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(xv),p4=new h4(d4),g4=p4,Sv=new St(function(t){return t.complete()});function Ph(t){return t?b4(t):Sv}function b4(t){return new St(function(e){return t.schedule(function(){return e.complete()})})}function $a(t){return t&&typeof t.schedule=="function"}var Rv=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function Nh(t,e){return new St(function(r){var n=new Wr,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function Iv(t,e){return e?Nh(t,e):new St(Rv(t))}function ia(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return $a(r)?(t.pop(),Nh(t,r)):Iv(t)}function Mh(t,e){return e?new St(function(r){return e.schedule(v4,0,{error:t,subscriber:r})}):new St(function(r){return r.error(t)})}function v4(t){var e=t.error,r=t.subscriber;r.error(e)}var Dl=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return ia(this.value);case"E":return Mh(this.error);case"C":return Ph()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),m4=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new y4(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(Dl.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(Dl.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(Dl.createComplete()),this.unsubscribe()},e}(Lt),y4=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),za=function(t){et(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new E4(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new Us;if(this.isStopped||this.hasError?a=Wr.EMPTY:(this.observers.push(r),a=new _v(this,r)),s&&r.add(r=new m4(r,s)),n)for(var c=0;c<o&&!r.closed;c++)r.next(i[c]);else for(var c=0;c<o&&!r.closed;c++)r.next(i[c].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||g4).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(Uo),E4=function(){function t(e,r){this.time=e,this.value=r}return t}(),_4=new xv(Av),Tv=_4;function mi(){}var w4=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),A4=w4,x4=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Ov=x4;function qs(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new S4(t,e))}}var S4=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new R4(e,this.project,this.thisArg))},t}(),R4=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Lt),I4=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(Lt),T4=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Lt),O4=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,wo),e}};function P4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Eu=P4(),N4=function(t){return function(e){var r=t[Eu]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},M4=function(t){return function(e){var r=t[uc]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Pv=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Nv(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var Lh=function(t){if(t&&typeof t[uc]=="function")return M4(t);if(Pv(t))return Rv(t);if(Nv(t))return O4(t);if(t&&typeof t[Eu]=="function")return N4(t);var e=Ev(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function L4(t,e,r,n,i){if(i===void 0&&(i=new T4(t,r,n)),!i.closed)return e instanceof St?e.subscribe(i):Lh(e)(i)}var $p={};function zp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return $a(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&Th(t[0])&&(t=t[0]),Iv(t,n).lift(new C4(r))}var C4=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new B4(e,this.resultSelector))},t}(),B4=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push($p),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(L4(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===$p?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(I4);function k4(t,e){return new St(function(r){var n=new Wr;return n.add(e.schedule(function(){var i=t[uc]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function D4(t,e){return new St(function(r){var n=new Wr;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function U4(t,e){if(!t)throw new Error("Iterable cannot be null");return new St(function(r){var n=new Wr,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[Eu](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){r.error(c);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function K4(t){return t&&typeof t[uc]=="function"}function H4(t){return t&&typeof t[Eu]=="function"}function F4(t,e){if(t!=null){if(K4(t))return k4(t,e);if(Nv(t))return D4(t,e);if(Pv(t))return Nh(t,e);if(H4(t)||typeof t=="string")return U4(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function so(t,e){return e?F4(t,e):t instanceof St?t:new St(Lh(t))}var lc=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Lt),dc=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Lt);function hc(t,e){if(!e.closed){if(t instanceof St)return t.subscribe(e);var r;try{r=Lh(t)(e)}catch(n){e.error(n)}return r}}function _u(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(_u(function(i,s){return so(t(i,s)).pipe(qs(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new j4(t,r))})}var j4=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new G4(e,this.project,this.concurrent))},t}(),G4=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new lc(this),i=this.destination;i.add(n);var s=hc(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(dc);function V4(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),_u(Oh,t)}function q4(){return V4(1)}function wf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return q4()(ia.apply(void 0,t))}function Mv(t){return new St(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?so(r):Ph();return n.subscribe(e)})}function Wp(t){return!Th(t)&&t-parseFloat(t)+1>=0}var $4=new St(mi);function Af(t,e){return function(n){return n.lift(new z4(t,e))}}var z4=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new W4(e,this.predicate,this.thisArg))},t}(),W4=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(Lt);function Ch(t,e,r){return t===void 0&&(t=0),new St(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(X4,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function X4(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function Xp(t,e,r){t===void 0&&(t=0);var n=-1;return Wp(e)?n=Number(e)<1&&1||Number(e):$a(e)&&(r=e),$a(r)||(r=Tv),new St(function(i){var s=Wp(t)?t:+t-r.now();return r.schedule(J4,s,{index:0,period:n,subscriber:i})})}function J4(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function Bh(t){return function(r){var n=new Y4(t),i=r.lift(n);return n.caught=i}}var Y4=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new Q4(e,this.selector,this.caught))},t}(),Q4=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new lc(this);this.add(i);var s=hc(n,i);s!==i&&this.add(s)}},e}(dc);function pc(t,e){return _u(t,e,1)}function Z4(t){return t===void 0&&(t=null),function(e){return e.lift(new eA(t))}}var eA=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new tA(e,this.defaultValue))},t}(),tA=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Lt);function rA(t){return t instanceof Date&&!isNaN(+t)}function Lv(t,e){return function(r){return r.lift(new nA(t,e))}}var nA=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new iA(e,this.compare,this.keySelector))},t}(),iA=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(Lt);function sA(t,e){return Lv(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function oA(t){return t===void 0&&(t=fA),function(e){return e.lift(new aA(t))}}var aA=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new cA(e,this.errorFactory))},t}(),cA=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(Lt);function fA(){return new Ov}function uA(t){return function(e){return t===0?Ph():e.lift(new lA(t))}}var lA=function(){function t(e){if(this.total=e,this.total<0)throw new A4}return t.prototype.call=function(e,r){return r.subscribe(new dA(e,this.total))},t}(),dA=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(Lt);function Cv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return wf(r,ia.apply(void 0,t))}}function Pi(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Af(function(i,s){return t(i,s,n)}):Oh,uA(1),r?Z4(e):oA(function(){return new Ov}))}}function Dd(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new hA(i,e));var s=Object.create(n,f4);return s.source=n,s.subjectFactory=i,s}}var hA=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function Jp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return qs(pA(t,r))(n)}}function pA(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i!=null?i[t[s]]:void 0;if(o!==void 0)i=o;else return}return i};return r}function gA(t){return t?Dd(function(){return new Uo},t):Dd(new Uo)}function Ud(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new za(t,e,n);return function(o){return Dd(function(){return s},i)(o)}}function Bv(t){return t===void 0&&(t=-1),function(e){return e.lift(new bA(t,e))}}var bA=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new vA(e,this.count,this.source))},t}(),vA=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(Lt);function Yp(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(mA(n))}}function mA(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,c=0,l,f=!1,d=!1;return function(L){c++;var D;!a||f?(f=!1,a=new za(r,i,o),D=a.subscribe(this),l=L.subscribe({next:function(z){a.next(z)},error:function(z){f=!0,a.error(z)},complete:function(){d=!0,l=void 0,a.complete()}}),d&&(l=void 0)):D=a.subscribe(this),this.add(function(){c--,D.unsubscribe(),D=void 0,l&&!d&&s&&c===0&&(l.unsubscribe(),l=void 0,a=void 0)})}}function yA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return $a(r)?(t.pop(),function(n){return wf(t,n,r)}):function(n){return wf(t,n)}}function Qn(t,e){return typeof e=="function"?function(r){return r.pipe(Qn(function(n,i){return so(t(n,i)).pipe(qs(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new EA(t))}}var EA=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new _A(e,this.project))},t}(),_A=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new lc(this),s=this.destination;s.add(i),this.innerSubscription=hc(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(dc);function wA(t){return function(e){return e.lift(new AA(t))}}var AA=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new xA(e),i=hc(this.notifier,new lc(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),xA=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(dc);function SA(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new RA(t,e))}}var RA=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new IA(e,this.predicate,this.inclusive))},t}(),IA=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(Lt);function xf(t,e,r){return function(i){return i.lift(new TA(t,e,r))}}var TA=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new OA(e,this.nextOrObserver,this.error,this.complete))},t}(),OA=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=mi,o._tapError=mi,o._tapComplete=mi,o._tapError=i||mi,o._tapComplete=s||mi,yf(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||mi,o._tapError=n.error||mi,o._tapComplete=n.complete||mi),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(Lt);function kv(t,e,r){return r===void 0&&(r=Tv),function(n){var i=rA(t),s=i?+t-r.now():Math.abs(t);return n.lift(new PA(s,i,e,r))}}var PA=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new NA(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),NA=function(t){et(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(hc(n,new lc(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(dc),MA=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(o){return function(a,c){var l={key:a,value:o[a]},f={key:c,value:o[c]};return s(l,f)}}}(e.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,c;if(Array.isArray(o)){for(c="[",a=0;a<o.length;a++)a&&(c+=","),c+=s(o[a])||"null";return c+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,f=Object.keys(o).sort(n&&n(o));for(c="",a=0;a<f.length;a++){var d=f[a],O=s(o[d]);O&&(c&&(c+=","),c+=JSON.stringify(d)+":"+O)}return i.splice(l,1),"{"+c+"}"}}(t)},Dv;class LA extends Error{constructor(e){super(`The map type '${e}' is invalid`),this.mapType=e,this.name="InvalidMapTypeError"}}const Uv=Symbol.for("taquito-michelson-map-type-symbol"),CA=t=>"args"in t&&Array.isArray(t.args)&&t.args.length===2;class Qp extends Error{constructor(e,r,n){super(`${n} not compliant with underlying michelson type`),this.value=e,this.type=r,this.name="MapTypecheckError"}}class Gr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[Dv]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&e[Uv]===!0}setType(e){if(!CA(e))throw new LA(e.toString());this.keySchema=new Vr(e.args[0]),this.valueSchema=new Vr(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,r){const n=new Gr(r);return Object.keys(e).forEach(i=>{n.set(i,e[i])}),n}typecheckKey(e){return this.keySchema?this.keySchema.Typecheck(e):!0}typecheckValue(e){return this.valueSchema?this.valueSchema.Typecheck(e):!0}assertTypecheckValue(e){if(!this.typecheckValue(e))throw new Qp(e,this.valueSchema,"value")}assertTypecheckKey(e){if(!this.typecheckKey(e))throw new Qp(e,this.keySchema,"key")}serializeDeterministically(e){return MA(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.valueMap.get(r)}set(e,r){this.assertTypecheckKey(e),this.assertTypecheckValue(r);const n=this.serializeDeterministically(e);this.keyMap.set(n,e),this.valueMap.set(n,r)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[r,n]of this.entries())e(n,r,this)}}Dv=Uv;class dt extends Error{constructor(e,r,n){super(),this.value=e,this.token=r,this.name="ValidationError";const i=this.token.annot(),s=i?`[${i}] `:"";this.message=`${s}${n}`}}class Ut{constructor(e,r,n){this.val=e,this.idx=r,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=n=>{if(typeof n=="object"){if(Array.isArray(n))return n.map(o=>e(o));const i=n;return i.args?{prim:i.prim,args:i.args.map(s=>e(s))}:{prim:i.prim}}return n};return(n=>n.args?{prim:n.prim,args:n.args.map(i=>e(i))}:{prim:n.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Tt extends Ut{compare(e,r){return e===r?0:e<r?-1:1}}class Zp extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BigMapValidationError"}}class jr extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:jr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(e){return Gr.isMichelsonMap(e)?null:new Zp(e,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(e){return e instanceof Gr?e:typeof e=="object"?Object.keys(e).length===0?new Gr:Gr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[jr.prim]?r[jr.prim](n,this.val):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}Execute(e,r){if(r&&r[jr.prim])return r[jr.prim](e,this.val);if(Array.isArray(e)){const n=new Gr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1]))}),n}else{if("int"in e)return e.int;throw new Zp(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,r){return jr.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}jr.prim="big_map";class BA extends Error{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class nt extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e[e.length-1],n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof nt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())===String(r)&&!(n instanceof nt))return e.pop(),{prim:"Left",args:[n.Encode(e)]};if(String(s.annot())===String(r)&&!(s instanceof nt))return e.pop(),{prim:"Right",args:[s.Encode(e)]};if(n instanceof nt){const o=n.Encode(e);if(o)return{prim:"Left",args:[o]}}if(s instanceof nt){const o=s.Encode(e);if(o)return{prim:"Right",args:[o]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let r=1;e instanceof nt&&(r=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+r),i=[];if(e instanceof nt)i.push(...e.ExtractSignature());else for(const s of e.ExtractSignature())i.push([e.annot(),...s]);if(n instanceof nt)i.push(...n.ExtractSignature());else for(const s of n.ExtractSignature())i.push([n.annot(),...s]);return i}EncodeObject(e,r){const n=Object.keys(e)[0],i=this.createToken(this.val.args[0],this.idx);let s=1;i instanceof nt&&(s=Object.keys(i.ExtractSchema()).length);const o=this.createToken(this.val.args[1],this.idx+s);if(String(i.annot())===String(n)&&!(i instanceof nt))return{prim:"Left",args:[i.EncodeObject(e[n],r)]};if(String(o.annot())===String(n)&&!(o instanceof nt))return{prim:"Right",args:[o.EncodeObject(e[n],r)]};if(i instanceof nt){const a=i.EncodeObject(e,r);if(a)return{prim:"Left",args:[a]}}if(o instanceof nt){const a=o.EncodeObject(e,r);if(a)return{prim:"Right",args:[a]}}return null}Execute(e,r){const n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof nt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(e.prim==="Right")return s instanceof nt?s.Execute(e.args[0],r):{[s.annot()]:s.Execute(e.args[0],r)};if(e.prim==="Left")return n instanceof nt?n.Execute(e.args[0],r):{[n.annot()]:n.Execute(e.args[0],r)};throw new BA(`Was expecting Left or Right prim but got: ${e.prim}`)}traversal(e,r,n){const i=this.createToken(this.val.args[0],this.idx);let s=1,o;i instanceof nt&&!i.hasAnnotations()?(o=e(i),s=Object.keys(i.ExtractSchema()).length):o={[i.annot()]:e(i)};const a=this.createToken(this.val.args[1],this.idx+s);let c;return a instanceof nt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},n(o,c)}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}generateSchema(){return{__michelsonType:nt.prim,schema:this.traversal(e=>e instanceof nt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof nt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}}findToken(e){const r=this.createToken(this.val.args[0],this.idx);let n=1;r instanceof nt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+n);if(String(r.annot())===String(e)&&!(r instanceof nt)&&r instanceof Tt)return r;if(String(i.annot())===String(e)&&!(i instanceof nt)&&i instanceof Tt)return i;if(r instanceof nt){const s=r.findToken(e);if(s)return s}if(i instanceof nt){const s=i.findToken(e);if(s)return s}return null}compare(e,r){const n=Object.keys(e)[0],i=Object.keys(r)[0];if(n===i){const s=this.findToken(n);if(s instanceof Tt)return s.compare(e[n],r[n])}else{const s=JSON.stringify(this.EncodeObject(e)),o=JSON.stringify(this.EncodeObject(r));return s<o?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return nt.prim===e&&r.push(this),this.traversal(n=>n.findAndReturnTokens(e,r),n=>n.findAndReturnTokens(e,r),(n,i)=>Object.assign(Object.assign({},n),i)),r}}nt.prim="or";class kA extends Error{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class DA extends Error{constructor(e,r){super(`Tokens ${e} and ${r} are not comparable`),this.val1=e,this.val2=r,this.name="TokenComparisonError"}}function Kd(t,e=Dt.prim){if(Array.isArray(t))return Kd({prim:e,args:t},e);if(t.args===void 0)throw new kA("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return t.args.length>2?[t.args[0],{prim:e,args:t.args.slice(1)}]:[t.args[0],t.args[1]]}class Dt extends Tt{constructor(e,r,n){super(Array.isArray(e)?{prim:Dt.prim,args:e}:e.prim?e:{prim:Dt.prim,args:e},r,n)}args(){return Kd(this.val)}tokens(){let e=0;return this.args().map(r=>{const n=this.createToken(r,this.idx+e);return n instanceof Dt?e+=Object.keys(n.ExtractSchema()).length:e++,n})}Encode(e){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(e))}}ExtractSignature(){const e=this.args(),r=this.createToken(e[0],this.idx);let n=1;r instanceof nt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(e[1],this.idx+n),s=[];for(const o of r.ExtractSignature())for(const a of i.ExtractSignature())s.push([...o,...a]);return s}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,r){const[n,i]=this.tokens();let s;n instanceof Dt&&!n.hasAnnotations()?s=e:s=e[n.annot()];let o;return i instanceof Dt&&!i.hasAnnotations()?o=e:o=e[i.annot()],{prim:"Pair",args:[n.EncodeObject(s,r),i.EncodeObject(o,r)]}}traversal(e,r){const n=this.args(),i=this.createToken(n[0],this.idx);let s=1,o;i instanceof Dt&&(s=Object.keys(i.ExtractSchema()).length),i instanceof Dt&&!i.hasAnnotations()?o=e(i):o={[i.annot()]:e(i)};const a=this.createToken(n[1],this.idx+s);let c;return a instanceof Dt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},Object.assign(Object.assign({},o),c)}Execute(e,r){const n=Kd(e,"Pair");return this.traversal(i=>i.Execute(n[0],r),i=>i.Execute(n[1],r))}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema())}generateSchema(){return{__michelsonType:Dt.prim,schema:this.traversal(e=>e instanceof Dt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Dt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,r){const[n,i]=this.tokens(),s=(o,a)=>o instanceof Dt&&!o.hasAnnotations()?a:a[o.annot()];if(n instanceof Tt&&i instanceof Tt){const o=n.compare(s(n,e),s(n,r));return o===0?i.compare(s(i,e),s(i,r)):o}throw new DA(e,r)}findAndReturnTokens(e,r){return Dt.prim===e&&r.push(this),this.tokens().map(n=>n.findAndReturnTokens(e,r)),r}}Dt.prim="pair";class e1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NatValidationError"}}class Ln extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new ye(e[Object.keys(e)[0]])}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new ye(r).toFixed()}}isValid(e){const r=new ye(e);return r.isNaN()?new e1(e,this,`Value is not a number: ${e}`):r.isNegative()?new e1(e,this,`Value cannot be negative: ${e}`):null}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Ln.prim]?r[Ln.prim](e):{int:new ye(e).toFixed()}}ExtractSchema(){return Ln.prim}generateSchema(){return{__michelsonType:Ln.prim,schema:Ln.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Ln.prim}}}ToKey({int:e}){return new ye(e)}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Ln.prim===e&&r.push(this),r}}Ln.prim="nat";class Cn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Cn.prim}generateSchema(){return{__michelsonType:Cn.prim,schema:Cn.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[Cn.prim]?r[Cn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Cn.prim}}}findAndReturnTokens(e,r){return Cn.prim===e&&r.push(this),r}}Cn.prim="string";class Ul extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="AddressValidationError"}}class Ei extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:J5(e)},type:{prim:"bytes"}}}isValid(e){return ct(e)!==we.VALID?new Ul(e,this,`Address is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Ei.prim]?r[Ei.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Ul(e,this,`cannot be missing both string and bytes: ${e}`);return Bd(e.bytes)}ExtractSchema(){return Ei.prim}generateSchema(){return{__michelsonType:Ei.prim,schema:Ei.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new Ul({bytes:e,string:r},this,`cannot be missing both string and bytes ${{string:r,bytes:e}}`);return Bd(e)}compare(e,r){const n=o=>o.startsWith("tz"),i=n(e),s=n(r);return i&&!s?-1:s&&!i?1:super.compare(e,r)}findAndReturnTokens(e,r){return Ei.prim===e&&r.push(this),r}}Ei.prim="address";class UA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MapValidationError"}}class ls extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Gr.isMichelsonMap(e)?null:new UA(e,this,"Value must be a MichelsonMap")}Execute(e,r){const n=new Gr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1],r))}),n}objLitToMichelsonMap(e){return e instanceof Gr?e:typeof e=="object"?Object.keys(e).length===0?new Gr:Gr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[ls.prim]?r[ls.prim](n):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ls.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,r){return ls.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}ls.prim="map";class Bn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,r){return r&&r[Bn.prim]?r[Bn.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return Bn.prim}generateSchema(){return{__michelsonType:Bn.prim,schema:Bn.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:Bn.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,r){return e&&r||!e&&!r?0:e?1:-1}findAndReturnTokens(e,r){return Bn.prim===e&&r.push(this),r}}Bn.prim="bool";class Oc extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="TxRollupL2AddressValidationError"}}class _i extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:Y5(e)},type:{prim:"bytes"}}}isValid(e){if(ct(e)!==we.VALID)throw new Oc(e,this,`tx_rollup_l2_address is not valid: ${e}`);return null}Encode(e){const r=e.pop();if(!r)throw new Oc(r,this,`arg missing to encode: this -> "${r}"`);return this.isValid(r),{string:r}}EncodeObject(e,r){return this.isValid(e),r&&r[_i.prim]?r[_i.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Oc(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return Cp(e.bytes)}ExtractSchema(){return _i.prim}generateSchema(){return{__michelsonType:_i.prim,schema:_i.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new Oc(e,this,`value cannot be missing string and byte value. must have one: bytes = ${e}`);return Cp(e)}findAndReturnTokens(e,r){return _i.prim===e&&r.push(this),r}}_i.prim="tx_rollup_l2_address";class t1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ContractValidationError"}}class Mr extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return ct(e)!==we.VALID?new t1(e,this,"Contract address is not valid"):null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new t1(e,this,"must contain bytes or string");return Bd(e.bytes)}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Mr.prim]?r[Mr.prim](e):{string:e}}ExtractSchema(){return Mr.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:Mr.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,r){return Mr.prim===e&&r.push(this),r}}Mr.prim="contract";class KA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ListValidationError"}}class rs extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(e){return Array.isArray(e)?null:new KA(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;const i=this.createToken(this.val.args[0],0);return r.reduce((s,o)=>[...s,i.EncodeObject(o)],[])}Execute(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return e.reduce((s,o)=>[...s,n.Execute(o,r)],[])}EncodeObject(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return r&&r[rs.prim]?r[rs.prim](e):e.reduce((s,o)=>[...s,n.EncodeObject(o)],[])}ExtractSchema(){return{[rs.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:rs.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,r){return rs.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),r}}rs.prim="list";class HA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MutezValidationError"}}class kn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new ye(e[Object.keys(e)[0]])}ExtractSchema(){return kn.prim}generateSchema(){return{__michelsonType:kn.prim,schema:kn.prim}}isValid(e){return new ye(e).isNaN()?new HA(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:String(r).toString()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[kn.prim]?r[kn.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:kn.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return kn.prim===e&&r.push(this),r}}kn.prim="mutez";class FA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BytesValidationError"}}class Dn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Dn.prim}}}isValid(e){return typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new FA(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=kp(this.convertUint8ArrayToHexString(r));const n=this.isValid(r);if(n)throw n;return{bytes:String(r).toString()}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=kp(e));const n=this.isValid(e);if(n)throw n;return r&&r[Dn.prim]?r[Dn.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return Dn.prim}generateSchema(){return{__michelsonType:Dn.prim,schema:Dn.prim}}ToKey({bytes:e,string:r}){return r||e}findAndReturnTokens(e,r){return Dn.prim===e&&r.push(this),r}}Dn.prim="bytes";class Ko extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const r=e;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,r){const n=e;return n==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,r)]}}Execute(e,r){return e.prim==="None"?null:this.schema().Execute(e.args[0],r)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:Ko.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(e,r){if(e){if(!r)return 1}else return-1;return this.KeySchema.compare(e,r)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return Ko.prim===e&&r.push(this),this.subToken().findAndReturnTokens(e,r),r}}Ko.prim="option";class Un extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const r=e.pop();return typeof r=="number"?{int:String(r)}:{string:r}}EncodeObject(e,r){return r&&r[Un.prim]?r[Un.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}ExtractSchema(){return Un.prim}generateSchema(){return{__michelsonType:Un.prim,schema:Un.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Un.prim}}}findAndReturnTokens(e,r){return Un.prim===e&&r.push(this),r}}Un.prim="timestamp";class jA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="IntValidationError"}}class br extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new ye(e[Object.keys(e)[0]])}ExtractSchema(){return br.prim}generateSchema(){return{__michelsonType:br.prim,schema:br.prim}}isValid(e){return new ye(e).isNaN()?new jA(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new ye(r).toFixed()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[br.prim]?r[br.prim](e):{int:new ye(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:br.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return br.prim===e&&r.push(this),r}}br.prim="int";class Kn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,r){return r&&r[Kn.prim]?r[Kn.prim](e):{prim:"Unit"}}Execute(e){return f1}ExtractSchema(){return Kn.prim}generateSchema(){return{__michelsonType:Kn.prim,schema:Kn.prim}}compare(e,r){return 0}ToKey(e){return f1}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Kn.prim}}}findAndReturnTokens(e,r){return Kn.prim===e&&r.push(this),r}}Kn.prim="unit";const GA=4;class VA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyValidationError"}}class Hn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:Q5(e.bytes)}isValid(e){return q5(e)!==we.VALID?new VA(e,this,"Key is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Hn.prim]?r[Hn.prim](e):{string:e}}ExtractSchema(){return Hn.prim}generateSchema(){return{__michelsonType:Hn.prim,schema:Hn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Hn.prim}}}compare(e,r){const n=this.getPrefix(e),i=this.getPrefix(r);if(n===se.EDPK&&i!==se.EDPK)return-1;if(n===se.SPPK&&i!==se.SPPK)return i===se.EDPK?1:-1;if(n===se.P2PK){if(i!==se.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(e),o=this.getP256PublicKeyComparableBytes(r);return ge.Buffer.compare(s,o)}return super.compare(e,r)}getPrefix(e){return e.substring(0,GA)}getP256PublicKeyComparableBytes(e){return yv(e,vr[se.P2PK]).slice(1)}findAndReturnTokens(e,r){return Hn.prim===e&&r.push(this),r}}Hn.prim="key";class qA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyHashValidationError"}}class Fn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:Bp(e.bytes)}isValid(e){return Rh(e)!==we.VALID?new qA(e,this,`KeyHash is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Fn.prim]?r[Fn.prim](e):{string:e}}ExtractSchema(){return Fn.prim}generateSchema(){return{__michelsonType:Fn.prim,schema:Fn.prim}}ToKey({string:e,bytes:r}){return e||Bp(r)}ToBigMapKey(e){return{key:{string:e},type:{prim:Fn.prim}}}findAndReturnTokens(e,r){return Fn.prim===e&&r.push(this),r}}Fn.prim="key_hash";class $A extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SignatureValidationError"}}class jn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:e.bytes}isValid(e){return V5(e)!==we.VALID?new $A(e,this,"Signature is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[jn.prim]?r[jn.prim](e):{string:e}}ExtractSchema(){return jn.prim}generateSchema(){return{__michelsonType:jn.prim,schema:jn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:jn.prim}}}findAndReturnTokens(e,r){return jn.prim===e&&r.push(this),r}}jn.prim="signature";class ns extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,r){return r&&r[ns.prim]?r[ns.prim](e):e}ExtractSchema(){return{[ns.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ns.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,r){return ns.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,r),r}}ns.prim="lambda";class wi extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[wi.prim]?r[wi.prim](e):{string:e}}ExtractSchema(){return wi.prim}generateSchema(){return{__michelsonType:wi.prim,schema:wi.prim}}findAndReturnTokens(e,r){return wi.prim===e&&r.push(this),r}}wi.prim="operation";class zA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SetValidationError"}}class is extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Array.isArray(e)?null:new zA(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return r.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}Execute(e,r){return e.reduce((n,i)=>[...n,this.KeySchema.Execute(i,r)],[])}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[is.prim]?r[is.prim](e):e.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return is.prim}generateSchema(){return{__michelsonType:is.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,r){return is.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),r}}is.prim="set";class WA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChainIDValidationError"}}class Gn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return vv(e)!==we.VALID?new WA(e,this,"ChainID is not valid"):null}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Gn.prim}generateSchema(){return{__michelsonType:Gn.prim,schema:Gn.prim}}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Gn.prim]?r[Gn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Gn.prim}}}findAndReturnTokens(e,r){return Gn.prim===e&&r.push(this),r}}Gn.prim="chain_id";class r1 extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const XA={prim:"contract"},JA={prim:"int"};class zn extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new r1}EncodeObject(e,r){if(r&&r[zn.prim])return r[zn.prim](e,this.val);throw new r1}Execute(e,r){if(r&&r[zn.prim])return r[zn.prim](e,this.val);const n=this.createToken(XA,this.idx),i=this.valueToken,s=this.createToken(JA,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Mr.prim,value:this.valueToken.ExtractSchema(),amount:br.prim}}generateSchema(){return{__michelsonType:zn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Mr.prim,schema:Mr.prim},amount:{__michelsonType:br.prim,schema:br.prim}}}}findAndReturnTokens(e,r){return zn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}zn.prim="ticket";class n1 extends Error{constructor(){super("Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"),this.name="TicketDeprecatedEncodeError"}}const YA={prim:"contract"},QA={prim:"int"};class Wn extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new n1}EncodeObject(e,r){if(r&&r[Wn.prim])return r[Wn.prim](e,this.val);throw new n1}Execute(e,r){if(r&&r[Wn.prim])return r[Wn.prim](e,this.val);const n=this.createToken(YA,this.idx),i=this.valueToken,s=this.createToken(QA,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Mr.prim,value:this.valueToken.ExtractSchema(),amount:br.prim}}generateSchema(){return{__michelsonType:Wn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Mr.prim,schema:Mr.prim},amount:{__michelsonType:br.prim,schema:br.prim}}}}findAndReturnTokens(e,r){return Wn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}Wn.prim="ticket_deprecated";class Kl extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NeverTokenError"}}class Ai extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e.pop();throw new Kl(r,this,"Assigning a value to the type never is forbidden.")}EncodeObject(e,r){if(r&&r[Ai.prim])return r[Ai.prim](e);throw new Kl(e,this,"Assigning a value to the type never is forbidden.")}Execute(e){throw new Kl(e,this,"There is no literal value for the type never.")}ExtractSchema(){return Ai.prim}generateSchema(){return{__michelsonType:Ai.prim,schema:Ai.prim}}findAndReturnTokens(e,r){return Ai.prim===e&&r.push(this),r}}Ai.prim="never";class Hl extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingStateValidationError"}}class Vn extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,r){if(r&&r[Vn.prim])return r[Vn.prim](e,this.val);if("int"in e)return e.int;throw new Hl(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(this.isValid(r))return[];throw new Hl(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}EncodeObject(e,r){if(r&&r[Vn.prim])return r[Vn.prim](e);if(this.isValid(e))return[];throw new Hl(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}ExtractSchema(){return{[Vn.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:Vn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return Vn.prim===e&&r.push(this),r}}Vn.prim="sapling_state";class i1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionValidationError"}}class ss extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new i1(e,this,"There is no literal value for the sapling_transaction type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new i1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[ss.prim]?r[ss.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[ss.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:ss.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return ss.prim===e&&r.push(this),r}}ss.prim="sapling_transaction";class s1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionDeprecatedValidationError"}}class os extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new s1(e,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new s1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[os.prim]?r[os.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[os.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:os.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return os.prim===e&&r.push(this),r}}os.prim="sapling_transaction_deprecated";class ZA extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381frValidationError"}}class xi extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new ZA(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}}EncodeObject(e,r){if(r&&r[xi.prim])return r[xi.prim](e);if(typeof e=="number")return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return{bytes:e}}}Execute(e){return e.bytes}ExtractSchema(){return xi.prim}generateSchema(){return{__michelsonType:xi.prim,schema:xi.prim}}findAndReturnTokens(e,r){return xi.prim===e&&r.push(this),r}}xi.prim="bls12_381_fr";class e8 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g1ValidationError"}}class Si extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new e8(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Si.prim]?r[Si.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Si.prim}generateSchema(){return{__michelsonType:Si.prim,schema:Si.prim}}findAndReturnTokens(e,r){return Si.prim===e&&r.push(this),r}}Si.prim="bls12_381_g1";class t8 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g2ValidationError"}}class Ri extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new t8(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ri.prim]?r[Ri.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ri.prim}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}findAndReturnTokens(e,r){return Ri.prim===e&&r.push(this),r}}Ri.prim="bls12_381_g2";class r8 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestValidationError"}}class Ii extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new r8(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ii.prim]?r[Ii.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ii.prim}generateSchema(){return{__michelsonType:Ii.prim,schema:Ii.prim}}findAndReturnTokens(e,r){return Ii.prim===e&&r.push(this),r}}Ii.prim="chest";class n8 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestKeyValidationError"}}class Ti extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new n8(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?ge.Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ti.prim]?r[Ti.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ti.prim}generateSchema(){return{__michelsonType:Ti.prim,schema:Ti.prim}}findAndReturnTokens(e,r){return Ti.prim===e&&r.push(this),r}}Ti.prim="chest_key";class o1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantEncodingError"}}class i8 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantDecodingError"}}class qn extends Ut{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e,r){if(r&&r[qn.prim])return r[qn.prim](e,this.val);throw new i8(e,this,`Unable to decode a value represented by a global constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following global constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new o1(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,r){if(r&&r[qn.prim])return r[qn.prim](e);throw new o1(e,this,`Unable to encode a script containing global constants. Please provide an expanded script to the Michelson-Encoder. The following global constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return qn.prim}generateSchema(){return{__michelsonType:qn.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,r){return qn.prim===e&&r.push(this),r}}qn.prim="constant";const s8=[Dt,Ln,Cn,jr,Ei,_i,ls,Bn,nt,Mr,rs,kn,Dn,Ko,Un,br,Kn,Hn,Fn,jn,ns,wi,is,Gn,zn,Wn,Ai,Vn,ss,os,xi,Si,Ri,Ii,Ti,qn];class o8 extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="Invalid token error"}}function Js(t,e){if(Array.isArray(t))return new Dt(t,e,Js);const r=s8.find(n=>n.prim===t.prim);if(!r)throw new o8("Malformed data expected a value with a valid prim property",t);return new r(t,e,Js)}class a8 extends Error{constructor(e,r){super(`Unable to encode the parameter of the view: ${e}.`),this.smartContractViewName=e,this.originalError=r,this.name="ViewEncodingError"}}class a1 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidScriptError"}}class Kv extends Error{constructor(e){super("Invalid RPC response passed as argument(s)"),this.script=e,this.name="InvalidRpcResponseError"}}class c1 extends Error{constructor(e,r,n){super(`
      ${e}. Error encountered when trying to encode arguments: 

      [${r}]
    `),this.message=e,this.args=r,this.originalError=n,this.name="ParameterEncodingError"}}class Pc extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchema"}}class c8 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapDiff"}}class f8 extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="BigMapEncodingError"}}class u8 extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="StorageEncodingError"}}class l8 extends Error{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var Hv;const Fv=Symbol.for("taquito-schema-type-symbol");function Wa(t,e=Dt.prim){var r,n;if(Array.isArray(t))return Wa({prim:e,args:t},e);const i=t;return i.prim===e&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[(r=i.args)===null||r===void 0?void 0:r[0],{prim:e,args:(n=i.args)===null||n===void 0?void 0:n.slice(1)}]}):i}function jv(t,e){const r=Wa(t),n=Wa(e);return r.prim===n.prim&&(r.args===void 0&&n.args===void 0||r.args!==void 0&&n.args!==void 0&&r.args.length===n.args.length&&r.args.every((i,s)=>{var o,a;return jv(i,(a=(o=n.args)===null||o===void 0?void 0:o[s])!==null&&a!==void 0?a:{})}))&&(r.annots===void 0&&n.annots===void 0||r.annots!==void 0&&n.annots!==void 0&&r.annots.length===n.annots.length&&r.annots.every((i,s)=>{var o;return i===((o=n.annots)===null||o===void 0?void 0:o[s])}))}class Vr{constructor(e){if(this.val=e,this[Hv]=!0,this.root=Js(e,0),this.root instanceof jr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const r=e.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new jr(r,0,Js))}}static isSchema(e){return e&&e[Fv]===!0}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>{if(Array.isArray(n))this.fromRPCResponse({script:{code:n,storage:e.script.storage}});else{const i=n;return i.prim?i.prim==="storage":!1}});if(!r||!Array.isArray(r.args))throw new Kv(e.script);return new Vr(r.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof Dt||this.root instanceof nt)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,r){const n=this.root.Execute(e,r);return this.removeTopLevelAnnotation(n)}Typecheck(e){if(this.root instanceof jr&&Number.isInteger(Number(e))||this.root instanceof zn&&e.ticketer&&e.value&&e.amount||this.root instanceof Wn&&e.ticketer&&e.value&&e.amount||this.root instanceof ls&&this.root.ValueSchema instanceof jr)return!0;try{return this.root.EncodeObject(e),!0}catch{return!1}}ExecuteOnBigMapDiff(e,r){if(!this.bigMap)throw new Pc("Big map schema is undefined");if(!Array.isArray(e))throw new c8("Big map diff must be an array");const n=e.map(({key:i,value:s})=>({args:[i,s]}));return this.bigMap.Execute(n,r)}ExecuteOnBigMapValue(e,r){if(!this.bigMap)throw new Pc("No big map schema");return this.bigMap.ValueSchema.Execute(e,r)}EncodeBigMapKey(e){if(!this.bigMap)throw new Pc("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(r){throw new f8("big map key",r)}}Encode(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new u8("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,r){if(!this.bigMap)throw new Pc("Big map schema is undefined");const n=e.reduce((i,s)=>Object.assign(Object.assign({},i),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(e,r){return this.findValue(this.root.val,e,r)}findValue(e,r,n){if(jv(n,e))return r;if(Array.isArray(e)||e.prim==="pair"){const i=Wa(e),s=Wa(r,"Pair");if(i.args===void 0||s.args===void 0)throw new l8("Tokens have no arguments");if(i.args[0])return this.findValue(i.args[0],s.args[0],n)||this.findValue(i.args[1],s.args[1],n)}}findToken(e){const r=[];return this.root.findAndReturnTokens(e,r)}}Hv=Fv;class Ao{constructor(e){this.root=Js(e,0)}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>n.prim==="parameter");if(!r||!Array.isArray(r.args))throw new Kv(e.script);return new Ao(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof nt||this.root instanceof Ko&&this.root.subToken()instanceof nt}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(e,r){return this.root.Execute(e,r)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(r){throw r instanceof dt?r:new c1("Unable to encode parameter",e.toString(),r)}}EncodeObject(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new c1("Unable to encode parameter object",e,n)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class kh{constructor(e){if(e.length!==4||!("string"in e[0]))throw new a1(`Invalid on-chain view: ${JSON.stringify(e)}`);this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=Js(this.viewArgsType,0),this.rootReturnType=Js(this.viewReturnType,0)}static fromRPCResponse(e){const r=[],n=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(i=>i.prim==="view");return n&&n.forEach(i=>{if(!i.args||i.args.length!==4)throw new a1(`Invalid on-chain view found in the script: ${JSON.stringify(i)}`);r.push(new kh(i.args))}),r}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(r){throw new a8(this.viewName,r)}}decodeViewResult(e,r){return this.rootReturnType.Execute(e,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}const f1=Symbol(),xr=Symbol("source_reference");class Ks extends Error{constructor(e,r,n){super(n),this.src=e,this.idx=r,Object.setPrototypeOf(this,Ks.prototype)}}var Rr;(function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"})(Rr||(Rr={}));const d8=new RegExp("\\s"),h8=new RegExp("[:@%_A-Za-z]"),p8=new RegExp("[@%_\\.A-Za-z0-9]"),u1=new RegExp("[0-9]"),g8=new RegExp("[0-9a-fA-F]");function*Fl(t,e=!1){let r=0;for(;r<t.length;){for(;r<t.length&&d8.test(t[r]);)r++;if(r===t.length)return;const n=t[r],i=r;if(h8.test(n)){for(r++;r<t.length&&p8.test(t[r]);)r++;yield{t:Rr.Ident,v:t.slice(i,r),first:i,last:r}}else if(t.length-r>1&&t.substr(r,2)==="0x"){for(r+=2;r<t.length&&g8.test(t[r]);)r++;if(r-i&1)throw new Ks(t,r,"Bytes literal length is expected to be power of two");yield{t:Rr.Bytes,v:t.slice(i,r),first:i,last:r}}else if(u1.test(n)||n==="-"){n==="-"&&r++;const s=r;for(;r<t.length&&u1.test(t[r]);)r++;if(s===r)throw new Ks(t,r,"Number literal is too short");yield{t:Rr.Number,v:t.slice(i,r),first:i,last:r}}else if(n==='"'){r++;let s=!1;for(;r<t.length&&(s||t[r]!=='"');r++)!s&&t[r]==="\\"?s=!0:s=!1;if(r===t.length)throw new Ks(t,r,"Unterminated string literal");r++,yield{t:Rr.String,v:t.slice(i,r),first:i,last:r}}else if(n==="#"){for(r++;r<t.length&&t[r]!==`
`;)r++;e&&(yield{t:Rr.Comment,v:t.slice(i,r),first:i,last:r})}else if(t.length-r>1&&t.substr(r,2)==="/*"){for(r+=2;r<t.length&&!(t.length-r>1&&t.substr(r,2)==="*/");)r++;if(r===t.length)throw new Ks(t,r,"Unterminated C style comment");r+=2,e&&(yield{t:Rr.Comment,v:t.slice(i,r),first:i,last:r})}else if(n==="("||n===")"||n==="{"||n==="}"||n===";")r++,yield{t:n,v:n,first:i,last:r};else throw new Ks(t,r,`Invalid character at offset ${r}: \`${n}'`)}}const Nc=Symbol("ref_contract");var Bi;(function(t){t.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",t.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",t.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",t.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Bi||(Bi={}));const Gv=Bi.Psithaca2,l1={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc:16,PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1:16,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:17};function xo(t,e){return l1[t]<l1[e]}class qr extends Error{constructor(e,r){super(r),this.prim=e,Object.setPrototypeOf(this,qr.prototype)}}function mt(t,e){var r,n;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new qr(t,`macro ${t.prim} expects ${e} arguments, was given ${(n=t.args)===null||n===void 0?void 0:n.length}`)}function wa(t){if(t.annots===void 0)return!0;throw new qr(t,`unexpected annotation on macro ${t.prim}: ${t.annots}`)}function d1(t,e){if("int"in e)return!0;throw new qr(t,`macro ${t.prim} expects int argument`)}function La(t,e,r,n){let i=0,s=0;const o=[null,null];let a;if(i===e.length)throw new qr(t,`unexpected end: ${t.prim}`);let c=e[i++];switch(c){case"P":{const{r:f,n:d,an:O}=La(t,e.slice(i),r.slice(s),n);a=f,i+=d,s+=O;break}case"A":s!==r.length&&(o[0]=r[s++]);break;default:throw new qr(t,`${t.prim}: unexpected character: ${c}`)}let l;if(i===e.length)throw new qr(t,`unexpected end: ${t.prim}`);switch(c=e[i++],c){case"P":{const{r:f,n:d,an:O}=La(t,e.slice(i),r.slice(s),n);l=f.map(([L,D])=>[L+1,D]),i+=d,s+=O;break}case"I":s!==r.length&&(o[1]=r[s++]);break;default:throw new qr(t,`${t.prim}: unexpected character: ${c}`)}return{r:n(a,l,[0,o]),n:i,an:s}}function Sf(t,e,r,n){const i=e[0];switch(i){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},Sf(t,e.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:n.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},Sf(t,e.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:n.d;default:throw new qr(t,`${t.prim}: unexpected character: ${i}`)}}function b8(t,e){let r=t.length;for(;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}function jl(t){const e=[],r=[];if(t!==void 0)for(const n of t)(n.length!==0&&n[0]==="%"?e:r).push(n);return{fields:e,rest:r}}function $t({prim:t,annots:e,args:r}){return Object.assign(Object.assign({prim:t},e&&{annots:e}),r&&{args:r})}const v8=/^P[PAI]{3,}R$/,m8=/^UNP[PAI]{2,}R$/,y8=/^C[AD]{2,}R$/,E8=/^SET_C[AD]+R$/,_8=/^MAP_C[AD]+R$/,w8=/^DI{2,}P$/,A8=/^DU+P$/;function x8(t,e){const r=(e==null?void 0:e.protocol)||Gv;function n(i){return i!==void 0?[{prim:"RENAME",annots:i}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(mt(t,0))return[{prim:"COMPARE"},$t({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(mt(t,2))return[{prim:t.prim.slice(2)},$t({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(mt(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},$t({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(mt(t,0)&&wa(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(mt(t,0)&&wa(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(mt(t,0)&&wa(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(mt(t,0)&&wa(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(mt(t,0)&&wa(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(mt(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"ASSERT_LEFT":if(mt(t,0))return[{prim:"IF_LEFT",args:[n(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(mt(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"IF_SOME":if(mt(t,2))return[$t({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(mt(t,2))return[$t({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"CAR":case"CDR":if(t.args!==void 0){if(mt(t,1)&&d1(t,t.args[0])){const i=parseInt(t.args[0].int,10);return $t({prim:"GET",args:[{int:t.prim==="CAR"?String(i*2+1):String(i*2)}],annots:t.annots})}}else return t}if(v8.test(t.prim)&&mt(t,0)){const{fields:i,rest:s}=jl(t.annots),{r:o}=La(t,t.prim.slice(1),i,(a,c,l)=>[...a||[],...c||[],l]);return o.map(([a,c],l)=>{const f=[...b8(c,null).map(O=>O===null?"%":O),...a===0&&l===o.length-1?s:[]],d=$t({prim:"PAIR",annots:f.length!==0?f:void 0});return a===0?d:{prim:"DIP",args:a===1?[[d]]:[{int:String(a)},[d]]}})}if(m8.test(t.prim))if(xo(r,Bi.PtEdo2Zk)&&mt(t,0)){const{r:i}=La(t,t.prim.slice(3),t.annots||[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s,o])=>{const a=[{prim:"DUP"},$t({prim:"CAR",annots:o[0]!==null?[o[0]]:void 0}),{prim:"DIP",args:[[$t({prim:"CDR",annots:o[1]!==null?[o[1]]:void 0})]]}];return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}else{if(t.prim==="UNPAIR")return t;if(mt(t,0)){const{r:i}=La(t,t.prim.slice(3),[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s])=>{const o=$t({prim:"UNPAIR"});return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}}if(y8.test(t.prim)&&mt(t,0)){const i=[...t.prim.slice(1,t.prim.length-1)];return i.map((s,o)=>{const a=o===i.length-1?t.annots:void 0;switch(s){case"A":return $t({prim:"CAR",annots:a});case"D":return $t({prim:"CDR",annots:a});default:throw new qr(t,`unexpected character: ${s}`)}})}if(E8.test(t.prim)&&mt(t,0)){const{fields:i,rest:s}=jl(t.annots);if(i.length>1)throw new qr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const o=i.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:i},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[i[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:i},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return Sf(t,t.prim.slice(5,t.prim.length-1),s,o)}if(_8.test(t.prim)&&mt(t,1)){const{fields:i}=jl(t.annots);if(i.length>1)throw new qr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[$t({prim:"CAR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[i.length!==0?i[0]:"%","%@"]}],d:[{prim:"DUP"},$t({prim:"CDR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i.length!==0?i[0]:"%"]}]};return Sf(t,t.prim.slice(5,t.prim.length-1),[],s)}if(w8.test(t.prim)&&mt(t,1)){let i=0;for(;t.prim[1+i]==="I";)i++;return $t({prim:"DIP",args:[{int:String(i)},t.args[0]]})}if(A8.test(t.prim)){let i=0;for(;t.prim[1+i]==="U";)i++;if(xo(r,Bi.PtEdo2Zk)){if(i===1){if(t.args===void 0)return t;mt(t,1)&&d1(t,t.args[0])&&(i=parseInt(t.args[0].int,10))}else mt(t,0);return i===1?[$t({prim:"DUP",annots:t.annots})]:i===2?[{prim:"DIP",args:[[$t({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(i-1)},[$t({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(i)}]}]}else{if(i===1)return t;if(mt(t,0))return $t({prim:"DUP",args:[{int:String(i)}],annots:t.annots})}}return t}function S8(t,e){return t.args!==void 0&&t.args.length===1&&"string"in t.args[0]&&t.args[0].string in e?e[t.args[0].string]:t}class Po extends Error{constructor(e,r){super(r),this.token=e,Object.setPrototypeOf(this,Po.prototype)}}class Nn extends Error{constructor(e,r){super(r),this.node=e,Object.setPrototypeOf(this,Nn.prototype)}}const Gl=new Po(null,"Unexpected EOF");function h1(t){return t.t===Rr.Ident&&(t.v[0]==="@"||t.v[0]==="%"||t.v[0]===":")}const R8=new RegExp("^-?[0-9]+$"),I8=new RegExp("^([0-9a-fA-F]{2})*$");class Fs{constructor(e){this.opt=e}expand(e){var r,n,i;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&e.prim==="constant"){const s=S8(e,this.opt.expandGlobalConstant);return s!==e&&(s[xr]=Object.assign(Object.assign({},e[xr]||{first:0,last:0}),{globalConstant:e})),s}if(((n=this.opt)===null||n===void 0?void 0:n.expandMacros)===void 0||!((i=this.opt)===null||i===void 0)&&i.expandMacros){const s=x8(e,this.opt);return s!==e&&(s[xr]=Object.assign(Object.assign({},e[xr]||{first:0,last:0}),{macro:e})),s}else return e}parseListExpr(e,r){var n;const i={first:r.first,last:r.last},s=r.t==="(";let o;if(s){if(o=e.next(),o.done)throw Gl;i.last=o.value.last}else o={value:r};if(o.value.t!==Rr.Ident)throw new Po(o.value,`not an identifier: ${o.value.v}`);const a={prim:o.value.v,[xr]:i};for(;;){const c=e.next();if(c.done){if(s)throw Gl;break}else if(c.value.t===")"){if(!s)throw new Po(c.value,"unexpected closing bracket");i.last=c.value.last;break}else if(h1(c.value))a.annots=a.annots||[],a.annots.push(c.value.v),i.last=c.value.last;else{a.args=a.args||[];const l=this.parseExpr(e,c.value);i.last=((n=l[xr])===null||n===void 0?void 0:n.last)||i.last,a.args.push(l)}}return this.expand(a)}parseArgs(e,r){var n;const i={first:r.first,last:r.last},s={prim:r.v,[xr]:i};for(;;){const o=e.next();if(o.done||o.value.t==="}"||o.value.t===";")return[s,o];if(h1(o.value))i.last=o.value.last,s.annots=s.annots||[],s.annots.push(o.value.v);else{const a=this.parseExpr(e,o.value);i.last=((n=a[xr])===null||n===void 0?void 0:n.last)||i.last,s.args=s.args||[],s.args.push(a)}}}parseSequenceExpr(e,r){var n,i;const s={first:r.first,last:r.last},o=[];o[xr]=s;const a=r.t==="{";let c=r.t==="{"?null:{value:r};for(;;){if(c===null&&(c=e.next(),c.done||(s.last=c.value.last)),c.done){if(a)throw Gl;return o}if(c.value.t==="}"){if(a)return o;throw new Po(c.value,"unexpected closing bracket")}else if(c.value.t===Rr.Ident){const[l,f]=this.parseArgs(e,c.value);s.last=((n=l[xr])===null||n===void 0?void 0:n.last)||s.last,o.push(this.expand(l)),c=f}else{const l=this.parseExpr(e,c.value);s.last=((i=l[xr])===null||i===void 0?void 0:i.last)||s.last,o.push(l),c=null}c===null&&(c=e.next(),c.done||(s.last=c.value.last)),!c.done&&c.value.t===";"&&(c=null)}}parseExpr(e,r){switch(r.t){case Rr.Ident:return this.expand({prim:r.v,[xr]:{first:r.first,last:r.last}});case Rr.Number:return{int:r.v,[xr]:{first:r.first,last:r.last}};case Rr.String:return{string:JSON.parse(r.v),[xr]:{first:r.first,last:r.last}};case Rr.Bytes:return{bytes:r.v.slice(2),[xr]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(e,r);default:return this.parseListExpr(e,r)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=Fl(e),n=r.next();return n.done?null:this.parseSequenceExpr(r,n.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=Fl(e),n=r.next();return n.done?null:this.parseListExpr(r,n.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=Fl(e),n=r.next();return n.done?null:this.parseExpr(r,n.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const r=[];for(const n of e){if(n===null||typeof n!="object")throw new Nn(n,`unexpected sequence element: ${n}`);r.push(this.parseJSON(n))}return r}else if("prim"in e){const r=e;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const n={prim:r.prim};if(r.annots!==void 0){for(const i of r.annots)if(typeof i!="string")throw new Nn(i,`string expected: ${i}`);n.annots=r.annots}if(r.args!==void 0){n.args=[];for(const i of r.args){if(i===null||typeof i!="object")throw new Nn(i,`unexpected argument: ${i}`);n.args.push(this.parseJSON(i))}}return this.expand(n)}throw new Nn(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new Nn(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&R8.test(e.int))return{int:e.int};throw new Nn(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&I8.test(e.bytes))return{bytes:e.bytes};throw new Nn(e,`malformed bytes literal: ${e}`)}else throw new Nn(e,`unexpected object: ${e}`)}}const T8=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],O8=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class Hd extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}class P8 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidMessageError"}}function p1(t){const e=(t.length+9)%64,r=e===0?0:64-e;if(t.length>268435455)throw new P8(`SHA-256 -- message length is too big: ${t.length}`);const n=t.length<<3,i=[...t,128,...new Array(r).fill(0),0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255];function s(f,d){return f>>>d|f<<32-d}const o=[...T8],a=new Array(64),c=new Array(8);for(let f=0;f<i.length;f+=64){let d=f,O=0;for(;O<16;)a[O]=i[d]<<24|i[d+1]<<16|i[d+2]<<8|i[d+3],d+=4,O++;for(;O<64;){const L=s(a[O-15],7)^s(a[O-15],18)^a[O-15]>>>3,D=s(a[O-2],17)^s(a[O-2],19)^a[O-2]>>>10;a[O]=(D|0)+a[O-7]+L+a[O-16]|0,O++}for(let L=0;L<8;L++)c[L]=o[L];for(let L=0;L<64;L++){const D=s(c[0],2)^s(c[0],13)^s(c[0],22),z=s(c[4],6)^s(c[4],11)^s(c[4],25),q=c[7]+z+(c[4]&c[5]^~c[4]&c[6])+O8[L]+a[L]|0,V=D+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+q|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=q+V|0}for(let L=0;L<8;L++)o[L]=o[L]+c[L]|0}const l=[];for(const f of o)l.push(f>>24&255),l.push(f>>16&255),l.push(f>>8&255),l.push(f&255);return l}const Vl=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function g1(t,e){const r=t.charCodeAt(e)-49;if(r>=Vl.length||Vl[r]===-1)throw new Hd(`Unexpected character at position ${e}: ${t[e]}`);return Vl[r]}function N8(t){const e=[];let r=0;for(;r<t.length&&g1(t,r)===0;)r++;let n=r;for(;r<t.length;){let i=g1(t,r++),s=0;for(;i!==0||s<e.length;){const o=(e[s]||0)*58+i;e[s++]=o%256,i=Math.floor(o/256)}}for(;n-- >0;)e.push(0);return e.reverse()}function Vv(t){const e=N8(t);if(e.length<4)throw new Hd(`Data is too short ${e.length}`);const r=e.slice(0,e.length-4),n=e.slice(e.length-4),i=p1(p1(r));if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==i[3])throw new Hd("Invalid checksum");return r}class M8 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidContractError"}}class L8 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidTypeExpressionError"}}class C8 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidDataExpressionError"}}class B8 extends Error{constructor(e){super(`Contract has no entrypoint named: '${e}'`),this.entrypoint=e,this.name="InvalidEntrypointError"}}class k8 extends Error{constructor(e){super(e),this.message=e,this.name="LongIntegerError"}}class $r extends Error{constructor(e,r){super(r),this.val=e,Object.setPrototypeOf(this,$r.prototype)}}class it extends $r{constructor(e,r,n){super(e,n),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,it.prototype)}}class qv{constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(r===0&&n===45)this.neg=!0;else{if(n<48||n>57)throw new k8(`unexpected character in integer constant: ${e[r]}`);this.append(n-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let r=0;for(;e!==0||r<this.buf.length;){const n=(this.buf[r]||0)*10+e;this.buf[r++]=n%256,e=Math.floor(n/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==e.buf.length)r=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let n=e.buf.length-1;for(;n>=0&&this.buf[n]===e.buf[n];)n--;r=n<0?0:this.buf[n]<e.buf[n]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function No(t){const e=[];for(let r=0;r<t.length;r+=2){const n=parseInt(t.slice(r,r+2),16);if(Number.isNaN(n))return null;e.push(n)}return e}function Fd(t){try{return new qv(t),!0}catch{return!1}}function $v(t){try{return new qv(t).sign>=0}catch{return!1}}const D8=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function Ho(t,e){if(Array.isArray(t))return{};let r,n,i;if(t.annots!==void 0){for(const s of t.annots)if(s.length!==0){if(!D8.test(s)||!(e!=null&&e.specialVar)&&(s==="@%"||s==="@%%")||!(e!=null&&e.specialFields)&&s==="%@")throw new $r(t,`${t.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(e!=null&&e.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(n=n||[],n.push(s));break;case"@":(e!=null&&e.emptyVar||s.length>1)&&(i=i||[],i.push(s));break}}}return{f:r,t:n,v:i}}const U8={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function Mc(t,...e){const r=Vv(t);for(const n of e){const[i,s]=U8[n];if(r.length===i+s.length){let o=0;for(;o<s.length&&r[o]===s[o];)o++;if(o===s.length)return[n,r.slice(s.length)]}}return null}function mn(t,e){const r=e,n=Array.isArray(r)?r:r.args;return n.length===2?t==="pair"?{prim:"pair",args:n}:{prim:"Pair",args:n}:Object.assign(Object.assign({},Array.isArray(r)?{prim:t}:r),{args:[n[0],{prim:t,args:n.slice(1)}]})}function as(t){return Array.isArray(t)||t.prim==="pair"}function K8(t){return Array.isArray(t)||"prim"in t&&t.prim==="Pair"}const H8=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function F8(t){if("string"in t){if($v(t.string))return new Date(parseInt(t.string,10));if(H8.test(t.string)){const e=new Date(t.string);if(!Number.isNaN(e.valueOf))return e}}else if(Fd(t.int))return new Date(parseInt(t.int,10));return null}const j8=31,zv={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0,BYTES:!0,NAT:!0},Wv=Object.assign({},zv,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Xv={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},sa=Object.assign({},Xv,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class ut extends $r{constructor(e,r){super(e,r),this.val=e,Object.setPrototypeOf(this,ut.prototype)}}function ai(t){return"prim"in t}function G8(t){return Array.isArray(t)||"prim"in t}function Jv(t){if(ai(t))return!0;throw new ut(t,"prim expression expected")}function cs(t){if(Array.isArray(t))return!0;throw new ut(t,"sequence expression expected")}function gr(t){if(G8(t))return!0;throw new ut(t,"prim or sequence expression expected")}function ql(t){if(t.int[0]==="-")throw new ut(t,"natural number expected")}function rf(t){if("int"in t)return!0;throw new ut(t,"int literal expected")}function Yv(t){if("string"in t)return!0;throw new ut(t,"string literal expected")}function st(t,e){var r;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new ut(t,`${e} arguments expected`)}function yn(t){var e,r;if(Array.isArray(t)){for(const n of t){if(!Array.isArray(n)&&!ai(n))throw new ut(t,"sequence or prim expected");yn(n)}return!0}if(Jv(t)){if(Object.prototype.hasOwnProperty.call(zv,t.prim))return st(t,0),!0;switch(t.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":t.args!==void 0&&st(t,1)&&rf(t.args[0])&&ql(t.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":st(t,1)&&rf(t.args[0])&&ql(t.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":st(t,1)&&Ni(t.args[0]);break;case"UNPACK":st(t,1)&&Dh(t.args[0]);break;case"CONTRACT":st(t,1)&&wu(t.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":st(t,2)&&(cs(t.args[0])&&yn(t.args[0]),cs(t.args[1])&&yn(t.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":st(t,1)&&yn(t.args[0]);break;case"CREATE_CONTRACT":st(t,1)&&Zv(t.args[0]);break;case"DIP":if(((e=t.args)===null||e===void 0?void 0:e.length)===2)rf(t.args[0])&&ql(t.args[0]),cs(t.args[1])&&yn(t.args[1]);else if(((r=t.args)===null||r===void 0?void 0:r.length)===1)cs(t.args[0])&&yn(t.args[0]);else throw new ut(t,"1 or 2 arguments expected");break;case"PUSH":st(t,2)&&(Fo(t.args[0]),Hs(t.args[1]));break;case"EMPTY_SET":st(t,1)&&ki(t.args[0]);break;case"EMPTY_MAP":st(t,2)&&(ki(t.args[0]),Ni(t.args[1]));break;case"EMPTY_BIG_MAP":st(t,2)&&(ki(t.args[0]),Au(t.args[1]));break;case"LAMBDA_REC":case"LAMBDA":st(t,3)&&(Ni(t.args[0]),Ni(t.args[1]),cs(t.args[2])&&yn(t.args[2]));break;case"VIEW":st(t,2)&&(Yv(t.args[0])&&Qv(t.args[0]),Ni(t.args[1])&&Fo(t.args[1]));break;case"EMIT":t.args&&t.args.length>0?st(t,1):st(t,0);break;default:throw new ut(t,"instruction expected")}}return!0}function ki(t){if(gr(t)){if(Array.isArray(t)||t.prim==="pair"||t.prim==="or"||t.prim==="option")oo(t,e=>ki(e));else if(!Object.prototype.hasOwnProperty.call(Xv,t.prim))throw new ut(t,`${t.prim}: type is not comparable`)}return!0}function Dh(t){if(gr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(sa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket")throw new ut(t,`${t.prim}: type can't be used inside PACK/UNPACK instructions`);oo(t,e=>Dh(e))}return!0}function Fo(t){if(gr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(sa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be pushed`);oo(t,e=>Fo(e))}return!0}function Uh(t){if(gr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(sa,t.prim)||t.prim==="operation"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be used as part of a storage`);oo(t,e=>Uh(e))}return!0}function wu(t){if(gr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(sa,t.prim)||t.prim==="operation")throw new ut(t,`${t.prim}: type can't be used as part of a parameter`);oo(t,e=>wu(e))}return!0}function Au(t){if(gr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(sa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state")throw new ut(t,`${t.prim}: type can't be used inside a big_map`);oo(t,e=>Au(e))}return!0}const V8=new RegExp("^[a-zA-Z0-9_.%@]*$");function Qv(t){if(t.string.length>j8)throw new ut(t,`view name too long: ${t.string}`);if(!V8.test(t.string))throw new ut(t,`invalid character(s) in view name: ${t.string}`)}function Ni(t){if(gr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(sa,t.prim))throw new ut(t,"type expected");oo(t,e=>Ni(e))}return!0}function oo(t,e){if(Array.isArray(t)||t.prim==="pair"){const r=Array.isArray(t)?t:t.args;if(r===void 0||r.length<2)throw new ut(t,"at least 2 arguments expected");return r.forEach(n=>{gr(n)&&e(n)}),!0}switch(t.prim){case"option":case"list":st(t,1)&&gr(t.args[0])&&e(t.args[0]);break;case"contract":st(t,1)&&wu(t.args[0]);break;case"or":st(t,2)&&gr(t.args[0])&&gr(t.args[1])&&(e(t.args[0]),e(t.args[1]));break;case"lambda":st(t,2)&&(Ni(t.args[0]),Ni(t.args[1]));break;case"set":st(t,1)&&ki(t.args[0]);break;case"map":st(t,2)&&gr(t.args[0])&&gr(t.args[1])&&(ki(t.args[0]),e(t.args[1]));break;case"big_map":st(t,2)&&gr(t.args[0])&&gr(t.args[1])&&(ki(t.args[0]),Au(t.args[1]),e(t.args[1]));break;case"ticket":st(t,1)&&gr(t.args[0])&&ki(t.args[0]);break;case"sapling_state":case"sapling_transaction":st(t,1)&&rf(t.args[0]);break;default:st(t,0)}return!0}function Hs(t){if("int"in t||"string"in t||"bytes"in t)return!0;if(Array.isArray(t)){let e=0;for(const r of t)ai(r)&&r.prim==="Elt"?(st(r,2)&&(Hs(r.args[0]),Hs(r.args[1])),e++):Hs(r);if(e!==0&&e!==t.length)throw new ut(t,"data entries and map elements can't be intermixed");return!0}if(ai(t))switch(t.prim){case"Unit":case"True":case"False":case"None":st(t,0);break;case"Pair":if(t.args===void 0||t.args.length<2)throw new ut(t,"at least 2 arguments expected");for(const e of t.args)Hs(e);break;case"Left":case"Right":case"Some":st(t,1)&&Hs(t.args[0]);break;case"Lambda_rec":t.args&&yn(t.args);break;default:if(Object.prototype.hasOwnProperty.call(Wv,t.prim))yn(t);else throw new ut(t,"data entry or instruction expected")}else throw new ut(t,"data entry expected");return!0}function Zv(t){if(cs(t)){const e={},r={};for(const n of t)if(Jv(n)){if(n.prim!=="view"){if(n.prim in e)throw new ut(t,`duplicate contract section: ${n.prim}`);e[n.prim]=!0}switch(n.prim){case"code":st(n,1)&&cs(n.args[0])&&yn(n.args[0]);break;case"parameter":if(st(n,1)&&wu(n.args[0]),n.annots)throw new ut(n,"Annotation must be part of the parameter type");break;case"storage":st(n,1)&&Uh(n.args[0]);break;case"view":if(st(n,4)){if(Yv(n.args[0])){const i=n.args[0];if(i.string in r)throw new ut(t,`duplicate view name: ${i.string}`);r[i.string]=!0,Qv(i)}Fo(n.args[1]),Fo(n.args[2]),cs(n.args[3])&&yn(n.args[3])}break;default:throw new ut(t,`unexpected contract section: ${n.prim}`)}}}return!0}function em(t){return Object.prototype.hasOwnProperty.call(Wv,t.prim)}function b1(t){if(!Array.isArray(t))return!1;for(const e of t)if("prim"in e){if(em(e))throw new $r(t,`Instruction outside of a lambda: ${JSON.stringify(t)}`);if(e.prim==="Elt")throw new $r(t,`Elt item outside of a map literal: ${JSON.stringify(t)}`)}return!0}function q8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}const $8=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET","BYTES","NAT"];Object.assign({},...$8.map((t,e)=>({[t]:e})));var v1;(function(t){t[t.Int=0]="Int",t[t.String=1]="String",t[t.Sequence=2]="Sequence",t[t.Prim0=3]="Prim0",t[t.Prim0Annot=4]="Prim0Annot",t[t.Prim1=5]="Prim1",t[t.Prim1Annot=6]="Prim1Annot",t[t.Prim2=7]="Prim2",t[t.Prim2Annot=8]="Prim2Annot",t[t.Prim=9]="Prim",t[t.Bytes=10]="Bytes"})(v1||(v1={}));const Yi=new Error("bounds out of range");class jo{constructor(e,r=0,n=e.length){this.buffer=e,this.idx=r,this.cap=n}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw Yi;const r=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,r}reader(e){if(this.cap-this.idx<e)throw Yi;const r=new jo(this.buffer,this.idx,this.idx+e);return this.idx+=e,r}copy(){return new jo(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw Yi;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw Yi;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw Yi;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return(e<<24|r<<16|n<<8|i)>>>0}readInt8(){if(this.cap-this.idx<1)throw Yi;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw Yi;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw Yi;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return e<<24|r<<16|n<<8|i}}var Rf;(function(t){t[t.Implicit=0]="Implicit",t[t.Originated=1]="Originated"})(Rf||(Rf={}));var Ca;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Ca||(Ca={}));function tm(t){let e;const r=t.readUint8();switch(r){case Ca.ED25519:e="ED25519PublicKeyHash";break;case Ca.SECP256K1:e="SECP256K1PublicKeyHash";break;case Ca.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:e,hash:t.readBytes(20)}}function z8(t){let e;const r=t.readUint8();switch(r){case Rf.Implicit:e=tm(t);break;case Rf.Originated:e={type:"ContractHash",hash:t.readBytes(20)},t.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(t.length!==0){const n=new TextDecoder;e.entryPoint=n.decode(new Uint8Array(t.readBytes(t.length)))}return e}var Ba;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Ba||(Ba={}));function W8(t){let e,r;const n=t.readUint8();switch(n){case Ba.ED25519:r="ED25519PublicKey",e=32;break;case Ba.SECP256K1:r="SECP256K1PublicKey",e=33;break;case Ba.P256:r="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${n}`)}return{type:r,publicKey:t.readBytes(e)}}function X8(t){const e=No(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new jo(new Uint8Array(e));return z8(r)}function J8(t){const e=No(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new jo(new Uint8Array(e));return tm(r)}function Y8(t){const e=No(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new jo(new Uint8Array(e));return W8(r)}class Ke extends $r{constructor(e,r,n){super(e,n),this.stackState=r,Object.setPrototypeOf(this,Ke.prototype)}}function lt(t){return Array.isArray(t)?"pair":t.prim}function If(t){return"prim"in t?t.args:t}function En(t,e,r=!1){if(lt(t)!==lt(e))throw new it(t,void 0,`types mismatch: ${lt(t)} != ${lt(e)}`);const n=[Ho(t),Ho(e)];if(n[0].t&&n[1].t&&n[0].t[0]!==n[1].t[0])throw new it(t,void 0,`${lt(t)}: type names mismatch: ${n[0].t[0]} != ${n[1].t[0]}`);if(r&&n[0].f&&n[1].f&&n[0].f[0]!==n[1].f[0])throw new it(t,void 0,`${lt(t)}: field names mismatch: ${n[0].f[0]} != ${n[1].f}`);if(as(t)){const i=mn("pair",t),s=mn("pair",e);En(i.args[0],s.args[0],!0),En(i.args[1],s.args[1],!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":case"ticket":En(t.args[0],e.args[0]);break;case"or":En(t.args[0],e.args[0],!0),En(t.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":En(t.args[0],e.args[0]),En(t.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(t.args[0].int,10)!==parseInt(e.args[0].int,10))throw new it(t,void 0,`${lt(t)}: type argument mismatch: ${t.args[0].int} != ${e.args[0].int}`)}}function rm(t,e){if(t.length!==e.length)throw new it(t,void 0,`stack length mismatch: ${t.length} != ${e.length}`);for(let r=0;r<t.length;r++)En(t[r],e[r])}function Et(t,e=!1){var r,n,i;if(!Array.isArray(t)){const s=Ho(t);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new it(t,void 0,`${t.prim}: at most one type annotation allowed: ${t.annots}`);if(e){if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>1)throw new it(t,void 0,`${t.prim}: at most one field annotation allowed: ${t.annots}`)}else if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>0)throw new it(t,void 0,`${t.prim}: field annotations aren't allowed: ${t.annots}`)}if(as(t)){const s=If(t);for(const o of s)Et(o,!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":Et(t.args[0]);break;case"or":for(const s of t.args)Et(s,!0);break;case"lambda":case"map":case"big_map":Et(t.args[0]),Et(t.args[1])}}function nm(t){if(!Array.isArray(t))return!1;for(const e of t)if(!(Array.isArray(e)&&nm(e)||"prim"in e&&em(e)))return!1;return!0}function vn(t,e,r){if(as(e)){if(K8(t)){b1(t);const n=mn("Pair",t),i=mn("pair",e);vn(n.args[0],i.args[0],r),vn(n.args[1],i.args[1],r);return}throw new it(e,t,`pair expected: ${JSON.stringify(t)}`)}switch(e.prim){case"int":if("int"in t&&Fd(t.int))return;throw new it(e,t,`integer value expected: ${JSON.stringify(t)}`);case"nat":case"mutez":if("int"in t&&$v(t.int))return;throw new it(e,t,`natural value expected: ${JSON.stringify(t)}`);case"string":if("string"in t)return;throw new it(e,t,`string value expected: ${JSON.stringify(t)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in t&&No(t.bytes)!==null)return;throw new it(e,t,`bytes value expected: ${JSON.stringify(t)}`);case"bool":if("prim"in t&&(t.prim==="True"||t.prim==="False"))return;throw new it(e,t,`boolean value expected: ${JSON.stringify(t)}`);case"key_hash":if("string"in t&&Mc(t.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in t)try{J8(t);return}catch{}throw new it(e,t,`key hash expected: ${JSON.stringify(t)}`);case"timestamp":if(("string"in t||"int"in t)&&F8(t)!==null)return;throw new it(e,t,`timestamp expected: ${JSON.stringify(t)}`);case"address":if("string"in t){let n=t.string;const i=t.string.indexOf("%");if(i>=0&&(n=t.string.slice(0,i)),Mc(n,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in t)try{X8(t);return}catch{}throw new it(e,t,`address expected: ${JSON.stringify(t)}`);case"key":if("string"in t&&Mc(t.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in t)try{Y8(t);return}catch{}throw new it(e,t,`public key expected: ${JSON.stringify(t)}`);case"unit":if("prim"in t&&t.prim==="Unit")return;throw new it(e,t,`unit value expected: ${JSON.stringify(t)}`);case"signature":if("bytes"in t||"string"in t&&Mc(t.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new it(e,t,`signature expected: ${JSON.stringify(t)}`);case"chain_id":if(("bytes"in t||"string"in t)&&("string"in t?Vv(t.string):No(t.bytes))!==null)return;throw new it(e,t,`chain id expected: ${JSON.stringify(t)}`);case"option":if("prim"in t){if(t.prim==="None")return;if(t.prim==="Some"){vn(t.args[0],e.args[0],r);return}}throw new it(e,t,`option expected: ${JSON.stringify(t)}`);case"list":case"set":if(b1(t)){for(const n of t)vn(n,e.args[0],r);return}throw new it(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"or":if("prim"in t){if(t.prim==="Left"){vn(t.args[0],e.args[0],r);return}else if(t.prim==="Right"){vn(t.args[0],e.args[1],r);return}}throw new it(e,t,`union (or) expected: ${JSON.stringify(t)}`);case"lambda":if(nm(t)){const n=Xt(t,[e.args[0]],r);if("failed"in n)throw new it(e,t,`function is failed with error type: ${n.failed}`);if(n.length!==1)throw new it(e,t,"function must return a value");En(e.args[1],n[0]);return}throw new it(e,t,`function expected: ${JSON.stringify(t)}`);case"map":case"big_map":if(Array.isArray(t)){for(const n of t){if(!("prim"in n)||n.prim!=="Elt")throw new it(e,t,`map elements expected: ${JSON.stringify(t)}`);vn(n.args[0],e.args[0],r),vn(n.args[1],e.args[1],r)}return}throw new it(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"bls12_381_fr":if("int"in t&&Fd(t.int)||"bytes"in t&&No(t.bytes)!==null)return;throw new it(e,t,`BLS12-381 element expected: ${JSON.stringify(t)}`);case"sapling_state":if(Array.isArray(t))return;throw new it(e,t,`sapling state expected: ${JSON.stringify(t)}`);case"ticket":vn(t,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},r);return;default:throw new it(e,t,`type ${lt(e)} don't have Michelson literal representation`)}}function Q8(t,e,r){let n=e,i=e,s=0;for(const o of t){const a=Xt(o,i,r);if(n=a,"failed"in a)break;i=a,s++}if("failed"in n&&n.level==0&&(!("prim"in n.failed)||n.failed.prim!=="never")&&s!==t.length-1)throw new Ke(t,n,"FAIL must appear in a tail position");if((r==null?void 0:r.traceCallback)!==void 0){const o={op:t,in:e,out:n};r.traceCallback(o)}return"failed"in n?{failed:n.failed,level:n.level+1}:n}function Xt(t,e,r){const n=(r==null?void 0:r.protocol)||Gv;if(Array.isArray(t))return Q8(t,e,r);const i=t;function s(x,..._){if(e.length<_.length+x)throw new Ke(i,e,`${i.prim}: stack must have at least ${_.length} element(s)`);let u=x;for(const p of _){if(p!==null&&p.length!==0){let b=0;for(;b<p.length&&p[b]!==lt(e[u]);)b++;if(b===p.length)throw new Ke(i,e,`${i.prim}: stack type mismatch: [${u}] expected to be ${p}, got ${lt(e[u])} instead`)}u++}return e.slice(x,_.length+x)}function o(x){return(..._)=>{try{return x(..._)}catch(u){throw u instanceof $r?new Ke(i,e,u.message):u}}}function a(x){return _=>{try{return x(_)}catch(u){throw u instanceof $r?new Ke(i,e,u.message):u}}}const c=o(Ho),l=o(rm),f=o(En),d=a(ki),O=a(Dh),L=a(Uh),D=a(Fo),z=a(Au);function q(x,_){const u=c(i,Object.assign(Object.assign({},_),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),p=(b,g,h)=>{if(b&&b.length>(g||0))throw new Ke(i,e,`${i.prim}: at most ${g||0} ${h} annotations allowed`)};return p(u.f,x.f,"field"),p(u.t,x.t,"type"),p(u.v,x.v,"variable"),u}function V(x,_){const u=x,p=Array.isArray(u)?{prim:"pair",args:u}:u,b=c(p),g=_.v!==void 0||_.t!==void 0||_.f!==void 0?[...(_.v===null?b.v:_.v)||[],...(_.t===null?b.t:_.t)||[],...(_.f===null?b.f:_.f)||[]]:void 0,h=q8(p,["annots"]);return Object.assign(Object.assign({},h),g&&g.length!==0&&{annots:g})}function U(x,_){const u=q({v:1});return V(x,{v:u.v!==void 0?u.v:_!==void 0?[_]:null,t:null})}function W(x,_,u,p,b){var g,h,S,P;const w=(g=c(_).f)===null||g===void 0?void 0:g[0],m=(h=u.f)===null||h===void 0?void 0:h[p];if(m!==void 0&&m!=="%"&&w!==void 0&&m!==w)throw new Ke(i,e,`${i.prim}: field names doesn't match: ${m} !== ${w}`);const M=(S=u.v)===null||S===void 0?void 0:S[p],ee=(P=c(x).v)===null||P===void 0?void 0:P[0];return V(_,{t:null,v:M?M==="@%"?w?["@"+w.slice(1)]:void 0:M==="@%%"?ee?["@"+ee.slice(1)+"."+(w?w.slice(1):b)]:w?["@"+w.slice(1)]:void 0:[M]:null})}function F(x,_,u=_){const p=mn("pair",x);if(u===1)return[p.args[0]];if(u===2)return p.args;const b=p.args[1];if(as(b))return[p.args[0],...F(b,_,u-1)];throw new Ke(i,e,`${i.prim}: at least ${_} fields are expected`)}function j(x,_,u=_){if(u===0)return x;const p=mn("pair",x);if(u===1)return p.args[0];const b=p.args[1];if(as(b))return j(b,_,u-2);if(u===2)return b;throw new Ke(i,e,`${i.prim}: at least ${_+1} fields are expected`)}function G(x,_,u,p=u){if(p===0)return _;const b=mn("pair",x);if(p===1)return Object.assign(Object.assign({},b),{args:[_,b.args[1]]});const g=b.args[1];if(as(g))return Object.assign(Object.assign({},b),{args:[b.args[0],G(g,_,u,p-2)]});if(p===2)return Object.assign(Object.assign({},b),{args:[b.args[0],_]});throw new Ke(i,e,`${i.prim}: at least ${u+1} fields are expected`)}const E=(x,_)=>["@"+(x.v?x.v[0].slice(1)+".":"")+_];function y(x,_){return"failed"in x||"failed"in _?"failed"in x?_:x:(l(x,_),x)}const T=(x=>{var _,u,p,b,g;switch(x.prim){case"DUP":{const h=x.args?parseInt(x.args[0].int,10):1;if(h===0)throw new Ke(x,e,"DUP 0 is forbidden");const S=s(h-1,null)[0];if(lt(S)==="ticket")throw new Ke(x,e,"ticket can't be DUPed");return[S,...e]}case"SWAP":{const h=s(0,null,null);return q({}),[h[1],h[0],...e.slice(2)]}case"SOME":return[V({prim:"option",args:[s(0,null)[0]]},q({t:1,v:1})),...e.slice(1)];case"UNIT":return[V({prim:"unit"},q({v:1,t:1})),...e];case"PAIR":{const h=x.args?parseInt(x.args[0].int,10):2;if(h<2)throw new Ke(x,e,`PAIR ${h} is forbidden`);const S=s(0,...new Array(h).fill(null)),P=q({f:h,t:1,v:1},{specialFields:!0}),w=M=>{const ee=M.lastIndexOf(".");return M.slice(ee>0?ee+1:1)},m=S.map((M,ee)=>{var Z;const oe=c(M),ae=P.f&&P.f.length>ee&&P.f[ee]!=="%"?P.f[ee]==="%@"?oe.v?["%"+w(((Z=oe.v)===null||Z===void 0?void 0:Z[0])||"")]:void 0:[P.f[ee]]:void 0;return V(M,{v:null,t:null,f:ae})});return[V({prim:"pair",args:m},{t:P.t,v:P.v}),...e.slice(h)]}case"UNPAIR":{const h=x.args?parseInt(x.args[0].int,10):2;if(h<2)throw new Ke(x,e,`UNPAIR ${h} is forbidden`);const S=s(0,["pair"])[0],P=q({f:2,v:2},{specialVar:!0});return[...F(S,h).map((m,M)=>W(S,m,P,M,M===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const h=mn("pair",s(0,["pair"])[0]),S=h.args[x.prim==="CAR"?0:1],P=q({f:1,v:1},{specialVar:!0});return[W(h,S,P,0,x.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const h=s(0,null,["list"]);return f(h[0],h[1].args[0]),[U({prim:"list",args:[h[1].args[0]]}),...e.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[U({prim:"nat"}),...e.slice(1)];case"MEM":{const h=s(0,null,["set","map","big_map"]);return d(h[0]),f(h[0],h[1].args[0]),[U({prim:"bool"}),...e.slice(2)]}case"GET":if(x.args){const h=parseInt(x.args[0].int,10),S=s(0,["pair"])[0];return[U(j(S,h)),...e.slice(1)]}else{const h=s(0,null,["map","big_map"]);return d(h[0]),f(h[0],h[1].args[0]),[U({prim:"option",args:[h[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(x.args){const h=parseInt(x.args[0].int,10),S=s(0,null,["pair"]);return[U(G(S[1],S[0],h)),...e.slice(2)]}else{const h=s(0,null,["bool","option"]);if(d(h[0]),h[1].prim==="bool"){const P=s(2,["set"]);return f(h[0],P[0].args[0]),[U({prim:"set",args:[V(h[0],{t:null})]}),...e.slice(3)]}const S=s(2,["map","big_map"]);return f(h[0],S[0].args[0]),S[0].prim==="map"?[U({prim:"map",args:[V(h[0],{t:null}),V(h[1].args[0],{t:null})]}),...e.slice(3)]:(z(h[1].args[0]),[U({prim:"big_map",args:[V(h[0],{t:null}),V(h[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const h=q({v:2}),S=s(0,null,["option"],["map","big_map"]);d(S[0]),f(S[0],S[2].args[0]),f(S[1].args[0],S[2].args[1]);const P=(_=h.v)===null||_===void 0?void 0:_.map(w=>w!=="@"?[w]:void 0);return S[2].prim==="map"?[V({prim:"option",args:[S[2].args[1]]},{v:P==null?void 0:P[0]}),V({prim:"map",args:[V(S[0],{t:null}),V(S[1].args[0],{t:null})]},{v:P==null?void 0:P[1]}),...e.slice(3)]:(z(S[1].args[0]),[V({prim:"option",args:[S[2].args[1]]},{v:P==null?void 0:P[0]}),V({prim:"big_map",args:[V(S[0],{t:null}),V(S[1].args[0],{t:null})]},{v:P==null?void 0:P[1]}),...e.slice(3)])}case"EXEC":{const h=s(0,null,["lambda"]);return f(h[0],h[1].args[0]),[U(h[1].args[1]),...e.slice(2)]}case"APPLY":{const h=s(0,null,["lambda"]);if(L(h[0]),D(h[0]),!as(h[1].args[0]))throw new Ke(x,e,`${x.prim}: function's argument must be a pair: ${lt(h[1].args[0])}`);const S=h[1].args[0];return f(h[0],If(S)[0]),[U({prim:"lambda",args:[If(S)[1],h[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const h=s(0,null)[0];return xo(n,Bi.PtEdo2Zk)||O(h),{failed:h,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[U(s(0,null)[0]),...e.slice(1)];case"CONCAT":{const h=s(0,["string","list","bytes"]);if(h[0].prim==="list"){if(lt(h[0].args[0])!=="string"&&lt(h[0].args[0])!=="bytes")throw new Ke(x,e,`${x.prim}: can't concatenate list of ${lt(h[0].args[0])}'s`);return[U(h[0].args[0]),...e.slice(1)]}const S=s(1,["string","bytes"]);if(h[0].prim!==S[0].prim)throw new Ke(x,e,`${x.prim}: can't concatenate ${h[0].prim} with ${S[0].prim}`);return[U(S[0]),...e.slice(2)]}case"SLICE":return[U({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const h=s(0,null)[0];return O(h),[U({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const h=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(h[0].prim==="nat"&&h[1].prim==="int"||h[0].prim==="int"&&h[1].prim==="nat")return[U({prim:"int"}),...e.slice(2)];if(h[0].prim==="int"&&h[1].prim==="timestamp"||h[0].prim==="timestamp"&&h[1].prim==="int")return[U({prim:"timestamp"}),...e.slice(2)];if((h[0].prim==="int"||h[0].prim==="nat"||h[0].prim==="mutez"||h[0].prim==="bls12_381_g1"||h[0].prim==="bls12_381_g2"||h[0].prim==="bls12_381_fr")&&h[0].prim===h[1].prim)return[U(h[0]),...e.slice(2)];throw new Ke(x,e,`${x.prim}: can't add ${h[0].prim} to ${h[1].prim}`)}case"SUB":{const h=xo(n,Bi.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((h[0].prim==="nat"||h[0].prim==="int")&&(h[1].prim==="nat"||h[1].prim==="int")||h[0].prim==="timestamp"&&h[1].prim==="timestamp")return[U({prim:"int"}),...e.slice(2)];if(h[0].prim==="timestamp"&&h[1].prim==="int")return[U({prim:"timestamp"}),...e.slice(2)];if(h[0].prim==="mutez"&&h[1].prim==="mutez")return[U({prim:"mutez"}),...e.slice(2)];throw new Ke(x,e,`${x.prim}: can't subtract ${h[0].prim} from ${h[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[U({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const h=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(h[0].prim==="nat"&&h[1].prim==="int"||h[0].prim==="int"&&h[1].prim==="nat")return[U({prim:"int"}),...e.slice(2)];if(h[0].prim==="nat"&&h[1].prim==="mutez"||h[0].prim==="mutez"&&h[1].prim==="nat")return[U({prim:"mutez"}),...e.slice(2)];if((h[0].prim==="bls12_381_g1"||h[0].prim==="bls12_381_g2"||h[0].prim==="bls12_381_fr")&&h[1].prim==="bls12_381_fr"||(h[0].prim==="nat"||h[0].prim==="int")&&h[0].prim===h[1].prim)return[U(h[0]),...e.slice(2)];if((h[0].prim==="nat"||h[0].prim==="int")&&h[1].prim==="bls12_381_fr"||(h[1].prim==="nat"||h[1].prim==="int")&&h[0].prim==="bls12_381_fr")return[U({prim:"bls12_381_fr"}),...e.slice(2)];throw new Ke(x,e,`${x.prim}: can't multiply ${h[0].prim} by ${h[1].prim}`)}case"EDIV":{const h=(P,w)=>({prim:"option",args:[{prim:"pair",args:[{prim:P},{prim:w}]}]}),S=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(S[0].prim==="nat"&&S[1].prim==="nat")return[U(h("nat","nat")),...e.slice(2)];if((S[0].prim==="nat"||S[0].prim==="int")&&(S[1].prim==="nat"||S[1].prim==="int"))return[U(h("int","nat")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="nat")return[U(h("mutez","mutez")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="mutez")return[U(h("nat","mutez")),...e.slice(2)];throw new Ke(x,e,`${x.prim}: can't euclideally divide ${S[0].prim} by ${S[1].prim}`)}case"ABS":return s(0,["int"]),[U({prim:"nat"}),...e.slice(1)];case"ISNAT":return s(0,["int"]),[U({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return s(0,["nat","bls12_381_fr","bytes"]),[U({prim:"int"}),...e.slice(1)];case"BYTES":return s(0,["nat","int"]),[U({prim:"bytes"}),...e.slice(1)];case"NAT":return s(0,["bytes"]),[U({prim:"nat"}),...e.slice(1)];case"NEG":{const h=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return h.prim==="nat"||h.prim==="int"?[U({prim:"int"}),...e.slice(1)]:[U(h),...e.slice(1)]}case"LSL":case"LSR":return s(0,["nat","bytes"],["nat","bytes"]),[U({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const h=s(0,["nat","bytes","bool"],["nat","bytes","bool"]);if(h[0].prim!==h[1].prim)throw new Ke(x,e,`${x.prim}: both arguments must be of the same type: ${h[0].prim}, ${h[1].prim}`);return[U(h[1]),...e.slice(2)]}case"AND":{const h=s(0,["nat","bytes","bool","int"],["nat","bytes","bool"]);if((h[0].prim!=="int"||h[1].prim!=="nat")&&h[0].prim!==h[1].prim)throw new Ke(x,e,`${x.prim}: both arguments must be of the same type: ${h[0].prim}, ${h[1].prim}`);return[U(h[1]),...e.slice(2)]}case"NOT":return s(0,["nat","bytes","bool","int"])[0].prim==="bool"?[U({prim:"bool"}),...e.slice(1)]:[U({prim:"int"}),...e.slice(1)];case"COMPARE":{const h=s(0,null,null);return d(h[0]),d(h[1]),[U({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[U({prim:"bool"}),...e.slice(1)];case"SELF":{if((r==null?void 0:r.contract)===void 0)throw new Ke(x,e,`${x.prim}: contract required`);const h=q({f:1,v:1}),S=jd(r.contract,(u=h.f)===null||u===void 0?void 0:u[0]);if(S===null)throw new Ke(x,e,`${x.prim}: contract has no entrypoint ${S}`);return[V({prim:"contract",args:[S]},{v:h.v?h.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const h=s(0,null,["mutez"],["contract"]);return f(h[0],h[2].args[0]),[U({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const h=s(0,["option"])[0];if(lt(h.args[0])!=="key_hash")throw new Ke(x,e,`${x.prim}: key hash expected: ${lt(h.args[0])}`);return[U({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[U({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[U({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[U({prim:"mutez"},"@amount"),...e];case"BALANCE":return[U({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[U({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[U({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return s(0,["key"]),[U({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[U({prim:"address"},"@source"),...e];case"SENDER":return[U({prim:"address"},"@sender"),...e];case"ADDRESS":{const h=s(0,["contract"])[0],S=q({v:1});return[V({prim:"address",[Nc]:h},{v:S.v?S.v:E(c(h),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const h={prim:"address"};return(r==null?void 0:r.contract)!==void 0&&(h[Nc]={prim:"contract",args:[ri(r.contract,"parameter").args[0]]}),[U(h,"@address"),...e]}case"CHAIN_ID":return[U({prim:"chain_id"}),...e];case"DROP":{q({});const h=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(h-1,null),e.slice(h)}case"DIG":{q({});const h=parseInt(x.args[0].int,10);return[s(h,null)[0],...e.slice(0,h),...e.slice(h+1)]}case"DUG":{q({});const h=parseInt(x.args[0].int,10);return[...e.slice(1,h+1),s(0,null)[0],...e.slice(h+1)]}case"NONE":return Et(x.args[0]),[V({prim:"option",args:[x.args[0]]},q({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const h=s(0,null)[0],S=q({f:2,t:1,v:1},{specialFields:!0}),P=c(h),w=[V(h,{t:null,v:null,f:S.f&&S.f.length>0&&S.f[0]!=="%"?S.f[0]==="%@"?P.v?["%"+P.v[0].slice(1)]:void 0:S.f:void 0}),V(x.args[0],{t:null,f:S.f&&S.f.length>1&&S.f[1]!=="%"?S.f:void 0})];return[V({prim:"or",args:x.prim==="LEFT"?w:[w[1],w[0]]},{t:S.t,v:S.v}),...e.slice(1)]}case"NIL":return Et(x.args[0]),[V({prim:"list",args:[x.args[0]]},q({t:1,v:1})),...e];case"UNPACK":return s(0,["bytes"]),Et(x.args[0]),[U({prim:"option",args:[x.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const h=s(0,["address"])[0];Et(x.args[0]);const S=q({v:1,f:1}),P=h[Nc];if(P!==void 0){const w=jd(P,(p=S.f)===null||p===void 0?void 0:p[0]);if(w===null)throw new Ke(x,e,`${x.prim}: contract has no entrypoint ${w}`);f(w,x.args[0])}return[V({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:S.v?S.v:E(c(h),"contract")}),...e.slice(1)]}case"CAST":{q({});const h=s(0,null)[0];return Et(x.args[0]),f(x.args[0],h),[x.args[0],...e.slice(1)]}case"IF_NONE":{q({});const h=s(0,["option"])[0],S=e.slice(1),P=Xt(x.args[0],S,r),w=Xt(x.args[1],[V(h.args[0],{t:null,v:E(c(h),"some")}),...S],r);return y(P,w)}case"IF_LEFT":{q({});const h=s(0,["or"])[0],S=c(h),P=c(h.args[0]),w=c(h.args[1]),m=e.slice(1),M=Xt(x.args[0],[V(h.args[0],{t:null,v:E(S,P.f?P.f[0].slice(1):"left")}),...m],r),ee=Xt(x.args[1],[V(h.args[1],{t:null,v:E(S,w.f?w.f[0].slice(1):"right")}),...m],r);return y(M,ee)}case"IF_CONS":{q({});const h=s(0,["list"])[0],S=c(h),P=e.slice(1),w=Xt(x.args[0],[V(h.args[0],{t:null,v:E(S,"hd")}),V(h,{t:null,v:E(S,"tl")}),...P],r),m=Xt(x.args[1],P,r);return y(w,m)}case"IF":{q({}),s(0,["bool"]);const h=e.slice(1),S=Xt(x.args[0],h,r),P=Xt(x.args[1],h,r);return y(S,P)}case"MAP":{const h=s(0,["list","map","option"])[0],S=e.slice(1),P=h.prim==="map"?{prim:"pair",args:h.args}:h.args[0],w=Xt(x.args[0],[V(P,{t:null,v:E(c(h),"elt")}),...S],r);if("failed"in w){if(!("prim"in w.failed)||w.failed.prim!=="never")throw new Ke(x,e,`${x.prim}: FAIL is not allowed in MAP`);return{failed:w.failed,level:w.level+1}}if(w.length<1)throw new Ke(x,e,`${x.prim}: function must return a value`);return l(w.slice(1),S),h.prim==="list"?[U({prim:"list",args:[w[0]]}),...S]:h.prim==="map"?[U({prim:"map",args:[h.args[0],w[0]]}),...S]:[U({prim:"option",args:[w[0]]}),...S]}case"ITER":{q({});const h=s(0,["set","list","map"])[0],S=e.slice(1),P=h.prim==="map"?{prim:"pair",args:h.args}:h.args[0],w=Xt(x.args[0],[V(P,{t:null,v:E(c(h),"elt")}),...S],r);return"failed"in w?{failed:w.failed,level:w.level+1}:(l(w,S),S)}case"LOOP":{q({}),s(0,["bool"]);const h=e.slice(1),S=Xt(x.args[0],h,r);return"failed"in S?{failed:S.failed,level:S.level+1}:(l(S,[{prim:"bool"},...h]),h)}case"LOOP_LEFT":{q({});const h=s(0,["or"])[0],S=e.slice(1),P=Xt(x.args[0],[V(h.args[0],{t:null,v:E(c(h),"left")}),...S],r);return"failed"in P?{failed:P.failed,level:P.level+1}:(l(P,[h,...S]),[V(h.args[1],{t:null,v:q({v:1}).v}),...S])}case"DIP":{q({});const h=x.args.length===2?parseInt(x.args[0].int,10):1;s(h-1,null);const S=e.slice(0,h),P=e.slice(h),w=x.args.length===2?Xt(x.args[1],P,r):Xt(x.args[0],P,r);return"failed"in w?{failed:w.failed,level:w.level+1}:[...S,...w]}case"CREATE_CONTRACT":{const h=q({v:2}),S=s(0,["option"],["mutez"],null);if(lt(S[0].args[0])!=="key_hash")throw new Ke(x,e,`${x.prim}: key hash expected: ${lt(S[0].args[0])}`);L(S[2])&&(sm(x.args[0]),En(ri(x.args[0],"storage").args[0],S[2]));const P=(b=h.v)===null||b===void 0?void 0:b.map(w=>w!=="@"?[w]:void 0);return[V({prim:"operation"},{v:P==null?void 0:P[0]}),V({prim:"address",[Nc]:{prim:"contract",args:[ri(x.args[0],"parameter").args[0]]}},{v:P==null?void 0:P[1]}),...e.slice(3)]}case"PUSH":return Et(x.args[0]),vn(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[U(x.args[0]),...e];case"EMPTY_SET":return Et(x.args[0]),d(x.args[0]),[V({prim:"set",args:x.args},q({t:1,v:1})),...e];case"EMPTY_MAP":return Et(x.args[0]),d(x.args[0]),Et(x.args[1]),[V({prim:"map",args:x.args},q({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return Et(x.args[0]),d(x.args[0]),Et(x.args[1]),z(x.args[0]),[V({prim:"big_map",args:x.args},q({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{Et(x.args[0]),Et(x.args[1]);const h=[x.args[0]];x.prim==="LAMBDA_REC"&&h.push({prim:"lambda",args:[x.args[0],x.args[1]]});const S=Xt(x.args[2],h,Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in S)return{failed:S.failed,level:S.level+1};if(S.length!==1)throw new Ke(x,e,`${x.prim}: function must return a value`);return f(x.args[1],S[0]),[U({prim:"lambda",args:[x.args[0],x.args[1]]}),...e]}case"LEVEL":return[U({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[U({prim:"nat"}),...e];case"VOTING_POWER":return s(0,["key_hash"]),[U({prim:"nat"}),...e.slice(1)];case"TICKET":{const h=s(0,null,["nat"])[0];return d(h),xo(n,Bi.PtLimaPtL)?[V({prim:"ticket",args:[h]},q({t:1,v:1})),...e.slice(2)]:[U({prim:"option",args:[V({prim:"ticket",args:[h]},q({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const h=mn("pair",s(0,["pair"])[0]);if(lt(h.args[0])!=="ticket")throw new Ke(x,e,`${x.prim}: ticket expected: ${lt(h.args[0])}`);return f(h.args[0],h.args[1]),[U({prim:"option",args:[V(h.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const h=s(0,["ticket"],["pair"]),S=mn("pair",h[1]);if(lt(S.args[0])!=="nat")throw new Ke(x,e,`${x.prim}: nat expected: ${lt(S.args[0])}`);return f(S.args[0],S.args[1]),[U({prim:"option",args:[{prim:"pair",args:[V(h[0],{t:null}),V(h[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const h=q({v:2}),S=s(0,["ticket"])[0],P=(g=h.v)===null||g===void 0?void 0:g.map(w=>w!=="@"?[w]:void 0);return[V({prim:"pair",args:[{prim:"address"},V(S.args[0],{t:null}),{prim:"nat"}]},{v:P==null?void 0:P[0]}),V(S,{v:P==null?void 0:P[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const h=s(0,["list"])[0].args[0];if(!as(h))throw new Ke(x,e,`${x.prim}: pair expected: ${lt(h)}`);const S=mn("pair",h);if(lt(S.args[0])!=="bls12_381_g1")throw new Ke(x,e,`${x.prim}: bls12_381_g1 expected: ${lt(S.args[0])}`);if(lt(S.args[1])!=="bls12_381_g2")throw new Ke(x,e,`${x.prim}: bls12_381_g2 expected: ${lt(S.args[1])}`);return[U({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[V({prim:"sapling_state",args:[x.args[0]]},q({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const h=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(h[0].args[0].int,10)!==parseInt(h[1].args[0].int,10))throw new Ke(x,e,`${x.prim}: sapling memo size mismatch: ${h[0].args[0].int} != ${h[1].args[0].int}`);return xo(n,Bi.PtJakarta)?[U({prim:"option",args:[{prim:"pair",args:[{prim:"int"},V(h[1],{t:null})]}]}),...e.slice(2)]:[U({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},V(h[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[U({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const h=s(0,null,["address"]);return D(h[0]),[U({prim:"option",args:[x.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[U({prim:"nat"}),...e];case"EMIT":{const h=q({f:1,t:1});if(x.args){const S=s(0,null);return f(S[0],x.args[0]),[V({prim:"operation"},h),...e.slice(1)]}return[V({prim:"operation"},h),...e.slice(1)]}default:throw new $r(x,`unexpected instruction: ${x.prim}`)}})(i);if((r==null?void 0:r.traceCallback)!==void 0){const x={op:i,in:e,out:T};r.traceCallback(x)}return T}function ri(t,e){for(const r of t)if(r.prim===e)return r;throw new $r(t,`missing contract section: ${e}`)}function Z8(t){const e={};for(const r of t)r.prim==="view"&&(e[r.args[0].string]=r);return e}function im(t){if(Array.isArray(t)){for(const e of t)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function jd(t,e){e=e||"%default";const r=Tf(t).find(n=>n[0]===e);return r!==void 0?r[1]:e==="%default"?im(t)?ri(t,"parameter").args[0]:t:null}function ex(t){return Array.isArray(t)||t.prim==="or"}function Tf(t){if(im(t)){const e=ri(t,"parameter"),r=Tf(e.args[0]),n=Ho(e);return n.f?[[n.f[0],e.args[0]],...r]:r}if(ex(t)){const e=If(t),r=n=>{const i=Ho(e[n]);if(lt(e[n])==="or"){const s=Tf(e[n]);return i.f?[[i.f[0],e[n]],...s]:s}return i.f?[[i.f[0],e[n]]]:[]};return[...r(0),...r(1)]}return[]}function sm(t,e){const r=(c,l,f,d)=>{Et(c,!0),Et(l);const O={prim:"pair",args:[Object.assign(Object.assign({},c),{annots:["@parameter"]}),Object.assign(Object.assign({},l),{annots:["@storage"]})]},L=Xt(d,[O],Object.assign(Object.assign({},e),{contract:t}));if("failed"in L)return L;try{rm(L,[f])}catch(D){throw D instanceof $r?new Ke(d,L,D.message):D}return L},n=ri(t,"parameter").args[0],i=ri(t,"storage").args[0],s=ri(t,"code").args[0],a=r(n,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},s);for(const c of Object.values(Z8(t)))r(c.args[1],i,c.args[2],c.args[3]);return a}function om(t,e,r){Et(e),vn(t,e,r||null)}function tx(t,e,r){for(const n of e)Et(n);if((r==null?void 0:r.contract)!==void 0)for(const n of["parameter","storage"]){const i=ri(r.contract,n).args[0];Et(i)}return Xt(t,e,r||null)}function rx(t,e,r){try{return om(t,e,r),!0}catch{return!1}}class Kh{constructor(e,r){this.contract=e,this.ctx=Object.assign({contract:e},r),this.output=sm(e,this.ctx)}static parse(e,r){const n=new Fs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new M8("empty contract");if(Zv(i))return new Kh(i,r)}static parseTypeExpression(e,r){const n=new Fs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new L8("empty type expression");if(Ni(i))return Et(i),i}static parseDataExpression(e,r){const n=new Fs(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new C8("empty data expression");if(Hs(i))return i;throw void 0}section(e){return ri(this.contract,e)}entryPoints(){return Tf(this.contract)}entryPoint(e){return jd(this.contract,e)}assertDataValid(e,r){om(e,r,this.ctx)}isDataValid(e,r){return rx(e,r,this.ctx)}assertParameterValid(e,r){const n=this.entryPoint(e||void 0);if(n===null)throw new B8(e==null?void 0:e.toString());this.assertDataValid(r,n)}isParameterValid(e,r){try{return this.assertParameterValid(e,r),!0}catch{return!1}}functionType(e,r){return tx(e,r,this.ctx)}}new Kh([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const m1=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),Rt=(t,e=8)=>t.toString(16).padStart(e,"0"),Hh=31;var Y;(function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.SMART_ROLLUP_ADDRESS="smart_rollup_address",t.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",t.VALUE="value",t.PADDED_BYTES="padded_bytes",t.SMART_ROLLUP_MESSAGE="smart_rollup_message",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_ENDORSEMENT="endorsement",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.BURN_LIMIT="burn_limit",t.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",t.TX_ROLLUP_ID="tx_rollup_id",t.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_DRAIN_DELEGATE="drain_delegate",t.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.PVM_KIND="pvm_kind",t.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(Y||(Y={}));const Mn={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT"},nx=(()=>{const t={};return Object.keys(Mn).forEach(e=>{t[Mn[e]]=e}),t})(),Gd={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message"},y1=(()=>{const t={};return Object.keys(Gd).forEach(e=>{const r=typeof e=="string"?parseInt(e,10):e;t[Gd[r]]=Rt(r,2)}),t})(),Of={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit"},E1=(()=>{const t={};return Object.keys(Of).forEach(e=>{t[Of[e]]=e}),t})();class ix extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBlockHashError"}}class _1 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidOperationSchemaError"}}class am extends Error{constructor(e){super(`Oversized entrypoint: ${e}. The maximum length of entrypoint is ${Hh}`),this.entrypoint=e,this.name="OversizedEntryPointError"}}class sx extends Error{constructor(e){super(`The ballot value '${e}' is invalid`),this.ballotValue=e,this.name="InvalidBallotValueError"}}class ox extends Error{constructor(e){super(`Failed to decode ballot value ${e}`),this.ballotValue=e,this.name="DecodeBallotValueError"}}class cm extends Error{constructor(e){super(`The hex string '${e}' is invalid`),this.hexString=e,this.name="InvalidHexStringError"}}class ax extends Error{constructor(e){super(`Failed to encode michelson value '${e}'`),this.value=e,this.name="UnexpectedMichelsonValueError"}}class fm extends Error{constructor(e){super(e),this.message=e,this.name="OperationDecodingError"}}class cx extends Error{constructor(e){super(e),this.message=e,this.name="OperationEncodingError"}}class fx extends Error{constructor(e){super(`The operation '${e}' is unsupported`),this.op=e,this.name="UnsupportedOperationError"}}class ux extends Error{constructor(e){super(`The Pvm "${e}" is not supported`),this.pvm=e,this.name="UnsupportedPvmKindError"}}class lx extends Error{constructor(e){super(`The encoded Pvm ${e} is not supported`),this.pvm=e,this.name="DecodePvmKindError"}}class dx extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class um extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class Tn{constructor(e,r=0){this.arr=e,this.offset=r}static fromHexString(e){const r=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const n=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(i=>parseInt(i,16)));return new Tn(n)}else throw new cm(r)}consume(e){const r=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,r}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,r){return new Tn(this.arr.slice(e,r))}}const hx=t=>"prim"in t,px=t=>"bytes"in t&&typeof t.bytes=="string",gx=t=>"string"in t&&typeof t.string=="string",bx=t=>"int"in t&&typeof t.int=="string",vx=t=>{const e=ms(t.code),r=ms(t.storage);return`${Rt(e.length/2,8)}${e}${Rt(r.length/2,8)}${r}`},mx=t=>{const e=Xr(t),r=Xr(t);return{code:ys(new Tn(e)),storage:ys(new Tn(r))}},ms=t=>{if(Array.isArray(t)){const e=t.map(n=>ms(n)).join(""),r=e.length/2;return`02${Rt(r)}${e}`}else{if(hx(t))return Rx(t);if(px(t))return Ex(t);if(gx(t))return wx(t);if(bx(t))return xx(t)}throw new ax(JSON.stringify(t))},ys=t=>{const e=t.consume(1);switch(e[0]){case 10:return _x(t);case 1:return Ax(t);case 0:return Sx(t);case 2:{const r=new Tn(Xr(t)),n=[];for(;r.length()>0;)n.push(ys(r));return n}default:return Ix(t,e)}},Xr=(t,e=4)=>{const r=t.consume(e),n=parseInt(ge.Buffer.from(r).toString("hex"),16);return t.consume(n)},yx=(t,e=4)=>{const r=[];let n=t;for(;n.length();){const i=n.consume(e),s=parseInt(ge.Buffer.from(i).toString("hex"),16);r.push(n.consume(s)),n=n.slice(s+e)}return r},Ex=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new cm(t.bytes);const e=t.bytes.length/2;return`0a${Rt(e)}${t.bytes}`},_x=t=>{const e=Xr(t);return{bytes:ge.Buffer.from(e).toString("hex")}},wx=t=>{const e=ge.Buffer.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${Rt(r)}${e}`},Ax=t=>{const e=Xr(t);return{string:ge.Buffer.from(e).toString("utf8")}},xx=({int:t})=>{const e=new ye(t,10),r=e.toString(2)[0]==="-"?"1":"0",n=e.toString(2).replace(/-/g,""),i=n.length<=6?6:(n.length-6)%7?n.length+7-(n.length-6)%7:n.length,o=n.padStart(i,"0").match(/\d{6,7}/g).reverse();return o[0]=r+o[0],`00${o.map((c,l)=>parseInt((l===o.length-1?"0":"1")+c,2).toString(16).padStart(2,"0")).join("")}`},Sx=t=>{let e=t.consume(1)[0];const r=[],n=1<<7;for(;e&n;)r.push(e),e=t.consume(1)[0];r.push(e);const i=!!(1<<6&r[0]);r[0]=r[0]&127;const s=r.map((a,c)=>a.toString(2).slice(c===0?-6:-7).padStart(c===0?6:7,"0")).reverse();let o=new ye(s.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},Rx=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,n=Rt(Math.min(2*r+e+3,9),2),i=nx[t.prim];let s=(t.args||[]).map(a=>ms(a)).join("");const o=Array.isArray(t.annots)?Px(t.annots):"";return(t.prim==="LAMBDA"||t.prim==="LAMBDA_REC")&&r&&(s=Rt(s.length/2)+s+Rt(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=o===""?Rt(s.length/2)+s+Rt(0):Rt(s.length/2)+s),t.prim==="view"&&t.args&&(s=Rt(s.length/2)+s+Rt(0)),`${n}${i}${s}${o}`},Ix=(t,e)=>{const r=(e[0]-3)%2===1;let n=Math.floor((e[0]-3)/2);const i=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Mn[i]};if((Mn[i]==="LAMBDA"||Mn[i]==="LAMBDA_REC")&&t.consume(4),Mn[i]==="view")return n!=0?Tx(t,s):s;let o,a;(Mn[i]==="pair"||Mn[i]==="Pair")&&n>2&&(o=Ox(t),n=0,a=w1(t));const c=new Array(n).fill(0).map(()=>ys(t));return(Mn[i]==="LAMBDA"||Mn[i]==="LAMBDA_REC")&&t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&a[0]!==""?s.annots=a:r&&(s.annots=w1(t)),s},Tx=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>ys(t)),t.consume(4),e),Ox=t=>{const e=new Tn(Xr(t)),r=[];for(;e.length()>0;)r.push(ys(e));return r},Px=t=>{const e=t.map(n=>ge.Buffer.from(n,"utf8").toString("hex")).join("20"),r=e.length/2;return`${Rt(r)}${e}`},w1=t=>{const e=t.consume(4),r=parseInt(ge.Buffer.from(e).toString("hex"),16),n=t.consume(r);return ge.Buffer.from(n).toString("hex").split("20").map(s=>ge.Buffer.from(s,"hex").toString("utf8"))},yr=t=>e=>Ma(ge.Buffer.from(yv(e,vr[t]))),Or=t=>e=>{const r=e.consume(dv[t]);return ds(r,vr[t])},Nx=Or(se.TZ1),Mx=Or(se.B),Fh=t=>{const e=t.consume(1);if(e[0]===0)return Or(se.TZ1)(t);if(e[0]===1)return Or(se.TZ2)(t);if(e[0]===2)return Or(se.TZ3)(t)},Lx=yr(se.B),Cx=yr(se.TZ1),A1=t=>t?"ff":"00",lm=t=>yr(se.P)(t),dm=t=>Or(se.P)(t),Bx=t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(dm(t));return e},kx=t=>Rt(32*t.length)+t.map(e=>lm(e)).join(""),Dx=t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new sx(t)}},Ux=t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new ox(e[0].toString())}},Kx=t=>{switch(t){case"arith":return"00";case"wasm_2_0_0":return"01";default:throw new ux(t)}},Hx=t=>{const e=t.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";default:throw new lx(e[0].toString())}},Fx=t=>t?A1(!0)+jh(t):A1(!1),jx=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<4;n++){const i=(4-(n+1))*8;r.push((e&255<<i)>>i)}return ge.Buffer.from(r).toString("hex")},Gx=t=>{const e=t.consume(4);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},Vx=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<2;n++){const i=(2-(n+1))*8;r.push((e&255<<i)>>i)}return ge.Buffer.from(r).toString("hex")},qx=t=>{const e=t.consume(2);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},$x=t=>t.consume(1)[0]===255,zx=t=>{if($x(t))return Fh(t)},jh=t=>{switch(t.substring(0,3)){case se.TZ1:return"00"+yr(se.TZ1)(t);case se.TZ2:return"01"+yr(se.TZ2)(t);case se.TZ3:return"02"+yr(se.TZ3)(t);case se.TZ4:return"03"+yr(se.TZ4)(t);default:throw new xh(t)}},Wx=t=>{switch(t.substring(0,4)){case se.EDPK:return"00"+yr(se.EDPK)(t);case se.SPPK:return"01"+yr(se.SPPK)(t);case se.P2PK:return"02"+yr(se.P2PK)(t);default:throw new hv(t)}},Xx=t=>{switch(t.substring(0,3)){case se.TZ1:case se.TZ2:case se.TZ3:case se.TZ4:return"00"+jh(t);case se.KT1:return"01"+yr(se.KT1)(t)+"00";default:throw new ft(t)}},Jx=t=>{if(t.substring(0,3)!==se.SR1)throw new dx(t);return yr(se.SR1)(t)},Yx=t=>{if(t.substring(0,3)===se.KT1)return"01"+yr(se.KT1)(t)+"00";throw new To(t)},Qx=t=>{switch(t.consume(1)[0]){case 0:return Or(se.EDPK)(t);case 1:return Or(se.SPPK)(t);case 2:return Or(se.P2PK)(t);default:throw new hv(t.toString())}},Zx=t=>{if(t.substring(0,4)===se.SRC1)return yr(se.SRC1)(t);throw new um(t)},eS=t=>{switch(t.consume(1)[0]){case 0:return Fh(t);case 1:{const r=Or(se.KT1)(t);return t.consume(1),r}default:throw new ft(t.toString())}},tS=t=>{const e=Or(se.SR1)(t);if(e.substring(0,3)!==se.SR1)throw new ft(e);return e},rS=t=>{if(t.consume(1)[0]===1){const r=Or(se.KT1)(t);return t.consume(1),r}throw new To(t.toString())},nS=t=>{const e=Or(se.SRC1)(t);if(e.substring(0,4)!==se.SRC1)throw new um(e);return e},hm=t=>{const e=[];let r=new ye(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;)if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}else{let n=r.mod(128);r=r.minus(n),r=r.dividedBy(128),n=n.plus(128),e.push(n.toString(16))}return e.join("")},pm=t=>{let e=0;for(;e<t.length()&&t.get(e)&128;)e+=1;let r=new ye(0);for(let n=e;n>=0;n-=1){const i=t.get(n)&127;r=r.multipliedBy(128),r=r.plus(i)}return t.consume(e+1),new ye(r).toString()},iS=t=>{const e=Rt(t.consume(1)[0],2);if(e in Of)return Of[e];{const r=Xr(t,1),n=ge.Buffer.from(r).toString("utf8");if(n.length>Hh)throw new am(n);return n}},sS=t=>{if(t.consume(1)[0]!==0){const r=iS(t),n=Xr(t),i=ys(new Tn(n));return{entrypoint:r,value:i}}},oS=t=>{if(t in E1)return`${E1[t]}`;if(t.length>Hh)throw new am(t);return`ff${ms({string:t}).slice(8)}`},aS=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=oS(t.entrypoint),r=ms(t.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${n}${r}`},cS=t=>{const e=ms(t);return`${Rt(e.length/2)}${e}`},fS=t=>{const e=Xr(t);return ys(new Tn(e))},uS=yr(se.VH),lS=Or(se.VH),dS=t=>`${ms({string:t}).slice(2)}`,hS=t=>{const e=Xr(t);return ge.Buffer.from(e).toString("utf8")},pS=t=>"",gS=t=>({}),bS=yr(se.TXR1),vS=Or(se.TXR1),mS=t=>`${Rt(t.length/2)}${t}`,yS=t=>{const e=Xr(t);return ge.Buffer.from(e).toString("hex")},ES=t=>t?`ff${hm(t)}`:"00",_S=t=>{const e=t.consume(1);if(ge.Buffer.from(e).toString("hex")!=="00")return pm(t)},wS=(t,e=8)=>`${Rt(t.length/2,e)}${t}`,AS=t=>{const e=Xr(t);return ge.Buffer.from(e).toString("hex")},xS=t=>{const e=t.reduce((r,n)=>r+`${Rt(n.length/2)}${n}`,"");return`${Rt(e.length/2)}${e}`},SS=t=>{const e=Xr(t);return yx(new Tn(e)).map(n=>ge.Buffer.from(n).toString("hex"))},gm={branch:Y.BRANCH,contents:[Y.OPERATION]},Gh={pkh:Y.TZ1,secret:Y.SECRET},Vh={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,public_key:Y.PUBLIC_KEY},qh={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,delegate:Y.DELEGATE},$h={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,amount:Y.ZARITH,destination:Y.ADDRESS,parameters:Y.PARAMETERS},zh={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,balance:Y.ZARITH,delegate:Y.DELEGATE,script:Y.SCRIPT},Wh={source:Y.PKH,period:Y.INT32,proposal:Y.PROPOSAL,ballot:Y.BALLOT_STATEMENT},Xh={slot:Y.INT16,level:Y.INT32,round:Y.INT32,block_payload_hash:Y.BLOCK_PAYLOAD_HASH},Jh={level:Y.INT32,nonce:Y.RAW},Yh={source:Y.PKH,period:Y.INT32,proposals:Y.PROPOSAL_ARR},Qh={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,value:Y.VALUE},Zh={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,ticket_contents:Y.VALUE,ticket_ty:Y.VALUE,ticket_ticketer:Y.ADDRESS,ticket_amount:Y.ZARITH,destination:Y.ADDRESS,entrypoint:Y.ENTRYPOINT},e0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,tx_rollup_origination:Y.TX_ROLLUP_ORIGINATION_PARAM},t0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,rollup:Y.TX_ROLLUP_ID,content:Y.TX_ROLLUP_BATCH_CONTENT,burn_limit:Y.BURN_LIMIT},r0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,amount:Y.ZARITH,destination:Y.SMART_CONTRACT_ADDRESS},n0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,pk:Y.PUBLIC_KEY},i0={consensus_key:Y.PKH,delegate:Y.PKH,destination:Y.PKH},s0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,pvm_kind:Y.PVM_KIND,kernel:Y.PADDED_BYTES,origination_proof:Y.PADDED_BYTES,parameters_ty:Y.VALUE},o0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,message:Y.SMART_ROLLUP_MESSAGE},a0={source:Y.PKH,fee:Y.ZARITH,counter:Y.ZARITH,gas_limit:Y.ZARITH,storage_limit:Y.ZARITH,rollup:Y.SMART_ROLLUP_ADDRESS,cemented_commitment:Y.SMART_ROLLUP_COMMITMENT_HASH,output_proof:Y.PADDED_BYTES},RS=t=>e=>{if(!(e.kind in t)||!(e.kind in y1))throw new ji(e.kind);return y1[e.kind]+t[e.kind](e)},IS=t=>e=>{const r=e.consume(1),n=Gd[r[0]];if(n===void 0)throw new fx(r[0].toString());const i=t[n](e);if(typeof i!="object")throw new fm("Decoded invalid operation");return Object.assign({kind:n},i)},Kt=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(r&&Array.isArray(o)){const a=t[o[0]],c=r[s];if(!Array.isArray(c))throw new cx(`Expected value to be Array ${JSON.stringify(c)}`);return i+c.reduce((l,f)=>l+a(f),"")}else{const a=t[o];return i+a(r[s])}},""),Ht=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(Array.isArray(o)){const a=t[o[0]],c=[],l=r.length();for(;r.length()>0;)if(c.push(a(r)),l===r.length())throw new fm("Unable to decode value");return Object.assign(Object.assign({},i),{[s]:c})}else{const a=t[o],c=a(r);return typeof c<"u"?Object.assign(Object.assign({},i),{[s]:c}):Object.assign({},i)}},{}),Ce={[Y.SECRET]:t=>m1(t.consume(20)),[Y.RAW]:t=>m1(t.consume(32)),[Y.TZ1]:Nx,[Y.BRANCH]:Mx,[Y.ZARITH]:pm,[Y.PUBLIC_KEY]:Qx,[Y.PKH]:Fh,[Y.DELEGATE]:zx,[Y.INT32]:Gx,[Y.SCRIPT]:mx,[Y.BALLOT_STATEMENT]:Ux,[Y.PROPOSAL]:dm,[Y.PROPOSAL_ARR]:Bx,[Y.PARAMETERS]:sS,[Y.ADDRESS]:eS,[Y.SMART_ROLLUP_ADDRESS]:tS,[Y.SMART_CONTRACT_ADDRESS]:rS,[Y.SMART_ROLLUP_COMMITMENT_HASH]:nS,[Y.VALUE]:fS,[Y.INT16]:qx,[Y.BLOCK_PAYLOAD_HASH]:lS,[Y.ENTRYPOINT]:hS,[Y.TX_ROLLUP_ORIGINATION_PARAM]:gS,[Y.TX_ROLLUP_ID]:vS,[Y.TX_ROLLUP_BATCH_CONTENT]:yS,[Y.BURN_LIMIT]:_S,[Y.PVM_KIND]:Hx,[Y.PADDED_BYTES]:AS,[Y.SMART_ROLLUP_MESSAGE]:SS};Ce[Y.OPERATION]=IS(Ce);Ce[Y.OP_ACTIVATE_ACCOUNT]=t=>Ht(Ce)(Gh)(t);Ce[Y.OP_DELEGATION]=t=>Ht(Ce)(qh)(t);Ce[Y.OP_TRANSACTION]=t=>Ht(Ce)($h)(t);Ce[Y.OP_ORIGINATION]=t=>Ht(Ce)(zh)(t);Ce[Y.OP_BALLOT]=t=>Ht(Ce)(Wh)(t);Ce[Y.OP_ENDORSEMENT]=t=>Ht(Ce)(Xh)(t);Ce[Y.OP_SEED_NONCE_REVELATION]=t=>Ht(Ce)(Jh)(t);Ce[Y.OP_PROPOSALS]=t=>Ht(Ce)(Yh)(t);Ce[Y.OP_REVEAL]=t=>Ht(Ce)(Vh)(t);Ce[Y.OP_REGISTER_GLOBAL_CONSTANT]=t=>Ht(Ce)(Qh)(t);Ce[Y.OP_TRANSFER_TICKET]=t=>Ht(Ce)(Zh)(t);Ce[Y.OP_TX_ROLLUP_ORIGINATION]=t=>Ht(Ce)(e0)(t);Ce[Y.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>Ht(Ce)(t0)(t);Ce[Y.OP_INCREASE_PAID_STORAGE]=t=>Ht(Ce)(r0)(t);Ce[Y.OP_UPDATE_CONSENSUS_KEY]=t=>Ht(Ce)(n0)(t);Ce[Y.OP_DRAIN_DELEGATE]=t=>Ht(Ce)(i0)(t);Ce[Y.OP_SMART_ROLLUP_ORIGINATE]=t=>Ht(Ce)(s0)(t);Ce[Y.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Ht(Ce)(o0)(t);Ce[Y.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Ht(Ce)(a0)(t);Ce[Y.MANAGER]=Ht(Ce)(gm);const Be={[Y.SECRET]:t=>t,[Y.RAW]:t=>t,[Y.TZ1]:Cx,[Y.BRANCH]:Lx,[Y.ZARITH]:hm,[Y.PUBLIC_KEY]:Wx,[Y.PKH]:jh,[Y.DELEGATE]:Fx,[Y.SCRIPT]:vx,[Y.BALLOT_STATEMENT]:Dx,[Y.PROPOSAL]:lm,[Y.PROPOSAL_ARR]:kx,[Y.INT32]:jx,[Y.PARAMETERS]:aS,[Y.ADDRESS]:Xx,[Y.SMART_ROLLUP_ADDRESS]:Jx,[Y.SMART_CONTRACT_ADDRESS]:Yx,[Y.SMART_ROLLUP_COMMITMENT_HASH]:Zx,[Y.VALUE]:cS,[Y.INT16]:Vx,[Y.BLOCK_PAYLOAD_HASH]:uS,[Y.ENTRYPOINT]:dS,[Y.TX_ROLLUP_ORIGINATION_PARAM]:pS,[Y.TX_ROLLUP_ID]:bS,[Y.TX_ROLLUP_BATCH_CONTENT]:mS,[Y.BURN_LIMIT]:ES,[Y.PVM_KIND]:Kx,[Y.PADDED_BYTES]:wS,[Y.SMART_ROLLUP_MESSAGE]:xS};Be[Y.OPERATION]=RS(Be);Be[Y.OP_ACTIVATE_ACCOUNT]=t=>Kt(Be)(Gh)(t);Be[Y.OP_DELEGATION]=t=>Kt(Be)(qh)(t);Be[Y.OP_TRANSACTION]=t=>Kt(Be)($h)(t);Be[Y.OP_ORIGINATION]=t=>Kt(Be)(zh)(t);Be[Y.OP_BALLOT]=t=>Kt(Be)(Wh)(t);Be[Y.OP_ENDORSEMENT]=t=>Kt(Be)(Xh)(t);Be[Y.OP_SEED_NONCE_REVELATION]=t=>Kt(Be)(Jh)(t);Be[Y.OP_PROPOSALS]=t=>Kt(Be)(Yh)(t);Be[Y.OP_REVEAL]=t=>Kt(Be)(Vh)(t);Be[Y.OP_REGISTER_GLOBAL_CONSTANT]=t=>Kt(Be)(Qh)(t);Be[Y.OP_TRANSFER_TICKET]=t=>Kt(Be)(Zh)(t);Be[Y.OP_TX_ROLLUP_ORIGINATION]=t=>Kt(Be)(e0)(t);Be[Y.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>Kt(Be)(t0)(t);Be[Y.OP_INCREASE_PAID_STORAGE]=t=>Kt(Be)(r0)(t);Be[Y.OP_UPDATE_CONSENSUS_KEY]=t=>Kt(Be)(n0)(t);Be[Y.OP_DRAIN_DELEGATE]=t=>Kt(Be)(i0)(t);Be[Y.OP_SMART_ROLLUP_ORIGINATE]=t=>Kt(Be)(s0)(t);Be[Y.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Kt(Be)(o0)(t);Be[Y.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Kt(Be)(a0)(t);Be[Y.MANAGER]=Kt(Be)(gm);const bm={activate_account:Gh,reveal:Vh,delegation:qh,transaction:$h,origination:zh,ballot:Wh,endorsement:Xh,seed_nonce_revelation:Jh,proposals:Yh,register_global_constant:Qh,transfer_ticket:Zh,tx_rollup_origination:e0,tx_rollup_submit_batch:t0,increase_paid_storage:r0,update_consensus_key:n0,drain_delegate:i0,smart_rollup_originate:s0,smart_rollup_add_messages:o0,smart_rollup_execute_outbox_message:a0},TS=(t,e)=>e.filter(r=>!t.includes(r)),OS=(t,e)=>t.filter(r=>r!==e),PS=t=>Object.keys(bm).includes(t),NS=t=>{const e=t.kind,r=Object.keys(t),n=OS(r,"kind"),i=Object.keys(bm[e]);return TS(n,i)};var Vd;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Vd||(Vd={}));const MS=Vd.PtMumbai2;function LS(t,e){return{encoder:Be[t],decoder:r=>{const n=Tn.fromHexString(r);return Ce[t](n)}}}class vm{constructor(e=MS){this.protocolHash=e,this.codec=LS(Y.MANAGER,this.protocolHash)}forge(e){if($5(e.branch)!==we.VALID)throw new ix(`The block hash ${e.branch} is invalid`);for(const n of e.contents){if(!PS(n.kind))throw new ji(n.kind);const i=NS(n);if(i.length===1){if(n.kind==="delegation"&&i[0]==="delegate")continue;if(n.kind==="origination"&&i[0]==="delegate")continue;if(n.kind==="transaction"&&i[0]==="parameters")continue;if(n.kind==="tx_rollup_submit_batch"&&i[0]==="burn_limit")continue;throw new _1(`Missing properties: ${i.join(", ").toString()}`)}else if(i.length>1)throw new _1(`Missing properties: ${i.join(", ").toString()}`)}const r=this.codec.encoder(e).toLowerCase();return Promise.resolve(r)}parse(e){return Promise.resolve(this.codec.decoder(e))}}new vm;function bn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Q(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Lc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function CS(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function BS(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const n=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new Jo(`Http error response: (${t.status}) ${n}`,t.status,t.statusText,n,t.url)}else return t}class kS{constructor(e){this.context=e}inject(e){return Q(this,void 0,void 0,function*(){let r;try{r=yield this.context.rpc.injectOperation(e)}catch(n){const i=". You may want to use --replace to provide adequate fee and replace it";throw n instanceof Jo&&n.message.includes(i)?BS(n,i):n}return r})}}class Cc extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}class qd{publicKey(){return Q(this,void 0,void 0,function*(){throw new Cc})}publicKeyHash(){return Q(this,void 0,void 0,function*(){throw new Cc})}secretKey(){return Q(this,void 0,void 0,function*(){throw new Cc})}sign(e,r){return Q(this,void 0,void 0,function*(){throw new Cc})}}function mm(t){return new St(e=>(t.on("data",r=>{e.next(r)}),t.on("error",r=>{e.error(r)}),t.on("close",()=>{e.complete()}),()=>{t.close()}))}var Es;(function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL=1100]="REVEAL"})(Es||(Es={}));var _s;(function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=374]="REVEAL"})(_s||(_s={}));var ws;(function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"})(ws||(ws={}));const DS=250;var kt;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(kt||(kt={}));kt.Pt24m4xi,kt.PsBABY5H,kt.PsBabyM1,kt.PsCARTHA,kt.PsDELPH1,kt.PtEdo2Zk,kt.PsFLorena,kt.PtGRANADs,kt.PtHangz2,kt.PsiThaCa,kt.Psithaca2,kt.PtJakart2,kt.PtKathman,kt.PtLimaPtL,kt.PtMumbai2,kt.ProtoALpha;var x1;(function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.ITHACANET2="NetXnHfVqm9iesp",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH",t.MUMBAINET="NetXQw6nWSnrJ5t",t.MUMBAINET2="NetXgbcrNtXD2yA"})(x1||(x1={}));class ym extends Error{constructor(e,r,n){super(`${e} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractMethodName=e,this.sigs=r,this.args=n,this.name="Invalid parameters error"}}class US extends Error{constructor(e){super(`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`),this.source=e,this.name="Invalid delegation source error"}}class Pf extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidCodeParameter"}}class Em extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidInitParameter"}}class KS extends Error{constructor(e,r,n,i){super(`Unable to encode the parameter of the view: ${e}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractViewName=e,this.sigs=r,this.args=n,this.originalError=i,this.name="Invalid view parameters error",this.cause=i}}class HS extends Error{constructor(e,r,n,i){super(e),this.message=e,this.viewName=r,this.failWith=n,this.originalError=i,this.name="ViewSimulationError"}}const FS=t=>{if(jS(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},jS=t=>{try{JSON.parse(t)}catch{return!1}return!0};class S1 extends Error{constructor(e){super(`${e} Please configure the context of the view execution in the executeView method.`),this.info=e,this.name="InvalidViewSimulationContext"}}class _m extends Error{constructor(e){super(e),this.message=e,this.name="RevealOperationError"}}class GS extends Error{constructor(e){super(e),this.message=e,this.name="OriginationParameterError"}}class VS extends Error{constructor(e){super(e),this.message=e,this.name="IntegerError"}}const Go=({code:t,init:e,balance:r="0",delegate:n,storage:i,fee:s=_s.ORIGINATION,gasLimit:o=Es.ORIGINATION,storageLimit:a=ws.ORIGINATION,mutez:c=!1})=>Q(void 0,void 0,void 0,function*(){if(i!==void 0&&e!==void 0)throw new GS("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new Pf("Wrong code parameter type, expected an array",t);let l;if(i!==void 0){const O=t.find(D=>"prim"in D&&D.prim==="storage");if((O==null?void 0:O.args)===void 0)throw new Pf("The storage section is missing from the script",t);l=new Vr(O.args[0]).Encode(i)}else if(e!==void 0&&typeof e=="object")l=e;else throw new Em("Wrong init parameter type, expected JSON Michelson",e);const f={code:t,storage:l};if(isNaN(Number(r)))throw new VS(`Unexpected Invalid Integer ${r}`);const d={kind:ce.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:c?r.toString():Ih("tz","mutez",r).toString(),script:f};return n&&(d.delegate=n),d}),Vo=({to:t,amount:e,parameter:r,fee:n=_s.TRANSFER,gasLimit:i=Es.TRANSFER,storageLimit:s=ws.TRANSFER,mutez:o=!1})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.TRANSACTION,fee:n,gas_limit:i,storage_limit:s,amount:o?e.toString():Ih("tz","mutez",e).toString(),destination:t,parameters:r}}),qo=({delegate:t,source:e,fee:r=_s.DELEGATION,gasLimit:n=Es.DELEGATION,storageLimit:i=ws.DELEGATION})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.DELEGATION,source:e,fee:r,gas_limit:n,storage_limit:i,delegate:t}}),wm=({fee:t=_s.DELEGATION,gasLimit:e=Es.DELEGATION,storageLimit:r=ws.DELEGATION},n)=>Q(void 0,void 0,void 0,function*(){return{kind:ce.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:n}}),As=({fee:t=_s.REVEAL,gasLimit:e=Es.REVEAL,storageLimit:r=ws.REVEAL},n,i)=>Q(void 0,void 0,void 0,function*(){return{kind:ce.REVEAL,fee:t,public_key:i,source:n,gas_limit:e,storage_limit:r}}),Xa=({value:t,source:e,fee:r,gasLimit:n,storageLimit:i})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:n,storage_limit:i,source:e}}),Ja=({source:t,fee:e,gasLimit:r,storageLimit:n})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.TX_ROLLUP_ORIGINATION,fee:e,gas_limit:r,storage_limit:n,source:t,tx_rollup_origination:{}}}),Ya=({content:t,rollup:e,source:r,fee:n,gasLimit:i,storageLimit:s})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.TX_ROLLUP_SUBMIT_BATCH,fee:n,gas_limit:i,storage_limit:s,source:r,content:t,rollup:e}}),Qa=({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:n,destination:i,entrypoint:s,source:o,fee:a,gasLimit:c,storageLimit:l})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.TRANSFER_TICKET,fee:a,gas_limit:c,storage_limit:l,source:o,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:n,destination:i,entrypoint:s}}),$o=({source:t,fee:e,gasLimit:r,storageLimit:n,amount:i,destination:s})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:n,amount:i,destination:s}}),Am=({consensus_key:t,delegate:e,destination:r})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}}),xm=({source:t,proposal:e,ballot:r})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.BALLOT,source:t,proposal:e,ballot:r}}),Sm=({source:t,proposals:e})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.PROPOSALS,source:t,proposals:e}}),c0=({source:t,fee:e,gasLimit:r,storageLimit:n,pk:i})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:i}}),Za=({source:t,fee:e,gasLimit:r,storageLimit:n,message:i})=>Q(void 0,void 0,void 0,function*(){return{kind:ce.SMART_ROLLUP_ADD_MESSAGES,source:t,fee:e,gas_limit:r,storage_limit:n,message:i}}),Bc=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),R1=(t,e)=>{if(Array.isArray(t)){const r=t.find(n=>n.kind===e);if(r&&qS(r,e))return r}},qS=(t,e)=>t.kind===e,$d=t=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,Nf=t=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,f0=t=>"metadata"in t,oa=t=>f0(t)&&"operation_result"in t.metadata,$S=t=>f0(t)&&"internal_operation_results"in t.metadata,zS=t=>"with"in t;class Rm extends Error{constructor(e,r){super(),this.errors=e,this.errorDetails=r,this.name="TezosOperationError";const n=e[e.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,zS(n)&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class WS extends Error{constructor(e){super("Preapply returned an unexpected result"),this.result=e,this.name="TezosPreapplyFailureError"}}const ni=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].contents.length;i++){const s=e[n].contents[i];oa(s)&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(o=>r.push(o.result)))}return r},zo=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let n=[];for(let i=0;i<r.length;i++)for(let s=0;s<r[i].contents.length;s++){const o=r[i].contents[s];if(f0(o)&&(oa(o)&&o.metadata.operation_result.status===e&&(n=n.concat(o.metadata.operation_result.errors||[])),$S(o)&&Array.isArray(o.metadata.internal_operation_results)))for(const a of o.metadata.internal_operation_results)"result"in a&&a.result.status===e&&(n=n.concat(a.result.errors||[]))}return n};class XS extends Error{constructor(e){super(e),this.message=e,this.name="OriginationOperationError"}}class $l extends Error{constructor(e){super(e),this.message=e,this.name="InvalidEstimateValueError"}}class Im extends Error{constructor(e){super(e),this.message=e,this.name="InvalidConfirmationCountError"}}class JS extends Error{constructor(e){super(e),this.message=e,this.name="ConfirmationUndefinedError"}}class YS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidFilterExpressionError"}}class js extends Error{constructor(e){super(e),this.message=e,this.name="RPCResponseError"}}class Ar{constructor(e,r,n,i){if(this.hash=e,this.raw=r,this.results=n,this.context=i,this._pollingConfig$=new za(1),this.currentHead$=this._pollingConfig$.pipe(Qn(s=>new yu(s).pipe(kv(s.timeout*1e3,Mh(new Error("Confirmation polling timed out"))))),Qn(()=>Mv(()=>mm(this.context.stream.subscribeBlock("head"))).pipe(Qn(s=>{var o,a;const c=(a=(o=this.lastHead)===null||o===void 0?void 0:o.header.level)!==null&&a!==void 0?a:s.header.level-1;return Ch(c+1,s.header.level-c-1).pipe(pc(l=>this.context.readProvider.getBlock(l)),Cv(s))}),xf(s=>this.lastHead=s))),Yp({refCount:!0})),this.confirmed$=this.currentHead$.pipe(qs(s=>{for(let o=3;o>=0;o--)s.operations[o].forEach(a=>{a.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),Af(s=>s!==void 0),Pi(),Yp()),this._foundAt=Number.POSITIVE_INFINITY,mv(this.hash)!==we.VALID)throw new pv(this.hash);this.confirmed$.pipe(Pi(),Bh(()=>ia(Sv))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>oa(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,r){return Q(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new Im("Confirmation count must be at least 1");const{defaultConfirmationCount:n,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:r||i});const s=e!==void 0?e:n;return new Promise((o,a)=>{this.confirmed$.pipe(Qn(()=>this.currentHead$),Af(c=>c.header.level-this._foundAt>=s-1),Pi()).subscribe(c=>{o(this._foundAt+(s-1))},a)})})}}class QS extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}getOriginatedContractAddresses(){const e=this.results.filter(n=>n.kind==="origination");let r=[];for(const n of e)n.metadata.operation_result.originated_contracts&&(r=[...r,...n.metadata.operation_result.originated_contracts]);return r}get status(){return this.results.filter(e=>Tm.indexOf(e.kind)!==-1).map(e=>oa(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),new ye(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ni({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ni({contents:this.results}),"paid_storage_size_diff"))}get errors(){return zo({contents:this.results})}}class xu{constructor(e){this.context=e}get rpc(){return this.context.rpc}get signer(){return this.context.signer}isRevealOpNeeded(e,r){return Q(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return Q(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let r=!1;for(const n of e)Nf(n)&&(r=!0);return r}prepareOperation({operation:e,source:r},n){return Q(this,void 0,void 0,function*(){const i={};let s=[];const o=this.context.readProvider.getBlockHash("head~2"),a=this.context.readProvider.getNextProtocol("head");Array.isArray(e)?s=[...e]:s=[e];const c=n||(yield this.signer.publicKeyHash());let l=Promise.resolve(void 0),f=Promise.resolve(void 0);s.find(F=>Q(this,void 0,void 0,function*(){if(F.kind==="ballot"||F.kind==="proposals")try{f=this.rpc.getCurrentPeriod()}catch(j){throw new js(`Failed to get the current voting period index: ${JSON.stringify(j)}`)}}));for(let F=0;F<s.length;F++)if(Nf(s[F])||s[F].kind==="reveal"){l=this.context.readProvider.getCounter(c,"head");break}const[d,O,L,D]=yield Promise.all([o,a,l,f]),z=parseInt(L||"0",10);(!i[c]||i[c]<z)&&(i[c]=z);const q=F=>({counter:`${++i[c]}`,fee:typeof F.fee>"u"?"0":`${F.fee}`,gas_limit:typeof F.gas_limit>"u"?"0":`${F.gas_limit}`,storage_limit:typeof F.storage_limit>"u"?"0":`${F.storage_limit}`}),V=F=>({source:typeof F.source>"u"?r||c:F.source}),W=(F=>F.map(j=>{switch(j.kind){case ce.ACTIVATION:case ce.DRAIN_DELEGATE:return Object.assign({},j);case ce.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},j),{balance:typeof j.balance<"u"?`${j.balance}`:"0"}),V(j)),q(j));case ce.TRANSACTION:{const G=Object.assign(Object.assign(Object.assign(Object.assign({},j),{amount:typeof j.amount<"u"?`${j.amount}`:"0"}),V(j)),q(j));if(G.source.toLowerCase().startsWith("kt1"))throw new Sh(`KT1 addresses are not supported as source since ${kt.PsBabyM1}`);return G}case ce.REVEAL:case ce.DELEGATION:case ce.REGISTER_GLOBAL_CONSTANT:case ce.TX_ROLLUP_ORIGINATION:case ce.TX_ROLLUP_SUBMIT_BATCH:case ce.UPDATE_CONSENSUS_KEY:case ce.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},j),V(j)),q(j));case ce.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},j),{ticket_amount:`${j.ticket_amount}`}),V(j)),q(j));case ce.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},j),{amount:`${j.amount}`}),V(j)),q(j));case ce.BALLOT:if(D===void 0)throw new js("Failed to get the current voting period index");return Object.assign(Object.assign({},j),{period:D==null?void 0:D.voting_period.index});case ce.PROPOSALS:if(D===void 0)throw new js("Failed to get the current voting period index");return Object.assign(Object.assign({},j),{period:D==null?void 0:D.voting_period.index});default:throw new ji(j.kind)}}))(s);return{opOb:{branch:d,contents:W,protocol:O},counter:z}})}forge({opOb:{branch:e,contents:r,protocol:n},counter:i}){return Q(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:e,contents:r}),opOb:{branch:e,contents:r,protocol:n},counter:i}})}simulate(e){return Q(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(e),op:e,context:this.context.clone()}})}estimate(e,r){var{fee:n,gasLimit:i,storageLimit:s}=e,o=bn(e,["fee","gasLimit","storageLimit"]);return Q(this,void 0,void 0,function*(){let a=n,c=i,l=s;if(a&&a%1!==0)throw new $l(`Fee value must not be a decimal: ${a}`);if(c&&c%1!==0)throw new $l(`Gas Limit value must not be a decimal: ${c}`);if(l&&l%1!==0)throw new $l(`Storage Limit value must not be a decimal: ${l}`);if(n===void 0||i===void 0||s===void 0){const f=yield r(Object.assign({fee:n,gasLimit:i,storageLimit:s},o));a===void 0&&(a=f.suggestedFeeMutez),c===void 0&&(c=f.gasLimit),l===void 0&&(l=f.storageLimit)}return{fee:a,gasLimit:c,storageLimit:l}})}signAndInject(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=r.sbytes,e.opOb.signature=r.prefixSig;const n=[],i=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(i))throw new WS(i);for(let o=0;o<i.length;o++)for(let a=0;a<i[o].contents.length;a++)n.push(i[o].contents[a]);const s=zo(i);if(s.length)throw new Rm(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:n,context:this.context.clone()}})}}const Tm=[ce.ACTIVATION,ce.ORIGINATION,ce.TRANSACTION,ce.DELEGATION];class u0 extends xu{constructor(e,r){super(e),this.estimator=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==we.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:ce.TRANSACTION},e)),this}withTransferTicket(e){if(ct(e.destination)!==we.VALID)throw new ft(e.destination,"param destination");return this.operations.push(Object.assign({kind:ce.TRANSFER_TICKET},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.source&&ct(e.source)!==we.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==we.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:ce.DELEGATION},e)),this}withActivation({pkh:e,secret:r}){if(Rh(e)!==we.VALID)throw new xh(e);return this.operations.push({kind:ce.ACTIVATION,pkh:e,secret:r}),this}withOrigination(e){return this.operations.push(Object.assign({kind:ce.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:ce.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:ce.INCREASE_PAID_STORAGE},e)),this}withTxRollupOrigination(e){return this.operations.push(Object.assign({kind:ce.TX_ROLLUP_ORIGINATION},e)),this}withSmartRollupAddMessages(e){return this.operations.push(Object.assign({kind:ce.SMART_ROLLUP_ADD_MESSAGES},e)),this}withTxRollupSubmitBatch(e){return this.operations.push(Object.assign({kind:ce.TX_ROLLUP_SUBMIT_BATCH},e)),this}getRPCOp(e){return Q(this,void 0,void 0,function*(){switch(e.kind){case ce.TRANSACTION:return Vo(Object.assign({},e));case ce.ORIGINATION:return Go(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case ce.DELEGATION:return qo(Object.assign({},e));case ce.ACTIVATION:return Object.assign({},e);case ce.REGISTER_GLOBAL_CONSTANT:return Xa(Object.assign({},e));case ce.INCREASE_PAID_STORAGE:return $o(Object.assign({},e));case ce.TX_ROLLUP_ORIGINATION:return Ja(Object.assign({},e));case ce.TX_ROLLUP_SUBMIT_BATCH:return Ya(Object.assign({},e));case ce.TRANSFER_TICKET:return Qa(Object.assign({},e));case ce.SMART_ROLLUP_ADD_MESSAGES:return Za(Object.assign({},e));default:throw new ji(e.kind)}})}with(e){for(const r of e)switch(r.kind){case ce.TRANSACTION:this.withTransfer(r);break;case ce.ORIGINATION:this.withOrigination(r);break;case ce.DELEGATION:this.withDelegation(r);break;case ce.ACTIVATION:this.withActivation(r);break;case ce.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case ce.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;case ce.TX_ROLLUP_ORIGINATION:this.withTxRollupOrigination(r);break;case ce.TX_ROLLUP_SUBMIT_BATCH:this.withTxRollupSubmitBatch(r);break;case ce.TRANSFER_TICKET:this.withTransferTicket(r);break;case ce.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(r);break;default:throw new ji(r.kind)}return this}toPrepare(){return Q(this,void 0,void 0,function*(){const e=yield this.signer.publicKeyHash(),r=yield this.signer.publicKey(),n=yield this.estimator.batch(this.operations),i=yield this.isRevealOpNeeded(this.operations,e);let s=i?1:0;const o=[];for(const a of this.operations){if($d(a)){const c=yield this.estimate(a,()=>Q(this,void 0,void 0,function*(){return n[s]}));o.push(yield this.getRPCOp(Object.assign(Object.assign({},a),c)))}else o.push(Object.assign({},a));s++}if(i){const a={kind:ce.REVEAL},c=yield this.estimate(a,()=>Q(this,void 0,void 0,function*(){return n[0]}));o.unshift(yield As(Object.assign({},c),e,r))}return o})}send(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.signer.publicKey(),i=yield this.estimator.batch(this.operations),s=yield this.isRevealOpNeeded(this.operations,r);let o=s?1:0;const a=[];for(const z of this.operations){if($d(z)){const q=yield this.estimate(z,()=>Q(this,void 0,void 0,function*(){return i[o]}));a.push(yield this.getRPCOp(Object.assign(Object.assign({},z),q)))}else a.push(Object.assign({},z));o++}if(s){const z={kind:ce.REVEAL},q=yield this.estimate(z,()=>Q(this,void 0,void 0,function*(){return i[0]}));a.unshift(yield As(Object.assign({},q),r,n))}const c=e&&e.source||r,l=yield this.prepareOperation({operation:a,source:c}),f=yield this.forge(l),{hash:d,context:O,forgedBytes:L,opResponse:D}=yield this.signAndInject(f);return new QS(d,a,c,L,D,O)})}}class ZS{constructor(e,r){this.context=e,this.estimator=r}batch(e){const r=new u0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}const eR=(t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP});const n=ni({contents:t});let i=new ye(0),s=new ye(0),o=new ye(0),a=new ye(0),c=new ye(0),l=new ye(0);return n.forEach(f=>{o=o.plus(f.fee||0),a=a.plus(Array.isArray(f.originated_contracts)?f.originated_contracts.length*r:0),c=c.plus("allocated_destination_contract"in f?e:0),i=i.plus(f.consumed_milligas||0),l=l.plus("paid_storage_size_diff"in f&&Number(f.paid_storage_size_diff)||0)}),s=s.plus(c).plus(a).plus(l),{totalFee:o,totalMilliGas:i,totalGas:i.dividedBy(1e3),totalStorage:s,totalAllocationBurn:c,totalOriginationBurn:a,totalPaidStorageDiff:l,totalStorageBurn:new ye(s.multipliedBy(DS))}},tR=60;class aa{constructor(e,r,n){if(this.opHash=e,this.context=r,this._newHead$=n,this._operationResult=new za(1),this._includedInBlock=new za(1),this._included=!1,this.newHead$=this._newHead$.pipe(Qn(i=>{var s,o;const a=(o=(s=this.lastHead)===null||s===void 0?void 0:s.header.level)!==null&&o!==void 0?o:i.header.level-1;return Ch(a+1,i.header.level-a-1).pipe(pc(c=>this.context.readProvider.getBlock(c)),Cv(i))}),xf(i=>this.lastHead=i),Ud(1),qa()),this.confirmed$=this.newHead$.pipe(qs(i=>{for(const s of i.operations)for(const o of s)if(o.hash===this.opHash)return this._included=!0,this._includedInBlock.next(i),this._operationResult.next(o.contents),i}),Af(i=>typeof i<"u"),Pi(),Ud(1),qa()),mv(this.opHash)!==we.VALID)throw new pv(this.opHash);this.confirmed$.pipe(Pi(),Bh(()=>ia(void 0))).subscribe()}operationResults(){return Q(this,void 0,void 0,function*(){return this._operationResult.pipe(Pi()).toPromise()})}receipt(){return Q(this,void 0,void 0,function*(){return eR(yield this.operationResults())})}getCurrentConfirmation(){return Q(this,void 0,void 0,function*(){return this._included?zp([this._includedInBlock,so(this.context.readProvider.getBlock("head"))]).pipe(qs(([e,r])=>r.header.level-e.header.level+1),Pi()).toPromise():0})}isInCurrentBranch(e="head"){return Q(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(e),n=yield this._includedInBlock.pipe(Pi()).toPromise(),i=r-n.header.level;if(i<=0)return!0;const s=Math.min(n.header.level+i,n.header.level+tR);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(n.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new Im("Confirmation count must be at least 1");const{defaultConfirmationCount:r}=this.context.config,n=e!==void 0?e:r;if(n===void 0)throw new JS("Default confirmation count can not be undefined!");return zp([this._includedInBlock,this.newHead$]).pipe(Lv(([,i],[,s])=>i.hash===s.hash),qs(([i,s])=>({block:s,expectedConfirmation:n,currentConfirmation:s.header.level-i.header.level+1,completed:s.header.level-i.header.level>=n-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),SA(({completed:i})=>!i,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}class rR extends aa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r,this.getOriginatedContractAddresses=()=>Q(this,void 0,void 0,function*(){const s=(yield this.operationResults()).filter(a=>a.kind==="origination");let o=[];for(const a of s)a.metadata.operation_result.originated_contracts&&(o=[...o,...a.metadata.operation_result.originated_contracts]);return o})}revealOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}status(){return Q(this,void 0,void 0,function*(){return this._included?(yield this.operationResults()).filter(r=>Tm.indexOf(r.kind)!==-1).map(r=>oa(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown":"pending"})}}class nR extends aa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}delegationOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.DELEGATION)})}status(){return Q(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class iR extends aa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}increasePaidStorageOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.INCREASE_PAID_STORAGE)})}status(){return Q(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}class sR extends aa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}originationOperation(){return Q(this,void 0,void 0,function*(){const e=yield this.operationResults();return R1(e,ce.ORIGINATION)})}revealOperation(){return Q(this,void 0,void 0,function*(){const e=yield this.operationResults();return R1(e,ce.REVEAL)})}status(){return Q(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return Q(this,void 0,void 0,function*(){const e=yield this.originationOperation(),r=((e==null?void 0:e.metadata.operation_result.originated_contracts)||[])[0];return this.context.wallet.at(r)})}}class oR extends aa{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.REVEAL)})}transactionOperation(){return Q(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===ce.TRANSACTION)})}status(){return Q(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}function aR(t){return function(r){return new yu(null).pipe(kv(t,Mh(new Error("Confirmation polling timed out"))),_u(()=>r))}}const cR=(t,e,r)=>t.pipe(aR(e.config.confirmationPollingTimeoutSecond*1e3),Ud(1),qa());class fR{constructor(e){this.context=e,this.sharedHeadObs=Mv(()=>mm(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return Q(this,void 0,void 0,function*(){return cR(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,r=1){return so(this.context.readProvider.getBlock(e)).pipe(Qn(n=>r===1?ia(n):Ch(n.header.level,r-1).pipe(yA(n),pc(i=>Q(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof i=="number"?i:i.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:e}){return Q(this,void 0,void 0,function*(){const r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(yield this.createNewHeadObservable()),wf(...r)})}createOperation(e,r={}){return Q(this,void 0,void 0,function*(){return new aa(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(e,r={}){return Q(this,void 0,void 0,function*(){return new rR(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(e,r={}){return Q(this,void 0,void 0,function*(){return new oR(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(e,r={}){return Q(this,void 0,void 0,function*(){return new nR(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(e,r={}){return Q(this,void 0,void 0,function*(){return new sR(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createIncreasePaidStorageOperation(e,r={}){return Q(this,void 0,void 0,function*(){return new iR(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class uR extends xu{constructor(e){super(e)}getBalance(e){return Q(this,void 0,void 0,function*(){if(ct(e)!==we.VALID)throw new ft(e);return this.context.readProvider.getBalance(e,"head")})}getDelegate(e){return Q(this,void 0,void 0,function*(){if(ct(e)!==we.VALID)throw new ft(e);return this.context.readProvider.getDelegate(e,"head")})}activate(e,r){return Q(this,void 0,void 0,function*(){if(Rh(e)!==we.VALID)throw new xh(e);const n={kind:ce.ACTIVATION,pkh:e,secret:r},i=yield this.prepareOperation({operation:[n],source:e}),s=yield this.forge(i),o=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new Ar(yield this.rpc.injectOperation(o),Object.assign(Object.assign({},s),{opbytes:o}),[],this.context.clone())})}}const kc=100,lR=1,dR=.1,I1=100;class hr{constructor(e,r,n,i,s=kc){this._milligasLimit=e,this._storageLimit=r,this.opSize=n,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const e=Math.max(Number(this._storageLimit),0);return e>0?e:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+I1)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+I1)*dR+Number(this.opSize)*lR}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(kc+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+kc*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),kc)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let r=0,n=0,i=0,s=0,o;return e.forEach(a=>{r+=a.milligasLimit,n+=a.storageLimit,i+=a.opSize,s=Math.max(a.minimalFeePerStorageByteMutez,s),a.baseFeeMutez&&(o=o?o+a.baseFeeMutez:a.baseFeeMutez)}),new hr(r,n,i,s,o)}static createArrayEstimateInstancesFromProperties(e){return e.map(r=>new hr(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class T1 extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}const zt=(t,e)=>({fee:typeof t.fee>"u"?e.fee:t.fee,gasLimit:typeof t.gasLimit>"u"?e.gasLimit:t.gasLimit,storageLimit:typeof t.storageLimit>"u"?e.storageLimit:t.storageLimit}),hR="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class pR extends xu{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128}getKeys(){return Q(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}getAccountLimits(e,r,n){return Q(this,void 0,void 0,function*(){const i=yield this.context.readProvider.getBalance(e,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:c}=r;return{fee:0,gasLimit:n?Math.floor(this.ajustGasForBatchOperation(o,s,n).toNumber()):s.toNumber(),storageLimit:Math.floor(ye.min(i.dividedBy(c),a).toNumber())}})}ajustGasForBatchOperation(e,r,n){return ye.min(r,e.div(n+1))}getEstimationPropertiesFromOperationContent(e,r,n,i){const s=ni({contents:[e]});let o=0,a=0;return s.forEach(c=>{a+="originated_contracts"in c&&typeof c.originated_contracts<"u"?c.originated_contracts.length*this.ORIGINATION_STORAGE:0,a+="allocated_destination_contract"in c?this.ALLOCATION_STORAGE:0,o+=Number(c.consumed_milligas)||0,a+="paid_storage_size_diff"in c&&Number(c.paid_storage_size_diff)||0,a+="storage_size"in c&&"global_address"in c&&Number(c.storage_size)||0,a+="originated_rollup"in c?i:0}),$d(e)?{milligasLimit:o||0,storageLimit:Number(a||0),opSize:r,minimalFeePerStorageByteMutez:n.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:n.toNumber(),baseFeeMutez:0}}prepareEstimate(e,r,n){return Q(this,void 0,void 0,function*(){const i=yield this.prepareOperation(e,n),{opbytes:s,opOb:{branch:o,contents:a}}=yield this.forge(i),c={operation:{branch:o,contents:a,signature:hR},chain_id:yield this.context.readProvider.getChainId()},{opResponse:l}=yield this.simulate(c),{cost_per_byte:f,tx_rollup_origination_size:d}=r,O=[...zo(l,"backtracked"),...zo(l)];if(O.length)throw new Rm(O,"Error occurred during estimation");let L=1;return Array.isArray(e.operation)&&e.operation.length>1&&(L=l.contents[0].kind==="reveal"?e.operation.length-1:e.operation.length),l.contents.map(D=>this.getEstimationPropertiesFromOperationContent(D,D.kind==="reveal"?this.OP_SIZE_REVEAL/2:s.length/2/L,f,d??0))})}originate(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]);return Q(this,void 0,void 0,function*(){const{publicKeyHash:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Go(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c)))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}transfer(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]);return Q(this,void 0,void 0,function*(){if(ct(s.to)!==we.VALID)throw new ft(s.to);if(s.source&&ct(s.source)!==we.VALID)throw new ft(s.source);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Vo(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}transferTicket(e){var r,{fee:n,storageLimit:i,gasLimit:s}=e,o=bn(e,["fee","storageLimit","gasLimit"]);return Q(this,void 0,void 0,function*(){if(ct(o.destination)!==we.VALID)throw new ft(o.destination,"param destination");if(o.source&&ct(o.source)!==we.VALID)throw new ft((r=o.source)!==null&&r!==void 0?r:"","param source");const a=(yield this.getKeys()).publicKeyHash,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield Qa(Object.assign(Object.assign({},o),zt({fee:n,storageLimit:i,gasLimit:s},l))),d=yield this.isRevealOpNeeded([f],a),O=d?yield this.addRevealOp([f],a):f,L=yield this.prepareEstimate({operation:O,source:a},c,a);return d&&L.shift(),hr.createEstimateInstanceFromProperties(L)})}setDelegate(e){var{fee:r,gasLimit:n,storageLimit:i}=e,s=bn(e,["fee","gasLimit","storageLimit"]);return Q(this,void 0,void 0,function*(){if(s.source&&ct(s.source)!==we.VALID)throw new ft(s.source);if(s.delegate&&ct(s.delegate)!==we.VALID)throw new ft(s.delegate);const o=(yield this.getKeys()).publicKeyHash,a=s.source||o,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield qo(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:i,gasLimit:n},l))),d=yield this.isRevealOpNeeded([f],o),O=d?yield this.addRevealOp([f],o):f,L=yield this.prepareEstimate({operation:O,source:o},c,o);return d&&L.shift(),hr.createEstimateInstanceFromProperties(L)})}batch(e){return Q(this,void 0,void 0,function*(){const{publicKeyHash:r}=yield this.getKeys();let n=[];const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i,e.length);for(const c of e)switch(c.kind){case ce.TRANSACTION:n.push(yield Vo(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.ORIGINATION:n.push(yield Go(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},c),zt(c,s)))));break;case ce.DELEGATION:n.push(yield qo(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.ACTIVATION:n.push(Object.assign(Object.assign({},c),s));break;case ce.REGISTER_GLOBAL_CONSTANT:n.push(yield Xa(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.TX_ROLLUP_ORIGINATION:n.push(yield Ja(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.TX_ROLLUP_SUBMIT_BATCH:n.push(yield Ya(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.TRANSFER_TICKET:n.push(yield Qa(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.INCREASE_PAID_STORAGE:n.push(yield $o(Object.assign(Object.assign({},c),zt(c,s))));break;case ce.SMART_ROLLUP_ADD_MESSAGES:n.push(yield Za(Object.assign(Object.assign({},c),zt(c,s))));break;default:throw new ji(e.kind)}n=(yield this.isRevealOpNeeded(n,r))?yield this.addRevealOp(n,r):n;const a=yield this.prepareEstimate({operation:n,source:r},i,r);return hr.createArrayEstimateInstancesFromProperties(a)})}registerDelegate(e){return Q(this,void 0,void 0,function*(){const r=(yield this.getKeys()).publicKeyHash,n=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.getAccountLimits(r,n),s=yield wm(Object.assign(Object.assign({},e),i),r),o=yield this.isRevealOpNeeded([s],r),a=o?yield this.addRevealOp([s],r):s,c=yield this.prepareEstimate({operation:a,source:r},n,r);return o&&c.shift(),hr.createEstimateInstanceFromProperties(c)})}reveal(e){return Q(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:n}=yield this.getKeys();if(!n)throw new T1;if(yield this.isAccountRevealRequired(r)){const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i),o=yield As(Object.assign(Object.assign({},e),s),r,n),a=yield this.prepareEstimate({operation:o,source:r},i,r);return hr.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]);return Q(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Xa(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}increasePaidStorage(e){return Q(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield $o(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}txRollupOriginate(e){return Q(this,void 0,void 0,function*(){e=e||{};const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Ja(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}txRollupSubmitBatch(e){return Q(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Ya(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}updateConsensusKey(e){return Q(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield c0(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}smartRollupAddMessages(e){return Q(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Za(Object.assign(Object.assign({},s),zt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,O=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&O.shift(),hr.createEstimateInstanceFromProperties(O)})}addRevealOp(e,r){return Q(this,void 0,void 0,function*(){const{publicKey:n}=yield this.getKeys();if(!n)throw new T1;return e.unshift(yield As(Object.assign({fee:_s.REVEAL,gasLimit:Es.REVEAL,storageLimit:ws.REVEAL}),r,yield this.signer.publicKey())),e})}}class O1 extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="delegation"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),this.consumedMilliGas?new ye(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class gR extends Ar{constructor(e,r,n,i,s,o){super(e,n,i,s),this.params=r,this.contractProvider=o;const a=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(a)&&(this.contractAddress=a[0])}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="origination"),r=e&&oa(e)&&e.metadata.operation_result;return r||void 0}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),this.consumedMilliGas?new ye(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,r){return Q(this,void 0,void 0,function*(){if(!this.contractAddress)throw new XS("No contract was originated in this operation");return yield this.confirmation(e,r),this.contractProvider.at(this.contractAddress)})}}class bR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="register_global_constant"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get registeredExpression(){return this.params.value}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),this.consumedMilliGas?new ye(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class vR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get publicKey(){return this.params.public_key}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),new ye(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ni({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ni({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(ni({contents:this.operationResults}),"storage_size"))}get errors(){return zo({contents:this.operationResults})}}class mR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new ye(this.params.amount)}get destination(){return this.params.destination}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),new ye(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ni({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ni({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(ni({contents:this.operationResults}),"storage_size"))}get errors(){return zo({contents:this.operationResults})}}class yR{constructor(e,r,n,i,s,o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}validateArgs(e,r,n){const i=r.ExtractSignatures();if(!i.find(s=>s.length===e.length))throw new ym(n,i,e)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const e=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(e)return e.shift(),e}else{const e=this.parameterSchema.ExtractSignatures();return e.length==1?e[0]:e}}send(e={}){return this.provider instanceof Su?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:So,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class ER{constructor(e,r){this.id=e,this.provider=r}getSaplingDiff(e){return Q(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}class _R{constructor(e,r){this.walletProvider=e,this.context=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==we.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:ce.TRANSACTION},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.delegate&&ct(e.delegate)!==we.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:ce.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:ce.ORIGINATION},e)),this}withIncreasePaidStorage(e){if(ct(e.destination)!==we.VALID)throw new ft(e.destination);return this.operations.push(Object.assign({kind:ce.INCREASE_PAID_STORAGE},e)),this}mapOperation(e){return Q(this,void 0,void 0,function*(){switch(e.kind){case ce.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>Q(this,void 0,void 0,function*(){return e}));case ce.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>Q(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case ce.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>Q(this,void 0,void 0,function*(){return e}));case ce.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>Q(this,void 0,void 0,function*(){return e}));default:throw new ji(e.kind)}})}with(e){for(const r of e)switch(r.kind){case ce.TRANSACTION:this.withTransfer(r);break;case ce.ORIGINATION:this.withOrigination(r);break;case ce.DELEGATION:this.withDelegation(r);break;case ce.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;default:throw new ji(r.kind)}return this}send(){return Q(this,void 0,void 0,function*(){const e=[];for(const n of this.operations)e.push(yield this.mapOperation(n));const r=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(r)})}}class Su{constructor(e){this.context=e,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:e}={}){return Q(this,void 0,void 0,function*(){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(e){return this.walletCommand(()=>Q(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(n)}))}setDelegate(e){if(e.delegate&&ct(e.delegate)!==we.VALID)throw new ft(e.delegate);return this.walletCommand(()=>Q(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>Q(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createDelegationOperation(n)}))}registerDelegate(){return this.walletCommand(()=>Q(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>Q(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(e){if(ct(e.to)!==we.VALID)throw new ft(e.to);return this.walletCommand(()=>Q(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapTransferParamsToWalletParams(()=>Q(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createTransactionOperation(n)}))}increasePaidStorage(e){if(ct(e.destination)!==we.VALID)throw new ft(e.destination);return this.walletCommand(()=>Q(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>Q(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}batch(e){const r=new _R(this.walletProvider,this.context);return Array.isArray(e)&&r.with(e),r}at(e,r=n=>n){return Q(this,void 0,void 0,function*(){if(Oo(e)!==we.VALID)throw new To(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new Pm(e,s,this,this.context.contract,o,n,i);return r(a,this.context)})}}class Om{constructor(e){this.context=e}getPKH(){return Q(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(e){return Q(this,void 0,void 0,function*(){return Bc(yield e(),ce.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return Q(this,void 0,void 0,function*(){return Bc(yield e(),ce.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return Q(this,void 0,void 0,function*(){return Bc(yield e(),ce.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return Q(this,void 0,void 0,function*(){return Bc(yield e(),ce.INCREASE_PAID_STORAGE)})}sendOperations(e){return Q(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}}class wR{constructor(e,r,n,i,s="unit",o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(e={}){return this.provider instanceof Su?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:So,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class AR{constructor(e,r,n,i,s,o="Unit"){this._rpc=e,this._readProvider=r,this._contractAddress=n,this._smartContractViewSchema=i,this._contractStorageType=s,this._args=o}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return Q(this,void 0,void 0,function*(){this.verifyContextExecution(e);const r=yield this._readProvider.getChainId(),n=this.transformArgsToMichelson(),i={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:n,chain_id:r,source:e.viewCaller};return e.source&&(i.payer=e.source),this.executeViewAndDecodeResult(i)})}verifyContextExecution(e){if(e.source&&ct(e.source)!==we.VALID)throw new S1(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||ct(e.viewCaller)!==we.VALID)throw new S1(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new KS(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,r,n){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:n}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((s,o)=>{s.prim in i&&(e[o]=Object(i)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,n):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,n)}),e}executeViewAndDecodeResult(e){return Q(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runScriptView(e)).data}catch(n){const i=FS(n);throw i?new HS(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(i)}`,this._smartContractViewSchema.viewName,i,n):n}return this._smartContractViewSchema.decodeViewResult(r)})}}class xR{constructor(e,r){this.provider=e,this.contractAddress=r}createContractMethodFlatParams(e,r,n,i=!0,s=!1){return new yR(this.provider,this.contractAddress,e,r,n,i,s)}createContractMethodObjectParam(e,r,n,i=!0,s=!1){return new wR(this.provider,this.contractAddress,e,r,n,i,s)}createContractViewObjectParam(e,r,n,i,s){return new AR(e,r,this.contractAddress,n,i,s)}}const So="default";class SR{constructor(e,r,n,i,s,o,a){this.currentContract=e,this.name=r,this.callbackParametersSchema=n,this.parameterSchema=i,this.args=s,this.rpc=o,this.readProvider=a}read(e){return Q(this,void 0,void 0,function*(){if(Oo(e??"")==we.VALID)throw new Sh("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&vv(e)!==we.VALID)throw new D5(e);const r=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const RR=(t,e,r)=>{const n=e.ExtractSignatures();if(!n.find(i=>i.length===t.length))throw new ym(r,n,t)},IR=t=>{let e=!1;if("prim"in t&&t.prim==="pair"&&t.args){const r=t.args[t.args.length-1];"prim"in r&&r.prim==="contract"&&(e=!0)}return e};class Pm{constructor(e,r,n,i,s,o,a){this.address=e,this.script=r,this.storageProvider=i,this.entrypoints=s,this.rpc=o,this.readProvider=a,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new xR(n,e),this.schema=Vr.fromRPCResponse({script:this.script}),this.parameterSchema=Ao.fromRPCResponse({script:this.script}),this.viewSchema=kh.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,o,this.readProvider,this.viewSchema),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,r,n,i){const s=this.parameterSchema,o=Object.keys(r);if(s.isMultipleEntryPoint)o.forEach(c=>{const l=new Ao(r[c]);if(this.methods[c]=function(...f){return e.contractMethodFactory.createContractMethodFlatParams(l,c,f)},this.methodsObject[c]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(l,c,f)},IR(r[c])){const f=function(...d){const O=r[c].args[0],L=new Ao(O),D=r[c].args[1].args[0],z=new Ao(D);return RR(d,L,c),new SR(e,c,z,L,d,n,i)};this.views[c]=f}}),Object.keys(s.ExtractSchema()).filter(c=>Object.keys(r).indexOf(c)===-1).forEach(c=>{this.methods[c]=function(...l){return e.contractMethodFactory.createContractMethodFlatParams(s,c,l,!1,!0)},this.methodsObject[c]=function(l){return e.contractMethodFactory.createContractMethodObjectParam(s,c,l,!1,!0)}});else{const a=this.parameterSchema;this.methods[So]=function(...c){return e.contractMethodFactory.createContractMethodFlatParams(a,So,c,!1)},this.methodsObject[So]=function(c){return e.contractMethodFactory.createContractMethodObjectParam(a,So,c,!1)}}}_initializeOnChainViews(e,r,n,i){const s=this.schema.val;i.forEach(o=>{this.contractViews[o.viewName]=function(a){return e.contractMethodFactory.createContractViewObjectParam(r,n,o,s,a)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(e){return this.storageProvider.getBigMapKey(this.address,e,this.schema)}}class TR{constructor(e,r,n){this.id=e,this.schema=r,this.provider=n}get(e,r){return Q(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,r)}catch(n){if(n instanceof Jo&&n.status===ja.NOT_FOUND)return;throw n}})}getMultipleValues(e,r,n=5){return Q(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),e,this.schema,r,n)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const P1=t=>({big_map:(e,r)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const n=new Vr(r);return new TR(new ye(e.int),n,t)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new ER(new ye(e.int),t)});class OR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.originatedRollup=this.operationResults&&this.operationResults.originated_rollup}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_origination"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),this.consumedMilliGas?new ye(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class PR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_submit_batch"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get content(){return this.params.content}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),this.consumedMilliGas?new ye(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class NR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="ballot");return r||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class MR extends Ar{constructor(e,r,n,i,s){super(e,n,i,s),this.params=r}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="drain_delegate"),r=e&&e.metadata&&e.metadata.balance_updates;return r||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class LR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind===ce.TRANSFER_TICKET),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return ye.config({DECIMAL_PLACES:0,ROUNDING_MODE:ye.ROUND_UP}),this.consumedMilliGas?new ye(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class CR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="increase_paid_storage"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class BR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="proposals");return r||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class kR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="update_consensus_key"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get pk(){return this.params.pk}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class DR extends Ar{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="smart_rollup_add_messages"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get message(){return this.params.message}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class UR extends xu{constructor(e,r){super(e),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol")}getStorage(e,r){return Q(this,void 0,void 0,function*(){if(Oo(e)!==we.VALID)throw new To(e);const n=yield this.context.readProvider.getScript(e,"head");r||(r=n);let i;return Vr.isSchema(r)?i=r:i=Vr.fromRPCResponse({script:r}),i.Execute(n.storage,P1(this))})}getBigMapKey(e,r,n){return Q(this,void 0,void 0,function*(){if(Oo(e)!==we.VALID)throw new To(e);n||(n=(yield this.rpc.getContract(e)).script);let i;Vr.isSchema(n)?i=n:i=Vr.fromRPCResponse({script:n});const s=i.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(e,s);return i.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(e,r,n,i){return Q(this,void 0,void 0,function*(){const{key:s,type:o}=n.EncodeBigMapKey(r),{packed:a}=yield this.context.packer.packData({data:s,type:o}),c=X5(a),l=i?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},i):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},"head");return n.ExecuteOnBigMapValue(l,P1(this))})}getBigMapKeysByID(e,r,n,i,s=5){return Q(this,void 0,void 0,function*(){const o=yield this.getBlockForRequest(r,i),a=new Gr;let c=0,l=[];for(;c<r.length;){const d=r.slice(c,c+s).map(O=>this.getBigMapValueOrUndefined(O,e,n,o));l=[...l,...yield Promise.all(d)],c+=s}for(let f=0;f<l.length;f++)a.set(r[f],l[f]);return a})}getBlockForRequest(e,r){return Q(this,void 0,void 0,function*(){return e.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,r,n,i){return Q(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,e,n,i)}catch(s){if(s instanceof Jo&&s.status===ja.NOT_FOUND)return;throw s}})}getSaplingDiffByID(e,r){return Q(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}addRevealOperationIfNeeded(e,r){return Q(this,void 0,void 0,function*(){if(Nf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimator.reveal();if(s){const o={kind:ce.REVEAL},a=yield this.estimate(o,()=>Q(this,void 0,void 0,function*(){return s}));return n.unshift(yield As(Object.assign({},a),r,i)),n}}return e})}originate(e){return Q(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield Go(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),r))),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s,source:n}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new gR(c,i,f,d,l,this)})}setDelegate(e){return Q(this,void 0,void 0,function*(){if(e.source&&ct(e.source)!==we.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==we.VALID)throw new ft(e.delegate);if(/kt1/i.test(e.source))throw new US(e.source);const r=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield qo(Object.assign(Object.assign({},e),r)),s=e.source||n,o=yield this.addRevealOperationIfNeeded(i,n),a=yield this.prepareOperation({operation:o,source:s}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:O}=yield this.signAndInject(c);return new O1(l,i,s,d,O,f)})}registerDelegate(e){return Q(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield wm(Object.assign(Object.assign({},e),r),n),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new O1(c,i,n,f,d,l)})}transfer(e){return Q(this,void 0,void 0,function*(){if(ct(e.to)!==we.VALID)throw new ft(e.to);if(e.source&&ct(e.source)!==we.VALID)throw new ft(e.source);const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),i=yield Vo(Object.assign(Object.assign({},e),n)),s=e.source||r,o=yield this.addRevealOperationIfNeeded(i,r),a=yield this.prepareOperation({operation:o,source:e.source}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:O}=yield this.signAndInject(c);return new mR(l,i,s,d,O,f)})}transferTicket(e){var r;return Q(this,void 0,void 0,function*(){if(ct(e.destination)!==we.VALID)throw new ft(e.destination,"param destination");if(e.source&&ct(e.source)!==we.VALID)throw new ft(e.source,"param source");const n=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),s=yield Qa(Object.assign(Object.assign({},e),i)),o=(r=e.source)!==null&&r!==void 0?r:n,a=yield this.addRevealOperationIfNeeded(s,n),c=yield this.prepareOperation({operation:a,source:e.source}),l=yield this.forge(c),{hash:f,context:d,forgedBytes:O,opResponse:L}=yield this.signAndInject(l);return new LR(f,s,o,O,L,d)})}reveal(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimator.reveal(e);if(n){const i=yield this.estimate(e,()=>Q(this,void 0,void 0,function*(){return n})),s=yield As(Object.assign({},i),r,yield this.signer.publicKey()),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new vR(c,s,r,f,d,l)}else throw new _m(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),i=yield Xa(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new bR(c,i,r,f,d,l)})}increasePaidStorage(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),i=yield $o(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new CR(c,i,r,f,d,l)})}drainDelegate(e){return Q(this,void 0,void 0,function*(){const r=yield Am(Object.assign({},e)),n=yield this.prepareOperation({operation:r}),i=yield this.forge(n),{hash:s,context:o,forgedBytes:a,opResponse:c}=yield this.signAndInject(i);return new MR(s,r,a,c,o)})}txRollupOriginate(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e||{},this.estimator.txRollupOriginate.bind(this.estimator)),i=yield Ja(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new OR(c,i,r,f,d,l)})}txRollupSubmitBatch(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.txRollupSubmitBatch.bind(this.estimator)),i=yield Ya(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new PR(c,i,r,f,d,l)})}ballot(e){var r;return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==we.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield xm(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new NR(c,s,n,f,d,l)})}proposals(e){var r;return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==we.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield Sm(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new BR(c,s,n,f,d,l)})}updateConsensusKey(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),i=yield c0(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new kR(c,i,r,f,d,l)})}smartRollupAddMessages(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.smartRollupAddMessages.bind(this.estimator)),i=yield Za(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new DR(c,i,r,f,d,l)})}at(e,r=n=>n){return Q(this,void 0,void 0,function*(){if(Oo(e)!==we.VALID)throw new To(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new Pm(e,s,this,this,o,n,i);return r(a,this.context)})}batch(e){const r=new u0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class Nm{constructor(e){this.context=e}getNextProto(){return Q(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return Q(this,void 0,void 0,function*(){return new Fs({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return Q(this,void 0,void 0,function*(){return new Fs({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return Q(this,void 0,void 0,function*(){return new Fs({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return Q(this,void 0,void 0,function*(){const r=e;if(r.code=yield this.formatCodeParam(e.code),e.init)r.init=yield this.formatInitParam(e.init);else if(e.storage){const n=r.code.find(o=>"prim"in o&&o.prim==="storage");if(!(n!=null&&n.args))throw new Pf("The storage section is missing from the script",e.code);const i=new Vr(n.args[0]),s=yield this.findGlobalConstantsHashAndValue(i);if(Object.keys(s).length!==0){const a=new Fs({expandGlobalConstant:s}).parseJSON(n.args[0]),c=new Vr(a);r.init=c.Encode(e.storage)}else r.init=i.Encode(e.storage);delete r.storage}return r})}formatCodeParam(e){return Q(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseScript(e);if(n===null)throw new Pf("Invalid code parameter",e);r=n}else{const n=yield this.parseJSON(e),i=["parameter","storage","code"];r=n.sort((s,o)=>i.indexOf(s.prim)-i.indexOf(o.prim))}return r})}formatInitParam(e){return Q(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseMichelineExpression(e);if(n===null)throw new Em("Invalid init parameter",e);r=n}else r=yield this.parseJSON(e);return r})}findGlobalConstantsHashAndValue(e){return Q(this,void 0,void 0,function*(){const r=e.findToken("constant"),n={};if(r.length!==0)for(const i of r){const s=i.tokenVal.args;if(s){const o=s[0];if(o.string){const a=o.string,c=yield this.context.globalConstantsProvider.getGlobalConstantByHash(a);Object.assign(n,{[a]:c})}}}return n})}}class Mm{constructor(e){this.context=e}packData(e){return Q(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class KR extends Error{constructor(){super("No global constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class Lm{getGlobalConstantByHash(e){return Q(this,void 0,void 0,function*(){throw new KR})}}class Cm{constructor(e){this.rpc=e}getBalance(e,r){return Q(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(r)})})}getDelegate(e,r){return Q(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(r)})})}getNextProtocol(e){return Q(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return Q(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}})}getScript(e,r){return Q(this,void 0,void 0,function*(){const{script:n}=yield this.rpc.getContract(e,{block:String(r)});return n})}getStorage(e,r){return Q(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(r)})})}getBlockHash(e){return Q(this,void 0,void 0,function*(){const{hash:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBlockLevel(e){return Q(this,void 0,void 0,function*(){const{level:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getCounter(e,r){return Q(this,void 0,void 0,function*(){const{counter:n}=yield this.rpc.getContract(e,{block:String(r)});return n||"0"})}getBlockTimestamp(e){return Q(this,void 0,void 0,function*(){const{timestamp:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBigMapValue(e,r){return Q(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(r)})})}getSaplingDiffById(e,r){return Q(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(r)})})}getSaplingDiffByContract(e,r){return Q(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(r)})})}getEntrypoints(e){return Q(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return Q(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.rpc.getManagerKey(e,{block:String(r)});return n&&typeof n=="object"?!!n.key:!!n})}getBlock(e){return Q(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}}const HR=(t,e)=>t.hash===e.opHash,FR=(t,e)=>{switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}},jR=(t,e)=>"kind"in t&&t.kind===e.kind,GR=(t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some(r=>r===e.destination);break;case"transaction":return t.destination===e.destination;default:return!1}},VR=(t,e,r)=>t.kind==="event"?e&&r?t.source===e&&t.tag===r:e&&!r?t.source===e:r?t.tag===r:!0:!1,qR=(t,e)=>"opHash"in e?HR(t,e):"source"in e?FR(t,e):"kind"in e?jR(t,e):"destination"in e?GR(t,e):!1,$R=(t,e)=>{if(Array.isArray(e.and))return e.and.every(r=>zd(t,r));if(Array.isArray(e.or))return e.or.some(r=>zd(t,r));throw new YS("Filter expression must contain either and/or property")},zd=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every(n=>"and"in n||"or"in n?$R(t,n):qR(t,n))};class N1 extends Error{constructor(e){super(e),this.message=e,this.name="UnsupportedEventError"}}class Dc{constructor(e,r=!1,n=Bv()){this.shouldRetry=r,this.operatorFunction=n,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new Uo,e.pipe(wA(this.completed$),xf(i=>{this.call(this.messageListeners,i)},i=>{this.call(this.errorListeners,i)},()=>{this.call(this.closeListeners)}),this.shouldRetry?n:xf(),Bh(()=>$4)).subscribe()}call(e,r){for(const n of e)try{n(r)}catch(i){console.error(i)}}remove(e,r){const n=e.indexOf(r);n!==-1&&e.splice(n,1)}on(e,r){switch(e){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new N1(`Trying to register on an unsupported event: ${e}`)}}off(e,r){switch(e){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new N1(`Trying to unregister on an unsupported event: ${e}`)}}close(){this.completed$.next()}}const zR={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:Bv()},WR=t=>so(t.rpc.getBlock()).pipe(Pi()),XR=t=>pc(e=>new St(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents)zd(Object.assign({hash:i.hash},s),t)&&r.next(Object.assign({hash:i.hash},s));r.complete()})),JR=t=>pc(e=>new St(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents){const a=s.metadata.internal_operation_results;if(a)for(const c of a)VR(c,t==null?void 0:t.address,t==null?void 0:t.tag)&&r.next(Object.assign({opHash:i.hash,blockHash:e.hash,level:e.header.level},c))}r.complete()}));class Wd{constructor(e,r={}){this.context=e,this._config$=new yu(Object.assign(Object.assign({},zR),r)),this.timer$=this._config$.pipe(Jp("pollingIntervalMilliseconds"),Qn(n=>n?Xp(0,n):so(this.getConfirmationPollingInterval()).pipe(Qn(i=>Xp(0,i))))),this.newBlock$=this.timer$.pipe(Qn(()=>WR(this.context)),sA("hash"),gA(),qa())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return Q(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const n=yield this.context.readProvider.getProtocolConstants("head"),s=(n.minimal_block_delay?n.minimal_block_delay.multipliedBy(1e3):n.time_between_blocks?n.time_between_blocks[0].multipliedBy(1e3):new ye(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new Dc(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new Dc(this.newBlock$.pipe(Jp("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new Dc(this.newBlock$.pipe(XR(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new Dc(this.newBlock$.pipe(JR(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class Bm{constructor(e){this.context=e}getNextProto(){return Q(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge({branch:e,contents:r}){return Q(this,void 0,void 0,function*(){return new vm(yield this.getNextProto()).forge({branch:e,contents:r})})}}var Ds;class YR{constructor(e){this.context=e,Ds.set(this,void 0),CS(this,Ds,{})}get rpc(){return this.context.rpc}get signer(){return this.context.signer}get estimate(){return this.context.estimate}get parser(){return this.context.parser}getPkh(){return Q(this,void 0,void 0,function*(){return yield this.context.signer.publicKeyHash()})}getBlockHash(){return Q(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash("head~2")})}getProtocolHash(){return Q(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){var r;return Q(this,void 0,void 0,function*(){return(r=this.context.readProvider.getCounter(e,"head"))!==null&&r!==void 0?r:"0"})}getFee(e,r,n){return(!Lc(this,Ds)[r]||Lc(this,Ds)[r]<n)&&(Lc(this,Ds)[r]=n),{counter:`${++Lc(this,Ds)[r]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,r,n){return{source:typeof e.source>"u"?n||r:e.source}}buildEstimates(e){return{fee:e.suggestedFeeMutez,gasLimit:e.gasLimit,storageLimit:e.storageLimit}}addRevealOperationIfNeeded(e,r){return Q(this,void 0,void 0,function*(){if(Nf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimate.reveal();if(s){const o=this.buildEstimates(s);return n.unshift(yield As(Object.assign({},o),r,i)),n}}return e})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,r,n,i,s){return e.map(o=>{switch(o.kind){case ce.ACTIVATION:case ce.DRAIN_DELEGATE:return Object.assign({},o);case ce.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{balance:typeof o.balance<"u"?`${o.balance}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.TRANSACTION:{const a=Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:typeof o.amount<"u"?`${o.amount}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));if(a.source.toLowerCase().startsWith("kt1"))throw new Sh(`KT1 addresses are not supported as source since ${kt.PsBabyM1}`);return a}case ce.REVEAL:case ce.DELEGATION:case ce.REGISTER_GLOBAL_CONSTANT:case ce.TX_ROLLUP_ORIGINATION:case ce.TX_ROLLUP_SUBMIT_BATCH:case ce.UPDATE_CONSENSUS_KEY:case ce.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},o),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{ticket_amount:`${o.ticket_amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:`${o.amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case ce.BALLOT:if(s===void 0)throw new js("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s==null?void 0:s.voting_period.index});case ce.PROPOSALS:if(s===void 0)throw new js("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s==null?void 0:s.voting_period.index});default:throw new ji(o.kind)}})}reveal(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate.reveal(e);if(n){const i=this.buildEstimates(n),s=yield As(Object.assign({},i),r,yield this.signer.publicKey()),o=this.convertIntoArray(s),a=yield this.getBlockHash(),c=yield this.getProtocolHash(),l=parseInt(yield this.getHeadCounter(r),10),f=this.constructOpContents(o,l,r);return{opOb:{branch:a,contents:f,protocol:c},counter:l}}else throw new _m(`The publicKeyHash '${r}' has already been revealed.`)})}originate(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.originate(e),s=this.buildEstimates(i),o=yield Go(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),s))),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}transaction(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transfer(e),s=this.buildEstimates(i),o=yield Vo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}delegation(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.setDelegate(e),s=this.buildEstimates(i),o=yield qo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}registerGlobalConstant(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.registerGlobalConstant(e),s=this.buildEstimates(i),o=yield Xa(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}txRollupOrigination(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupOriginate(e),s=this.buildEstimates(i),o=yield Ja(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}txRollupSubmitBatch(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupSubmitBatch(e),s=this.buildEstimates(i),o=yield Ya(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}updateConsensusKey(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.updateConsensusKey(e),s=this.buildEstimates(i),o=yield c0(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}increasePaidStorage(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.increasePaidStorage(e),s=this.buildEstimates(i),o=yield $o(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}ballot(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield xm(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new js("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}proposals(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield Sm(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new js("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}drainDelegate(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield Am(Object.assign({},e)),s=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash(),c=parseInt(yield this.getHeadCounter(n),10),l=this.constructOpContents(s,c,n,r);return{opOb:{branch:o,contents:l,protocol:a},counter:c}})}transferTicket(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transferTicket(e),s=this.buildEstimates(i),o=yield Qa(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}smartRollupAddMessages(e,r){return Q(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.smartRollupAddMessages(e),s=this.buildEstimates(i),o=yield Za(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),O=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:O,protocol:f},counter:d}})}batch(e){return Q(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=new u0(this.context,this.estimate);Array.isArray(e)&&n.with(e);const i=yield n.toPrepare(),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10),c=this.constructOpContents(i,a,r);return{opOb:{branch:s,contents:c,protocol:o},counter:a}})}contractCall(e){var r,n,i;return Q(this,void 0,void 0,function*(){const s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=yield this.signer.publicKeyHash(),c=parseInt(yield this.getHeadCounter(a),10),l=e.toTransferParams(),f=yield this.estimate.transfer(l),d=[{kind:ce.TRANSACTION,fee:(r=l.fee)!==null&&r!==void 0?r:f.suggestedFeeMutez,gas_limit:(n=l.gasLimit)!==null&&n!==void 0?n:f.gasLimit,storage_limit:(i=l.storageLimit)!==null&&i!==void 0?i:f.storageLimit,amount:String(l.amount),destination:l.to}],O=this.constructOpContents(d,c,a);return{opOb:{branch:s,contents:O,protocol:o},counter:c}})}}Ds=new WeakMap;const QR={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class Mf{constructor(e,r=new qd,n,i=new yu(Object.assign({},QR)),s,o,a,c,l,f,d,O){this._rpc=e,this._signer=r,this._proto=n,this._config=i,this.providerDecorator=[],this.tz=new uR(this),this.estimate=new pR(this),this.contract=new UR(this,this.estimate),this.prepare=new YR(this),this.batch=new ZS(this,this.estimate),this.wallet=new Su(this),this.withExtensions=()=>{let L=this.clone();return this.providerDecorator.forEach(D=>{L=D(L)}),L},typeof this._rpc=="string"?this._rpcClient=new ef(this._rpc):this._rpcClient=this._rpc,this._forger=s||new Bm(this),this._injector=o||new kS(this),this.operationFactory=new fR(this),this._walletProvider=c||new Om(this),this._parser=l||new Nm(this),this._packer=a||new Mm(this),this._globalConstantsProvider=f||new Lm,this._readProvider=d||new Cm(this._rpcClient),this._stream=O||new Wd(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(e=[]){return Q(this,void 0,void 0,function*(){if(this._proto)return e.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return e.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof qd)}clone(){return new Mf(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const ZR={commitHash:"c050a62135022aa2e61ba6ef72a98f9c89f1682c",version:"16.0.1"};class e9{constructor(e){this._rpc=e,this._options={},this.format=Ih,typeof this._rpc=="string"?this._rpcClient=new ef(this._rpc):this._rpcClient=this._rpc,this._context=new Mf(e),this._wallet=new Su(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:e,stream:r,signer:n,protocol:i,config:s,forger:o,wallet:a,packer:c,globalConstantsProvider:l,readProvider:f,parserProvider:d}){this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(o),this.setWalletProvider(a),this.setPackerProvider(c),this.setGlobalConstantsProvider(l),this.setReadProvider(f),this.setParserProvider(d),this._context.proto=i,s&&this._context.setPartialConfig(s)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new qd,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new ef(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const r=this.getFactory(Bm)();this._options.forger=r,this._context.forger=r}}setStreamProvider(e){if(typeof e=="string"){const r=new Wd(new Mf(new ef(e)));this._options.stream=r,this._context.stream=r}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const r=this.getFactory(Wd)();this._options.stream=r,this._context.stream=r}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const r=this.getFactory(Om)();this._options.wallet=r,this._context.walletProvider=r}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const r=this.getFactory(Mm)();this._context.packer=r,this._options.packer=r}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const r=new Lm;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const r=e||new Cm(this._context.rpc);this._options.readProvider=r,this._context.readProvider=r}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const r=new Nm(this._context);this._context.parser=r,this._options.parserProvider=r}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(r=>r.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...r)=>new e(this._context,...r)}getVersionInfo(){return ZR}}function l0(t){return Object.keys(t)}var Xn;(function(t){t.PENDING="pending",t.RESOLVED="resolved",t.REJECTED="rejected"})(Xn||(Xn={}));const M1=()=>{throw new Error("ExposedPromise not initialized yet.")};class Jt{constructor(){this._resolve=M1,this._reject=M1,this._status=Xn.PENDING,this._promise=new Promise((e,r)=>{this._resolve=n=>{this.isSettled()||(this._promiseResult=n,e(n),this._status=Xn.RESOLVED)},this._reject=n=>{this.isSettled()||(this._promiseError=n,r(n),this._status=Xn.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const r=new Jt;return r.resolve(e),r}static reject(e){const r=new Jt;return r.reject(e),r}isPending(){return this.status===Xn.PENDING}isResolved(){return this.status===Xn.RESOLVED}isRejected(){return this.status===Xn.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var Wo={},km={},ec={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=eo,r=kr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(F){const j=new Float64Array(16);if(F)for(let G=0;G<F.length;G++)j[G]=F[G];return j}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(F){let j=1;for(let G=0;G<16;G++){let E=F[G]+j+65535;j=Math.floor(E/65536),F[G]=E-j*65536}F[0]+=j-1+37*(j-1)}function a(F,j,G){const E=~(G-1);for(let y=0;y<16;y++){const T=E&(F[y]^j[y]);F[y]^=T,j[y]^=T}}function c(F,j){const G=n(),E=n();for(let y=0;y<16;y++)E[y]=j[y];o(E),o(E),o(E);for(let y=0;y<2;y++){G[0]=E[0]-65517;for(let x=1;x<15;x++)G[x]=E[x]-65535-(G[x-1]>>16&1),G[x-1]&=65535;G[15]=E[15]-32767-(G[14]>>16&1);const T=G[15]>>16&1;G[14]&=65535,a(E,G,1-T)}for(let y=0;y<16;y++)F[2*y]=E[y]&255,F[2*y+1]=E[y]>>8}function l(F,j){for(let G=0;G<16;G++)F[G]=j[2*G]+(j[2*G+1]<<8);F[15]&=32767}function f(F,j,G){for(let E=0;E<16;E++)F[E]=j[E]+G[E]}function d(F,j,G){for(let E=0;E<16;E++)F[E]=j[E]-G[E]}function O(F,j,G){let E,y,T=0,x=0,_=0,u=0,p=0,b=0,g=0,h=0,S=0,P=0,w=0,m=0,M=0,ee=0,Z=0,oe=0,ae=0,X=0,K=0,k=0,B=0,v=0,R=0,N=0,$=0,re=0,ie=0,fe=0,he=0,le=0,_e=0,Ae=G[0],Ee=G[1],be=G[2],Oe=G[3],me=G[4],pe=G[5],Pe=G[6],C=G[7],A=G[8],I=G[9],H=G[10],J=G[11],te=G[12],ne=G[13],de=G[14],Se=G[15];E=j[0],T+=E*Ae,x+=E*Ee,_+=E*be,u+=E*Oe,p+=E*me,b+=E*pe,g+=E*Pe,h+=E*C,S+=E*A,P+=E*I,w+=E*H,m+=E*J,M+=E*te,ee+=E*ne,Z+=E*de,oe+=E*Se,E=j[1],x+=E*Ae,_+=E*Ee,u+=E*be,p+=E*Oe,b+=E*me,g+=E*pe,h+=E*Pe,S+=E*C,P+=E*A,w+=E*I,m+=E*H,M+=E*J,ee+=E*te,Z+=E*ne,oe+=E*de,ae+=E*Se,E=j[2],_+=E*Ae,u+=E*Ee,p+=E*be,b+=E*Oe,g+=E*me,h+=E*pe,S+=E*Pe,P+=E*C,w+=E*A,m+=E*I,M+=E*H,ee+=E*J,Z+=E*te,oe+=E*ne,ae+=E*de,X+=E*Se,E=j[3],u+=E*Ae,p+=E*Ee,b+=E*be,g+=E*Oe,h+=E*me,S+=E*pe,P+=E*Pe,w+=E*C,m+=E*A,M+=E*I,ee+=E*H,Z+=E*J,oe+=E*te,ae+=E*ne,X+=E*de,K+=E*Se,E=j[4],p+=E*Ae,b+=E*Ee,g+=E*be,h+=E*Oe,S+=E*me,P+=E*pe,w+=E*Pe,m+=E*C,M+=E*A,ee+=E*I,Z+=E*H,oe+=E*J,ae+=E*te,X+=E*ne,K+=E*de,k+=E*Se,E=j[5],b+=E*Ae,g+=E*Ee,h+=E*be,S+=E*Oe,P+=E*me,w+=E*pe,m+=E*Pe,M+=E*C,ee+=E*A,Z+=E*I,oe+=E*H,ae+=E*J,X+=E*te,K+=E*ne,k+=E*de,B+=E*Se,E=j[6],g+=E*Ae,h+=E*Ee,S+=E*be,P+=E*Oe,w+=E*me,m+=E*pe,M+=E*Pe,ee+=E*C,Z+=E*A,oe+=E*I,ae+=E*H,X+=E*J,K+=E*te,k+=E*ne,B+=E*de,v+=E*Se,E=j[7],h+=E*Ae,S+=E*Ee,P+=E*be,w+=E*Oe,m+=E*me,M+=E*pe,ee+=E*Pe,Z+=E*C,oe+=E*A,ae+=E*I,X+=E*H,K+=E*J,k+=E*te,B+=E*ne,v+=E*de,R+=E*Se,E=j[8],S+=E*Ae,P+=E*Ee,w+=E*be,m+=E*Oe,M+=E*me,ee+=E*pe,Z+=E*Pe,oe+=E*C,ae+=E*A,X+=E*I,K+=E*H,k+=E*J,B+=E*te,v+=E*ne,R+=E*de,N+=E*Se,E=j[9],P+=E*Ae,w+=E*Ee,m+=E*be,M+=E*Oe,ee+=E*me,Z+=E*pe,oe+=E*Pe,ae+=E*C,X+=E*A,K+=E*I,k+=E*H,B+=E*J,v+=E*te,R+=E*ne,N+=E*de,$+=E*Se,E=j[10],w+=E*Ae,m+=E*Ee,M+=E*be,ee+=E*Oe,Z+=E*me,oe+=E*pe,ae+=E*Pe,X+=E*C,K+=E*A,k+=E*I,B+=E*H,v+=E*J,R+=E*te,N+=E*ne,$+=E*de,re+=E*Se,E=j[11],m+=E*Ae,M+=E*Ee,ee+=E*be,Z+=E*Oe,oe+=E*me,ae+=E*pe,X+=E*Pe,K+=E*C,k+=E*A,B+=E*I,v+=E*H,R+=E*J,N+=E*te,$+=E*ne,re+=E*de,ie+=E*Se,E=j[12],M+=E*Ae,ee+=E*Ee,Z+=E*be,oe+=E*Oe,ae+=E*me,X+=E*pe,K+=E*Pe,k+=E*C,B+=E*A,v+=E*I,R+=E*H,N+=E*J,$+=E*te,re+=E*ne,ie+=E*de,fe+=E*Se,E=j[13],ee+=E*Ae,Z+=E*Ee,oe+=E*be,ae+=E*Oe,X+=E*me,K+=E*pe,k+=E*Pe,B+=E*C,v+=E*A,R+=E*I,N+=E*H,$+=E*J,re+=E*te,ie+=E*ne,fe+=E*de,he+=E*Se,E=j[14],Z+=E*Ae,oe+=E*Ee,ae+=E*be,X+=E*Oe,K+=E*me,k+=E*pe,B+=E*Pe,v+=E*C,R+=E*A,N+=E*I,$+=E*H,re+=E*J,ie+=E*te,fe+=E*ne,he+=E*de,le+=E*Se,E=j[15],oe+=E*Ae,ae+=E*Ee,X+=E*be,K+=E*Oe,k+=E*me,B+=E*pe,v+=E*Pe,R+=E*C,N+=E*A,$+=E*I,re+=E*H,ie+=E*J,fe+=E*te,he+=E*ne,le+=E*de,_e+=E*Se,T+=38*ae,x+=38*X,_+=38*K,u+=38*k,p+=38*B,b+=38*v,g+=38*R,h+=38*N,S+=38*$,P+=38*re,w+=38*ie,m+=38*fe,M+=38*he,ee+=38*le,Z+=38*_e,y=1,E=T+y+65535,y=Math.floor(E/65536),T=E-y*65536,E=x+y+65535,y=Math.floor(E/65536),x=E-y*65536,E=_+y+65535,y=Math.floor(E/65536),_=E-y*65536,E=u+y+65535,y=Math.floor(E/65536),u=E-y*65536,E=p+y+65535,y=Math.floor(E/65536),p=E-y*65536,E=b+y+65535,y=Math.floor(E/65536),b=E-y*65536,E=g+y+65535,y=Math.floor(E/65536),g=E-y*65536,E=h+y+65535,y=Math.floor(E/65536),h=E-y*65536,E=S+y+65535,y=Math.floor(E/65536),S=E-y*65536,E=P+y+65535,y=Math.floor(E/65536),P=E-y*65536,E=w+y+65535,y=Math.floor(E/65536),w=E-y*65536,E=m+y+65535,y=Math.floor(E/65536),m=E-y*65536,E=M+y+65535,y=Math.floor(E/65536),M=E-y*65536,E=ee+y+65535,y=Math.floor(E/65536),ee=E-y*65536,E=Z+y+65535,y=Math.floor(E/65536),Z=E-y*65536,E=oe+y+65535,y=Math.floor(E/65536),oe=E-y*65536,T+=y-1+37*(y-1),y=1,E=T+y+65535,y=Math.floor(E/65536),T=E-y*65536,E=x+y+65535,y=Math.floor(E/65536),x=E-y*65536,E=_+y+65535,y=Math.floor(E/65536),_=E-y*65536,E=u+y+65535,y=Math.floor(E/65536),u=E-y*65536,E=p+y+65535,y=Math.floor(E/65536),p=E-y*65536,E=b+y+65535,y=Math.floor(E/65536),b=E-y*65536,E=g+y+65535,y=Math.floor(E/65536),g=E-y*65536,E=h+y+65535,y=Math.floor(E/65536),h=E-y*65536,E=S+y+65535,y=Math.floor(E/65536),S=E-y*65536,E=P+y+65535,y=Math.floor(E/65536),P=E-y*65536,E=w+y+65535,y=Math.floor(E/65536),w=E-y*65536,E=m+y+65535,y=Math.floor(E/65536),m=E-y*65536,E=M+y+65535,y=Math.floor(E/65536),M=E-y*65536,E=ee+y+65535,y=Math.floor(E/65536),ee=E-y*65536,E=Z+y+65535,y=Math.floor(E/65536),Z=E-y*65536,E=oe+y+65535,y=Math.floor(E/65536),oe=E-y*65536,T+=y-1+37*(y-1),F[0]=T,F[1]=x,F[2]=_,F[3]=u,F[4]=p,F[5]=b,F[6]=g,F[7]=h,F[8]=S,F[9]=P,F[10]=w,F[11]=m,F[12]=M,F[13]=ee,F[14]=Z,F[15]=oe}function L(F,j){O(F,j,j)}function D(F,j){const G=n();for(let E=0;E<16;E++)G[E]=j[E];for(let E=253;E>=0;E--)L(G,G),E!==2&&E!==4&&O(G,G,j);for(let E=0;E<16;E++)F[E]=G[E]}function z(F,j){const G=new Uint8Array(32),E=new Float64Array(80),y=n(),T=n(),x=n(),_=n(),u=n(),p=n();for(let S=0;S<31;S++)G[S]=F[S];G[31]=F[31]&127|64,G[0]&=248,l(E,j);for(let S=0;S<16;S++)T[S]=E[S];y[0]=_[0]=1;for(let S=254;S>=0;--S){const P=G[S>>>3]>>>(S&7)&1;a(y,T,P),a(x,_,P),f(u,y,x),d(y,y,x),f(x,T,_),d(T,T,_),L(_,u),L(p,y),O(y,x,y),O(x,T,u),f(u,y,x),d(y,y,x),L(T,y),d(x,_,p),O(y,x,s),f(y,y,_),O(x,x,y),O(y,_,p),O(_,T,E),L(T,u),a(y,T,P),a(x,_,P)}for(let S=0;S<16;S++)E[S+16]=y[S],E[S+32]=x[S],E[S+48]=T[S],E[S+64]=_[S];const b=E.subarray(32),g=E.subarray(16);D(b,b),O(g,g,b);const h=new Uint8Array(32);return c(h,g),h}t.scalarMult=z;function q(F){return z(F,i)}t.scalarMultBase=q;function V(F){if(F.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const j=new Uint8Array(F);return{publicKey:q(j),secretKey:j}}t.generateKeyPairFromSeed=V;function U(F){const j=(0,e.randomBytes)(32,F),G=V(j);return(0,r.wipe)(j),G}t.generateKeyPair=U;function W(F,j,G=!1){if(F.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(j.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const E=z(F,j);if(G){let y=0;for(let T=0;T<E.length;T++)y|=E[T];if(y===0)throw new Error("X25519: invalid shared key")}return E}t.sharedKey=W})(ec);var ca={},Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});var dr=Ue,Xd=kr,t9=20;function r9(t,e,r){for(var n=1634760805,i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],o=r[11]<<24|r[10]<<16|r[9]<<8|r[8],a=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],O=e[15]<<24|e[14]<<16|e[13]<<8|e[12],L=2036477234,D=r[19]<<24|r[18]<<16|r[17]<<8|r[16],z=r[23]<<24|r[22]<<16|r[21]<<8|r[20],q=r[27]<<24|r[26]<<16|r[25]<<8|r[24],V=r[31]<<24|r[30]<<16|r[29]<<8|r[28],U=1797285236,W=n,F=i,j=s,G=o,E=a,y=c,T=l,x=f,_=d,u=O,p=L,b=D,g=z,h=q,S=V,P=U,w,m=0;m<t9;m+=2)w=W+g|0,E^=w<<7|w>>>32-7,w=E+W|0,_^=w<<9|w>>>32-9,w=_+E|0,g^=w<<13|w>>>32-13,w=g+_|0,W^=w<<18|w>>>32-18,w=y+F|0,u^=w<<7|w>>>32-7,w=u+y|0,h^=w<<9|w>>>32-9,w=h+u|0,F^=w<<13|w>>>32-13,w=F+h|0,y^=w<<18|w>>>32-18,w=p+T|0,S^=w<<7|w>>>32-7,w=S+p|0,j^=w<<9|w>>>32-9,w=j+S|0,T^=w<<13|w>>>32-13,w=T+j|0,p^=w<<18|w>>>32-18,w=P+b|0,G^=w<<7|w>>>32-7,w=G+P|0,x^=w<<9|w>>>32-9,w=x+G|0,b^=w<<13|w>>>32-13,w=b+x|0,P^=w<<18|w>>>32-18,w=W+G|0,F^=w<<7|w>>>32-7,w=F+W|0,j^=w<<9|w>>>32-9,w=j+F|0,G^=w<<13|w>>>32-13,w=G+j|0,W^=w<<18|w>>>32-18,w=y+E|0,T^=w<<7|w>>>32-7,w=T+y|0,x^=w<<9|w>>>32-9,w=x+T|0,E^=w<<13|w>>>32-13,w=E+x|0,y^=w<<18|w>>>32-18,w=p+u|0,b^=w<<7|w>>>32-7,w=b+p|0,_^=w<<9|w>>>32-9,w=_+b|0,u^=w<<13|w>>>32-13,w=u+_|0,p^=w<<18|w>>>32-18,w=P+S|0,g^=w<<7|w>>>32-7,w=g+P|0,h^=w<<9|w>>>32-9,w=h+g|0,S^=w<<13|w>>>32-13,w=S+h|0,P^=w<<18|w>>>32-18;dr.writeUint32LE(W+n|0,t,0),dr.writeUint32LE(F+i|0,t,4),dr.writeUint32LE(j+s|0,t,8),dr.writeUint32LE(G+o|0,t,12),dr.writeUint32LE(E+a|0,t,16),dr.writeUint32LE(y+c|0,t,20),dr.writeUint32LE(T+l|0,t,24),dr.writeUint32LE(x+f|0,t,28),dr.writeUint32LE(_+d|0,t,32),dr.writeUint32LE(u+O|0,t,36),dr.writeUint32LE(p+L|0,t,40),dr.writeUint32LE(b+D|0,t,44),dr.writeUint32LE(g+z|0,t,48),dr.writeUint32LE(h+q|0,t,52),dr.writeUint32LE(S+V|0,t,56),dr.writeUint32LE(P+U|0,t,60)}function Dm(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(n.length<r.length)throw new Error("Salsa20: destination is shorter than source");var s,o;if(i===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");s=new Uint8Array(16),s.set(e),o=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");s=e,o=16-i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){r9(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];i9(s,o,s.length-o)}return Xd.wipe(a),i===0&&Xd.wipe(s),n}Ru.streamXOR=Dm;function n9(t,e,r,n){return n===void 0&&(n=0),Xd.wipe(r),Dm(t,e,r,r,n)}Ru.stream=n9;function i9(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(ca,"__esModule",{value:!0});var Qi=Ue,s9=Ru,Um=kr;function Km(t,e,r,n,i){if(i===void 0&&(i=0),i===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var s=Hm(t,e.subarray(0,16),new Uint8Array(32)),o=s9.streamXOR(s,e.subarray(16),r,n,i);return Um.wipe(s),o}ca.streamXOR=Km;function o9(t,e,r,n){return n===void 0&&(n=0),Um.wipe(r),Km(t,e,r,r,n)}ca.stream=o9;var a9=20;function Hm(t,e,r){for(var n=1634760805,i=t[3]<<24|t[2]<<16|t[1]<<8|t[0],s=t[7]<<24|t[6]<<16|t[5]<<8|t[4],o=t[11]<<24|t[10]<<16|t[9]<<8|t[8],a=t[15]<<24|t[14]<<16|t[13]<<8|t[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],O=e[15]<<24|e[14]<<16|e[13]<<8|e[12],L=2036477234,D=t[19]<<24|t[18]<<16|t[17]<<8|t[16],z=t[23]<<24|t[22]<<16|t[21]<<8|t[20],q=t[27]<<24|t[26]<<16|t[25]<<8|t[24],V=t[31]<<24|t[30]<<16|t[29]<<8|t[28],U=1797285236,W,F=0;F<a9;F+=2)W=n+z|0,a^=W<<7|W>>>32-7,W=a+n|0,d^=W<<9|W>>>32-9,W=d+a|0,z^=W<<13|W>>>32-13,W=z+d|0,n^=W<<18|W>>>32-18,W=c+i|0,O^=W<<7|W>>>32-7,W=O+c|0,q^=W<<9|W>>>32-9,W=q+O|0,i^=W<<13|W>>>32-13,W=i+q|0,c^=W<<18|W>>>32-18,W=L+l|0,V^=W<<7|W>>>32-7,W=V+L|0,s^=W<<9|W>>>32-9,W=s+V|0,l^=W<<13|W>>>32-13,W=l+s|0,L^=W<<18|W>>>32-18,W=U+D|0,o^=W<<7|W>>>32-7,W=o+U|0,f^=W<<9|W>>>32-9,W=f+o|0,D^=W<<13|W>>>32-13,W=D+f|0,U^=W<<18|W>>>32-18,W=n+o|0,i^=W<<7|W>>>32-7,W=i+n|0,s^=W<<9|W>>>32-9,W=s+i|0,o^=W<<13|W>>>32-13,W=o+s|0,n^=W<<18|W>>>32-18,W=c+a|0,l^=W<<7|W>>>32-7,W=l+c|0,f^=W<<9|W>>>32-9,W=f+l|0,a^=W<<13|W>>>32-13,W=a+f|0,c^=W<<18|W>>>32-18,W=L+O|0,D^=W<<7|W>>>32-7,W=D+L|0,d^=W<<9|W>>>32-9,W=d+D|0,O^=W<<13|W>>>32-13,W=O+d|0,L^=W<<18|W>>>32-18,W=U+V|0,z^=W<<7|W>>>32-7,W=z+U|0,q^=W<<9|W>>>32-9,W=q+z|0,V^=W<<13|W>>>32-13,W=V+q|0,U^=W<<18|W>>>32-18;return Qi.writeUint32LE(n,r,0),Qi.writeUint32LE(c,r,4),Qi.writeUint32LE(L,r,8),Qi.writeUint32LE(U,r,12),Qi.writeUint32LE(l,r,16),Qi.writeUint32LE(f,r,20),Qi.writeUint32LE(d,r,24),Qi.writeUint32LE(O,r,28),r}ca.hsalsa=Hm;var Ui={},Fm={},fa={};Object.defineProperty(fa,"__esModule",{value:!0});function c9(t,e,r){return~(t-1)&e|t-1&r}fa.select=c9;function f9(t,e){return(t|0)-(e|0)-1>>>31&1}fa.lessOrEqual=f9;function jm(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}fa.compare=jm;function u9(t,e){return t.length===0||e.length===0?!1:jm(t,e)!==0}fa.equal=u9;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fa,r=kr;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(l>>>10|f<<6)&7939;var d=a[6]|a[7]<<8;this._r[3]=(f>>>7|d<<9)&8191;var O=a[8]|a[9]<<8;this._r[4]=(d>>>4|O<<12)&255,this._r[5]=O>>>1&8190;var L=a[10]|a[11]<<8;this._r[6]=(O>>>14|L<<2)&8191;var D=a[12]|a[13]<<8;this._r[7]=(L>>>11|D<<5)&8065;var z=a[14]|a[15]<<8;this._r[8]=(D>>>8|z<<8)&8191,this._r[9]=z>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var f=this._fin?0:2048,d=this._h[0],O=this._h[1],L=this._h[2],D=this._h[3],z=this._h[4],q=this._h[5],V=this._h[6],U=this._h[7],W=this._h[8],F=this._h[9],j=this._r[0],G=this._r[1],E=this._r[2],y=this._r[3],T=this._r[4],x=this._r[5],_=this._r[6],u=this._r[7],p=this._r[8],b=this._r[9];l>=16;){var g=a[c+0]|a[c+1]<<8;d+=g&8191;var h=a[c+2]|a[c+3]<<8;O+=(g>>>13|h<<3)&8191;var S=a[c+4]|a[c+5]<<8;L+=(h>>>10|S<<6)&8191;var P=a[c+6]|a[c+7]<<8;D+=(S>>>7|P<<9)&8191;var w=a[c+8]|a[c+9]<<8;z+=(P>>>4|w<<12)&8191,q+=w>>>1&8191;var m=a[c+10]|a[c+11]<<8;V+=(w>>>14|m<<2)&8191;var M=a[c+12]|a[c+13]<<8;U+=(m>>>11|M<<5)&8191;var ee=a[c+14]|a[c+15]<<8;W+=(M>>>8|ee<<8)&8191,F+=ee>>>5|f;var Z=0,oe=Z;oe+=d*j,oe+=O*(5*b),oe+=L*(5*p),oe+=D*(5*u),oe+=z*(5*_),Z=oe>>>13,oe&=8191,oe+=q*(5*x),oe+=V*(5*T),oe+=U*(5*y),oe+=W*(5*E),oe+=F*(5*G),Z+=oe>>>13,oe&=8191;var ae=Z;ae+=d*G,ae+=O*j,ae+=L*(5*b),ae+=D*(5*p),ae+=z*(5*u),Z=ae>>>13,ae&=8191,ae+=q*(5*_),ae+=V*(5*x),ae+=U*(5*T),ae+=W*(5*y),ae+=F*(5*E),Z+=ae>>>13,ae&=8191;var X=Z;X+=d*E,X+=O*G,X+=L*j,X+=D*(5*b),X+=z*(5*p),Z=X>>>13,X&=8191,X+=q*(5*u),X+=V*(5*_),X+=U*(5*x),X+=W*(5*T),X+=F*(5*y),Z+=X>>>13,X&=8191;var K=Z;K+=d*y,K+=O*E,K+=L*G,K+=D*j,K+=z*(5*b),Z=K>>>13,K&=8191,K+=q*(5*p),K+=V*(5*u),K+=U*(5*_),K+=W*(5*x),K+=F*(5*T),Z+=K>>>13,K&=8191;var k=Z;k+=d*T,k+=O*y,k+=L*E,k+=D*G,k+=z*j,Z=k>>>13,k&=8191,k+=q*(5*b),k+=V*(5*p),k+=U*(5*u),k+=W*(5*_),k+=F*(5*x),Z+=k>>>13,k&=8191;var B=Z;B+=d*x,B+=O*T,B+=L*y,B+=D*E,B+=z*G,Z=B>>>13,B&=8191,B+=q*j,B+=V*(5*b),B+=U*(5*p),B+=W*(5*u),B+=F*(5*_),Z+=B>>>13,B&=8191;var v=Z;v+=d*_,v+=O*x,v+=L*T,v+=D*y,v+=z*E,Z=v>>>13,v&=8191,v+=q*G,v+=V*j,v+=U*(5*b),v+=W*(5*p),v+=F*(5*u),Z+=v>>>13,v&=8191;var R=Z;R+=d*u,R+=O*_,R+=L*x,R+=D*T,R+=z*y,Z=R>>>13,R&=8191,R+=q*E,R+=V*G,R+=U*j,R+=W*(5*b),R+=F*(5*p),Z+=R>>>13,R&=8191;var N=Z;N+=d*p,N+=O*u,N+=L*_,N+=D*x,N+=z*T,Z=N>>>13,N&=8191,N+=q*y,N+=V*E,N+=U*G,N+=W*j,N+=F*(5*b),Z+=N>>>13,N&=8191;var $=Z;$+=d*b,$+=O*p,$+=L*u,$+=D*_,$+=z*x,Z=$>>>13,$&=8191,$+=q*T,$+=V*y,$+=U*E,$+=W*G,$+=F*j,Z+=$>>>13,$&=8191,Z=(Z<<2)+Z|0,Z=Z+oe|0,oe=Z&8191,Z=Z>>>13,ae+=Z,d=oe,O=ae,L=X,D=K,z=k,q=B,V=v,U=R,W=N,F=$,c+=16,l-=16}this._h[0]=d,this._h[1]=O,this._h[2]=L,this._h[3]=D,this._h[4]=z,this._h[5]=q,this._h[6]=V,this._h[7]=U,this._h[8]=W,this._h[9]=F},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),f,d,O,L;if(this._leftover){for(L=this._leftover,this._buffer[L++]=1;L<16;L++)this._buffer[L]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,L=2;L<10;L++)this._h[L]+=f,f=this._h[L]>>>13,this._h[L]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,L=1;L<10;L++)l[L]=this._h[L]+f,f=l[L]>>>13,l[L]&=8191;for(l[9]-=1<<13,d=(f^1)-1,L=0;L<10;L++)l[L]&=d;for(d=~d,L=0;L<10;L++)this._h[L]=this._h[L]&d|l[L];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,O=this._h[0]+this._pad[0],this._h[0]=O&65535,L=1;L<8;L++)O=(this._h[L]+this._pad[L]|0)+(O>>>16)|0,this._h[L]=O&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,f;if(this._leftover){f=16-this._leftover,f>l&&(f=l);for(var d=0;d<f;d++)this._buffer[this._leftover+d]=a[c+d];if(l-=f,c+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(f=l-l%16,this._blocks(a,c,f),c+=f,l-=f),l){for(var d=0;d<l;d++)this._buffer[this._leftover+d]=a[c+d];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s})(Fm);Object.defineProperty(Ui,"__esModule",{value:!0});Ui.generateKey=Ui.openSecretBox=Ui.secretBox=void 0;const Lf=ca,Jd=Fm,Mo=kr,l9=eo;function d9(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,Lf.stream)(t,i,n,8);const s=new Uint8Array(16+r.length);for(let a=0;a<32&&a<r.length;a++)s[16+a]=r[a]^n[32+a];r.length>32&&(0,Lf.streamXOR)(t,i,r.subarray(32),s.subarray(16+32),8);const o=(0,Jd.oneTimeAuth)(n.subarray(0,32),s.subarray(16));for(let a=0;a<o.length;a++)s[a]=o[a];return(0,Mo.wipe)(o),(0,Mo.wipe)(n),(0,Mo.wipe)(i),s}Ui.secretBox=d9;function h9(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(r.length<16)throw new Error("secretBox data must be at least 16 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,Lf.stream)(t,i,n,8);const s=(0,Jd.oneTimeAuth)(n.subarray(0,32),r.subarray(16));if(!(0,Jd.equal)(s,r.subarray(0,16)))return null;const o=r.subarray(16),a=new Uint8Array(o.length);for(let c=0;c<32&&c<o.length;c++)a[c]=o[c]^n[32+c];return o.length>32&&(0,Lf.streamXOR)(t,i,o.subarray(32),a.subarray(32),8),(0,Mo.wipe)(s),(0,Mo.wipe)(n),(0,Mo.wipe)(i),a}Ui.openSecretBox=h9;function p9(t){return(0,l9.randomBytes)(32,t)}Ui.generateKey=p9;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.openBox=t.box=t.precomputeSharedKey=t.generateKeyPair=void 0;const e=ec,r=ca,n=Ui,i=kr;var s=ec;Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return s.generateKeyPair}});const o=new Uint8Array(16);function a(f,d){const O=(0,e.scalarMult)(d,f);return(0,r.hsalsa)(O,o,O),O}t.precomputeSharedKey=a;function c(f,d,O,L){const D=a(f,d),z=(0,n.secretBox)(D,O,L);return(0,i.wipe)(D),z}t.box=c;function l(f,d,O,L){const D=a(f,d),z=(0,n.openSecretBox)(D,O,L);return(0,i.wipe)(D),z}t.openBox=l})(km);(function(t){var e=xn&&xn.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=xn&&xn.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(km,t),r(Ui,t)})(Wo);var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});var L1="utf8: invalid string",pi="utf8: invalid source encoding";function g9(t){for(var e=new Uint8Array(Gm(t)),r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=192|i>>6,e[r++]=128|i&63):i<55296?(e[r++]=224|i>>12,e[r++]=128|i>>6&63,e[r++]=128|i&63):(n++,i=(i&1023)<<10,i|=t.charCodeAt(n)&1023,i+=65536,e[r++]=240|i>>18,e[r++]=128|i>>12&63,e[r++]=128|i>>6&63,e[r++]=128|i&63)}return e}var xs=Iu.encode=g9;function Gm(t){for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<128)e+=1;else if(n<2048)e+=2;else if(n<55296)e+=3;else if(n<=57343){if(r>=t.length-1)throw new Error(L1);r++,e+=4}else throw new Error(L1)}return e}Iu.encodedLength=Gm;function b9(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n&128){var i=void 0;if(n<224){if(r>=t.length)throw new Error(pi);var s=t[++r];if((s&192)!==128)throw new Error(pi);n=(n&31)<<6|s&63,i=128}else if(n<240){if(r>=t.length-1)throw new Error(pi);var s=t[++r],o=t[++r];if((s&192)!==128||(o&192)!==128)throw new Error(pi);n=(n&15)<<12|(s&63)<<6|o&63,i=2048}else if(n<248){if(r>=t.length-2)throw new Error(pi);var s=t[++r],o=t[++r],a=t[++r];if((s&192)!==128||(o&192)!==128||(a&192)!==128)throw new Error(pi);n=(n&15)<<18|(s&63)<<12|(o&63)<<6|a&63,i=65536}else throw new Error(pi);if(n<i||n>=55296&&n<=57343)throw new Error(pi);if(n>=65536){if(n>1114111)throw new Error(pi);n-=65536,e.push(String.fromCharCode(55296|n>>10)),n=56320|n&1023}}e.push(String.fromCharCode(n))}return e.join("")}Iu.decode=b9;var Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});function v9(){for(var t=0,e=0;e<arguments.length;e++)t+=arguments[e].length;for(var r=new Uint8Array(t),n=0,e=0;e<arguments.length;e++){var i=arguments[e];r.set(i,n),n+=i.length}return r}var m9=Vm.concat=v9,li=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Yd=24;function Gi(t){return ge.Buffer.from(t).toString("hex")}function Eo(t){return li(this,void 0,void 0,function*(){return Gi(typeof t=="string"?on.hash(xs(t),32):on.hash(t,32))})}function C1(t){return li(this,void 0,void 0,function*(){return Fr.generateKeyPairFromSeed(on.hash(xs(t),32))})}function qm(t,e){return li(this,void 0,void 0,function*(){const r=ge.Buffer.from(eo.randomBytes(Yd)),n=ge.Buffer.concat([r,ge.Buffer.from(Wo.secretBox(e,r,ge.Buffer.from(t,"utf8")))]);return Gi(n)})}function $m(t,e){return li(this,void 0,void 0,function*(){const r=t.slice(0,Yd),n=t.slice(Yd),i=Wo.openSecretBox(e,r,n);if(!i)throw new Error("Decryption failed");return ge.Buffer.from(i).toString("utf8")})}function y9(t,e){return li(this,void 0,void 0,function*(){const r=Fr.convertPublicKeyToX25519(ge.Buffer.from(e)),n=Wo.generateKeyPair(),s=new on.BLAKE2b(24).update(n.publicKey,32).update(r,32).digest(),o=typeof t=="string"?xs(t):t,a=Wo.box(r,n.secretKey,s,o);return Gi(m9(n.publicKey,a))})}function zm(t,e,r){return li(this,void 0,void 0,function*(){const n=Fr.convertSecretKeyToX25519(ge.Buffer.from(r)),i=Fr.convertPublicKeyToX25519(ge.Buffer.from(e)),s=typeof t=="string"?xs(t):t,o=s.slice(0,32),a=s.slice(32),l=new on.BLAKE2b(24).update(o,32).update(i,32).digest(),f=Wo.openBox(o,n,l,a);if(!f)throw new Error("Decryption failed");return ge.Buffer.from(f).toString()})}function E9(t){return li(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:ge.Buffer.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:ge.Buffer.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:ge.Buffer.from(new Uint8Array([6,161,164]))}};let r,n;if(t.length===64)r=e.edpk.prefix,n=t;else{const s=Object.entries(e);for(let o=0;o<s.length;o++){const[a,c]=s[o];if(t.startsWith(a)&&t.length===c.length){r=c.prefix;const l=zr.decode(t);n=l.slice(a.length,l.length).toString("hex");break}}}if(!r||!n)throw new Error(`invalid publicKey: ${t}`);const i=on.hash(ge.Buffer.from(n,"hex"),20);return zr.encode(ge.Buffer.concat([r,ge.Buffer.from(i)]))})}function B1(t,e){return`@${t}:${e}`}const _9=t=>li(void 0,void 0,void 0,function*(){if(t.length%2!==0)return xs(t);let e=t;t.startsWith("0x")&&(e=t.slice(2));const r=ge.Buffer.from(e,"hex");return r.length===e.length/2?r:xs(t)}),w9=(t,e=32)=>li(void 0,void 0,void 0,function*(){return on.hash(t,e)}),A9=(t,e)=>li(void 0,void 0,void 0,function*(){const r=yield _9(t),n=new Uint8Array([9,245,205,134,18]),i=yield w9(r),s=Fr.sign(e.secretKey,i);return zr.encode(ge.Buffer.concat([ge.Buffer.from(n),ge.Buffer.from(s)]))});var x9=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function Vi(){return x9(this,void 0,void 0,function*(){const t=eo.randomBytes(16);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(function(e){return ge.Buffer.from(e).toString("hex")}).join("-")})}const Cf=24,Bf=16;var He;(function(t){t.BlockchainRequest="blockchain_request",t.PermissionRequest="permission_request",t.SignPayloadRequest="sign_payload_request",t.OperationRequest="operation_request",t.BroadcastRequest="broadcast_request",t.BlockchainResponse="blockchain_response",t.PermissionResponse="permission_response",t.SignPayloadResponse="sign_payload_response",t.OperationResponse="operation_response",t.BroadcastResponse="broadcast_response",t.Acknowledge="acknowledge",t.Disconnect="disconnect",t.Error="error"})(He||(He={}));var _n;(function(t){t.SIGN="sign",t.OPERATION_REQUEST="operation_request",t.ENCRYPT="encrypt",t.NOTIFICATION="notification",t.THRESHOLD="threshold"})(_n||(_n={}));var xt;(function(t){t.MAINNET="mainnet",t.GHOSTNET="ghostnet",t.MONDAYNET="mondaynet",t.DAILYNET="dailynet",t.DELPHINET="delphinet",t.EDONET="edonet",t.FLORENCENET="florencenet",t.GRANADANET="granadanet",t.HANGZHOUNET="hangzhounet",t.ITHACANET="ithacanet",t.JAKARTANET="jakartanet",t.KATHMANDUNET="kathmandunet",t.LIMANET="limanet",t.MUMBAINET="mumbainet",t.CUSTOM="custom"})(xt||(xt={}));var k1;(function(t){t.ENDORSEMENT="endorsement",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.ACTIVATE_ACCOUNT="activate_account",t.PROPOSALS="proposals",t.BALLOT="ballot",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ORIGINATION="origination",t.DELEGATION="delegation"})(k1||(k1={}));var wn;(function(t){t.WEBSITE="website",t.EXTENSION="extension",t.P2P="p2p"})(wn||(wn={}));var Di;(function(t){t.BACKGROUND="toBackground",t.PAGE="toPage",t.EXTENSION="toExtension"})(Di||(Di={}));var ht;(function(t){t.BROADCAST_ERROR="BROADCAST_ERROR",t.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",t.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",t.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",t.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",t.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",t.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",t.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",t.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",t.ABORTED_ERROR="ABORTED_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR"})(ht||(ht={}));var sn;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED"})(sn||(sn={}));var Ys;(function(t){t.CHROME_MESSAGE="chrome_message",t.POST_MESSAGE="post_message",t.LEDGER="ledger",t.P2P="p2p"})(Ys||(Ys={}));var De;(function(t){t.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",t.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",t.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",t.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",t.ACCOUNTS="beacon:accounts",t.ACTIVE_ACCOUNT="beacon:active-account",t.PUSH_TOKENS="beacon:push-tokens",t.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",t.APP_METADATA_LIST="beacon:app-metadata-list",t.PERMISSION_LIST="beacon:permissions",t.BEACON_SDK_VERSION="beacon:sdk_version",t.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",t.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",t.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",t.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(De||(De={}));const zl={[De.TRANSPORT_P2P_PEERS_DAPP]:[],[De.TRANSPORT_P2P_PEERS_WALLET]:[],[De.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[De.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[De.ACCOUNTS]:[],[De.ACTIVE_ACCOUNT]:void 0,[De.PUSH_TOKENS]:[],[De.BEACON_SDK_SECRET_SEED]:void 0,[De.APP_METADATA_LIST]:[],[De.PERMISSION_LIST]:[],[De.BEACON_SDK_VERSION]:void 0,[De.MATRIX_PRESERVED_STATE]:{},[De.MATRIX_PEER_ROOM_IDS]:{},[De.MATRIX_SELECTED_NODE]:void 0,[De.MULTI_NODE_SETUP_DONE]:void 0};var es;(function(t){t.RAW="raw",t.OPERATION="operation",t.MICHELINE="micheline"})(es||(es={}));var kf;(function(t){t.LIGHT="light",t.DARK="dark"})(kf||(kf={}));var Qd;(function(t){t.EUROPE_EAST="europe-east",t.EUROPE_WEST="europe-west",t.NORTH_AMERICA_EAST="north-america-east",t.NORTH_AMERICA_WEST="north-america-west",t.CENTRAL_AMERICA="central-america",t.SOUTH_AMERICA="south-america",t.ASIA_EAST="asia-east",t.ASIA_WEST="asia-west",t.AFRICA="africa",t.AUSTRALIA="australia"})(Qd||(Qd={}));const S9="3.3.4",Wm="3",Uc=[t=>{}];let ot={postMessage:(t,e)=>{console.log("GOT MOCK POST MESSAGE",t),Uc.forEach(r=>{r({data:t})})},addEventListener:(t,e)=>{Uc.push(e)},removeEventListener:(t,e)=>{Uc.splice(Uc.indexOf(r=>r===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(ot=window)}catch(t){console.log(`not defined: ${t}`)}var Kc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class R9{constructor(e){if(this._beaconId=new Jt,this._keyPair=new Jt,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,ot.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):ot.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return Kc(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),ot.beaconCreatedClientInstance=!1})}initSDK(){return Kc(this,void 0,void 0,function*(){return this.storage.set(De.BEACON_SDK_VERSION,S9).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve(Gi(e.publicKey))})})}removeBeaconEntriesFromStorage(){return Kc(this,void 0,void 0,function*(){const e=Object.values(De);yield Promise.all(e.map(r=>this.storage.delete(r)))})}loadOrCreateBeaconSecret(){return Kc(this,void 0,void 0,function*(){const e=yield this.storage.get(De.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield C1(e));else{const r=yield Vi();yield this.storage.set(De.BEACON_SDK_SECRET_SEED,r),this._keyPair.resolve(yield C1(r))}})}}var Aa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class d0{constructor(e,r){this.storage=e,this.storageKey=r}getAll(){return Aa(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return Aa(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey);return r.find(e)})}addOne(e,r,n=!0){return Aa(this,void 0,void 0,function*(){const i=yield this.storage.get(this.storageKey);if(!i.some(r))i.push(e);else if(n)for(let s=0;s<i.length;s++)r(i[s])&&(i[s]=e);return this.storage.set(this.storageKey,i)})}remove(e){return Aa(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey),n=r.filter(i=>!e(i));return this.storage.set(this.storageKey,n)})}removeAll(){return Aa(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var I9=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Zd=(t,e)=>I9(void 0,void 0,void 0,function*(){const r=[t,e.type];e.name&&r.push(`name:${e.name}`),e.rpcUrl&&r.push(`rpc:${e.rpcUrl}`);const n=ge.Buffer.from(on.hash(xs(r.join("-")),10));return zr.encode(n)});var T9=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class O9{static hasPermission(e,r,n){return T9(this,void 0,void 0,function*(){switch(e.type){case He.PermissionRequest:case He.BroadcastRequest:return!0;case He.OperationRequest:{const i=yield Zd(e.sourceAddress,e.network),s=yield r(i);return s?s.scopes.includes(_n.OPERATION_REQUEST):!1}case He.SignPayloadRequest:{const s=(yield n()).filter(o=>o.address===e.sourceAddress);return s.length===0?!1:s.some(o=>o.scopes.includes(_n.SIGN))}default:throw new Error("Message not handled")}})}}var Ms=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class P9{constructor(e){this.storageManager=new d0(e,De.ACCOUNTS)}getAccounts(){return Ms(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return Ms(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.accountIdentifier===e)})}addAccount(e){return Ms(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return Ms(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.accountIdentifier===e)})}removeAccounts(e){return Ms(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.accountIdentifier))})}removeAllAccounts(){return Ms(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return Ms(this,void 0,void 0,function*(){return O9.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var N9=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Xo=t=>N9(void 0,void 0,void 0,function*(){const e=ge.Buffer.from(on.hash(ge.Buffer.from(t,"hex"),5));return zr.encode(e)});let Xm=!!ot.beaconSdkDebugEnabled;Xm&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const M9=()=>Xm;class L9{constructor(){}debug(e,r,...n){this._log("debug",e,r,n)}log(e,r,...n){this._log("log",e,r,n)}warn(e,r,...n){this._log("warn",e,r,n)}error(e,r,...n){this._log("error",e,r,n)}_log(e,r,n,i=[]){if(!M9())return;let s=`[BEACON] ${new Date().toISOString()} [${r}](${n})`,o=i;switch(i[0]&&typeof i[0]=="string"&&(s+=` ${i[0]}`,o=i.slice(1)),e){case"error":console.group(s),console.error(...o);break;case"warn":console.group(s),console.warn(...o);break;case"debug":console.groupCollapsed(s),console.debug(...o);break;default:console.group(s),console.log(...o)}console.groupEnd()}}class Yr{constructor(e){this.name=e}debug(e,...r){Hc.debug(this.name,e,r)}log(e,...r){Hc.log(this.name,e,r)}warn(e,...r){Hc.warn(this.name,e,r)}error(e,...r){Hc.error(this.name,e,r)}}let Hc=new L9;var Pr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const C9=new Yr("Client");class B9 extends R9{constructor(e){var r;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new Jt,this.accountManager=new P9(e.storage),this.matrixNodes=(r=e.matrixNodes)!==null&&r!==void 0?r:{},this.handleResponse=(n,i)=>{throw new Error(`not overwritten${JSON.stringify(n)} - ${JSON.stringify(i)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,r;return(r=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&r!==void 0?r:sn.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return Pr(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return Pr(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return Pr(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return Pr(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return Pr(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(r=>r+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return Pr(this,void 0,void 0,function*(){return this._transport.status===Xn.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return Pr(this,void 0,void 0,function*(){return{senderId:yield Xo(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return Pr(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return Pr(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return Pr(this,void 0,void 0,function*(){this._transport.status===Xn.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return Pr(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=Jt.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new Jt)})}addListener(e){return Pr(this,void 0,void 0,function*(){e.addListener((r,n)=>Pr(this,void 0,void 0,function*(){if(typeof r=="string"){const i=yield new Qs().deserialize(r);this.handleResponse(i,n)}})).catch(r=>C9.error("addListener",r))})}sendDisconnectToPeer(e,r){return Pr(this,void 0,void 0,function*(){const n={id:yield Vi(),version:e.version,senderId:yield Xo(yield this.beaconId),type:He.Disconnect},i=yield new Qs().serialize(n);yield(r??(yield this.transport)).send(i,e)})}}class Qr{constructor(e,r){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${r}`,this.description=r}get fullDescription(){return{description:this.description}}static getError(e,r){switch(e){case ht.BROADCAST_ERROR:return new k9;case ht.NETWORK_NOT_SUPPORTED:return new D9;case ht.NO_ADDRESS_ERROR:return new U9;case ht.NO_PRIVATE_KEY_FOUND_ERROR:return new K9;case ht.NOT_GRANTED_ERROR:return new H9;case ht.PARAMETERS_INVALID_ERROR:return new F9;case ht.TOO_MANY_OPERATIONS:return new j9;case ht.TRANSACTION_INVALID_ERROR:return new G9(r);case ht.SIGNATURE_TYPE_NOT_SUPPORTED:return new X9;case ht.ABORTED_ERROR:return new $9;case ht.UNKNOWN_ERROR:return new Jm}}}class k9 extends Qr{constructor(){super(ht.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class D9 extends Qr{constructor(){super(ht.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class U9 extends Qr{constructor(){super(ht.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class K9 extends Qr{constructor(){super(ht.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class H9 extends Qr{constructor(){super(ht.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class F9 extends Qr{constructor(){super(ht.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class j9 extends Qr{constructor(){super(ht.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class G9 extends Qr{constructor(e){super(ht.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class Jm extends Qr{constructor(){super(ht.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var hn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const gi=new Yr("Transport");class Ym{constructor(e,r,n){this.type=Ys.POST_MESSAGE,this._isConnected=sn.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=r,this.peerManager=n}get connectionStatus(){return this._isConnected}static isAvailable(){return hn(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return hn(this,void 0,void 0,function*(){gi.log("connect"),this._isConnected=sn.CONNECTED})}disconnect(){return hn(this,void 0,void 0,function*(){gi.log("disconnect"),this._isConnected=sn.NOT_CONNECTED})}send(e,r){return hn(this,void 0,void 0,function*(){if(r)return this.client.sendMessage(e,r);{const i=(yield this.getPeers()).map(s=>this.client.sendMessage(e,s));return(yield Promise.all(i))[0]}})}addListener(e){return hn(this,void 0,void 0,function*(){gi.debug("addListener"),this.listeners.push(e)})}removeListener(e){return hn(this,void 0,void 0,function*(){gi.log("removeListener"),this.listeners=this.listeners.filter(r=>r!==e)})}getPeers(){return hn(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,r=!0){return hn(this,void 0,void 0,function*(){gi.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return hn(this,void 0,void 0,function*(){gi.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return hn(this,void 0,void 0,function*(){gi.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,r){return hn(this,void 0,void 0,function*(){this.listeners.length===0?gi.warn("notifyListeners","0 listeners notified!",this):gi.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(n=>{n(e,r)})})}}globalThis&&globalThis.__awaiter;var Fc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class V9{constructor(e){this.prefix=e}static isSupported(){return Fc(this,void 0,void 0,function*(){return Promise.resolve(typeof window<"u"&&!!window.localStorage)})}get(e){return Fc(this,void 0,void 0,function*(){const r=localStorage.getItem(this.getPrefixedKey(e));if(r)try{return JSON.parse(r)}catch{return r}else return typeof zl[e]=="object"?JSON.parse(JSON.stringify(zl[e])):zl[e]})}set(e,r){return Fc(this,void 0,void 0,function*(){return typeof r=="string"?localStorage.setItem(this.getPrefixedKey(e),r):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(r))})}delete(e){return Fc(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;var D1=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Qs{serialize(e){return D1(this,void 0,void 0,function*(){const r=JSON.stringify(e);return zr.encode(ge.Buffer.from(r))})}deserialize(e){return D1(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse(zr.decode(e).toString())})}}var go=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class q9{constructor(e){this.storageManager=new d0(e,De.APP_METADATA_LIST)}getAppMetadataList(){return go(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return go(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.senderId===e)})}addAppMetadata(e){return go(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.senderId===e.senderId)})}removeAppMetadata(e){return go(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.senderId===e)})}removeAppMetadatas(e){return go(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.senderId))})}removeAllAppMetadata(){return go(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class $9 extends Qr{constructor(){super(ht.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var Ls=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Df{constructor(e,r){this.storageManager=new d0(e,r)}hasPeer(e){return Ls(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return Ls(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return Ls(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.publicKey===e)})}addPeer(e){return Ls(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.publicKey===e.publicKey)})}removePeer(e){return Ls(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.publicKey===e)})}removePeers(e){return Ls(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.publicKey))})}removeAllPeers(){return Ls(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var Wl={},Xl={},U1;function z9(){return U1||(U1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.X25519Session=t.SECRET_SEED_LENGTH=t.SAVED_STATE_LENGTH=t.ACCEPT_MESSAGE_LENGTH=t.OFFER_MESSAGE_LENGTH=void 0;const e=eo,r=kr,n=ec,i=Qm();t.OFFER_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.ACCEPT_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.SAVED_STATE_LENGTH=n.SECRET_KEY_LENGTH,t.SECRET_SEED_LENGTH=n.SECRET_KEY_LENGTH;class s{constructor(a,c){this.offerMessageLength=t.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=t.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=n.SHARED_KEY_LENGTH,this.savedStateLength=t.SAVED_STATE_LENGTH,this._seed=a||(0,e.randomBytes)(n.SECRET_KEY_LENGTH,c)}saveState(){return new Uint8Array(this._seed)}restoreState(a){return this._seed=new Uint8Array(a),this}clean(){this._seed&&(0,r.wipe)(this._seed),this._keyPair&&((0,r.wipe)(this._keyPair.secretKey),(0,r.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,r.wipe)(this._sharedKey),this._sessionKeys&&((0,r.wipe)(this._sessionKeys.receive),(0,r.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,n.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(a){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(a.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const c=(0,n.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,n.sharedKey)(c.secretKey,a),this._sessionKeys=(0,i.clientSessionKeysFromSharedKey)(this._sharedKey,c.publicKey,a),(0,r.wipe)(c.secretKey),c.publicKey}finish(a){if(a.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,n.sharedKey)(this._keyPair.secretKey,a),this._sessionKeys=(0,i.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,a),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}t.X25519Session=s}(Xl)),Xl}var K1;function Qm(){return K1||(K1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.clientSessionKeys=t.serverSessionKeys=t.clientSessionKeysFromSharedKey=t.serverSessionKeysFromSharedKey=t.X25519Session=void 0;const e=on,r=ec;var n=z9();Object.defineProperty(t,"X25519Session",{enumerable:!0,get:function(){return n.X25519Session}});const i=32;function s(l,f,d,O=e.BLAKE2b){const L=new O;if(L.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const D=L.update(l).update(d).update(f).digest();return{send:D.subarray(0,i),receive:D.subarray(i)}}t.serverSessionKeysFromSharedKey=s;function o(l,f,d,O=e.BLAKE2b){const L=new O;if(L.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const D=L.update(l).update(f).update(d).digest();return{receive:D.subarray(0,i),send:D.subarray(i)}}t.clientSessionKeysFromSharedKey=o;function a(l,f,d=e.BLAKE2b){const O=(0,r.sharedKey)(l.secretKey,f);return s(O,l.publicKey,f,d)}t.serverSessionKeys=a;function c(l,f,d=e.BLAKE2b){const O=(0,r.sharedKey)(l.secretKey,f);return o(O,l.publicKey,f,d)}t.clientSessionKeys=c}(Wl)),Wl}var H1=Qm(),xa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Zm{constructor(e){this.keyPair=e}getPublicKey(){return xa(this,void 0,void 0,function*(){return Gi(this.keyPair.publicKey)})}getPublicKeyHash(){return xa(this,void 0,void 0,function*(){return Eo(this.keyPair.publicKey)})}createCryptoBoxServer(e,r){return xa(this,void 0,void 0,function*(){return H1.serverSessionKeys({publicKey:Fr.convertPublicKeyToX25519(r.publicKey),secretKey:Fr.convertSecretKeyToX25519(r.secretKey)},Fr.convertPublicKeyToX25519(ge.Buffer.from(e,"hex")))})}createCryptoBoxClient(e,r){return xa(this,void 0,void 0,function*(){return H1.clientSessionKeys({publicKey:Fr.convertPublicKeyToX25519(r.publicKey),secretKey:Fr.convertSecretKeyToX25519(r.secretKey)},Fr.convertPublicKeyToX25519(ge.Buffer.from(e,"hex")))})}encryptMessageAsymmetric(e,r){return xa(this,void 0,void 0,function*(){return y9(r,ge.Buffer.from(e,"hex"))})}}var Cs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class W9 extends Zm{constructor(e,r){super(r),this.name=e,this.init().catch(console.error)}start(){return Cs(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return Cs(this,void 0,void 0,function*(){return{id:yield Vi(),type:"postmessage-pairing-request",name:this.name,version:Wm,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return Cs(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return Cs(this,void 0,void 0,function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return Cs(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,r){return Cs(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxServer(e,this.keyPair),i=ge.Buffer.from(r,"hex");if(i.length>=Cf+Bf)try{return yield $m(i,n.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,r){return Cs(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(e,this.keyPair);return qm(r,n.send)})}}class X9 extends Qr{constructor(){super(ht.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var eh={},J9={get exports(){return eh},set exports(t){eh=t}},Uf={},Y9={get exports(){return Uf},set exports(t){Uf=t}},e2=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},Q9=e2,ao=Object.prototype.toString;function h0(t){return ao.call(t)==="[object Array]"}function th(t){return typeof t>"u"}function Z9(t){return t!==null&&!th(t)&&t.constructor!==null&&!th(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function e7(t){return ao.call(t)==="[object ArrayBuffer]"}function t7(t){return typeof FormData<"u"&&t instanceof FormData}function r7(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function n7(t){return typeof t=="string"}function i7(t){return typeof t=="number"}function t2(t){return t!==null&&typeof t=="object"}function nf(t){if(ao.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function s7(t){return ao.call(t)==="[object Date]"}function o7(t){return ao.call(t)==="[object File]"}function a7(t){return ao.call(t)==="[object Blob]"}function r2(t){return ao.call(t)==="[object Function]"}function c7(t){return t2(t)&&r2(t.pipe)}function f7(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function u7(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function l7(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function p0(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),h0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function rh(){var t={};function e(i,s){nf(t[s])&&nf(i)?t[s]=rh(t[s],i):nf(i)?t[s]=rh({},i):h0(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)p0(arguments[r],e);return t}function d7(t,e,r){return p0(e,function(i,s){r&&typeof i=="function"?t[s]=Q9(i,r):t[s]=i}),t}function h7(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Zr={isArray:h0,isArrayBuffer:e7,isBuffer:Z9,isFormData:t7,isArrayBufferView:r7,isString:n7,isNumber:i7,isObject:t2,isPlainObject:nf,isUndefined:th,isDate:s7,isFile:o7,isBlob:a7,isFunction:r2,isStream:c7,isURLSearchParams:f7,isStandardBrowserEnv:l7,forEach:p0,merge:rh,extend:d7,trim:u7,stripBOM:h7},bo=Zr;function F1(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var n2=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(bo.isURLSearchParams(r))i=r.toString();else{var s=[];bo.forEach(r,function(c,l){c===null||typeof c>"u"||(bo.isArray(c)?l=l+"[]":c=[c],bo.forEach(c,function(d){bo.isDate(d)?d=d.toISOString():bo.isObject(d)&&(d=JSON.stringify(d)),s.push(F1(l)+"="+F1(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},p7=Zr;function Tu(){this.handlers=[]}Tu.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Tu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Tu.prototype.forEach=function(e){p7.forEach(this.handlers,function(n){n!==null&&e(n)})};var g7=Tu,b7=Zr,v7=function(e,r){b7.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},i2=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Jl,j1;function s2(){if(j1)return Jl;j1=1;var t=i2;return Jl=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},Jl}var Yl,G1;function m7(){if(G1)return Yl;G1=1;var t=s2();return Yl=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Yl}var Ql,V1;function y7(){if(V1)return Ql;V1=1;var t=Zr;return Ql=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ql}var Zl,q1;function E7(){return q1||(q1=1,Zl=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),Zl}var ed,$1;function _7(){return $1||($1=1,ed=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),ed}var td,z1;function w7(){if(z1)return td;z1=1;var t=E7(),e=_7();return td=function(n,i){return n&&!t(i)?e(n,i):i},td}var rd,W1;function A7(){if(W1)return rd;W1=1;var t=Zr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return rd=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},rd}var nd,X1;function x7(){if(X1)return nd;X1=1;var t=Zr;return nd=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),nd}var id,J1;function Ou(){if(J1)return id;J1=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,id=t,id}var sd,Y1;function Q1(){if(Y1)return sd;Y1=1;var t=Zr,e=m7(),r=y7(),n=n2,i=w7(),s=A7(),o=x7(),a=s2(),c=Pu(),l=Ou();return sd=function(d){return new Promise(function(L,D){var z=d.data,q=d.headers,V=d.responseType,U;function W(){d.cancelToken&&d.cancelToken.unsubscribe(U),d.signal&&d.signal.removeEventListener("abort",U)}t.isFormData(z)&&delete q["Content-Type"];var F=new XMLHttpRequest;if(d.auth){var j=d.auth.username||"",G=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";q.Authorization="Basic "+btoa(j+":"+G)}var E=i(d.baseURL,d.url);F.open(d.method.toUpperCase(),n(E,d.params,d.paramsSerializer),!0),F.timeout=d.timeout;function y(){if(F){var x="getAllResponseHeaders"in F?s(F.getAllResponseHeaders()):null,_=!V||V==="text"||V==="json"?F.responseText:F.response,u={data:_,status:F.status,statusText:F.statusText,headers:x,config:d,request:F};e(function(b){L(b),W()},function(b){D(b),W()},u),F=null}}if("onloadend"in F?F.onloadend=y:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(y)},F.onabort=function(){F&&(D(a("Request aborted",d,"ECONNABORTED",F)),F=null)},F.onerror=function(){D(a("Network Error",d,null,F)),F=null},F.ontimeout=function(){var _=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c.transitional;d.timeoutErrorMessage&&(_=d.timeoutErrorMessage),D(a(_,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",F)),F=null},t.isStandardBrowserEnv()){var T=(d.withCredentials||o(E))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;T&&(q[d.xsrfHeaderName]=T)}"setRequestHeader"in F&&t.forEach(q,function(_,u){typeof z>"u"&&u.toLowerCase()==="content-type"?delete q[u]:F.setRequestHeader(u,_)}),t.isUndefined(d.withCredentials)||(F.withCredentials=!!d.withCredentials),V&&V!=="json"&&(F.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&F.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(U=function(x){F&&(D(!x||x&&x.type?new l("canceled"):x),F.abort(),F=null)},d.cancelToken&&d.cancelToken.subscribe(U),d.signal&&(d.signal.aborted?U():d.signal.addEventListener("abort",U))),z||(z=null),F.send(z)})},sd}var od,Z1;function Pu(){if(Z1)return od;Z1=1;var t=Zr,e=v7,r=i2,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof tt<"u"&&Object.prototype.toString.call(tt)==="[object process]")&&(c=Q1()),c}function o(c,l,f){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(f||JSON.stringify)(c)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(l,f){return e(f,"Accept"),e(f,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(f,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||f&&f["Content-Type"]==="application/json"?(i(f,"application/json"),o(l)):l}],transformResponse:[function(l){var f=this.transitional||a.transitional,d=f&&f.silentJSONParsing,O=f&&f.forcedJSONParsing,L=!d&&this.responseType==="json";if(L||O&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(D){if(L)throw D.name==="SyntaxError"?r(D,this,"E_JSON_PARSE"):D}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){a.headers[l]={}}),t.forEach(["post","put","patch"],function(l){a.headers[l]=t.merge(n)}),od=a,od}var S7=Zr,R7=Pu(),I7=function(e,r,n){var i=this||R7;return S7.forEach(n,function(o){e=o.call(i,e,r)}),e},ad,eg;function o2(){return eg||(eg=1,ad=function(e){return!!(e&&e.__CANCEL__)}),ad}var tg=Zr,cd=I7,T7=o2(),O7=Pu(),P7=Ou();function fd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new P7("canceled")}var N7=function(e){fd(e),e.headers=e.headers||{},e.data=cd.call(e,e.data,e.headers,e.transformRequest),e.headers=tg.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),tg.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||O7.adapter;return r(e).then(function(i){return fd(e),i.data=cd.call(e,i.data,i.headers,e.transformResponse),i},function(i){return T7(i)||(fd(e),i&&i.response&&(i.response.data=cd.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Ur=Zr,a2=function(e,r){r=r||{};var n={};function i(f,d){return Ur.isPlainObject(f)&&Ur.isPlainObject(d)?Ur.merge(f,d):Ur.isPlainObject(d)?Ur.merge({},d):Ur.isArray(d)?d.slice():d}function s(f){if(Ur.isUndefined(r[f])){if(!Ur.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Ur.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Ur.isUndefined(r[f])){if(!Ur.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Ur.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var O=l[d]||s,L=O(d);Ur.isUndefined(L)&&O!==c||(n[d]=L)}),n},ud,rg;function c2(){return rg||(rg=1,ud={version:"0.24.0"}),ud}var M7=c2().version,g0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){g0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var ng={};g0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+M7+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!ng[o]&&(ng[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function L7(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var C7={assertOptions:L7,validators:g0},f2=Zr,B7=n2,ig=g7,sg=N7,Nu=a2,u2=C7,vo=u2.validators;function gc(t){this.defaults=t,this.interceptors={request:new ig,response:new ig}}gc.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Nu(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&u2.assertOptions(r,{silentJSONParsing:vo.transitional(vo.boolean),forcedJSONParsing:vo.transitional(vo.boolean),clarifyTimeoutError:vo.transitional(vo.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(e)===!1||(i=i&&O.synchronous,n.unshift(O.fulfilled,O.rejected))});var s=[];this.interceptors.response.forEach(function(O){s.push(O.fulfilled,O.rejected)});var o;if(!i){var a=[sg,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),f=n.shift();try{c=l(c)}catch(d){f(d);break}}try{o=sg(c)}catch(d){return Promise.reject(d)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};gc.prototype.getUri=function(e){return e=Nu(this.defaults,e),B7(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};f2.forEach(["delete","get","head","options"],function(e){gc.prototype[e]=function(r,n){return this.request(Nu(n||{},{method:e,url:r,data:(n||{}).data}))}});f2.forEach(["post","put","patch"],function(e){gc.prototype[e]=function(r,n,i){return this.request(Nu(i||{},{method:e,url:r,data:n}))}});var k7=gc,ld,og;function D7(){if(og)return ld;og=1;var t=Ou();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},ld=e,ld}var dd,ag;function U7(){return ag||(ag=1,dd=function(e){return function(n){return e.apply(null,n)}}),dd}var hd,cg;function K7(){return cg||(cg=1,hd=function(e){return typeof e=="object"&&e.isAxiosError===!0}),hd}var fg=Zr,H7=e2,sf=k7,F7=a2,j7=Pu();function l2(t){var e=new sf(t),r=H7(sf.prototype.request,e);return fg.extend(r,sf.prototype,e),fg.extend(r,e),r.create=function(i){return l2(F7(t,i))},r}var di=l2(j7);di.Axios=sf;di.Cancel=Ou();di.CancelToken=D7();di.isCancel=o2();di.VERSION=c2().version;di.all=function(e){return Promise.all(e)};di.spread=U7();di.isAxiosError=K7();Y9.exports=di;Uf.default=di;(function(t){t.exports=Uf})(J9);const Kf=Mg(eh);var Hf;(function(t){t.TEXT="m.text"})(Hf||(Hf={}));class b0{constructor(e,r,n,i){this.type=e,this.sender=r,this.content=n,this.timestamp=i}static from(e){if(q7(e))return new b0(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const G7=t=>t.type==="m.room.create"&&t.content instanceof Object&&"creator"in t.content,V7=t=>t.type==="m.room.member"&&t.content instanceof Object&&"membership"in t.content&&t.content.membership==="join",d2=t=>t.type==="m.room.message",q7=t=>d2(t)&&t.content instanceof Object&&"msgtype"in t.content&&t.content.msgtype===Hf.TEXT;var mr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JOINED=1]="JOINED",t[t.INVITED=2]="INVITED",t[t.LEFT=3]="LEFT"})(mr||(mr={}));class Nt{constructor(e,r=mr.UNKNOWN,n=[],i=[]){this.id=e,this.status=r,this.members=n,this.messages=i}static fromSync(e){var r,n,i;if(!e)return[];function s(o,a){return Object.entries(o).map(([c,l])=>a(c,l))}return[...s((r=e.join)!==null&&r!==void 0?r:{},Nt.fromJoined),...s((n=e.invite)!==null&&n!==void 0?n:{},Nt.fromInvited),...s((i=e.leave)!==null&&i!==void 0?i:{},Nt.fromLeft)]}static from(e,r){return typeof e=="string"?new Nt(e,r||mr.UNKNOWN):r!==void 0?new Nt(e.id,r,e.members,e.messages):e}static merge(e,r){return!r||r.id!==e.id?Nt.from(e):new Nt(e.id,e.status,[...r.members,...e.members].filter((n,i,s)=>s.indexOf(n)===i),[...r.messages,...e.messages])}static fromJoined(e,r){const n=[...r.state.events,...r.timeline.events],i=Nt.getMembersFromEvents(n),s=Nt.getMessagesFromEvents(n);return new Nt(e,mr.JOINED,i,s)}static fromInvited(e,r){const n=Nt.getMembersFromEvents(r.invite_state.events);return new Nt(e,mr.INVITED,n)}static fromLeft(e,r){const n=[...r.state.events,...r.timeline.events],i=Nt.getMembersFromEvents(n),s=Nt.getMessagesFromEvents(n);return new Nt(e,mr.LEFT,i,s)}static getMembersFromEvents(e){return Nt.getUniqueEvents(e.filter(r=>G7(r)||V7(r))).map(r=>r.sender).filter((r,n,i)=>i.indexOf(r)===n)}static getMessagesFromEvents(e){return Nt.getUniqueEvents(e.filter(d2)).map(r=>b0.from(r)).filter(Boolean)}static getUniqueEvents(e){const r={},n=[];return e.forEach((i,s)=>{const o=i.event_id;(o===void 0||!(o in r))&&(o!==void 0&&(r[o]=s),n.push(i))}),n}}var jc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const ug=["syncToken","rooms"];class $7{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((r,n)=>jc(this,void 0,void 0,function*(){try{yield this.initFromStorage(),r()}catch(i){n(i)}}))}get(e){return this.state[e]}getRoom(e){const r=Nt.from(e,mr.UNKNOWN);return this.state.rooms[r.id]||r}update(e){return jc(this,void 0,void 0,function*(){yield this.waitReady();const r=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(r,this.state,e)})}onStateChanged(e,...r){r.length>0?r.forEach(n=>{this.onStateChangedListeners.set(n,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return jc(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return jc(this,void 0,void 0,function*(){const e=yield this.storage.get(De.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const n=["rooms"].some(i=>e[i]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(n.rooms||{}).forEach(i=>{i.messages=[]}),n}updateStorage(e){if(Object.entries(e).filter(([n,i])=>ug.includes(n)&&!!i).length>0){const n={};ug.forEach(i=>{n[i]=this.state[i]}),this.storage.set(De.MATRIX_PRESERVED_STATE,this.prepareData(n))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,r){if(!r)return e;const n=Array.isArray(r)?r:Object.values(r),i=Object.assign({},e);return n.forEach(s=>{i[s.id]=Nt.merge(s,e[s.id])}),i}notifyListeners(e,r,n){const i=this.onStateChangedListeners.get("all");i&&i(e,r,n),l0(n).filter(s=>n[s]!==void 0).forEach(s=>{const o=this.onStateChangedListeners.get(s);o&&o(e,r,n)})}}var Sa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const z7=new Yr("MatrixHttpClient"),W7="/_matrix/client/r0";class X7{constructor(e){this.baseUrl=e,this.cancelTokenSource=Kf.CancelToken.source()}get(e,r,n){return Sa(this,void 0,void 0,function*(){return this.send("GET",e,n,r)})}post(e,r,n,i){return Sa(this,void 0,void 0,function*(){return this.send("POST",e,n,i,r)})}put(e,r,n,i){return Sa(this,void 0,void 0,function*(){return this.send("PUT",e,n,i,r)})}cancelAllRequests(){return Sa(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,r,n,i,s){return Sa(this,void 0,void 0,function*(){const o=n?this.getHeaders(n):void 0,a=i?this.getParams(i):void 0;let c;try{c=yield Kf.request({method:e,url:r,baseURL:this.apiUrl(W7),headers:o,data:s,params:a,cancelToken:this.cancelTokenSource.token})}catch(l){const f=l;throw z7.error("send",f.code,f.message,f.response.data),l.response.data}return c.data})}getHeaders(e){const r={},n=[];if(e.accessToken&&n.push(["Authorization",`Bearer ${e.accessToken}`]),n.length!==0){for(const[i,s]of n)r[i]=s;return r}}getParams(e){if(!e)return;const r=Object.assign(e,{});return l0(r).forEach(n=>r[n]===void 0&&delete r[n]),r}apiUrl(...e){const r=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,n=e.map(i=>i.startsWith("/")?i.substr(1):i);return[r,...n].join("/")}}var Gc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class J7{constructor(e){this.httpClient=e}createRoom(e,r={}){return Gc(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",r,{accessToken:e})})}inviteToRoom(e,r,n){return Gc(this,void 0,void 0,function*(){return n.status!==mr.JOINED&&n.status!==mr.UNKNOWN?Promise.reject(`User is not a member of room ${n.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(n.id)}/invite`,{user_id:r},{accessToken:e})})}joinRoom(e,r){return Gc(this,void 0,void 0,function*(){return r.status===mr.JOINED?Promise.resolve({room_id:r.id}):this.httpClient.post(`/rooms/${encodeURIComponent(r.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return Gc(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var Y7=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Q7{constructor(e){this.httpClient=e}login(e,r,n){return Y7(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:r,device_id:n})})}}var pd=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Z7{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,r){return pd(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:r?r.pollingTimeout:void 0,since:r?r.syncToken:void 0},{accessToken:e}))})}sendMessage(e,r,n,i){return pd(this,void 0,void 0,function*(){return new Promise((s,o)=>this.scheduleEvent({accessToken:e,roomId:r,type:"m.room.message",content:n,txnId:i,onSuccess:s,onError:o}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return pd(this,void 0,void 0,function*(){const{roomId:r,type:n,txnId:i,content:s,accessToken:o}=e;try{const a=yield this.httpClient.put(`/rooms/${encodeURIComponent(r)}/send/${n}/${encodeURIComponent(i)}`,s,{accessToken:o});e.onSuccess(a)}catch(a){e.onError(a)}})}withCache(e,r){let n=this.cachedPromises.get(e);return n||(n=r().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,n)),n}}class eI{constructor(){this.events={}}on(e,r){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(r),()=>this.removeListener(e,r)}removeListener(e,r){if(typeof this.events[e]!="object")return;if(!r){this.events[e]=[];return}const n=this.events[e].indexOf(r);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...r){typeof this.events[e]=="object"&&[...this.events[e]].forEach(n=>n.apply(this,r))}once(e,r){const n=this.on(e,(...i)=>{n(),r.apply(this,i)});return n}}var Hr;(function(t){t.INVITE="invite",t.MESSAGE="message"})(Hr||(Hr={}));class tI extends eI{constructor(){super(...arguments),this.eventEmitProviders=new Map([[Hr.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[Hr.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,r,n){for(const i of l0(Hr))this.emitIfEvent(Hr[i],n)}emitIfEvent(e,r){const n=this.eventEmitProviders.get(e);if(n){const[i,s]=n();i(r)&&s(e,r)}}emitClientEvent(e,r,n){this.emit(e,{type:e,content:r,timestamp:n})}isInvite(e){return e.rooms?e.rooms.some(r=>r.status===mr.INVITED):!1}emitInvite(e,r){r.rooms.filter(n=>n.status===mr.INVITED).map(n=>[n.id,n.members]).forEach(([n,i])=>{this.emitClientEvent(e,{roomId:n,members:i})})}isMessage(e){return e.rooms?e.rooms.some(r=>r.messages.length>0):!1}emitMessage(e,r){r.rooms.filter(n=>n.messages.length>0).map(n=>n.messages.map(i=>[n.id,i,i.timestamp])).reduce((n,i)=>n.concat(i),[]).forEach(([n,i,s])=>{this.emitClientEvent(e,{roomId:n,message:i},s)})}}var At=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const gd=new Yr("MatrixClient"),rI=3,nI=5e3;class v0{constructor(e,r,n,i,s,o){this.store=e,this.eventEmitter=r,this.userService=n,this.roomService=i,this.eventService=s,this.httpClient=o,this.isActive=!0,this._isReady=new Jt,this.store.onStateChanged((a,c,l)=>{this.eventEmitter.onStateChanged(a,c,l)},"rooms")}static create(e){const r=new $7(e.storage),n=new tI,i=new X7(e.baseUrl),s=new Q7(i),o=new J7(i),a=new Z7(i);return new v0(r,n,s,o,a,i)}get joinedRooms(){return new Promise(e=>At(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===mr.JOINED))}))}get invitedRooms(){return new Promise(e=>At(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===mr.INVITED))}))}get leftRooms(){return new Promise(e=>At(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===mr.LEFT))}))}start(e){return At(this,void 0,void 0,function*(){const r=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:r.access_token});const n=new Promise((i,s)=>At(this,void 0,void 0,function*(){yield this.poll(0,o=>At(this,void 0,void 0,function*(){this.store.get("isRunning")||i(),yield this.store.update({isRunning:!0,syncToken:o.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:Nt.fromSync(o.rooms)})}),o=>At(this,void 0,void 0,function*(){this.store.get("isRunning")||s(o),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return n.then(()=>{this._isReady.resolve()}).catch(console.error),n})}isConnected(){return At(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return At(this,void 0,void 0,function*(){return gd.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new Jt,this.httpClient.cancelAllRequests()})}subscribe(e,r){this.eventEmitter.on(e,r)}unsubscribe(e,r){r&&this.eventEmitter.removeListener(e,r)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return At(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return At(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",r=>At(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(r,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...r){return At(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",n=>Promise.all(r.map(i=>{const s=this.store.getRoom(i);this.roomService.inviteToRoom(n,e,s).catch(o=>gd.warn("inviteToRooms",o))})))})}joinRooms(...e){return At(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",r=>Promise.all(e.map(n=>{const i=this.store.getRoom(n);return this.roomService.joinRoom(r,i)})))})}sendTextMessage(e,r){return At(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",n=>At(this,void 0,void 0,function*(){const i=yield this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:r},i)}))})}poll(e,r,n){return At(this,void 0,void 0,function*(){const i=this.store,s=this.sync.bind(this),o=(a,c)=>At(this,void 0,void 0,function*(){let l=0;try{const f=yield s();r(f)}catch(f){n(f),l=i.get("pollingRetries"),this.isActive&&gd.log(`Retry syncing... ${l} retries so far`)}finally{this.isActive?setTimeout(()=>At(this,void 0,void 0,function*(){yield o(a,c)}),l>rI?nI+e:e):c(new Error("Syncing stopped manually."))}});return new Promise(o)})}sync(){return At(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>At(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,r){return At(this,void 0,void 0,function*(){const n=this.store.get("accessToken");return n?r(n):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return At(this,void 0,void 0,function*(){const e=new Date().getTime(),r=this.store.get("txnNo");return yield this.store.update({txnNo:r+1}),`m${e}.${r}`})}}var rt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ie=new Yr("P2PCommunicationClient"),lg={[Qd.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"]};class iI extends Zm{constructor(e,r,n,i,s,o,a){super(r),this.name=e,this.replicationCount=n,this.storage=i,this.iconUrl=o,this.appUrl=a,this.client=new Jt,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,Ie.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=lg,s&&(this.ENABLED_RELAY_SERVERS=Object.assign(Object.assign({},lg),s))}getPairingRequestInfo(){return rt(this,void 0,void 0,function*(){const e={id:yield Vi(),type:"p2p-pairing-request",name:this.name,version:Wm,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return rt(this,void 0,void 0,function*(){const r={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(r.icon=this.iconUrl),this.appUrl&&(r.appUrl=this.appUrl),r})}findBestRegion(){return rt(this,void 0,void 0,function*(){if(this.selectedRegion)return this.selectedRegion;const e=Object.keys(this.ENABLED_RELAY_SERVERS),r=[];e.forEach(i=>{var s;const o=(s=this.ENABLED_RELAY_SERVERS[i])!==null&&s!==void 0?s:[],a=Math.floor(Math.random()*o.length);r.push(this.getBeaconInfo(o[a]).then(c=>({region:i,server:o[a],response:c})).catch(c=>new Promise((l,f)=>{setTimeout(()=>f(c),2e3)})))});const n=yield Promise.race(r);return this.selectedRegion=n.region,n.region})}getRelayServer(){return rt(this,void 0,void 0,function*(){if(this.relayServer){const s=yield this.relayServer.promise;if(Date.now()-s.localTimestamp<60*1e3)return{server:s.server,timestamp:s.timestamp};const o=yield this.getBeaconInfo(s.server);return this.relayServer.resolve({server:s.server,timestamp:o.timestamp,localTimestamp:new Date().getTime()}),{server:s.server,timestamp:o.timestamp}}else this.relayServer=new Jt;const e=yield this.storage.get(De.MATRIX_SELECTED_NODE);if(e&&e.length>0){const s=yield this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:s.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:s.timestamp}}const r=yield this.findBestRegion(),n=this.ENABLED_RELAY_SERVERS[r];if(!n)throw new Error(`No servers found for region ${r}`);const i=[...n];for(;i.length>0;){const s=Math.floor(Math.random()*i.length),o=i[s];try{const a=yield this.getBeaconInfo(o);return this.storage.set(De.MATRIX_SELECTED_NODE,o).catch(c=>Ie.log(c)),this.relayServer.resolve({server:o,timestamp:a.timestamp,localTimestamp:new Date().getTime()}),{server:o,timestamp:a.timestamp}}catch{Ie.log(`Ignoring server "${o}", trying another one...`),i.splice(s,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}getBeaconInfo(e){return rt(this,void 0,void 0,function*(){return Kf.get(`https://${e}/_synapse/client/beacon/info`).then(r=>({region:r.data.region,known_servers:r.data.known_servers,timestamp:Math.floor(r.data.timestamp)}))})}tryJoinRooms(e,r=1){return rt(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(n){r<=10&&n.errcode==="M_FORBIDDEN"?(Ie.log("Retrying to join...",n),setTimeout(()=>rt(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,r+1)}),200)):Ie.log(`Failed to join after ${r} tries.`,n)}})}start(){var e,r;return rt(this,void 0,void 0,function*(){Ie.log("start","starting client"),Ie.log("start","connecting to server");const n=yield this.getRelayServer(),i=v0.create({baseUrl:`https://${n.server}`,storage:this.storage});if(this.initialListener=f=>rt(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&f&&f.timestamp?this.initialEvent.timestamp<f.timestamp&&(this.initialEvent=f):this.initialEvent=f}),i.subscribe(Hr.MESSAGE,this.initialListener),i.subscribe(Hr.INVITE,f=>rt(this,void 0,void 0,function*(){let d;f.content.members.length===1&&(d=f.content.members[0]),yield this.tryJoinRooms(f.content.roomId),d&&(yield this.updateRelayServer(d),yield this.updatePeerRoom(d,f.content.roomId))})),!n.timestamp)throw new Error("No timestamp received from relay server");const s=Math.floor(n.timestamp),o=`login:${Math.floor(s/(5*60))}`;Ie.log("start",`login ${o}, ${yield this.getPublicKeyHash()} on ${n.server}`);const a=on.hash(xs(o),32),c=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,l=Fr.sign(c,a);try{yield i.start({id:yield this.getPublicKeyHash(),password:`ed:${Gi(l)}:${yield this.getPublicKey()}`,deviceId:Gi(this.keyPair.publicKey)})}catch{if(Ie.error("start","Could not log in, retrying"),yield this.reset(),!this.selectedRegion)throw new Error("No region selected.");if(this.loginCounter<=((r=this.ENABLED_RELAY_SERVERS[this.selectedRegion])!==null&&r!==void 0?r:[]).length){this.loginCounter++,this.start();return}else throw Ie.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}Ie.log("start","login successful, client is ready"),this.client.resolve(i)})}stop(){return rt(this,void 0,void 0,function*(){Ie.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>Ie.error(e))),yield this.reset()})}reset(){return rt(this,void 0,void 0,function*(){Ie.log("reset","resetting connection"),yield this.storage.delete(De.MATRIX_PEER_ROOM_IDS).catch(e=>Ie.log(e)),yield this.storage.delete(De.MATRIX_PRESERVED_STATE).catch(e=>Ie.log(e)),yield this.storage.delete(De.MATRIX_SELECTED_NODE).catch(e=>Ie.log(e)),this.relayServer=void 0,this.client=new Jt,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,r){return rt(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;Ie.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const n=yield this.createCryptoBoxServer(e,this.keyPair),i=a=>rt(this,void 0,void 0,function*(){if(this.isTextMessage(a.content)&&(yield this.isSender(a,e))){let c;yield this.updateRelayServer(a.content.message.sender),yield this.updatePeerRoom(a.content.message.sender,a.content.roomId);try{c=ge.Buffer.from(a.content.message.content,"hex")}catch{}if(c&&c.length>=Cf+Bf)try{const l=yield $m(c,n.receive);Ie.log("listenForEncryptedMessage",`received a message from ${e}`,l),r(l)}catch{}}});this.activeListeners.set(e,i),(yield this.client.promise).subscribe(Hr.MESSAGE,i);const s=this.initialEvent;s&&s.timestamp&&new Date().getTime()-s.timestamp<5*60*1e3?(Ie.log("listenForEncryptedMessage","Handling previous event"),yield i(s)):Ie.log("listenForEncryptedMessage","No previous event found");const o=this.initialListener;o&&(yield this.client.promise).unsubscribe(Hr.MESSAGE,o),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return rt(this,void 0,void 0,function*(){const r=this.activeListeners.get(e);r&&((yield this.client.promise).unsubscribe(Hr.MESSAGE,r),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return rt(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(Hr.MESSAGE),this.activeListeners.clear()})}sendMessage(e,r){return rt(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(r.publicKey,this.keyPair),i=yield Eo(ge.Buffer.from(r.publicKey,"hex")),s=B1(i,r.relayServer),o=yield this.getRelevantRoom(s);yield this.waitForJoin(o);const a=yield qm(e,n.send);Ie.log("sendMessage","sending encrypted message",r.publicKey,o,e),(yield this.client.promise).sendTextMessage(o,a).catch(c=>rt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Ie.log("sendMessage","M_FORBIDDEN",o,c),yield this.deleteRoomIdFromRooms(o);const l=yield this.getRelevantRoom(s);Ie.log("sendMessage","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>rt(this,void 0,void 0,function*(){Ie.log("sendMessage","inner error",l,f)}))}else Ie.log("sendMessage","unexpected error",c)}))})}updatePeerRoom(e,r){return rt(this,void 0,void 0,function*(){Ie.log("updatePeerRoom",e,r);const n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw new Error("Invalid sender");const i=yield this.storage.get(De.MATRIX_PEER_ROOM_IDS),s=i[e];s===r&&Ie.debug("updatePeerRoom","rooms are the same, not updating"),Ie.debug("updatePeerRoom","current room",s,"new room",r),s&&s[1]&&(Ie.log("updatePeerRoom",`adding room "${s[1]}" to ignored array`),this.ignoredRooms.push(s[1])),i[e]=r,yield this.storage.set(De.MATRIX_PEER_ROOM_IDS,i)})}deleteRoomIdFromRooms(e){return rt(this,void 0,void 0,function*(){const r=yield this.storage.get(De.MATRIX_PEER_ROOM_IDS),n=Object.entries(r).filter(i=>i[1]!==e).reduce((i,s)=>Object.assign(Object.assign({},i),{[s[0]]:s[1]}),{});yield this.storage.set(De.MATRIX_PEER_ROOM_IDS,n),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return rt(this,void 0,void 0,function*(){Ie.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(Hr.MESSAGE,r=>rt(this,void 0,void 0,function*(){if(this.isTextMessage(r.content)&&(yield this.isChannelOpenMessage(r.content))){Ie.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(r)),yield this.updateRelayServer(r.content.message.sender),yield this.updatePeerRoom(r.content.message.sender,r.content.roomId);const n=r.content.message.content.split(":"),i=ge.Buffer.from(n[n.length-1],"hex");if(i.length>=Cf+Bf)try{const s=JSON.parse(yield zm(i,this.keyPair.publicKey,this.keyPair.secretKey));Ie.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(s)),e(Object.assign(Object.assign({},s),{senderId:yield Xo(s.publicKey)}))}catch{}}}))})}waitForJoin(e,r=0){return rt(this,void 0,void 0,function*(){const n=yield(yield this.client.promise).getRoomById(e);if(Ie.log("waitForJoin",`Currently ${n.members.length} members, we need at least 2`),!(n.members.length>=2||n.members.length===0)){if(r<=200)return Ie.log(`Waiting for join... Try: ${r}`),new Promise(i=>{setTimeout(()=>rt(this,void 0,void 0,function*(){i(this.waitForJoin(e,r+1))}),100*(r>50?10:1))});throw new Error(`No one joined after ${r} tries.`)}})}sendPairingResponse(e){return rt(this,void 0,void 0,function*(){Ie.log("sendPairingResponse");const r=yield Eo(ge.Buffer.from(e.publicKey,"hex")),n=B1(r,e.relayServer),i=yield(yield this.client.promise).createTrustedPrivateRoom(n);Ie.debug("sendPairingResponse",`Connecting to room "${i}"`),yield this.updatePeerRoom(n,i),yield this.waitForJoin(i),Ie.debug("sendPairingResponse","Successfully joined room.");const s=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));Ie.debug("sendPairingResponse","Sending pairing response",s);const o=yield this.encryptMessageAsymmetric(e.publicKey,s),a=["@channel-open",n,o].join(":");(yield this.client.promise).sendTextMessage(i,a).catch(c=>rt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Ie.log("sendPairingResponse","M_FORBIDDEN",i,c),yield this.deleteRoomIdFromRooms(i);const l=yield this.getRelevantRoom(n);Ie.log("sendPairingResponse","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>rt(this,void 0,void 0,function*(){Ie.log("sendPairingResponse","inner error",l,f)}))}else Ie.log("sendPairingResponse","unexpected error",c)}))})}isTextMessage(e){return e.message.type===Hf.TEXT}updateRelayServer(e){return rt(this,void 0,void 0,function*(){Ie.log("updateRelayServer",e);const r=e.split(":");if(r.length<2||!r[0].startsWith("@"))throw new Error("Invalid sender");const n=r.shift(),i=r.join(":"),s=localStorage.getItem("beacon:communication-peers-dapp")?new Df(this.storage,De.TRANSPORT_P2P_PEERS_DAPP):new Df(this.storage,De.TRANSPORT_P2P_PEERS_WALLET),a=(yield s.getPeers()).map(c=>rt(this,void 0,void 0,function*(){`@${yield Eo(ge.Buffer.from(c.publicKey,"hex"))}`===n&&c.relayServer!==i&&(c.relayServer=i,yield s.addPeer(c))}));yield Promise.all(a)})}isChannelOpenMessage(e){return rt(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield Eo(ge.Buffer.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,r){return rt(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield Eo(ge.Buffer.from(r,"hex"))}`)})}getRelevantRoom(e){return rt(this,void 0,void 0,function*(){const r=yield this.storage.get(De.MATRIX_PEER_ROOM_IDS);let n=r[e];if(!n){Ie.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const i=yield this.getRelevantJoinedRoom(e);n=i.id,r[e]=i.id,yield this.storage.set(De.MATRIX_PEER_ROOM_IDS,r)}return Ie.log("getRelevantRoom",`Using room ${n}`),n})}getRelevantJoinedRoom(e){return rt(this,void 0,void 0,function*(){const r=yield(yield this.client.promise).joinedRooms;Ie.log("checking joined rooms",r,e);const n=r.filter(s=>!this.ignoredRooms.some(o=>s.id===o)).filter(s=>s.members.some(o=>o===e));let i;if(n.length===0||this.ignoredRooms.length>0){Ie.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const s=yield(yield this.client.promise).createTrustedPrivateRoom(e);i=yield(yield this.client.promise).getRoomById(s),Ie.log("getRelevantJoinedRoom",`waiting for other party to join room: ${i.id}`),yield this.waitForJoin(s),Ie.log("getRelevantJoinedRoom",`new room created and peer invited: ${i.id}`)}else i=n[0],Ie.log("getRelevantJoinedRoom",`channel already open, reusing room ${i.id}`);return i})}}var Bs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const bd=new Yr("P2PTransport");class sI extends Ym{constructor(e,r,n,i,s,o,a){super(e,new iI(e,r,1,n,i,o,a),new Df(n,s)),this.type=Ys.P2P}static isAvailable(){return Bs(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Bs(this,void 0,void 0,function*(){if(this._isConnected!==sn.NOT_CONNECTED)return;bd.log("connect"),this._isConnected=sn.CONNECTING,yield this.client.start();const r=yield this.getPeers();if(r.length>0){bd.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Bs(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>bd.error("connect",i))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return Bs(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return Bs(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Bs(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Bs(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,r=>{const n={origin:wn.P2P,id:e};this.notifyListeners(r,n).catch(i=>{throw i})}).catch(r=>{throw r})})}}var bi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class oI extends W9{constructor(){super(...arguments),this.activeListeners=new Map}init(){return bi(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,r){return bi(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const n=(i,s)=>bi(this,void 0,void 0,function*(){try{const o=yield this.decryptMessage(e,i.encryptedPayload);r(o,s)}catch{}});this.activeListeners.set(e,n)})}sendMessage(e,r){return bi(this,void 0,void 0,function*(){const n=yield this.encryptMessage(r.publicKey,e),i=r==null?void 0:r.extensionId,s={target:Di.EXTENSION,encryptedPayload:n,targetId:i};ot.postMessage(s,ot.location.origin)})}listenForChannelOpening(e){return bi(this,void 0,void 0,function*(){const r=n=>bi(this,void 0,void 0,function*(){var i,s;if(n.source!==ot||n.origin!==ot.location.origin)return;const o=(i=n==null?void 0:n.data)===null||i===void 0?void 0:i.message;if(o&&o.target===Di.PAGE&&(yield this.isChannelOpenMessage(o))){const a=ge.Buffer.from(o.payload,"hex");if(a.length>=Cf+Bf)try{const c=JSON.parse(yield zm(a,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},c),{senderId:yield Xo(c.publicKey),extensionId:(s=n==null?void 0:n.data)===null||s===void 0?void 0:s.sender.id}))}catch{}}});ot.addEventListener("message",r)})}sendPairingRequest(e){return bi(this,void 0,void 0,function*(){const r={target:Di.EXTENSION,payload:yield new Qs().serialize(yield this.getPairingRequestInfo()),targetId:e};ot.postMessage(r,ot.location.origin)})}isChannelOpenMessage(e){return bi(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return bi(this,void 0,void 0,function*(){ot.addEventListener("message",e=>{if(!(e.source!==ot||e.origin!==ot.location.origin)&&typeof e=="object"&&e){const r=e.data;r.message&&r.message.target===Di.PAGE&&this.activeListeners.forEach(n=>{n(r.message,{origin:wn.EXTENSION,id:r.sender.id||""})})}})})}}var ks=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ra=new Yr("PostMessageTransport");let dg=!1,Ia,Jn;const aI=t=>{Jn||(Jn=[]),Jn.some(e=>e.id===t.id)||(Jn.push(t),ot.postMessage("extensionsUpdated",ot.location.origin))};class bc extends Ym{constructor(e,r,n,i){super(e,new oI(e,r),new Df(n,i)),this.type=Ys.POST_MESSAGE}static isAvailable(){return ks(this,void 0,void 0,function*(){return new Promise(e=>{const r=i=>{const s=i.data;s&&s.payload==="pong"&&(e(!0),ot.removeEventListener("message",r))};ot.addEventListener("message",r);const n={target:Di.EXTENSION,payload:"ping"};ot.postMessage(n,ot.location.origin)})})}static getAvailableExtensions(){return ks(this,void 0,void 0,function*(){return Ia||Jn||(Jn=[],Ia=new Promise(e=>{bc.listenForExtensions(),setTimeout(()=>{e(Jn??[])},1e3)}).finally(()=>{Ia=void 0}),Ia)})}static listenForExtensions(){if(dg)return;const e=n=>{if(n.source!==ot||n.origin!==ot.location.origin)return;const i=n.data,s=i.sender;i&&i.payload==="pong"&&s&&(Ra.log("getAvailableExtensions",`extension "${s.name}" is available`,s),aI(s))};ot.addEventListener("message",e);const r={target:Di.EXTENSION,payload:"ping"};ot.postMessage(r,ot.location.origin),dg=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return ks(this,void 0,void 0,function*(){if(Ra.log("connect"),this._isConnected!==sn.NOT_CONNECTED)return;this._isConnected=sn.CONNECTING;const r=yield this.getPeers();if(r.length>0){Ra.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>ks(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>Ra.error("connect",i))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return ks(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return ks(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return ks(this,void 0,void 0,function*(){Ra.log("listen",e),yield this.client.listenForEncryptedMessage(e,(r,n)=>{const i={origin:wn.EXTENSION,id:n.id};this.notifyListeners(r,i).catch(s=>{throw s})}).catch(r=>{throw r})})}}const hg={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}

.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},Ff=(t,e)=>e.test(t.navigator.userAgent),cI=(t,e)=>t.matchMedia(e).matches,nh=t=>cI(t,"(any-pointer:coarse)"),fI=t=>!!(Ff(t,/iPad/i)||Ff(t,/Macintosh/i)&&nh(t)),h2=t=>Ff(t,/iPhone|iPod/i)||fI(t),p2=t=>Ff(t,/android|sink/i);var jf={},uI={get exports(){return jf},set exports(t){jf=t}};(function(t,e){var r=function(){var n=function(j,G){var E=236,y=17,T=j,x=s[G],_=null,u=0,p=null,b=[],g={},h=function(k,B){u=T*4+17,_=function(v){for(var R=new Array(v),N=0;N<v;N+=1){R[N]=new Array(v);for(var $=0;$<v;$+=1)R[N][$]=null}return R}(u),S(0,0),S(u-7,0),S(0,u-7),m(),w(),ee(k,B),T>=7&&M(k),p==null&&(p=ae(T,x,b)),Z(p,B)},S=function(k,B){for(var v=-1;v<=7;v+=1)if(!(k+v<=-1||u<=k+v))for(var R=-1;R<=7;R+=1)B+R<=-1||u<=B+R||(0<=v&&v<=6&&(R==0||R==6)||0<=R&&R<=6&&(v==0||v==6)||2<=v&&v<=4&&2<=R&&R<=4?_[k+v][B+R]=!0:_[k+v][B+R]=!1)},P=function(){for(var k=0,B=0,v=0;v<8;v+=1){h(!0,v);var R=a.getLostPoint(g);(v==0||k>R)&&(k=R,B=v)}return B},w=function(){for(var k=8;k<u-8;k+=1)_[k][6]==null&&(_[k][6]=k%2==0);for(var B=8;B<u-8;B+=1)_[6][B]==null&&(_[6][B]=B%2==0)},m=function(){for(var k=a.getPatternPosition(T),B=0;B<k.length;B+=1)for(var v=0;v<k.length;v+=1){var R=k[B],N=k[v];if(_[R][N]==null)for(var $=-2;$<=2;$+=1)for(var re=-2;re<=2;re+=1)$==-2||$==2||re==-2||re==2||$==0&&re==0?_[R+$][N+re]=!0:_[R+$][N+re]=!1}},M=function(k){for(var B=a.getBCHTypeNumber(T),v=0;v<18;v+=1){var R=!k&&(B>>v&1)==1;_[Math.floor(v/3)][v%3+u-8-3]=R}for(var v=0;v<18;v+=1){var R=!k&&(B>>v&1)==1;_[v%3+u-8-3][Math.floor(v/3)]=R}},ee=function(k,B){for(var v=x<<3|B,R=a.getBCHTypeInfo(v),N=0;N<15;N+=1){var $=!k&&(R>>N&1)==1;N<6?_[N][8]=$:N<8?_[N+1][8]=$:_[u-15+N][8]=$}for(var N=0;N<15;N+=1){var $=!k&&(R>>N&1)==1;N<8?_[8][u-N-1]=$:N<9?_[8][15-N-1+1]=$:_[8][15-N-1]=$}_[u-8][8]=!k},Z=function(k,B){for(var v=-1,R=u-1,N=7,$=0,re=a.getMaskFunction(B),ie=u-1;ie>0;ie-=2)for(ie==6&&(ie-=1);;){for(var fe=0;fe<2;fe+=1)if(_[R][ie-fe]==null){var he=!1;$<k.length&&(he=(k[$]>>>N&1)==1);var le=re(R,ie-fe);le&&(he=!he),_[R][ie-fe]=he,N-=1,N==-1&&($+=1,N=7)}if(R+=v,R<0||u<=R){R-=v,v=-v;break}}},oe=function(k,B){for(var v=0,R=0,N=0,$=new Array(B.length),re=new Array(B.length),ie=0;ie<B.length;ie+=1){var fe=B[ie].dataCount,he=B[ie].totalCount-fe;R=Math.max(R,fe),N=Math.max(N,he),$[ie]=new Array(fe);for(var le=0;le<$[ie].length;le+=1)$[ie][le]=255&k.getBuffer()[le+v];v+=fe;var _e=a.getErrorCorrectPolynomial(he),Ae=l($[ie],_e.getLength()-1),Ee=Ae.mod(_e);re[ie]=new Array(_e.getLength()-1);for(var le=0;le<re[ie].length;le+=1){var be=le+Ee.getLength()-re[ie].length;re[ie][le]=be>=0?Ee.getAt(be):0}}for(var Oe=0,le=0;le<B.length;le+=1)Oe+=B[le].totalCount;for(var me=new Array(Oe),pe=0,le=0;le<R;le+=1)for(var ie=0;ie<B.length;ie+=1)le<$[ie].length&&(me[pe]=$[ie][le],pe+=1);for(var le=0;le<N;le+=1)for(var ie=0;ie<B.length;ie+=1)le<re[ie].length&&(me[pe]=re[ie][le],pe+=1);return me},ae=function(k,B,v){for(var R=f.getRSBlocks(k,B),N=d(),$=0;$<v.length;$+=1){var re=v[$];N.put(re.getMode(),4),N.put(re.getLength(),a.getLengthInBits(re.getMode(),k)),re.write(N)}for(var ie=0,$=0;$<R.length;$+=1)ie+=R[$].dataCount;if(N.getLengthInBits()>ie*8)throw"code length overflow. ("+N.getLengthInBits()+">"+ie*8+")";for(N.getLengthInBits()+4<=ie*8&&N.put(0,4);N.getLengthInBits()%8!=0;)N.putBit(!1);for(;!(N.getLengthInBits()>=ie*8||(N.put(E,8),N.getLengthInBits()>=ie*8));)N.put(y,8);return oe(N,R)};g.addData=function(k,B){B=B||"Byte";var v=null;switch(B){case"Numeric":v=O(k);break;case"Alphanumeric":v=L(k);break;case"Byte":v=D(k);break;case"Kanji":v=z(k);break;default:throw"mode:"+B}b.push(v),p=null},g.isDark=function(k,B){if(k<0||u<=k||B<0||u<=B)throw k+","+B;return _[k][B]},g.getModuleCount=function(){return u},g.make=function(){if(T<1){for(var k=1;k<40;k++){for(var B=f.getRSBlocks(k,x),v=d(),R=0;R<b.length;R++){var N=b[R];v.put(N.getMode(),4),v.put(N.getLength(),a.getLengthInBits(N.getMode(),k)),N.write(v)}for(var $=0,R=0;R<B.length;R++)$+=B[R].dataCount;if(v.getLengthInBits()<=$*8)break}T=k}h(!1,P())},g.createTableTag=function(k,B){k=k||2,B=typeof B>"u"?k*4:B;var v="";v+='<table style="',v+=" border-width: 0px; border-style: none;",v+=" border-collapse: collapse;",v+=" padding: 0px; margin: "+B+"px;",v+='">',v+="<tbody>";for(var R=0;R<g.getModuleCount();R+=1){v+="<tr>";for(var N=0;N<g.getModuleCount();N+=1)v+='<td style="',v+=" border-width: 0px; border-style: none;",v+=" border-collapse: collapse;",v+=" padding: 0px; margin: 0px;",v+=" width: "+k+"px;",v+=" height: "+k+"px;",v+=" background-color: ",v+=g.isDark(R,N)?"#000000":"#ffffff",v+=";",v+='"/>';v+="</tr>"}return v+="</tbody>",v+="</table>",v},g.createSvgTag=function(k,B,v,R){var N={};typeof arguments[0]=="object"&&(N=arguments[0],k=N.cellSize,B=N.margin,v=N.alt,R=N.title),k=k||2,B=typeof B>"u"?k*4:B,v=typeof v=="string"?{text:v}:v||{},v.text=v.text||null,v.id=v.text?v.id||"qrcode-description":null,R=typeof R=="string"?{text:R}:R||{},R.text=R.text||null,R.id=R.text?R.id||"qrcode-title":null;var $=g.getModuleCount()*k+B*2,re,ie,fe,he,le="",_e;for(_e="l"+k+",0 0,"+k+" -"+k+",0 0,-"+k+"z ",le+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',le+=N.scalable?"":' width="'+$+'px" height="'+$+'px"',le+=' viewBox="0 0 '+$+" "+$+'" ',le+=' preserveAspectRatio="xMinYMin meet"',le+=R.text||v.text?' role="img" aria-labelledby="'+X([R.id,v.id].join(" ").trim())+'"':"",le+=">",le+=R.text?'<title id="'+X(R.id)+'">'+X(R.text)+"</title>":"",le+=v.text?'<description id="'+X(v.id)+'">'+X(v.text)+"</description>":"",le+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',le+='<path d="',fe=0;fe<g.getModuleCount();fe+=1)for(he=fe*k+B,re=0;re<g.getModuleCount();re+=1)g.isDark(fe,re)&&(ie=re*k+B,le+="M"+ie+","+he+_e);return le+='" stroke="transparent" fill="black"/>',le+="</svg>",le},g.createDataURL=function(k,B){k=k||2,B=typeof B>"u"?k*4:B;var v=g.getModuleCount()*k+B*2,R=B,N=v-B;return F(v,v,function($,re){if(R<=$&&$<N&&R<=re&&re<N){var ie=Math.floor(($-R)/k),fe=Math.floor((re-R)/k);return g.isDark(fe,ie)?0:1}else return 1})},g.createImgTag=function(k,B,v){k=k||2,B=typeof B>"u"?k*4:B;var R=g.getModuleCount()*k+B*2,N="";return N+="<img",N+=' src="',N+=g.createDataURL(k,B),N+='"',N+=' width="',N+=R,N+='"',N+=' height="',N+=R,N+='"',v&&(N+=' alt="',N+=X(v),N+='"'),N+="/>",N};var X=function(k){for(var B="",v=0;v<k.length;v+=1){var R=k.charAt(v);switch(R){case"<":B+="&lt;";break;case">":B+="&gt;";break;case"&":B+="&amp;";break;case'"':B+="&quot;";break;default:B+=R;break}}return B},K=function(k){var B=1;k=typeof k>"u"?B*2:k;var v=g.getModuleCount()*B+k*2,R=k,N=v-k,$,re,ie,fe,he,le={"██":"█","█ ":"▀"," █":"▄","  ":" "},_e={"██":"▀","█ ":"▀"," █":" ","  ":" "},Ae="";for($=0;$<v;$+=2){for(ie=Math.floor(($-R)/B),fe=Math.floor(($+1-R)/B),re=0;re<v;re+=1)he="█",R<=re&&re<N&&R<=$&&$<N&&g.isDark(ie,Math.floor((re-R)/B))&&(he=" "),R<=re&&re<N&&R<=$+1&&$+1<N&&g.isDark(fe,Math.floor((re-R)/B))?he+=" ":he+="█",Ae+=k<1&&$+1>=N?_e[he]:le[he];Ae+=`
`}return v%2&&k>0?Ae.substring(0,Ae.length-v-1)+Array(v+1).join("▀"):Ae.substring(0,Ae.length-1)};return g.createASCII=function(k,B){if(k=k||1,k<2)return K(B);k-=1,B=typeof B>"u"?k*2:B;var v=g.getModuleCount()*k+B*2,R=B,N=v-B,$,re,ie,fe,he=Array(k+1).join("██"),le=Array(k+1).join("  "),_e="",Ae="";for($=0;$<v;$+=1){for(ie=Math.floor(($-R)/k),Ae="",re=0;re<v;re+=1)fe=1,R<=re&&re<N&&R<=$&&$<N&&g.isDark(ie,Math.floor((re-R)/k))&&(fe=0),Ae+=fe?he:le;for(ie=0;ie<k;ie+=1)_e+=Ae+`
`}return _e.substring(0,_e.length-1)},g.renderTo2dContext=function(k,B){B=B||2;for(var v=g.getModuleCount(),R=0;R<v;R++)for(var N=0;N<v;N++)k.fillStyle=g.isDark(R,N)?"black":"white",k.fillRect(R*B,N*B,B,B)},g};n.stringToBytesFuncs={default:function(j){for(var G=[],E=0;E<j.length;E+=1){var y=j.charCodeAt(E);G.push(y&255)}return G}},n.stringToBytes=n.stringToBytesFuncs.default,n.createStringToBytes=function(j,G){var E=function(){for(var T=U(j),x=function(){var w=T.read();if(w==-1)throw"eof";return w},_=0,u={};;){var p=T.read();if(p==-1)break;var b=x(),g=x(),h=x(),S=String.fromCharCode(p<<8|b),P=g<<8|h;u[S]=P,_+=1}if(_!=G)throw _+" != "+G;return u}(),y="?".charCodeAt(0);return function(T){for(var x=[],_=0;_<T.length;_+=1){var u=T.charCodeAt(_);if(u<128)x.push(u);else{var p=E[T.charAt(_)];typeof p=="number"?(p&255)==p?x.push(p):(x.push(p>>>8),x.push(p&255)):x.push(y)}}return x}};var i={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},s={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var j=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,E=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,y=1<<14|1<<12|1<<10|1<<4|1<<1,T={},x=function(_){for(var u=0;_!=0;)u+=1,_>>>=1;return u};return T.getBCHTypeInfo=function(_){for(var u=_<<10;x(u)-x(G)>=0;)u^=G<<x(u)-x(G);return(_<<10|u)^y},T.getBCHTypeNumber=function(_){for(var u=_<<12;x(u)-x(E)>=0;)u^=E<<x(u)-x(E);return _<<12|u},T.getPatternPosition=function(_){return j[_-1]},T.getMaskFunction=function(_){switch(_){case o.PATTERN000:return function(u,p){return(u+p)%2==0};case o.PATTERN001:return function(u,p){return u%2==0};case o.PATTERN010:return function(u,p){return p%3==0};case o.PATTERN011:return function(u,p){return(u+p)%3==0};case o.PATTERN100:return function(u,p){return(Math.floor(u/2)+Math.floor(p/3))%2==0};case o.PATTERN101:return function(u,p){return u*p%2+u*p%3==0};case o.PATTERN110:return function(u,p){return(u*p%2+u*p%3)%2==0};case o.PATTERN111:return function(u,p){return(u*p%3+(u+p)%2)%2==0};default:throw"bad maskPattern:"+_}},T.getErrorCorrectPolynomial=function(_){for(var u=l([1],0),p=0;p<_;p+=1)u=u.multiply(l([1,c.gexp(p)],0));return u},T.getLengthInBits=function(_,u){if(1<=u&&u<10)switch(_){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw"mode:"+_}else if(u<27)switch(_){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw"mode:"+_}else if(u<41)switch(_){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw"mode:"+_}else throw"type:"+u},T.getLostPoint=function(_){for(var u=_.getModuleCount(),p=0,b=0;b<u;b+=1)for(var g=0;g<u;g+=1){for(var h=0,S=_.isDark(b,g),P=-1;P<=1;P+=1)if(!(b+P<0||u<=b+P))for(var w=-1;w<=1;w+=1)g+w<0||u<=g+w||P==0&&w==0||S==_.isDark(b+P,g+w)&&(h+=1);h>5&&(p+=3+h-5)}for(var b=0;b<u-1;b+=1)for(var g=0;g<u-1;g+=1){var m=0;_.isDark(b,g)&&(m+=1),_.isDark(b+1,g)&&(m+=1),_.isDark(b,g+1)&&(m+=1),_.isDark(b+1,g+1)&&(m+=1),(m==0||m==4)&&(p+=3)}for(var b=0;b<u;b+=1)for(var g=0;g<u-6;g+=1)_.isDark(b,g)&&!_.isDark(b,g+1)&&_.isDark(b,g+2)&&_.isDark(b,g+3)&&_.isDark(b,g+4)&&!_.isDark(b,g+5)&&_.isDark(b,g+6)&&(p+=40);for(var g=0;g<u;g+=1)for(var b=0;b<u-6;b+=1)_.isDark(b,g)&&!_.isDark(b+1,g)&&_.isDark(b+2,g)&&_.isDark(b+3,g)&&_.isDark(b+4,g)&&!_.isDark(b+5,g)&&_.isDark(b+6,g)&&(p+=40);for(var M=0,g=0;g<u;g+=1)for(var b=0;b<u;b+=1)_.isDark(b,g)&&(M+=1);var ee=Math.abs(100*M/u/u-50)/5;return p+=ee*10,p},T}(),c=function(){for(var j=new Array(256),G=new Array(256),E=0;E<8;E+=1)j[E]=1<<E;for(var E=8;E<256;E+=1)j[E]=j[E-4]^j[E-5]^j[E-6]^j[E-8];for(var E=0;E<255;E+=1)G[j[E]]=E;var y={};return y.glog=function(T){if(T<1)throw"glog("+T+")";return G[T]},y.gexp=function(T){for(;T<0;)T+=255;for(;T>=256;)T-=255;return j[T]},y}();function l(j,G){if(typeof j.length>"u")throw j.length+"/"+G;var E=function(){for(var T=0;T<j.length&&j[T]==0;)T+=1;for(var x=new Array(j.length-T+G),_=0;_<j.length-T;_+=1)x[_]=j[_+T];return x}(),y={};return y.getAt=function(T){return E[T]},y.getLength=function(){return E.length},y.multiply=function(T){for(var x=new Array(y.getLength()+T.getLength()-1),_=0;_<y.getLength();_+=1)for(var u=0;u<T.getLength();u+=1)x[_+u]^=c.gexp(c.glog(y.getAt(_))+c.glog(T.getAt(u)));return l(x,0)},y.mod=function(T){if(y.getLength()-T.getLength()<0)return y;for(var x=c.glog(y.getAt(0))-c.glog(T.getAt(0)),_=new Array(y.getLength()),u=0;u<y.getLength();u+=1)_[u]=y.getAt(u);for(var u=0;u<T.getLength();u+=1)_[u]^=c.gexp(c.glog(T.getAt(u))+x);return l(_,0).mod(T)},y}var f=function(){var j=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],G=function(T,x){var _={};return _.totalCount=T,_.dataCount=x,_},E={},y=function(T,x){switch(x){case s.L:return j[(T-1)*4+0];case s.M:return j[(T-1)*4+1];case s.Q:return j[(T-1)*4+2];case s.H:return j[(T-1)*4+3];default:return}};return E.getRSBlocks=function(T,x){var _=y(T,x);if(typeof _>"u")throw"bad rs block @ typeNumber:"+T+"/errorCorrectionLevel:"+x;for(var u=_.length/3,p=[],b=0;b<u;b+=1)for(var g=_[b*3+0],h=_[b*3+1],S=_[b*3+2],P=0;P<g;P+=1)p.push(G(h,S));return p},E}(),d=function(){var j=[],G=0,E={};return E.getBuffer=function(){return j},E.getAt=function(y){var T=Math.floor(y/8);return(j[T]>>>7-y%8&1)==1},E.put=function(y,T){for(var x=0;x<T;x+=1)E.putBit((y>>>T-x-1&1)==1)},E.getLengthInBits=function(){return G},E.putBit=function(y){var T=Math.floor(G/8);j.length<=T&&j.push(0),y&&(j[T]|=128>>>G%8),G+=1},E},O=function(j){var G=i.MODE_NUMBER,E=j,y={};y.getMode=function(){return G},y.getLength=function(_){return E.length},y.write=function(_){for(var u=E,p=0;p+2<u.length;)_.put(T(u.substring(p,p+3)),10),p+=3;p<u.length&&(u.length-p==1?_.put(T(u.substring(p,p+1)),4):u.length-p==2&&_.put(T(u.substring(p,p+2)),7))};var T=function(_){for(var u=0,p=0;p<_.length;p+=1)u=u*10+x(_.charAt(p));return u},x=function(_){if("0"<=_&&_<="9")return _.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+_};return y},L=function(j){var G=i.MODE_ALPHA_NUM,E=j,y={};y.getMode=function(){return G},y.getLength=function(x){return E.length},y.write=function(x){for(var _=E,u=0;u+1<_.length;)x.put(T(_.charAt(u))*45+T(_.charAt(u+1)),11),u+=2;u<_.length&&x.put(T(_.charAt(u)),6)};var T=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-"0".charCodeAt(0);if("A"<=x&&x<="Z")return x.charCodeAt(0)-"A".charCodeAt(0)+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return y},D=function(j){var G=i.MODE_8BIT_BYTE,E=n.stringToBytes(j),y={};return y.getMode=function(){return G},y.getLength=function(T){return E.length},y.write=function(T){for(var x=0;x<E.length;x+=1)T.put(E[x],8)},y},z=function(j){var G=i.MODE_KANJI,E=n.stringToBytesFuncs.SJIS;if(!E)throw"sjis not supported.";(function(x,_){var u=E(x);if(u.length!=2||(u[0]<<8|u[1])!=_)throw"sjis not supported."})("友",38726);var y=E(j),T={};return T.getMode=function(){return G},T.getLength=function(x){return~~(y.length/2)},T.write=function(x){for(var _=y,u=0;u+1<_.length;){var p=(255&_[u])<<8|255&_[u+1];if(33088<=p&&p<=40956)p-=33088;else if(57408<=p&&p<=60351)p-=49472;else throw"illegal char at "+(u+1)+"/"+p;p=(p>>>8&255)*192+(p&255),x.put(p,13),u+=2}if(u<_.length)throw"illegal char at "+(u+1)},T},q=function(){var j=[],G={};return G.writeByte=function(E){j.push(E&255)},G.writeShort=function(E){G.writeByte(E),G.writeByte(E>>>8)},G.writeBytes=function(E,y,T){y=y||0,T=T||E.length;for(var x=0;x<T;x+=1)G.writeByte(E[x+y])},G.writeString=function(E){for(var y=0;y<E.length;y+=1)G.writeByte(E.charCodeAt(y))},G.toByteArray=function(){return j},G.toString=function(){var E="";E+="[";for(var y=0;y<j.length;y+=1)y>0&&(E+=","),E+=j[y];return E+="]",E},G},V=function(){var j=0,G=0,E=0,y="",T={},x=function(u){y+=String.fromCharCode(_(u&63))},_=function(u){if(!(u<0)){if(u<26)return 65+u;if(u<52)return 97+(u-26);if(u<62)return 48+(u-52);if(u==62)return 43;if(u==63)return 47}throw"n:"+u};return T.writeByte=function(u){for(j=j<<8|u&255,G+=8,E+=1;G>=6;)x(j>>>G-6),G-=6},T.flush=function(){if(G>0&&(x(j<<6-G),j=0,G=0),E%3!=0)for(var u=3-E%3,p=0;p<u;p+=1)y+="="},T.toString=function(){return y},T},U=function(j){var G=j,E=0,y=0,T=0,x={};x.read=function(){for(;T<8;){if(E>=G.length){if(T==0)return-1;throw"unexpected end of file./"+T}var u=G.charAt(E);if(E+=1,u=="=")return T=0,-1;if(u.match(/^\s$/))continue;y=y<<6|_(u.charCodeAt(0)),T+=6}var p=y>>>T-8&255;return T-=8,p};var _=function(u){if(65<=u&&u<=90)return u-65;if(97<=u&&u<=122)return u-97+26;if(48<=u&&u<=57)return u-48+52;if(u==43)return 62;if(u==47)return 63;throw"c:"+u};return x},W=function(j,G){var E=j,y=G,T=new Array(j*G),x={};x.setPixel=function(b,g,h){T[g*E+b]=h},x.write=function(b){b.writeString("GIF87a"),b.writeShort(E),b.writeShort(y),b.writeByte(128),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(0),b.writeByte(255),b.writeByte(255),b.writeByte(255),b.writeString(","),b.writeShort(0),b.writeShort(0),b.writeShort(E),b.writeShort(y),b.writeByte(0);var g=2,h=u(g);b.writeByte(g);for(var S=0;h.length-S>255;)b.writeByte(255),b.writeBytes(h,S,255),S+=255;b.writeByte(h.length-S),b.writeBytes(h,S,h.length-S),b.writeByte(0),b.writeString(";")};var _=function(b){var g=b,h=0,S=0,P={};return P.write=function(w,m){if(w>>>m)throw"length over";for(;h+m>=8;)g.writeByte(255&(w<<h|S)),m-=8-h,w>>>=8-h,S=0,h=0;S=w<<h|S,h=h+m},P.flush=function(){h>0&&g.writeByte(S)},P},u=function(b){for(var g=1<<b,h=(1<<b)+1,S=b+1,P=p(),w=0;w<g;w+=1)P.add(String.fromCharCode(w));P.add(String.fromCharCode(g)),P.add(String.fromCharCode(h));var m=q(),M=_(m);M.write(g,S);var ee=0,Z=String.fromCharCode(T[ee]);for(ee+=1;ee<T.length;){var oe=String.fromCharCode(T[ee]);ee+=1,P.contains(Z+oe)?Z=Z+oe:(M.write(P.indexOf(Z),S),P.size()<4095&&(P.size()==1<<S&&(S+=1),P.add(Z+oe)),Z=oe)}return M.write(P.indexOf(Z),S),M.write(h,S),M.flush(),m.toByteArray()},p=function(){var b={},g=0,h={};return h.add=function(S){if(h.contains(S))throw"dup key:"+S;b[S]=g,g+=1},h.size=function(){return g},h.indexOf=function(S){return b[S]},h.contains=function(S){return typeof b[S]<"u"},h};return x},F=function(j,G,E){for(var y=W(j,G),T=0;T<G;T+=1)for(var x=0;x<j;x+=1)y.setPixel(x,T,E(x,T));var _=q();y.write(_);for(var u=V(),p=_.toByteArray(),b=0;b<p.length;b+=1)u.writeByte(p[b]);return u.flush(),"data:image/gif;base64,"+u};return n}();(function(){r.stringToBytesFuncs["UTF-8"]=function(n){function i(s){for(var o=[],a=0;a<s.length;a++){var c=s.charCodeAt(a);c<128?o.push(c):c<2048?o.push(192|c>>6,128|c&63):c<55296||c>=57344?o.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return o}return i(n)}})(),function(n){t.exports=n()}(function(){return r})})(uI);const lI=jf,dI=I2({__proto__:null,default:lI},[jf]),hI=new Yr("QR"),pI=(t,e)=>{const i=dI(0,"L");t.length>500&&hI.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(i.addData(t),i.make(),e==="svg")return i.createSvgTag();if(e==="ascii"){const s=i.getModuleCount(),o="\x1B[40m  \x1B[0m",a="\x1B[47m  \x1B[0m",c=new Array(s+3).join(a),l=new Array(s+3).join(o);let f="";f+=`${l}
`,f+=`${c}
`;for(let d=0;d<s;d++){f+=a;for(let O=0;O<s;O++)f+=i.isDark(d,O)?o:a;f+=`${a}
`}return f+=c,f+=l,f}else return i.createDataURL()}catch(s){throw console.error("error",s),s}},Pa=(t,e)=>`${t}?type=tzip10&data=${e}`,gI=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIIElEQVR4Ae3Ba5BeZWEA4Oc9u9kkJGHZkIQkLhQziQmVBpJwOTDg7saKEIQwnYq2/WWnUjuxHTOOgbYq77ZqSVGrtZliae2P/gE74zQIodoZEmwrR6pQlTYJ0DWNuWAChBBIyN7exsGZL2e/3Xy3Xf3RPI+zzvr/LfgFyGMKCMPHX/JT7eec75RUxJD8nAVTKI/JKe1YjquxEsuwCHOPH/phm9ER5yy8fAQv4yCeww/wHezGcBGDqRJMgTymaejD+3AjFhvHC09+SRodtijfaAIH8CgexI4ihiGTLJhEeUzn4Q58CG9Vw7MP/po0OmL5b2xVhx/hPny5iOGoSRJMgjymmfgwNmGeOowOnfD0F5eQRq36yIBs2ix1OoR7saWI4YQWBS3IYwrowxasMLGEo3gK/4UfDXz9d+ce+t79HydZsPp3PrPk1vtfxBK8HatxLoKJ7cQGbC9i0KygSXlM0/EpbESbagl78QAewneLGAZVbMTnvWkT7vUzeUwduBK34b24CEG1YXwOdxcxnNSEoAl5TAvwAPpUS3gS9+CRIoYh43sYN3vTNtxsHHlMHViHu3AVgmqP4f1FDIc1KGhQHtMSPIIVqu3GXXioiGHUxGZhAAu86UUswTETyGPKsB6bsUy1nXhPEcOABgQNyGNagn/BEmXD+BI+WcTwmtquxJPKrsUTashjmo0/we+jXdkA3lXEMKBOQZ3ymBbgcaxQdgQfKGLYqn6bsFnZH+HP1CmP6TZ8BV3KdqKniOGwOrSpQx7TdGzFFcr24sYihsc15hNYqmwU/6BO+3b07+rujd/EOnSqmI813b3xwX07+kfUkKkhjyngU+hVthfvLmL4vsbMwRrVrkCnBhQxPI0b8GNla9Gfx6SWTG192KjsCG4tYtilcZdinmpdWKlBRQy7sB5HlH0UfWrInEEe00xsQZuKYXygiOH7mvOrJtarCUUMT+O3MayiHVvymGY6g8yZfRgrlP1lEcNWzesxsT5NKmL4J2xRdgk2OIPMBPKYunCnst24W/POxWoTW43zNO8TeF7Zx/KYOk0gM7EP4nwVCXcVMbymeavQZWKdWKVJRQzHsAlJxQLcYQKZceQxTcPvKfs2HtKatWrr1ZqteFLZh/KY2o0jM761uFhFwr1FDKNa06O2Pi0oYhjFPUgqlqDXODJj5DE55XZl/4ttWtOFy9V2OeZqzTbsVXa7cWSqteNGZQ8UMQxpzRXoVNscrNGCIoZB/KOydXlMbcbIVFuOxSoSvq51PerXo3VbkVS8BcuNkal2jbKj+K7WBPSq31oErfkPvKrsamNkql2q7HtFDINaMxeXqd9KnK8FRQwn8bSylcbIVFum7L+17irMVr9ZuFLrnlG21BiZ0+QxBSxWNqB1PRrXq3V7lC3OYwpOkykL6FJ2WGsCejVuLYLWHFI2F8FpMtVmKntda+Zjpca9HfO1ZlBZZozM1LsaMzVuJq42xTLVTiibpTU9mterNR3KRo2RKUs4omy+5mVYq3l9yDRvgbKXkZwmc5oihoQDypZo3gW4RPMuwQWad7GyA0UMyWky1Z5T9sual2OG5s1ArnmXKnveGJlqzyhbk8fUoTl9WterCXlM07FK2Q+Mkan2hLJOXKFxbejVuj60adyVOFfZd4yRqbYbB1QE3KJxC7Fc65ZjocatR1CxH7uNkak2jH9W9v48pmkacy06tK4D12pAHlMH3qtsWxHDiDEyYxQxOOWryn4J6zTmnSZPn8bcjIuUfdU4MuN7DHtUBHwsjylTnzZcb/L0oE0d8pgy3ImgYgA7jCMzjiKGIfy1smtxq/osxttMnrdhsfqsx1XK7itiGDaOzMTux0sqAu7JY5qttneg3eRpx3VqyGOagz9HUHEIf2MCmQkUMRzBZmXL0a+2PpNvrdr+FEuV3VvEcNQEMmf2V9il7A/ymNabWDuuM/muR7sJ5DHdhg3KdmKLM8icQRHDCWzAiIp2/H0e02XGdyGWmnxL0W0ceUyr8BW0qxjGhiKGE84gU9t2/IWyLjyUx7RCtR60mXxtuM4YeUwrsBVdyj6H7WrI1FDEkPBxbFd2Eb6Rx3SZsl5T551Ok8e0Ct/Ehcoew91FDGppU4d9O/pHunvjo7gF81R04n3dvXH3vh39uzANmzHX1JiN+zCax3QbvoYLlO3Ee4oYXlWHNnXat6P/9e7e+ChuQZeKmfj17t7YdeTZh38ydOzgnQimxnmzFq/52pqPHrgTn8UsZQO4qYhhvzq1acC+Hf1Hunvjw3g35qnIcI00+puvPPvIDFMnXNjX/1uzFq3pQaZsJ24qYhjQgEyDihgG0IPtxji299/mmGKv7nl8jmqPoaeIYUCDMk0oYjiEm/BZjDgljQw6tvffTbVjP/62NDLoZ4axGeuKGA5rQqZJRQwnsQk3YNcbL/+Pk6/sMdVOvrLHyVf2OGUnbsBdRQwnNSmYBHlMM/d/69Mb9//rZzaNDh3vNIWy9hlHu3s+uXnx9X/4hSKGE1oUTKKLb/ri/ENP/d2GwVf33zF84qVFJlH7jK4XOjq7vyylLccPPXPYJAmmwII1H+x44+Xn140Onbj9jRd33zj8xpEuTWibcd6R6Z0XfaN9ZteDM+Yu23boqb8dNMmCKfSWd/yx0eGT04ZeO3j56wefytPwyV8ZOv7israO2RekkcFFieCUQAptHQdHBl/7ybRz5j0X2qf/cNai1cW02Qv/M2ufMbT/W582VYJfgEXXfCQMHXshS2nET4XQZtqchaMHn/hCctZZZ/08/R8wPGmSSU1PIgAAAABJRU5ErkJggg==",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAGbElEQVR4Ae3B32/ddR3H8efr/f1+z2m7dT1n3Vp+De22EsxmxARvCNDGhBvDj3/AaxdMJEpIUAOJxl8IXJnFGyNX3i3BiEG9ELIqZNSLmRBYYD+7CS3tuv5Y23N6es7n87Zd2uULxAXDt2cmnseDjo6Ojo6Ojo6Ojo7/S6Jgje/sGdTdu1+2ewZvwwQSMsAEJjCBBCYwwAQSMoEJDDCBBCYwgQmJN3XLH79JwUSBGt/dO4jzmqrlQ/bQEJhAQgaYwAQmkMAEBphAQiYwgQEmkMAEJjAhsYxU1eArLQpkFKTx5MAg0mskOuTLTVgLFErsBO6lYEZRTN8i0SESgQmfq1M4MUrBUoqS6E2xTgIBc6twWy8bfLkJszWukfgUgZMj1okN6iujQ3vYNAI8R4FSCiLTCaQGoozA51cRmxotwvFLEBxChOAQHYJDiHhwCA7RIUQIDsEBRweqZF/qBxPr7vfLj6Xa+4cWBUkpSOkXU/W1Z28fRzwIgloTmgFKKezuJnn4IAiQQIDENQIkJECsEwgQ+L+WCK9fxCeX0Z29rNsJ3Au8RUFSipTYGOJBNkj4QgMNpEjAQA+YwAQSmMAAE0jIBCYwwAQS2ttD+NM5/PQc3NnLNWIUeIuCGEVKdJxEkBgkgoUGn8uuMvSWiKeukDNCgYwiJTpBYg0SQSL8aoP/RnhtApyPSY98leTRg+Tc71ceSymIUaDSDy/WSTROIkgMVlvQinwW8Z3LhGPv49Mr5OmWHejOXeTsBN1LQYyimY0pMZQIJYKlBp+FBnaAwE/P8xmMUpCUginVceBZJAiR8Oo5MKHUIDVIDUoJ9pUBdFeVLRroQdUu4pk5bHQfG/zSVcKJD1EpgVICpQSVzCmnH1CQlKKZTiA1CLEcT07jy2uQJZAaZAalBB2s4HN1RJU83bUbPzMPDgioduFTy1BOoZxAOXVKdiR78tzvKIhRsOyJM3VCHI/jU/jCKh9jQkN9qDuDpTVYDeTZcBVfWsOnV9ig3hKqdLHJcT+SPXnuNxQoZRuEv33wbVbW9pEZeTZcfZSe7HFCxB18ro56etmi4d0g8LPz6NadbEge+uJL4ZWzx3DmSj+Y+AcFS9kGXS+vvgu8C5G8tRcH52jFx3Fng8/W0R29bNFAD6p0Ec8sYA/sY4P27aqUfj75F7aJ0U7BTxLiVYJDK+IzK3yShqv4uXlyRuLkw8Y2Mdqo9PSFFi1/g1aE4LDYgFqLPBuu4str+MwKm/qBw2wTo91CHCM4tCK0HJ9ZIU8HqyDhZxfIGWWbGO3WiscJEYJDiPjUCnna240qZeK5eXJG2CZGu0U/SStepRUhOD65xCfpYBU/v8B10oh/9IixDYw2K/1ssuXB3/AQ8VbE51dhpUmeHajgy018psamfuAw28C4GVpxjOAQIgTHJ5fI04EqkvDzC+SMsg1SbgL1ZL32tVtAYoN2d5OnPd2oUsbPL8B9t7NpBPgVBTParPG9vU95rfmMbutFBypouAr93XyMQPsrxAsL5Iz49KNGwYw2ajw1+BSpvUBm+EyNG9GBCiw38cs1rhH9wGEKZrTJ2vdv/bIye0FZgjLDZ2vciPZXQODnF7hOjFIwo11SO02W1MkMsgTmV7kR9XejvjJ+YZGcEQpmtEnppx82yOwEpQQyw+stWAvciPZXiBOL4GwZ8cuPGQVKaadSMob4OhJEJ/z+DHSlKDPoLZE8cAd0p2zRUAXeuQyzNRjsYV0/cBh4m4IYbaTMjitLkMBPzRLfu4KfmiVOLEK9hV+pk6ehPpCIE4vkjFIgo51SGwfq8Z/T+GKDa7pTbKgP3PGZGnnq70Z9ZfzCIteJEQqU0EY/+fNceOb2cNpn66+T6FUSe9UO7XkQKBMc1gI2XAUJJJDwj1bwS4sk990BEkgDP3r67hd//Pz7TgFS2qz80uIxctbu4RFC/Abu+HyAWgt2ZmzRUB/x1Cx+pY729rCuH3QYeJsCGDdbM4zRjNCM0Az41DJ5+kIfSPjEIjmjFCTlZmvG47iDA9EJf72ITk5DapAIMoNEhPEpfLoGBkg9FCTlZmvFkx79Ku67fHIZ5huQGaSGMoMdGSTCP1omzNbAdBT4JQUxbrLSc1MtmuENv7QEM3U+pRGgGdl0FHiifPSKU5CU/wE+ufI8l2t/JzH+I2eW6L8t/3rO6ejo6Ojo6Ojo6Ojo+Jz+DTK0Yr9D+W0JAAAAAElFTkSuQmCC",link:"https://templewallet.com/"}],bI=[{key:"infinity_wallet",name:"Infinity Wallet",shortName:"Infinity Wallet",color:"rgb(52, 147, 218)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANkUlEQVR4AeXBf5DfdZ0f8Mfr/fl+d5NsdvODIBBJgkIi/iJwAkHUO+/wR394P7wbZ27sdari+Ud7106n7T/tzP5va2c602nnxrmj1Ws7vd5YqjhOiygWT9FDJeGHEqVAAgiEsEKy2c3ufr+fZ2NGcsAJJIF/zn08ynNs23Vd4ZfxMfwytqLzN9sYj+E2/Cd87eEffiV+pvzMtl3XnYM/wm+j+cXU4/P4xMM//MphJ3RO2LbrunNwM65D+cVVeCPet+Gc13/uyFMPLnTbdl3nhD/FdVaP87Frwzmv/x8N78YHrT6/iV9r+Bia1adwfcMvW73e1bDV6nVeQ7N6tWaVa1a5ZpVrVrlmlRtIvDrCeEzrnNSP6QZeFeMxrVHFeExrVHk1DOKVin7degu/8h7HL7vCeOMmEt3cYWu/d4d1f3GrWl52VqosXv0OC3uuNTrvAuk63dEjJu+719StN+ueOkyVV6Iu3PmrI3TORh/HL3+bZ/7e9fqJSRLPU6U7dtTGP/kPJh74EVVOSxhvOdfcJ/6J0XkX0Peep0qlN/2FPzf11Ztp5SyNu5nNr5tFc6bSW7zqHZ75+5+gmkpUqFChQiUymHD8yrebOPCA7vCTKC9ndO555v7pv9LPbFR9VKhQoUIlhOVL30o3MLH/+1Q5C+lmNl80i+ZMJI5fea1nPny9QoUKFSpUqFCh4oRy/Io9Jg4+oDt8iPKixueeZ+4P/6UMJ1WoaipUqFChQoXqY+XiNzAcmNh/L1XOULrpTRfNojld6S295Urz1/2O4cEnDA48YfD4nDa/KJNDhkMSgiCIE8rxK642PPig7qlDKC803nyOp3//X2hHlgx+fNjwoccMHnpcm1/Uz0zRGkEQBH2svH6XDIcm9t9DNWcg3czmHbNoTkd6S7v3mP/Ah9XK2ElVatxrRxZMHHhce/qIbJqmNRUqVKhQytLlewwPPqB76hDlr4zHjnz0Hxuft5XhgNZoTSXaT46a2H+QCTIzoxIVKlSoPkav28XEpIn77qaV05RuZvNFs2heTt9buuIaRz78CQYDGQ4YDhgMGAwYDrVjc2Zu/I/WfvOrlnbvYXINQRDESUtXXGPi4Qd1Tx2iyklV5n/9d+k6uo6JIa1J69Ro2fqvfNa6275kvGmL0dYdJARB0MfKRTtZs9bEfXfTmtOQbmbTjlk0LyWxdPkeR3/3E2o8dlLXGA6ZGMpwaDD3uOkbP00/VqMVa757u6W3XMWatSpUqFChwtLl1xg88qDu8BMkfmr5rVfKuhnlhCoZDrWVJTP//d9rx47Qmsl7vicbNhlv3aESFSpUqD5G2y+RNWtN7L+LKi8j3fSmHbNoXkx6y5dfY/5DH1fjsQoVKlTQmsGhR8185t8xHjlltGLNnd+y/KZfYnKdChUqVKjE8u49Bo88aOmKay1e+2vWfenPLV9+raqmlDZ/xIY//qR25CdOqTLx/TtlZpPx1h2qjwoVKlQfo+2XyJp1hj+8hyovId30xu2zaH6exPLuPeZ/5+P0IQiCOGnwyAEzf/JvWFnxQrWybHLvty2/6ZdkzRRBEARh+bKrjS7aqS0uWvvVm6y54zbdk4+bvPsO6z//X9TCvL+uTPxgr356o/HWHfQIgqCP0faLGUwa3n8PyotIN71pxyyaF0os797j2G9fr/qoUKFChcLwkQNmbvgUoxUvpkYrJvd928qll7NmSoUKFSpUqFCJNbd/WY1GBo89rHviUfrei6oycd8+Wb/ReOsO1UeFChXa0op+81ZZP2P4/+6lys+RbnrT9lk0z5VYvuwaC7/1MZWoUKFChQqDRw+Y/s+fYrTi5dRo2eRd37byhstZO6VChQoVKmidNd/4385IMdy/T9Zv1F+wQyUq1GisFo5rC8eNtl8iMxsN77+b8kLppjdun0VzSqxceoWFD/4+CUEQBKH78QHrP/Nv1WjF6arRiom7/9LKzstk7XqCIAhaZ/Jbt6jRyJkpw/379NMbjc/fwXisLS5pC0tqcYmuM7r4jTIYGj7wfZTnSIuIiIjo101b+PWPqr5XfVQf1Uf1UX0MHn3I+s98itGyiIiIiIiIiIiIiIgIi/Mm7turQvVRfVQf1Udp+rVTIiIiIiIiIiIiIiIiIlKsvemzJr97m7a4ohaW1MKSduw4VWo8tvz29xtt3ykiIiKiCYIgsbznPXRD+tCHPvShj+7HB0x99lOsrBAEQRAEQRAEQRBGF11q6R1/lxQpevShDz1ZN0MQBEEQBEEQBEEQJ5Q1X/ysie99XS0uaYtL6vgya9bQh/HY0js/wHhMEIQBcUo/Ntp5uRr3nq+0QwdN/em/Zjx2tgYP/sD0J/+hzJyj33COftMWmdms33guw6H25KOIs1Zl8qt/pvYs6s+/VNatpZoax0+NX3uJTEyq0YpnDTzXYChTG1Uff6XUM4dNffaT9L1XpEqtLKunHtOeeswpCelpnVesNRPf/oKVK4eW3vVuNe6d0jqZ2aTmDnnWIIlTEnov0Bvuf1DGI5RXReKkKqdUI/GqSIwuupBuQO85In0k8ayB5xqtaEeelpnNntUOPcXktJV3/p7hN/4biVdq+X2/J5NrtacPq6Nz6ukn1ZE57egcK8tUOWvpLX/g4/odl6o+nme0oh39iecaEKdU6e7fZ3T5uz2rzR2RiQnZcLHl915v4st/TOJsZc16o7e8k35s7IQqFFV+auLWPzO481bKmUss/+3rjXa9jXHvhbqD+1lepHWe1QRBnFCG3/myGo1UH21pRSVMTDAc6re9wdJv/AHVCIIgCIIgCIIgCEItLajlZdVH9VHjXo3HajQyuH+vwZ23OikIgiAIgiAIgiCx/P6PGu96mxr3qo/qo/qoPioMv3kT1REEoUVEREQ4Omd4y39VKbUyYmKC4ZDhkMFALnyD5d/4R9JKREREREREREREREREREYr2uKC6qP6qD6qj+ojW7brZ84RERERERERERERERERsfy+j+p3XanGveqj+qg+qo9KGd7+RfXYAyIiIiK69TMXzqI5pbQnH1aL87LtzSyvMDnJ5ASDjkSmt8j5r9f98Dskzkii33W1rJ0mCIKgm9Dvukp7YK86vuB0jd77Ef3Oq0hPEARxQtN952aD22+iygukWz/z2lk0z1WlPfGQOj4v297MxJDBQIUKlTCzRc6/WLv/DhKnL3LRZUxvUaFChQoVdEPZdZX24F61dMzLGb3nI/qdV6m+V6FChQpVzeC7NxvcfiNVfo40L6ZKu/c23R3/SwYTqqd6qqd6ahzZutPo7/wB1byUbH+z/tJrZf1mEjX/tArVUz3VUz3VUz2G64x+65/LhnO9qDC+7iNy8ZVq3Kue6qme6ilN992bdd+8kWpeTDc1vXUWzc9V6skD6tgzctFl9CEIgmD9OXLBxepHd5B4nsGE8W/+M/3u98q2N+vf+qvq6Sfohiwd191yg+zcQzWCIAi6oX7n1erBvRw/5vlifN1H5eK30YcgCOKEpu39svat/0k1LyHd1MxrZ9G8mCr15AE1/zQ7dqu+V6FChUpYfw7nX6Lu/0undAP93/pDtmxTiQqVyIVv1P2fP9Luv0MtHlUP7WPnNaqaChUqVKg2kJ171IN71dKCkxK59sNs302iUKhQoTRt3y3atz5H67yMdFPTW2fRvKRSTx5Q83Ns360SFSpUqIT1m+X8nepHt9M6rv4HTG2hj6qmqlSowYT6wW2sLPmpWpxXD+3jkj2qOhUqVKhQbcCua9RDe1l4ht0f5DWXqpWRGo0Y9ypRSlVTd92ifetztM5pSDc1vXUWzcupUocPMj/H9t0kBEEQTG3i4rdrEztUt4Zxr/ow7lG0xuJRdeeXUJ5Vx+fVQ/vk4j1U56QgCKqTS9+lzn2L6tep0YjRWK2MGI3VaKT6qHu/qt1xI61zmtKtm75gFs3pqOKpg+ronNq2W/VRoUKFCoZr5DXnMe7V4qJaXmbcqz4o9X9v4Nicv2ZpXh3cp15/tapOhQoVKlQws1E2bKCPWllRKyPSq8GQ+/+CfTfRmjOQbmr91lk0p6146mHm59h2GUEQBHFCsX5KNm+WDRuYmmLNJLfdwI/vQ/m5jh/j4F287kragBRBEATVmFonGzbIxk3MbOCBb3DnF6jmDKWbmr5gFs2ZqGLuEebn1IWXqUSFChUqVKhQSiV87dM8+n2qvKSleR6+W110pWoDFSpUqFChQoVC3XsL372Ras5Cuqn1F8yiOWPFTx7hJ4+prW9W1VSoUKFCpVg6Jl/7NI/vRzktS8c4uFdd8CY1MaUSFSpUqFDB3pvkri+hOUvpptafP4vmbB15nB99g36sJtZRA0YrcuQJ9t8m3/wMRw85Y8sL/OjrcuxpJtapbkjfy7GnOfA9+eZneORuqrwCqS3nXzFC5xULfU/rEPqe1nlV9GOqUUU/phpVXgXjgcSrphqJk6qReFVUc1JCNSclXg3NKjeQWM0GsboNiNVsIFa1AenRWZ36QXgM261Oh7q1615zJS6zOn2p4QbE6hPc0HArPm/1+SJu6RYXDlm77jVfwftxvtXhLnxo7vA9xzonLC4cWli77jWfwy68AeUXU/BFfGju8D2HnFCeY/OWtxSuw8fwLpyH5m+2HofwddyAW+YO3xM/8/8BSHXLEHo7BSYAAAAASUVORK5CYII=",deepLink:"infinity://"},{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAN6ElEQVR4Ad3BC3SW9X3A8e/v/7yX3IAQCLdwhyCKGlARRBRorbdZaWu1lx27Xlydp+txW1vtXLs2nh0723o6e13VdhU7dahzFdGCchOEAAICohAScg/kfnnzXvI+z/P/7U0lPVlGIIE31O3zEYaZqoI2OerlTLfqzzJGJnmJ7rxAOJiFVZP0bTJkJKJOoEGUanGkFMdvhxGICMNNSDNVhY62IBnBpSpcD+5SVRagZINyRiIKUilGSnDZJMZ5lYycWhFhOAhpoloBfv6Vat0vqdXbUB1DOohYEXbiOE+JJJ/GjO0QEdJFOEdquyQRdz8WDsj9av1FDCeRTjHBXx1vbPnhpIJd9SJ3cK6Es6SqqI0tU899BOtfzvkkEhcn9KgY7yFxciOcA+EsWK87Dxv7kfr2TkD4UxFTK478tQRG/U5EOBvCEKgqfjK2QrR7FaqT+YAQE3wiltR7c0aMijFEDoOkWoF6oW/gJ54EcvkgUXtZKCC3fLf4W+uKH3yonSFwGAS11vG73V9i7TcBwweR6gTr+5/+bvHfbC5+8JF6BsnhDDQRDagXexrkc3zACeSgwU8X33//tuLvPVzNIDichlrfqO3+jar/Gf7vCKsjnywu/vbrxQ8+VM8ZOAxAVfGT7Q+j/j0MM5vsRpwAaRS2vr+y+MFvvVD84PfaOQ3DAGyy689F9RsMIzfSRndLA1UvPkW6CYy3rn0x2R3P4jQMp6Be9wVY95cMM7ezDT/RRe3a1cSO15B26hcFSD6qqgzE0I/aSMB6sadAszlPrO9R/uSPGQ5qvbvUi6xkAIZ+1NevonYh51nr/t207HmT4aC+9zP14yM4BUMf6sfHqe99hz+R8qd+hnoeaadaoL77gOpq+jOcpKokE7EHUB3FeeDFuvBiXfQVb6in9vfPMxzUevdGI9dNoh/DSWqTEwKOfJnzpOLZx/DicfqrfvEp3K5O0k41MyvD+bqq0pehl9/1V6hmch50lr1L/WsvcSpeLErVC79hOKj1v4StG0UfhhS10YBauYvzQK1P6eM/BFUGUv/6SySajpN2qiPVjvgsfRhS1Pc+jGoB50Ht2tVEq49xOup5VD73a4aD+v6dqkovo6rg2ds4DxJNJ6h6/jcMRuO214nVVZN2yiKiHZM5ydDUKCp6M+fB0V//CD/ZzWCoKlX/+STpp0aN3sRJhrwRc1AKGGZNJZtofXsnQ9G0YyPxEzWknWNWqCo9jNrkYlCGkxfrouzJnzBUqkrNmv8g3VTtYminhwEpYphVPPsYyfZWzkbD1nW4kQ7SS6fjB3JJMVh7AcOo8+gh6l9fw9myrsuJTWtJK1VRnzmkGIWpDBP1fUof/yGoci6Ob3wZVEknC1NJMaDjGSY1Lz9DtKaCcxVvqKf93X2kk7H+eFIMMJJhEG+oo+qFVaTL8U1rSSdfdQQpBtUQw+DoE49g3STp0rxrK148Sro4jgmRYgBLmjW88Xva3tlLOlk3SVPJJtJGxJJiEBMjjdxIO+VP/Zzh0LjtddLFT7oxUgxoK2lUvupnuF2dDIf29/aT7GglHZxQqJUUA1LHIFlrUQbWdmA3Ddte438TQAABBBAQ+hAGRZWW3dtIB1XqSQkI5phil3AG1lruL/457ZEY//T3dzE+P4/+wmPGMf87P+Z/EFKEPxAQThIwoRA9ir79I1BlMMKjx3LuBEHKSQlgvEP4nFYy6fL14l+wbssuetz02fv4yuc/zp133EAoGKCXk5FFtPYYg9Xd2kCPcN54BkVh5OyLOGdCVIKRSlICSOgtSDKQxuZ27v2HR9l76Ci9ovEE3//FM6x6fh1f/PTNfPKjy8jOyiQ0egxNJZtpKtnCcJj9hXsxwSBDYa3ltS17eOfdMv72nk9hjCFlHzLBJyUgSd2pjrioBuln85v7eOCfH6elrZNTOdHUykM/+S3/8thzXL98ITcsX8hVf/lNUEvTzq2k0+zP30vB9R9nMKxV9h8qY/2W3bz82nYaW9rpUd/QwsP/eA/BYHibiNAjQDQRkVGh7ar+Mk5qaGrl+z99hpc37GAwYt3d/Ne6bfxu3TYcY5hXOJWrE1nMz4iRDi9E80luOMYFFauZUjCO/DG55ORk4WDw1CcSidLY0k5VbQOHj1ax/1AZXfEE/b28sYSW9ghfu/v29ZwkpNhE+9+p+o80NrXx62de4ZkXXyfhuvQwIiiKtSACRgQFVJXTcUS5e0wr8zPjnItn23PZGMmhPxFSBFRRhkJa4k2HJ9ZVH3NJCZCy6ulnV+8+WPf998pqnDmzp3PNVQvooVZRAd9TMsLg++C6EAg6gI+Ig7VKIGA4VlVHWUUNyvt8FX7Zksfn89qYGkpyNkrcsTiXXc0NpIhQXllLWUUNiKBKijJUin2+rvqYy0kBepi5tT4n1o8ckXPTpq07sYAqgyICapUZUydx3bLFiCrGMRyrqqO0vIpfteQhDJ1y0pad/IEqs2ZM5vrlV4EqIhBLJDlaXkV9YzOO46CqnEnCDf4bfQgnTbtk5U3BUPIV0kGVGVMLuGDWNKwq8USCnXvfIel6pI0qmeEQhbOmM3H8GHzf8j5FRFCrBEMhPN9HfZduV/HV7nzj1R2LKys300s4KTD/MpnmjNsryHzOgghY35I/ZjSTC8YzJncUoVCIZLKb7KxsFl5xCQcOHKa5rR0siAHHOPjWJxwOknQ9GpvbqKiqIxKNImI4WyKCquK7HggEwyFCJkA4y3xiz8YXX6QPoY+pl3/01hDe7xgEVSU/L5eLLyok6Bh6iDE0t7RRU3eC5tZOPM8lEAzSQ1XpTwQEwfU8Ao7D+Pw8ZkwrYGRODmotCBw6coza442ICOfG7Kn0Wei9vVbpI0AfsUT1S8HgxI3iyIc4BccYFi6Yx6gR2YDQ3NLG9p37SHo+p+IEAqgqA1EFRXEcBwVONLVyoqmVXgJ87o5b6IrGiMYSHK2opryiBkQYIk3GE1/z3t2g9CP0M6Xo2gvDgex9QJgeqswtnMGMKZPwrWXX3ndoj3QhAoKgpKiipN81VxbR1NbJ4aMVqCqFM6cyZ8YURAxbS/bSGY0xGKr+qvLwlL9gx6/oT+jv9tuZVRa7LxDg4aWLFpCdmUEymcQ4BmsVARQLOCjvM6KoVUSEHj5wtKySmvoGEGGoFLhpxVW8d7SSqtrj9DU2L5eii+bQnXQZNSKbg++VU11/nIEI1HZ1ZRcdP/J8K6cgnMLd93zFXLH42nVHSyuv64onKK+qpbyiBjEGVeVMHCMUzpzOtMnjQZWE67HzrYMkkknOJOA4rLxxGZve3ENrewd9BRyHlTcu5/mXNyACqHLpRYVcueASXt24jboTTfTj+9Z+pGLfuk0MQBjAvKU35yei/i4xZjrnKBwKseSKS8nMCHO4rJJj1XWcSu7IHK67djFr1m2h23XpS4DbbrmONes20+169LrmyiKq6hoZm5dLwYSxbN25j/bOLnq4ycR9Eqn4QWVlJQMRTmPCrI9cnJMbeAMYTTqoMrdwJrOnFVBaUU3psWp6zZ09nakFE1i/pYT+FFh54wq2vLmTjkiMXpdfOpdorJvDZRX0EOCaxZeRGQ6xedvbj3eM9b5c+8oaTsfhNLrajjVOnFH4hu9zBxAmRQRUwXoWtRaL4DgGYRBEaG5tp7SimrGjc7l64Xyam9tZumgB8XiCHXsO0J8RuO3mFWx+8y06IlF6zb+oEAEOHi6nr6ra4zQ2Na1+4tEHvvjIfd9QzkAYhE996atXjcoZvTZgzGirihEwThAERC1J1wUMxoAxhtb2CAcOHSHpeigDK5iQzyf+7MOsWr2GjkiU/jJCIT56wzJe3bCNrlicXpfOLSQUNLx18Aj9+RL87fjM6BdKtm7wGARhkBbfcvvFTfWda0TMdE5DVckbNZKii+cQCgYQMZRVVFNWWYuI0CM7K4PlS66gsamV3fsPAUJ/UyaO4/KiC1mzfiu+tfS6/JILAGXPwVL6s+r+oK3KfrOtZaNlkIQhmHHhsnwysp52DNcxWKoUzpzKzOlTCAUcfN+SSCTZsmMPvlr6U4VrFy3A8z127DlIX1cvLKKto4t3S8vpJxpL2rtDGa3/Xrl7N0MhDFHBkmtNOJH5dSPmQSDMIMyYMomL5syksyvKm7vexqpyKuPGjmbpwgVs27WPxpY2eglw04eXcuhIOVW1x+lL0d3GDd159MBLRzgLwtm4/XYmVMcvzEqYn5qA+yFOIRQMsGRhEVkZGVTU1PFeaQWIcCrhYJAVS6+kIxJh++4DiPBHeaNGsGLpItZv3k4kGuOPNNDRnbTFMXPiJy0H9nicJeEc5M6YQzB/zq0jfa9YkPkoFM0rZNL4fJKux/bd+4l3dzOQjFCIa6+6DBQ273iLpOvxR6osvryIzIwQm7a/RR/xOP5j3SbwUPPuVxo5R0IaBJYslWmJSTd+8uZFX92xd//19Q1NDgNRZea0ycydPZ3uZJI3Svbheh59TRw3lsWXXULJ3gMcb2zhfVLneYEnWqIj/jWyIHmC554jHYR0Gnkr4yc0TM4MmDska9StjsoSgaAIzJs7m4IJ+QhCeVUtpeVVIEJf2VkZLF+ykKamVnbtP0RKXbdNvOIkEi90BXI2NB98zSPNhGGSPXEiubnTRnzuMx9bNH3yxCtWPbN2XkNL50zEFACjQTMBA7jhcCiy8sblDR0dsepX168/4pnAft/rLIn62aXthzcr/1/kXng15OQzadZCcifPkbyCQpORP5fr77qLd8rKgHmcb/8N3VaULP16cD8AAAAASUVORK5CYII=",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://"},{key:"atomex_desktop",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE6UlEQVR4AeXBe0xVdQDA8e/53XNFQFJ5e0NAAUXeMQHJByo+cM6Z+WrO0h66uelEatl0U9egnDa1rczN1eq/Mg39I8WQphYOo4z54K0Cgl6eQy6IXO49J/2DZk3k4r0c2c7nI6mPoGMCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc7JvCD1ZgslpWasNoXJE7yJjvDjRZDRWGt7NzsPnCfv4k1UlX/FTPJj//Z0osJ90ZJAQ5YuK6u35nLmwk1Ulf+4XtnMii0nuFHVgpYEGjr4zWWqatroT9eDXj7cV4CqohmBRux2lR/zyhnI9cpmSqub0YpAI+aWTjo6e3BE5e02tCLQiFEWOMpoNKAVgUb8fTwJCvRiIJIkkTAlAK0INPTeqgQGsmhWGEGBXmhFoKF1y+JYPCec/kSEepOTlYaWZDQkhMQXuxaSHGvi6LES6s0dPDbay40VGVPY9nYyXp4j0JKMhn46W46/jyfrl8exbnkcza0PsNnsBPiOwmCQeBEEGjl/uZb39xZQeKWexyTA38cDU4AXBoPEr0U1HPr2D7Qm0ECD2UJmdj7R4b5krk/iacpvtvL5d8XUmzvQkmCIWXvtbNqdh6KqfPXxItxGyDzN6wsikSSJY2fK0JJgiOUcLuRqRRMHd85n/LiX6E+gnydpycEcP1OOoqhoReBCPVY795o66bHa6GNXVLZvnEZ6aigDWb04ioZGC7/9eQetyLhA3d37fHLkEgWXarD22jHKgtkpIezYNJ3sbWk4Kj01FN+xHuT+UkFacjBakHFSxa1WVm3Npb3jIX16bQr5hbcpKmng+0PLiJnkhyOMsmDf9rnIBoFWBE5QVcj69BztHQ95GkuXlczsfBRFxVHpqaGkJQfTR1FUhpKME65VNHG9splnqapto/jaPVLiTTjC2mvnh59Lyc2vpLSqmZ5eOwE+nsxMGs+7KxOInOiDK8k4oaq2DUdU17aREm9iIHV377Nh52nKb7XypHvNnRw7XcaJsxVkvZPM5rVTcRUZJ3i4G3GEx0gjF4vrOHWukplTg5mVNB7vMe48qbW9mzcyT9LQaKE/drvC/qNFGIRg05pEXEHGCUmxJoyyoNem0B+DkEhJMHG1vImLxXc4nleOEBLxkf7MTglhydwIwoLHknO4kIZGC4747OsiFsyYQFjwWJxl2PMIz8nD3UhHl5UrN8z0Z+3SWJbOm0R4iDcbViUwf8ZETH6jqLvbwclzVZRVtzBnWggf7C1AUVUcoSgqSBJzpoXgLBknfbQxlbb2bk6cLef/lsyNYNfmGfSRJImYCD9iIvzY/OZU7lt6UBSVS3/XY7MrDEbhX/W4goyTZFlwYMc8Vi+O4vSFaszNXfj7eJAxK4zpiUE8y2gvNx5rbOlisBpbOnEFGRdJiTeREm/ieXi4GxksT3cjriAYBmIn+zNYsZP9cQXBMBAV7suUMF8GY3lGJK4gGAYkYPeWmQgh4YhXE4PImDkRVxAME6mvvExO1mwMBolniY7w48s9C5EkCVeQGUbWLIkmIsSb7MO/U1LWyJM8PYy89VosW9cl4z5SxlVkhpmkuHGcOrKSmvp2blS10N1jY5z/KBKjA3F3k3E1mWEqNGgMoUFjGGoCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc79A200jdqC2KUJAAAAAElFTkSuQmCC",deepLink:"atomex://"}],vI=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHNklEQVR4Ae3BbWyUhQEA4Ofevg0f7d0RsAllEJSpQVy1K3SQIQro2HRoVIymS/Zj6w8xfk6NWzRzoJkO48d0MUaTZv6yMRFNxM2EIX4wIthSUJERgrCmjHZWCXdXapsWbgk/iLbvlXuPsgHjeZx11ln/1xJiaGjMV+NazMU0lDs1DKADm7GmuSnRqUgJRWhozF+AR7EMoVPbIFbjoeamxOeOI+E4Ghrzy/EMxjq99OGe5qbEi0ZQZgQNjfk/4HGETj8hltbUrRi3fevKdQooU0BDY345Hnf6u6ymbkXX9q0rt4gQiNDQmL8Azzhz/LGhMf9dEQLRHsVYZ46x+L0IgSEaGvPVWObMs6yhMV9tiNBw1yJ0EiQSVJ1D9WQmTmDsGEf19XPgIJ1ddH9JPu9kCHEtXvINoeHmGkXl5cyppb6Oiy8iWWlE2Rw7dtLSRus2BgaMprl4yTeEhptmFIwfz9VXsWQxyUpFSyWZV8+8enI9rF3P2+vo7TUaphkiNFy5IowZwyWzSCbZ287edsdcMZ+Gm0glnZBkJcuu40eLeOU1PtjomPOmM+Ncsjk+/Yy+fsUoN0SoBOfP4L7bSacds6mFtev56Y+ZXWtUpZIs/wX13+cva/nJlfxgtmMyGZ56nt17xBaKacwY7ruddNq3zKtnXr2TanYts2sNk05z3+3c8yD9/WIJxXTJLNJpJ+RQL51dZHOOSiWpnkzFeCVLp7lkFi1bxRKKadw4Jen+inc30NrGvv0iTZ3CnDoWLaBqktjGjRNbKKb2DrH0HOLV13lvA4ePGNG+/ezbz5q/snABt9xIZYWitXeILRBTewd/36QoO3fxwMO88z6Hjyja4SO88z4PPMzOXYqycTPtHWILlODFP/PxdiPa8jGPPc3BjJIdzPDY02z52Ii2fcoLTUoSKMHhw3T8S0E7d/HsCwwOOmGDgzz7Ajt3KWjffo4cUZJACcrLWThfpJ5DPPcig4NGzeAgz71IzyGRLv8h5eVKEijBnFoqK0V69XUOZhQlnSKVVJSDGV59XaRUkjm1ShIqQX2dSN1f8d4GI0qnuGEp8+pJJR2VzbGphTfeIpNV0HsbuO4aqiYZpr6OD1vEFogpkeB7s0R6dwOHjyjo/BmsWsmSxaSSjkklWbKYVSs5f4aCDh/h3Q0iXXwRiYTYAjFVnUNlhUitbQpKp7j/TlJJBaWS3H8n6ZSCWttESlZSdY7YAjFVTxbpUC/79ivohqWkko4rleSGpQrat59DvSJVTxZbIKaJE0Tq7DKiefWKNq/eiDq7RJo4QWyBmMaOESmbU1AqSSqpaKkkqaSCsjmRxo4RW+C/IJFwygrE1NcvUiqpoEyWbE7RsjmyOQWlkiL19YstENOBgyJVTzaiTS2KtqnFiKoni3TgoNgCMXV2iVQxnqlTFPTGW2Rzjiub4423FDR1ChXjRersElsgpu4v6Tkk0pw6BWWyPPknsjkFZbI8+ScyWQXNqRMp10P3l2ILxJTPs32HSIsWUBYoaPcefv071q4nm3NMNsfa9fxmBbv3KKgsYNECkT77B/m82EIlaGljXr1hqiaxcAHvvK+gTJaXX+HlV0glHZXNKcrCBVRNEqmlTUkCJWjdRk+PSLfcyIS0omRzZHOKMiHNLTeKlM3Ruk1JAiUYGOC9jSJVVnDXrYShUROG3HUrlRUifbCRgQElCZSgLGDqFAXNvJC7byMMnbAw5O7bmHmhgqZ+hyBQkkAJljdSW2NEsy/lwXuZkFayCWkevJfZlxpRbQ23NSpJIKbp05g/V1FmXsgTj3DlFZQFilYWcOUVPPEIMy9UlPlzmT5NbKGYpk8TS2UFjT/numt4dwOtbezbL9LUKcypY9ECqiaJbfo02jvEEorp66+VpGoSN1/PzddzqJfOLrI5R6WSVE+mYrwT8vXXYgvF9MkOMhnSaSWrGM/5M4yqTIZPdogtEFN/P089TybjWz7awiNPsGWbk2bLNh55go+2+JZMhqeep79fbKES7N7Drx6k5mJSSfb8k73tjtq5i8vn87ObSCWNimyOV17jg42O2rmL86Yz41yyOT79jL5+JQkNN6AIff20tIn0wUZat3L1VSxZTLJSSXI9rF3P2+vo7fUte9vZ2y6uAUOEhuswCnp7Wf0mb77NnFrq65g1k1TSiLI5duykpY3WbQwMGE0dhggNtxm/NEoGBviwhQ9bSCSoOofqyUycwNgxjurr58BBOrvo/pJ83smy2RCh4dbgeYRGWT7PF9180e1/YRBrDBEYorkp0YnVzjyrm5sSnYYIRPst+pw5+vCQCGUibN+68kBN3YqvsNSZ4Y7mpsTfRChTwPatK1tr6laMw2VOb6uamxKrFFBmBNu3rlxXU7fi37gKodNLH+5obkqsMoKEIjQ05i/Ao1iG0KltEKvxUHNT4nPHkRBDQ2O+GtdiLqah3KlhAB3YjDXNTYlOZ5111llF+A8aUDCF69BprwAAAABJRU5ErkJggg==",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app",limanet:"https://limanet.kukai.app",mumbainet:"https://mumbainet.kukai.app"}}],mI=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAJ60lEQVR4AeXBe2xdd2HA8e/vd865N9f34ce1r+36GcexnTRpmj4S2gbSkbYq64BVTKggJsYfLWxisEkriG4sgECjmjZRVIQ2dTw0aYitaFC2wUYofajQNU3S5uE4sWM7tuPY8eP6Xt/nOfec3zYhT4dbP37XsdM//PkI9b/YwiRbnGSLk2xxki1OssVJ3gYFz6VcpuTwdpDcQLN2gT86/Su6jz1Lua5jz/LoG69wrZjnRjK5AYqeyzdGBvjyxTdYcGzqrCDlbM/lH8Yu8uzVUf6iZx+f3L6boJRsNpNNpIDR1DzfuHSOv50YQkfKsXn83HG+OTLAl/pu45GW7Ugh2Cwmm0ABY+kkZ2aukioWyDg2awlKA3BYMpxb5CMnX+TJodMc7d3Pw83tCAQbzWQDeUoxkpqnf26adLFAJf6gfSd/PXSGcmfSSX7v+PPsidXy2e69fLBlO5aQbBSTDZB1bC4tzDKYnKNQcliPr+6+g72xWv78/AnG81nKnU0n+f2TL/G58yd4rKOXj7XvpGVbFdfLZJ0Kbonx9AKXU/Ncy2VQrEywNgF8pHUHH2ju5OmRfp4cOsO8XaTcRD7LXw6c5IsXTvFb9c18qKWL9ze3U2cFWQ+TCqTtIpOLKSYyKa7lMiilWE3QMNkVT5APh2F6DB0hw+Dx7r18vLOPp4bP8bVL/SSdIuVcpTg2M8mxmUk+8abkcH0T72tq57cTrXSFo+gy0XRiaoKB+WvoCFsB+uIJumvqMaXk9XyGSsVMi8/33MqfdN3M341e4Knhc1wp5FiOozyOzUxybGaSTwFHe2/laO9+dJhoyjo2qxFAUyTGztp6WiPVCCHYCFHT4s+69/Dprt384Opl/v7yAC/OTqFY2Wgugy4TTbZbYjl126roqK6lM1ZLlRVAh6JylpQ80rKdR1q2M5Jb5HsTw3x/coQz6STl5uwiukw02Z6LX1u0htsaW4gEgqwlKA38sq5D1i0RNkzWY3tVlCd69vFEzz4uZlL86dnX+Mm1CZYknSK6JJocz8MvURUhEgiiY3e0Gj/b8/jjM6+SdUtcr55INXfXJfBLlRx0mWgquS5+ppTo2huroy9SzUAmxZLvjA3yTxOXiBgWHgrFrzUGQxyqS/BYRy8HahvQETUt/NKOjS6JppLy8DOlRJcAntx9B+Vsz2PeKbLg2KQcm5RjczGT4ltjg9z18r/x2JuvUPRc1hI1LfwypRK6JJpKnoefISWVeG9TO1/edRu6FPDM5Yt88PVf4CnFaqoME7+sW0KXRIOrFOUMIanUEzv38cMDR+iNVKPrx1PjPD1yntVUGQZ+Rc/FUwodJho85VFOCsF6vK+pnfc2tXM6PU//4gK25yEAKQSuUrw0N8V3x4fwlGLJXw2e5g87+7CkZDlBw6Bc0fMIGQZrMdGglKKcFIL1EsC+WB37YnWU+2hbN7dXx/nkmVdZMl3M88vkNQ7Hm1hOQBiUs5VLCIO1SDQo3kog2Cwf7+yjxgrgd35xgZWYUlDO9RQ6JBqU4i2EYNMYQrBNGviVlGIlEkE5D4UOiQYheAvF5jk2M8lUMY9fZ1WEzWCiQSAop5SiUlm3xJxdRKFYjuN5PD97lc/1v45flWHyrngTK3GVopwhBDpMNEghKOcphQ7b83jm8gWeGbvIm6kkCkWlHuvsJWZarMRRHuUsIdFhokEKQTlXeaxlPJ/ld1/7OadSc6zXzdEavtS7n9UUXJdyQcNAh4kGKQRSCDylWFLyPFaTdGyO/PKnDGXTrNedNfX88MARIqbFarJuCb+AlFhCosNEkyUNim6JJY7rsprP9h9nKJtmPfZEa/lEZy+PdvZiCcla0o6NX9S00GWiKWgYFN0SS4quy0qmi3m+Oz6EX40V4It9+7mnrhFDCJZjCEFzsIp4IEgl5pwifnVWEF0mmoKmBXaRJYWSw0qOzUzieB5+zx24j0PxRjbDVCGPXyK4DV0STVWmhV/GKbKS4dwifr2Rag7FG9ksl3KL+LWGwuiSaIoFt+E3X8izEonAz/E8NtOJhVn8+iI16JJoioeq8Ms5NuligeX0RqrxG84t8tzUGJvh7GKSyUIOvwO19egy0ZSoiiCFwFOKJZfTC+xtaKLc/Q03UWWY5NwSSx55/QU+veNm3lHbgCEESwJC0hOpprMqwnr885UR/ILS4J11jegy0WRJg8ZwlKuZNEsuLcyyp74RIQR+1VaAT3Xt5quDp1lS8FyeHDzNSvZXx/nKrtt4MNGKLsfz+PbYIH73NdxExLTQJalAV3UdflnHZjSdZDlHe2/l7roEuk6l5njo1Z/xlYtvousfJ4a4Usjh99G2biohqUB7rJaQaeF3euYqrvIoF5QG//GOB3i4uQNdCvj8wEn+ZXKUtWTdEl+48AZ+baEw729upxKSCkgh2BVP4Jexi5ydmWI5MdPiB3e+m5/e9QAfuKmTpmAIwdoeP3ecklKs5gsDp5jIZ/H7TPdeLCGphEmFeuoauDA/Q9axWdI/N01LtJr6UJjlPNDQwgMNLfwfxW+at4t8pv843x4bZMlYPsMr89McjjexnBdmp/ja8Dn8usMxHu3opVKSChlCcntTK36eUrw8MUy+5LAWAQhAAAKIB4J885a7qbEC+J1NJ1nOeD7Lh068gKsUfl/fe5CAlFRKsg5t0Ro6qmvxyzkOvxi7hO26VCogJY3BEH5516XcvF3koVd/xnQxj9/H2nfyYKKV9ZCs08GmdqKBIH7JQo7nxwYpuiU22oxd4P5f/SdnF5P47YrW8NSeg6yXZJ0sw+Bw2w4saeA3l8/xXyMXWbSLVEJRRvD/LmRSHHr53zmVmsOvzgryr3e+m4hpsV6S61Ad3Mbhti4MIfFL2wV+MjzAaCqJPoWf4Ne+d2WYgy/9mMFsGr+wYfKjg/fRE6nmephcp8ZwlHvbd/Di+CVKnscSx3N55coIl9Pz3N7YSiQQpBKXcxkefu3n/GhqjHIR0+K5A0e4py7B9TLZAE3hKEc6dvLi+DCFkoPfxGKKyUyaHTVx+uIJYoFtLEcpfsPTI+dZTlMwxHMH7+OOmno2gskGqQ+Fec/2Xl6eGGE2n8XPU4rB5CyDyVkaw1HuuqmDsBWgUnfVJvj+HffSGgqzUSQbqMoKcH9nD7c0NCOFYDnT2UVOTE1QiYCUHO29lRcOvYfWUJiNZLLBpBDsbWimI1bLyekrXMmkKJe2C+h6MNHK39x8J7uiNWwGk00SC27j3vYdzOaz9M9OM5FJoZRChyEEDzW28Xj3Hu6pa2QzmWyy+lCYd7V1kS85jKaSjKbmUSjKmVJyS6yWD7fu4MMtXbSGwtwIJjdIyLTYFU+wK57AVR7l/vudv0PEtLjRJG8DQ0jKRUyLt4Nki5NscZItTrLFSba4/wG5rKPEn6lO8wAAAABJRU5ErkJggg==",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"naan - your portal to web3 ",shortName:"naan",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACDklEQVR4Ae3BMWgTcRTA4d97/aNBI2SpOKmbgjrUBNvBQbsJOggd2sG14NCILg52sEPr3ExZnVwLTgUJggq2TUAwiJNkkapEdAjUoeR5NuAtSe3JUXt5fp9YsWSkZ0Ea9YdErFjaAnIMdlsa9erixOeCmH7j37ilOKc4pzinOKc4pzinOBfY3QdgnZ7rQJ4ho+yuJo36jDTqM8AnhpDinOKc4pzinOJcIHs6XewmAyhcA7nHHgWyZ3t+7fgzBlga/3KaBALZM/Jool0i0sU2H7we/Uhkabx9UQQ1654igUD2HDOzDXbYIjDPDntlRg6EJBTnFOcC6TpnxdI0PSNkQCBdU8AUGaI4pzinOKc4pzinOKc4F4A5BnvHb7YAUiA9L/nF2ALm+BsidWJ3gUAissF/zolRfgycZP+tCJVlIlbLV4EzpGNdJjv3iVjtaAXkAoOtBuAScJb91yRWBEqk4wexMeAyg7UU5xTnFOcU5xTnFOcCB9820KanAORIUeDga8pkZ4yI1fJPgGlSpDinOKc4pzinOBdITKpgX+lLRsFmyZBAcstC5T19GHfOA7NkiOJcIDFrGOUu8Fyo3CBilJ8CV8CUjAkkd4SeHLEckCeDFOcCw+ew1fIn6DnEHwSGz1Vgkz1SnFOcU5xTnFOcU5xTnAvAKtAkubfEXgDfSUTeEKsBLfprEVsDAump/wQutXPS0gaA0QAAAABJRU5ErkJggg==",universalLink:"https://www.naan.app/",deepLink:"naan://"},{key:"altme_wallet",name:"Altme Wallet",shortName:"Altme",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF7klEQVR4AeXBW5DVdQEA4O/3O/+zexYWlEWQe6W4hhJQDBdRCRaMFMfrjICAyjg+ODXm9NDlofGp0pp8sRqnxqeaQqbsMo1O4ziJ17QAwWuikxaKQiIBC8tyzvk1gzM0O8vZ5dz25XxfWCslLSxqcVGLi1pc1OKiFhe1uKjFRS0uanFRi8uMsJCn2EHWQdt0lDj+b8r95I6SikZUZiQVGH8xV9/J3B7GTiCVOfghO57gsQc58AaOGzGZkdJO91Xc/VPOnkgIThk9likzWbSaH93Ku0+jaEREIyFSmMpdDzDuXEIwSAhMmM5Xfkw8y4iJRkKBlbfQNdmwps1iwXXIGxFRswVCgRW3EoJhhcCXNlEebUREzZbjomWcO8MZu3ARUy8mZJouarKUsWIDIThjuYxl60mjNV3UTJGubuZdgaAql15L+3hETRU1USpw6Q10dKpa12TmrSJ0aKqoibLxLF2rJgErbya1a6qoSeIouuczdabaBC6Yz9TZhDZNEzVJMWPlJmLOIKlM7yHee5P33qT3ECkZpK3AF2+iFDRNpglCxvjzmLvUIB/v43f388Lj9O5z0qgJLL6C67/OuHOdEgKXXMsj36fvPU2RaYJUYPE1jDrLAB++y/fWs28n4Rip5KTDe3l8Nzu38u1fMek8p3RNYe4qXvwF6YSGi5qgnGfFRkJwSqnIT+5m33YcIZX8XwlH2L+TB75KueSUGLniNk5kmiJqtDwXLWHSpw2w+2+8vhXHVJT62P00rz1rgAsXMX0echouarByoOc2Ys4A25+jLRlWVmbnswbI2li6jtCp4aJGCoyZxoIrCcEAR3sJwfDK9B02yLK1xDGIGipqpAJL1lAYbZCJEyiXDC9H12RSMsDZ5/D5KwkdGipqpLPoudlpLbqKcgeiygKlHItXE4JBVq6n3KGhogYJBboXMuMipzVxBl++E2OcXiCMZdXXmHyewQKzFjFpJiGvYaIGKXfQs4EYnVYIrPsGX7ydNJ7QTsgRcoQCzuHyW1j/LRXl21m2jnKmYTKNkDF2Cl9YYUjtHdxxH0uu5i8Ps/cVEibPZvkaZl9OLlNRCFxyLb+/l+N9SOqWaYQCC6+hc5xh5TLmLGfOckpFJ+UyZ2zCdD63kr//GkV1ixogFOhZQ3BmUiIlQiREUkJyRmJkxW2UcxoiU6fQxswFzJiFYFjlEm/v5K+P8v52Yp4Z81lyDdO6CdGwZl3C1IXsfQ4ldcnUqYiejeTyhvXRHh76Jtv+RCwRfGL7o/zhPi7fyMZ76BxnSO0dXHYDW3YQjqhLVKexU5i/ihAMae873HMdO35DPIxeUi+pF0dIH/PUz/juag5+YFhLbyI/Ud2iOoQCC66nc5wh/Xc/P1jPgVfRj2SwhGO8s537N3DsiCF1TWLuUmKnukR1OJFn1a2EoKJSkYe+wwcvkfoM7zhvPs+WeymXVBQDq27neE5dolrlOX8Bn5qjopTY9hgv/hJHnbFwlD//nLd2IDm9wKxFTL6AkKlZVKsxrNhECCrqP8aWewl9qneYzT+kWFRRLmP5BlK7mkW1yNFxDotXqygldj3Jnl0oqVo6xhvP8NZLKgqBpTeSdSKoSVSLAguvpvNslSWe3EIsqlk6yNYthjR+CnNXIqcmUQ3CKJatMaSD+3n1GdIJtTvOtsfoPaSiEOnZhIKaRFUKbUy7mPPnEYLTSoltT9B3ACW1K3FoD7ueMqTZS5jQjZyqRVUqB+YtJ8sb0tMPE4+qW+jlqc2G1NbBZy8j5FUtqlJCrt2Q/vkyu18g9atfkZf/yJ5/IKkoC0iqFlUplnj+txzcR0oGSIn9/+LBO0gHkDRE6RgP3sXHH5KSAVLio/fZuZVUVLWwVkqqlTFxNpetY2q3k0pF3n6J5zdz6F0UNVaerm4W38hn5hBzJOx5nWc2859XUFa1TC2K7NvFI69RzDkpJHIJ/Uga7wQHXuPR3ZRyJJ/ISiiirCaZWpXRT2YEJfST0zhRi4taXNTiohYXtbioxUUtLmpxUYuLWtz/AIepoFxQZk61AAAAAElFTkSuQmCC",universalLink:"https://app.altme.io/app/download"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADS0lEQVR4AeXBXWiVZQAA4Gcvh+lYP4xGBBsc7Wal2UyWQ9gWSAYzhSgcgtBUSCwKMfulS2+iG7vJlUGJSzHBqwSLZhAYKgmZNac3tQNbizpTapPJYTun6zGDL/e+dPE9T53aYE2OBTkX5FyQc0HOBTkX5FyQc0HOBTlXkMLpy5TKoireR2+72ApSODjEqR9EtekxetvFFuRckHNBzgU5F6QwUxHdTEUKQWyzc1wqie5Sidk5sQWxHTvH5LToJqc5fl5sQUzXJth3TDJ7j3JtQkxBDLNzfPYdXfspT0mmPEXXfo6cZXZODAVZnf6Rg2csMFPhUonJabfV3caWtRSbCUEm1SqlMie/59ur5ilP0f8Rrx5ldZGGegu89CS9j8qiIKvSJKd+kFlDPYd30dfpjr3yFCcusP0QMxXzTE5zZthtPb1aVkEqh3fR12nR+jo5vEsqQQpPPERfp2j6Ouluk0KQwnOPi27LWikEKRSbRVdslkKQwo2bortxUwpBCmeGRTc0LIUghc8vcHVCNCO/ceKCFIIUKrM8c4Cx6xZt7DrPvk9lVgoFqVyboP0d3tzElrUUmwl1MqnWGP2Tkxd59wuuT0ulTm2wZjFmKlz8lQ+GOHGemvT6Onl5Ax3Laai3GAWL1VBPdxvdbfS2s/MQ1ZokQh2fvEB/t1iCmPq72LdRMq9tpL9bTEFsb29mSUF0Swq8tVlsQWxNjaxZJro1y2hqFFuQQlOj6JoapRCkMFoW3WhZCkFsV8YZGRfdyDjDY2ILYqpW2TNITXw17D1KtSqmIJapW2wbYGhYMl//zLYPmb4lloKsSmV+GrPATIWLv3DkLL//ZYE6PNzCsmZCkEm1ymiZkXFq5jt+jm+G2d5Dx3Ia6i2wqpVisywKsjp9mRc/9Z9seIQD21jZ6o5cGWfPIEPD5vnjb9475V8N7GD3elkEqWxdx5evs7LVHVvRwldvsHWdVIIU7r+Hj3cSgkULgUM7eeBeKQQpbO/hrqWiuXspz3dJIUihY7noOh6UQpBCQ73oGuqlEORckHNBzgU5V5BVTxsDO2SyqlV0q1oZ2CGTnjZZFWS1ooUVLf43xWZ2rxdbkHNBzgU5F+RckHNBzgU5F+RckHP/AKis3ntPQOcLAAAAAElFTkSuQmCC",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIAElEQVR4AeXB3W9b9RnA8e/znHOcOGliO3aiUkLfCyNDLdIkShtKIu2GiwlVbNP2d3C7m11Mu9jlNG2X7AJpm5i0MSGtEpu0ZKhMoxUVsJVBm5emaUtI7DiB+Pjl93uGXRzaDBGGT10kfz4CGD1M6XFKj1N6nNLjlB6n9Dilxyk9LiRBx8cizn7nARChRQAREED4hIAAAiJCiwAiIIAILQKIgHCbCAgg8KtfL7KyWiUpIQk5MRpy7uwQheceQIZSoAICqCAqIAIKiIAKCKACIqACAqICKiACCoiACoiAAipcXdjixd9fJylKAk6Mhpz7boaRwQBWt9jJjN0JX8Bomz6dJ0lKh06MhZz7fpaRwQBUsLUKX4mxO4OpyQJJUjo09VCKkYEAVCBQKMZ8FSLsTuDIwUHG96VJSkiHZpbqEAiI0GQ1B1t12JOipdLA1ipsEz4htAi3CRhNAsJnhNsCRR8fAwMEpifzvPjSdZIQ0qG3P6xTqsFIWkBosWKM7EnRUnP4vyyAN3AG3sAZeA/OwBt4A2eYN3AG3sAZeAPvkbFBZHwIGR2gafp0gRdfuk4SQjrkDV5brvHsI2laRGA9hv3DtGT60FMPghmfy/hixRj/zofY3DoyNkDT1GSepIQkYPZajWcfHQABRLD1KsJn5NE8IgIKiIAKCKACIqACAqICKiACCohApYG/eAt7rwgn94HAkUODjO9Lc/1GhU4pCZhZqEEgoAoqUHdQabDN+D8Z2wYjJNePv7xGmwDTkwWSoCTg7Q9qlKpAIBAIqGLlmG3C7oTbzADhTvLICNQ9rFVom57MkwQlAd7g79eqEAioQCBQrrHN+FL8Wyu4VxfZKTh7jOhn05BP0zY1WSAJSkJm52NQgUBBBdussk3YnYfGC+9gl1f5Mo4eGmR8X5pOKQmZmY8hEFCBQKDhoepoMXanIAeG8XPr4DxfxLht+qkCnQpJyNs3apRiIzeotHjD/3kOUgEEAoFAoBAI9AXot/YiuX7upA+P4K6UsMUN5GiWJlvdwr9xE8IAIkUihVCxSHGlmE6FJMQbvDZf5dnjg+ANf2kF26xCoBApEiqECn0BcjQHqxXI9bPNQI7lQMC/XyQ4mqVJ9qTw7xYhpUgqwFIhpJTnXynxm9l1OqUkaOZqBQz8GzexYkyL8JlAkENZJBVgxZid5FAGUgH2folt/SEyNgAIIBjw/Mtr/GJ2nSSEJOiv727x5qvLUIohUAiA0CDw9KeFb0zkoC/AnEG5CnUPqYA2CRU9lMXPl8EZhELTan4Py//5CCLHC29V+OU/NklKSIL+dbPKE6/wKc+dBlPKyiklcgZmYGDFGNk7SIvQIsdycLWELW4gR7I0/TPo5+wLq9wLSpd8XPNcWIzBeXAGzmOrW2wzWuRYDkTwV0q0nTk5gqpwLyhdNHOlAs7AGTiDlS3aRGjRAxlIKXalRFsuE3FiYph7Qemi2asVcB6cB2dYMYa6o8n4VKTowSy2UAZntE2fznMvKF10frFKrebBeXAenMdWtthJjmWxuseWNmibOpXnXlC6aKtuXFiqgjNwBg2PffAxLcY2OZIDAX+lRNuZkyOoCklTumx2PsacYc5jzrAbH7GTHsggqQCbW6ctl404MTFM0pQum1mogfPgDLxhqxWoOu4SCnIwgy2UwXnapk7nSZrSZa8v16jVPDgPzkPDYzc/AuEOghzJQt1jS5u0TZ/OkzSly7bqxoUbNXAGzsB5bHmTnfRIFlSwuXXazjyZR1VIUkiXjaaV0eMFgskxEAEB6QvBAGGb7B+GSPFz6+i3D9CUy0ScmBjmzXfKJEXpotG0cu57WR5OeSSfRgpppDAAmT4Q7hYqciCDLW6AN9qmJvMkSemS0QHl3A9yPLY3wkoxeGM3cjgLDYdd36Rt+nSBJCldoALnfjjCY3tTECkiYMWYuxj/Qw9nQQSbW6ftzJMjqApJUbrAG6T6FIkUCRVCxVYr7EYeGoJI8fNl2nLZFMcnhkmK0iWzS3UIFcIAQoVSzK5CRfZnsKUNcAZCy/RknqQoXTJzrQaRQqQQKbZRBW9sEz6XHs5A3WPLm7RNTRZISkiXzM7HECqIgADlKo2fX4RIIQogHRJMjqMTee4kh7Lwt2vYQhk5kAGBp5/Moyp4b3RK6ZJbm473Sg6JFDZq+H+vYeUqtlGDrTqST2NrW+wk40MQBfiFMggtI7mI498cJglKF83Mx1gpxl/6ALzRJKEih7MQCFaMsZrjLqEi+4expU1wRpMB05MFkhAAP6ZL1jcbVK6WuVgyLm7AxXXj8ZMFgv4QvIEzNJ9GhlMgAiIgAuUqNreOPpxDMv2IQFwzfveHZToV0kXnF6ucp83T9PgTDU7tD8AbGNitj5EHh7iTHMzArGALZWR/hqanT+VRFbw3OqHcZzPvV6DuoeGh4fA3NtlJxocgUmxxg7aRbMTxiWE6pdxnM3MxNBw0PDQ8rGxh1QZ3CQR5aAh/fRO80Tb1VIFOhdxnry9VqVU9kQBmsFGj/qNZCBVCRUKFVAD9AThP/afnIVRKVWPmj2U6pdxnW3XjwlIVGh5KMbZQhqqDqoOqw6oOnIe4AXUPdU9xo8EzL61z6VadTilfAzMLVSjG2HwZvLGT1R3W8DQVY+OZlze49GGDJIR8Dfz2ckz9lgcMFFAPaqAeVEAFVECFPy3WeWvNkZSQr4HLJcdPSnzKAKNblB6n9Dilxyk9TulxSo9TepzS4/4Lz8MqhS9ENeQAAAAASUVORK5CYII=",universalLink:"https://templewallet.com",deepLink:"temple://"},{key:"atomex_ios",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFIUlEQVR4AeXBfWyMdwDA8e/ze55r6dbW6Ol71cvKVekQZmyGMVtWzMu6YoRI9oeXTWJsppMzr40lnXbxNjYEwZiXKVWtlqMlq5eWVus1nWp7Srz2mHP3LP1DIovq1Z1Hk+fzkQwBJhUdE+icQOcEOifQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TuEVaRUeSo9unfEyGCgquUDBmXOoaE9BY8YWzUldModhcQORJIknThUW8+XXiRScLUFLsuxjNKMRfz9fstM20KdXdyRJ4mnBgUZGjYxjf5YF6/UbaEWgoTkzJ2OKaktdfF9/jVVL5yNJEloRaESWZcYmDKM+XTpHExvTAa0INBIaHEgzf19cEd2hHVoRaOSR3Y6rHj2yoxWBRqqs1ZRdvUZ9VFXl75OFaEWgoaXL11GfHXsOUHa1Aq0INLRszSa27UqnLufOX2LKjLloSZZ9jGY0oqoqO/Yc4Oat25ii2tDM349at+/cZdW6LYyf9C23bt9FS5IhwKSikTHxQ6iyVpN1KA9JkghsGYDBoFBReR2Hw8GrINDIoA/eY03qQvr36UktVVWpslZztbwSh8PBxwPfJ3HGJLQm0EBEeAhrlyVRcKaEeUuW8SydoqNI/GYSkRGhaEnwknl7e7F5TTJCSCRMnMbDh//yLBu37sapqowbNQwtCV6yxeYZdI2NYcLkWVwpK6cu1yqtZBw8wriEYQgh0IrAg7y9vQgLCaJJE2+eUGSZHxYkszcjh/qs3bidiLBgBrzfC60oeECbyHAWzplO3KB+eHkZsNsfk551mFlzf2LqzB9xVVrGIazVNxkdP5iM7CNoQZZ9jGbc0NH0Jof3bqJrbEdkWaaWLAvat2vNmPghZObkUmWtxhVOp5PSC1coOFvCpSv/oAWBGyRJ4rdfFtH8DX+exd/Pl7XLk5CFwFV7M3LIOHiEJ4QQvEwKbuga25EunaN5HlNUW3q93RVLXj6u8PIyMGHMSEZ/FkdsjIkm3l5UVF0nMyeXlJXrOVt8Hk9ScIMpqi2uMEW1xZKXT33aRIazbX0qMaYonhYWEsT40cP5In4oc5NSSfp5FZ6i4IYamw1X3LfZGNi3NwkjPiHzUC4Hso9y4+YtnmYMaE7Gjt+JCAuhLooiM2/2NJxOJ0tSVuMJCm44euwkdrsdg8FAXRwOB5bcfLp1iWFAv96MTfgUh8PJidNn2Z9lYevOfZReuEySeQYRYSG4wvzdV+zem0XpxSu4S5Z9jGZeUI3tAf5+vrzTvQt1+XXdVjb/mUbJ+cukrFjHX+nZlFdU0ToynISRccTGdCA98zCrUxcghMAVsiyolZ5lwV0Kbkqcn0xAi+aM/Xwo//fHzn1MT1zME06nyqnCYk4VFrM4eSXN/P2QZZm+7/ZAURQaon+fnniCgpvs9sdMnDKLtRu3M3zwh4QGB1JprWZnWibZlmM8z+07d6kVEtSShgoOaoknKHiIJS8fS14+L+J+jY2Gqqmx4QmCRuBkQRENdaKgCE8QNAKFRaUUFpXSEBu27MITBI2AqqpMn70Ih8OJK7Itx9mZloknyLKP0UwjUHb1Gtbr1Xw0oA9CCOpy+sw5RoydjM32AE+QZR+jmUbiZEExOZbjRLdvR2hIIE+7d7+GlBXrmTj1e+7cvYenSIYAk0oj1K5NK97qZKJp0yaUX6vieP5pbA8e4mkKjdTFy2VcvFzGyybQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TqBzAp0T6Nx/Vg+o6CnFmfYAAAAASUVORK5CYII=",universalLink:"https://atomex.me",deepLink:"atomex://"},{key:"umami_ios",name:"Umami Mobile",shortName:"Umami Mobile",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://",universalLink:"https://umamiwallet.com/"}];var pn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let g2=bI,b2=gI,v2=vI,m2=mI;const Gf=()=>g2,yI=t=>{g2=t},ka=()=>b2,EI=t=>{b2=t},ih=()=>v2,_I=t=>{v2=t},Da=()=>m2,wI=t=>{m2=t},mo=new Qs,vd=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var ts;(function(t){t[t.DESKTOP=0]="DESKTOP",t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"})(ts||(ts={}));var pr;(function(t){t.IOS="ios",t.ANDROID="android",t.EXTENSION="extension",t.DESKTOP="desktop",t.WEB="web"})(pr||(pr={}));class yi{static getPlatfrom(){return pn(this,void 0,void 0,function*(){return p2(window)?ts.ANDROID:h2(window)?ts.IOS:ts.DESKTOP})}static getPairingInfo(e,r,n,i){return pn(this,void 0,void 0,function*(){const s=i??(yield yi.getPlatfrom()),o=e.p2pSyncCode,a=e.postmessageSyncCode,c=e.preferredNetwork;switch(s){case ts.DESKTOP:return yi.getDesktopPairingAlert(o,r,a,n,c);case ts.IOS:return yi.getIOSPairingAlert(o,r,c);case ts.ANDROID:return yi.getAndroidPairingAlert(o,r,c);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,r,n,i,s){return pn(this,void 0,void 0,function*(){const o=yield bc.getAvailableExtensions();o.forEach(c=>{const l=vd.indexOf(c.id);l>=0&&vd.splice(l,1)});const a=[];return ka().length>0&&a.push({title:"Browser Extensions",type:pr.EXTENSION,wallets:[...o.map(c=>{var l,f,d,O,L;const D=ka().find(z=>z.id===c.id);return{key:(l=D==null?void 0:D.key)!==null&&l!==void 0?l:c.id,name:(f=c.name)!==null&&f!==void 0?f:D==null?void 0:D.name,logo:(d=c.iconUrl)!==null&&d!==void 0?d:D==null?void 0:D.logo,shortName:(O=c.shortName)!==null&&O!==void 0?O:D==null?void 0:D.shortName,color:(L=c.color)!==null&&L!==void 0?L:D==null?void 0:D.color,enabled:!0,clicked:!1,clickHandler(){return pn(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,n){const z=yield mo.serialize(yield n()),q={target:Di.EXTENSION,payload:z,targetId:c.id};ot.postMessage(q,ot.location.origin)}r(pr.EXTENSION,this)}})}}}),...ka().filter(c=>vd.some(l=>l===c.id)).map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!1,clickHandler:()=>{window.open(c.link,"_blank")}}))].sort((c,l)=>c.key.localeCompare(l.key))}),Gf().length>0&&a.push({title:"Desktop & Web Wallets",type:pr.DESKTOP,wallets:[...Gf().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return pn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield mo.serialize(yield e()),f=Pa(c.deepLink,l);window.open(f,"_blank"),r(pr.DESKTOP,this,!0)})}})),...yield yi.getWebList(e,r,s)].sort((c,l)=>c.key.localeCompare(l.key))}),Da().length>0&&a.push({title:"Mobile Wallets",type:pr.IOS,wallets:[...Da().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return pn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield mo.serialize(yield e());i(l),r(pr.IOS,this,!0)})}}))].sort((c,l)=>c.key.localeCompare(l.key))}),{walletLists:a,buttons:[]}})}static getIOSPairingAlert(e,r,n){return pn(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:pr.IOS,wallets:Da().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){var s;return pn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const o=yield mo.serialize(yield e()),a=Pa((s=i.deepLink)!==null&&s!==void 0?s:i.universalLink,o),c=document.createElement("a");c.setAttribute("href",a),c.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),r(pr.IOS,this,!0)})}})).sort((i,s)=>i.key.localeCompare(s.key))},{title:"Web Wallets",type:pr.WEB,wallets:[...yield yi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[]}})}static getAndroidPairingAlert(e,r,n){return pn(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:pr.WEB,wallets:[...yield yi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>pn(this,void 0,void 0,function*(){const i=yield mo.serialize(yield e()),s=Pa("tezos://",i);window.open(s,"_blank"),r(pr.ANDROID)})}]}})}static getWebList(e,r,n){return pn(this,void 0,void 0,function*(){return ih().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const s=window.open("","_blank");e().then(o=>mo.serialize(o)).then(o=>{var a;const c=Pa((a=i.links[n])!==null&&a!==void 0?a:i.links[xt.MAINNET],o);s?s.location.href=c:window.open(c,"_blank"),r(pr.WEB,this,!0)}).catch(o=>{console.error(o)})}})).sort((i,s)=>i.key.localeCompare(s.key))})}}const ve=(t,e,r,n)=>{const i=document.createElement(t);return e.length>0&&i.classList.add(...e.filter(s=>!!s).map(s=>zs(s))),r.forEach(s=>{i.setAttribute(zs(s[0]),zs(s[1]))}),typeof n=="object"&&Array.isArray(n)?n.filter(s=>!!s).forEach(s=>{i.appendChild(s)}):typeof n=="string"&&(i.innerText=n),i},$s=(t,e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.length>0&&n.classList.add(...t.filter(i=>!!i)),e.forEach(i=>{n.setAttribute(zs(i[0]),zs(i[1]))}),typeof r=="object"&&Array.isArray(r)&&r.filter(i=>!!i).forEach(i=>{n.appendChild(i)}),n},nn=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return t.forEach(r=>{e.setAttribute(zs(r[0]),zs(r[1]))}),e},AI=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t.filter(r=>!!r).forEach(r=>{e.appendChild(r)}),e},xI=()=>$s(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[nn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),zs=t=>{const e=document.createElement("div");return e.innerText=t,e.innerHTML},pg=t=>{t.innerHTML=""};var gn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const gg=new Yr("Alert"),bg=new Qs,SI=(t,e,r)=>gn(void 0,void 0,void 0,function*(){const n=()=>gn(void 0,void 0,void 0,function*(){return yi.getPairingInfo(r,(y,T,x)=>gn(void 0,void 0,void 0,function*(){x||(yield Mu())}),()=>gn(void 0,void 0,void 0,function*(){E()}))}),i=yield n(),s=e.getElementById("pairing-container");if(!s)throw new Error("container not found");const o=document.createElement("span");s.appendChild(o),i.buttons.forEach(y=>gn(void 0,void 0,void 0,function*(){const T=yield Vi(),x=ve("div",["beacon-list__title"],[],y.title),_=ve("button",["beacon-modal__button","connect__btn"],[],y.text),u=document.createElement("a");u.id=`button_${T}`,u.appendChild(x),u.appendChild(_),o.appendChild(u);const p=e.getElementById(u.id);p&&p.addEventListener("click",()=>gn(void 0,void 0,void 0,function*(){y.clickHandler()}))}));const a=(y,T,x)=>{const _=`Open in ${x.name}`,u=x.key,p=x.logo?ve("div",[],[],[ve("img",["beacon-selection__img"],[["src",x.logo]],"")]):$s(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[nn([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),b=ve("div",["beacon-selection__name"],[],[ve("span",[],[],x.name),x.enabled?void 0:ve("p",[],[],"Not installed")]),g=ve("a",["beacon-selection__list",x.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${u}`],["alt",_],["target","_blank"]],[b,p]),h=document.createElement("span");h.appendChild(g),y.appendChild(h);const S=e.getElementById(`wallet_${u}`),P=w=>gn(void 0,void 0,void 0,function*(){if(w&&w.key!=="Enter")return;x.clickHandler();const m=e.getElementById("beacon-modal__content");m&&T!==pr.EXTENSION&&T!==pr.IOS&&(pg(m),m.appendChild(ve("p",["beacon-alert__title"],[],"Establishing Connection..")),m.appendChild(ve("div",["progress-line"],[["id","beacon-toast-loader"]],"")),m.appendChild(ve("div",["beacon--selected__container"],[],[...x.logo?[ve("img",["beacon-selection__img"],[["src",x.logo]],""),ve("img",["beacon--selection__name__lg"],[],x.name)]:[]])))});S&&(S.addEventListener("click",()=>P()),S.addEventListener("keydown",P))},c=document.createElement("span");s.appendChild(c);const l=y=>{pg(c),y.forEach(T=>{const x=document.createElement("div");x.classList.add("beacon-list__wrapper"),c.appendChild(x),x.appendChild(ve("div",["beacon-list__title"],[],T.title));const _=document.createElement("span");x.appendChild(_),T.wallets.forEach(u=>gn(void 0,void 0,void 0,function*(){a(_,T.type,u)}))})};l(i.walletLists);const f=y=>gn(void 0,void 0,void 0,function*(){if(y.data==="extensionsUpdated"){const T=yield n();l(T.walletLists)}});let d;d=y=>{y.data===`closeAlert-${t}`&&(ot.removeEventListener("message",f),ot.removeEventListener("message",d))},ot.addEventListener("message",f),ot.addEventListener("message",d);const O=e.getElementById("beacon--qr__container"),L=e.getElementById("beacon--qr__copy"),D=e.getElementById("beacon-title"),z=p2(window)?"android":h2(window)?"ios":"desktop",q=e.getElementById("beacon-main-text"),V=e.getElementById("pairing-container"),U=e.getElementById("beacon--switch__container"),W=()=>gn(void 0,void 0,void 0,function*(){const y=r?yield bg.serialize(yield r.p2pSyncCode()):"";navigator.clipboard.writeText(y).then(()=>{L&&(L.innerText="Copied"),gg.log("Copying to clipboard was successful!")},T=>{gg.error("Could not copy text to clipboard: ",T)})});let F=!1;const j=y=>gn(void 0,void 0,void 0,function*(){const T=e.getElementById("beacon-switch");if(T&&(T.innerText=y==="none"?"Pair wallet on same device":"Pair wallet on another device"),q&&V&&U&&L&&O&&D)switch(q.style.display="none",D.style.textAlign="center",V.style.display="none",U.style.display="initial",y){case"ios":V.style.display="initial";break;case"android":V.style.display="initial";break;case"desktop":V.style.display="initial",D.style.textAlign="left",q.style.display="none",U.style.display="initial";break;default:if(!F){F=!0;const x=yield bg.serialize(yield r.p2pSyncCode()),_=Pa("tezos://",x),p=pI(_,"svg").replace("<svg",'<svg class="beacon-alert__image"');O.insertAdjacentHTML("afterbegin",p),L&&L.addEventListener("click",W),O&&O.addEventListener("click",W)}q.style.display="initial"}});let G=!1;const E=()=>{j(G?"none":z),G=!G};E();{const y=e.getElementById("beacon-switch");y&&y.addEventListener("click",E)}});let y2=kf.LIGHT;const vg=t=>{y2=t},m0=()=>y2,RI=t=>ve("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[ve("div",["beacon-toast__content"],[],[ve("span",[],[["id","beacon-text"]],[ve("p",[],[["id","beacon-text-content"]],t),ve("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[ve("span",[],[],"Open"),$s(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[nn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),$s(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[nn([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),$s(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[nn([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),ve("div",["progress-line"],[["id","beacon-toast-loader"]],""),ve("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),ve("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),II=()=>ve("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),$s([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[ve("title",[],[],"beacon_logo"),nn([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),nn([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),nn([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),E2=(t,e,r,n)=>ve("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${t}`]],[ve("div",["beacon-modal__wrapper"],[],[ve("div",["beacon-modal__header"],[],[$s([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[ve("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),nn([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),nn([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),nn([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),AI([nn([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),ve("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${t}-close`]],[ve("div",["beacon-modal__close__icon"],[],[ve("div",["beacon-modal__close__line1"],[],[]),ve("div",["beacon-modal__close__line2"],[],[])])])]),ve("div",["beacon-modal__base"],[],[ve("div",[],[["id","beacon-modal__content"]],[ve("div",[],[],[ve("p",["beacon-alert__title"],[],e),...n,ve("div",["beacon-action__container"],[],r)])])])])]),TI=(t,e,r,n)=>E2(t,e,r,[ve("div",["beacon-alert__text"],[["id","beacon-main-text"]],n)]),OI=(t,e,r,n)=>E2(t,e,r,[ve("span",[],[["id","pairing-container"]],""),ve("div",["beacon-alert__text"],[["id","beacon-main-text"]],[ve("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet. "),ve("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...n])]),ve("div",[],[["id","beacon--switch__container"]],[ve("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),ve("div",[],[["id","beacon--disclaimer"]],"")]);var Oi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let sh,fs;typeof window<"u"&&typeof window.document<"u"&&(fs=window.document);const oh={},PI=t=>typeof t=="string"?ve("div",[],[["id","beacon--qr__container"]],[ve("div",[],[["id","beacon--qr__copy__container"]],[ve("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):ve("span",[],[],""),NI=(t,e,r,n,i)=>{const s=r,o=n.map((f,d)=>ve("button",[`beacon-modal__button${f.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${t}-${d}`]],f.text));let a=hg.default.css;i&&(a+=hg.pair.css);const c=ve("span",[],[],s),l=i?OI(t,[c],o,[e]):TI(t,[c],o,[e]);return{style:a,html:l}},of=t=>(ot.postMessage(`closeAlert-${t}`),new Promise(e=>{var r;const n=fs.getElementById(`beacon-alert-wrapper-${t}`);if(!n)return e();const i=(r=n.shadowRoot)===null||r===void 0?void 0:r.getElementById(`beacon-alert-modal-${t}`);if(i){const o=oh[t];o&&(clearTimeout(o),oh[t]=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const a=n.parentNode;a&&a.removeChild(n),sh&&sh.focus(),e()},300)}else e()})),Mu=()=>Oi(void 0,void 0,void 0,function*(){return new Promise(t=>Oi(void 0,void 0,void 0,function*(){const e=fs.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const r=[];e.forEach(n=>Oi(void 0,void 0,void 0,function*(){r.push(n.id.split("-")[3])})),yield Promise.all(r.map(of)),t()}else t()}))}),ua=t=>Oi(void 0,void 0,void 0,function*(){var e,r;const n=t.body,i=t.data,s=t.title,o=t.timer,a=t.pairingPayload,c=t.disclaimerText,l=t.closeButtonCallback;yield Mu();const f=(yield Vi()).split("-").join(""),d=fs.createElement("div");d.setAttribute("id",`beacon-alert-wrapper-${f}`);const O=d.attachShadow({mode:"open"}),L=fs.createElement("div");L.setAttribute("tabindex","0"),O.appendChild(L);const D=[...(r=(e=t.buttons)===null||e===void 0?void 0:e.map(y=>{var T,x;return{text:y.text,actionCallback:(T=y.actionCallback)!==null&&T!==void 0?T:()=>Promise.resolve(),style:(x=y.style)!==null&&x!==void 0?x:"outline"}}))!==null&&r!==void 0?r:[]];let z=a?PI(n):ve("span",[],[],n??"");i&&(z=ve("span",[],[],[z,ve("pre",[],[["style","text-align: left"]],i)]));const{style:q,html:V}=NI(f,z,s,D,!!(a!=null&&a.p2pSyncCode));L.appendChild(V);const U=fs.createElement("style");U.textContent=q,O.appendChild(U),o&&(oh[f]=window.setTimeout(()=>Oi(void 0,void 0,void 0,function*(){yield of(f)}),o)),fs.body.prepend(d);const W=O.getElementById(`beacon-alert-${f}-close`),F=()=>Oi(void 0,void 0,void 0,function*(){l&&l(),yield of(f)});if(c){const y=O.getElementById("beacon--disclaimer");y&&(y.innerText=c)}const j=m0(),G=O.getElementById(`beacon-alert-modal-${f}`);G&&(G.classList.add(`theme__${j}`),G.addEventListener("click",F));const E=O.querySelectorAll(".beacon-modal__wrapper");return E.length>0&&E[0].addEventListener("click",y=>{y.stopPropagation()}),sh=fs.activeElement,L.focus(),D.forEach((y,T)=>{const x=O.getElementById(`beacon-alert-${f}-${T}`);x&&x.addEventListener("click",()=>Oi(void 0,void 0,void 0,function*(){yield of(f),y.actionCallback&&(yield y.actionCallback())}))}),W&&W.addEventListener("click",()=>Oi(void 0,void 0,void 0,function*(){yield F()})),window.addEventListener("keydown",y=>Oi(void 0,void 0,void 0,function*(){y.key==="Escape"&&(yield F())})),a&&(yield SI(f,O,a)),f}),MI={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var Ir=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let Sn;typeof window<"u"&&typeof window.document<"u"&&(Sn=window.document);const _2=5*1e3;let Ua,Vf,Tr;const LI=t=>Ir(void 0,void 0,void 0,function*(){const{text:e,isBold:r,actionText:n,actionLogo:i,actionCallback:s}=t,o=yield Vi(),a=Sn.createElement("div");a.classList.add("beacon-toast__action__item"),ah(a);const c=l=>ve("strong",[],[],l);if(s){e.length>0&&a.appendChild(ve("p",[],[],e));const l=ve("span",[],[],[ve("span",[],[],n),i&&i==="external"?xI():void 0]);a.appendChild(ve("p",[],[],[ve("a",[],[["id",o]],[r?c([l]):l])]))}else if(n){e.length>0&&a.appendChild(ve("p",["beacon-toast__action__item__subtitle"],[],e));const l=ve("span",[],[],n);a.appendChild(ve("p",[],[],[r?c([l]):l]))}else{const l=ve("p",[],[],e);a.appendChild(r?c([l]):l)}return s&&a.addEventListener("click",s),a}),ah=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},w2=t=>{var e,r;const n=(e=Tr==null?void 0:Tr.walletInfo)===null||e===void 0?void 0:e.icon,i=(r=Tr==null?void 0:Tr.walletInfo)===null||r===void 0?void 0:r.name;let s;const o=ve("strong",[],[],i??"Wallet");n?s=ve("span",["beacon-toast__wallet__container"],[],[ve("img",["beacon-toast__content__img"],[["src",n]],""),o]):s=o;const a=t.split("{{wallet}}");if(a.length===1)return[ve("span",[],[],t)];{const c=[];for(let l=0;l<a.length;l++)c.push(ve("span",[],[],a[l])),l<a.length-1&&c.push(s);return c}},CI=t=>{const e=t.body,r=w2(e),n=ve("span",["beacon-toast__wallet__outer"],[],r),i=RI([n]);return{style:MI.default.css,html:i}},_r=()=>new Promise(t=>{var e;Tr=void 0;const r=Sn.getElementById("beacon-toast-wrapper");if(!r)return t();const n=(e=r.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");n?(Ua&&(clearTimeout(Ua),Ua=void 0),n.className=n.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const s=r.parentNode;s&&s.removeChild(r),t()},300)):t()}),md=(t,e,r)=>{const n=t.getElementById(e);return n&&n.addEventListener("click",()=>Ir(void 0,void 0,void 0,function*(){yield r(n)})),n},y0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.remove("hide"),r.classList.add("show"))},E0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.add("hide"),r.classList.remove("show"))},BI=t=>{E0(t,"beacon-toast-loader"),y0(t,"beacon-toast-loader-placeholder")},kI=t=>{y0(t,"beacon-toast-button-expand"),E0(t,"beacon-toast-button-close")},A2=t=>{y0(t,"beacon-toast-button-close"),E0(t,"beacon-toast-button-expand")},x2=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.remove("beacon-toast__upside_down"),r.classList.add("hide"),r.classList.remove("show"))},S2=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.add("beacon-toast__upside_down"),r.classList.remove("hide"),r.classList.add("show"))},ch=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.contains("beacon-toast__upside_down")?x2(t):S2(t))},R2=(t,e,r)=>Ir(void 0,void 0,void 0,function*(){const n=e.actions;if(n&&n.length>0){const i=n.map(a=>Ir(void 0,void 0,void 0,function*(){return LI(a)}));(yield Promise.all(i)).forEach(a=>r.appendChild(a));const o=Sn.createElement("small");o.classList.add("beacon-toast__powered"),o.appendChild(II()),r.appendChild(o),kI(t)}else A2(t),x2(t)}),mg=t=>Ir(void 0,void 0,void 0,function*(){Tr=t;const e=t.timer,r=Sn.createElement("div");r.setAttribute("id","beacon-toast-wrapper");const n=r.attachShadow({mode:"open"}),i=Sn.createElement("div"),{style:s,html:o}=CI(t);i.appendChild(o);const a=Sn.createElement("style");a.textContent=s,n.appendChild(i),n.appendChild(a),e&&(Ua=window.setTimeout(()=>Ir(void 0,void 0,void 0,function*(){yield _r()}),e)),Sn.body.prepend(r);const c=m0(),l=n.getElementById("beacon-toast");l&&l.classList.add(`theme__${c}`);const f=n.getElementById("beacon-toast-list");f&&(yield R2(n,t,f));const d=n.getElementById("beacon-open-wallet");d&&(t.openWalletAction?d.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()}):d.classList.add("hide")),Tr.state==="loading"&&(Vf=window.setTimeout(()=>Ir(void 0,void 0,void 0,function*(){const L=n.getElementById("beacon-toast-button-expand");L&&!L.classList.contains("beacon-toast__upside_down")&&ch(n)}),_2)),md(n,"beacon-toast-button-done",()=>Ir(void 0,void 0,void 0,function*(){yield _r()}));const O=md(n,"beacon-toast-button-close",()=>Ir(void 0,void 0,void 0,function*(){yield _r()}));O&&Tr.state==="loading"&&O.classList.add("hide"),md(n,"beacon-toast-button-expand",()=>Ir(void 0,void 0,void 0,function*(){ch(n)}))}),DI=t=>Ir(void 0,void 0,void 0,function*(){Tr=Object.assign(Object.assign({},Tr),t);const e=t.timer,r=Sn.getElementById("beacon-toast-wrapper");if(!r)return;const n=r.shadowRoot;if(!n)return;const i=n.getElementById("beacon-toast-list");i&&(ah(i),yield R2(n,t,i)),Tr.state==="loading"&&(Vf=window.setTimeout(()=>Ir(void 0,void 0,void 0,function*(){const c=n.getElementById("beacon-toast-button-expand");c&&!c.classList.contains("beacon-toast__upside_down")&&ch(n)}),_2));const s=n.getElementById("beacon-text-content");s&&(ah(s),s.appendChild(ve("span",["beacon-toast__wallet__outer"],[],w2(t.body))));const o=n.getElementById("beacon-open-wallet");o&&(t.openWalletAction?(o.classList.remove("hide"),o.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()})):o.classList.add("hide")),e&&(Ua=window.setTimeout(()=>Ir(void 0,void 0,void 0,function*(){yield _r()}),e));const a=n.getElementById("beacon-toast-button-done");a&&a.addEventListener("click",()=>Ir(void 0,void 0,void 0,function*(){yield _r()}))}),Os=t=>Ir(void 0,void 0,void 0,function*(){var e;if(Vf&&clearTimeout(Vf),Sn.getElementById("beacon-toast-wrapper")?t.forceNew?(yield _r(),yield mg(t)):yield DI(t):yield mg(t),Tr&&Tr.state==="finished"){const n=(e=Sn.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;n&&(BI(n),A2(n),S2(n))}}),Lu=t=>t.length>=12?`${t.substr(0,5)}...${t.substr(-5)}`:t;var gt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const tc=new Yr("BeaconEvents"),vc=5*1e3;var ue;(function(t){t.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",t.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",t.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",t.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",t.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",t.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",t.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",t.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",t.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",t.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",t.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",t.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",t.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",t.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",t.NO_PERMISSIONS="NO_PERMISSIONS",t.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",t.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",t.SHOW_PREPARE="SHOW_PREPARE",t.HIDE_UI="HIDE_UI",t.PAIR_INIT="PAIR_INIT",t.PAIR_SUCCESS="PAIR_SUCCESS",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.INTERNAL_ERROR="INTERNAL_ERROR",t.UNKNOWN="UNKNOWN"})(ue||(ue={}));const Vc=t=>gt(void 0,void 0,void 0,function*(){let e;const r=[];if(t.walletInfo.deeplink&&(t.walletInfo.type==="web"||t.walletInfo.type==="mobile"&&nh(window)||t.walletInfo.type==="desktop"&&!nh(window))){const n=t.walletInfo.deeplink;e=()=>gt(void 0,void 0,void 0,function*(){const i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("target","_blank"),i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}r.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),r.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>gt(void 0,void 0,void 0,function*(){yield _r()})}),r.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>gt(void 0,void 0,void 0,function*(){yield _r();const n=t.extraInfo.resetCallback;n&&(tc.log("showSentToast","resetCallback invoked"),yield n())})}),Os({body:"Request sent to  {{wallet}}",walletInfo:t.walletInfo,state:"loading",actions:r,openWalletAction:e}).catch(n=>console.error(n))}),UI=t=>gt(void 0,void 0,void 0,function*(){Os({body:"Awaiting confirmation in  {{wallet}}",state:"acknowledge",walletInfo:t.walletInfo}).catch(e=>console.error(e))}),KI=t=>gt(void 0,void 0,void 0,function*(){const e=t.walletInfo?"Preparing Request for  {{wallet}}...":"Preparing Request...";Os({body:e,state:"prepare",walletInfo:t.walletInfo}).catch(r=>console.error(r))}),HI=t=>gt(void 0,void 0,void 0,function*(){t?(t.includes("alert")&&Mu(),t.includes("toast")&&_r()):_r()}),FI=()=>gt(void 0,void 0,void 0,function*(){yield ua({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),qc=(t,e)=>gt(void 0,void 0,void 0,function*(){var r,n,i,s,o,a;const c=t.errorResponse.errorType?Qr.getError(t.errorResponse.errorType,t.errorResponse.errorData):new Jm,l=[{text:c.title,isBold:!0}];if(t.errorResponse.errorType===ht.TRANSACTION_INVALID_ERROR&&t.errorResponse.errorData){const f=t.errorResponse.errorData,d=t.errorMessages;let O=!1;if(!((r=f[0])===null||r===void 0)&&r.contract_handle&&d&&(d!=null&&d[f[0].contract_handle])){const L=(s=(i=(n=f[1])===null||n===void 0?void 0:n.with)===null||i===void 0?void 0:i.int)!==null&&s!==void 0?s:(a=(o=f[1])===null||o===void 0?void 0:o.with)===null||a===void 0?void 0:a.string,D=d==null?void 0:d[f[0].contract_handle];L&&(D!=null&&D[L])&&(l.push({text:D==null?void 0:D[L],isBold:!0}),O=!0)}O||l.push({text:c.description}),l.push({text:"",actionText:"Show Details",actionCallback:()=>gt(void 0,void 0,void 0,function*(){yield _r(),yield ua({title:c.title,body:c.fullDescription.description,data:c.fullDescription.data,buttons:e})})})}yield Os({body:"{{wallet}}  has returned an error",timer:t.errorResponse.errorType===ht.ABORTED_ERROR?vc:void 0,state:"finished",walletInfo:t.walletInfo,actions:l})}),jI=()=>gt(void 0,void 0,void 0,function*(){ua({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(t=>console.error(t))}),GI=()=>gt(void 0,void 0,void 0,function*(){yield Mu()}),VI=()=>gt(void 0,void 0,void 0,function*(){yield ua({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),qI=t=>gt(void 0,void 0,void 0,function*(){var e;const r=[...(e=t.buttons)!==null&&e!==void 0?e:[]];r.push({text:"Done",style:"outline"});const n={title:"Internal Error",body:t.text,buttons:r};yield ua(n)}),$I=t=>gt(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:t.p2pPeerInfo,postmessageSyncCode:t.postmessagePeerInfo,preferredNetwork:t.preferredNetwork},closeButtonCallback:t.abortedHandler,disclaimerText:t.disclaimerText};yield ua(e)}),zI=t=>gt(void 0,void 0,void 0,function*(){const{output:e}=t;yield Os({body:"{{wallet}}  has granted permission",timer:vc,walletInfo:t.walletInfo,state:"finished",actions:[{text:"Address",actionText:Lu(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),WI=t=>gt(void 0,void 0,void 0,function*(){const{account:e,output:r,blockExplorer:n}=t;yield Os({body:"{{wallet}}  successfully submitted operation",timer:vc,state:"finished",walletInfo:t.walletInfo,actions:[{text:Lu(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>gt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e.network);window.open(i,"_blank"),yield _r()})}]})}),XI=t=>gt(void 0,void 0,void 0,function*(){const e=t.output;yield Os({body:"{{wallet}}  successfully signed payload",timer:vc,state:"finished",walletInfo:t.walletInfo,actions:[{text:`Signature: ${Lu(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>gt(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{tc.log("showSignSuccessAlert","Copying to clipboard was successful!")},r=>{tc.error("showSignSuccessAlert","Could not copy text to clipboard: ",r)}),yield _r()})}]})}),JI=t=>gt(void 0,void 0,void 0,function*(){const{network:e,output:r,blockExplorer:n}=t;yield Os({body:"{{wallet}}  successfully injected operation",timer:vc,state:"finished",walletInfo:t.walletInfo,actions:[{text:Lu(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>gt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e);window.open(i,"_blank"),yield _r()})}]})}),yd=()=>()=>gt(void 0,void 0,void 0,function*(){}),yt={[ue.PERMISSION_REQUEST_SENT]:Vc,[ue.PERMISSION_REQUEST_SUCCESS]:zI,[ue.PERMISSION_REQUEST_ERROR]:qc,[ue.OPERATION_REQUEST_SENT]:Vc,[ue.OPERATION_REQUEST_SUCCESS]:WI,[ue.OPERATION_REQUEST_ERROR]:qc,[ue.SIGN_REQUEST_SENT]:Vc,[ue.SIGN_REQUEST_SUCCESS]:XI,[ue.SIGN_REQUEST_ERROR]:qc,[ue.BROADCAST_REQUEST_SENT]:Vc,[ue.BROADCAST_REQUEST_SUCCESS]:JI,[ue.BROADCAST_REQUEST_ERROR]:qc,[ue.ACKNOWLEDGE_RECEIVED]:UI,[ue.LOCAL_RATE_LIMIT_REACHED]:jI,[ue.NO_PERMISSIONS]:FI,[ue.ACTIVE_ACCOUNT_SET]:yd(),[ue.ACTIVE_TRANSPORT_SET]:yd(),[ue.SHOW_PREPARE]:KI,[ue.HIDE_UI]:HI,[ue.PAIR_INIT]:$I,[ue.PAIR_SUCCESS]:GI,[ue.CHANNEL_CLOSED]:VI,[ue.INTERNAL_ERROR]:qI,[ue.UNKNOWN]:yd()};class yg{constructor(e={},r){this.callbackMap={[ue.PERMISSION_REQUEST_SENT]:[yt.PERMISSION_REQUEST_SENT],[ue.PERMISSION_REQUEST_SUCCESS]:[yt.PERMISSION_REQUEST_SUCCESS],[ue.PERMISSION_REQUEST_ERROR]:[yt.PERMISSION_REQUEST_ERROR],[ue.OPERATION_REQUEST_SENT]:[yt.OPERATION_REQUEST_SENT],[ue.OPERATION_REQUEST_SUCCESS]:[yt.OPERATION_REQUEST_SUCCESS],[ue.OPERATION_REQUEST_ERROR]:[yt.OPERATION_REQUEST_ERROR],[ue.SIGN_REQUEST_SENT]:[yt.SIGN_REQUEST_SENT],[ue.SIGN_REQUEST_SUCCESS]:[yt.SIGN_REQUEST_SUCCESS],[ue.SIGN_REQUEST_ERROR]:[yt.SIGN_REQUEST_ERROR],[ue.BROADCAST_REQUEST_SENT]:[yt.BROADCAST_REQUEST_SENT],[ue.BROADCAST_REQUEST_SUCCESS]:[yt.BROADCAST_REQUEST_SUCCESS],[ue.BROADCAST_REQUEST_ERROR]:[yt.BROADCAST_REQUEST_ERROR],[ue.ACKNOWLEDGE_RECEIVED]:[yt.ACKNOWLEDGE_RECEIVED],[ue.LOCAL_RATE_LIMIT_REACHED]:[yt.LOCAL_RATE_LIMIT_REACHED],[ue.NO_PERMISSIONS]:[yt.NO_PERMISSIONS],[ue.ACTIVE_ACCOUNT_SET]:[yt.ACTIVE_ACCOUNT_SET],[ue.ACTIVE_TRANSPORT_SET]:[yt.ACTIVE_TRANSPORT_SET],[ue.SHOW_PREPARE]:[yt.SHOW_PREPARE],[ue.HIDE_UI]:[yt.HIDE_UI],[ue.PAIR_INIT]:[yt.PAIR_INIT],[ue.PAIR_SUCCESS]:[yt.PAIR_SUCCESS],[ue.CHANNEL_CLOSED]:[yt.CHANNEL_CLOSED],[ue.INTERNAL_ERROR]:[yt.INTERNAL_ERROR],[ue.UNKNOWN]:[yt.UNKNOWN]},r&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,r){return gt(this,void 0,void 0,function*(){const n=this.callbackMap[e]||[];n.push(r),this.callbackMap[e]=n})}emit(e,r,n){return gt(this,void 0,void 0,function*(){const i=this.callbackMap[e];i&&i.length>0&&i.forEach(s=>gt(this,void 0,void 0,function*(){try{yield s(r,n)}catch(o){tc.error(`error handling event ${e}`,o)}}))})}overrideDefaults(e){Object.keys(e).forEach(r=>{const n=r,i=e[n];i&&(this.callbackMap[n]=[i.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(r=>{const n=r;this.callbackMap[n]=[],e?this.callbackMap[n].push(e):this.callbackMap[n].push((...i)=>{tc.log(r,...i)})})}}const $c={[He.BlockchainRequest]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.BlockchainResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.PermissionRequest]:{sent:ue.PERMISSION_REQUEST_SENT,success:ue.PERMISSION_REQUEST_SUCCESS,error:ue.PERMISSION_REQUEST_ERROR},[He.PermissionResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.OperationRequest]:{sent:ue.OPERATION_REQUEST_SENT,success:ue.OPERATION_REQUEST_SUCCESS,error:ue.OPERATION_REQUEST_ERROR},[He.OperationResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.SignPayloadRequest]:{sent:ue.SIGN_REQUEST_SENT,success:ue.SIGN_REQUEST_SUCCESS,error:ue.SIGN_REQUEST_ERROR},[He.SignPayloadResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.BroadcastRequest]:{sent:ue.BROADCAST_REQUEST_SENT,success:ue.BROADCAST_REQUEST_SUCCESS,error:ue.BROADCAST_REQUEST_ERROR},[He.BroadcastResponse]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.Acknowledge]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.Disconnect]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN},[He.Error]:{sent:ue.UNKNOWN,success:ue.UNKNOWN,error:ue.UNKNOWN}};var YI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class QI{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return YI(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var Eg=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class ZI extends QI{constructor(e={[xt.MAINNET]:"https://tzkt.io",[xt.GHOSTNET]:"https://ghostnet.tzkt.io",[xt.MONDAYNET]:"https://mondaynet.tzkt.io",[xt.DAILYNET]:"https://dailynet.tzkt.io",[xt.DELPHINET]:"https://delphinet.tzkt.io",[xt.EDONET]:"https://edonet.tzkt.io",[xt.FLORENCENET]:"https://florencenet.tzkt.io",[xt.GRANADANET]:"https://granadanet.tzkt.io",[xt.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[xt.ITHACANET]:"https://ithacanet.tzkt.io",[xt.JAKARTANET]:"https://jakartanet.tzkt.io",[xt.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[xt.LIMANET]:"https://limanet.tzkt.io",[xt.MUMBAINET]:"https://mumbainet.tzkt.io",[xt.CUSTOM]:"https://mumbainet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,r){return Eg(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}getTransactionLink(e,r){return Eg(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}}var zc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ed=new Yr("DappPostMessageTransport");class eT extends bc{constructor(e,r,n){super(e,r,n,De.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return zc(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>zc(this,void 0,void 0,function*(){Ed.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=sn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return zc(this,void 0,void 0,function*(){Ed.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return zc(this,void 0,void 0,function*(){Ed.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Wc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const _d=new Yr("DappP2PTransport");class tT extends sI{constructor(e,r,n,i,s,o){super(e,r,n,i,De.TRANSPORT_P2P_PEERS_DAPP,s,o)}startOpenChannelListener(){return Wc(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>Wc(this,void 0,void 0,function*(){_d.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=sn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return Wc(this,void 0,void 0,function*(){_d.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return Wc(this,void 0,void 0,function*(){_d.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Te=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Pt=new Yr("DAppClient");class rT extends B9{constructor(e){var r,n,i,s,o;super(Object.assign({storage:e&&e.storage?e.storage:new V9},e)),this.events=new yg,this.openRequests=new Map,this._activeAccount=new Jt,this._activePeer=new Jt,this.blockchains=new Map,this.events=new yg(e.eventHandlers,(r=e.disableDefaultEvents)!==null&&r!==void 0?r:!1),this.blockExplorer=(n=e.blockExplorer)!==null&&n!==void 0?n:new ZI,this.preferredNetwork=(i=e.preferredNetwork)!==null&&i!==void 0?i:xt.MAINNET,vg((s=e.colorMode)!==null&&s!==void 0?s:kf.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=(o=e.errorMessages)!==null&&o!==void 0?o:{},this.appMetadataManager=new q9(this.storage),this.activeAccountLoaded=this.storage.get(De.ACTIVE_ACCOUNT).then(a=>Te(this,void 0,void 0,function*(){a?yield this.setActiveAccount(yield this.accountManager.getAccount(a)):yield this.setActiveAccount(void 0)})).catch(a=>Te(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(a)})),this.handleResponse=(a,c)=>Te(this,void 0,void 0,function*(){var l,f;const d=this.openRequests.get(a.id);if(Pt.log("handleResponse","Received message",a,c),a.version==="3"){const O=a;if(d&&O.message.type===He.Acknowledge)Pt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(ue.ACKNOWLEDGE_RECEIVED,{message:O.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d){const L=O.message.blockchainData.appMetadata;O.message.type===He.PermissionResponse&&L&&(yield this.appMetadataManager.addAppMetadata(L)),console.timeLog(O.id,"response"),console.timeEnd(O.id),O.message.type===He.Error?d.reject(O.message):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(O.id)}else if(O.message.type===He.Disconnect){const L=c.origin===wn.P2P?this.p2pTransport:(l=this.postMessageTransport)!==null&&l!==void 0?l:yield this.transport;if(L){const z=(yield L.getPeers()).find(q=>q.senderId===a.senderId);z?(yield L.removePeer(z),yield this.removeAccountsForPeers([z]),yield this.events.emit(ue.CHANNEL_CLOSED)):Pt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Pt.error("handleResponse","no request found for id ",a.id,a)}else{const O=a;if(d&&O.type===He.Acknowledge)Pt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(ue.ACKNOWLEDGE_RECEIVED,{message:O,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d)O.type===He.PermissionResponse&&O.appMetadata&&(yield this.appMetadataManager.addAppMetadata(O.appMetadata)),console.timeLog(O.id,"response"),console.timeEnd(O.id),O.type===He.Error||a.errorType?d.reject(O):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(O.id);else if(O.type===He.Disconnect||a.typedMessage.type===He.Disconnect){const L=c.origin===wn.P2P?this.p2pTransport:(f=this.postMessageTransport)!==null&&f!==void 0?f:yield this.transport;if(L){const z=(yield L.getPeers()).find(q=>q.senderId===a.senderId);z?(yield L.removePeer(z),yield this.removeAccountsForPeers([z]),yield this.events.emit(ue.CHANNEL_CLOSED)):Pt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Pt.error("handleResponse","no request found for id ",a.id,a)}})}initInternalTransports(){return Te(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new eT(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new tT(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const r=Object.create(null,{init:{get:()=>super.init}});return Te(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(n=>Te(this,void 0,void 0,function*(){if(e)yield this.addListener(e),n(yield r.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),n(yield r.init.call(this,yield this.transport));else{const i=yield this.getActiveAccount(),s=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),i&&i.origin){const o=i.origin.type;o===wn.EXTENSION?n(yield r.init.call(this,this.postMessageTransport)):o===wn.P2P&&n(yield r.init.call(this,this.p2pTransport))}else{const o=this.p2pTransport,a=this.postMessageTransport;a.listenForNewPeer(c=>{Pt.log("init","postmessage transport peer connected",c),this.events.emit(ue.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),s(),n(Ys.POST_MESSAGE)}).catch(console.error),o.listenForNewPeer(c=>{Pt.log("init","p2p transport peer connected",c),this.events.emit(ue.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),s(),n(Ys.P2P)}).catch(console.error),bc.getAvailableExtensions().then(()=>Te(this,void 0,void 0,function*(){this.events.emit(ue.PAIR_INIT,{p2pPeerInfo:()=>(o.connect().then().catch(console.error),o.getPairingRequestInfo()),postmessagePeerInfo:()=>a.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{console.log("ABORTED"),this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(c=>console.warn(c))})).catch(c=>{this._initPromise=void 0,console.error(c)})}}})),this._initPromise})}getActiveAccount(){return Te(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return Te(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=Jt.resolve(e):this._activeAccount.resolve(e),e){const r=e.origin.type;yield this.initInternalTransports(),r===wn.EXTENSION?yield this.setTransport(this.postMessageTransport):r===wn.P2P&&(yield this.setTransport(this.p2pTransport));const n=yield this.getPeer(e);yield this.setActivePeer(n)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(De.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(ue.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return Te(this,void 0,void 0,function*(){return vg(e)})}getColorMode(){return Te(this,void 0,void 0,function*(){return m0()})}getAppMetadata(){return Te(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return Te(this,void 0,void 0,function*(){const e=yield(()=>Te(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(ue.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return Te(this,void 0,void 0,function*(){yield this.events.emit(ue.HIDE_UI,e)})}removeAccount(e){const r=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return Te(this,void 0,void 0,function*(){const n=r.removeAccount.call(this,e),i=yield this.getActiveAccount();return i&&i.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),n})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return Te(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,r=!1){return Te(this,void 0,void 0,function*(){const n=yield this.transport,i=n.removePeer(e);return yield this.removeAccountsForPeers([e]),r&&(yield this.sendDisconnectToPeer(e,n)),i})}removeAllPeers(e=!1){return Te(this,void 0,void 0,function*(){const r=yield this.transport,n=yield r.getPeers(),i=r.removeAllPeers();if(yield this.removeAccountsForPeers(n),e){const s=n.map(o=>this.sendDisconnectToPeer(o,r));yield Promise.all(s)}return i})}subscribeToEvent(e,r){return Te(this,void 0,void 0,function*(){yield this.events.on(e,r)})}checkPermissions(e){return Te(this,void 0,void 0,function*(){if(e===He.PermissionRequest)return!0;const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account set!");const n=r.scopes;switch(e){case He.OperationRequest:return n.includes(_n.OPERATION_REQUEST);case He.SignPayloadRequest:return n.includes(_n.SIGN);case He.BroadcastRequest:return!0;default:return!1}})}sendNotification(e,r,n,i){var s,o,a;return Te(this,void 0,void 0,function*(){const c=yield this.getActiveAccount();if(!c||c&&!c.scopes.includes(_n.NOTIFICATION)&&!c.notification)throw new Error("notification permissions not given");if(!(!((s=c.notification)===null||s===void 0)&&s.token))throw new Error("No AccessToken");const l=(o=c.notification)===null||o===void 0?void 0:o.apiUrl;if(!l)throw new Error("No Push URL set");return this.sendNotificationWithAccessToken({url:l,recipient:c.address,title:e,body:r,payload:n,protocolIdentifier:i,accessToken:(a=c.notification)===null||a===void 0?void 0:a.token})})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(r=>{yI(r.desktopList),EI(r.extensionList),_I(r.webList),wI(r.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return Te(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const n=Object.assign(Object.assign({},e),{type:He.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",n);const{message:i,connectionInfo:s}=yield this.makeRequestV3(n).catch(c=>Te(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",i,s);const o=yield r.getAccountInfosFromPermissionResponse(i.message),a={accountIdentifier:o[0].accountId,senderId:i.senderId,origin:{type:s.origin,id:s.id},address:o[0].address,publicKey:o[0].publicKey,scopes:i.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:i.message.blockchainData};return yield this.accountManager.addAccount(a),yield this.setActiveAccount(a),yield r.handleResponse({request:n,account:a,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(n,{account:a,output:{address:o[0].address,network:{type:xt.MAINNET},scopes:[_n.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i.message})}request(e){return Te(this,void 0,void 0,function*(){console.log("REQUEST",e);const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${r}" not supported by dAppClient`);yield r.validateRequest(e);const n=yield this.getActiveAccount();if(!n)throw yield this.sendInternalError("No active account!");const i=Object.assign(Object.assign({},e),{type:He.BlockchainRequest,accountId:n.accountIdentifier}),{message:s,connectionInfo:o}=yield this.makeRequestV3(i).catch(a=>Te(this,void 0,void 0,function*(){throw console.error(a),new Error("TODO")}));return yield r.handleResponse({request:i,account:n,output:s,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),s.message})}requestPermissions(e){return Te(this,void 0,void 0,function*(){const r={appMetadata:yield this.getOwnAppMetadata(),type:He.PermissionRequest,network:e&&e.network?e.network:{type:xt.MAINNET},scopes:e&&e.scopes?e.scopes:[_n.OPERATION_REQUEST,_n.SIGN]},{message:n,connectionInfo:i}=yield this.makeRequest(r).catch(l=>Te(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,l)})),s=n.publicKey||n.pubkey||n.pubKey,o=yield E9(s),a={accountIdentifier:yield Zd(o,n.network),senderId:n.senderId,origin:{type:i.origin,id:i.id},address:o,publicKey:s,network:n.network,scopes:n.scopes,threshold:n.threshold,notification:n.notification,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(a),yield this.setActiveAccount(a);const c=Object.assign(Object.assign({},n),{address:o,accountInfo:a});return yield this.notifySuccess(r,{account:a,output:c,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),c})}requestSignPayload(e){return Te(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n=e.payload;if(typeof n!="string")throw new Error("Payload must be a string");const i=(()=>{switch(e.signingType){case es.OPERATION:if(!n.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return es.OPERATION;case es.MICHELINE:if(!n.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return es.MICHELINE;case es.RAW:default:return es.RAW}})(),s={type:He.SignPayloadRequest,signingType:i,payload:n,sourceAddress:e.sourceAddress||r.address},{message:o,connectionInfo:a}=yield this.makeRequest(s).catch(c=>Te(this,void 0,void 0,function*(){throw yield this.handleRequestError(s,c)}));return yield this.notifySuccess(s,{account:r,output:o,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}requestOperation(e){return Te(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n={type:He.OperationRequest,network:r.network||{type:xt.MAINNET},operationDetails:e.operationDetails,sourceAddress:r.address||""},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Te(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{account:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}requestBroadcast(e){return Te(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const r=e.network||{type:xt.MAINNET},n={type:He.BroadcastRequest,network:r,signedTransaction:e.signedTransaction},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Te(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{network:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}setActivePeer(e){return Te(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=Jt.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const r=Object.create(null,{setTransport:{get:()=>super.setTransport}});return Te(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const n=r.setTransport.call(this,e);return yield this.events.emit(ue.ACTIVE_TRANSPORT_SET,e),n})}sendInternalError(e){return Te(this,void 0,void 0,function*(){throw yield this.events.emit(ue.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return Te(this,void 0,void 0,function*(){const r=yield this.accountManager.getAccounts(),n=e.map(a=>a.senderId),s=r.filter(a=>n.includes(a.senderId)).map(a=>a.accountIdentifier);yield this.accountManager.removeAccounts(s);const o=yield this.getActiveAccount();o&&s.includes(o.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,r){return Te(this,void 0,void 0,function*(){if(Pt.error("handleRequestError","error response",r),r.errorType){const n=[];if(r.errorType===ht.NO_PRIVATE_KEY_FOUND_ERROR){const o=()=>Te(this,void 0,void 0,function*(){const a=e;let c;if(a.sourceAddress&&a.network){const l=yield Zd(a.sourceAddress,a.network);c=yield this.getAccount(l),c&&(yield this.removeAccount(c.accountIdentifier))}});n.push({text:"Remove account",actionCallback:o})}const i=yield this.getPeer(),s=yield this.getActiveAccount();throw e.type===He.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit($c[e.type].error,{errorResponse:r,walletInfo:yield this.getWalletInfo(i,s),errorMessages:this.errorMessages},n).catch(o=>Pt.error("handleRequestError",o)),Qr.getError(r.errorType,r.errorData)}throw r})}notifySuccess(e,r){return Te(this,void 0,void 0,function*(){this.events.emit($c[e.type].success,r).catch(n=>console.warn(n))})}getWalletInfo(e,r){var n,i;return Te(this,void 0,void 0,function*(){const s=r||(yield this.getActiveAccount()),o=e||(yield this.getPeer(s));let a;s&&(a=yield this.appMetadataManager.getAppMetadata(s.senderId));const c=o;a||(a={name:c.name,icon:c.icon});const l=(O,L)=>O&&L?O.toLowerCase()===L.toLowerCase():!1;let f,d;if(Da().find(O=>l(O.name,a==null?void 0:a.name))?(f=Da().find(O=>l(O.name,a==null?void 0:a.name)),d="mobile"):ih().find(O=>l(O.name,a==null?void 0:a.name))?(f=ih().find(O=>l(O.name,a==null?void 0:a.name)),d="web"):Gf().find(O=>l(O.name,a==null?void 0:a.name))?(f=Gf().find(O=>l(O.name,a==null?void 0:a.name)),d="desktop"):ka().find(O=>l(O.name,a==null?void 0:a.name))&&(f=ka().find(O=>l(O.name,a==null?void 0:a.name)),d="extension"),f){let O;return f.hasOwnProperty("links")?O=f.links[(n=s==null?void 0:s.network.type)!==null&&n!==void 0?n:this.preferredNetwork]:f.hasOwnProperty("deepLink")&&(O=f.deepLink),{name:a.name,icon:(i=a.icon)!==null&&i!==void 0?i:f.logo,deeplink:O,type:d}}return a})}getPeer(e){var r,n,i,s;return Te(this,void 0,void 0,function*(){let o;if(e){Pt.log("getPeer","We have an account",e);const a=(n=yield(r=this.postMessageTransport)===null||r===void 0?void 0:r.getPeers())!==null&&n!==void 0?n:[],c=(s=yield(i=this.p2pTransport)===null||i===void 0?void 0:i.getPeers())!==null&&s!==void 0?s:[],l=[...a,...c];Pt.log("getPeer","Found peers",l,e),o=l.find(f=>f.senderId===e.senderId),o||(o=l.find(f=>f.extensionId===e.origin.id))}else o=yield this._activePeer.promise,Pt.log("getPeer","Active peer",o);if(!o)throw new Error("No matching peer found.");return o})}makeRequest(e){var r;return Te(this,void 0,void 0,function*(){const n=yield Vi();if(console.time(n),Pt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Pt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(ue.LOCAL_RATE_LIMIT_REACHED).catch(f=>console.warn(f)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(ue.NO_PERMISSIONS).catch(f=>console.warn(f)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i=Object.assign({id:n,version:"2",senderId:yield Xo(yield this.beaconId)},e),s=new Jt;this.addOpenRequest(i.id,s);const o=yield new Qs().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Pt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(f){throw this.events.emit(ue.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Te(this,void 0,void 0,function*(){yield _r(),this.disconnect()})}]}),console.timeLog(n,"send error"),f}return console.timeLog(n,"sent"),this.events.emit($c[e.type].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Te(this,void 0,void 0,function*(){this.disconnect()})}}).catch(f=>console.warn(f)),s.promise})}makeRequestV3(e){var r;return Te(this,void 0,void 0,function*(){const n=yield Vi();if(console.time(n),Pt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Pt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(ue.LOCAL_RATE_LIMIT_REACHED).catch(d=>console.warn(d)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i={id:n,version:"3",senderId:yield Xo(yield this.beaconId),message:e},s=new Jt;this.addOpenRequest(i.id,s);const o=yield new Qs().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Pt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(d){throw this.events.emit(ue.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Te(this,void 0,void 0,function*(){yield _r(),this.disconnect()})}]}),console.timeLog(n,"send error"),d}console.timeLog(n,"sent");const f=e.type;return this.events.emit($c[f].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Te(this,void 0,void 0,function*(){this.disconnect()})}}).catch(d=>console.warn(d)),s.promise})}disconnect(){return Te(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,r){Pt.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,r)}sendNotificationWithAccessToken(e){return Te(this,void 0,void 0,function*(){const{url:r,recipient:n,title:i,body:s,payload:o,protocolIdentifier:a,accessToken:c}=e,l=new Date().toISOString(),f=yield this.keyPair,d=f.publicKey,O=ge.Buffer.from(new Uint8Array([13,15,37,217])),L=zr.encode(ge.Buffer.concat([O,ge.Buffer.from(d)])),D=["Tezos Signed Message: ",n,i,s,l,o].join(" "),z=Gi(D),q="0501"+z.length.toString(16).padStart(8,"0")+z,V=yield A9(q,{secretKey:ge.Buffer.from(f.secretKey)});return(yield Kf.post(`${r}/send`,{recipient:n,title:i,body:s,timestamp:l,payload:o,accessToken:c,protocolIdentifier:a,sender:{name:this.name,publicKey:L,signature:V}})).data})}}let Zi;const nT=(t,e)=>(Zi&&e&&(Zi.disconnect(),Zi=void 0),Zi||(Zi||(Zi=new rT(t)),Zi));function vi(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}class _g extends Error{constructor(){super("You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"),this.name="BeaconWalletNotInitialized"}}class iT extends Error{constructor(e){super(`Required permissions scopes were not granted: ${e.join(",")}`),this.requiredScopes=e,this.name="MissingRequiredScopes"}}class sT{constructor(e){this.client=nT(e)}validateRequiredScopesOrFail(e,r){const n=new Set(r);for(const i of e)n.has(i)&&n.delete(i);if(n.size>0)throw new iT(Array.from(n))}requestPermissions(e){return vi(this,void 0,void 0,function*(){yield this.client.requestPermissions(e)})}getPKH(){return vi(this,void 0,void 0,function*(){const e=yield this.client.getActiveAccount();if(!e)throw new _g;return e.address})}mapTransferParamsToWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Vo(this.formatParameters(r)))})}mapIncreasePaidStorageWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield $o(this.formatParameters(r)))})}mapOriginateParamsToWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Go(this.formatParameters(r)))})}mapDelegateParamsToWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield qo(this.formatParameters(r)))})}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,r){return e.fee||delete r.fee,e.storageLimit||delete r.storage_limit,e.gasLimit||delete r.gas_limit,r}sendOperations(e){return vi(this,void 0,void 0,function*(){const r=yield this.client.getActiveAccount();if(!r)throw new _g;const n=r.scopes;this.validateRequiredScopesOrFail(n,[_n.OPERATION_REQUEST]);const{transactionHash:i}=yield this.client.requestOperation({operationDetails:e});return i})}disconnect(){return vi(this,void 0,void 0,function*(){yield this.client.destroy()})}clearActiveAccount(){return vi(this,void 0,void 0,function*(){yield this.client.setActiveAccount()})}}function wg(t){let e,r,n,i;return{c(){e=Sr("img"),Yt(e,"id","image"),Yt(e,"alt","visiblr portrait"),x0(e.src,r=t[3])||Yt(e,"src",r),Yt(e,"class","svelte-cdspit")},m(s,o){Wt(s,e,o),i=!0},p(s,o){(!i||o&8&&!x0(e.src,r=s[3]))&&Yt(e,"src",r)},i(s){i||(hs(()=>{i&&(n||(n=ps(e,gs,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=ps(e,gs,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&Mt(e),s&&n&&n.end()}}}function Ag(t){let e,r,n,i;return{c(){e=Sr("p"),r=Mi(t[0]),Yt(e,"class","textcenter svelte-cdspit")},m(s,o){Wt(s,e,o),An(e,r),i=!0},p(s,o){(!i||o&1)&&Ha(r,s[0])},i(s){i||(hs(()=>{i&&(n||(n=ps(e,gs,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=ps(e,gs,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&Mt(e),s&&n&&n.end()}}}function xg(t){let e,r,n,i,s;return{c(){e=Sr("p"),r=Sr("a"),n=Mi(t[1]),Yt(r,"href",t[1]),Yt(r,"target","_blank"),Yt(e,"class","textcenter svelte-cdspit")},m(o,a){Wt(o,e,a),An(e,r),An(r,n),s=!0},p(o,a){(!s||a&2)&&Ha(n,o[1]),(!s||a&2)&&Yt(r,"href",o[1])},i(o){s||(hs(()=>{s&&(i||(i=ps(e,gs,{delay:6e3,duration:2e3},!0)),i.run(1))}),s=!0)},o(o){i||(i=ps(e,gs,{delay:6e3,duration:2e3},!1)),i.run(0),s=!1},d(o){o&&Mt(e),o&&i&&i.end()}}}function Sg(t){let e,r,n,i,s,o;return{c(){e=Sr("p"),r=Mi("Visit the complete Visiblr collection: "),n=Sr("a"),i=Mi(t[2]),Yt(n,"href",t[2]),Yt(n,"target","_blank"),Yt(e,"class","textcenter svelte-cdspit")},m(a,c){Wt(a,e,c),An(e,r),An(e,n),An(n,i),o=!0},p(a,c){(!o||c&4)&&Ha(i,a[2]),(!o||c&4)&&Yt(n,"href",a[2])},i(a){o||(hs(()=>{o&&(s||(s=ps(e,gs,{delay:8e3,duration:2e3},!0)),s.run(1))}),o=!0)},o(a){s||(s=ps(e,gs,{delay:8e3,duration:2e3},!1)),s.run(0),o=!1},d(a){a&&Mt(e),a&&s&&s.end()}}}function oT(t){let e,r=t[4]?"Disconnect":"Connect Wallet",n,i,s,o,a,c,l,f,d,O,L,D=t[4]?t[6]?"Congratulations! Don't forget to disconnect your wallet before you leave":t[5]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.",z,q,V,U,W,F,j,G,E,y,T,x,_=t[6]&&wg(t),u=t[6]&&Ag(t),p=t[6]&&xg(t),b=t[6]&&Sg(t);return{c(){e=Sr("button"),n=Mi(r),i=Ps(),s=Sr("button"),o=Mi("Check If Your Visiblr Portrait is Ready"),c=Ps(),l=Sr("button"),f=Mi("Reveal Your Visiblr Portrait"),O=Ps(),L=Sr("p"),z=Mi(D),q=Ps(),V=Sr("div"),_&&_.c(),U=Ps(),W=Sr("div"),u&&u.c(),F=Ps(),j=Sr("div"),p&&p.c(),G=Ps(),E=Sr("div"),b&&b.c(),s.disabled=a=!t[4],l.disabled=d=!(t[5]&&t[4]),Yt(V,"class","imagecenter svelte-cdspit"),Yt(V,"id","imageframe"),Yt(W,"id","titleframe"),Yt(j,"id","linkframe"),Yt(E,"id","collectionframe")},m(g,h){Wt(g,e,h),An(e,n),Wt(g,i,h),Wt(g,s,h),An(s,o),Wt(g,c,h),Wt(g,l,h),An(l,f),Wt(g,O,h),Wt(g,L,h),An(L,z),Wt(g,q,h),Wt(g,V,h),_&&_.m(V,null),Wt(g,U,h),Wt(g,W,h),u&&u.m(W,null),Wt(g,F,h),Wt(g,j,h),p&&p.m(j,null),Wt(g,G,h),Wt(g,E,h),b&&b.m(E,null),y=!0,T||(x=[Zu(e,"click",function(){qf(t[4]?t[9]:t[8])&&(t[4]?t[9]:t[8]).apply(this,arguments)}),Zu(s,"click",t[7]),Zu(l,"click",t[10])],T=!0)},p(g,[h]){t=g,(!y||h&16)&&r!==(r=t[4]?"Disconnect":"Connect Wallet")&&Ha(n,r),(!y||h&16&&a!==(a=!t[4]))&&(s.disabled=a),(!y||h&48&&d!==(d=!(t[5]&&t[4])))&&(l.disabled=d),(!y||h&112)&&D!==(D=t[4]?t[6]?"Congratulations! Don't forget to disconnect your wallet before you leave":t[5]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.")&&Ha(z,D),t[6]?_?(_.p(t,h),h&64&&Kr(_,1)):(_=wg(t),_.c(),Kr(_,1),_.m(V,null)):_&&(yc(),qi(_,1,1,()=>{_=null}),Ec()),t[6]?u?(u.p(t,h),h&64&&Kr(u,1)):(u=Ag(t),u.c(),Kr(u,1),u.m(W,null)):u&&(yc(),qi(u,1,1,()=>{u=null}),Ec()),t[6]?p?(p.p(t,h),h&64&&Kr(p,1)):(p=xg(t),p.c(),Kr(p,1),p.m(j,null)):p&&(yc(),qi(p,1,1,()=>{p=null}),Ec()),t[6]?b?(b.p(t,h),h&64&&Kr(b,1)):(b=Sg(t),b.c(),Kr(b,1),b.m(E,null)):b&&(yc(),qi(b,1,1,()=>{b=null}),Ec())},i(g){y||(Kr(_),Kr(u),Kr(p),Kr(b),y=!0)},o(g){qi(_),qi(u),qi(p),qi(b),y=!1},d(g){g&&Mt(e),g&&Mt(i),g&&Mt(s),g&&Mt(c),g&&Mt(l),g&&Mt(O),g&&Mt(L),g&&Mt(q),g&&Mt(V),_&&_.d(),g&&Mt(U),g&&Mt(W),u&&u.d(),g&&Mt(F),g&&Mt(j),p&&p.d(),g&&Mt(G),g&&Mt(E),b&&b.d(),T=!1,Zs(x)}}}const _0="KT1MNbfFFqNqDXXdNJ3aUoiiHWazueLArVWB",aT="https://ipfs.io/ipfs/",cT="https://objkt.com/asset/",fT="https://objkt.com/collection/",uT="https://data.objkt.com/v3/graphql",lT="https://mainnet.api.tez.ie";function dT(t){const r=t.token_holder[0].token.display_uri.replace(/^ipfs?\:\/\//i,"");return`${aT}${r}`}function hT(t){const e=t.token_holder[0].token.token_id;return`${cT}${_0}/${e}`}function pT(t){return`${fT}${_0}`}function gT(t){return t.token_holder[0].token.name}async function bT(t){const{errors:e,data:r}=await vT(t,"MyQuery",{});return e?(console.error(e),e):(console.log(r),r)}async function vT(t,e,r){return await(await fetch(uT,{method:"POST",body:JSON.stringify({query:t,variables:r,operationName:e})})).json()}async function mT(t){return await t.getPKH()}function yT(t){return t==null||t.token_holder==null||t.token_holder.length==null||t.errors||t.token_holder.length===0?(console.log("Warning: no token detected"),!1):!0}function ET(t){return t.token_holder.length!=1?(console.log("Warning: multiple tokens detected"),!1):!0}function _T(t,e,r){const n=new e9(lT);let i,s="",o="",a="",c="",l,f=!1,d=!1,O=!1;F2(async()=>{const U={name:"Your Visiblr Portrait Reveal"};i=new sT(U)});async function L(){const U=await mT(i),W=await D(U,_0,1);r(5,d=yT(W)&&ET(W))}async function D(U,W,F=1){const j=`
      query MyQuery {
        token_holder(
          where: {_and: {holder_address: {_eq: "${U}"}, token: {fa_contract: {_eq: "${W}"}}, quantity: {_eq: "${F}"}}}
        ) {
          quantity
          token {
            fa_contract
            token_id
            thumbnail_uri
            artifact_uri
            display_uri
            name
          }
        }
      }
    `;return l=l=await bT(j),l}async function z(){await i.requestPermissions(),n.setWalletProvider(i),r(4,f=!0)}async function q(){await i.client.clearActiveAccount(),r(4,f=!1)}async function V(){r(0,s=gT(l)),r(1,o=hT(l)),r(2,a=pT());const U=dT(l);fetch(U).then(W=>{if(!W.ok)throw new Error(`HTTP error! Status: ${W.status}`);return W.blob()}).then(W=>{r(3,c=URL.createObjectURL(W))}),r(6,O=!0)}return[s,o,a,c,f,d,O,L,z,q,V]}class wT extends Q2{constructor(e){super(),Y2(this,e,_T,oT,T2,{})}}new wT({target:document.getElementById("app")});export{Dg as a,Ly as b,W0 as c,Iy as s,Br as u};
