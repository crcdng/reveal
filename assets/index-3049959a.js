function Oy(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof{}<"u"?{}:typeof self<"u"?self:{};function cb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ty(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Ui={},su={};su.byteLength=My;su.toByteArray=Cy;su.fromByteArray=Dy;var Xn=[],tn=[],Py=typeof Uint8Array<"u"?Uint8Array:Array,yl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ao=0,Ny=yl.length;ao<Ny;++ao)Xn[ao]=yl[ao],tn[yl.charCodeAt(ao)]=ao;tn["-".charCodeAt(0)]=62;tn["_".charCodeAt(0)]=63;function fb(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function My(t){var e=fb(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Ly(t,e,r){return(e+r)*3/4-r}function Cy(t){var e,r=fb(t),n=r[0],i=r[1],s=new Py(Ly(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=tn[t.charCodeAt(c)]<<18|tn[t.charCodeAt(c+1)]<<12|tn[t.charCodeAt(c+2)]<<6|tn[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=tn[t.charCodeAt(c)]<<2|tn[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=tn[t.charCodeAt(c)]<<10|tn[t.charCodeAt(c+1)]<<4|tn[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function By(t){return Xn[t>>18&63]+Xn[t>>12&63]+Xn[t>>6&63]+Xn[t&63]}function ky(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(By(n));return i.join("")}function Dy(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(ky(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Xn[e>>2]+Xn[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Xn[e>>10]+Xn[e>>4&63]+Xn[e<<2&63]+"=")),i.join("")}var kh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */kh.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,f=-7,d=r?i-1:0,I=r?-1:1,P=t[e+d];for(d+=I,s=P&(1<<-f)-1,P>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=I,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+d],d+=I,f-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(P?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(P?-1:1)*o*Math.pow(2,s-n)};kh.write=function(t,e,r,n,i,s){var o,a,c,l=s*8-i-1,f=(1<<l)-1,d=f>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=n?0:s-1,L=n?1:-1,H=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=I/c:e+=I*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[r+P]=a&255,P+=L,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[r+P]=o&255,P+=L,o/=256,l-=8);t[r+P-L]|=H*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=su,r=kh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const M=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(M,A),M.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(M){if(M>i)throw new RangeError('The value "'+M+'" is invalid for option "size"');const A=new Uint8Array(M);return Object.setPrototypeOf(A,a.prototype),A}function a(M,A,R){if(typeof M=="number"){if(typeof A=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(M)}return c(M,A,R)}a.poolSize=8192;function c(M,A,R){if(typeof M=="string")return I(M,A);if(ArrayBuffer.isView(M))return L(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(ge(M,ArrayBuffer)||M&&ge(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(M,SharedArrayBuffer)||M&&ge(M.buffer,SharedArrayBuffer)))return H(M,A,R);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=M.valueOf&&M.valueOf();if(D!=null&&D!==M)return a.from(D,A,R);const $=G(M);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return a.from(M[Symbol.toPrimitive]("string"),A,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}a.from=function(M,A,R){return c(M,A,R)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function f(M,A,R){return l(M),M<=0?o(M):A!==void 0?typeof R=="string"?o(M).fill(A,R):o(M).fill(A):o(M)}a.alloc=function(M,A,R){return f(M,A,R)};function d(M){return l(M),o(M<0?0:V(M)|0)}a.allocUnsafe=function(M){return d(M)},a.allocUnsafeSlow=function(M){return d(M)};function I(M,A){if((typeof A!="string"||A==="")&&(A="utf8"),!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const R=q(M,A)|0;let D=o(R);const $=D.write(M,A);return $!==R&&(D=D.slice(0,$)),D}function P(M){const A=M.length<0?0:V(M.length)|0,R=o(A);for(let D=0;D<A;D+=1)R[D]=M[D]&255;return R}function L(M){if(ge(M,Uint8Array)){const A=new Uint8Array(M);return H(A.buffer,A.byteOffset,A.byteLength)}return P(M)}function H(M,A,R){if(A<0||M.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<A+(R||0))throw new RangeError('"length" is outside of buffer bounds');let D;return A===void 0&&R===void 0?D=new Uint8Array(M):R===void 0?D=new Uint8Array(M,A):D=new Uint8Array(M,A,R),Object.setPrototypeOf(D,a.prototype),D}function G(M){if(a.isBuffer(M)){const A=V(M.length)|0,R=o(A);return R.length===0||M.copy(R,0,0,A),R}if(M.length!==void 0)return typeof M.length!="number"||Te(M.length)?o(0):P(M);if(M.type==="Buffer"&&Array.isArray(M.data))return P(M.data)}function V(M){if(M>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return M|0}function C(M){return+M!=M&&(M=0),a.alloc(+M)}a.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==a.prototype},a.compare=function(A,R){if(ge(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),ge(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(A)||!a.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===R)return 0;let D=A.length,$=R.length;for(let Q=0,te=Math.min(D,$);Q<te;++Q)if(A[Q]!==R[Q]){D=A[Q],$=R[Q];break}return D<$?-1:$<D?1:0},a.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(A,R){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return a.alloc(0);let D;if(R===void 0)for(R=0,D=0;D<A.length;++D)R+=A[D].length;const $=a.allocUnsafe(R);let Q=0;for(D=0;D<A.length;++D){let te=A[D];if(ge(te,Uint8Array))Q+te.length>$.length?(a.isBuffer(te)||(te=a.from(te)),te.copy($,Q)):Uint8Array.prototype.set.call($,te,Q);else if(a.isBuffer(te))te.copy($,Q);else throw new TypeError('"list" argument must be an Array of Buffers');Q+=te.length}return $};function q(M,A){if(a.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||ge(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const R=M.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&R===0)return 0;let $=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return ye(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return xe(M).length;default:if($)return D?-1:ye(M).length;A=(""+A).toLowerCase(),$=!0}}a.byteLength=q;function U(M,A,R){let D=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,A>>>=0,R<=A))return"";for(M||(M="utf8");;)switch(M){case"hex":return _(this,A,R);case"utf8":case"utf-8":return g(this,A,R);case"ascii":return S(this,A,R);case"latin1":case"binary":return O(this,A,R);case"base64":return h(this,A,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,A,R);default:if(D)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),D=!0}}a.prototype._isBuffer=!0;function K(M,A,R){const D=M[A];M[A]=M[R],M[R]=D}a.prototype.swap16=function(){const A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<A;R+=2)K(this,R,R+1);return this},a.prototype.swap32=function(){const A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<A;R+=4)K(this,R,R+3),K(this,R+1,R+2);return this},a.prototype.swap64=function(){const A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<A;R+=8)K(this,R,R+7),K(this,R+1,R+6),K(this,R+2,R+5),K(this,R+3,R+4);return this},a.prototype.toString=function(){const A=this.length;return A===0?"":arguments.length===0?g(this,0,A):U.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(A){if(!a.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:a.compare(this,A)===0},a.prototype.inspect=function(){let A="";const R=t.INSPECT_MAX_BYTES;return A=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(A+=" ... "),"<Buffer "+A+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(A,R,D,$,Q){if(ge(A,Uint8Array)&&(A=a.from(A,A.offset,A.byteLength)),!a.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(R===void 0&&(R=0),D===void 0&&(D=A?A.length:0),$===void 0&&($=0),Q===void 0&&(Q=this.length),R<0||D>A.length||$<0||Q>this.length)throw new RangeError("out of range index");if($>=Q&&R>=D)return 0;if($>=Q)return-1;if(R>=D)return 1;if(R>>>=0,D>>>=0,$>>>=0,Q>>>=0,this===A)return 0;let te=Q-$,le=D-R;const Ae=Math.min(te,le),we=this.slice($,Q),Se=A.slice(R,D);for(let Fe=0;Fe<Ae;++Fe)if(we[Fe]!==Se[Fe]){te=we[Fe],le=Se[Fe];break}return te<le?-1:le<te?1:0};function j(M,A,R,D,$){if(M.length===0)return-1;if(typeof R=="string"?(D=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Te(R)&&(R=$?0:M.length-1),R<0&&(R=M.length+R),R>=M.length){if($)return-1;R=M.length-1}else if(R<0)if($)R=0;else return-1;if(typeof A=="string"&&(A=a.from(A,D)),a.isBuffer(A))return A.length===0?-1:y(M,A,R,D,$);if(typeof A=="number")return A=A&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(M,A,R):Uint8Array.prototype.lastIndexOf.call(M,A,R):y(M,[A],R,D,$);throw new TypeError("val must be string, number or Buffer")}function y(M,A,R,D,$){let Q=1,te=M.length,le=A.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(M.length<2||A.length<2)return-1;Q=2,te/=2,le/=2,R/=2}function Ae(Se,Fe){return Q===1?Se[Fe]:Se.readUInt16BE(Fe*Q)}let we;if($){let Se=-1;for(we=R;we<te;we++)if(Ae(M,we)===Ae(A,Se===-1?0:we-Se)){if(Se===-1&&(Se=we),we-Se+1===le)return Se*Q}else Se!==-1&&(we-=we-Se),Se=-1}else for(R+le>te&&(R=te-le),we=R;we>=0;we--){let Se=!0;for(let Fe=0;Fe<le;Fe++)if(Ae(M,we+Fe)!==Ae(A,Fe)){Se=!1;break}if(Se)return we}return-1}a.prototype.includes=function(A,R,D){return this.indexOf(A,R,D)!==-1},a.prototype.indexOf=function(A,R,D){return j(this,A,R,D,!0)},a.prototype.lastIndexOf=function(A,R,D){return j(this,A,R,D,!1)};function w(M,A,R,D){R=Number(R)||0;const $=M.length-R;D?(D=Number(D),D>$&&(D=$)):D=$;const Q=A.length;D>Q/2&&(D=Q/2);let te;for(te=0;te<D;++te){const le=parseInt(A.substr(te*2,2),16);if(Te(le))return te;M[R+te]=le}return te}function T(M,A,R,D){return me(ye(A,M.length-R),M,R,D)}function x(M,A,R,D){return me(ue(A),M,R,D)}function E(M,A,R,D){return me(xe(A),M,R,D)}function u(M,A,R,D){return me(Ee(A,M.length-R),M,R,D)}a.prototype.write=function(A,R,D,$){if(R===void 0)$="utf8",D=this.length,R=0;else if(D===void 0&&typeof R=="string")$=R,D=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(D)?(D=D>>>0,$===void 0&&($="utf8")):($=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Q=this.length-R;if((D===void 0||D>Q)&&(D=Q),A.length>0&&(D<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let te=!1;for(;;)switch($){case"hex":return w(this,A,R,D);case"utf8":case"utf-8":return T(this,A,R,D);case"ascii":case"latin1":case"binary":return x(this,A,R,D);case"base64":return E(this,A,R,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,A,R,D);default:if(te)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function h(M,A,R){return A===0&&R===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(A,R))}function g(M,A,R){R=Math.min(M.length,R);const D=[];let $=A;for(;$<R;){const Q=M[$];let te=null,le=Q>239?4:Q>223?3:Q>191?2:1;if($+le<=R){let Ae,we,Se,Fe;switch(le){case 1:Q<128&&(te=Q);break;case 2:Ae=M[$+1],(Ae&192)===128&&(Fe=(Q&31)<<6|Ae&63,Fe>127&&(te=Fe));break;case 3:Ae=M[$+1],we=M[$+2],(Ae&192)===128&&(we&192)===128&&(Fe=(Q&15)<<12|(Ae&63)<<6|we&63,Fe>2047&&(Fe<55296||Fe>57343)&&(te=Fe));break;case 4:Ae=M[$+1],we=M[$+2],Se=M[$+3],(Ae&192)===128&&(we&192)===128&&(Se&192)===128&&(Fe=(Q&15)<<18|(Ae&63)<<12|(we&63)<<6|Se&63,Fe>65535&&Fe<1114112&&(te=Fe))}}te===null?(te=65533,le=1):te>65535&&(te-=65536,D.push(te>>>10&1023|55296),te=56320|te&1023),D.push(te),$+=le}return p(D)}const b=4096;function p(M){const A=M.length;if(A<=b)return String.fromCharCode.apply(String,M);let R="",D=0;for(;D<A;)R+=String.fromCharCode.apply(String,M.slice(D,D+=b));return R}function S(M,A,R){let D="";R=Math.min(M.length,R);for(let $=A;$<R;++$)D+=String.fromCharCode(M[$]&127);return D}function O(M,A,R){let D="";R=Math.min(M.length,R);for(let $=A;$<R;++$)D+=String.fromCharCode(M[$]);return D}function _(M,A,R){const D=M.length;(!A||A<0)&&(A=0),(!R||R<0||R>D)&&(R=D);let $="";for(let Q=A;Q<R;++Q)$+=ve[M[Q]];return $}function v(M,A,R){const D=M.slice(A,R);let $="";for(let Q=0;Q<D.length-1;Q+=2)$+=String.fromCharCode(D[Q]+D[Q+1]*256);return $}a.prototype.slice=function(A,R){const D=this.length;A=~~A,R=R===void 0?D:~~R,A<0?(A+=D,A<0&&(A=0)):A>D&&(A=D),R<0?(R+=D,R<0&&(R=0)):R>D&&(R=D),R<A&&(R=A);const $=this.subarray(A,R);return Object.setPrototypeOf($,a.prototype),$};function N(M,A,R){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+A>R)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A],Q=1,te=0;for(;++te<R&&(Q*=256);)$+=this[A+te]*Q;return $},a.prototype.readUintBE=a.prototype.readUIntBE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A+--R],Q=1;for(;R>0&&(Q*=256);)$+=this[A+--R]*Q;return $},a.prototype.readUint8=a.prototype.readUInt8=function(A,R){return A=A>>>0,R||N(A,1,this.length),this[A]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(A,R){return A=A>>>0,R||N(A,2,this.length),this[A]|this[A+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(A,R){return A=A>>>0,R||N(A,2,this.length),this[A]<<8|this[A+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(A,R){return A=A>>>0,R||N(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},a.prototype.readBigUInt64LE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24,Q=this[++A]+this[++A]*2**8+this[++A]*2**16+D*2**24;return BigInt($)+(BigInt(Q)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=R*2**24+this[++A]*2**16+this[++A]*2**8+this[++A],Q=this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D;return(BigInt($)<<BigInt(32))+BigInt(Q)}),a.prototype.readIntLE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=this[A],Q=1,te=0;for(;++te<R&&(Q*=256);)$+=this[A+te]*Q;return Q*=128,$>=Q&&($-=Math.pow(2,8*R)),$},a.prototype.readIntBE=function(A,R,D){A=A>>>0,R=R>>>0,D||N(A,R,this.length);let $=R,Q=1,te=this[A+--$];for(;$>0&&(Q*=256);)te+=this[A+--$]*Q;return Q*=128,te>=Q&&(te-=Math.pow(2,8*R)),te},a.prototype.readInt8=function(A,R){return A=A>>>0,R||N(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},a.prototype.readInt16LE=function(A,R){A=A>>>0,R||N(A,2,this.length);const D=this[A]|this[A+1]<<8;return D&32768?D|4294901760:D},a.prototype.readInt16BE=function(A,R){A=A>>>0,R||N(A,2,this.length);const D=this[A+1]|this[A]<<8;return D&32768?D|4294901760:D},a.prototype.readInt32LE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},a.prototype.readInt32BE=function(A,R){return A=A>>>0,R||N(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},a.prototype.readBigInt64LE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=this[A+4]+this[A+5]*2**8+this[A+6]*2**16+(D<<24);return(BigInt($)<<BigInt(32))+BigInt(R+this[++A]*2**8+this[++A]*2**16+this[++A]*2**24)}),a.prototype.readBigInt64BE=he(function(A){A=A>>>0,Z(A,"offset");const R=this[A],D=this[A+7];(R===void 0||D===void 0)&&ce(A,this.length-8);const $=(R<<24)+this[++A]*2**16+this[++A]*2**8+this[++A];return(BigInt($)<<BigInt(32))+BigInt(this[++A]*2**24+this[++A]*2**16+this[++A]*2**8+D)}),a.prototype.readFloatLE=function(A,R){return A=A>>>0,R||N(A,4,this.length),r.read(this,A,!0,23,4)},a.prototype.readFloatBE=function(A,R){return A=A>>>0,R||N(A,4,this.length),r.read(this,A,!1,23,4)},a.prototype.readDoubleLE=function(A,R){return A=A>>>0,R||N(A,8,this.length),r.read(this,A,!0,52,8)},a.prototype.readDoubleBE=function(A,R){return A=A>>>0,R||N(A,8,this.length),r.read(this,A,!1,52,8)};function ee(M,A,R,D,$,Q){if(!a.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>$||A<Q)throw new RangeError('"value" argument is out of bounds');if(R+D>M.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(A,R,D,$){if(A=+A,R=R>>>0,D=D>>>0,!$){const le=Math.pow(2,8*D)-1;ee(this,A,R,D,le,0)}let Q=1,te=0;for(this[R]=A&255;++te<D&&(Q*=256);)this[R+te]=A/Q&255;return R+D},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(A,R,D,$){if(A=+A,R=R>>>0,D=D>>>0,!$){const le=Math.pow(2,8*D)-1;ee(this,A,R,D,le,0)}let Q=D-1,te=1;for(this[R+Q]=A&255;--Q>=0&&(te*=256);)this[R+Q]=A/te&255;return R+D},a.prototype.writeUint8=a.prototype.writeUInt8=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,1,255,0),this[R]=A&255,R+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,65535,0),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,65535,0),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,4294967295,0),this[R+3]=A>>>24,this[R+2]=A>>>16,this[R+1]=A>>>8,this[R]=A&255,R+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,4294967295,0),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4};function Y(M,A,R,D,$){X(A,D,$,M,R,7);let Q=Number(A&BigInt(4294967295));M[R++]=Q,Q=Q>>8,M[R++]=Q,Q=Q>>8,M[R++]=Q,Q=Q>>8,M[R++]=Q;let te=Number(A>>BigInt(32)&BigInt(4294967295));return M[R++]=te,te=te>>8,M[R++]=te,te=te>>8,M[R++]=te,te=te>>8,M[R++]=te,R}function ne(M,A,R,D,$){X(A,D,$,M,R,7);let Q=Number(A&BigInt(4294967295));M[R+7]=Q,Q=Q>>8,M[R+6]=Q,Q=Q>>8,M[R+5]=Q,Q=Q>>8,M[R+4]=Q;let te=Number(A>>BigInt(32)&BigInt(4294967295));return M[R+3]=te,te=te>>8,M[R+2]=te,te=te>>8,M[R+1]=te,te=te>>8,M[R]=te,R+8}a.prototype.writeBigUInt64LE=he(function(A,R=0){return Y(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(A,R=0){return ne(this,A,R,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(A,R,D,$){if(A=+A,R=R>>>0,!$){const Ae=Math.pow(2,8*D-1);ee(this,A,R,D,Ae-1,-Ae)}let Q=0,te=1,le=0;for(this[R]=A&255;++Q<D&&(te*=256);)A<0&&le===0&&this[R+Q-1]!==0&&(le=1),this[R+Q]=(A/te>>0)-le&255;return R+D},a.prototype.writeIntBE=function(A,R,D,$){if(A=+A,R=R>>>0,!$){const Ae=Math.pow(2,8*D-1);ee(this,A,R,D,Ae-1,-Ae)}let Q=D-1,te=1,le=0;for(this[R+Q]=A&255;--Q>=0&&(te*=256);)A<0&&le===0&&this[R+Q+1]!==0&&(le=1),this[R+Q]=(A/te>>0)-le&255;return R+D},a.prototype.writeInt8=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,1,127,-128),A<0&&(A=255+A+1),this[R]=A&255,R+1},a.prototype.writeInt16LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,32767,-32768),this[R]=A&255,this[R+1]=A>>>8,R+2},a.prototype.writeInt16BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,2,32767,-32768),this[R]=A>>>8,this[R+1]=A&255,R+2},a.prototype.writeInt32LE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,2147483647,-2147483648),this[R]=A&255,this[R+1]=A>>>8,this[R+2]=A>>>16,this[R+3]=A>>>24,R+4},a.prototype.writeInt32BE=function(A,R,D){return A=+A,R=R>>>0,D||ee(this,A,R,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[R]=A>>>24,this[R+1]=A>>>16,this[R+2]=A>>>8,this[R+3]=A&255,R+4},a.prototype.writeBigInt64LE=he(function(A,R=0){return Y(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(A,R=0){return ne(this,A,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(M,A,R,D,$,Q){if(R+D>M.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ae(M,A,R,D,$){return A=+A,R=R>>>0,$||se(M,A,R,4),r.write(M,A,R,D,23,4),R+4}a.prototype.writeFloatLE=function(A,R,D){return ae(this,A,R,!0,D)},a.prototype.writeFloatBE=function(A,R,D){return ae(this,A,R,!1,D)};function W(M,A,R,D,$){return A=+A,R=R>>>0,$||se(M,A,R,8),r.write(M,A,R,D,52,8),R+8}a.prototype.writeDoubleLE=function(A,R,D){return W(this,A,R,!0,D)},a.prototype.writeDoubleBE=function(A,R,D){return W(this,A,R,!1,D)},a.prototype.copy=function(A,R,D,$){if(!a.isBuffer(A))throw new TypeError("argument should be a Buffer");if(D||(D=0),!$&&$!==0&&($=this.length),R>=A.length&&(R=A.length),R||(R=0),$>0&&$<D&&($=D),$===D||A.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),A.length-R<$-D&&($=A.length-R+D);const Q=$-D;return this===A&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,D,$):Uint8Array.prototype.set.call(A,this.subarray(D,$),R),Q},a.prototype.fill=function(A,R,D,$){if(typeof A=="string"){if(typeof R=="string"?($=R,R=0,D=this.length):typeof D=="string"&&($=D,D=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!a.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(A.length===1){const te=A.charCodeAt(0);($==="utf8"&&te<128||$==="latin1")&&(A=te)}}else typeof A=="number"?A=A&255:typeof A=="boolean"&&(A=Number(A));if(R<0||this.length<R||this.length<D)throw new RangeError("Out of range index");if(D<=R)return this;R=R>>>0,D=D===void 0?this.length:D>>>0,A||(A=0);let Q;if(typeof A=="number")for(Q=R;Q<D;++Q)this[Q]=A;else{const te=a.isBuffer(A)?A:a.from(A,$),le=te.length;if(le===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Q=0;Q<D-R;++Q)this[Q+R]=te[Q%le]}return this};const F={};function k(M,A,R){F[M]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(M,A){return`The "${M}" argument must be of type number. Received type ${typeof A}`},TypeError),k("ERR_OUT_OF_RANGE",function(M,A,R){let D=`The value of "${M}" is out of range.`,$=R;return Number.isInteger(R)&&Math.abs(R)>2**32?$=m(String(R)):typeof R=="bigint"&&($=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&($=m($)),$+="n"),D+=` It must be ${A}. Received ${$}`,D},RangeError);function m(M){let A="",R=M.length;const D=M[0]==="-"?1:0;for(;R>=D+4;R-=3)A=`_${M.slice(R-3,R)}${A}`;return`${M.slice(0,R)}${A}`}function B(M,A,R){Z(A,"offset"),(M[A]===void 0||M[A+R]===void 0)&&ce(A,M.length-(R+1))}function X(M,A,R,D,$,Q){if(M>R||M<A){const te=typeof A=="bigint"?"n":"";let le;throw Q>3?A===0||A===BigInt(0)?le=`>= 0${te} and < 2${te} ** ${(Q+1)*8}${te}`:le=`>= -(2${te} ** ${(Q+1)*8-1}${te}) and < 2 ** ${(Q+1)*8-1}${te}`:le=`>= ${A}${te} and <= ${R}${te}`,new F.ERR_OUT_OF_RANGE("value",le,M)}B(D,$,Q)}function Z(M,A){if(typeof M!="number")throw new F.ERR_INVALID_ARG_TYPE(A,"number",M)}function ce(M,A,R){throw Math.floor(M)!==M?(Z(M,R),new F.ERR_OUT_OF_RANGE(R||"offset","an integer",M)):A<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE(R||"offset",`>= ${R?1:0} and <= ${A}`,M)}const ie=/[^+/0-9A-Za-z-_]/g;function de(M){if(M=M.split("=")[0],M=M.trim().replace(ie,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function ye(M,A){A=A||1/0;let R;const D=M.length;let $=null;const Q=[];for(let te=0;te<D;++te){if(R=M.charCodeAt(te),R>55295&&R<57344){if(!$){if(R>56319){(A-=3)>-1&&Q.push(239,191,189);continue}else if(te+1===D){(A-=3)>-1&&Q.push(239,191,189);continue}$=R;continue}if(R<56320){(A-=3)>-1&&Q.push(239,191,189),$=R;continue}R=($-55296<<10|R-56320)+65536}else $&&(A-=3)>-1&&Q.push(239,191,189);if($=null,R<128){if((A-=1)<0)break;Q.push(R)}else if(R<2048){if((A-=2)<0)break;Q.push(R>>6|192,R&63|128)}else if(R<65536){if((A-=3)<0)break;Q.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((A-=4)<0)break;Q.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Q}function ue(M){const A=[];for(let R=0;R<M.length;++R)A.push(M.charCodeAt(R)&255);return A}function Ee(M,A){let R,D,$;const Q=[];for(let te=0;te<M.length&&!((A-=2)<0);++te)R=M.charCodeAt(te),D=R>>8,$=R%256,Q.push($),Q.push(D);return Q}function xe(M){return e.toByteArray(de(M))}function me(M,A,R,D){let $;for($=0;$<D&&!($+R>=A.length||$>=M.length);++$)A[$+R]=M[$];return $}function ge(M,A){return M instanceof A||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===A.name}function Te(M){return M!==M}const ve=function(){const M="0123456789abcdef",A=new Array(256);for(let R=0;R<16;++R){const D=R*16;for(let $=0;$<16;++$)A[D+$]=M[R]+M[$]}return A}();function he(M){return typeof BigInt>"u"?Ne:M}function Ne(){throw new Error("BigInt not supported")}})(Ui);window.Buffer=Ui.Buffer;function ps(){}const ub=t=>t;function lb(t){return t()}function ep(){return Object.create(null)}function Ys(t){t.forEach(lb)}function ou(t){return typeof t=="function"}function au(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Pc;function tp(t,e){return Pc||(Pc=document.createElement("a")),Pc.href=e,t===Pc.href}function Uy(t){return Object.keys(t).length===0}function Ky(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const db=typeof window<"u";let Hy=db?()=>window.performance.now():()=>Date.now(),Dh=db?t=>requestAnimationFrame(t):ps;const xo=new Set;function hb(t){xo.forEach(e=>{e.c(t)||(xo.delete(e),e.f())}),xo.size!==0&&Dh(hb)}function Fy(t){let e;return xo.size===0&&Dh(hb),{promise:new Promise(r=>{xo.add(e={c:t,f:r})}),abort(){xo.delete(e)}}}function ka(t,e){t.appendChild(e)}function pb(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function jy(t){const e=ts("style");return Gy(pb(t),e),e.sheet}function Gy(t,e){return ka(t.head||t,e),e.sheet}function Ur(t,e,r){t.insertBefore(e,r||null)}function xr(t){t.parentNode&&t.parentNode.removeChild(t)}function ts(t){return document.createElement(t)}function So(t){return document.createTextNode(t)}function Nc(){return So(" ")}function gb(){return So("")}function El(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function rn(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function Vy(t){return Array.from(t.childNodes)}function bb(t,e){e=""+e,t.data!==e&&(t.data=e)}function qy(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}const Ef=new Map;let _f=0;function $y(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function zy(t,e){const r={stylesheet:jy(e),rules:{}};return Ef.set(t,r),r}function rp(t,e,r,n,i,s,o,a=0){const c=16.666/n;let l=`{
`;for(let G=0;G<=1;G+=c){const V=e+(r-e)*s(G);l+=G*100+`%{${o(V,1-V)}}
`}const f=l+`100% {${o(r,1-r)}}
}`,d=`__svelte_${$y(f)}_${a}`,I=pb(t),{stylesheet:P,rules:L}=Ef.get(I)||zy(I,t);L[d]||(L[d]=!0,P.insertRule(`@keyframes ${d} ${f}`,P.cssRules.length));const H=t.style.animation||"";return t.style.animation=`${H?`${H}, `:""}${d} ${n}ms linear ${i}ms 1 both`,_f+=1,d}function Wy(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(t.style.animation=n.join(", "),_f-=i,_f||Xy())}function Xy(){Dh(()=>{_f||(Ef.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&xr(e)}),Ef.clear())})}let $a;function Da(t){$a=t}function Jy(){if(!$a)throw new Error("Function called outside component initialization");return $a}function Yy(t){Jy().$$.on_mount.push(t)}const vo=[],np=[];let Ro=[];const ip=[],Qy=Promise.resolve();let zd=!1;function Zy(){zd||(zd=!0,Qy.then(vb))}function Co(t){Ro.push(t)}const _l=new Set;let co=0;function vb(){if(co!==0)return;const t=$a;do{try{for(;co<vo.length;){const e=vo[co];co++,Da(e),eE(e.$$)}}catch(e){throw vo.length=0,co=0,e}for(Da(null),vo.length=0,co=0;np.length;)np.pop()();for(let e=0;e<Ro.length;e+=1){const r=Ro[e];_l.has(r)||(_l.add(r),r())}Ro.length=0}while(vo.length);for(;ip.length;)ip.pop()();zd=!1,_l.clear(),Da(t)}function eE(t){if(t.fragment!==null){t.update(),Ys(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Co)}}function tE(t){const e=[],r=[];Ro.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),Ro=e}let ga;function rE(){return ga||(ga=Promise.resolve(),ga.then(()=>{ga=null})),ga}function wl(t,e,r){t.dispatchEvent(qy(`${e?"intro":"outro"}${r}`))}const af=new Set;let Mi;function wf(){Mi={r:0,c:[],p:Mi}}function Af(){Mi.r||Ys(Mi.c),Mi=Mi.p}function Jn(t,e){t&&t.i&&(af.delete(t),t.i(e))}function us(t,e,r,n){if(t&&t.o){if(af.has(t))return;af.add(t),Mi.c.push(()=>{af.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}const nE={duration:0};function xf(t,e,r,n){const i={direction:"both"};let s=e(t,r,i),o=n?0:1,a=null,c=null,l=null;function f(){l&&Wy(t,l)}function d(P,L){const H=P.b-o;return L*=Math.abs(H),{a:o,b:P.b,d:H,duration:L,start:P.start,end:P.start+L,group:P.group}}function I(P){const{delay:L=0,duration:H=300,easing:G=ub,tick:V=ps,css:C}=s||nE,q={start:Hy()+L,b:P};P||(q.group=Mi,Mi.r+=1),a||c?c=q:(C&&(f(),l=rp(t,o,P,H,L,G,C)),P&&V(0,1),a=d(q,H),Co(()=>wl(t,P,"start")),Fy(U=>{if(c&&U>c.start&&(a=d(c,H),c=null,wl(t,a.b,"start"),C&&(f(),l=rp(t,o,a.b,a.duration,0,G,s.css))),a){if(U>=a.end)V(o=a.b,1-o),wl(t,a.b,"end"),c||(a.b?f():--a.group.r||Ys(a.group.c)),a=null;else if(U>=a.start){const K=U-a.start;o=a.a+a.d*G(K/a.duration),V(o,1-o)}}return!!(a||c)}))}return{run(P){ou(s)?rE().then(()=>{s=s(i),I(P)}):I(P)},end(){f(),a=c=null}}}function iE(t,e,r,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,r),n||Co(()=>{const o=t.$$.on_mount.map(lb).filter(ou);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ys(o),t.$$.on_mount=[]}),s.forEach(Co)}function sE(t,e){const r=t.$$;r.fragment!==null&&(tE(r.after_update),Ys(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function oE(t,e){t.$$.dirty[0]===-1&&(vo.push(t),Zy(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function aE(t,e,r,n,i,s,o,a=[-1]){const c=$a;Da(t);const l=t.$$={fragment:null,ctx:[],props:s,update:ps,not_equal:i,bound:ep(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ep(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(l.root);let f=!1;if(l.ctx=r?r(t,e.props||{},(d,I,...P)=>{const L=P.length?P[0]:I;return l.ctx&&i(l.ctx[d],l.ctx[d]=L)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](L),f&&oE(t,d)),I}):[],l.update(),f=!0,Ys(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=Vy(e.target);l.fragment&&l.fragment.l(d),d.forEach(xr)}else l.fragment&&l.fragment.c();e.intro&&Jn(t.$$.fragment),iE(t,e.target,e.anchor,e.customElement),vb()}Da(c)}class cE{$destroy(){sE(this,1),this.$destroy=ps}$on(e,r){if(!ou(r))return ps;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Uy(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function fE(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function sp(t,{delay:e=0,duration:r=400,easing:n=fE,amount:i=5,opacity:s=0}={}){const o=getComputedStyle(t),a=+o.opacity,c=o.filter==="none"?"":o.filter,l=a*(1-s),[f,d]=Ky(i);return{delay:e,duration:r,easing:n,css:(I,P)=>`opacity: ${a-l*P}; filter: ${c} blur(${P*f}${d});`}}function op(t,{delay:e=0,duration:r=400,easing:n=ub}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}const uE="modulepreload",lE=function(t){return"/reveal/"+t},ap={},dE=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=lE(s),s in ap)return;ap[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":uE,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((f,d)=>{l.addEventListener("load",f),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var Wd={},hE={get exports(){return Wd},set exports(t){Wd=t}},Sf={},pE={get exports(){return Sf},set exports(t){Sf=t}},mb=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},gE=mb,As=Object.prototype.toString;function Uh(t){return Array.isArray(t)}function Xd(t){return typeof t>"u"}function bE(t){return t!==null&&!Xd(t)&&t.constructor!==null&&!Xd(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function yb(t){return As.call(t)==="[object ArrayBuffer]"}function vE(t){return As.call(t)==="[object FormData]"}function mE(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yb(t.buffer),e}function yE(t){return typeof t=="string"}function EE(t){return typeof t=="number"}function Eb(t){return t!==null&&typeof t=="object"}function cf(t){if(As.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function _E(t){return As.call(t)==="[object Date]"}function wE(t){return As.call(t)==="[object File]"}function AE(t){return As.call(t)==="[object Blob]"}function _b(t){return As.call(t)==="[object Function]"}function xE(t){return Eb(t)&&_b(t.pipe)}function SE(t){return As.call(t)==="[object URLSearchParams]"}function RE(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function IE(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Kh(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Uh(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Jd(){var t={};function e(i,s){cf(t[s])&&cf(i)?t[s]=Jd(t[s],i):cf(i)?t[s]=Jd({},i):Uh(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Kh(arguments[r],e);return t}function OE(t,e,r){return Kh(e,function(i,s){r&&typeof i=="function"?t[s]=gE(i,r):t[s]=i}),t}function TE(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Cr={isArray:Uh,isArrayBuffer:yb,isBuffer:bE,isFormData:vE,isArrayBufferView:mE,isString:yE,isNumber:EE,isObject:Eb,isPlainObject:cf,isUndefined:Xd,isDate:_E,isFile:wE,isBlob:AE,isFunction:_b,isStream:xE,isURLSearchParams:SE,isStandardBrowserEnv:IE,forEach:Kh,merge:Jd,extend:OE,trim:RE,stripBOM:TE},fo=Cr;function cp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var wb=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(fo.isURLSearchParams(r))i=r.toString();else{var s=[];fo.forEach(r,function(c,l){c===null||typeof c>"u"||(fo.isArray(c)?l=l+"[]":c=[c],fo.forEach(c,function(d){fo.isDate(d)?d=d.toISOString():fo.isObject(d)&&(d=JSON.stringify(d)),s.push(cp(l)+"="+cp(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},PE=Cr;function cu(){this.handlers=[]}cu.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};cu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};cu.prototype.forEach=function(e){PE.forEach(this.handlers,function(n){n!==null&&e(n)})};var NE=cu,ME=Cr,LE=function(e,r){ME.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Ab=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},xb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CE=Ab,Sb=function(e,r,n,i,s){var o=new Error(e);return CE(o,r,n,i,s)},BE=Sb,kE=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(BE("Request failed with status code "+n.status,n.config,null,n.request,n))},Al,fp;function DE(){if(fp)return Al;fp=1;var t=Cr;return Al=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Al}var UE=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},KE=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},HE=UE,FE=KE,jE=function(e,r){return e&&!HE(r)?FE(e,r):r},xl,up;function GE(){if(up)return xl;up=1;var t=Cr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return xl=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},xl}var Sl,lp;function VE(){if(lp)return Sl;lp=1;var t=Cr;return Sl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Sl}var Rl,dp;function fu(){if(dp)return Rl;dp=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Rl=t,Rl}var Il,hp;function pp(){if(hp)return Il;hp=1;var t=Cr,e=kE,r=DE(),n=wb,i=jE,s=GE(),o=VE(),a=Sb,c=xb,l=fu();return Il=function(d){return new Promise(function(P,L){var H=d.data,G=d.headers,V=d.responseType,C;function q(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete G["Content-Type"];var U=new XMLHttpRequest;if(d.auth){var K=d.auth.username||"",j=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";G.Authorization="Basic "+btoa(K+":"+j)}var y=i(d.baseURL,d.url);U.open(d.method.toUpperCase(),n(y,d.params,d.paramsSerializer),!0),U.timeout=d.timeout;function w(){if(U){var x="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,E=!V||V==="text"||V==="json"?U.responseText:U.response,u={data:E,status:U.status,statusText:U.statusText,headers:x,config:d,request:U};e(function(g){P(g),q()},function(g){L(g),q()},u),U=null}}if("onloadend"in U?U.onloadend=w:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(w)},U.onabort=function(){U&&(L(a("Request aborted",d,"ECONNABORTED",U)),U=null)},U.onerror=function(){L(a("Network Error",d,null,U)),U=null},U.ontimeout=function(){var E=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c;d.timeoutErrorMessage&&(E=d.timeoutErrorMessage),L(a(E,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},t.isStandardBrowserEnv()){var T=(d.withCredentials||o(y))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;T&&(G[d.xsrfHeaderName]=T)}"setRequestHeader"in U&&t.forEach(G,function(E,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete G[u]:U.setRequestHeader(u,E)}),t.isUndefined(d.withCredentials)||(U.withCredentials=!!d.withCredentials),V&&V!=="json"&&(U.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&U.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(x){U&&(L(!x||x&&x.type?new l("canceled"):x),U.abort(),U=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),H||(H=null),U.send(H)})},Il}var nr=Cr,gp=LE,qE=Ab,$E=xb,zE={"Content-Type":"application/x-www-form-urlencoded"};function bp(t,e){!nr.isUndefined(t)&&nr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function WE(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=pp()),t}function XE(t,e,r){if(nr.isString(t))try{return(e||JSON.parse)(t),nr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var uu={transitional:$E,adapter:WE(),transformRequest:[function(e,r){return gp(r,"Accept"),gp(r,"Content-Type"),nr.isFormData(e)||nr.isArrayBuffer(e)||nr.isBuffer(e)||nr.isStream(e)||nr.isFile(e)||nr.isBlob(e)?e:nr.isArrayBufferView(e)?e.buffer:nr.isURLSearchParams(e)?(bp(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):nr.isObject(e)||r&&r["Content-Type"]==="application/json"?(bp(r,"application/json"),XE(e)):e}],transformResponse:[function(e){var r=this.transitional||uu.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&nr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?qE(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};nr.forEach(["delete","get","head"],function(e){uu.headers[e]={}});nr.forEach(["post","put","patch"],function(e){uu.headers[e]=nr.merge(zE)});var Hh=uu,JE=Cr,YE=Hh,QE=function(e,r,n){var i=this||YE;return JE.forEach(n,function(o){e=o.call(i,e,r)}),e},Ol,vp;function Rb(){return vp||(vp=1,Ol=function(e){return!!(e&&e.__CANCEL__)}),Ol}var mp=Cr,Tl=QE,ZE=Rb(),e_=Hh,t_=fu();function Pl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new t_("canceled")}var r_=function(e){Pl(e),e.headers=e.headers||{},e.data=Tl.call(e,e.data,e.headers,e.transformRequest),e.headers=mp.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),mp.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||e_.adapter;return r(e).then(function(i){return Pl(e),i.data=Tl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return ZE(i)||(Pl(e),i&&i.response&&(i.response.data=Tl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},kr=Cr,Ib=function(e,r){r=r||{};var n={};function i(f,d){return kr.isPlainObject(f)&&kr.isPlainObject(d)?kr.merge(f,d):kr.isPlainObject(d)?kr.merge({},d):kr.isArray(d)?d.slice():d}function s(f){if(kr.isUndefined(r[f])){if(!kr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!kr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(kr.isUndefined(r[f])){if(!kr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return kr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var I=l[d]||s,P=I(d);kr.isUndefined(P)&&I!==c||(n[d]=P)}),n},Nl,yp;function Ob(){return yp||(yp=1,Nl={version:"0.26.1"}),Nl}var n_=Ob().version,Fh={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Fh[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Ep={};Fh.transitional=function(e,r,n){function i(s,o){return"[Axios v"+n_+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Ep[o]&&(Ep[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function i_(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var s_={assertOptions:i_,validators:Fh},Tb=Cr,o_=wb,_p=NE,wp=r_,lu=Ib,Pb=s_,uo=Pb.validators;function uc(t){this.defaults=t,this.interceptors={request:new _p,response:new _p}}uc.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=lu(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Pb.assertOptions(n,{silentJSONParsing:uo.transitional(uo.boolean),forcedJSONParsing:uo.transitional(uo.boolean),clarifyTimeoutError:uo.transitional(uo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(s=s&&P.synchronous,i.unshift(P.fulfilled,P.rejected))});var o=[];this.interceptors.response.forEach(function(P){o.push(P.fulfilled,P.rejected)});var a;if(!s){var c=[wp,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var f=i.shift(),d=i.shift();try{l=f(l)}catch(I){d(I);break}}try{a=wp(l)}catch(I){return Promise.reject(I)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};uc.prototype.getUri=function(e){return e=lu(this.defaults,e),o_(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Tb.forEach(["delete","get","head","options"],function(e){uc.prototype[e]=function(r,n){return this.request(lu(n||{},{method:e,url:r,data:(n||{}).data}))}});Tb.forEach(["post","put","patch"],function(e){uc.prototype[e]=function(r,n,i){return this.request(lu(i||{},{method:e,url:r,data:n}))}});var a_=uc,Ml,Ap;function c_(){if(Ap)return Ml;Ap=1;var t=fu();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Ml=e,Ml}var Ll,xp;function f_(){return xp||(xp=1,Ll=function(e){return function(n){return e.apply(null,n)}}),Ll}var Cl,Sp;function u_(){if(Sp)return Cl;Sp=1;var t=Cr;return Cl=function(r){return t.isObject(r)&&r.isAxiosError===!0},Cl}var Rp=Cr,l_=mb,ff=a_,d_=Ib,h_=Hh;function Nb(t){var e=new ff(t),r=l_(ff.prototype.request,e);return Rp.extend(r,ff.prototype,e),Rp.extend(r,e),r.create=function(i){return Nb(d_(t,i))},r}var ci=Nb(h_);ci.Axios=ff;ci.Cancel=fu();ci.CancelToken=c_();ci.isCancel=Rb();ci.VERSION=Ob().version;ci.all=function(e){return Promise.all(e)};ci.spread=f_();ci.isAxiosError=u_();pE.exports=ci;Sf.default=ci;(function(t){t.exports=Sf})(hE);const Ip=cb(Wd);function p_(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}var za;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(za||(za={}));const Mb=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,Op=Mb?void 0:dE(()=>import("./index-4eb822f3.js"),[]).then(t=>t.default).catch(()=>{});var Rf;(function(t){t.TEXT="text",t.JSON="json"})(Rf||(Rf={}));class Zo extends Error{constructor(e,r,n,i,s){super(e),this.message=e,this.status=r,this.statusText=n,this.body=i,this.url=s,this.name="HttpResponse"}}class g_ extends Error{constructor(e){super(e),this.message=e,this.name="HttpRequestFailed"}}class b_{constructor(e=3e4){this.timeout=e}serialize(e){if(!e)return"";const r=[];for(const i in e)if(e.hasOwnProperty(i)&&typeof e[i]<"u"){const s=typeof e[i].toJSON=="function"?e[i].toJSON():e[i];if(s===null){r.push(encodeURIComponent(i));continue}if(Array.isArray(s)){s.forEach(o=>{r.push(encodeURIComponent(i)+"="+encodeURIComponent(o))});continue}r.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}const n=r.join("&");return n?`?${n}`:""}createRequest({url:e,method:r,timeout:n=this.timeout,query:i,headers:s={},json:o=!0},a){return p_(this,void 0,void 0,function*(){let c,l;s["Content-Type"]||(s["Content-Type"]="application/json"),o?c=Rf.JSON:(c=Rf.TEXT,l=[f=>f]);try{const f=Op&&(yield Op);return(yield Ip.request({url:e+this.serialize(i),method:r??"GET",headers:s,responseType:c,transformResponse:l,timeout:n,data:a,adapter:f})).data}catch(f){if(Ip.isAxiosError(f)&&f.response||!Mb&&f.response){let d;throw typeof f.response.data=="object"?d=JSON.stringify(f.response.data):d=f.response.data,new Zo(`Http error response: (${f.response.status}) ${d}`,f.response.status,f.response.statusText,d,e+this.serialize(i))}else throw new g_(`${r} ${e+this.serialize(i)} ${String(f)}`)}})}}var v_=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Bl=Math.ceil,On=Math.floor,Pr="[BigNumber Error] ",Tp=Pr+"Number primitive has more than 15 significant digits: ",ln=1e14,Me=14,kl=9007199254740991,Dl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],qi=1e7,Yt=1e9;function Lb(t){var e,r,n,i=C.prototype={constructor:C,toString:null,valueOf:null},s=new C(1),o=20,a=4,c=-7,l=21,f=-1e7,d=1e7,I=!1,P=1,L=0,H={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},G="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function C(w,T){var x,E,u,h,g,b,p,S,O=this;if(!(O instanceof C))return new C(w,T);if(T==null){if(w&&w._isBigNumber===!0){O.s=w.s,!w.c||w.e>d?O.c=O.e=null:w.e<f?O.c=[O.e=0]:(O.e=w.e,O.c=w.c.slice());return}if((b=typeof w=="number")&&w*0==0){if(O.s=1/w<0?(w=-w,-1):1,w===~~w){for(h=0,g=w;g>=10;g/=10,h++);h>d?O.c=O.e=null:(O.e=h,O.c=[w]);return}S=String(w)}else{if(!v_.test(S=String(w)))return n(O,S,b);O.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(h=S.indexOf("."))>-1&&(S=S.replace(".","")),(g=S.search(/e/i))>0?(h<0&&(h=g),h+=+S.slice(g+1),S=S.substring(0,g)):h<0&&(h=S.length)}else{if(At(T,2,G.length,"Base"),T==10&&V)return O=new C(w),j(O,o+O.e+1,a);if(S=String(w),b=typeof w=="number"){if(w*0!=0)return n(O,S,b,T);if(O.s=1/w<0?(S=S.slice(1),-1):1,C.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(Tp+w)}else O.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(x=G.slice(0,T),h=g=0,p=S.length;g<p;g++)if(x.indexOf(E=S.charAt(g))<0){if(E=="."){if(g>h){h=p;continue}}else if(!u&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){u=!0,g=-1,h=0;continue}return n(O,String(w),b,T)}b=!1,S=r(S,T,10,O.s),(h=S.indexOf("."))>-1?S=S.replace(".",""):h=S.length}for(g=0;S.charCodeAt(g)===48;g++);for(p=S.length;S.charCodeAt(--p)===48;);if(S=S.slice(g,++p)){if(p-=g,b&&C.DEBUG&&p>15&&(w>kl||w!==On(w)))throw Error(Tp+O.s*w);if((h=h-g-1)>d)O.c=O.e=null;else if(h<f)O.c=[O.e=0];else{if(O.e=h,O.c=[],g=(h+1)%Me,h<0&&(g+=Me),g<p){for(g&&O.c.push(+S.slice(0,g)),p-=Me;g<p;)O.c.push(+S.slice(g,g+=Me));g=Me-(S=S.slice(g)).length}else g-=p;for(;g--;S+="0");O.c.push(+S)}}else O.c=[O.e=0]}C.clone=Lb,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(w){var T,x;if(w!=null)if(typeof w=="object"){if(w.hasOwnProperty(T="DECIMAL_PLACES")&&(x=w[T],At(x,0,Yt,T),o=x),w.hasOwnProperty(T="ROUNDING_MODE")&&(x=w[T],At(x,0,8,T),a=x),w.hasOwnProperty(T="EXPONENTIAL_AT")&&(x=w[T],x&&x.pop?(At(x[0],-Yt,0,T),At(x[1],0,Yt,T),c=x[0],l=x[1]):(At(x,-Yt,Yt,T),c=-(l=x<0?-x:x))),w.hasOwnProperty(T="RANGE"))if(x=w[T],x&&x.pop)At(x[0],-Yt,-1,T),At(x[1],1,Yt,T),f=x[0],d=x[1];else if(At(x,-Yt,Yt,T),x)f=-(d=x<0?-x:x);else throw Error(Pr+T+" cannot be zero: "+x);if(w.hasOwnProperty(T="CRYPTO"))if(x=w[T],x===!!x)if(x)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=x;else throw I=!x,Error(Pr+"crypto unavailable");else I=x;else throw Error(Pr+T+" not true or false: "+x);if(w.hasOwnProperty(T="MODULO_MODE")&&(x=w[T],At(x,0,9,T),P=x),w.hasOwnProperty(T="POW_PRECISION")&&(x=w[T],At(x,0,Yt,T),L=x),w.hasOwnProperty(T="FORMAT"))if(x=w[T],typeof x=="object")H=x;else throw Error(Pr+T+" not an object: "+x);if(w.hasOwnProperty(T="ALPHABET"))if(x=w[T],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))V=x.slice(0,10)=="0123456789",G=x;else throw Error(Pr+T+" invalid: "+x)}else throw Error(Pr+"Object expected: "+w);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[c,l],RANGE:[f,d],CRYPTO:I,MODULO_MODE:P,POW_PRECISION:L,FORMAT:H,ALPHABET:G}},C.isBigNumber=function(w){if(!w||w._isBigNumber!==!0)return!1;if(!C.DEBUG)return!0;var T,x,E=w.c,u=w.e,h=w.s;e:if({}.toString.call(E)=="[object Array]"){if((h===1||h===-1)&&u>=-Yt&&u<=Yt&&u===On(u)){if(E[0]===0){if(u===0&&E.length===1)return!0;break e}if(T=(u+1)%Me,T<1&&(T+=Me),String(E[0]).length==T){for(T=0;T<E.length;T++)if(x=E[T],x<0||x>=ln||x!==On(x))break e;if(x!==0)return!0}}}else if(E===null&&u===null&&(h===null||h===1||h===-1))return!0;throw Error(Pr+"Invalid BigNumber: "+w)},C.maximum=C.max=function(){return U(arguments,i.lt)},C.minimum=C.min=function(){return U(arguments,i.gt)},C.random=function(){var w=9007199254740992,T=Math.random()*w&2097151?function(){return On(Math.random()*w)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var E,u,h,g,b,p=0,S=[],O=new C(s);if(x==null?x=o:At(x,0,Yt),g=Bl(x/Me),I)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(g*=2));p<g;)b=E[p]*131072+(E[p+1]>>>11),b>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),E[p]=u[0],E[p+1]=u[1]):(S.push(b%1e14),p+=2);p=g/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(g*=7);p<g;)b=(E[p]&31)*281474976710656+E[p+1]*1099511627776+E[p+2]*4294967296+E[p+3]*16777216+(E[p+4]<<16)+(E[p+5]<<8)+E[p+6],b>=9e15?crypto.randomBytes(7).copy(E,p):(S.push(b%1e14),p+=7);p=g/7}else throw I=!1,Error(Pr+"crypto unavailable");if(!I)for(;p<g;)b=T(),b<9e15&&(S[p++]=b%1e14);for(g=S[--p],x%=Me,g&&x&&(b=Dl[Me-x],S[p]=On(g/b)*b);S[p]===0;S.pop(),p--);if(p<0)S=[h=0];else{for(h=-1;S[0]===0;S.splice(0,1),h-=Me);for(p=1,b=S[0];b>=10;b/=10,p++);p<Me&&(h-=Me-p)}return O.e=h,O.c=S,O}}(),C.sum=function(){for(var w=1,T=arguments,x=new C(T[0]);w<T.length;)x=x.plus(T[w++]);return x},r=function(){var w="0123456789";function T(x,E,u,h){for(var g,b=[0],p,S=0,O=x.length;S<O;){for(p=b.length;p--;b[p]*=E);for(b[0]+=h.indexOf(x.charAt(S++)),g=0;g<b.length;g++)b[g]>u-1&&(b[g+1]==null&&(b[g+1]=0),b[g+1]+=b[g]/u|0,b[g]%=u)}return b.reverse()}return function(x,E,u,h,g){var b,p,S,O,_,v,N,ee,Y=x.indexOf("."),ne=o,se=a;for(Y>=0&&(O=L,L=0,x=x.replace(".",""),ee=new C(E),v=ee.pow(x.length-Y),L=O,ee.c=T(hi(Zr(v.c),v.e,"0"),10,u,w),ee.e=ee.c.length),N=T(x,E,u,g?(b=G,w):(b=w,G)),S=O=N.length;N[--O]==0;N.pop());if(!N[0])return b.charAt(0);if(Y<0?--S:(v.c=N,v.e=S,v.s=h,v=e(v,ee,ne,se,u),N=v.c,_=v.r,S=v.e),p=S+ne+1,Y=N[p],O=u/2,_=_||p<0||N[p+1]!=null,_=se<4?(Y!=null||_)&&(se==0||se==(v.s<0?3:2)):Y>O||Y==O&&(se==4||_||se==6&&N[p-1]&1||se==(v.s<0?8:7)),p<1||!N[0])x=_?hi(b.charAt(1),-ne,b.charAt(0)):b.charAt(0);else{if(N.length=p,_)for(--u;++N[--p]>u;)N[p]=0,p||(++S,N=[1].concat(N));for(O=N.length;!N[--O];);for(Y=0,x="";Y<=O;x+=b.charAt(N[Y++]));x=hi(x,S,b.charAt(0))}return x}}(),e=function(){function w(E,u,h){var g,b,p,S,O=0,_=E.length,v=u%qi,N=u/qi|0;for(E=E.slice();_--;)p=E[_]%qi,S=E[_]/qi|0,g=N*p+S*v,b=v*p+g%qi*qi+O,O=(b/h|0)+(g/qi|0)+N*S,E[_]=b%h;return O&&(E=[O].concat(E)),E}function T(E,u,h,g){var b,p;if(h!=g)p=h>g?1:-1;else for(b=p=0;b<h;b++)if(E[b]!=u[b]){p=E[b]>u[b]?1:-1;break}return p}function x(E,u,h,g){for(var b=0;h--;)E[h]-=b,b=E[h]<u[h]?1:0,E[h]=b*g+E[h]-u[h];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,u,h,g,b){var p,S,O,_,v,N,ee,Y,ne,se,ae,W,F,k,m,B,X,Z=E.s==u.s?1:-1,ce=E.c,ie=u.c;if(!ce||!ce[0]||!ie||!ie[0])return new C(!E.s||!u.s||(ce?ie&&ce[0]==ie[0]:!ie)?NaN:ce&&ce[0]==0||!ie?Z*0:Z/0);for(Y=new C(Z),ne=Y.c=[],S=E.e-u.e,Z=h+S+1,b||(b=ln,S=en(E.e/Me)-en(u.e/Me),Z=Z/Me|0),O=0;ie[O]==(ce[O]||0);O++);if(ie[O]>(ce[O]||0)&&S--,Z<0)ne.push(1),_=!0;else{for(k=ce.length,B=ie.length,O=0,Z+=2,v=On(b/(ie[0]+1)),v>1&&(ie=w(ie,v,b),ce=w(ce,v,b),B=ie.length,k=ce.length),F=B,se=ce.slice(0,B),ae=se.length;ae<B;se[ae++]=0);X=ie.slice(),X=[0].concat(X),m=ie[0],ie[1]>=b/2&&m++;do{if(v=0,p=T(ie,se,B,ae),p<0){if(W=se[0],B!=ae&&(W=W*b+(se[1]||0)),v=On(W/m),v>1)for(v>=b&&(v=b-1),N=w(ie,v,b),ee=N.length,ae=se.length;T(N,se,ee,ae)==1;)v--,x(N,B<ee?X:ie,ee,b),ee=N.length,p=1;else v==0&&(p=v=1),N=ie.slice(),ee=N.length;if(ee<ae&&(N=[0].concat(N)),x(se,N,ae,b),ae=se.length,p==-1)for(;T(ie,se,B,ae)<1;)v++,x(se,B<ae?X:ie,ae,b),ae=se.length}else p===0&&(v++,se=[0]);ne[O++]=v,se[0]?se[ae++]=ce[F]||0:(se=[ce[F]],ae=1)}while((F++<k||se[0]!=null)&&Z--);_=se[0]!=null,ne[0]||ne.splice(0,1)}if(b==ln){for(O=1,Z=ne[0];Z>=10;Z/=10,O++);j(Y,h+(Y.e=O+S*Me-1)+1,g,_)}else Y.e=S,Y.r=+_;return Y}}();function q(w,T,x,E){var u,h,g,b,p;if(x==null?x=a:At(x,0,8),!w.c)return w.toString();if(u=w.c[0],g=w.e,T==null)p=Zr(w.c),p=E==1||E==2&&(g<=c||g>=l)?Lc(p,g):hi(p,g,"0");else if(w=j(new C(w),T,x),h=w.e,p=Zr(w.c),b=p.length,E==1||E==2&&(T<=h||h<=c)){for(;b<T;p+="0",b++);p=Lc(p,h)}else if(T-=g,p=hi(p,h,"0"),h+1>b){if(--T>0)for(p+=".";T--;p+="0");}else if(T+=h-b,T>0)for(h+1==b&&(p+=".");T--;p+="0");return w.s<0&&u?"-"+p:p}function U(w,T){for(var x,E=1,u=new C(w[0]);E<w.length;E++)if(x=new C(w[E]),x.s)T.call(u,x)&&(u=x);else{u=x;break}return u}function K(w,T,x){for(var E=1,u=T.length;!T[--u];T.pop());for(u=T[0];u>=10;u/=10,E++);return(x=E+x*Me-1)>d?w.c=w.e=null:x<f?w.c=[w.e=0]:(w.e=x,w.c=T),w}n=function(){var w=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,x=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(h,g,b,p){var S,O=b?g:g.replace(u,"");if(E.test(O))h.s=isNaN(O)?null:O<0?-1:1;else{if(!b&&(O=O.replace(w,function(_,v,N){return S=(N=N.toLowerCase())=="x"?16:N=="b"?2:8,!p||p==S?v:_}),p&&(S=p,O=O.replace(T,"$1").replace(x,"0.$1")),g!=O))return new C(O,S);if(C.DEBUG)throw Error(Pr+"Not a"+(p?" base "+p:"")+" number: "+g);h.s=null}h.c=h.e=null}}();function j(w,T,x,E){var u,h,g,b,p,S,O,_=w.c,v=Dl;if(_){e:{for(u=1,b=_[0];b>=10;b/=10,u++);if(h=T-u,h<0)h+=Me,g=T,p=_[S=0],O=p/v[u-g-1]%10|0;else if(S=Bl((h+1)/Me),S>=_.length)if(E){for(;_.length<=S;_.push(0));p=O=0,u=1,h%=Me,g=h-Me+1}else break e;else{for(p=b=_[S],u=1;b>=10;b/=10,u++);h%=Me,g=h-Me+u,O=g<0?0:p/v[u-g-1]%10|0}if(E=E||T<0||_[S+1]!=null||(g<0?p:p%v[u-g-1]),E=x<4?(O||E)&&(x==0||x==(w.s<0?3:2)):O>5||O==5&&(x==4||E||x==6&&(h>0?g>0?p/v[u-g]:0:_[S-1])%10&1||x==(w.s<0?8:7)),T<1||!_[0])return _.length=0,E?(T-=w.e+1,_[0]=v[(Me-T%Me)%Me],w.e=-T||0):_[0]=w.e=0,w;if(h==0?(_.length=S,b=1,S--):(_.length=S+1,b=v[Me-h],_[S]=g>0?On(p/v[u-g]%v[g])*b:0),E)for(;;)if(S==0){for(h=1,g=_[0];g>=10;g/=10,h++);for(g=_[0]+=b,b=1;g>=10;g/=10,b++);h!=b&&(w.e++,_[0]==ln&&(_[0]=1));break}else{if(_[S]+=b,_[S]!=ln)break;_[S--]=0,b=1}for(h=_.length;_[--h]===0;_.pop());}w.e>d?w.c=w.e=null:w.e<f&&(w.c=[w.e=0])}return w}function y(w){var T,x=w.e;return x===null?w.toString():(T=Zr(w.c),T=x<=c||x>=l?Lc(T,x):hi(T,x,"0"),w.s<0?"-"+T:T)}return i.absoluteValue=i.abs=function(){var w=new C(this);return w.s<0&&(w.s=1),w},i.comparedTo=function(w,T){return lo(this,new C(w,T))},i.decimalPlaces=i.dp=function(w,T){var x,E,u,h=this;if(w!=null)return At(w,0,Yt),T==null?T=a:At(T,0,8),j(new C(h),w+h.e+1,T);if(!(x=h.c))return null;if(E=((u=x.length-1)-en(this.e/Me))*Me,u=x[u])for(;u%10==0;u/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(w,T){return e(this,new C(w,T),o,a)},i.dividedToIntegerBy=i.idiv=function(w,T){return e(this,new C(w,T),0,1)},i.exponentiatedBy=i.pow=function(w,T){var x,E,u,h,g,b,p,S,O,_=this;if(w=new C(w),w.c&&!w.isInteger())throw Error(Pr+"Exponent not an integer: "+y(w));if(T!=null&&(T=new C(T)),b=w.e>14,!_.c||!_.c[0]||_.c[0]==1&&!_.e&&_.c.length==1||!w.c||!w.c[0])return O=new C(Math.pow(+y(_),b?w.s*(2-Mc(w)):+y(w))),T?O.mod(T):O;if(p=w.s<0,T){if(T.c?!T.c[0]:!T.s)return new C(NaN);E=!p&&_.isInteger()&&T.isInteger(),E&&(_=_.mod(T))}else{if(w.e>9&&(_.e>0||_.e<-1||(_.e==0?_.c[0]>1||b&&_.c[1]>=24e7:_.c[0]<8e13||b&&_.c[0]<=9999975e7)))return h=_.s<0&&Mc(w)?-0:0,_.e>-1&&(h=1/h),new C(p?1/h:h);L&&(h=Bl(L/Me+2))}for(b?(x=new C(.5),p&&(w.s=1),S=Mc(w)):(u=Math.abs(+y(w)),S=u%2),O=new C(s);;){if(S){if(O=O.times(_),!O.c)break;h?O.c.length>h&&(O.c.length=h):E&&(O=O.mod(T))}if(u){if(u=On(u/2),u===0)break;S=u%2}else if(w=w.times(x),j(w,w.e+1,1),w.e>14)S=Mc(w);else{if(u=+y(w),u===0)break;S=u%2}_=_.times(_),h?_.c&&_.c.length>h&&(_.c.length=h):E&&(_=_.mod(T))}return E?O:(p&&(O=s.div(O)),T?O.mod(T):h?j(O,L,a,g):O)},i.integerValue=function(w){var T=new C(this);return w==null?w=a:At(w,0,8),j(T,T.e+1,w)},i.isEqualTo=i.eq=function(w,T){return lo(this,new C(w,T))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(w,T){return lo(this,new C(w,T))>0},i.isGreaterThanOrEqualTo=i.gte=function(w,T){return(T=lo(this,new C(w,T)))===1||T===0},i.isInteger=function(){return!!this.c&&en(this.e/Me)>this.c.length-2},i.isLessThan=i.lt=function(w,T){return lo(this,new C(w,T))<0},i.isLessThanOrEqualTo=i.lte=function(w,T){return(T=lo(this,new C(w,T)))===-1||T===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(w,T){var x,E,u,h,g=this,b=g.s;if(w=new C(w,T),T=w.s,!b||!T)return new C(NaN);if(b!=T)return w.s=-T,g.plus(w);var p=g.e/Me,S=w.e/Me,O=g.c,_=w.c;if(!p||!S){if(!O||!_)return O?(w.s=-T,w):new C(_?g:NaN);if(!O[0]||!_[0])return _[0]?(w.s=-T,w):new C(O[0]?g:a==3?-0:0)}if(p=en(p),S=en(S),O=O.slice(),b=p-S){for((h=b<0)?(b=-b,u=O):(S=p,u=_),u.reverse(),T=b;T--;u.push(0));u.reverse()}else for(E=(h=(b=O.length)<(T=_.length))?b:T,b=T=0;T<E;T++)if(O[T]!=_[T]){h=O[T]<_[T];break}if(h&&(u=O,O=_,_=u,w.s=-w.s),T=(E=_.length)-(x=O.length),T>0)for(;T--;O[x++]=0);for(T=ln-1;E>b;){if(O[--E]<_[E]){for(x=E;x&&!O[--x];O[x]=T);--O[x],O[E]+=ln}O[E]-=_[E]}for(;O[0]==0;O.splice(0,1),--S);return O[0]?K(w,O,S):(w.s=a==3?-1:1,w.c=[w.e=0],w)},i.modulo=i.mod=function(w,T){var x,E,u=this;return w=new C(w,T),!u.c||!w.s||w.c&&!w.c[0]?new C(NaN):!w.c||u.c&&!u.c[0]?new C(u):(P==9?(E=w.s,w.s=1,x=e(u,w,0,3),w.s=E,x.s*=E):x=e(u,w,0,P),w=u.minus(x.times(w)),!w.c[0]&&P==1&&(w.s=u.s),w)},i.multipliedBy=i.times=function(w,T){var x,E,u,h,g,b,p,S,O,_,v,N,ee,Y,ne,se=this,ae=se.c,W=(w=new C(w,T)).c;if(!ae||!W||!ae[0]||!W[0])return!se.s||!w.s||ae&&!ae[0]&&!W||W&&!W[0]&&!ae?w.c=w.e=w.s=null:(w.s*=se.s,!ae||!W?w.c=w.e=null:(w.c=[0],w.e=0)),w;for(E=en(se.e/Me)+en(w.e/Me),w.s*=se.s,p=ae.length,_=W.length,p<_&&(ee=ae,ae=W,W=ee,u=p,p=_,_=u),u=p+_,ee=[];u--;ee.push(0));for(Y=ln,ne=qi,u=_;--u>=0;){for(x=0,v=W[u]%ne,N=W[u]/ne|0,g=p,h=u+g;h>u;)S=ae[--g]%ne,O=ae[g]/ne|0,b=N*S+O*v,S=v*S+b%ne*ne+ee[h]+x,x=(S/Y|0)+(b/ne|0)+N*O,ee[h--]=S%Y;ee[h]=x}return x?++E:ee.splice(0,1),K(w,ee,E)},i.negated=function(){var w=new C(this);return w.s=-w.s||null,w},i.plus=function(w,T){var x,E=this,u=E.s;if(w=new C(w,T),T=w.s,!u||!T)return new C(NaN);if(u!=T)return w.s=-T,E.minus(w);var h=E.e/Me,g=w.e/Me,b=E.c,p=w.c;if(!h||!g){if(!b||!p)return new C(u/0);if(!b[0]||!p[0])return p[0]?w:new C(b[0]?E:u*0)}if(h=en(h),g=en(g),b=b.slice(),u=h-g){for(u>0?(g=h,x=p):(u=-u,x=b),x.reverse();u--;x.push(0));x.reverse()}for(u=b.length,T=p.length,u-T<0&&(x=p,p=b,b=x,T=u),u=0;T;)u=(b[--T]=b[T]+p[T]+u)/ln|0,b[T]=ln===b[T]?0:b[T]%ln;return u&&(b=[u].concat(b),++g),K(w,b,g)},i.precision=i.sd=function(w,T){var x,E,u,h=this;if(w!=null&&w!==!!w)return At(w,1,Yt),T==null?T=a:At(T,0,8),j(new C(h),w,T);if(!(x=h.c))return null;if(u=x.length-1,E=u*Me+1,u=x[u]){for(;u%10==0;u/=10,E--);for(u=x[0];u>=10;u/=10,E++);}return w&&h.e+1>E&&(E=h.e+1),E},i.shiftedBy=function(w){return At(w,-kl,kl),this.times("1e"+w)},i.squareRoot=i.sqrt=function(){var w,T,x,E,u,h=this,g=h.c,b=h.s,p=h.e,S=o+4,O=new C("0.5");if(b!==1||!g||!g[0])return new C(!b||b<0&&(!g||g[0])?NaN:g?h:1/0);if(b=Math.sqrt(+y(h)),b==0||b==1/0?(T=Zr(g),(T.length+p)%2==0&&(T+="0"),b=Math.sqrt(+T),p=en((p+1)/2)-(p<0||p%2),b==1/0?T="5e"+p:(T=b.toExponential(),T=T.slice(0,T.indexOf("e")+1)+p),x=new C(T)):x=new C(b+""),x.c[0]){for(p=x.e,b=p+S,b<3&&(b=0);;)if(u=x,x=O.times(u.plus(e(h,u,S,1))),Zr(u.c).slice(0,b)===(T=Zr(x.c)).slice(0,b))if(x.e<p&&--b,T=T.slice(b-3,b+1),T=="9999"||!E&&T=="4999"){if(!E&&(j(u,u.e+o+2,0),u.times(u).eq(h))){x=u;break}S+=4,b+=4,E=1}else{(!+T||!+T.slice(1)&&T.charAt(0)=="5")&&(j(x,x.e+o+2,1),w=!x.times(x).eq(h));break}}return j(x,x.e+o+1,a,w)},i.toExponential=function(w,T){return w!=null&&(At(w,0,Yt),w++),q(this,w,T,1)},i.toFixed=function(w,T){return w!=null&&(At(w,0,Yt),w=w+this.e+1),q(this,w,T)},i.toFormat=function(w,T,x){var E,u=this;if(x==null)w!=null&&T&&typeof T=="object"?(x=T,T=null):w&&typeof w=="object"?(x=w,w=T=null):x=H;else if(typeof x!="object")throw Error(Pr+"Argument not an object: "+x);if(E=u.toFixed(w,T),u.c){var h,g=E.split("."),b=+x.groupSize,p=+x.secondaryGroupSize,S=x.groupSeparator||"",O=g[0],_=g[1],v=u.s<0,N=v?O.slice(1):O,ee=N.length;if(p&&(h=b,b=p,p=h,ee-=h),b>0&&ee>0){for(h=ee%b||b,O=N.substr(0,h);h<ee;h+=b)O+=S+N.substr(h,b);p>0&&(O+=S+N.slice(h)),v&&(O="-"+O)}E=_?O+(x.decimalSeparator||"")+((p=+x.fractionGroupSize)?_.replace(new RegExp("\\d{"+p+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):_):O}return(x.prefix||"")+E+(x.suffix||"")},i.toFraction=function(w){var T,x,E,u,h,g,b,p,S,O,_,v,N=this,ee=N.c;if(w!=null&&(b=new C(w),!b.isInteger()&&(b.c||b.s!==1)||b.lt(s)))throw Error(Pr+"Argument "+(b.isInteger()?"out of range: ":"not an integer: ")+y(b));if(!ee)return new C(N);for(T=new C(s),S=x=new C(s),E=p=new C(s),v=Zr(ee),h=T.e=v.length-N.e-1,T.c[0]=Dl[(g=h%Me)<0?Me+g:g],w=!w||b.comparedTo(T)>0?h>0?T:S:b,g=d,d=1/0,b=new C(v),p.c[0]=0;O=e(b,T,0,1),u=x.plus(O.times(E)),u.comparedTo(w)!=1;)x=E,E=u,S=p.plus(O.times(u=S)),p=u,T=b.minus(O.times(u=T)),b=u;return u=e(w.minus(x),E,0,1),p=p.plus(u.times(S)),x=x.plus(u.times(E)),p.s=S.s=N.s,h=h*2,_=e(S,E,h,a).minus(N).abs().comparedTo(e(p,x,h,a).minus(N).abs())<1?[S,E]:[p,x],d=g,_},i.toNumber=function(){return+y(this)},i.toPrecision=function(w,T){return w!=null&&At(w,1,Yt),q(this,w,T,2)},i.toString=function(w){var T,x=this,E=x.s,u=x.e;return u===null?E?(T="Infinity",E<0&&(T="-"+T)):T="NaN":(w==null?T=u<=c||u>=l?Lc(Zr(x.c),u):hi(Zr(x.c),u,"0"):w===10&&V?(x=j(new C(x),o+u+1,a),T=hi(Zr(x.c),x.e,"0")):(At(w,2,G.length,"Base"),T=r(hi(Zr(x.c),u,"0"),10,w,E,!0)),E<0&&x.c[0]&&(T="-"+T)),T},i.valueOf=i.toJSON=function(){return y(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&C.set(t),C}function en(t){var e=t|0;return t>0||t===e?e:e-1}function Zr(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=Me-e.length;r--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function lo(t,e){var r,n,i=t.c,s=e.c,o=t.s,a=e.s,c=t.e,l=e.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==l,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>l^r?1:-1;for(a=(c=i.length)<(l=s.length)?c:l,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==l?0:c>l^r?1:-1}function At(t,e,r,n){if(t<e||t>r||t!==On(t))throw Error(Pr+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Mc(t){var e=t.c.length-1;return en(t.e/Me)==e&&t.c[e]%2!=0}function Lc(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function hi(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(n=t.length,++e>n){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var be=Lb(),Hr={},Qs={},du={},hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.BrowserRandomSource=void 0;const Pp=65536;class m_{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Pp)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Pp)));return r}}hu.BrowserRandomSource=m_;function y_(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pu={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});function E_(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Br.wipe=E_;const __={},w_=Object.freeze(Object.defineProperty({__proto__:null,default:__},Symbol.toStringTag,{value:"Module"})),lc=Ty(w_);Object.defineProperty(pu,"__esModule",{value:!0});pu.NodeRandomSource=void 0;const A_=Br;class x_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof y_<"u"){const e=lc;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,A_.wipe)(r),n}}pu.NodeRandomSource=x_;Object.defineProperty(du,"__esModule",{value:!0});du.SystemRandomSource=void 0;const S_=hu,R_=pu;class I_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new S_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new R_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}du.SystemRandomSource=I_;var De={},Cb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var l=a>>>16&65535,f=a&65535,d=c>>>16&65535,I=c&65535;return f*I+(l*I+f*d<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(Cb);Object.defineProperty(De,"__esModule",{value:!0});var Bb=Cb;function O_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}De.readInt16BE=O_;function T_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}De.readUint16BE=T_;function P_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}De.readInt16LE=P_;function N_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}De.readUint16LE=N_;function kb(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}De.writeUint16BE=kb;De.writeInt16BE=kb;function Db(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}De.writeUint16LE=Db;De.writeInt16LE=Db;function Yd(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}De.readInt32BE=Yd;function Qd(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}De.readUint32BE=Qd;function Zd(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}De.readInt32LE=Zd;function eh(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}De.readUint32LE=eh;function If(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}De.writeUint32BE=If;De.writeInt32BE=If;function Of(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}De.writeUint32LE=Of;De.writeInt32LE=Of;function M_(t,e){e===void 0&&(e=0);var r=Yd(t,e),n=Yd(t,e+4);return r*4294967296+n-(n>>31)*4294967296}De.readInt64BE=M_;function L_(t,e){e===void 0&&(e=0);var r=Qd(t,e),n=Qd(t,e+4);return r*4294967296+n}De.readUint64BE=L_;function C_(t,e){e===void 0&&(e=0);var r=Zd(t,e),n=Zd(t,e+4);return n*4294967296+r-(r>>31)*4294967296}De.readInt64LE=C_;function B_(t,e){e===void 0&&(e=0);var r=eh(t,e),n=eh(t,e+4);return n*4294967296+r}De.readUint64LE=B_;function Ub(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),If(t/4294967296>>>0,e,r),If(t>>>0,e,r+4),e}De.writeUint64BE=Ub;De.writeInt64BE=Ub;function Kb(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Of(t>>>0,e,r),Of(t/4294967296>>>0,e,r+4),e}De.writeUint64LE=Kb;De.writeInt64LE=Kb;function k_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}De.readUintBE=k_;function D_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}De.readUintLE=D_;function U_(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Bb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}De.writeUintBE=U_;function K_(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Bb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}De.writeUintLE=K_;function H_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}De.readFloat32BE=H_;function F_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}De.readFloat32LE=F_;function j_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}De.readFloat64BE=j_;function G_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}De.readFloat64LE=G_;function V_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}De.writeFloat32BE=V_;function q_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}De.writeFloat32LE=q_;function $_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}De.writeFloat64BE=$_;function z_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}De.writeFloat64LE=z_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=du,r=De,n=Br;t.defaultRandomSource=new e.SystemRandomSource;function i(l,f=t.defaultRandomSource){return f.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const f=i(4,l),d=(0,r.readUint32LE)(f);return(0,n.wipe)(f),d}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(l,f=o,d=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let I="";const P=f.length,L=256-256%P;for(;l>0;){const H=i(Math.ceil(l*256/L),d);for(let G=0;G<H.length&&l>0;G++){const V=H[G];V<L&&(I+=f.charAt(V%P),l--)}(0,n.wipe)(H)}return I}t.randomString=a;function c(l,f=o,d=t.defaultRandomSource){const I=Math.ceil(l/(Math.log(f.length)/Math.LN2));return a(I,f,d)}t.randomStringForEntropy=c})(Qs);var Hb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=Br;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=c[f++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=c[f++],l--;return this},a.prototype.finish=function(c){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,d=l/536870912|0,I=l<<3,P=l%128<112?128:256;this._buffer[f]=128;for(var L=f+1;L<P-8;L++)this._buffer[L]=0;e.writeUint32BE(d,this._buffer,P-8),e.writeUint32BE(I,this._buffer,P-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,P),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)e.writeUint32BE(this._stateHi[L],c,L*8),e.writeUint32BE(this._stateLo[L],c,L*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,l,f,d,I,P){for(var L=l[0],H=l[1],G=l[2],V=l[3],C=l[4],q=l[5],U=l[6],K=l[7],j=f[0],y=f[1],w=f[2],T=f[3],x=f[4],E=f[5],u=f[6],h=f[7],g,b,p,S,O,_,v,N;P>=128;){for(var ee=0;ee<16;ee++){var Y=8*ee+I;a[ee]=e.readUint32BE(d,Y),c[ee]=e.readUint32BE(d,Y+4)}for(var ee=0;ee<80;ee++){var ne=L,se=H,ae=G,W=V,F=C,k=q,m=U,B=K,X=j,Z=y,ce=w,ie=T,de=x,ye=E,ue=u,Ee=h;if(g=K,b=h,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=(C>>>14|x<<32-14)^(C>>>18|x<<32-18)^(x>>>41-32|C<<32-(41-32)),b=(x>>>14|C<<32-14)^(x>>>18|C<<32-18)^(C>>>41-32|x<<32-(41-32)),O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,g=C&q^~C&U,b=x&E^~x&u,O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,g=i[ee*2],b=i[ee*2+1],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,g=a[ee%16],b=c[ee%16],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,p=v&65535|N<<16,S=O&65535|_<<16,g=p,b=S,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=(L>>>28|j<<32-28)^(j>>>34-32|L<<32-(34-32))^(j>>>39-32|L<<32-(39-32)),b=(j>>>28|L<<32-28)^(L>>>34-32|j<<32-(34-32))^(L>>>39-32|j<<32-(39-32)),O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,g=L&H^L&G^H&G,b=j&y^j&w^y&w,O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,B=v&65535|N<<16,Ee=O&65535|_<<16,g=W,b=ie,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=p,b=S,O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,W=v&65535|N<<16,ie=O&65535|_<<16,H=ne,G=se,V=ae,C=W,q=F,U=k,K=m,L=B,y=X,w=Z,T=ce,x=ie,E=de,u=ye,h=ue,j=Ee,ee%16===15)for(var Y=0;Y<16;Y++)g=a[Y],b=c[Y],O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=a[(Y+9)%16],b=c[(Y+9)%16],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,p=a[(Y+1)%16],S=c[(Y+1)%16],g=(p>>>1|S<<32-1)^(p>>>8|S<<32-8)^p>>>7,b=(S>>>1|p<<32-1)^(S>>>8|p<<32-8)^(S>>>7|p<<32-7),O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,p=a[(Y+14)%16],S=c[(Y+14)%16],g=(p>>>19|S<<32-19)^(S>>>61-32|p<<32-(61-32))^p>>>6,b=(S>>>19|p<<32-19)^(p>>>61-32|S<<32-(61-32))^(S>>>6|p<<32-6),O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,a[Y]=v&65535|N<<16,c[Y]=O&65535|_<<16}g=L,b=j,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[0],b=f[0],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[0]=L=v&65535|N<<16,f[0]=j=O&65535|_<<16,g=H,b=y,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[1],b=f[1],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[1]=H=v&65535|N<<16,f[1]=y=O&65535|_<<16,g=G,b=w,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[2],b=f[2],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[2]=G=v&65535|N<<16,f[2]=w=O&65535|_<<16,g=V,b=T,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[3],b=f[3],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[3]=V=v&65535|N<<16,f[3]=T=O&65535|_<<16,g=C,b=x,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[4],b=f[4],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[4]=C=v&65535|N<<16,f[4]=x=O&65535|_<<16,g=q,b=E,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[5],b=f[5],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[5]=q=v&65535|N<<16,f[5]=E=O&65535|_<<16,g=U,b=u,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[6],b=f[6],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[6]=U=v&65535|N<<16,f[6]=u=O&65535|_<<16,g=K,b=h,O=b&65535,_=b>>>16,v=g&65535,N=g>>>16,g=l[7],b=f[7],O+=b&65535,_+=b>>>16,v+=g&65535,N+=g>>>16,_+=O>>>16,v+=_>>>16,N+=v>>>16,l[7]=K=v&65535|N<<16,f[7]=h=O&65535|_<<16,I+=128,P-=128}return I}function o(a){var c=new n;c.update(a);var l=c.digest();return c.clean(),l}t.hash=o})(Hb);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Qs,r=Hb,n=Br;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(W){const F=new Float64Array(16);if(W)for(let k=0;k<W.length;k++)F[k]=W[k];return F}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function P(W,F){for(let k=0;k<16;k++)W[k]=F[k]|0}function L(W){let F=1;for(let k=0;k<16;k++){let m=W[k]+F+65535;F=Math.floor(m/65536),W[k]=m-F*65536}W[0]+=F-1+37*(F-1)}function H(W,F,k){const m=~(k-1);for(let B=0;B<16;B++){const X=m&(W[B]^F[B]);W[B]^=X,F[B]^=X}}function G(W,F){const k=i(),m=i();for(let B=0;B<16;B++)m[B]=F[B];L(m),L(m),L(m);for(let B=0;B<2;B++){k[0]=m[0]-65517;for(let Z=1;Z<15;Z++)k[Z]=m[Z]-65535-(k[Z-1]>>16&1),k[Z-1]&=65535;k[15]=m[15]-32767-(k[14]>>16&1);const X=k[15]>>16&1;k[14]&=65535,H(m,k,1-X)}for(let B=0;B<16;B++)W[2*B]=m[B]&255,W[2*B+1]=m[B]>>8}function V(W,F){let k=0;for(let m=0;m<32;m++)k|=W[m]^F[m];return(1&k-1>>>8)-1}function C(W,F){const k=new Uint8Array(32),m=new Uint8Array(32);return G(k,W),G(m,F),V(k,m)}function q(W){const F=new Uint8Array(32);return G(F,W),F[0]&1}function U(W,F){for(let k=0;k<16;k++)W[k]=F[2*k]+(F[2*k+1]<<8);W[15]&=32767}function K(W,F,k){for(let m=0;m<16;m++)W[m]=F[m]+k[m]}function j(W,F,k){for(let m=0;m<16;m++)W[m]=F[m]-k[m]}function y(W,F,k){let m,B,X=0,Z=0,ce=0,ie=0,de=0,ye=0,ue=0,Ee=0,xe=0,me=0,ge=0,Te=0,ve=0,he=0,Ne=0,M=0,A=0,R=0,D=0,$=0,Q=0,te=0,le=0,Ae=0,we=0,Se=0,Fe=0,gt=0,mt=0,oo=0,wt=0,je=k[0],jt=k[1],Ge=k[2],Ve=k[3],Gt=k[4],qe=k[5],$e=k[6],Vt=k[7],ze=k[8],We=k[9],qt=k[10],Xe=k[11],Je=k[12],$t=k[13],Ye=k[14],Qe=k[15];m=F[0],X+=m*je,Z+=m*jt,ce+=m*Ge,ie+=m*Ve,de+=m*Gt,ye+=m*qe,ue+=m*$e,Ee+=m*Vt,xe+=m*ze,me+=m*We,ge+=m*qt,Te+=m*Xe,ve+=m*Je,he+=m*$t,Ne+=m*Ye,M+=m*Qe,m=F[1],Z+=m*je,ce+=m*jt,ie+=m*Ge,de+=m*Ve,ye+=m*Gt,ue+=m*qe,Ee+=m*$e,xe+=m*Vt,me+=m*ze,ge+=m*We,Te+=m*qt,ve+=m*Xe,he+=m*Je,Ne+=m*$t,M+=m*Ye,A+=m*Qe,m=F[2],ce+=m*je,ie+=m*jt,de+=m*Ge,ye+=m*Ve,ue+=m*Gt,Ee+=m*qe,xe+=m*$e,me+=m*Vt,ge+=m*ze,Te+=m*We,ve+=m*qt,he+=m*Xe,Ne+=m*Je,M+=m*$t,A+=m*Ye,R+=m*Qe,m=F[3],ie+=m*je,de+=m*jt,ye+=m*Ge,ue+=m*Ve,Ee+=m*Gt,xe+=m*qe,me+=m*$e,ge+=m*Vt,Te+=m*ze,ve+=m*We,he+=m*qt,Ne+=m*Xe,M+=m*Je,A+=m*$t,R+=m*Ye,D+=m*Qe,m=F[4],de+=m*je,ye+=m*jt,ue+=m*Ge,Ee+=m*Ve,xe+=m*Gt,me+=m*qe,ge+=m*$e,Te+=m*Vt,ve+=m*ze,he+=m*We,Ne+=m*qt,M+=m*Xe,A+=m*Je,R+=m*$t,D+=m*Ye,$+=m*Qe,m=F[5],ye+=m*je,ue+=m*jt,Ee+=m*Ge,xe+=m*Ve,me+=m*Gt,ge+=m*qe,Te+=m*$e,ve+=m*Vt,he+=m*ze,Ne+=m*We,M+=m*qt,A+=m*Xe,R+=m*Je,D+=m*$t,$+=m*Ye,Q+=m*Qe,m=F[6],ue+=m*je,Ee+=m*jt,xe+=m*Ge,me+=m*Ve,ge+=m*Gt,Te+=m*qe,ve+=m*$e,he+=m*Vt,Ne+=m*ze,M+=m*We,A+=m*qt,R+=m*Xe,D+=m*Je,$+=m*$t,Q+=m*Ye,te+=m*Qe,m=F[7],Ee+=m*je,xe+=m*jt,me+=m*Ge,ge+=m*Ve,Te+=m*Gt,ve+=m*qe,he+=m*$e,Ne+=m*Vt,M+=m*ze,A+=m*We,R+=m*qt,D+=m*Xe,$+=m*Je,Q+=m*$t,te+=m*Ye,le+=m*Qe,m=F[8],xe+=m*je,me+=m*jt,ge+=m*Ge,Te+=m*Ve,ve+=m*Gt,he+=m*qe,Ne+=m*$e,M+=m*Vt,A+=m*ze,R+=m*We,D+=m*qt,$+=m*Xe,Q+=m*Je,te+=m*$t,le+=m*Ye,Ae+=m*Qe,m=F[9],me+=m*je,ge+=m*jt,Te+=m*Ge,ve+=m*Ve,he+=m*Gt,Ne+=m*qe,M+=m*$e,A+=m*Vt,R+=m*ze,D+=m*We,$+=m*qt,Q+=m*Xe,te+=m*Je,le+=m*$t,Ae+=m*Ye,we+=m*Qe,m=F[10],ge+=m*je,Te+=m*jt,ve+=m*Ge,he+=m*Ve,Ne+=m*Gt,M+=m*qe,A+=m*$e,R+=m*Vt,D+=m*ze,$+=m*We,Q+=m*qt,te+=m*Xe,le+=m*Je,Ae+=m*$t,we+=m*Ye,Se+=m*Qe,m=F[11],Te+=m*je,ve+=m*jt,he+=m*Ge,Ne+=m*Ve,M+=m*Gt,A+=m*qe,R+=m*$e,D+=m*Vt,$+=m*ze,Q+=m*We,te+=m*qt,le+=m*Xe,Ae+=m*Je,we+=m*$t,Se+=m*Ye,Fe+=m*Qe,m=F[12],ve+=m*je,he+=m*jt,Ne+=m*Ge,M+=m*Ve,A+=m*Gt,R+=m*qe,D+=m*$e,$+=m*Vt,Q+=m*ze,te+=m*We,le+=m*qt,Ae+=m*Xe,we+=m*Je,Se+=m*$t,Fe+=m*Ye,gt+=m*Qe,m=F[13],he+=m*je,Ne+=m*jt,M+=m*Ge,A+=m*Ve,R+=m*Gt,D+=m*qe,$+=m*$e,Q+=m*Vt,te+=m*ze,le+=m*We,Ae+=m*qt,we+=m*Xe,Se+=m*Je,Fe+=m*$t,gt+=m*Ye,mt+=m*Qe,m=F[14],Ne+=m*je,M+=m*jt,A+=m*Ge,R+=m*Ve,D+=m*Gt,$+=m*qe,Q+=m*$e,te+=m*Vt,le+=m*ze,Ae+=m*We,we+=m*qt,Se+=m*Xe,Fe+=m*Je,gt+=m*$t,mt+=m*Ye,oo+=m*Qe,m=F[15],M+=m*je,A+=m*jt,R+=m*Ge,D+=m*Ve,$+=m*Gt,Q+=m*qe,te+=m*$e,le+=m*Vt,Ae+=m*ze,we+=m*We,Se+=m*qt,Fe+=m*Xe,gt+=m*Je,mt+=m*$t,oo+=m*Ye,wt+=m*Qe,X+=38*A,Z+=38*R,ce+=38*D,ie+=38*$,de+=38*Q,ye+=38*te,ue+=38*le,Ee+=38*Ae,xe+=38*we,me+=38*Se,ge+=38*Fe,Te+=38*gt,ve+=38*mt,he+=38*oo,Ne+=38*wt,B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=ce+B+65535,B=Math.floor(m/65536),ce=m-B*65536,m=ie+B+65535,B=Math.floor(m/65536),ie=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=ue+B+65535,B=Math.floor(m/65536),ue=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=xe+B+65535,B=Math.floor(m/65536),xe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=ge+B+65535,B=Math.floor(m/65536),ge=m-B*65536,m=Te+B+65535,B=Math.floor(m/65536),Te=m-B*65536,m=ve+B+65535,B=Math.floor(m/65536),ve=m-B*65536,m=he+B+65535,B=Math.floor(m/65536),he=m-B*65536,m=Ne+B+65535,B=Math.floor(m/65536),Ne=m-B*65536,m=M+B+65535,B=Math.floor(m/65536),M=m-B*65536,X+=B-1+37*(B-1),B=1,m=X+B+65535,B=Math.floor(m/65536),X=m-B*65536,m=Z+B+65535,B=Math.floor(m/65536),Z=m-B*65536,m=ce+B+65535,B=Math.floor(m/65536),ce=m-B*65536,m=ie+B+65535,B=Math.floor(m/65536),ie=m-B*65536,m=de+B+65535,B=Math.floor(m/65536),de=m-B*65536,m=ye+B+65535,B=Math.floor(m/65536),ye=m-B*65536,m=ue+B+65535,B=Math.floor(m/65536),ue=m-B*65536,m=Ee+B+65535,B=Math.floor(m/65536),Ee=m-B*65536,m=xe+B+65535,B=Math.floor(m/65536),xe=m-B*65536,m=me+B+65535,B=Math.floor(m/65536),me=m-B*65536,m=ge+B+65535,B=Math.floor(m/65536),ge=m-B*65536,m=Te+B+65535,B=Math.floor(m/65536),Te=m-B*65536,m=ve+B+65535,B=Math.floor(m/65536),ve=m-B*65536,m=he+B+65535,B=Math.floor(m/65536),he=m-B*65536,m=Ne+B+65535,B=Math.floor(m/65536),Ne=m-B*65536,m=M+B+65535,B=Math.floor(m/65536),M=m-B*65536,X+=B-1+37*(B-1),W[0]=X,W[1]=Z,W[2]=ce,W[3]=ie,W[4]=de,W[5]=ye,W[6]=ue,W[7]=Ee,W[8]=xe,W[9]=me,W[10]=ge,W[11]=Te,W[12]=ve,W[13]=he,W[14]=Ne,W[15]=M}function w(W,F){y(W,F,F)}function T(W,F){const k=i();let m;for(m=0;m<16;m++)k[m]=F[m];for(m=253;m>=0;m--)w(k,k),m!==2&&m!==4&&y(k,k,F);for(m=0;m<16;m++)W[m]=k[m]}function x(W,F){const k=i();let m;for(m=0;m<16;m++)k[m]=F[m];for(m=250;m>=0;m--)w(k,k),m!==1&&y(k,k,F);for(m=0;m<16;m++)W[m]=k[m]}function E(W,F){const k=i(),m=i(),B=i(),X=i(),Z=i(),ce=i(),ie=i(),de=i(),ye=i();j(k,W[1],W[0]),j(ye,F[1],F[0]),y(k,k,ye),K(m,W[0],W[1]),K(ye,F[0],F[1]),y(m,m,ye),y(B,W[3],F[3]),y(B,B,l),y(X,W[2],F[2]),K(X,X,X),j(Z,m,k),j(ce,X,B),K(ie,X,B),K(de,m,k),y(W[0],Z,ce),y(W[1],de,ie),y(W[2],ie,ce),y(W[3],Z,de)}function u(W,F,k){for(let m=0;m<4;m++)H(W[m],F[m],k)}function h(W,F){const k=i(),m=i(),B=i();T(B,F[2]),y(k,F[0],B),y(m,F[1],B),G(W,m),W[31]^=q(k)<<7}function g(W,F,k){P(W[0],o),P(W[1],a),P(W[2],a),P(W[3],o);for(let m=255;m>=0;--m){const B=k[m/8|0]>>(m&7)&1;u(W,F,B),E(F,W),E(W,W),u(W,F,B)}}function b(W,F){const k=[i(),i(),i(),i()];P(k[0],f),P(k[1],d),P(k[2],a),y(k[3],f,d),g(W,k,F)}function p(W){if(W.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const F=(0,r.hash)(W);F[0]&=248,F[31]&=127,F[31]|=64;const k=new Uint8Array(32),m=[i(),i(),i(),i()];b(m,F),h(k,m);const B=new Uint8Array(64);return B.set(W),B.set(k,32),{publicKey:k,secretKey:B}}t.generateKeyPairFromSeed=p;function S(W){const F=(0,e.randomBytes)(32,W),k=p(F);return(0,n.wipe)(F),k}t.generateKeyPair=S;function O(W){if(W.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(W.subarray(32))}t.extractPublicKeyFromSecretKey=O;const _=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function v(W,F){let k,m,B,X;for(m=63;m>=32;--m){for(k=0,B=m-32,X=m-12;B<X;++B)F[B]+=k-16*F[m]*_[B-(m-32)],k=Math.floor((F[B]+128)/256),F[B]-=k*256;F[B]+=k,F[m]=0}for(k=0,B=0;B<32;B++)F[B]+=k-(F[31]>>4)*_[B],k=F[B]>>8,F[B]&=255;for(B=0;B<32;B++)F[B]-=k*_[B];for(m=0;m<32;m++)F[m+1]+=F[m]>>8,W[m]=F[m]&255}function N(W){const F=new Float64Array(64);for(let k=0;k<64;k++)F[k]=W[k];for(let k=0;k<64;k++)W[k]=0;v(W,F)}function ee(W,F){const k=new Float64Array(64),m=[i(),i(),i(),i()],B=(0,r.hash)(W.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const X=new Uint8Array(64);X.set(B.subarray(32),32);const Z=new r.SHA512;Z.update(X.subarray(32)),Z.update(F);const ce=Z.digest();Z.clean(),N(ce),b(m,ce),h(X,m),Z.reset(),Z.update(X.subarray(0,32)),Z.update(W.subarray(32)),Z.update(F);const ie=Z.digest();N(ie);for(let de=0;de<32;de++)k[de]=ce[de];for(let de=0;de<32;de++)for(let ye=0;ye<32;ye++)k[de+ye]+=ie[de]*B[ye];return v(X.subarray(32),k),X}t.sign=ee;function Y(W,F){const k=i(),m=i(),B=i(),X=i(),Z=i(),ce=i(),ie=i();return P(W[2],a),U(W[1],F),w(B,W[1]),y(X,B,c),j(B,B,W[2]),K(X,W[2],X),w(Z,X),w(ce,Z),y(ie,ce,Z),y(k,ie,B),y(k,k,X),x(k,k),y(k,k,B),y(k,k,X),y(k,k,X),y(W[0],k,X),w(m,W[0]),y(m,m,X),C(m,B)&&y(W[0],W[0],I),w(m,W[0]),y(m,m,X),C(m,B)?-1:(q(W[0])===F[31]>>7&&j(W[0],o,W[0]),y(W[3],W[0],W[1]),0)}function ne(W,F,k){const m=new Uint8Array(32),B=[i(),i(),i(),i()],X=[i(),i(),i(),i()];if(k.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Y(X,W))return!1;const Z=new r.SHA512;Z.update(k.subarray(0,32)),Z.update(W),Z.update(F);const ce=Z.digest();return N(ce),g(B,X,ce),b(X,k.subarray(32)),E(B,X),h(m,B),!V(k,m)}t.verify=ne;function se(W){let F=[i(),i(),i(),i()];if(Y(F,W))throw new Error("Ed25519: invalid public key");let k=i(),m=i(),B=F[1];K(k,a,B),j(m,a,B),T(m,m),y(k,k,m);let X=new Uint8Array(32);return G(X,k),X}t.convertPublicKeyToX25519=se;function ae(W){const F=(0,r.hash)(W.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const k=new Uint8Array(F.subarray(0,32));return(0,n.wipe)(F),k}t.convertSecretKeyToX25519=ae})(Hr);var on={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=De,r=Br;t.BLOCK_SIZE=128,t.DIGEST_LENGTH=64,t.KEY_LENGTH=64,t.PERSONALIZATION_LENGTH=16,t.SALT_LENGTH=16,t.MAX_LEAF_SIZE=Math.pow(2,32)-1,t.MAX_FANOUT=255,t.MAX_MAX_DEPTH=255;var n=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),i=[[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6],[22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8],[14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16],[18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26],[4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18],[24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22],[26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20],[12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10],[20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0],[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30],[28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]],s=function(){function a(c,l){if(c===void 0&&(c=64),this.digestLength=c,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(n),this._buffer=new Uint8Array(t.BLOCK_SIZE),this._bufferLength=0,this._ctr=new Uint32Array(4),this._flag=new Uint32Array(4),this._lastNode=!1,this._finished=!1,this._vtmp=new Uint32Array(32),this._mtmp=new Uint32Array(32),c<1||c>t.DIGEST_LENGTH)throw new Error("blake2b: wrong digest length");l&&this.validateConfig(l);var f=0;l&&l.key&&(f=l.key.length);var d=1,I=1;l&&l.tree&&(d=l.tree.fanout,I=l.tree.maxDepth),this._state[0]^=c|f<<8|d<<16|I<<24,l&&l.tree&&(this._state[1]^=l.tree.leafSize,this._state[2]^=l.tree.nodeOffsetLowBits,this._state[3]^=l.tree.nodeOffsetHighBits,this._state[4]^=l.tree.nodeDepth|l.tree.innerDigestLength<<8,this._lastNode=l.tree.lastNode),l&&l.salt&&(this._state[8]^=e.readUint32LE(l.salt,0),this._state[9]^=e.readUint32LE(l.salt,4),this._state[10]^=e.readUint32LE(l.salt,8),this._state[11]^=e.readUint32LE(l.salt,12)),l&&l.personalization&&(this._state[12]^=e.readUint32LE(l.personalization,0),this._state[13]^=e.readUint32LE(l.personalization,4),this._state[14]^=e.readUint32LE(l.personalization,8),this._state[15]^=e.readUint32LE(l.personalization,12)),this._initialState=new Uint32Array(this._state),l&&l.key&&f>0&&(this._paddedKey=new Uint8Array(t.BLOCK_SIZE),this._paddedKey.set(l.key),this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE)}return a.prototype.reset=function(){return this._state.set(this._initialState),this._paddedKey?(this._buffer.set(this._paddedKey),this._bufferLength=t.BLOCK_SIZE):this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._finished=!1,this},a.prototype.validateConfig=function(c){if(c.key&&c.key.length>t.KEY_LENGTH)throw new Error("blake2b: wrong key length");if(c.salt&&c.salt.length!==t.SALT_LENGTH)throw new Error("blake2b: wrong salt length");if(c.personalization&&c.personalization.length!==t.PERSONALIZATION_LENGTH)throw new Error("blake2b: wrong personalization length");if(c.tree){if(c.tree.fanout<0||c.tree.fanout>t.MAX_FANOUT)throw new Error("blake2b: wrong tree fanout");if(c.tree.maxDepth<0||c.tree.maxDepth>t.MAX_MAX_DEPTH)throw new Error("blake2b: wrong tree depth");if(c.tree.leafSize<0||c.tree.leafSize>t.MAX_LEAF_SIZE)throw new Error("blake2b: wrong leaf size");if(c.tree.innerDigestLength<0||c.tree.innerDigestLength>t.DIGEST_LENGTH)throw new Error("blake2b: wrong tree inner digest length")}},a.prototype.update=function(c,l){if(l===void 0&&(l=c.length),this._finished)throw new Error("blake2b: can't update because hash was finished.");var f=t.BLOCK_SIZE-this._bufferLength,d=0;if(l===0)return this;if(l>f){for(var I=0;I<f;I++)this._buffer[this._bufferLength+I]=c[d+I];this._processBlock(t.BLOCK_SIZE),d+=f,l-=f,this._bufferLength=0}for(;l>t.BLOCK_SIZE;){for(var I=0;I<t.BLOCK_SIZE;I++)this._buffer[I]=c[d+I];this._processBlock(t.BLOCK_SIZE),d+=t.BLOCK_SIZE,l-=t.BLOCK_SIZE,this._bufferLength=0}for(var I=0;I<l;I++)this._buffer[this._bufferLength+I]=c[d+I];return this._bufferLength+=l,this},a.prototype.finish=function(c){if(!this._finished){for(var l=this._bufferLength;l<t.BLOCK_SIZE;l++)this._buffer[l]=0;this._flag[0]=4294967295,this._flag[1]=4294967295,this._lastNode&&(this._flag[2]=4294967295,this._flag[3]=4294967295),this._processBlock(this._bufferLength),this._finished=!0}for(var f=this._buffer.subarray(0,64),l=0;l<16;l++)e.writeUint32LE(this._state[l],f,l*4);return c.set(f.subarray(0,c.length)),this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.clean=function(){r.wipe(this._vtmp),r.wipe(this._mtmp),r.wipe(this._state),r.wipe(this._buffer),r.wipe(this._initialState),this._paddedKey&&r.wipe(this._paddedKey),this._bufferLength=0,r.wipe(this._ctr),r.wipe(this._flag),this._lastNode=!1,this._finished=!1},a.prototype.saveState=function(){if(this._finished)throw new Error("blake2b: cannot save finished state");return{state:new Uint32Array(this._state),buffer:new Uint8Array(this._buffer),bufferLength:this._bufferLength,ctr:new Uint32Array(this._ctr),flag:new Uint32Array(this._flag),lastNode:this._lastNode,paddedKey:this._paddedKey?new Uint8Array(this._paddedKey):void 0,initialState:new Uint32Array(this._initialState)}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._buffer.set(c.buffer),this._bufferLength=c.bufferLength,this._ctr.set(c.ctr),this._flag.set(c.flag),this._lastNode=c.lastNode,this._paddedKey&&r.wipe(this._paddedKey),this._paddedKey=c.paddedKey?new Uint8Array(c.paddedKey):void 0,this._initialState.set(c.initialState),this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),r.wipe(c.buffer),r.wipe(c.initialState),c.paddedKey&&r.wipe(c.paddedKey),c.bufferLength=0,r.wipe(c.ctr),r.wipe(c.flag),c.lastNode=!1},a.prototype._G=function(c,l,f,d,I,P,L,H,G,V,C,q,U){var K=c[l],j=c[P],y=c[f],w=c[L],T=c[d],x=c[H],E=c[I],u=c[G],h=K&65535,g=K>>>16,b=j&65535,p=j>>>16;h+=y&65535,g+=y>>>16,b+=w&65535,p+=w>>>16,g+=h>>>16,b+=g>>>16,p+=b>>>16,j=b&65535|p<<16,K=h&65535|g<<16,h=K&65535,g=K>>>16,b=j&65535,p=j>>>16,h+=V&65535,g+=V>>>16,b+=C&65535,p+=C>>>16,g+=h>>>16,b+=g>>>16,p+=b>>>16,j=b&65535|p<<16,K=h&65535|g<<16,E^=K,u^=j,h=u,u=E,E=h,h=T&65535,g=T>>>16,b=x&65535,p=x>>>16,h+=E&65535,g+=E>>>16,b+=u&65535,p+=u>>>16,g+=h>>>16,b+=g>>>16,p+=b>>>16,x=b&65535|p<<16,T=h&65535|g<<16,y^=T,w^=x,h=y<<8|w>>>24,y=w<<8|y>>>24,w=h,h=K&65535,g=K>>>16,b=j&65535,p=j>>>16,h+=y&65535,g+=y>>>16,b+=w&65535,p+=w>>>16,g+=h>>>16,b+=g>>>16,p+=b>>>16,j=b&65535|p<<16,K=h&65535|g<<16,h=K&65535,g=K>>>16,b=j&65535,p=j>>>16,h+=q&65535,g+=q>>>16,b+=U&65535,p+=U>>>16,g+=h>>>16,b+=g>>>16,p+=b>>>16,j=b&65535|p<<16,K=h&65535|g<<16,E^=K,u^=j,h=E<<16|u>>>16,E=u<<16|E>>>16,u=h,h=T&65535,g=T>>>16,b=x&65535,p=x>>>16,h+=E&65535,g+=E>>>16,b+=u&65535,p+=u>>>16,g+=h>>>16,b+=g>>>16,p+=b>>>16,x=b&65535|p<<16,T=h&65535|g<<16,y^=T,w^=x,h=w<<1|y>>>31,y=y<<1|w>>>31,w=h,c[l]=K,c[P]=j,c[f]=y,c[L]=w,c[d]=T,c[H]=x,c[I]=E,c[G]=u},a.prototype._incrementCounter=function(c){for(var l=0;l<3;l++){var f=this._ctr[l]+c;if(this._ctr[l]=f>>>0,this._ctr[l]===f)return;c=1}},a.prototype._processBlock=function(c){this._incrementCounter(c);var l=this._vtmp;l.set(this._state),l.set(n,16),l[12*2+0]^=this._ctr[0],l[12*2+1]^=this._ctr[1],l[13*2+0]^=this._ctr[2],l[13*2+1]^=this._ctr[3],l[14*2+0]^=this._flag[0],l[14*2+1]^=this._flag[1],l[15*2+0]^=this._flag[2],l[15*2+1]^=this._flag[3];for(var f=this._mtmp,d=0;d<32;d++)f[d]=e.readUint32LE(this._buffer,d*4);for(var I=0;I<12;I++)this._G(l,0,8,16,24,1,9,17,25,f[i[I][0]],f[i[I][0]+1],f[i[I][1]],f[i[I][1]+1]),this._G(l,2,10,18,26,3,11,19,27,f[i[I][2]],f[i[I][2]+1],f[i[I][3]],f[i[I][3]+1]),this._G(l,4,12,20,28,5,13,21,29,f[i[I][4]],f[i[I][4]+1],f[i[I][5]],f[i[I][5]+1]),this._G(l,6,14,22,30,7,15,23,31,f[i[I][6]],f[i[I][6]+1],f[i[I][7]],f[i[I][7]+1]),this._G(l,0,10,20,30,1,11,21,31,f[i[I][8]],f[i[I][8]+1],f[i[I][9]],f[i[I][9]+1]),this._G(l,2,12,22,24,3,13,23,25,f[i[I][10]],f[i[I][10]+1],f[i[I][11]],f[i[I][11]+1]),this._G(l,4,14,16,26,5,15,17,27,f[i[I][12]],f[i[I][12]+1],f[i[I][13]],f[i[I][13]+1]),this._G(l,6,8,18,28,7,9,19,29,f[i[I][14]],f[i[I][14]+1],f[i[I][15]],f[i[I][15]+1]);for(var d=0;d<16;d++)this._state[d]^=l[d]^l[d+16]},a}();t.BLAKE2b=s;function o(a,c,l){c===void 0&&(c=t.DIGEST_LENGTH);var f=new s(c,l);f.update(a);var d=f.digest();return f.clean(),d}t.hash=o})(on);const W_="Input must be an string, Buffer or Uint8Array";function X_(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(W_);return e}function J_(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Cc(t){return(4294967296+t).toString(16).substring(1)}function Y_(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=Cc(e[i]).toUpperCase(),n+=" ",n+=Cc(e[i+1]).toUpperCase();else if(r===64)n+=Cc(e[i+1]).toUpperCase(),n+=Cc(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function Q_(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),c=new Date().getTime(),l=c-n;n=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Fb={normalizeInput:X_,toHex:J_,debugPrint:Y_,testSpeed:Q_};const uf=Fb;function Bc(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function Np(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function jb(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function $i(t,e,r,n,i,s){const o=La[i],a=La[i+1],c=La[s],l=La[s+1];Bc(Be,t,e),Np(Be,t,o,a);let f=Be[n]^Be[t],d=Be[n+1]^Be[t+1];Be[n]=d,Be[n+1]=f,Bc(Be,r,n),f=Be[e]^Be[r],d=Be[e+1]^Be[r+1],Be[e]=f>>>24^d<<8,Be[e+1]=d>>>24^f<<8,Bc(Be,t,e),Np(Be,t,c,l),f=Be[n]^Be[t],d=Be[n+1]^Be[t+1],Be[n]=f>>>16^d<<16,Be[n+1]=d>>>16^f<<16,Bc(Be,r,n),f=Be[e]^Be[r],d=Be[e+1]^Be[r+1],Be[e]=d>>>31^f<<1,Be[e+1]=f>>>31^d<<1}const Gb=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Z_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],sr=new Uint8Array(Z_.map(function(t){return t*2})),Be=new Uint32Array(32),La=new Uint32Array(32);function Vb(t,e){let r=0;for(r=0;r<16;r++)Be[r]=t.h[r],Be[r+16]=Gb[r];for(Be[24]=Be[24]^t.t,Be[25]=Be[25]^t.t/4294967296,e&&(Be[28]=~Be[28],Be[29]=~Be[29]),r=0;r<32;r++)La[r]=jb(t.b,4*r);for(r=0;r<12;r++)$i(0,8,16,24,sr[r*16+0],sr[r*16+1]),$i(2,10,18,26,sr[r*16+2],sr[r*16+3]),$i(4,12,20,28,sr[r*16+4],sr[r*16+5]),$i(6,14,22,30,sr[r*16+6],sr[r*16+7]),$i(0,10,20,30,sr[r*16+8],sr[r*16+9]),$i(2,12,22,24,sr[r*16+10],sr[r*16+11]),$i(4,14,16,26,sr[r*16+12],sr[r*16+13]),$i(6,8,18,28,sr[r*16+14],sr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Be[r]^Be[r+16]}const zi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function qb(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};zi.fill(0),zi[0]=t,e&&(zi[1]=e.length),zi[2]=1,zi[3]=1,r&&zi.set(r,32),n&&zi.set(n,48);for(let s=0;s<16;s++)i.h[s]=Gb[s]^jb(zi,s*4);return e&&(jh(i,e),i.c=128),i}function jh(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,Vb(t,!1),t.c=0),t.b[t.c++]=e[r]}function $b(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Vb(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function zb(t,e,r,n,i){r=r||64,t=uf.normalizeInput(t),n&&(n=uf.normalizeInput(n)),i&&(i=uf.normalizeInput(i));const s=qb(r,e,n,i);return jh(s,t),$b(s)}function e3(t,e,r,n,i){const s=zb(t,e,r,n,i);return uf.toHex(s)}var t3={blake2b:zb,blake2bHex:e3,blake2bInit:qb,blake2bUpdate:jh,blake2bFinal:$b};const Wb=Fb;function r3(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Wi(t,e,r,n,i,s){at[t]=at[t]+at[e]+i,at[n]=kc(at[n]^at[t],16),at[r]=at[r]+at[n],at[e]=kc(at[e]^at[r],12),at[t]=at[t]+at[e]+s,at[n]=kc(at[n]^at[t],8),at[r]=at[r]+at[n],at[e]=kc(at[e]^at[r],7)}function kc(t,e){return t>>>e^t<<32-e}const Xb=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),or=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),at=new Uint32Array(16),rr=new Uint32Array(16);function Jb(t,e){let r=0;for(r=0;r<8;r++)at[r]=t.h[r],at[r+8]=Xb[r];for(at[12]^=t.t,at[13]^=t.t/4294967296,e&&(at[14]=~at[14]),r=0;r<16;r++)rr[r]=r3(t.b,4*r);for(r=0;r<10;r++)Wi(0,4,8,12,rr[or[r*16+0]],rr[or[r*16+1]]),Wi(1,5,9,13,rr[or[r*16+2]],rr[or[r*16+3]]),Wi(2,6,10,14,rr[or[r*16+4]],rr[or[r*16+5]]),Wi(3,7,11,15,rr[or[r*16+6]],rr[or[r*16+7]]),Wi(0,5,10,15,rr[or[r*16+8]],rr[or[r*16+9]]),Wi(1,6,11,12,rr[or[r*16+10]],rr[or[r*16+11]]),Wi(2,7,8,13,rr[or[r*16+12]],rr[or[r*16+13]]),Wi(3,4,9,14,rr[or[r*16+14]],rr[or[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=at[r]^at[r+8]}function Yb(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(Xb),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(Gh(n,e),n.c=64),n}function Gh(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,Jb(t,!1),t.c=0),t.b[t.c++]=e[r]}function Qb(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Jb(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function Zb(t,e,r){r=r||32,t=Wb.normalizeInput(t);const n=Yb(r,e);return Gh(n,t),Qb(n)}function n3(t,e,r){const n=Zb(t,e,r);return Wb.toHex(n)}var i3={blake2s:Zb,blake2sHex:n3,blake2sInit:Yb,blake2sUpdate:Gh,blake2sFinal:Qb};const ba=t3,va=i3;var s3={blake2b:ba.blake2b,blake2bHex:ba.blake2bHex,blake2bInit:ba.blake2bInit,blake2bUpdate:ba.blake2bUpdate,blake2bFinal:ba.blake2bFinal,blake2s:va.blake2s,blake2sHex:va.blake2sHex,blake2sInit:va.blake2sInit,blake2sUpdate:va.blake2sUpdate,blake2sFinal:va.blake2sFinal},Pt={},Mp={get exports(){return Pt},set exports(t){Pt=t}};typeof Object.create=="function"?Mp.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Mp.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var _r={},o3={get exports(){return _r},set exports(t){_r=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ui,n=r.Buffer;function i(o,a){for(var c in o)a[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,a,c){return n(o,a,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,c)},s.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return a!==void 0?typeof c=="string"?l.fill(a,c):l.fill(a):l.fill(0),l},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(o3,_r);var Wa={},a3={get exports(){return Wa},set exports(t){Wa=t}},ea={},Xa={},c3={get exports(){return Xa},set exports(t){Xa=t}},Io=typeof Reflect=="object"?Reflect:null,Lp=Io&&typeof Io.apply=="function"?Io.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},lf;Io&&typeof Io.ownKeys=="function"?lf=Io.ownKeys:Object.getOwnPropertySymbols?lf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:lf=function(e){return Object.getOwnPropertyNames(e)};function f3(t){console&&console.warn&&console.warn(t)}var ev=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}c3.exports=ht;Xa.once=h3;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var Cp=10;function gu(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return Cp},set:function(t){if(typeof t!="number"||t<0||ev(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Cp=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ev(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function tv(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return tv(this)};ht.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Lp(c,this,r);else for(var l=c.length,f=ov(c,l),n=0;n<l;++n)Lp(f[n],this,r);return!0};function rv(t,e,r,n){var i,s,o;if(gu(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=tv(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,f3(a)}return t}ht.prototype.addListener=function(e,r){return rv(this,e,r,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,r){return rv(this,e,r,!0)};function u3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nv(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=u3.bind(n);return i.listener=r,n.wrapFn=i,i}ht.prototype.once=function(e,r){return gu(r),this.on(e,nv(this,e,r)),this};ht.prototype.prependOnceListener=function(e,r){return gu(r),this.prependListener(e,nv(this,e,r)),this};ht.prototype.removeListener=function(e,r){var n,i,s,o,a;if(gu(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():l3(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function iv(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?d3(i):ov(i,i.length)}ht.prototype.listeners=function(e){return iv(this,e,!0)};ht.prototype.rawListeners=function(e){return iv(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):sv.call(t,e)};ht.prototype.listenerCount=sv;function sv(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?lf(this._events):[]};function ov(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function l3(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function d3(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function h3(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}av(t,e,s,{once:!0}),e!=="error"&&p3(t,i,{once:!0})})}function p3(t,e,r){typeof t.on=="function"&&av(t,"error",e,r)}function av(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var cv=Xa.EventEmitter,Ul,Bp;function g3(){if(Bp)return Ul;Bp=1;function t(I,P){var L=Object.keys(I);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(I);P&&(H=H.filter(function(G){return Object.getOwnPropertyDescriptor(I,G).enumerable})),L.push.apply(L,H)}return L}function e(I){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?t(Object(L),!0).forEach(function(H){r(I,H,L[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(L)):t(Object(L)).forEach(function(H){Object.defineProperty(I,H,Object.getOwnPropertyDescriptor(L,H))})}return I}function r(I,P,L){return P in I?Object.defineProperty(I,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):I[P]=L,I}function n(I,P){if(!(I instanceof P))throw new TypeError("Cannot call a class as a function")}function i(I,P){for(var L=0;L<P.length;L++){var H=P[L];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(I,H.key,H)}}function s(I,P,L){return P&&i(I.prototype,P),L&&i(I,L),I}var o=Ui,a=o.Buffer,c=lc,l=c.inspect,f=l&&l.custom||"inspect";function d(I,P,L){a.prototype.copy.call(I,P,L)}return Ul=function(){function I(){n(this,I),this.head=null,this.tail=null,this.length=0}return s(I,[{key:"push",value:function(L){var H={data:L,next:null};this.length>0?this.tail.next=H:this.head=H,this.tail=H,++this.length}},{key:"unshift",value:function(L){var H={data:L,next:this.head};this.length===0&&(this.tail=H),this.head=H,++this.length}},{key:"shift",value:function(){if(this.length!==0){var L=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,L}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(L){if(this.length===0)return"";for(var H=this.head,G=""+H.data;H=H.next;)G+=L+H.data;return G}},{key:"concat",value:function(L){if(this.length===0)return a.alloc(0);for(var H=a.allocUnsafe(L>>>0),G=this.head,V=0;G;)d(G.data,H,V),V+=G.data.length,G=G.next;return H}},{key:"consume",value:function(L,H){var G;return L<this.head.data.length?(G=this.head.data.slice(0,L),this.head.data=this.head.data.slice(L)):L===this.head.data.length?G=this.shift():G=H?this._getString(L):this._getBuffer(L),G}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(L){var H=this.head,G=1,V=H.data;for(L-=V.length;H=H.next;){var C=H.data,q=L>C.length?C.length:L;if(q===C.length?V+=C:V+=C.slice(0,L),L-=q,L===0){q===C.length?(++G,H.next?this.head=H.next:this.head=this.tail=null):(this.head=H,H.data=C.slice(q));break}++G}return this.length-=G,V}},{key:"_getBuffer",value:function(L){var H=a.allocUnsafe(L),G=this.head,V=1;for(G.data.copy(H),L-=G.data.length;G=G.next;){var C=G.data,q=L>C.length?C.length:L;if(C.copy(H,H.length-L,0,q),L-=q,L===0){q===C.length?(++V,G.next?this.head=G.next:this.head=this.tail=null):(this.head=G,G.data=C.slice(q));break}++V}return this.length-=V,H}},{key:f,value:function(L,H){return l(this,e({},H,{depth:0,customInspect:!1}))}}]),I}(),Ul}function b3(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(th,this,t)):process.nextTick(th,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(df,r):(r._writableState.errorEmitted=!0,process.nextTick(kp,r,s)):process.nextTick(kp,r,s):e?(process.nextTick(df,r),e(s)):process.nextTick(df,r)}),this)}function kp(t,e){th(t,e),df(t)}function df(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function v3(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function th(t,e){t.emit("error",e)}function m3(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var fv={destroy:b3,undestroy:v3,errorOrDestroy:m3},Zs={};function y3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var uv={};function cn(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=function(s){y3(o,s);function o(a,c,l){return s.call(this,n(a,c,l))||this}return o}(r);i.prototype.name=r.name,i.prototype.code=t,uv[t]=i}function Dp(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function E3(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function _3(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function w3(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}cn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);cn("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&E3(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(_3(t," argument"))i="The ".concat(t," ").concat(n," ").concat(Dp(e,"type"));else{var s=w3(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(Dp(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);cn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");cn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});cn("ERR_STREAM_PREMATURE_CLOSE","Premature close");cn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});cn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");cn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");cn("ERR_STREAM_WRITE_AFTER_END","write after end");cn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);cn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);cn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Zs.codes=uv;var A3=Zs.codes.ERR_INVALID_OPT_VALUE;function x3(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function S3(t,e,r,n){var i=x3(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new A3(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}var lv={getHighWaterMark:S3},bu={},Vh=_r.Buffer,Up=Vh.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function R3(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function I3(t){var e=R3(t);if(typeof e!="string"&&(Vh.isEncoding===Up||!Up(t)))throw new Error("Unknown encoding: "+t);return e||t}bu.StringDecoder=dc;function dc(t){this.encoding=I3(t);var e;switch(this.encoding){case"utf16le":this.text=L3,this.end=C3,e=4;break;case"utf8":this.fillLast=P3,e=4;break;case"base64":this.text=B3,this.end=k3,e=3;break;default:this.write=D3,this.end=U3;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Vh.allocUnsafe(e)}dc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};dc.prototype.end=M3;dc.prototype.text=N3;dc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Kl(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function O3(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Kl(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Kl(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Kl(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function T3(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function P3(t){var e=this.lastTotal-this.lastNeed,r=T3(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function N3(t,e){var r=O3(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function M3(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function L3(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function C3(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function B3(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function k3(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function D3(t){return t.toString(this.encoding)}function U3(t){return t&&t.length?this.write(t):""}var Kp=Zs.codes.ERR_STREAM_PREMATURE_CLOSE;function K3(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function H3(){}function F3(t){return t.setHeader&&typeof t.abort=="function"}function dv(t,e,r){if(typeof e=="function")return dv(t,null,e);e||(e={}),r=K3(r||H3);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},c=t._readableState&&t._readableState.endEmitted,l=function(){n=!1,c=!0,i||r.call(t)},f=function(L){r.call(t,L)},d=function(){var L;if(n&&!c)return(!t._readableState||!t._readableState.ended)&&(L=new Kp),r.call(t,L);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(L=new Kp),r.call(t,L)},I=function(){t.req.on("finish",a)};return F3(t)?(t.on("complete",a),t.on("abort",d),t.req?I():t.on("request",I)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",l),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",I),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",l),t.removeListener("error",f),t.removeListener("close",d)}}var qh=dv,Hl,Hp;function j3(){if(Hp)return Hl;Hp=1;var t;function e(V,C,q){return C in V?Object.defineProperty(V,C,{value:q,enumerable:!0,configurable:!0,writable:!0}):V[C]=q,V}var r=qh,n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function f(V,C){return{value:V,done:C}}function d(V){var C=V[n];if(C!==null){var q=V[l].read();q!==null&&(V[a]=null,V[n]=null,V[i]=null,C(f(q,!1)))}}function I(V){process.nextTick(d,V)}function P(V,C){return function(q,U){V.then(function(){if(C[o]){q(f(void 0,!0));return}C[c](q,U)},U)}}var L=Object.getPrototypeOf(function(){}),H=Object.setPrototypeOf((t={get stream(){return this[l]},next:function(){var C=this,q=this[s];if(q!==null)return Promise.reject(q);if(this[o])return Promise.resolve(f(void 0,!0));if(this[l].destroyed)return new Promise(function(y,w){process.nextTick(function(){C[s]?w(C[s]):y(f(void 0,!0))})});var U=this[a],K;if(U)K=new Promise(P(U,this));else{var j=this[l].read();if(j!==null)return Promise.resolve(f(j,!1));K=new Promise(this[c])}return this[a]=K,K}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var C=this;return new Promise(function(q,U){C[l].destroy(null,function(K){if(K){U(K);return}q(f(void 0,!0))})})}),t),L),G=function(C){var q,U=Object.create(H,(q={},e(q,l,{value:C,writable:!0}),e(q,n,{value:null,writable:!0}),e(q,i,{value:null,writable:!0}),e(q,s,{value:null,writable:!0}),e(q,o,{value:C._readableState.endEmitted,writable:!0}),e(q,c,{value:function(j,y){var w=U[l].read();w?(U[a]=null,U[n]=null,U[i]=null,j(f(w,!1))):(U[n]=j,U[i]=y)},writable:!0}),q));return U[a]=null,r(C,function(K){if(K&&K.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=U[i];j!==null&&(U[a]=null,U[n]=null,U[i]=null,j(K)),U[s]=K;return}var y=U[n];y!==null&&(U[a]=null,U[n]=null,U[i]=null,y(f(void 0,!0))),U[o]=!0}),C.on("readable",I.bind(null,U)),U};return Hl=G,Hl}var Fl,Fp;function G3(){return Fp||(Fp=1,Fl=function(){throw new Error("Readable.from is not available in the browser")}),Fl}const $h=ea;$h.Readable=ot;ot.ReadableState=pv;Xa.EventEmitter;var hv=function(e,r){return e.listeners(r).length},hc=cv,vu=Ui.Buffer,V3={}.Uint8Array||function(){};function q3(t){return vu.from(t)}function $3(t){return vu.isBuffer(t)||t instanceof V3}var jl=lc,He;jl&&jl.debuglog?He=jl.debuglog("stream"):He=function(){};var z3=g3(),zh=fv,W3=lv,X3=W3.getHighWaterMark,mu=Zs.codes,J3=mu.ERR_INVALID_ARG_TYPE,Y3=mu.ERR_STREAM_PUSH_AFTER_EOF,Q3=mu.ERR_METHOD_NOT_IMPLEMENTED,Z3=mu.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Oo,Gl,Vl;Pt(ot,hc);var Ua=zh.errorOrDestroy,ql=["error","close","destroy","pause","resume"];function ew(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function pv(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof $h.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=X3(this,t,"readableHighWaterMark",r),this.buffer=new z3,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Oo||(Oo=bu.StringDecoder),this.decoder=new Oo(t.encoding),this.encoding=t.encoding)}function ot(t){if(!(this instanceof ot))return new ot(t);var e=this instanceof $h.Duplex;this._readableState=new pv(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),hc.call(this)}Object.defineProperty(ot.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});ot.prototype.destroy=zh.destroy;ot.prototype._undestroy=zh.undestroy;ot.prototype._destroy=function(t,e){e(t)};ot.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=vu.from(t,e),e=""),n=!0),gv(this,t,e,!1,n)};ot.prototype.unshift=function(t){return gv(this,t,null,!0,!1)};function gv(t,e,r,n,i){He("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,nw(t,s);else{var o;if(i||(o=tw(s,e)),o)Ua(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==vu.prototype&&(e=q3(e)),n)s.endEmitted?Ua(t,new Z3):$l(t,s,e,!0);else if(s.ended)Ua(t,new Y3);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?$l(t,s,e,!1):rh(t,s)):$l(t,s,e,!1)}else n||(s.reading=!1,rh(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function $l(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&yu(t)),rh(t,e)}function tw(t,e){var r;return!$3(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new J3("chunk",["string","Buffer","Uint8Array"],e)),r}ot.prototype.isPaused=function(){return this._readableState.flowing===!1};ot.prototype.setEncoding=function(t){Oo||(Oo=bu.StringDecoder);var e=new Oo(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var jp=1073741824;function rw(t){return t>=jp?t=jp:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Gp(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=rw(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ot.prototype.read=function(t){He("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return He("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?zl(this):yu(this),null;if(t=Gp(t,e),t===0&&e.ended)return e.length===0&&zl(this),null;var n=e.needReadable;He("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,He("length less than watermark",n)),e.ended||e.reading?(n=!1,He("reading or ended",n)):n&&(He("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Gp(r,e)));var i;return t>0?i=mv(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&zl(this)),i!==null&&this.emit("data",i),i};function nw(t,e){if(He("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?yu(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,bv(t)))}}function yu(t){var e=t._readableState;He("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(He("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(bv,t))}function bv(t){var e=t._readableState;He("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Wh(t)}function rh(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(iw,t,e))}function iw(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(He("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ot.prototype._read=function(t){Ua(this,new Q3("_read()"))};ot.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,He("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:H;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(G,V){He("onunpipe"),G===r&&V&&V.hasUnpiped===!1&&(V.hasUnpiped=!0,f())}function a(){He("onend"),t.end()}var c=sw(r);t.on("drain",c);var l=!1;function f(){He("cleanup"),t.removeListener("close",P),t.removeListener("finish",L),t.removeListener("drain",c),t.removeListener("error",I),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",H),r.removeListener("data",d),l=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",d);function d(G){He("ondata");var V=t.write(G);He("dest.write",V),V===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&yv(n.pipes,t)!==-1)&&!l&&(He("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function I(G){He("onerror",G),H(),t.removeListener("error",I),hv(t,"error")===0&&Ua(t,G)}ew(t,"error",I);function P(){t.removeListener("finish",L),H()}t.once("close",P);function L(){He("onfinish"),t.removeListener("close",P),H()}t.once("finish",L);function H(){He("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(He("pipe resume"),r.resume()),t};function sw(t){return function(){var r=t._readableState;He("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&hv(t,"data")&&(r.flowing=!0,Wh(t))}}ot.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=yv(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};ot.prototype.on=function(t,e){var r=hc.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,He("on readable",n.length,n.reading),n.length?yu(this):n.reading||process.nextTick(ow,this)),r};ot.prototype.addListener=ot.prototype.on;ot.prototype.removeListener=function(t,e){var r=hc.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(vv,this),r};ot.prototype.removeAllListeners=function(t){var e=hc.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(vv,this),e};function vv(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function ow(t){He("readable nexttick read 0"),t.read(0)}ot.prototype.resume=function(){var t=this._readableState;return t.flowing||(He("resume"),t.flowing=!t.readableListening,aw(this,t)),t.paused=!1,this};function aw(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(cw,t,e))}function cw(t,e){He("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Wh(t),e.flowing&&!e.reading&&t.read(0)}ot.prototype.pause=function(){return He("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(He("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Wh(t){var e=t._readableState;for(He("flow",e.flowing);e.flowing&&t.read()!==null;);}ot.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(He("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(He("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<ql.length;s++)t.on(ql[s],this.emit.bind(this,ql[s]));return this._read=function(o){He("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(ot.prototype[Symbol.asyncIterator]=function(){return Gl===void 0&&(Gl=j3()),Gl(this)});Object.defineProperty(ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(ot.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(ot.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});ot._fromList=mv;Object.defineProperty(ot.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function mv(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function zl(t){var e=t._readableState;He("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(fw,e,t))}function fw(t,e){if(He("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(ot.from=function(t,e){return Vl===void 0&&(Vl=G3()),Vl(ot,t,e)});function yv(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var uw=lw;function lw(t,e){if(Wl("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Wl("throwDeprecation"))throw new Error(e);Wl("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Wl(t){try{if(!{}.localStorage)return!1}catch{return!1}var e={}.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}const Xh=ea;Xh.Writable=Nt;function Ev(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Uw(e,t)}}Nt.WritableState=pc;var dw={deprecate:uw},_v=cv,Eu=Ui.Buffer,hw={}.Uint8Array||function(){};function pw(t){return Eu.from(t)}function gw(t){return Eu.isBuffer(t)||t instanceof hw}var Jh=fv,bw=lv,vw=bw.getHighWaterMark,xs=Zs.codes,mw=xs.ERR_INVALID_ARG_TYPE,yw=xs.ERR_METHOD_NOT_IMPLEMENTED,Ew=xs.ERR_MULTIPLE_CALLBACK,_w=xs.ERR_STREAM_CANNOT_PIPE,ww=xs.ERR_STREAM_DESTROYED,Aw=xs.ERR_STREAM_NULL_VALUES,xw=xs.ERR_STREAM_WRITE_AFTER_END,Sw=xs.ERR_UNKNOWN_ENCODING,Bo=Jh.errorOrDestroy;Pt(Nt,_v);function Rw(){}function pc(t,e,r){t=t||{},typeof r!="boolean"&&(r=e instanceof Xh.Duplex),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=vw(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Lw(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ev(this)}pc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(pc.prototype,"buffer",{get:dw.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var hf;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(hf=Function.prototype[Symbol.hasInstance],Object.defineProperty(Nt,Symbol.hasInstance,{value:function(e){return hf.call(this,e)?!0:this!==Nt?!1:e&&e._writableState instanceof pc}})):hf=function(e){return e instanceof this};function Nt(t){var e=this instanceof Xh.Duplex;if(!e&&!hf.call(Nt,this))return new Nt(t);this._writableState=new pc(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),_v.call(this)}Nt.prototype.pipe=function(){Bo(this,new _w)};function Iw(t,e){var r=new xw;Bo(t,r),process.nextTick(e,r)}function Ow(t,e,r,n){var i;return r===null?i=new Aw:typeof r!="string"&&!e.objectMode&&(i=new mw("chunk",["string","Buffer"],r)),i?(Bo(t,i),process.nextTick(n,i),!1):!0}Nt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&gw(t);return s&&!Eu.isBuffer(t)&&(t=pw(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Rw),n.ending?Iw(this,r):(s||Ow(this,n,t,r))&&(n.pendingcb++,i=Pw(this,n,s,t,e,r)),i};Nt.prototype.cork=function(){this._writableState.corked++};Nt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&wv(this,t))};Nt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Sw(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Nt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Tw(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Eu.from(e,r)),e}Object.defineProperty(Nt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Pw(t,e,r,n,i,s){if(!r){var o=Tw(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else nh(t,e,!1,a,n,i,s);return c}function nh(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new ww("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Nw(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(Ja,t,e),t._writableState.errorEmitted=!0,Bo(t,n)):(i(n),t._writableState.errorEmitted=!0,Bo(t,n),Ja(t,e))}function Mw(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Lw(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new Ew;if(Mw(r),e)Nw(t,r,n,e,i);else{var s=Av(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&wv(t,r),n?process.nextTick(Vp,t,r,s,i):Vp(t,r,s,i)}}function Vp(t,e,r,n){r||Cw(t,e),e.pendingcb--,n(),Ja(t,e)}function Cw(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function wv(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,nh(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Ev(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback,d=e.objectMode?1:c.length;if(nh(t,e,!1,d,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Nt.prototype._write=function(t,e,r){r(new yw("_write()"))};Nt.prototype._writev=null;Nt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Dw(this,n,r),this};Object.defineProperty(Nt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Av(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Bw(t,e){t._final(function(r){e.pendingcb--,r&&Bo(t,r),e.prefinished=!0,t.emit("prefinish"),Ja(t,e)})}function kw(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Bw,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Ja(t,e){var r=Av(e);if(r&&(kw(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Dw(t,e,r){e.ending=!0,Ja(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Uw(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Nt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Nt.prototype.destroy=Jh.destroy;Nt.prototype._undestroy=Jh.undestroy;Nt.prototype._destroy=function(t,e){e(t)};var Kw=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};const ko=ea;ko.Duplex=ni;Pt(ni,ko.Readable);for(var qp=Kw(ko.Writable.prototype),Xl=0;Xl<qp.length;Xl++){var Jl=qp[Xl];ni.prototype[Jl]||(ni.prototype[Jl]=ko.Writable.prototype[Jl])}function ni(t){if(!(this instanceof ni))return new ni(t);ko.Readable.call(this,t),ko.Writable.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Hw)))}Object.defineProperty(ni.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ni.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ni.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Hw(){this._writableState.ended||process.nextTick(Fw,this)}function Fw(t){t.end()}Object.defineProperty(ni.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});const gc=ea;gc.Transform=Ki;var _u=Zs.codes,jw=_u.ERR_METHOD_NOT_IMPLEMENTED,Gw=_u.ERR_MULTIPLE_CALLBACK,Vw=_u.ERR_TRANSFORM_ALREADY_TRANSFORMING,qw=_u.ERR_TRANSFORM_WITH_LENGTH_0;Pt(Ki,gc.Duplex);function $w(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Gw);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ki(t){if(!(this instanceof Ki))return new Ki(t);gc.Duplex.call(this,t),this._transformState={afterTransform:$w.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",zw)}function zw(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){$p(t,e,r)}):$p(this,null,null)}Ki.prototype.push=function(t,e){return this._transformState.needTransform=!1,gc.Duplex.prototype.push.call(this,t,e)};Ki.prototype._transform=function(t,e,r){r(new jw("_transform()"))};Ki.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ki.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ki.prototype._destroy=function(t,e){gc.Duplex.prototype._destroy.call(this,t,function(r){e(r)})};function $p(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new qw;if(t._transformState.transforming)throw new Vw;return t.push(null)}const xv=ea;xv.PassThrough=Ya;Pt(Ya,xv.Transform);function Ya(t){if(!(this instanceof Ya))return new Ya(t);Transform.call(this,t)}Ya.prototype._transform=function(t,e,r){r(null,t)};var Yl;function Ww(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Sv=Zs.codes,Xw=Sv.ERR_MISSING_ARGS,Jw=Sv.ERR_STREAM_DESTROYED;function zp(t){if(t)throw t}function Yw(t){return t.setHeader&&typeof t.abort=="function"}function Qw(t,e,r,n){n=Ww(n);var i=!1;t.on("close",function(){i=!0}),Yl===void 0&&(Yl=qh),Yl(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Yw(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Jw("pipe"))}}}function Wp(t){t()}function Zw(t,e){return t.pipe(e)}function e6(t){return!t.length||typeof t[t.length-1]!="function"?zp:t.pop()}function t6(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e6(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Xw("streams");var i,s=e.map(function(o,a){var c=a<e.length-1,l=a>0;return Qw(o,c,l,function(f){i||(i=f),f&&s.forEach(Wp),!c&&(s.forEach(Wp),n(i))})});return e.reduce(Zw)}var r6=t6;(function(t,e){const r=ea;e=t.exports=r.Readable,e.Stream=r.Readable,e.Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.finished=qh,e.pipeline=r6})(a3,Wa);var Tf=_r.Buffer,Rv=Wa.Transform,n6=Pt;function i6(t,e){if(!Tf.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function Ss(t){Rv.call(this),this._block=Tf.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n6(Ss,Rv);Ss.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(i){n=i}r(n)};Ss.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(r){e=r}t(e)};Ss.prototype.update=function(t,e){if(i6(t,"Data"),this._finalized)throw new Error("Digest already called");Tf.isBuffer(t)||(t=Tf.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var s=0,o=t.length*8;o>0;++s)this._length[s]+=o,o=this._length[s]/4294967296|0,o>0&&(this._length[s]-=4294967296*o);return this};Ss.prototype._update=function(){throw new Error("_update is not implemented")};Ss.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e};Ss.prototype._digest=function(){throw new Error("_digest is not implemented")};var Iv=Ss,s6=Pt,Ov=Iv,o6=_r.Buffer,a6=new Array(16);function wu(){Ov.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}s6(wu,Ov);wu.prototype._update=function(){for(var t=a6,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var r=this._a,n=this._b,i=this._c,s=this._d;r=ar(r,n,i,s,t[0],3614090360,7),s=ar(s,r,n,i,t[1],3905402710,12),i=ar(i,s,r,n,t[2],606105819,17),n=ar(n,i,s,r,t[3],3250441966,22),r=ar(r,n,i,s,t[4],4118548399,7),s=ar(s,r,n,i,t[5],1200080426,12),i=ar(i,s,r,n,t[6],2821735955,17),n=ar(n,i,s,r,t[7],4249261313,22),r=ar(r,n,i,s,t[8],1770035416,7),s=ar(s,r,n,i,t[9],2336552879,12),i=ar(i,s,r,n,t[10],4294925233,17),n=ar(n,i,s,r,t[11],2304563134,22),r=ar(r,n,i,s,t[12],1804603682,7),s=ar(s,r,n,i,t[13],4254626195,12),i=ar(i,s,r,n,t[14],2792965006,17),n=ar(n,i,s,r,t[15],1236535329,22),r=cr(r,n,i,s,t[1],4129170786,5),s=cr(s,r,n,i,t[6],3225465664,9),i=cr(i,s,r,n,t[11],643717713,14),n=cr(n,i,s,r,t[0],3921069994,20),r=cr(r,n,i,s,t[5],3593408605,5),s=cr(s,r,n,i,t[10],38016083,9),i=cr(i,s,r,n,t[15],3634488961,14),n=cr(n,i,s,r,t[4],3889429448,20),r=cr(r,n,i,s,t[9],568446438,5),s=cr(s,r,n,i,t[14],3275163606,9),i=cr(i,s,r,n,t[3],4107603335,14),n=cr(n,i,s,r,t[8],1163531501,20),r=cr(r,n,i,s,t[13],2850285829,5),s=cr(s,r,n,i,t[2],4243563512,9),i=cr(i,s,r,n,t[7],1735328473,14),n=cr(n,i,s,r,t[12],2368359562,20),r=fr(r,n,i,s,t[5],4294588738,4),s=fr(s,r,n,i,t[8],2272392833,11),i=fr(i,s,r,n,t[11],1839030562,16),n=fr(n,i,s,r,t[14],4259657740,23),r=fr(r,n,i,s,t[1],2763975236,4),s=fr(s,r,n,i,t[4],1272893353,11),i=fr(i,s,r,n,t[7],4139469664,16),n=fr(n,i,s,r,t[10],3200236656,23),r=fr(r,n,i,s,t[13],681279174,4),s=fr(s,r,n,i,t[0],3936430074,11),i=fr(i,s,r,n,t[3],3572445317,16),n=fr(n,i,s,r,t[6],76029189,23),r=fr(r,n,i,s,t[9],3654602809,4),s=fr(s,r,n,i,t[12],3873151461,11),i=fr(i,s,r,n,t[15],530742520,16),n=fr(n,i,s,r,t[2],3299628645,23),r=ur(r,n,i,s,t[0],4096336452,6),s=ur(s,r,n,i,t[7],1126891415,10),i=ur(i,s,r,n,t[14],2878612391,15),n=ur(n,i,s,r,t[5],4237533241,21),r=ur(r,n,i,s,t[12],1700485571,6),s=ur(s,r,n,i,t[3],2399980690,10),i=ur(i,s,r,n,t[10],4293915773,15),n=ur(n,i,s,r,t[1],2240044497,21),r=ur(r,n,i,s,t[8],1873313359,6),s=ur(s,r,n,i,t[15],4264355552,10),i=ur(i,s,r,n,t[6],2734768916,15),n=ur(n,i,s,r,t[13],1309151649,21),r=ur(r,n,i,s,t[4],4149444226,6),s=ur(s,r,n,i,t[11],3174756917,10),i=ur(i,s,r,n,t[2],718787259,15),n=ur(n,i,s,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0};wu.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o6.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function Au(t,e){return t<<e|t>>>32-e}function ar(t,e,r,n,i,s,o){return Au(t+(e&r|~e&n)+i+s|0,o)+e|0}function cr(t,e,r,n,i,s,o){return Au(t+(e&n|r&~n)+i+s|0,o)+e|0}function fr(t,e,r,n,i,s,o){return Au(t+(e^r^n)+i+s|0,o)+e|0}function ur(t,e,r,n,i,s,o){return Au(t+(r^(e|~n))+i+s|0,o)+e|0}var c6=wu,Ql=Ui.Buffer,f6=Pt,Tv=Iv,u6=new Array(16),ma=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ya=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ea=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],wa=[0,1518500249,1859775393,2400959708,2840853838],Aa=[1352829926,1548603684,1836072691,2053994217,0];function xu(){Tv.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}f6(xu,Tv);xu.prototype._update=function(){for(var t=u6,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._a|0,c=this._b|0,l=this._c|0,f=this._d|0,d=this._e|0,I=0;I<80;I+=1){var P,L;I<16?(P=Xp(r,n,i,s,o,t[ma[I]],wa[0],Ea[I]),L=Zp(a,c,l,f,d,t[ya[I]],Aa[0],_a[I])):I<32?(P=Jp(r,n,i,s,o,t[ma[I]],wa[1],Ea[I]),L=Qp(a,c,l,f,d,t[ya[I]],Aa[1],_a[I])):I<48?(P=Yp(r,n,i,s,o,t[ma[I]],wa[2],Ea[I]),L=Yp(a,c,l,f,d,t[ya[I]],Aa[2],_a[I])):I<64?(P=Qp(r,n,i,s,o,t[ma[I]],wa[3],Ea[I]),L=Jp(a,c,l,f,d,t[ya[I]],Aa[3],_a[I])):(P=Zp(r,n,i,s,o,t[ma[I]],wa[4],Ea[I]),L=Xp(a,c,l,f,d,t[ya[I]],Aa[4],_a[I])),r=o,o=s,s=$s(i,10),i=n,n=P,a=d,d=f,f=$s(l,10),l=c,c=L}var H=this._b+i+f|0;this._b=this._c+s+d|0,this._c=this._d+o+a|0,this._d=this._e+r+c|0,this._e=this._a+n+l|0,this._a=H};xu.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Ql.alloc?Ql.alloc(20):new Ql(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function $s(t,e){return t<<e|t>>>32-e}function Xp(t,e,r,n,i,s,o,a){return $s(t+(e^r^n)+s+o|0,a)+i|0}function Jp(t,e,r,n,i,s,o,a){return $s(t+(e&r|~e&n)+s+o|0,a)+i|0}function Yp(t,e,r,n,i,s,o,a){return $s(t+((e|~r)^n)+s+o|0,a)+i|0}function Qp(t,e,r,n,i,s,o,a){return $s(t+(e&n|r&~n)+s+o|0,a)+i|0}function Zp(t,e,r,n,i,s,o,a){return $s(t+(e^(r|~n))+s+o|0,a)+i|0}var l6=xu,ih={},d6={get exports(){return ih},set exports(t){ih=t}},Pv=_r.Buffer;function Su(t,e){this._block=Pv.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Su.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Pv.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,s=this._len,o=0;o<i;){for(var a=s%n,c=Math.min(i-o,n-a),l=0;l<c;l++)r[a+l]=t[o+l];s+=c,o+=c,s%n===0&&this._update(r)}return this._len+=i,this};Su.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s};Su.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var ta=Su,h6=Pt,Nv=ta,p6=_r.Buffer,g6=[1518500249,1859775393,-1894007588,-899497514],b6=new Array(80);function bc(){this.init(),this._w=b6,Nv.call(this,64,56)}h6(bc,Nv);bc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function v6(t){return t<<5|t>>>27}function m6(t){return t<<30|t>>>2}function y6(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}bc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var c=0;c<80;++c){var l=~~(c/20),f=v6(r)+y6(l,n,i,s)+o+e[c]+g6[l]|0;o=s,s=i,i=m6(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};bc.prototype._hash=function(){var t=p6.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var E6=bc,_6=Pt,Mv=ta,w6=_r.Buffer,A6=[1518500249,1859775393,-1894007588,-899497514],x6=new Array(80);function vc(){this.init(),this._w=x6,Mv.call(this,64,56)}_6(vc,Mv);vc.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function S6(t){return t<<1|t>>>31}function R6(t){return t<<5|t>>>27}function I6(t){return t<<30|t>>>2}function O6(t,e,r,n){return t===0?e&r|~e&n:t===2?e&r|e&n|r&n:e^r^n}vc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=S6(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var c=0;c<80;++c){var l=~~(c/20),f=R6(r)+O6(l,n,i,s)+o+e[c]+A6[l]|0;o=s,s=i,i=I6(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0};vc.prototype._hash=function(){var t=w6.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var T6=vc,P6=Pt,Lv=ta,N6=_r.Buffer,M6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],L6=new Array(64);function mc(){this.init(),this._w=L6,Lv.call(this,64,56)}P6(mc,Lv);mc.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function C6(t,e,r){return r^t&(e^r)}function B6(t,e,r){return t&e|r&(t|e)}function k6(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function D6(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function U6(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function K6(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}mc.prototype._update=function(t){for(var e=this._w,r=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,o=this._e|0,a=this._f|0,c=this._g|0,l=this._h|0,f=0;f<16;++f)e[f]=t.readInt32BE(f*4);for(;f<64;++f)e[f]=K6(e[f-2])+e[f-7]+U6(e[f-15])+e[f-16]|0;for(var d=0;d<64;++d){var I=l+D6(o)+C6(o,a,c)+M6[d]+e[d]|0,P=k6(r)+B6(r,n,i)|0;l=c,c=a,a=o,o=s+I|0,s=i,i=n,n=r,r=I+P|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=o+this._e|0,this._f=a+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0};mc.prototype._hash=function(){var t=N6.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Cv=mc,H6=Pt,F6=Cv,j6=ta,G6=_r.Buffer,V6=new Array(64);function Ru(){this.init(),this._w=V6,j6.call(this,64,56)}H6(Ru,F6);Ru.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Ru.prototype._hash=function(){var t=G6.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var q6=Ru,$6=Pt,Bv=ta,z6=_r.Buffer,e1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W6=new Array(160);function yc(){this.init(),this._w=W6,Bv.call(this,128,112)}$6(yc,Bv);yc.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function t1(t,e,r){return r^t&(e^r)}function r1(t,e,r){return t&e|r&(t|e)}function n1(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function i1(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function X6(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function J6(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Y6(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Q6(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Qt(t,e){return t>>>0<e>>>0?1:0}yc.prototype._update=function(t){for(var e=this._w,r=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,o=this._eh|0,a=this._fh|0,c=this._gh|0,l=this._hh|0,f=this._al|0,d=this._bl|0,I=this._cl|0,P=this._dl|0,L=this._el|0,H=this._fl|0,G=this._gl|0,V=this._hl|0,C=0;C<32;C+=2)e[C]=t.readInt32BE(C*4),e[C+1]=t.readInt32BE(C*4+4);for(;C<160;C+=2){var q=e[C-30],U=e[C-15*2+1],K=X6(q,U),j=J6(U,q);q=e[C-2*2],U=e[C-2*2+1];var y=Y6(q,U),w=Q6(U,q),T=e[C-7*2],x=e[C-7*2+1],E=e[C-16*2],u=e[C-16*2+1],h=j+x|0,g=K+T+Qt(h,j)|0;h=h+w|0,g=g+y+Qt(h,w)|0,h=h+u|0,g=g+E+Qt(h,u)|0,e[C]=g,e[C+1]=h}for(var b=0;b<160;b+=2){g=e[b],h=e[b+1];var p=r1(r,n,i),S=r1(f,d,I),O=n1(r,f),_=n1(f,r),v=i1(o,L),N=i1(L,o),ee=e1[b],Y=e1[b+1],ne=t1(o,a,c),se=t1(L,H,G),ae=V+N|0,W=l+v+Qt(ae,V)|0;ae=ae+se|0,W=W+ne+Qt(ae,se)|0,ae=ae+Y|0,W=W+ee+Qt(ae,Y)|0,ae=ae+h|0,W=W+g+Qt(ae,h)|0;var F=_+S|0,k=O+p+Qt(F,_)|0;l=c,V=G,c=a,G=H,a=o,H=L,L=P+ae|0,o=s+W+Qt(L,P)|0,s=i,P=I,i=n,I=d,n=r,d=f,f=ae+F|0,r=W+k+Qt(f,ae)|0}this._al=this._al+f|0,this._bl=this._bl+d|0,this._cl=this._cl+I|0,this._dl=this._dl+P|0,this._el=this._el+L|0,this._fl=this._fl+H|0,this._gl=this._gl+G|0,this._hl=this._hl+V|0,this._ah=this._ah+r+Qt(this._al,f)|0,this._bh=this._bh+n+Qt(this._bl,d)|0,this._ch=this._ch+i+Qt(this._cl,I)|0,this._dh=this._dh+s+Qt(this._dl,P)|0,this._eh=this._eh+o+Qt(this._el,L)|0,this._fh=this._fh+a+Qt(this._fl,H)|0,this._gh=this._gh+c+Qt(this._gl,G)|0,this._hh=this._hh+l+Qt(this._hl,V)|0};yc.prototype._hash=function(){var t=z6.allocUnsafe(64);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var kv=yc,Z6=Pt,e5=kv,t5=ta,r5=_r.Buffer,n5=new Array(160);function Iu(){this.init(),this._w=n5,t5.call(this,128,112)}Z6(Iu,e5);Iu.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Iu.prototype._hash=function(){var t=r5.allocUnsafe(48);function e(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var i5=Iu,eo=d6.exports=function(e){e=e.toLowerCase();var r=eo[e];if(!r)throw new Error(e+" is not supported (we accept pull requests)");return new r};eo.sha=E6;eo.sha1=T6;eo.sha224=q6;eo.sha256=Cv;eo.sha384=i5;eo.sha512=kv;var Dv=_r.Buffer,Uv=Wa.Transform,s5=bu.StringDecoder,o5=Pt;function In(t){Uv.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}o5(In,Uv);In.prototype.update=function(t,e,r){typeof t=="string"&&(t=Dv.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)};In.prototype.setAutoPadding=function(){};In.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};In.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};In.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};In.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}};In.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)};In.prototype._finalOrDigest=function(t){var e=this.__final()||Dv.alloc(0);return t&&(e=this._toString(e,t,!0)),e};In.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new s5(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var a5=In,c5=Pt,f5=c6,u5=l6,l5=ih,Kv=a5;function Ou(t){Kv.call(this,"digest"),this._hash=t}c5(Ou,Kv);Ou.prototype._update=function(t){this._hash.update(t)};Ou.prototype._final=function(){return this._hash.digest()};var d5=function(e){return e=e.toLowerCase(),e==="md5"?new f5:e==="rmd160"||e==="ripemd160"?new u5:new Ou(l5(e))},Dc=_r.Buffer;function h5(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function f(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=Dc.from(P)),!Dc.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var L=0,H=0,G=0,V=P.length;G!==V&&P[G]===0;)G++,L++;for(var C=(V-G)*l+1>>>0,q=new Uint8Array(C);G!==V;){for(var U=P[G],K=0,j=C-1;(U!==0||K<H)&&j!==-1;j--,K++)U+=256*q[j]>>>0,q[j]=U%o>>>0,U=U/o>>>0;if(U!==0)throw new Error("Non-zero carry");H=K,G++}for(var y=C-H;y!==C&&q[y]===0;)y++;for(var w=a.repeat(L);y<C;++y)w+=t.charAt(q[y]);return w}function d(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return Dc.alloc(0);for(var L=0,H=0,G=0;P[L]===a;)H++,L++;for(var V=(P.length-L)*c+1>>>0,C=new Uint8Array(V);P[L];){var q=e[P.charCodeAt(L)];if(q===255)return;for(var U=0,K=V-1;(q!==0||U<G)&&K!==-1;K--,U++)q+=o*C[K]>>>0,C[K]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");G=U,L++}for(var j=V-G;j!==V&&C[j]===0;)j++;var y=Dc.allocUnsafe(H+(V-j));y.fill(0,0,H);for(var w=H;j!==V;)y[w++]=C[j++];return y}function I(P){var L=d(P);if(L)return L;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:d,decode:I}}var p5=h5,g5=p5,b5="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",v5=g5(b5),Zl=v5,m5=_r.Buffer,y5=function(t){function e(s){var o=t(s);return Zl.encode(m5.concat([s,o],s.length+4))}function r(s){var o=s.slice(0,-4),a=s.slice(-4),c=t(o);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return o}function n(s){var o=Zl.decodeUnsafe(s);if(o)return r(o)}function i(s){var o=Zl.decode(s),a=r(o);if(!a)throw new Error("Invalid checksum");return a}return{encode:e,decode:i,decodeUnsafe:n}},s1=d5,E5=y5;function _5(t){var e=s1("sha256").update(t).digest();return s1("sha256").update(e).digest()}var $r=E5(_5),w5={};const A5="elliptic",x5="6.5.4",S5="EC cryptography",R5="lib/elliptic.js",I5=["lib"],O5={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},T5={type:"git",url:"git@github.com:indutny/elliptic"},P5=["EC","Elliptic","curve","Cryptography"],N5="Fedor Indutny <fedor@indutny.com>",M5="MIT",L5={url:"https://github.com/indutny/elliptic/issues"},C5="https://github.com/indutny/elliptic",B5={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},k5={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},D5={name:A5,version:x5,description:S5,main:R5,files:I5,scripts:O5,repository:T5,keywords:P5,author:N5,license:M5,bugs:L5,homepage:C5,devDependencies:B5,dependencies:k5};var Xr={},xn={},U5={get exports(){return xn},set exports(t){xn=t}};(function(t){(function(e,r){function n(E,u){if(!E)throw new Error(u||"Assertion failed")}function i(E,u){E.super_=u;var h=function(){};h.prototype=u.prototype,E.prototype=new h,E.prototype.constructor=E}function s(E,u,h){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((u==="le"||u==="be")&&(h=u,u=10),this._init(E||0,u||10,h||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=lc.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,h){return u.cmp(h)>0?u:h},s.min=function(u,h){return u.cmp(h)<0?u:h},s.prototype._init=function(u,h,g){if(typeof u=="number")return this._initNumber(u,h,g);if(typeof u=="object")return this._initArray(u,h,g);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),u=u.toString().replace(/\s+/g,"");var b=0;u[0]==="-"&&(b++,this.negative=1),b<u.length&&(h===16?this._parseHex(u,b,g):(this._parseBase(u,h,b),g==="le"&&this._initArray(this.toArray(),h,g)))},s.prototype._initNumber=function(u,h,g){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),h,g)},s.prototype._initArray=function(u,h,g){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var p,S,O=0;if(g==="be")for(b=u.length-1,p=0;b>=0;b-=3)S=u[b]|u[b-1]<<8|u[b-2]<<16,this.words[p]|=S<<O&67108863,this.words[p+1]=S>>>26-O&67108863,O+=24,O>=26&&(O-=26,p++);else if(g==="le")for(b=0,p=0;b<u.length;b+=3)S=u[b]|u[b+1]<<8|u[b+2]<<16,this.words[p]|=S<<O&67108863,this.words[p+1]=S>>>26-O&67108863,O+=24,O>=26&&(O-=26,p++);return this.strip()};function a(E,u){var h=E.charCodeAt(u);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function c(E,u,h){var g=a(E,h);return h-1>=u&&(g|=a(E,h-1)<<4),g}s.prototype._parseHex=function(u,h,g){this.length=Math.ceil((u.length-h)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var p=0,S=0,O;if(g==="be")for(b=u.length-1;b>=h;b-=2)O=c(u,h,b)<<p,this.words[S]|=O&67108863,p>=18?(p-=18,S+=1,this.words[S]|=O>>>26):p+=8;else{var _=u.length-h;for(b=_%2===0?h+1:h;b<u.length;b+=2)O=c(u,h,b)<<p,this.words[S]|=O&67108863,p>=18?(p-=18,S+=1,this.words[S]|=O>>>26):p+=8}this.strip()};function l(E,u,h,g){for(var b=0,p=Math.min(E.length,h),S=u;S<p;S++){var O=E.charCodeAt(S)-48;b*=g,O>=49?b+=O-49+10:O>=17?b+=O-17+10:b+=O}return b}s.prototype._parseBase=function(u,h,g){this.words=[0],this.length=1;for(var b=0,p=1;p<=67108863;p*=h)b++;b--,p=p/h|0;for(var S=u.length-g,O=S%b,_=Math.min(S,S-O)+g,v=0,N=g;N<_;N+=b)v=l(u,N,N+b,h),this.imuln(p),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(O!==0){var ee=1;for(v=l(u,N,u.length,h),N=0;N<O;N++)ee*=h;this.imuln(ee),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var h=0;h<this.length;h++)u.words[h]=this.words[h];u.length=this.length,u.negative=this.negative,u.red=this.red},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,h){u=u||10,h=h|0||1;var g;if(u===16||u==="hex"){g="";for(var b=0,p=0,S=0;S<this.length;S++){var O=this.words[S],_=((O<<b|p)&16777215).toString(16);p=O>>>24-b&16777215,p!==0||S!==this.length-1?g=f[6-_.length]+_+g:g=_+g,b+=2,b>=26&&(b-=26,S--)}for(p!==0&&(g=p.toString(16)+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(u===(u|0)&&u>=2&&u<=36){var v=d[u],N=I[u];g="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var Y=ee.modn(N).toString(u);ee=ee.idivn(N),ee.isZero()?g=Y+g:g=f[v-Y.length]+Y+g}for(this.isZero()&&(g="0"+g);g.length%h!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(u,h){return n(typeof o<"u"),this.toArrayLike(o,u,h)},s.prototype.toArray=function(u,h){return this.toArrayLike(Array,u,h)},s.prototype.toArrayLike=function(u,h,g){var b=this.byteLength(),p=g||Math.max(1,b);n(b<=p,"byte array longer than desired length"),n(p>0,"Requested array length <= 0"),this.strip();var S=h==="le",O=new u(p),_,v,N=this.clone();if(S){for(v=0;!N.isZero();v++)_=N.andln(255),N.iushrn(8),O[v]=_;for(;v<p;v++)O[v]=0}else{for(v=0;v<p-b;v++)O[v]=0;for(v=0;!N.isZero();v++)_=N.andln(255),N.iushrn(8),O[p-v-1]=_}return O},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var h=u,g=0;return h>=4096&&(g+=13,h>>>=13),h>=64&&(g+=7,h>>>=7),h>=8&&(g+=4,h>>>=4),h>=2&&(g+=2,h>>>=2),g+h},s.prototype._zeroBits=function(u){if(u===0)return 26;var h=u,g=0;return h&8191||(g+=13,h>>>=13),h&127||(g+=7,h>>>=7),h&15||(g+=4,h>>>=4),h&3||(g+=2,h>>>=2),h&1||g++,g},s.prototype.bitLength=function(){var u=this.words[this.length-1],h=this._countBits(u);return(this.length-1)*26+h};function P(E){for(var u=new Array(E.bitLength()),h=0;h<u.length;h++){var g=h/26|0,b=h%26;u[h]=(E.words[g]&1<<b)>>>b}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,h=0;h<this.length;h++){var g=this._zeroBits(this.words[h]);if(u+=g,g!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]|u.words[h];return this.strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var h;this.length>u.length?h=u:h=this;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]&u.words[g];return this.length=h.length,this.strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var h,g;this.length>u.length?(h=this,g=u):(h=u,g=this);for(var b=0;b<g.length;b++)this.words[b]=h.words[b]^g.words[b];if(this!==h)for(;b<h.length;b++)this.words[b]=h.words[b];return this.length=h.length,this.strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var h=Math.ceil(u/26)|0,g=u%26;this._expand(h),g>0&&h--;for(var b=0;b<h;b++)this.words[b]=~this.words[b]&67108863;return g>0&&(this.words[b]=~this.words[b]&67108863>>26-g),this.strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,h){n(typeof u=="number"&&u>=0);var g=u/26|0,b=u%26;return this._expand(g+1),h?this.words[g]=this.words[g]|1<<b:this.words[g]=this.words[g]&~(1<<b),this.strip()},s.prototype.iadd=function(u){var h;if(this.negative!==0&&u.negative===0)return this.negative=0,h=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,h=this.isub(u),u.negative=1,h._normSign();var g,b;this.length>u.length?(g=this,b=u):(g=u,b=this);for(var p=0,S=0;S<b.length;S++)h=(g.words[S]|0)+(b.words[S]|0)+p,this.words[S]=h&67108863,p=h>>>26;for(;p!==0&&S<g.length;S++)h=(g.words[S]|0)+p,this.words[S]=h&67108863,p=h>>>26;if(this.length=g.length,p!==0)this.words[this.length]=p,this.length++;else if(g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this},s.prototype.add=function(u){var h;return u.negative!==0&&this.negative===0?(u.negative=0,h=this.sub(u),u.negative^=1,h):u.negative===0&&this.negative!==0?(this.negative=0,h=u.sub(this),this.negative=1,h):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var h=this.iadd(u);return u.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var g=this.cmp(u);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,p;g>0?(b=this,p=u):(b=u,p=this);for(var S=0,O=0;O<p.length;O++)h=(b.words[O]|0)-(p.words[O]|0)+S,S=h>>26,this.words[O]=h&67108863;for(;S!==0&&O<b.length;O++)h=(b.words[O]|0)+S,S=h>>26,this.words[O]=h&67108863;if(S===0&&O<b.length&&b!==this)for(;O<b.length;O++)this.words[O]=b.words[O];return this.length=Math.max(this.length,O),b!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function L(E,u,h){h.negative=u.negative^E.negative;var g=E.length+u.length|0;h.length=g,g=g-1|0;var b=E.words[0]|0,p=u.words[0]|0,S=b*p,O=S&67108863,_=S/67108864|0;h.words[0]=O;for(var v=1;v<g;v++){for(var N=_>>>26,ee=_&67108863,Y=Math.min(v,u.length-1),ne=Math.max(0,v-E.length+1);ne<=Y;ne++){var se=v-ne|0;b=E.words[se]|0,p=u.words[ne]|0,S=b*p+ee,N+=S/67108864|0,ee=S&67108863}h.words[v]=ee|0,_=N|0}return _!==0?h.words[v]=_|0:h.length--,h.strip()}var H=function(u,h,g){var b=u.words,p=h.words,S=g.words,O=0,_,v,N,ee=b[0]|0,Y=ee&8191,ne=ee>>>13,se=b[1]|0,ae=se&8191,W=se>>>13,F=b[2]|0,k=F&8191,m=F>>>13,B=b[3]|0,X=B&8191,Z=B>>>13,ce=b[4]|0,ie=ce&8191,de=ce>>>13,ye=b[5]|0,ue=ye&8191,Ee=ye>>>13,xe=b[6]|0,me=xe&8191,ge=xe>>>13,Te=b[7]|0,ve=Te&8191,he=Te>>>13,Ne=b[8]|0,M=Ne&8191,A=Ne>>>13,R=b[9]|0,D=R&8191,$=R>>>13,Q=p[0]|0,te=Q&8191,le=Q>>>13,Ae=p[1]|0,we=Ae&8191,Se=Ae>>>13,Fe=p[2]|0,gt=Fe&8191,mt=Fe>>>13,oo=p[3]|0,wt=oo&8191,je=oo>>>13,jt=p[4]|0,Ge=jt&8191,Ve=jt>>>13,Gt=p[5]|0,qe=Gt&8191,$e=Gt>>>13,Vt=p[6]|0,ze=Vt&8191,We=Vt>>>13,qt=p[7]|0,Xe=qt&8191,Je=qt>>>13,$t=p[8]|0,Ye=$t&8191,Qe=$t>>>13,Z0=p[9]|0,Bt=Z0&8191,kt=Z0>>>13;g.negative=u.negative^h.negative,g.length=19,_=Math.imul(Y,te),v=Math.imul(Y,le),v=v+Math.imul(ne,te)|0,N=Math.imul(ne,le);var el=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(el>>>26)|0,el&=67108863,_=Math.imul(ae,te),v=Math.imul(ae,le),v=v+Math.imul(W,te)|0,N=Math.imul(W,le),_=_+Math.imul(Y,we)|0,v=v+Math.imul(Y,Se)|0,v=v+Math.imul(ne,we)|0,N=N+Math.imul(ne,Se)|0;var tl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(tl>>>26)|0,tl&=67108863,_=Math.imul(k,te),v=Math.imul(k,le),v=v+Math.imul(m,te)|0,N=Math.imul(m,le),_=_+Math.imul(ae,we)|0,v=v+Math.imul(ae,Se)|0,v=v+Math.imul(W,we)|0,N=N+Math.imul(W,Se)|0,_=_+Math.imul(Y,gt)|0,v=v+Math.imul(Y,mt)|0,v=v+Math.imul(ne,gt)|0,N=N+Math.imul(ne,mt)|0;var rl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(rl>>>26)|0,rl&=67108863,_=Math.imul(X,te),v=Math.imul(X,le),v=v+Math.imul(Z,te)|0,N=Math.imul(Z,le),_=_+Math.imul(k,we)|0,v=v+Math.imul(k,Se)|0,v=v+Math.imul(m,we)|0,N=N+Math.imul(m,Se)|0,_=_+Math.imul(ae,gt)|0,v=v+Math.imul(ae,mt)|0,v=v+Math.imul(W,gt)|0,N=N+Math.imul(W,mt)|0,_=_+Math.imul(Y,wt)|0,v=v+Math.imul(Y,je)|0,v=v+Math.imul(ne,wt)|0,N=N+Math.imul(ne,je)|0;var nl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(nl>>>26)|0,nl&=67108863,_=Math.imul(ie,te),v=Math.imul(ie,le),v=v+Math.imul(de,te)|0,N=Math.imul(de,le),_=_+Math.imul(X,we)|0,v=v+Math.imul(X,Se)|0,v=v+Math.imul(Z,we)|0,N=N+Math.imul(Z,Se)|0,_=_+Math.imul(k,gt)|0,v=v+Math.imul(k,mt)|0,v=v+Math.imul(m,gt)|0,N=N+Math.imul(m,mt)|0,_=_+Math.imul(ae,wt)|0,v=v+Math.imul(ae,je)|0,v=v+Math.imul(W,wt)|0,N=N+Math.imul(W,je)|0,_=_+Math.imul(Y,Ge)|0,v=v+Math.imul(Y,Ve)|0,v=v+Math.imul(ne,Ge)|0,N=N+Math.imul(ne,Ve)|0;var il=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(il>>>26)|0,il&=67108863,_=Math.imul(ue,te),v=Math.imul(ue,le),v=v+Math.imul(Ee,te)|0,N=Math.imul(Ee,le),_=_+Math.imul(ie,we)|0,v=v+Math.imul(ie,Se)|0,v=v+Math.imul(de,we)|0,N=N+Math.imul(de,Se)|0,_=_+Math.imul(X,gt)|0,v=v+Math.imul(X,mt)|0,v=v+Math.imul(Z,gt)|0,N=N+Math.imul(Z,mt)|0,_=_+Math.imul(k,wt)|0,v=v+Math.imul(k,je)|0,v=v+Math.imul(m,wt)|0,N=N+Math.imul(m,je)|0,_=_+Math.imul(ae,Ge)|0,v=v+Math.imul(ae,Ve)|0,v=v+Math.imul(W,Ge)|0,N=N+Math.imul(W,Ve)|0,_=_+Math.imul(Y,qe)|0,v=v+Math.imul(Y,$e)|0,v=v+Math.imul(ne,qe)|0,N=N+Math.imul(ne,$e)|0;var sl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(sl>>>26)|0,sl&=67108863,_=Math.imul(me,te),v=Math.imul(me,le),v=v+Math.imul(ge,te)|0,N=Math.imul(ge,le),_=_+Math.imul(ue,we)|0,v=v+Math.imul(ue,Se)|0,v=v+Math.imul(Ee,we)|0,N=N+Math.imul(Ee,Se)|0,_=_+Math.imul(ie,gt)|0,v=v+Math.imul(ie,mt)|0,v=v+Math.imul(de,gt)|0,N=N+Math.imul(de,mt)|0,_=_+Math.imul(X,wt)|0,v=v+Math.imul(X,je)|0,v=v+Math.imul(Z,wt)|0,N=N+Math.imul(Z,je)|0,_=_+Math.imul(k,Ge)|0,v=v+Math.imul(k,Ve)|0,v=v+Math.imul(m,Ge)|0,N=N+Math.imul(m,Ve)|0,_=_+Math.imul(ae,qe)|0,v=v+Math.imul(ae,$e)|0,v=v+Math.imul(W,qe)|0,N=N+Math.imul(W,$e)|0,_=_+Math.imul(Y,ze)|0,v=v+Math.imul(Y,We)|0,v=v+Math.imul(ne,ze)|0,N=N+Math.imul(ne,We)|0;var ol=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(ol>>>26)|0,ol&=67108863,_=Math.imul(ve,te),v=Math.imul(ve,le),v=v+Math.imul(he,te)|0,N=Math.imul(he,le),_=_+Math.imul(me,we)|0,v=v+Math.imul(me,Se)|0,v=v+Math.imul(ge,we)|0,N=N+Math.imul(ge,Se)|0,_=_+Math.imul(ue,gt)|0,v=v+Math.imul(ue,mt)|0,v=v+Math.imul(Ee,gt)|0,N=N+Math.imul(Ee,mt)|0,_=_+Math.imul(ie,wt)|0,v=v+Math.imul(ie,je)|0,v=v+Math.imul(de,wt)|0,N=N+Math.imul(de,je)|0,_=_+Math.imul(X,Ge)|0,v=v+Math.imul(X,Ve)|0,v=v+Math.imul(Z,Ge)|0,N=N+Math.imul(Z,Ve)|0,_=_+Math.imul(k,qe)|0,v=v+Math.imul(k,$e)|0,v=v+Math.imul(m,qe)|0,N=N+Math.imul(m,$e)|0,_=_+Math.imul(ae,ze)|0,v=v+Math.imul(ae,We)|0,v=v+Math.imul(W,ze)|0,N=N+Math.imul(W,We)|0,_=_+Math.imul(Y,Xe)|0,v=v+Math.imul(Y,Je)|0,v=v+Math.imul(ne,Xe)|0,N=N+Math.imul(ne,Je)|0;var al=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(al>>>26)|0,al&=67108863,_=Math.imul(M,te),v=Math.imul(M,le),v=v+Math.imul(A,te)|0,N=Math.imul(A,le),_=_+Math.imul(ve,we)|0,v=v+Math.imul(ve,Se)|0,v=v+Math.imul(he,we)|0,N=N+Math.imul(he,Se)|0,_=_+Math.imul(me,gt)|0,v=v+Math.imul(me,mt)|0,v=v+Math.imul(ge,gt)|0,N=N+Math.imul(ge,mt)|0,_=_+Math.imul(ue,wt)|0,v=v+Math.imul(ue,je)|0,v=v+Math.imul(Ee,wt)|0,N=N+Math.imul(Ee,je)|0,_=_+Math.imul(ie,Ge)|0,v=v+Math.imul(ie,Ve)|0,v=v+Math.imul(de,Ge)|0,N=N+Math.imul(de,Ve)|0,_=_+Math.imul(X,qe)|0,v=v+Math.imul(X,$e)|0,v=v+Math.imul(Z,qe)|0,N=N+Math.imul(Z,$e)|0,_=_+Math.imul(k,ze)|0,v=v+Math.imul(k,We)|0,v=v+Math.imul(m,ze)|0,N=N+Math.imul(m,We)|0,_=_+Math.imul(ae,Xe)|0,v=v+Math.imul(ae,Je)|0,v=v+Math.imul(W,Xe)|0,N=N+Math.imul(W,Je)|0,_=_+Math.imul(Y,Ye)|0,v=v+Math.imul(Y,Qe)|0,v=v+Math.imul(ne,Ye)|0,N=N+Math.imul(ne,Qe)|0;var cl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(cl>>>26)|0,cl&=67108863,_=Math.imul(D,te),v=Math.imul(D,le),v=v+Math.imul($,te)|0,N=Math.imul($,le),_=_+Math.imul(M,we)|0,v=v+Math.imul(M,Se)|0,v=v+Math.imul(A,we)|0,N=N+Math.imul(A,Se)|0,_=_+Math.imul(ve,gt)|0,v=v+Math.imul(ve,mt)|0,v=v+Math.imul(he,gt)|0,N=N+Math.imul(he,mt)|0,_=_+Math.imul(me,wt)|0,v=v+Math.imul(me,je)|0,v=v+Math.imul(ge,wt)|0,N=N+Math.imul(ge,je)|0,_=_+Math.imul(ue,Ge)|0,v=v+Math.imul(ue,Ve)|0,v=v+Math.imul(Ee,Ge)|0,N=N+Math.imul(Ee,Ve)|0,_=_+Math.imul(ie,qe)|0,v=v+Math.imul(ie,$e)|0,v=v+Math.imul(de,qe)|0,N=N+Math.imul(de,$e)|0,_=_+Math.imul(X,ze)|0,v=v+Math.imul(X,We)|0,v=v+Math.imul(Z,ze)|0,N=N+Math.imul(Z,We)|0,_=_+Math.imul(k,Xe)|0,v=v+Math.imul(k,Je)|0,v=v+Math.imul(m,Xe)|0,N=N+Math.imul(m,Je)|0,_=_+Math.imul(ae,Ye)|0,v=v+Math.imul(ae,Qe)|0,v=v+Math.imul(W,Ye)|0,N=N+Math.imul(W,Qe)|0,_=_+Math.imul(Y,Bt)|0,v=v+Math.imul(Y,kt)|0,v=v+Math.imul(ne,Bt)|0,N=N+Math.imul(ne,kt)|0;var fl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(fl>>>26)|0,fl&=67108863,_=Math.imul(D,we),v=Math.imul(D,Se),v=v+Math.imul($,we)|0,N=Math.imul($,Se),_=_+Math.imul(M,gt)|0,v=v+Math.imul(M,mt)|0,v=v+Math.imul(A,gt)|0,N=N+Math.imul(A,mt)|0,_=_+Math.imul(ve,wt)|0,v=v+Math.imul(ve,je)|0,v=v+Math.imul(he,wt)|0,N=N+Math.imul(he,je)|0,_=_+Math.imul(me,Ge)|0,v=v+Math.imul(me,Ve)|0,v=v+Math.imul(ge,Ge)|0,N=N+Math.imul(ge,Ve)|0,_=_+Math.imul(ue,qe)|0,v=v+Math.imul(ue,$e)|0,v=v+Math.imul(Ee,qe)|0,N=N+Math.imul(Ee,$e)|0,_=_+Math.imul(ie,ze)|0,v=v+Math.imul(ie,We)|0,v=v+Math.imul(de,ze)|0,N=N+Math.imul(de,We)|0,_=_+Math.imul(X,Xe)|0,v=v+Math.imul(X,Je)|0,v=v+Math.imul(Z,Xe)|0,N=N+Math.imul(Z,Je)|0,_=_+Math.imul(k,Ye)|0,v=v+Math.imul(k,Qe)|0,v=v+Math.imul(m,Ye)|0,N=N+Math.imul(m,Qe)|0,_=_+Math.imul(ae,Bt)|0,v=v+Math.imul(ae,kt)|0,v=v+Math.imul(W,Bt)|0,N=N+Math.imul(W,kt)|0;var ul=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(ul>>>26)|0,ul&=67108863,_=Math.imul(D,gt),v=Math.imul(D,mt),v=v+Math.imul($,gt)|0,N=Math.imul($,mt),_=_+Math.imul(M,wt)|0,v=v+Math.imul(M,je)|0,v=v+Math.imul(A,wt)|0,N=N+Math.imul(A,je)|0,_=_+Math.imul(ve,Ge)|0,v=v+Math.imul(ve,Ve)|0,v=v+Math.imul(he,Ge)|0,N=N+Math.imul(he,Ve)|0,_=_+Math.imul(me,qe)|0,v=v+Math.imul(me,$e)|0,v=v+Math.imul(ge,qe)|0,N=N+Math.imul(ge,$e)|0,_=_+Math.imul(ue,ze)|0,v=v+Math.imul(ue,We)|0,v=v+Math.imul(Ee,ze)|0,N=N+Math.imul(Ee,We)|0,_=_+Math.imul(ie,Xe)|0,v=v+Math.imul(ie,Je)|0,v=v+Math.imul(de,Xe)|0,N=N+Math.imul(de,Je)|0,_=_+Math.imul(X,Ye)|0,v=v+Math.imul(X,Qe)|0,v=v+Math.imul(Z,Ye)|0,N=N+Math.imul(Z,Qe)|0,_=_+Math.imul(k,Bt)|0,v=v+Math.imul(k,kt)|0,v=v+Math.imul(m,Bt)|0,N=N+Math.imul(m,kt)|0;var ll=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(ll>>>26)|0,ll&=67108863,_=Math.imul(D,wt),v=Math.imul(D,je),v=v+Math.imul($,wt)|0,N=Math.imul($,je),_=_+Math.imul(M,Ge)|0,v=v+Math.imul(M,Ve)|0,v=v+Math.imul(A,Ge)|0,N=N+Math.imul(A,Ve)|0,_=_+Math.imul(ve,qe)|0,v=v+Math.imul(ve,$e)|0,v=v+Math.imul(he,qe)|0,N=N+Math.imul(he,$e)|0,_=_+Math.imul(me,ze)|0,v=v+Math.imul(me,We)|0,v=v+Math.imul(ge,ze)|0,N=N+Math.imul(ge,We)|0,_=_+Math.imul(ue,Xe)|0,v=v+Math.imul(ue,Je)|0,v=v+Math.imul(Ee,Xe)|0,N=N+Math.imul(Ee,Je)|0,_=_+Math.imul(ie,Ye)|0,v=v+Math.imul(ie,Qe)|0,v=v+Math.imul(de,Ye)|0,N=N+Math.imul(de,Qe)|0,_=_+Math.imul(X,Bt)|0,v=v+Math.imul(X,kt)|0,v=v+Math.imul(Z,Bt)|0,N=N+Math.imul(Z,kt)|0;var dl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(dl>>>26)|0,dl&=67108863,_=Math.imul(D,Ge),v=Math.imul(D,Ve),v=v+Math.imul($,Ge)|0,N=Math.imul($,Ve),_=_+Math.imul(M,qe)|0,v=v+Math.imul(M,$e)|0,v=v+Math.imul(A,qe)|0,N=N+Math.imul(A,$e)|0,_=_+Math.imul(ve,ze)|0,v=v+Math.imul(ve,We)|0,v=v+Math.imul(he,ze)|0,N=N+Math.imul(he,We)|0,_=_+Math.imul(me,Xe)|0,v=v+Math.imul(me,Je)|0,v=v+Math.imul(ge,Xe)|0,N=N+Math.imul(ge,Je)|0,_=_+Math.imul(ue,Ye)|0,v=v+Math.imul(ue,Qe)|0,v=v+Math.imul(Ee,Ye)|0,N=N+Math.imul(Ee,Qe)|0,_=_+Math.imul(ie,Bt)|0,v=v+Math.imul(ie,kt)|0,v=v+Math.imul(de,Bt)|0,N=N+Math.imul(de,kt)|0;var hl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(hl>>>26)|0,hl&=67108863,_=Math.imul(D,qe),v=Math.imul(D,$e),v=v+Math.imul($,qe)|0,N=Math.imul($,$e),_=_+Math.imul(M,ze)|0,v=v+Math.imul(M,We)|0,v=v+Math.imul(A,ze)|0,N=N+Math.imul(A,We)|0,_=_+Math.imul(ve,Xe)|0,v=v+Math.imul(ve,Je)|0,v=v+Math.imul(he,Xe)|0,N=N+Math.imul(he,Je)|0,_=_+Math.imul(me,Ye)|0,v=v+Math.imul(me,Qe)|0,v=v+Math.imul(ge,Ye)|0,N=N+Math.imul(ge,Qe)|0,_=_+Math.imul(ue,Bt)|0,v=v+Math.imul(ue,kt)|0,v=v+Math.imul(Ee,Bt)|0,N=N+Math.imul(Ee,kt)|0;var pl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(pl>>>26)|0,pl&=67108863,_=Math.imul(D,ze),v=Math.imul(D,We),v=v+Math.imul($,ze)|0,N=Math.imul($,We),_=_+Math.imul(M,Xe)|0,v=v+Math.imul(M,Je)|0,v=v+Math.imul(A,Xe)|0,N=N+Math.imul(A,Je)|0,_=_+Math.imul(ve,Ye)|0,v=v+Math.imul(ve,Qe)|0,v=v+Math.imul(he,Ye)|0,N=N+Math.imul(he,Qe)|0,_=_+Math.imul(me,Bt)|0,v=v+Math.imul(me,kt)|0,v=v+Math.imul(ge,Bt)|0,N=N+Math.imul(ge,kt)|0;var gl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(gl>>>26)|0,gl&=67108863,_=Math.imul(D,Xe),v=Math.imul(D,Je),v=v+Math.imul($,Xe)|0,N=Math.imul($,Je),_=_+Math.imul(M,Ye)|0,v=v+Math.imul(M,Qe)|0,v=v+Math.imul(A,Ye)|0,N=N+Math.imul(A,Qe)|0,_=_+Math.imul(ve,Bt)|0,v=v+Math.imul(ve,kt)|0,v=v+Math.imul(he,Bt)|0,N=N+Math.imul(he,kt)|0;var bl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(bl>>>26)|0,bl&=67108863,_=Math.imul(D,Ye),v=Math.imul(D,Qe),v=v+Math.imul($,Ye)|0,N=Math.imul($,Qe),_=_+Math.imul(M,Bt)|0,v=v+Math.imul(M,kt)|0,v=v+Math.imul(A,Bt)|0,N=N+Math.imul(A,kt)|0;var vl=(O+_|0)+((v&8191)<<13)|0;O=(N+(v>>>13)|0)+(vl>>>26)|0,vl&=67108863,_=Math.imul(D,Bt),v=Math.imul(D,kt),v=v+Math.imul($,Bt)|0,N=Math.imul($,kt);var ml=(O+_|0)+((v&8191)<<13)|0;return O=(N+(v>>>13)|0)+(ml>>>26)|0,ml&=67108863,S[0]=el,S[1]=tl,S[2]=rl,S[3]=nl,S[4]=il,S[5]=sl,S[6]=ol,S[7]=al,S[8]=cl,S[9]=fl,S[10]=ul,S[11]=ll,S[12]=dl,S[13]=hl,S[14]=pl,S[15]=gl,S[16]=bl,S[17]=vl,S[18]=ml,O!==0&&(S[19]=O,g.length++),g};Math.imul||(H=L);function G(E,u,h){h.negative=u.negative^E.negative,h.length=E.length+u.length;for(var g=0,b=0,p=0;p<h.length-1;p++){var S=b;b=0;for(var O=g&67108863,_=Math.min(p,u.length-1),v=Math.max(0,p-E.length+1);v<=_;v++){var N=p-v,ee=E.words[N]|0,Y=u.words[v]|0,ne=ee*Y,se=ne&67108863;S=S+(ne/67108864|0)|0,se=se+O|0,O=se&67108863,S=S+(se>>>26)|0,b+=S>>>26,S&=67108863}h.words[p]=O,g=S,S=b}return g!==0?h.words[p]=g:h.length--,h.strip()}function V(E,u,h){var g=new C;return g.mulp(E,u,h)}s.prototype.mulTo=function(u,h){var g,b=this.length+u.length;return this.length===10&&u.length===10?g=H(this,u,h):b<63?g=L(this,u,h):b<1024?g=G(this,u,h):g=V(this,u,h),g};function C(E,u){this.x=E,this.y=u}C.prototype.makeRBT=function(u){for(var h=new Array(u),g=s.prototype._countBits(u)-1,b=0;b<u;b++)h[b]=this.revBin(b,g,u);return h},C.prototype.revBin=function(u,h,g){if(u===0||u===g-1)return u;for(var b=0,p=0;p<h;p++)b|=(u&1)<<h-p-1,u>>=1;return b},C.prototype.permute=function(u,h,g,b,p,S){for(var O=0;O<S;O++)b[O]=h[u[O]],p[O]=g[u[O]]},C.prototype.transform=function(u,h,g,b,p,S){this.permute(S,u,h,g,b,p);for(var O=1;O<p;O<<=1)for(var _=O<<1,v=Math.cos(2*Math.PI/_),N=Math.sin(2*Math.PI/_),ee=0;ee<p;ee+=_)for(var Y=v,ne=N,se=0;se<O;se++){var ae=g[ee+se],W=b[ee+se],F=g[ee+se+O],k=b[ee+se+O],m=Y*F-ne*k;k=Y*k+ne*F,F=m,g[ee+se]=ae+F,b[ee+se]=W+k,g[ee+se+O]=ae-F,b[ee+se+O]=W-k,se!==_&&(m=v*Y-N*ne,ne=v*ne+N*Y,Y=m)}},C.prototype.guessLen13b=function(u,h){var g=Math.max(h,u)|1,b=g&1,p=0;for(g=g/2|0;g;g=g>>>1)p++;return 1<<p+1+b},C.prototype.conjugate=function(u,h,g){if(!(g<=1))for(var b=0;b<g/2;b++){var p=u[b];u[b]=u[g-b-1],u[g-b-1]=p,p=h[b],h[b]=-h[g-b-1],h[g-b-1]=-p}},C.prototype.normalize13b=function(u,h){for(var g=0,b=0;b<h/2;b++){var p=Math.round(u[2*b+1]/h)*8192+Math.round(u[2*b]/h)+g;u[b]=p&67108863,p<67108864?g=0:g=p/67108864|0}return u},C.prototype.convert13b=function(u,h,g,b){for(var p=0,S=0;S<h;S++)p=p+(u[S]|0),g[2*S]=p&8191,p=p>>>13,g[2*S+1]=p&8191,p=p>>>13;for(S=2*h;S<b;++S)g[S]=0;n(p===0),n((p&-8192)===0)},C.prototype.stub=function(u){for(var h=new Array(u),g=0;g<u;g++)h[g]=0;return h},C.prototype.mulp=function(u,h,g){var b=2*this.guessLen13b(u.length,h.length),p=this.makeRBT(b),S=this.stub(b),O=new Array(b),_=new Array(b),v=new Array(b),N=new Array(b),ee=new Array(b),Y=new Array(b),ne=g.words;ne.length=b,this.convert13b(u.words,u.length,O,b),this.convert13b(h.words,h.length,N,b),this.transform(O,S,_,v,b,p),this.transform(N,S,ee,Y,b,p);for(var se=0;se<b;se++){var ae=_[se]*ee[se]-v[se]*Y[se];v[se]=_[se]*Y[se]+v[se]*ee[se],_[se]=ae}return this.conjugate(_,v,b),this.transform(_,v,ne,S,b,p),this.conjugate(ne,S,b),this.normalize13b(ne,b),g.negative=u.negative^h.negative,g.length=u.length+h.length,g.strip()},s.prototype.mul=function(u){var h=new s(null);return h.words=new Array(this.length+u.length),this.mulTo(u,h)},s.prototype.mulf=function(u){var h=new s(null);return h.words=new Array(this.length+u.length),V(this,u,h)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){n(typeof u=="number"),n(u<67108864);for(var h=0,g=0;g<this.length;g++){var b=(this.words[g]|0)*u,p=(b&67108863)+(h&67108863);h>>=26,h+=b/67108864|0,h+=p>>>26,this.words[g]=p&67108863}return h!==0&&(this.words[g]=h,this.length++),this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var h=P(u);if(h.length===0)return new s(1);for(var g=this,b=0;b<h.length&&h[b]===0;b++,g=g.sqr());if(++b<h.length)for(var p=g.sqr();b<h.length;b++,p=p.sqr())h[b]!==0&&(g=g.mul(p));return g},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var h=u%26,g=(u-h)/26,b=67108863>>>26-h<<26-h,p;if(h!==0){var S=0;for(p=0;p<this.length;p++){var O=this.words[p]&b,_=(this.words[p]|0)-O<<h;this.words[p]=_|S,S=O>>>26-h}S&&(this.words[p]=S,this.length++)}if(g!==0){for(p=this.length-1;p>=0;p--)this.words[p+g]=this.words[p];for(p=0;p<g;p++)this.words[p]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,h,g){n(typeof u=="number"&&u>=0);var b;h?b=(h-h%26)/26:b=0;var p=u%26,S=Math.min((u-p)/26,this.length),O=67108863^67108863>>>p<<p,_=g;if(b-=S,b=Math.max(0,b),_){for(var v=0;v<S;v++)_.words[v]=this.words[v];_.length=S}if(S!==0)if(this.length>S)for(this.length-=S,v=0;v<this.length;v++)this.words[v]=this.words[v+S];else this.words[0]=0,this.length=1;var N=0;for(v=this.length-1;v>=0&&(N!==0||v>=b);v--){var ee=this.words[v]|0;this.words[v]=N<<26-p|ee>>>p,N=ee&O}return _&&N!==0&&(_.words[_.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(u,h,g){return n(this.negative===0),this.iushrn(u,h,g)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var h=u%26,g=(u-h)/26,b=1<<h;if(this.length<=g)return!1;var p=this.words[g];return!!(p&b)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var h=u%26,g=(u-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(h!==0&&g++,this.length=Math.min(g,this.length),h!==0){var b=67108863^67108863>>>h<<h;this.words[this.length-1]&=b}return this.strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,h,g){var b=u.length+g,p;this._expand(b);var S,O=0;for(p=0;p<u.length;p++){S=(this.words[p+g]|0)+O;var _=(u.words[p]|0)*h;S-=_&67108863,O=(S>>26)-(_/67108864|0),this.words[p+g]=S&67108863}for(;p<this.length-g;p++)S=(this.words[p+g]|0)+O,O=S>>26,this.words[p+g]=S&67108863;if(O===0)return this.strip();for(n(O===-1),O=0,p=0;p<this.length;p++)S=-(this.words[p]|0)+O,O=S>>26,this.words[p]=S&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(u,h){var g=this.length-u.length,b=this.clone(),p=u,S=p.words[p.length-1]|0,O=this._countBits(S);g=26-O,g!==0&&(p=p.ushln(g),b.iushln(g),S=p.words[p.length-1]|0);var _=b.length-p.length,v;if(h!=="mod"){v=new s(null),v.length=_+1,v.words=new Array(v.length);for(var N=0;N<v.length;N++)v.words[N]=0}var ee=b.clone()._ishlnsubmul(p,1,_);ee.negative===0&&(b=ee,v&&(v.words[_]=1));for(var Y=_-1;Y>=0;Y--){var ne=(b.words[p.length+Y]|0)*67108864+(b.words[p.length+Y-1]|0);for(ne=Math.min(ne/S|0,67108863),b._ishlnsubmul(p,ne,Y);b.negative!==0;)ne--,b.negative=0,b._ishlnsubmul(p,1,Y),b.isZero()||(b.negative^=1);v&&(v.words[Y]=ne)}return v&&v.strip(),b.strip(),h!=="div"&&g!==0&&b.iushrn(g),{div:v||null,mod:b}},s.prototype.divmod=function(u,h,g){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var b,p,S;return this.negative!==0&&u.negative===0?(S=this.neg().divmod(u,h),h!=="mod"&&(b=S.div.neg()),h!=="div"&&(p=S.mod.neg(),g&&p.negative!==0&&p.iadd(u)),{div:b,mod:p}):this.negative===0&&u.negative!==0?(S=this.divmod(u.neg(),h),h!=="mod"&&(b=S.div.neg()),{div:b,mod:S.mod}):this.negative&u.negative?(S=this.neg().divmod(u.neg(),h),h!=="div"&&(p=S.mod.neg(),g&&p.negative!==0&&p.isub(u)),{div:S.div,mod:p}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?h==="div"?{div:this.divn(u.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modn(u.words[0]))}:this._wordDiv(u,h)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var h=this.divmod(u);if(h.mod.isZero())return h.div;var g=h.div.negative!==0?h.mod.isub(u):h.mod,b=u.ushrn(1),p=u.andln(1),S=g.cmp(b);return S<0||p===1&&S===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modn=function(u){n(u<=67108863);for(var h=(1<<26)%u,g=0,b=this.length-1;b>=0;b--)g=(h*g+(this.words[b]|0))%u;return g},s.prototype.idivn=function(u){n(u<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var b=(this.words[g]|0)+h*67108864;this.words[g]=b/u|0,h=b%u}return this.strip()},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var h=this,g=u.clone();h.negative!==0?h=h.umod(u):h=h.clone();for(var b=new s(1),p=new s(0),S=new s(0),O=new s(1),_=0;h.isEven()&&g.isEven();)h.iushrn(1),g.iushrn(1),++_;for(var v=g.clone(),N=h.clone();!h.isZero();){for(var ee=0,Y=1;!(h.words[0]&Y)&&ee<26;++ee,Y<<=1);if(ee>0)for(h.iushrn(ee);ee-- >0;)(b.isOdd()||p.isOdd())&&(b.iadd(v),p.isub(N)),b.iushrn(1),p.iushrn(1);for(var ne=0,se=1;!(g.words[0]&se)&&ne<26;++ne,se<<=1);if(ne>0)for(g.iushrn(ne);ne-- >0;)(S.isOdd()||O.isOdd())&&(S.iadd(v),O.isub(N)),S.iushrn(1),O.iushrn(1);h.cmp(g)>=0?(h.isub(g),b.isub(S),p.isub(O)):(g.isub(h),S.isub(b),O.isub(p))}return{a:S,b:O,gcd:g.iushln(_)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var h=this,g=u.clone();h.negative!==0?h=h.umod(u):h=h.clone();for(var b=new s(1),p=new s(0),S=g.clone();h.cmpn(1)>0&&g.cmpn(1)>0;){for(var O=0,_=1;!(h.words[0]&_)&&O<26;++O,_<<=1);if(O>0)for(h.iushrn(O);O-- >0;)b.isOdd()&&b.iadd(S),b.iushrn(1);for(var v=0,N=1;!(g.words[0]&N)&&v<26;++v,N<<=1);if(v>0)for(g.iushrn(v);v-- >0;)p.isOdd()&&p.iadd(S),p.iushrn(1);h.cmp(g)>=0?(h.isub(g),b.isub(p)):(g.isub(h),p.isub(b))}var ee;return h.cmpn(1)===0?ee=b:ee=p,ee.cmpn(0)<0&&ee.iadd(u),ee},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var h=this.clone(),g=u.clone();h.negative=0,g.negative=0;for(var b=0;h.isEven()&&g.isEven();b++)h.iushrn(1),g.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;g.isEven();)g.iushrn(1);var p=h.cmp(g);if(p<0){var S=h;h=g,g=S}else if(p===0||g.cmpn(1)===0)break;h.isub(g)}while(!0);return g.iushln(b)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var h=u%26,g=(u-h)/26,b=1<<h;if(this.length<=g)return this._expand(g+1),this.words[g]|=b,this;for(var p=b,S=g;p!==0&&S<this.length;S++){var O=this.words[S]|0;O+=p,p=O>>>26,O&=67108863,this.words[S]=O}return p!==0&&(this.words[S]=p,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var h=u<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var g;if(this.length>1)g=1;else{h&&(u=-u),n(u<=67108863,"Number is too big");var b=this.words[0]|0;g=b===u?0:b<u?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var h=this.ucmp(u);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var h=0,g=this.length-1;g>=0;g--){var b=this.words[g]|0,p=u.words[g]|0;if(b!==p){b<p?h=-1:b>p&&(h=1);break}}return h},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new T(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var q={k256:null,p224:null,p192:null,p25519:null};function U(E,u){this.name=E,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},U.prototype.ireduce=function(u){var h=u,g;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),g=h.bitLength();while(g>this.n);var b=g<this.n?-1:h.ucmp(this.p);return b===0?(h.words[0]=0,h.length=1):b>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},U.prototype.split=function(u,h){u.iushrn(this.n,0,h)},U.prototype.imulK=function(u){return u.imul(this.k)};function K(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(K,U),K.prototype.split=function(u,h){for(var g=4194303,b=Math.min(u.length,9),p=0;p<b;p++)h.words[p]=u.words[p];if(h.length=b,u.length<=9){u.words[0]=0,u.length=1;return}var S=u.words[9];for(h.words[h.length++]=S&g,p=10;p<u.length;p++){var O=u.words[p]|0;u.words[p-10]=(O&g)<<4|S>>>22,S=O}S>>>=22,u.words[p-10]=S,S===0&&u.length>10?u.length-=10:u.length-=9},K.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var h=0,g=0;g<u.length;g++){var b=u.words[g]|0;h+=b*977,u.words[g]=h&67108863,h=b*64+(h/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function j(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(j,U);function y(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(y,U);function w(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(w,U),w.prototype.imulK=function(u){for(var h=0,g=0;g<u.length;g++){var b=(u.words[g]|0)*19+h,p=b&67108863;b>>>=26,u.words[g]=p,h=b}return h!==0&&(u.words[u.length++]=h),u},s._prime=function(u){if(q[u])return q[u];var h;if(u==="k256")h=new K;else if(u==="p224")h=new j;else if(u==="p192")h=new y;else if(u==="p25519")h=new w;else throw new Error("Unknown prime "+u);return q[u]=h,h};function T(E){if(typeof E=="string"){var u=s._prime(E);this.m=u.p,this.prime=u}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}T.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},T.prototype._verify2=function(u,h){n((u.negative|h.negative)===0,"red works only with positives"),n(u.red&&u.red===h.red,"red works only with red numbers")},T.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},T.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},T.prototype.add=function(u,h){this._verify2(u,h);var g=u.add(h);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},T.prototype.iadd=function(u,h){this._verify2(u,h);var g=u.iadd(h);return g.cmp(this.m)>=0&&g.isub(this.m),g},T.prototype.sub=function(u,h){this._verify2(u,h);var g=u.sub(h);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},T.prototype.isub=function(u,h){this._verify2(u,h);var g=u.isub(h);return g.cmpn(0)<0&&g.iadd(this.m),g},T.prototype.shl=function(u,h){return this._verify1(u),this.imod(u.ushln(h))},T.prototype.imul=function(u,h){return this._verify2(u,h),this.imod(u.imul(h))},T.prototype.mul=function(u,h){return this._verify2(u,h),this.imod(u.mul(h))},T.prototype.isqr=function(u){return this.imul(u,u.clone())},T.prototype.sqr=function(u){return this.mul(u,u)},T.prototype.sqrt=function(u){if(u.isZero())return u.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(u,g)}for(var b=this.m.subn(1),p=0;!b.isZero()&&b.andln(1)===0;)p++,b.iushrn(1);n(!b.isZero());var S=new s(1).toRed(this),O=S.redNeg(),_=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,_).cmp(O)!==0;)v.redIAdd(O);for(var N=this.pow(v,b),ee=this.pow(u,b.addn(1).iushrn(1)),Y=this.pow(u,b),ne=p;Y.cmp(S)!==0;){for(var se=Y,ae=0;se.cmp(S)!==0;ae++)se=se.redSqr();n(ae<ne);var W=this.pow(N,new s(1).iushln(ne-ae-1));ee=ee.redMul(W),N=W.redSqr(),Y=Y.redMul(N),ne=ae}return ee},T.prototype.invm=function(u){var h=u._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},T.prototype.pow=function(u,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return u.clone();var g=4,b=new Array(1<<g);b[0]=new s(1).toRed(this),b[1]=u;for(var p=2;p<b.length;p++)b[p]=this.mul(b[p-1],u);var S=b[0],O=0,_=0,v=h.bitLength()%26;for(v===0&&(v=26),p=h.length-1;p>=0;p--){for(var N=h.words[p],ee=v-1;ee>=0;ee--){var Y=N>>ee&1;if(S!==b[0]&&(S=this.sqr(S)),Y===0&&O===0){_=0;continue}O<<=1,O|=Y,_++,!(_!==g&&(p!==0||ee!==0))&&(S=this.mul(S,b[O]),_=0,O=0)}v=26}return S},T.prototype.convertTo=function(u){var h=u.umod(this.m);return h===u?h.clone():h},T.prototype.convertFrom=function(u){var h=u.clone();return h.red=null,h},s.mont=function(u){return new x(u)};function x(E){T.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(x,T),x.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},x.prototype.convertFrom=function(u){var h=this.imod(u.mul(this.rinv));return h.red=null,h},x.prototype.imul=function(u,h){if(u.isZero()||h.isZero())return u.words[0]=0,u.length=1,u;var g=u.imul(h),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=g.isub(b).iushrn(this.shift),S=p;return p.cmp(this.m)>=0?S=p.isub(this.m):p.cmpn(0)<0&&(S=p.iadd(this.m)),S._forceRed(this)},x.prototype.mul=function(u,h){if(u.isZero()||h.isZero())return new s(0)._forceRed(this);var g=u.mul(h),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=g.isub(b).iushrn(this.shift),S=p;return p.cmp(this.m)>=0?S=p.isub(this.m):p.cmpn(0)<0&&(S=p.iadd(this.m)),S._forceRed(this)},x.prototype.invm=function(u){var h=this.imod(u._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(t,Ma)})(U5);var to=Hv;function Hv(t,e){if(!t)throw new Error(e||"Assertion failed")}Hv.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Yh={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),f=l>>8,d=l&255;f?a.push(f,d):a.push(d)}return a}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",a=0;a<s.length;a++)o+=n(s[a].toString(16));return o}e.toHex=i,e.encode=function(o,a){return a==="hex"?i(o):o}})(Yh);(function(t){var e=t,r=xn,n=to,i=Yh;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,d,I){var P=new Array(Math.max(f.bitLength(),I)+1);P.fill(0);for(var L=1<<d+1,H=f.clone(),G=0;G<P.length;G++){var V,C=H.andln(L-1);H.isOdd()?(C>(L>>1)-1?V=(L>>1)-C:V=C,H.isubn(V)):V=0,P[G]=V,H.iushrn(1)}return P}e.getNAF=s;function o(f,d){var I=[[],[]];f=f.clone(),d=d.clone();for(var P=0,L=0,H;f.cmpn(-P)>0||d.cmpn(-L)>0;){var G=f.andln(3)+P&3,V=d.andln(3)+L&3;G===3&&(G=-1),V===3&&(V=-1);var C;G&1?(H=f.andln(7)+P&7,(H===3||H===5)&&V===2?C=-G:C=G):C=0,I[0].push(C);var q;V&1?(H=d.andln(7)+L&7,(H===3||H===5)&&G===2?q=-V:q=V):q=0,I[1].push(q),2*P===C+1&&(P=1-P),2*L===q+1&&(L=1-L),f.iushrn(1),d.iushrn(1)}return I}e.getJSF=o;function a(f,d,I){var P="_"+d;f.prototype[d]=function(){return this[P]!==void 0?this[P]:this[P]=I.call(this)}}e.cachedProperty=a;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function l(f){return new r(f,"hex","le")}e.intFromLE=l})(Xr);var Qa={},K5={get exports(){return Qa},set exports(t){Qa=t}},ed;K5.exports=function(e){return ed||(ed=new ls(null)),ed.generate(e)};function ls(t){this.rand=t}Qa.Rand=ls;ls.prototype.generate=function(e){return this._rand(e)};ls.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ls.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?ls.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(ls.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o1=lc;if(typeof o1.randomBytes!="function")throw new Error("Not supported");ls.prototype._rand=function(e){return o1.randomBytes(e)}}catch{}var Qh={},Ts=xn,Ec=Xr,Pf=Ec.getNAF,H5=Ec.getJSF,Nf=Ec.assert;function Rs(t,e){this.type=t,this.p=new Ts(e.p,16),this.red=e.prime?Ts.red(e.prime):Ts.mont(this.p),this.zero=new Ts(0).toRed(this.red),this.one=new Ts(1).toRed(this.red),this.two=new Ts(2).toRed(this.red),this.n=e.n&&new Ts(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Tu=Rs;Rs.prototype.point=function(){throw new Error("Not implemented")};Rs.prototype.validate=function(){throw new Error("Not implemented")};Rs.prototype._fixedNafMul=function(e,r){Nf(e.precomputed);var n=e._getDoubles(),i=Pf(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),I=s;I>0;I--){for(a=0;a<o.length;a++)c=o[a],c===I?d=d.mixedAdd(n.points[a]):c===-I&&(d=d.mixedAdd(n.points[a].neg()));f=f.add(d)}return f.toP()};Rs.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Pf(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var f=o[c];Nf(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};Rs.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,f,d,I;for(f=0;f<i;f++){I=r[f];var P=I._getNAFPoints(e);o[f]=P.wnd,a[f]=P.points}for(f=i-1;f>=1;f-=2){var L=f-1,H=f;if(o[L]!==1||o[H]!==1){c[L]=Pf(n[L],o[L],this._bitLength),c[H]=Pf(n[H],o[H],this._bitLength),l=Math.max(c[L].length,l),l=Math.max(c[H].length,l);continue}var G=[r[L],null,null,r[H]];r[L].y.cmp(r[H].y)===0?(G[1]=r[L].add(r[H]),G[2]=r[L].toJ().mixedAdd(r[H].neg())):r[L].y.cmp(r[H].y.redNeg())===0?(G[1]=r[L].toJ().mixedAdd(r[H]),G[2]=r[L].add(r[H].neg())):(G[1]=r[L].toJ().mixedAdd(r[H]),G[2]=r[L].toJ().mixedAdd(r[H].neg()));var V=[-3,-1,-5,-7,0,7,5,1,3],C=H5(n[L],n[H]);for(l=Math.max(C[0].length,l),c[L]=new Array(l),c[H]=new Array(l),d=0;d<l;d++){var q=C[0][d]|0,U=C[1][d]|0;c[L][d]=V[(q+1)*3+(U+1)],c[H][d]=0,a[L]=G}}var K=this.jpoint(null,null,null),j=this._wnafT4;for(f=l;f>=0;f--){for(var y=0;f>=0;){var w=!0;for(d=0;d<i;d++)j[d]=c[d][f]|0,j[d]!==0&&(w=!1);if(!w)break;y++,f--}if(f>=0&&y++,K=K.dblp(y),f<0)break;for(d=0;d<i;d++){var T=j[d];T!==0&&(T>0?I=a[d][T-1>>1]:T<0&&(I=a[d][-T-1>>1].neg()),I.type==="affine"?K=K.mixedAdd(I):K=K.add(I))}}for(f=0;f<i;f++)a[f]=null;return s?K:K.toP()};function fn(t,e){this.curve=t,this.type=e,this.precomputed=null}Rs.BasePoint=fn;fn.prototype.eq=function(){throw new Error("Not implemented")};fn.prototype.validate=function(){return this.curve.validate(this)};Rs.prototype.decodePoint=function(e,r){e=Ec.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Nf(e[e.length-1]%2===0):e[0]===7&&Nf(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};fn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};fn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};fn.prototype.encode=function(e,r){return Ec.encode(this._encode(r),e)};fn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};fn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};fn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};fn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};fn.prototype._getBeta=function(){return null};fn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var F5=Xr,Ot=xn,Zh=Pt,ra=Tu,j5=F5.assert;function un(t){ra.call(this,"short",t),this.a=new Ot(t.a,16).toRed(this.red),this.b=new Ot(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Zh(un,ra);var G5=un;un.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Ot(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Ot(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],j5(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Ot(a.a,16),b:new Ot(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};un.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Ot.mont(e),n=new Ot(2).toRed(r).redInvm(),i=n.redNeg(),s=new Ot(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};un.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Ot(1),o=new Ot(0),a=new Ot(0),c=new Ot(1),l,f,d,I,P,L,H,G=0,V,C;n.cmpn(0)!==0;){var q=i.div(n);V=i.sub(q.mul(n)),C=a.sub(q.mul(s));var U=c.sub(q.mul(o));if(!d&&V.cmp(r)<0)l=H.neg(),f=s,d=V.neg(),I=C;else if(d&&++G===2)break;H=V,i=n,n=V,a=s,s=C,c=o,o=U}P=V.neg(),L=C;var K=d.sqr().add(I.sqr()),j=P.sqr().add(L.sqr());return j.cmp(K)>=0&&(P=l,L=f),d.negative&&(d=d.neg(),I=I.neg()),P.negative&&(P=P.neg(),L=L.neg()),[{a:d,b:I},{a:P,b:L}]};un.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),f=o.mul(i.b),d=e.sub(a).sub(c),I=l.add(f).neg();return{k1:d,k2:I}};un.prototype.pointFromX=function(e,r){e=new Ot(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};un.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};un.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,i,s,o*2,n),d=0;d<o*2;d++)i[d]=null,s[d]=null;return f};function tr(t,e,r,n){ra.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ot(e,16),this.y=new Ot(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Zh(tr,ra.BasePoint);un.prototype.point=function(e,r,n){return new tr(this,e,r,n)};un.prototype.pointFromJSON=function(e,r){return tr.fromJSON(this,e,r)};tr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};tr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};tr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};tr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};tr.prototype.isInfinity=function(){return this.inf};tr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};tr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};tr.prototype.getX=function(){return this.x.fromRed()};tr.prototype.getY=function(){return this.y.fromRed()};tr.prototype.mul=function(e){return e=new Ot(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};tr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};tr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};tr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};tr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};tr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ir(t,e,r,n){ra.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ot(0)):(this.x=new Ot(e,16),this.y=new Ot(r,16),this.z=new Ot(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Zh(ir,ra.BasePoint);un.prototype.jpoint=function(e,r,n){return new ir(this,e,r,n)};ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ir.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),I=i.redMul(f),P=l.redSqr().redIAdd(d).redISub(I).redISub(I),L=l.redMul(I.redISub(P)).redISub(o.redMul(d)),H=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(P,L,H)};ir.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),f=l.redMul(a),d=n.redMul(l),I=c.redSqr().redIAdd(f).redISub(d).redISub(d),P=c.redMul(d.redISub(I)).redISub(s.redMul(f)),L=this.z.redMul(a);return this.curve.jpoint(I,P,L)};ir.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),I=f.redSqr(),P=I.redSqr(),L=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(l)),H=o.redMul(I),G=L.redSqr().redISub(H.redAdd(H)),V=H.redISub(G),C=L.redMul(V);C=C.redIAdd(C).redISub(P);var q=f.redMul(c);r+1<e&&(l=l.redMul(P)),o=G,c=q,f=C}return this.curve.jpoint(o,f.redMul(s),c)};ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ir.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=l,r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),I=this.y.redSqr(),P=I.redSqr(),L=this.x.redAdd(I).redSqr().redISub(d).redISub(P);L=L.redIAdd(L);var H=d.redAdd(d).redIAdd(d),G=H.redSqr(),V=P.redIAdd(P);V=V.redIAdd(V),V=V.redIAdd(V),e=G.redISub(L).redISub(L),r=H.redMul(L.redISub(e)).redISub(V),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};ir.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(l)).redISub(f),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),I=this.y.redSqr(),P=this.x.redMul(I),L=this.x.redSub(d).redMul(this.x.redAdd(d));L=L.redAdd(L).redIAdd(L);var H=P.redIAdd(P);H=H.redIAdd(H);var G=H.redAdd(H);e=L.redSqr().redISub(G),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(d);var V=I.redSqr();V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V),r=L.redMul(H.redISub(e)).redISub(V)}return this.curve.jpoint(e,r,n)};ir.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var f=l.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),I=f.redISub(d),P=a.redSqr();P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=c.redMul(I).redISub(P),H=n.redAdd(n).redMul(i);return this.curve.jpoint(d,L,H)};ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var I=this.x.redMul(c).redISub(d);I=I.redIAdd(I),I=I.redIAdd(I);var P=this.y.redMul(f.redMul(l.redISub(f)).redISub(a.redMul(c)));P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var L=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(I,P,L)};ir.prototype.mul=function(e,r){return e=new Ot(e,r),this.curve._wnafMul(this,e)};ir.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};ir.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var yo=xn,Fv=Pt,Pu=Tu,V5=Xr;function na(t){Pu.call(this,"mont",t),this.a=new yo(t.a,16).toRed(this.red),this.b=new yo(t.b,16).toRed(this.red),this.i4=new yo(4).toRed(this.red).redInvm(),this.two=new yo(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Fv(na,Pu);var q5=na;na.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function er(t,e,r){Pu.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new yo(e,16),this.z=new yo(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Fv(er,Pu.BasePoint);na.prototype.decodePoint=function(e,r){return this.point(V5.toArray(e,r),1)};na.prototype.point=function(e,r){return new er(this,e,r)};na.prototype.pointFromJSON=function(e){return er.fromJSON(this,e)};er.prototype.precompute=function(){};er.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};er.fromJSON=function(e,r){return new er(e,r[0],r[1]||e.one)};er.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};er.prototype.isInfinity=function(){return this.z.cmpn(0)===0};er.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};er.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};er.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,f)};er.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};er.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};er.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};er.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};er.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};er.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var $5=Xr,Li=xn,jv=Pt,Nu=Tu,z5=$5.assert;function fi(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Nu.call(this,"edwards",t),this.a=new Li(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Li(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Li(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),z5(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}jv(fi,Nu);var W5=fi;fi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};fi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};fi.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};fi.prototype.pointFromX=function(e,r){e=new Li(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};fi.prototype.pointFromY=function(e,r){e=new Li(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};fi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function vt(t,e,r,n,i){Nu.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Li(e,16),this.y=new Li(r,16),this.z=n?new Li(n,16):this.curve.one,this.t=i&&new Li(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}jv(vt,Nu.BasePoint);fi.prototype.pointFromJSON=function(e){return vt.fromJSON(this,e)};fi.prototype.point=function(e,r,n,i){return new vt(this,e,r,n,i)};vt.fromJSON=function(e,r){return new vt(e,r[0],r[1],r[2])};vt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};vt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),l=s.redMul(a),f=o.redMul(c),d=s.redMul(c),I=a.redMul(o);return this.curve.point(l,f,I,d)};vt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(n)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),l=f.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(l),s=f.redMul(a.redSub(n)),o=f.redMul(l))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};vt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(r),f=o.redMul(a),d=c.redMul(l),I=o.redMul(l),P=a.redMul(c);return this.curve.point(f,d,P,I)};vt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),f=r.redMul(a).redMul(l),d,I;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),I=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(i)),I=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,I)};vt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};vt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};vt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};vt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};vt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};vt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};vt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};vt.prototype.toP=vt.prototype.normalize;vt.prototype.mixedAdd=vt.prototype.add;(function(t){var e=t;e.base=Tu,e.short=G5,e.mont=q5,e.edwards=W5})(Qh);var Mu={},Lu={},Ze={},X5=to,J5=Pt;Ze.inherits=J5;function Y5(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Q5(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):Y5(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Ze.toArray=Q5;function Z5(t){for(var e="",r=0;r<t.length;r++)e+=Vv(t[r].toString(16));return e}Ze.toHex=Z5;function Gv(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ze.htonl=Gv;function e4(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=Gv(i)),r+=qv(i.toString(16))}return r}Ze.toHex32=e4;function Vv(t){return t.length===1?"0"+t:t}Ze.zero2=Vv;function qv(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ze.zero8=qv;function t4(t,e,r,n){var i=r-e;X5(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Ze.join32=t4;function r4(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Ze.split32=r4;function n4(t,e){return t>>>e|t<<32-e}Ze.rotr32=n4;function i4(t,e){return t<<e|t>>>32-e}Ze.rotl32=i4;function s4(t,e){return t+e>>>0}Ze.sum32=s4;function o4(t,e,r){return t+e+r>>>0}Ze.sum32_3=o4;function a4(t,e,r,n){return t+e+r+n>>>0}Ze.sum32_4=a4;function c4(t,e,r,n,i){return t+e+r+n+i>>>0}Ze.sum32_5=c4;function f4(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}Ze.sum64=f4;function u4(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Ze.sum64_hi=u4;function l4(t,e,r,n){var i=e+n;return i>>>0}Ze.sum64_lo=l4;function d4(t,e,r,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var f=t+r+i+o+c;return f>>>0}Ze.sum64_4_hi=d4;function h4(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}Ze.sum64_4_lo=h4;function p4(t,e,r,n,i,s,o,a,c,l){var f=0,d=e;d=d+n>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+a>>>0,f+=d<a?1:0,d=d+l>>>0,f+=d<l?1:0;var I=t+r+i+o+c+f;return I>>>0}Ze.sum64_5_hi=p4;function g4(t,e,r,n,i,s,o,a,c,l){var f=e+n+s+a+l;return f>>>0}Ze.sum64_5_lo=g4;function b4(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ze.rotr64_hi=b4;function v4(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.rotr64_lo=v4;function m4(t,e,r){return t>>>r}Ze.shr64_hi=m4;function y4(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ze.shr64_lo=y4;var ia={},a1=Ze,E4=to;function Cu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ia.BlockHash=Cu;Cu.prototype.update=function(e,r){if(e=a1.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=a1.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Cu.prototype.digest=function(e){return this.update(this._pad()),E4(this.pending===null),this._digest(e)};Cu.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var sa={},ui={},_4=Ze,Qn=_4.rotr32;function w4(t,e,r,n){if(t===0)return $v(e,r,n);if(t===1||t===3)return Wv(e,r,n);if(t===2)return zv(e,r,n)}ui.ft_1=w4;function $v(t,e,r){return t&e^~t&r}ui.ch32=$v;function zv(t,e,r){return t&e^t&r^e&r}ui.maj32=zv;function Wv(t,e,r){return t^e^r}ui.p32=Wv;function A4(t){return Qn(t,2)^Qn(t,13)^Qn(t,22)}ui.s0_256=A4;function x4(t){return Qn(t,6)^Qn(t,11)^Qn(t,25)}ui.s1_256=x4;function S4(t){return Qn(t,7)^Qn(t,18)^t>>>3}ui.g0_256=S4;function R4(t){return Qn(t,17)^Qn(t,19)^t>>>10}ui.g1_256=R4;var Do=Ze,I4=ia,O4=ui,td=Do.rotl32,xa=Do.sum32,T4=Do.sum32_5,P4=O4.ft_1,Xv=I4.BlockHash,N4=[1518500249,1859775393,2400959708,3395469782];function ii(){if(!(this instanceof ii))return new ii;Xv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Do.inherits(ii,Xv);var M4=ii;ii.blockSize=512;ii.outSize=160;ii.hmacStrength=80;ii.padLength=64;ii.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=td(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),d=T4(td(s,5),P4(f,o,a,c),l,n[i],N4[f]);l=c,c=a,a=td(o,30),o=s,s=d}this.h[0]=xa(this.h[0],s),this.h[1]=xa(this.h[1],o),this.h[2]=xa(this.h[2],a),this.h[3]=xa(this.h[3],c),this.h[4]=xa(this.h[4],l)};ii.prototype._digest=function(e){return e==="hex"?Do.toHex32(this.h,"big"):Do.split32(this.h,"big")};var Uo=Ze,L4=ia,oa=ui,C4=to,dn=Uo.sum32,B4=Uo.sum32_4,k4=Uo.sum32_5,D4=oa.ch32,U4=oa.maj32,K4=oa.s0_256,H4=oa.s1_256,F4=oa.g0_256,j4=oa.g1_256,Jv=L4.BlockHash,G4=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function si(){if(!(this instanceof si))return new si;Jv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=G4,this.W=new Array(64)}Uo.inherits(si,Jv);var Yv=si;si.blockSize=512;si.outSize=256;si.hmacStrength=192;si.padLength=64;si.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=B4(j4(n[i-2]),n[i-7],F4(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],f=this.h[5],d=this.h[6],I=this.h[7];for(C4(this.k.length===n.length),i=0;i<n.length;i++){var P=k4(I,H4(l),D4(l,f,d),this.k[i],n[i]),L=dn(K4(s),U4(s,o,a));I=d,d=f,f=l,l=dn(c,P),c=a,a=o,o=s,s=dn(P,L)}this.h[0]=dn(this.h[0],s),this.h[1]=dn(this.h[1],o),this.h[2]=dn(this.h[2],a),this.h[3]=dn(this.h[3],c),this.h[4]=dn(this.h[4],l),this.h[5]=dn(this.h[5],f),this.h[6]=dn(this.h[6],d),this.h[7]=dn(this.h[7],I)};si.prototype._digest=function(e){return e==="hex"?Uo.toHex32(this.h,"big"):Uo.split32(this.h,"big")};var sh=Ze,Qv=Yv;function Hi(){if(!(this instanceof Hi))return new Hi;Qv.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}sh.inherits(Hi,Qv);var V4=Hi;Hi.blockSize=512;Hi.outSize=224;Hi.hmacStrength=192;Hi.padLength=64;Hi.prototype._digest=function(e){return e==="hex"?sh.toHex32(this.h.slice(0,7),"big"):sh.split32(this.h.slice(0,7),"big")};var Mr=Ze,q4=ia,$4=to,Zn=Mr.rotr64_hi,ei=Mr.rotr64_lo,Zv=Mr.shr64_hi,em=Mr.shr64_lo,Xi=Mr.sum64,rd=Mr.sum64_hi,nd=Mr.sum64_lo,z4=Mr.sum64_4_hi,W4=Mr.sum64_4_lo,X4=Mr.sum64_5_hi,J4=Mr.sum64_5_lo,tm=q4.BlockHash,Y4=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Sn(){if(!(this instanceof Sn))return new Sn;tm.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Y4,this.W=new Array(160)}Mr.inherits(Sn,tm);var rm=Sn;Sn.blockSize=1024;Sn.outSize=512;Sn.hmacStrength=192;Sn.padLength=128;Sn.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=cA(n[i-4],n[i-3]),o=fA(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=oA(n[i-30],n[i-29]),f=aA(n[i-30],n[i-29]),d=n[i-32],I=n[i-31];n[i]=z4(s,o,a,c,l,f,d,I),n[i+1]=W4(s,o,a,c,l,f,d,I)}};Sn.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],f=this.h[6],d=this.h[7],I=this.h[8],P=this.h[9],L=this.h[10],H=this.h[11],G=this.h[12],V=this.h[13],C=this.h[14],q=this.h[15];$4(this.k.length===n.length);for(var U=0;U<n.length;U+=2){var K=C,j=q,y=iA(I,P),w=sA(I,P),T=Q4(I,P,L,H,G),x=Z4(I,P,L,H,G,V),E=this.k[U],u=this.k[U+1],h=n[U],g=n[U+1],b=X4(K,j,y,w,T,x,E,u,h,g),p=J4(K,j,y,w,T,x,E,u,h,g);K=rA(i,s),j=nA(i,s),y=eA(i,s,o,a,c),w=tA(i,s,o,a,c,l);var S=rd(K,j,y,w),O=nd(K,j,y,w);C=G,q=V,G=L,V=H,L=I,H=P,I=rd(f,d,b,p),P=nd(d,d,b,p),f=c,d=l,c=o,l=a,o=i,a=s,i=rd(b,p,S,O),s=nd(b,p,S,O)}Xi(this.h,0,i,s),Xi(this.h,2,o,a),Xi(this.h,4,c,l),Xi(this.h,6,f,d),Xi(this.h,8,I,P),Xi(this.h,10,L,H),Xi(this.h,12,G,V),Xi(this.h,14,C,q)};Sn.prototype._digest=function(e){return e==="hex"?Mr.toHex32(this.h,"big"):Mr.split32(this.h,"big")};function Q4(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Z4(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function eA(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function tA(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function rA(t,e){var r=Zn(t,e,28),n=Zn(e,t,2),i=Zn(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function nA(t,e){var r=ei(t,e,28),n=ei(e,t,2),i=ei(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function iA(t,e){var r=Zn(t,e,14),n=Zn(t,e,18),i=Zn(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function sA(t,e){var r=ei(t,e,14),n=ei(t,e,18),i=ei(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function oA(t,e){var r=Zn(t,e,1),n=Zn(t,e,8),i=Zv(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function aA(t,e){var r=ei(t,e,1),n=ei(t,e,8),i=em(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function cA(t,e){var r=Zn(t,e,19),n=Zn(e,t,29),i=Zv(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function fA(t,e){var r=ei(t,e,19),n=ei(e,t,29),i=em(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var oh=Ze,nm=rm;function Fi(){if(!(this instanceof Fi))return new Fi;nm.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}oh.inherits(Fi,nm);var uA=Fi;Fi.blockSize=1024;Fi.outSize=384;Fi.hmacStrength=192;Fi.padLength=128;Fi.prototype._digest=function(e){return e==="hex"?oh.toHex32(this.h.slice(0,12),"big"):oh.split32(this.h.slice(0,12),"big")};sa.sha1=M4;sa.sha224=V4;sa.sha256=Yv;sa.sha384=uA;sa.sha512=rm;var im={},zs=Ze,lA=ia,Uc=zs.rotl32,c1=zs.sum32,Sa=zs.sum32_3,f1=zs.sum32_4,sm=lA.BlockHash;function oi(){if(!(this instanceof oi))return new oi;sm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}zs.inherits(oi,sm);im.ripemd160=oi;oi.blockSize=512;oi.outSize=160;oi.hmacStrength=192;oi.padLength=64;oi.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,f=s,d=o,I=a,P=0;P<80;P++){var L=c1(Uc(f1(n,u1(P,i,s,o),e[pA[P]+r],dA(P)),bA[P]),a);n=a,a=o,o=Uc(s,10),s=i,i=L,L=c1(Uc(f1(c,u1(79-P,l,f,d),e[gA[P]+r],hA(P)),vA[P]),I),c=I,I=d,d=Uc(f,10),f=l,l=L}L=Sa(this.h[1],s,d),this.h[1]=Sa(this.h[2],o,I),this.h[2]=Sa(this.h[3],a,c),this.h[3]=Sa(this.h[4],n,l),this.h[4]=Sa(this.h[0],i,f),this.h[0]=L};oi.prototype._digest=function(e){return e==="hex"?zs.toHex32(this.h,"little"):zs.split32(this.h,"little")};function u1(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function dA(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function hA(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var pA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],gA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],bA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],vA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],mA=Ze,yA=to;function Ko(t,e,r){if(!(this instanceof Ko))return new Ko(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(mA.toArray(e,r))}var EA=Ko;Ko.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),yA(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};Ko.prototype.update=function(e,r){return this.inner.update(e,r),this};Ko.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Ze,e.common=ia,e.sha=sa,e.ripemd=im,e.hmac=EA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Lu);var id,l1;function _A(){return l1||(l1=1,id={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),id}(function(t){var e=t,r=Lu,n=Qh,i=Xr,s=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,f){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var d=new o(f);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:d}),d}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=_A()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Mu);var wA=Lu,Fs=Yh,om=to;function gs(t){if(!(this instanceof gs))return new gs(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Fs.toArray(t.entropy,t.entropyEnc||"hex"),r=Fs.toArray(t.nonce,t.nonceEnc||"hex"),n=Fs.toArray(t.pers,t.persEnc||"hex");om(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var AA=gs;gs.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};gs.prototype._hmac=function(){return new wA.hmac(this.hash,this.K)};gs.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};gs.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Fs.toArray(e,r),n=Fs.toArray(n,i),om(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};gs.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Fs.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Fs.encode(o,r)};var xA=xn,SA=Xr,ah=SA.assert;function yr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var RA=yr;yr.fromPublic=function(e,r,n){return r instanceof yr?r:new yr(e,{pub:r,pubEnc:n})};yr.fromPrivate=function(e,r,n){return r instanceof yr?r:new yr(e,{priv:r,privEnc:n})};yr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};yr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};yr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};yr.prototype._importPrivate=function(e,r){this.priv=new xA(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};yr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ah(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ah(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};yr.prototype.derive=function(e){return e.validate()||ah(e.validate(),"public point not validated"),e.mul(this.priv).getX()};yr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};yr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};yr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Mf=xn,e0=Xr,IA=e0.assert;function Bu(t,e){if(t instanceof Bu)return t;this._importDER(t,e)||(IA(t.r&&t.s,"Signature without r or s"),this.r=new Mf(t.r,16),this.s=new Mf(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var OA=Bu;function TA(){this.place=0}function sd(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function d1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Bu.prototype._importDER=function(e,r){e=e0.toArray(e,r);var n=new TA;if(e[n.place++]!==48)return!1;var i=sd(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=sd(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=sd(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Mf(o),this.s=new Mf(c),this.recoveryParam=null,!0};function od(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Bu.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=d1(r),n=d1(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];od(i,r.length),i=i.concat(r),i.push(2),od(i,n.length);var s=i.concat(n),o=[48];return od(o,s.length),o=o.concat(s),e0.encode(o,e)};var js=xn,am=AA,PA=Xr,ad=Mu,NA=Qa,cm=PA.assert,t0=RA,ku=OA;function an(t){if(!(this instanceof an))return new an(t);typeof t=="string"&&(cm(Object.prototype.hasOwnProperty.call(ad,t),"Unknown curve "+t),t=ad[t]),t instanceof ad.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var MA=an;an.prototype.keyPair=function(e){return new t0(this,e)};an.prototype.keyFromPrivate=function(e,r){return t0.fromPrivate(this,e,r)};an.prototype.keyFromPublic=function(e,r){return t0.fromPublic(this,e,r)};an.prototype.genKeyPair=function(e){e||(e={});for(var r=new am({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||NA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new js(2));;){var s=new js(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};an.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};an.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new js(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new am({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new js(1)),f=0;;f++){var d=i.k?i.k(f):new js(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(l)>=0)){var I=this.g.mul(d);if(!I.isInfinity()){var P=I.getX(),L=P.umod(this.n);if(L.cmpn(0)!==0){var H=d.invm(this.n).mul(L.mul(r.getPrivate()).iadd(e));if(H=H.umod(this.n),H.cmpn(0)!==0){var G=(I.getY().isOdd()?1:0)|(P.cmp(L)!==0?2:0);return i.canonical&&H.cmp(this.nh)>0&&(H=this.n.sub(H),G^=1),new ku({r:L,s:H,recoveryParam:G})}}}}}};an.prototype.verify=function(e,r,n,i){e=this._truncateToN(new js(e,16)),n=this.keyFromPublic(n,i),r=new ku(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,n.getPublic(),l),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};an.prototype.recoverPubKey=function(t,e,r,n){cm((3&r)===r,"The recovery param is more than two bits"),e=new ku(e,n);var i=this.n,s=new js(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(i),d=i.sub(s).mul(f).umod(i),I=a.mul(f).umod(i);return this.g.mulAdd(d,o,I)};an.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new ku(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var _c=Xr,fm=_c.assert,h1=_c.parseBytes,aa=_c.cachedProperty;function Zt(t,e){this.eddsa=t,this._secret=h1(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=h1(e.pub)}Zt.fromPublic=function(e,r){return r instanceof Zt?r:new Zt(e,{pub:r})};Zt.fromSecret=function(e,r){return r instanceof Zt?r:new Zt(e,{secret:r})};Zt.prototype.secret=function(){return this._secret};aa(Zt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});aa(Zt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});aa(Zt,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});aa(Zt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});aa(Zt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});aa(Zt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Zt.prototype.sign=function(e){return fm(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Zt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Zt.prototype.getSecret=function(e){return fm(this._secret,"KeyPair is public only"),_c.encode(this.secret(),e)};Zt.prototype.getPublic=function(e){return _c.encode(this.pubBytes(),e)};var LA=Zt,CA=xn,Du=Xr,BA=Du.assert,Uu=Du.cachedProperty,kA=Du.parseBytes;function ro(t,e){this.eddsa=t,typeof e!="object"&&(e=kA(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),BA(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof CA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Uu(ro,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Uu(ro,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Uu(ro,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Uu(ro,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ro.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ro.prototype.toHex=function(){return Du.encode(this.toBytes(),"hex").toUpperCase()};var DA=ro,UA=Lu,KA=Mu,Ho=Xr,HA=Ho.assert,um=Ho.parseBytes,lm=LA,p1=DA;function Lr(t){if(HA(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Lr))return new Lr(t);t=KA[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=UA.sha512}var FA=Lr;Lr.prototype.sign=function(e,r){e=um(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};Lr.prototype.verify=function(e,r,n){e=um(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};Lr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Ho.intFromLE(e.digest()).umod(this.curve.n)};Lr.prototype.keyFromPublic=function(e){return lm.fromPublic(this,e)};Lr.prototype.keyFromSecret=function(e){return lm.fromSecret(this,e)};Lr.prototype.makeSignature=function(e){return e instanceof p1?e:new p1(this,e)};Lr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Lr.prototype.decodePoint=function(e){e=Ho.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,s=Ho.intFromLE(n);return this.curve.pointFromY(s,i)};Lr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Lr.prototype.decodeInt=function(e){return Ho.intFromLE(e)};Lr.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=D5.version,e.utils=Xr,e.rand=Qa,e.curve=Qh,e.curves=Mu,e.ec=MA,e.eddsa=FA})(w5);var re;(function(t){t.TZ1="tz1",t.TZ2="tz2",t.TZ3="tz3",t.TZ4="tz4",t.KT="KT",t.KT1="KT1",t.EDSK2="edsk2",t.SPSK="spsk",t.P2SK="p2sk",t.EDPK="edpk",t.SPPK="sppk",t.P2PK="p2pk",t.BLPK="BLpk",t.EDESK="edesk",t.SPESK="spesk",t.P2ESK="p2esk",t.EDSK="edsk",t.EDSIG="edsig",t.SPSIG="spsig",t.P2SIG="p2sig",t.SIG="sig",t.NET="Net",t.NCE="nce",t.B="B",t.O="o",t.LO="Lo",t.LLO="LLo",t.P="P",t.CO="Co",t.ID="id",t.EXPR="expr",t.TZ="TZ",t.VH="vh",t.SASK="sask",t.ZET1="zet1",t.TXR1="txr1",t.TXI="txi",t.TXM="txm",t.TXC="txc",t.TXMR="txmr",t.TXRL="txM",t.TXW="txw",t.SR1="sr1",t.SRC1="src1"})(re||(re={}));const br={[re.TZ1]:new Uint8Array([6,161,159]),[re.TZ2]:new Uint8Array([6,161,161]),[re.TZ3]:new Uint8Array([6,161,164]),[re.TZ4]:new Uint8Array([6,161,166]),[re.KT]:new Uint8Array([2,90,121]),[re.KT1]:new Uint8Array([2,90,121]),[re.EDSK]:new Uint8Array([43,246,78,7]),[re.EDSK2]:new Uint8Array([13,15,58,7]),[re.SPSK]:new Uint8Array([17,162,224,201]),[re.P2SK]:new Uint8Array([16,81,238,189]),[re.EDPK]:new Uint8Array([13,15,37,217]),[re.SPPK]:new Uint8Array([3,254,226,86]),[re.P2PK]:new Uint8Array([3,178,139,127]),[re.BLPK]:new Uint8Array([6,149,135,204]),[re.EDESK]:new Uint8Array([7,90,60,179,41]),[re.SPESK]:new Uint8Array([9,237,241,174,150]),[re.P2ESK]:new Uint8Array([9,48,57,115,171]),[re.EDSIG]:new Uint8Array([9,245,205,134,18]),[re.SPSIG]:new Uint8Array([13,115,101,19,63]),[re.P2SIG]:new Uint8Array([54,240,44,52]),[re.SIG]:new Uint8Array([4,130,43]),[re.NET]:new Uint8Array([87,82,0]),[re.NCE]:new Uint8Array([69,220,169]),[re.B]:new Uint8Array([1,52]),[re.O]:new Uint8Array([5,116]),[re.LO]:new Uint8Array([133,233]),[re.LLO]:new Uint8Array([29,159,109]),[re.P]:new Uint8Array([2,170]),[re.CO]:new Uint8Array([79,179]),[re.ID]:new Uint8Array([153,103]),[re.EXPR]:new Uint8Array([13,44,64,27]),[re.TZ]:new Uint8Array([2,90,121]),[re.VH]:new Uint8Array([1,106,242]),[re.SASK]:new Uint8Array([11,237,20,92]),[re.ZET1]:new Uint8Array([18,71,40,223]),[re.TXR1]:new Uint8Array([1,128,120,31]),[re.TXI]:new Uint8Array([79,148,196]),[re.TXM]:new Uint8Array([79,149,30]),[re.TXC]:new Uint8Array([79,148,17]),[re.TXMR]:new Uint8Array([18,7,206,87]),[re.TXRL]:new Uint8Array([79,146,82]),[re.TXW]:new Uint8Array([79,150,72]),[re.SR1]:new Uint8Array([6,124,117]),[re.SRC1]:new Uint8Array([17,165,134,138])},dm={[re.TZ1]:20,[re.TZ2]:20,[re.TZ3]:20,[re.TZ4]:20,[re.KT]:20,[re.KT1]:20,[re.EDPK]:32,[re.SPPK]:33,[re.P2PK]:33,[re.BLPK]:48,[re.EDSIG]:64,[re.SPSIG]:64,[re.P2SIG]:64,[re.SIG]:64,[re.NET]:4,[re.B]:32,[re.P]:32,[re.O]:32,[re.VH]:32,[re.SASK]:169,[re.ZET1]:43,[re.TXR1]:20,[re.TXI]:32,[re.TXM]:32,[re.TXC]:32,[re.TXMR]:32,[re.TXRL]:32,[re.TXW]:32,[re.SR1]:20,[re.SRC1]:32};class hm extends Error{constructor(e,r){super(),this.publicKey=e,this.name="InvalidPublicKeyError";const n=`The public key '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class To extends Error{constructor(e){super(`The contract address '${e}' is invalid`),this.contractAddress=e,this.name="InvalidContractAddressError"}}class ft extends Error{constructor(e,r){super(),this.address=e,this.name="InvalidAddressError";const n=`The address '${e}' is invalid.`;this.message=r?`${n} ${r}`:n}}class jA extends Error{constructor(e){super(`The chain id '${e}' is invalid`),this.chainId=e,this.name="InvalidChainIdError"}}class r0 extends Error{constructor(e){super(`The public key hash '${e}' is invalid`),this.keyHash=e,this.name="InvalidKeyHashError"}}class pm extends Error{constructor(e){super(`The operation hash '${e}' is invalid`),this.operationHash=e,this.name="InvalidOperationHashError"}}class ji extends Error{constructor(e){super(`The operation kind '${e}' is unsupported`),this.operationKind=e,this.name="InvalidOperationKindError"}}class n0 extends Error{constructor(e){super(e),this.message=e,this.name="DeprecationError"}}class GA extends Error{constructor(e,r){super(`Unable to convert ${e} to a ${r}`),this.value=e,this.desiredType=r,this.name="ValueConversionError"}}var _e;(function(t){t[t.NO_PREFIX_MATCHED=0]="NO_PREFIX_MATCHED",t[t.INVALID_CHECKSUM=1]="INVALID_CHECKSUM",t[t.INVALID_LENGTH=2]="INVALID_LENGTH",t[t.VALID=3]="VALID"})(_e||(_e={}));function VA(t){return typeof t!="string"?!1:t in br}function Is(t,e){const r=new RegExp(`^(${e.join("|")})`).exec(t);if(!r||r.length===0)return _e.NO_PREFIX_MATCHED;const n=r[0];if(!VA(n))return _e.NO_PREFIX_MATCHED;if(t.includes("%")&&(t=t.split("%")[0]),!/^(KT1\w{33})$/.test(t)&&n==="KT1")return _e.INVALID_CHECKSUM;let s=$r.decodeUnsafe(t);return s?(s=s.slice(br[n].length),s.length!==dm[n]?_e.INVALID_LENGTH:_e.VALID):_e.INVALID_CHECKSUM}const gm=[re.TZ1,re.TZ2,re.TZ3,re.TZ4],bm=[re.KT1,re.TXR1],qA=[re.EDSIG,re.P2SIG,re.SPSIG,re.SIG],$A=[re.EDPK,re.SPPK,re.P2PK,re.BLPK],zA=[re.O];re.P;const WA=[re.B];function ct(t){return Is(t,[...gm,...bm])}function vm(t){return Is(t,[re.NET])}function Po(t){return Is(t,bm)}function i0(t){return Is(t,gm)}function XA(t){return Is(t,qA)}function JA(t){return Is(t,$A)}function mm(t){return Is(t,zA)}function YA(t){return Is(t,WA)}const QA=6,ZA=3;function g1(t){switch(t){case"tz":return QA;case"mtz":return ZA;case"mutez":default:return 0}}function s0(t="mutez",e="mutez",r){const n=new be(r);return n.isNaN()?r:n.multipliedBy(Math.pow(10,g1(t))).dividedBy(Math.pow(10,g1(e)))}function e8(t){const e=s3.blake2b(i8(t),void 0,32);return hs(e,br.expr)}function hs(t,e){const r=typeof t=="string"?Uint8Array.from(Ui.Buffer.from(t,"hex")):t,n=new Uint8Array(e.length+r.length);return n.set(e),n.set(r,e.length),$r.encode(Ui.Buffer.from(n.buffer))}const ym=(t,e)=>$r.decode(t).slice(e.length);function t8(t){const e=$r.decode(t),r={[br.tz1.toString()]:"0000",[br.tz2.toString()]:"0001",[br.tz3.toString()]:"0002"},n={[br.txr1.toString()]:"02"},i=r[new Uint8Array(e.slice(0,3)).toString()],s=n[new Uint8Array(e.slice(0,4)).toString()];if(i){const o=Ka(e.slice(3));return i+o}else if(s){const o=Ka(e.slice(4));return s+o+"00"}else return"01"+Ka(e.slice(3,42))+"00"}function r8(t){const e=$r.decode(t);return Ka(e.slice(3,42))}function ch(t){if(t.substring(0,2)==="00"){const e={"0000":br.tz1,"0001":br.tz2,"0002":br.tz3};return hs(t.substring(4),e[t.substring(0,4)])}else if(t.substring(0,2)==="02")return hs(t.substring(2,t.length-2),br.txr1);return hs(t.substring(2,42),br.KT)}function b1(t){return hs(t,br.tz4)}function n8(t){if(t[0]==="0"){const e={"00":new Uint8Array([13,15,37,217]),"01":new Uint8Array([3,254,226,86]),"02":new Uint8Array([3,178,139,127])};return hs(t.substring(2),e[t.substring(0,2)])}}function v1(t){if(t[0]==="0"){const e={"00":new Uint8Array([6,161,159]),"01":new Uint8Array([6,161,161]),"02":new Uint8Array([6,161,164])};return hs(t.substring(2),e[t.substring(0,2)])}}const i8=t=>{const e=t.match(/[\da-f]{2}/gi);if(e)return new Uint8Array(e.map(r=>parseInt(r,16)));throw new GA(t,"Uint8Array")},Ka=t=>{const e=new Uint8Array(t),r=[];return e.forEach(n=>{const s=`00${n.toString(16)}`.slice(-2);r.push(s)}),r.join("")};function m1(t){return t.startsWith("0x")?t.slice(2):t}function Kc(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Oe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}const s8="main",Pe={block:"head"};var y1;(function(t){t.GET_BAKING_RIGHTS="getBakingRights",t.GET_BALLOTS="getBallots",t.GET_BALLOT_LIST="getBallotList",t.GET_BIG_MAP_KEY="getBigMapKey",t.GET_BIG_MAP_EXPR="getBigMapExpr",t.GET_BLOCK_HASH="getBlockHash",t.GET_BLOCK="getBlock",t.GET_BLOCK_HEADER="getBlockHeader",t.GET_BLOCK_METADATA="getBlockMetadata",t.GET_BALANCE="getBalance",t.GET_CHAIN_ID="getChainId",t.GET_CONSTANTS="getConstants",t.GET_CONTRACT="getContract",t.GET_CURRENT_PERIOD="getCurrentPeriod",t.GET_CURRENT_PROPOSAL="getCurrentProposal",t.GET_CURRENT_QUORUM="getCurrentQuorum",t.GET_DELEGATE="getDelegate",t.GET_DELEGATES="getDelegates",t.GET_VOTING_INFO="getVotingInfo",t.GET_ENDORSING_RIGHTS="getEndorsingRights",t.GET_ENTRYPOINTS="getEntrypoints",t.GET_LIVE_BLOCKS="getLiveBlocks",t.GET_MANAGER_KEY="getManagerKey",t.GET_NORMALIZED_SCRIPT="getNormalizedScript",t.GET_PROPOSALS="getProposals",t.GET_PROTOCOLS="getProtocols",t.GET_SAPLING_DIFF_BY_CONTRACT="getSaplingDiffByContract",t.GET_SAPLING_DIFF_BY_ID="getSaplingDiffById",t.GET_SCRIPT="getScript",t.GET_STORAGE="getStorage",t.GET_SUCCESSOR_PERIOD="getSuccessorPeriod",t.GET_TX_ROLLUP_INBOX="getTxRollupInbox",t.GET_TX_ROLLUP_STATE="getTxRollupState",t.GET_VOTES_LISTINGS="getVotesListings",t.PACK_DATA="packData",t.GET_STORAGE_USED_SPACE="getStorageUsedSpace",t.GET_STORAGE_PAID_SPACE="getStoragePaidSpace",t.GET_TICKET_BALANCE="getTicketBalance",t.GET_ALL_TICKET_BALANCES="getAllTicketBalances"})(y1||(y1={}));function Ca(t,e){const r=Array.isArray(t);typeof e>"u"&&(e=Object.keys(t));const n=r?[]:{};return e.forEach(i=>{const s=t[i];let o;if(!(typeof s>"u")){if(Array.isArray(s)){o=Ca(s),n[i]=o;return}o=new be(s),n[i]=o}}),n}var E1;(function(t){t.TOO_LARGE="too large"})(E1||(E1={}));var _1;(function(t){t.BAKING_REWARDS="baking rewards",t.REWARDS="rewards",t.FEES="fees",t.DEPOSITS="deposits",t.LEGACY_REWARDS="legacy_rewards",t.LEGACY_FEES="legacy_fees",t.LEGACY_DEPOSITS="legacy_deposits",t.BLOCK_FEES="block fees",t.NONCE_REVELATION_REWARDS="nonce revelation rewards",t.DOUBLE_SIGNING_EVIDENCE_REWARDS="double signing evidence rewards",t.ENDORSING_REWARDS="endorsing rewards",t.BAKING_BONUSES="baking bonuses",t.STORAGE_FEES="storage fees",t.PUNISHMENTS="punishments",t.LOST_ENDORSING_REWARDS="lost endorsing rewards",t.SUBSIDY="subsidy",t.BURNED="burned",t.COMMITMENT="commitment",t.BOOTSTRAP="bootstrap",t.INVOICE="invoice",t.MINTED="minted",t.TX_ROLLUP_REJECTION_REWARDS="tx_rollup_rejection_rewards",t.TX_ROLLUP_REJECTION_PUNISHMENTS="tx_rollup_rejection_punishments",t.BONDS="bonds"})(_1||(_1={}));var oe;(function(t){t.ORIGINATION="origination",t.DELEGATION="delegation",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ACTIVATION="activate_account",t.ENDORSEMENT="endorsement",t.PREENDORSEMENT="preendorsement",t.SET_DEPOSITS_LIMIT="set_deposits_limit",t.DOUBLE_PREENDORSEMENT_EVIDENCE="double_preendorsement_evidence",t.ENDORSEMENT_WITH_SLOT="endorsement_with_slot",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.PROPOSALS="proposals",t.BALLOT="ballot",t.FAILING_NOOP="failing_noop",t.REGISTER_GLOBAL_CONSTANT="register_global_constant",t.TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.TX_ROLLUP_COMMIT="tx_rollup_commit",t.TX_ROLLUP_RETURN_BOND="tx_rollup_return_bond",t.TX_ROLLUP_FINALIZE_COMMITMENT="tx_rollup_finalize_commitment",t.TX_ROLLUP_REMOVE_COMMITMENT="tx_rollup_remove_commitment",t.TX_ROLLUP_REJECTION="tx_rollup_rejection",t.TX_ROLLUP_DISPATCH_TICKETS="tx_rollup_dispatch_tickets",t.TRANSFER_TICKET="transfer_ticket",t.INCREASE_PAID_STORAGE="increase_paid_storage",t.UPDATE_CONSENSUS_KEY="update_consensus_key",t.DRAIN_DELEGATE="drain_delegate",t.VDF_REVELATION="vdf_revelation",t.EVENT="event",t.TICKET_UPDATES="ticket_updates",t.SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(oe||(oe={}));class pf{constructor(e,r=s8,n=new b_){this.url=e,this.chain=r,this.httpBackend=n}createURL(e){return`${this.url.replace(/\/+$/g,"")}${e}`}validateAddress(e){if(ct(e)!==_e.VALID)throw new ft(e)}validateContract(e){if(Po(e)!==_e.VALID)throw new ft(e)}getBlockHash({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/hash`),method:"GET"})})}getLiveBlocks({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/live_blocks`),method:"GET"})})}getBalance(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/balance`),method:"GET"});return new be(n)})}getStorage(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage`),method:"GET"})})}getScript(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/script`),method:"GET"})})}getNormalizedScript(e,r={unparsing_mode:"Readable"},{block:n}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateContract(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/script/normalized`),method:"POST"},r)})}getContract(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}`),method:"GET"});return Object.assign(Object.assign({},n),{balance:new be(n.balance)})})}getManagerKey(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/manager_key`),method:"GET"})})}getDelegate(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){this.validateAddress(e);let n;try{n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/delegate`),method:"GET"})}catch(i){if(i instanceof Zo&&i.status===za.NOT_FOUND)n=null;else throw i}return n})}getBigMapKey(e,r,{block:n}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateAddress(e),this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/big_map_get`),method:"POST"},r)})}getBigMapExpr(e,r,{block:n}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/big_maps/${e}/${r}`),method:"GET"})})}getDelegates(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){this.validateAddress(e);const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}`),method:"GET"}),i=Ca(n,["balance","full_balance","current_frozen_deposits","frozen_deposits","frozen_balance","frozen_deposits_limit","staking_balance","delegated_balance","voting_power"]);return Object.assign(Object.assign(Object.assign({},n),i),{frozen_balance_by_cycle:n.frozen_balance_by_cycle?n.frozen_balance_by_cycle.map(s=>{var{deposit:o,deposits:a,fees:c,rewards:l}=s,f=Kc(s,["deposit","deposits","fees","rewards"]);const d=Ca({deposit:o,deposits:a,fees:c,rewards:l},["deposit","deposits","fees","rewards"]);return Object.assign(Object.assign({},f),{deposit:d.deposit,deposits:d.deposits,fees:d.fees,rewards:d.rewards})}):void 0})})}getVotingInfo(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateAddress(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/delegates/${e}/voting_info`),method:"GET"})})}getConstants({block:e}=Pe){return Oe(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/context/constants`),method:"GET"}),n=Ca(r,["time_between_blocks","hard_gas_limit_per_operation","hard_gas_limit_per_block","proof_of_work_threshold","tokens_per_roll","seed_nonce_revelation_tip","block_security_deposit","endorsement_security_deposit","block_reward","endorsement_reward","cost_per_byte","hard_storage_limit_per_operation","test_chain_duration","baking_reward_per_endorsement","delay_per_missing_endorsement","minimal_block_delay","liquidity_baking_subsidy","cache_layout","baking_reward_fixed_portion","baking_reward_bonus_per_slot","endorsing_reward_per_slot","double_baking_punishment","delay_increment_per_round","tx_rollup_commitment_bond","vdf_difficulty","sc_rollup_stake_amount","minimal_stake"]);return Object.assign(Object.assign({},r),n)})}getBlock({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}`),method:"GET"})})}getBlockHeader({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/header`),method:"GET"})})}getBlockMetadata({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/metadata`),method:"GET"})})}getBakingRights(e={},{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/baking_rights`),method:"GET",query:e})})}getEndorsingRights(e={},{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/endorsing_rights`),method:"GET",query:e})})}getBallotList({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballot_list`),method:"GET"})})}getBallots({block:e}=Pe){return Oe(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/ballots`),method:"GET"});return Ca(r,["yay","nay","pass"])})}getCurrentProposal({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_proposal`),method:"GET"})})}getCurrentQuorum({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_quorum`),method:"GET"})})}getVotesListings({block:e}=Pe){return Oe(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/listings`),method:"GET"});return r.map(n=>(n.voting_power&&(n.voting_power=new be(n.voting_power)),n)),r})}getProposals({block:e}=Pe){return Oe(this,void 0,void 0,function*(){const r=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/proposals`),method:"GET"});return r.map(n=>n[1]=new be(n[1])),r})}forgeOperations(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/forge/operations`),method:"POST"},e)})}injectOperation(e){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL("/injection/operation"),method:"POST"},e)})}preapplyOperations(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/preapply/operations`),method:"POST"},e)})}getEntrypoints(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.validateContract(e),yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/entrypoints`),method:"GET"})})}runOperation(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_operation`),method:"POST"},e)})}runCode(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_code`),method:"POST"},e)})}runScriptView(e,{block:r}=Pe){var{unparsing_mode:n="Readable"}=e,i=Kc(e,["unparsing_mode"]);return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_script_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}runView(e,{block:r}=Pe){var{unparsing_mode:n="Readable"}=e,i=Kc(e,["unparsing_mode"]);return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/run_view`),method:"POST"},Object.assign({unparsing_mode:n},i))})}getChainId(){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/chain_id`),method:"GET"})})}packData(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){const n=yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/helpers/scripts/pack_data`),method:"POST"},e),{gas:i}=n,s=Kc(n,["gas"]);let o=i;const a=new be(i||"");return a.isNaN()||(o=a),Object.assign({gas:o},s)})}getRpcUrl(){return this.url}getCurrentPeriod({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/current_period`),method:"GET"})})}getSuccessorPeriod({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return yield this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/votes/successor_period`),method:"GET"})})}getSaplingDiffById(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/sapling/${e}/get_diff`),method:"GET"})})}getSaplingDiffByContract(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/single_sapling_get_diff`),method:"GET"})})}getProtocols({block:e}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${e}/protocols`),method:"GET"})})}getTxRollupState(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/tx_rollup/${e}/state`),method:"GET"})})}getTxRollupInbox(e,r,{block:n}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/tx_rollup/${e}/inbox/${r}`),method:"GET"})})}getStorageUsedSpace(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/used_space`),method:"GET"})})}getStoragePaidSpace(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/storage/paid_space`),method:"GET"})})}getTicketBalance(e,r,{block:n}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${n}/context/contracts/${e}/ticket_balance`),method:"POST"},r)})}getAllTicketBalances(e,{block:r}=Pe){return Oe(this,void 0,void 0,function*(){return this.httpBackend.createRequest({url:this.createURL(`/chains/${this.chain}/blocks/${r}/context/contracts/${e}/all_ticket_balances`),method:"GET"})})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fh=function(t,e){return fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},fh(t,e)};function et(t,e){fh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Lf(t){return typeof t=="function"}var w1=!1,Vn={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;""+e.stack}w1=t},get useDeprecatedSynchronousErrorHandling(){return w1}};function Eo(t){setTimeout(function(){throw t},0)}var Cf={closed:!0,next:function(t){},error:function(t){if(Vn.useDeprecatedSynchronousErrorHandling)throw t;Eo(t)},complete:function(){}},o0=function(){return Array.isArray||function(t){return t&&typeof t.length=="number"}}();function Em(t){return t!==null&&typeof t=="object"}var o8=function(){function t(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t}(),gf=o8,zr=function(){function t(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var r=this,n=r._parentOrParents,i=r._ctorUnsubscribe,s=r._unsubscribe,o=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(n!==null)for(var a=0;a<n.length;++a){var c=n[a];c.remove(this)}if(Lf(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(d){e=d instanceof gf?A1(d.errors):[d]}}if(o0(o))for(var a=-1,l=o.length;++a<l;){var f=o[a];if(Em(f))try{f.unsubscribe()}catch(I){e=e||[],I instanceof gf?e=e.concat(A1(I.errors)):e.push(I)}}if(e)throw new gf(e)}},t.prototype.add=function(e){var r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;r=new t,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=r._parentOrParents;if(i===null)r._parentOrParents=this;else if(i instanceof t){if(i===this)return r;r._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return r;var s=this._subscriptions;return s===null?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(e){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}},t.EMPTY=function(e){return e.closed=!0,e}(new t),t}();function A1(t){return t.reduce(function(e,r){return e.concat(r instanceof gf?r.errors:r)},[])}var Bf=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ct=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Cf;break;case 1:if(!r){s.destination=Cf;break}if(typeof r=="object"){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new x1(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new x1(s,r,n,i);break}return s}return e.prototype[Bf]=function(){return this},e.create=function(r,n,i){var s=new e(r,n,i);return s.syncErrorThrowable=!1,s},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},e}(zr),x1=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this)||this;o._parentSubscriber=r;var a,c=o;return Lf(n)?a=n:n&&(a=n.next,i=n.error,s=n.complete,n!==Cf&&(c=Object.create(n),Lf(c.unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=a,o._error=i,o._complete=s,o}return e.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Vn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},e.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,i=Vn.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=r,n.syncErrorThrown=!0):Eo(r),this.unsubscribe();else{if(this.unsubscribe(),i)throw r;Eo(r)}}},e.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return r._complete.call(r._context)};!Vn.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(i){if(this.unsubscribe(),Vn.useDeprecatedSynchronousErrorHandling)throw i;Eo(i)}},e.prototype.__tryOrSetError=function(r,n,i){if(!Vn.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(s){return Vn.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(Eo(s),!0)}return!1},e.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},e}(Ct);function a8(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;n&&n instanceof Ct?t=n:t=null}return!0}function c8(t,e,r){if(t){if(t instanceof Ct)return t;if(t[Bf])return t[Bf]()}return!t&&!e&&!r?new Ct(Cf):new Ct(t,e,r)}var wc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function a0(t){return t}function f8(t){return t.length===0?a0:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Rt=function(){function t(e){this._isScalar=!1,e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this.operator,s=c8(e,r,n);if(i?s.add(i.call(s,this.source)):s.add(this.source||Vn.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),Vn.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){Vn.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),a8(e)?e.error(r):console.warn(r)}},t.prototype.forEach=function(e,r){var n=this;return r=S1(r),new r(function(i,s){var o;o=n.subscribe(function(a){try{e(a)}catch(c){s(c),o&&o.unsubscribe()}},s,i)})},t.prototype._subscribe=function(e){var r=this.source;return r&&r.subscribe(e)},t.prototype[wc]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length===0?this:f8(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=S1(e),new e(function(n,i){var s;r.subscribe(function(o){return s=o},function(o){return i(o)},function(){return n(s)})})},t.create=function(e){return new t(e)},t}();function S1(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var u8=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),ks=u8,_m=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.subject=r,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(zr),wm=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.destination=r,n}return e}(Ct),Fo=function(t){et(e,t);function e(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype[Bf]=function(){return new wm(this)},e.prototype.lift=function(r){var n=new R1(this,this);return n.operator=r,n},e.prototype.next=function(r){if(this.closed)throw new ks;if(!this.isStopped)for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].next(r)},e.prototype.error=function(r){if(this.closed)throw new ks;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,i=n.length,s=n.slice(),o=0;o<i;o++)s[o].error(r);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ks;this.isStopped=!0;for(var r=this.observers,n=r.length,i=r.slice(),s=0;s<n;s++)i[s].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(r){if(this.closed)throw new ks;return t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){if(this.closed)throw new ks;return this.hasError?(r.error(this.thrownError),zr.EMPTY):this.isStopped?(r.complete(),zr.EMPTY):(this.observers.push(r),new _m(this,r))},e.prototype.asObservable=function(){var r=new Rt;return r.source=this,r},e.create=function(r,n){return new R1(r,n)},e}(Rt),R1=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},e.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},e.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},e.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):zr.EMPTY},e}(Fo);function Za(){return function(e){return e.lift(new l8(e))}}var l8=function(){function t(e){this.connectable=e}return t.prototype.call=function(e,r){var n=this.connectable;n._refCount++;var i=new d8(e,n),s=r.subscribe(i);return i.closed||(i.connection=n.connect()),s},t}(),d8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var r=this.connectable;if(!r){this.connection=null;return}this.connectable=null;var n=r._refCount;if(n<=0){this.connection=null;return}if(r._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,s=r._connection;this.connection=null,s&&(!i||s===i)&&s.unsubscribe()},e}(Ct),h8=function(t){et(e,t);function e(r,n){var i=t.call(this)||this;return i.source=r,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var r=this._connection;return r||(this._isComplete=!1,r=this._connection=new zr,r.add(this.source.subscribe(new g8(this.getSubject(),this))),r.closed&&(this._connection=null,r=zr.EMPTY)),r},e.prototype.refCount=function(){return Za()(this)},e}(Rt),p8=function(){var t=h8.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),g8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.connectable=n,i}return e.prototype._error=function(r){this._unsubscribe(),t.prototype._error.call(this,r)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var r=this.connectable;if(r){this.connectable=null;var n=r._connection;r._refCount=0,r._subject=null,r._connection=null,n&&n.unsubscribe()}},e}(wm),Ku=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n._value=r,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(r){var n=t.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ks;return this._value},e.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},e}(Fo),b8=function(t){et(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e}(zr),Am=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,s=void 0;try{this.work(r)}catch(o){i=!0,s=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),s},e.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,i=n.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,s!==-1&&i.splice(s,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},e}(b8),v8=function(t){et(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return e.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?t.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,n){return n>0||this.closed?t.prototype.execute.call(this,r,n):this._execute(r,n)},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?t.prototype.requestAsyncId.call(this,r,n,i):r.flush(this)},e}(Am),I1=function(){function t(e,r){r===void 0&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,e).schedule(n,r)},t.now=function(){return Date.now()},t}(),xm=function(t){et(e,t);function e(r,n){n===void 0&&(n=I1.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var i;this.active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e}(I1),m8=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(xm),y8=new m8(v8),E8=y8,Sm=new Rt(function(t){return t.complete()});function c0(t){return t?_8(t):Sm}function _8(t){return new Rt(function(e){return t.schedule(function(){return e.complete()})})}function ec(t){return t&&typeof t.schedule=="function"}var Rm=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()}};function f0(t,e){return new Rt(function(r){var n=new zr,i=0;return n.add(e.schedule(function(){if(i===t.length){r.complete();return}r.next(t[i++]),r.closed||n.add(this.schedule())})),n})}function Im(t,e){return e?f0(t,e):new Rt(Rm(t))}function ca(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return ec(r)?(t.pop(),f0(t,r)):Im(t)}function u0(t,e){return e?new Rt(function(r){return e.schedule(w8,0,{error:t,subscriber:r})}):new Rt(function(r){return r.error(t)})}function w8(t){var e=t.error,r=t.subscriber;r.error(e)}var cd=function(){function t(e,r,n){this.kind=e,this.value=r,this.error=n,this.hasValue=e==="N"}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,r,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return r&&r(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,r,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,r,n)},t.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return ca(this.value);case"E":return u0(this.error);case"C":return c0()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return typeof e<"u"?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),A8=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=0);var s=t.call(this,r)||this;return s.scheduler=n,s.delay=i,s}return e.dispatch=function(r){var n=r.notification,i=r.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(r){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new x8(r,this.destination)))},e.prototype._next=function(r){this.scheduleMessage(cd.createNext(r))},e.prototype._error=function(r){this.scheduleMessage(cd.createError(r)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(cd.createComplete()),this.unsubscribe()},e}(Ct),x8=function(){function t(e,r){this.notification=e,this.destination=r}return t}(),tc=function(t){et(e,t);function e(r,n,i){r===void 0&&(r=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=t.call(this)||this;return s.scheduler=i,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=r<1?1:r,s._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return e.prototype.nextInfiniteTimeWindow=function(r){if(!this.isStopped){var n=this._events;n.push(r),n.length>this._bufferSize&&n.shift()}t.prototype.next.call(this,r)},e.prototype.nextTimeWindow=function(r){this.isStopped||(this._events.push(new S8(this._getNow(),r)),this._trimBufferThenGetEvents()),t.prototype.next.call(this,r)},e.prototype._subscribe=function(r){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,o=i.length,a;if(this.closed)throw new ks;if(this.isStopped||this.hasError?a=zr.EMPTY:(this.observers.push(r),a=new _m(this,r)),s&&r.add(r=new A8(r,s)),n)for(var c=0;c<o&&!r.closed;c++)r.next(i[c]);else for(var c=0;c<o&&!r.closed;c++)r.next(i[c].value);return this.hasError?r.error(this.thrownError):this.isStopped&&r.complete(),a},e.prototype._getNow=function(){return(this.scheduler||E8).now()},e.prototype._trimBufferThenGetEvents=function(){for(var r=this._getNow(),n=this._bufferSize,i=this._windowTime,s=this._events,o=s.length,a=0;a<o&&!(r-s[a].time<i);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&s.splice(0,a),s},e}(Fo),S8=function(){function t(e,r){this.time=e,this.value=r}return t}(),R8=new xm(Am),Om=R8;function mi(){}var I8=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),O8=I8,T8=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),Tm=T8;function Gs(t,e){return function(n){if(typeof t!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new P8(t,e))}}var P8=function(){function t(e,r){this.project=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new N8(e,this.project,this.thisArg))},t}(),N8=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.project=n,s.count=0,s.thisArg=i||s,s}return e.prototype._next=function(r){var n;try{n=this.project.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(Ct),M8=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r,n,i,s,o){this.destination.next(n)},e.prototype.notifyError=function(r,n){this.destination.error(r)},e.prototype.notifyComplete=function(r){this.destination.complete()},e}(Ct),L8=function(t){et(e,t);function e(r,n,i){var s=t.call(this)||this;return s.parent=r,s.outerValue=n,s.outerIndex=i,s.index=0,s}return e.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this.index++,this)},e.prototype._error=function(r){this.parent.notifyError(r,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Ct),C8=function(t){return function(e){return t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,Eo),e}};function B8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hu=B8(),k8=function(t){return function(e){var r=t[Hu]();do{var n=void 0;try{n=r.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof r.return=="function"&&e.add(function(){r.return&&r.return()}),e}},D8=function(t){return function(e){var r=t[wc]();if(typeof r.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Pm=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Nm(t){return!!t&&typeof t.subscribe!="function"&&typeof t.then=="function"}var l0=function(t){if(t&&typeof t[wc]=="function")return D8(t);if(Pm(t))return Rm(t);if(Nm(t))return C8(t);if(t&&typeof t[Hu]=="function")return k8(t);var e=Em(t)?"an invalid object":"'"+t+"'",r="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(r)};function U8(t,e,r,n,i){if(i===void 0&&(i=new L8(t,r,n)),!i.closed)return e instanceof Rt?e.subscribe(i):l0(e)(i)}var O1={};function T1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return ec(t[t.length-1])&&(n=t.pop()),typeof t[t.length-1]=="function"&&(r=t.pop()),t.length===1&&o0(t[0])&&(t=t[0]),Im(t,n).lift(new K8(r))}var K8=function(){function t(e){this.resultSelector=e}return t.prototype.call=function(e,r){return r.subscribe(new H8(e,this.resultSelector))},t}(),H8=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(r){this.values.push(O1),this.observables.push(r)},e.prototype._complete=function(){var r=this.observables,n=r.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var s=r[i];this.add(U8(this,s,void 0,i))}}},e.prototype.notifyComplete=function(r){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(r,n,i){var s=this.values,o=s[i],a=this.toRespond?o===O1?--this.toRespond:this.toRespond:0;s[i]=n,a===0&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(r){var n;try{n=this.resultSelector.apply(this,r)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(M8);function F8(t,e){return new Rt(function(r){var n=new zr;return n.add(e.schedule(function(){var i=t[wc]();n.add(i.subscribe({next:function(s){n.add(e.schedule(function(){return r.next(s)}))},error:function(s){n.add(e.schedule(function(){return r.error(s)}))},complete:function(){n.add(e.schedule(function(){return r.complete()}))}}))})),n})}function j8(t,e){return new Rt(function(r){var n=new zr;return n.add(e.schedule(function(){return t.then(function(i){n.add(e.schedule(function(){r.next(i),n.add(e.schedule(function(){return r.complete()}))}))},function(i){n.add(e.schedule(function(){return r.error(i)}))})})),n})}function G8(t,e){if(!t)throw new Error("Iterable cannot be null");return new Rt(function(r){var n=new zr,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=t[Hu](),n.add(e.schedule(function(){if(!r.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(c){r.error(c);return}o?r.complete():(r.next(s),this.schedule())}}))})),n})}function V8(t){return t&&typeof t[wc]=="function"}function q8(t){return t&&typeof t[Hu]=="function"}function $8(t,e){if(t!=null){if(V8(t))return F8(t,e);if(Nm(t))return j8(t,e);if(Pm(t))return f0(t,e);if(q8(t)||typeof t=="string")return G8(t,e)}throw new TypeError((t!==null&&typeof t||t)+" is not observable")}function no(t,e){return e?$8(t,e):t instanceof Rt?t:new Rt(l0(t))}var Ac=function(t){et(e,t);function e(r){var n=t.call(this)||this;return n.parent=r,n}return e.prototype._next=function(r){this.parent.notifyNext(r)},e.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Ct),xc=function(t){et(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyError=function(r){this.destination.error(r)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Ct);function Sc(t,e){if(!e.closed){if(t instanceof Rt)return t.subscribe(e);var r;try{r=l0(t)(e)}catch(n){e.error(n)}return r}}function Fu(t,e,r){return r===void 0&&(r=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(Fu(function(i,s){return no(t(i,s)).pipe(Gs(function(o,a){return e(i,o,s,a)}))},r))}:(typeof e=="number"&&(r=e),function(n){return n.lift(new z8(t,r))})}var z8=function(){function t(e,r){r===void 0&&(r=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=r}return t.prototype.call=function(e,r){return r.subscribe(new W8(e,this.project,this.concurrent))},t}(),W8=function(t){et(e,t);function e(r,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=n,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},e.prototype._tryNext=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(r){var n=new Ac(this),i=this.destination;i.add(n);var s=Sc(r,n);s!==n&&i.add(s)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(r){this.destination.next(r)},e.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(xc);function X8(t){return t===void 0&&(t=Number.POSITIVE_INFINITY),Fu(a0,t)}function J8(){return X8(1)}function kf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return J8()(ca.apply(void 0,t))}function Mm(t){return new Rt(function(e){var r;try{r=t()}catch(i){e.error(i);return}var n=r?no(r):c0();return n.subscribe(e)})}function P1(t){return!o0(t)&&t-parseFloat(t)+1>=0}var Y8=new Rt(mi);function Df(t,e){return function(n){return n.lift(new Q8(t,e))}}var Q8=function(){function t(e,r){this.predicate=e,this.thisArg=r}return t.prototype.call=function(e,r){return r.subscribe(new Z8(e,this.predicate,this.thisArg))},t}(),Z8=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.thisArg=i,s.count=0,s}return e.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(r)},e}(Ct);function d0(t,e,r){return t===void 0&&(t=0),new Rt(function(n){e===void 0&&(e=t,t=0);var i=0,s=t;if(r)return r.schedule(ex,0,{index:i,count:e,start:t,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(s++),n.closed)break}while(!0)})}function ex(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;if(r>=n){i.complete();return}i.next(e),!i.closed&&(t.index=r+1,t.start=e+1,this.schedule(t))}function N1(t,e,r){t===void 0&&(t=0);var n=-1;return P1(e)?n=Number(e)<1&&1||Number(e):ec(e)&&(r=e),ec(r)||(r=Om),new Rt(function(i){var s=P1(t)?t:+t-r.now();return r.schedule(tx,s,{index:0,period:n,subscriber:i})})}function tx(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(r===-1)return n.complete();t.index=e+1,this.schedule(t,r)}}function h0(t){return function(r){var n=new rx(t),i=r.lift(n);return n.caught=i}}var rx=function(){function t(e){this.selector=e}return t.prototype.call=function(e,r){return r.subscribe(new nx(e,this.selector,this.caught))},t}(),nx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.selector=n,s.caught=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=void 0;try{n=this.selector(r,this.caught)}catch(o){t.prototype.error.call(this,o);return}this._unsubscribeAndRecycle();var i=new Ac(this);this.add(i);var s=Sc(n,i);s!==i&&this.add(s)}},e}(xc);function Rc(t,e){return Fu(t,e,1)}function ix(t){return t===void 0&&(t=null),function(e){return e.lift(new sx(t))}}var sx=function(){function t(e){this.defaultValue=e}return t.prototype.call=function(e,r){return r.subscribe(new ox(e,this.defaultValue))},t}(),ox=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(r){this.isEmpty=!1,this.destination.next(r)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(Ct);function ax(t){return t instanceof Date&&!isNaN(+t)}function Lm(t,e){return function(r){return r.lift(new cx(t,e))}}var cx=function(){function t(e,r){this.compare=e,this.keySelector=r}return t.prototype.call=function(e,r){return r.subscribe(new fx(e,this.compare,this.keySelector))},t}(),fx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.keySelector=i,s.hasKey=!1,typeof n=="function"&&(s.compare=n),s}return e.prototype.compare=function(r,n){return r===n},e.prototype._next=function(r){var n;try{var i=this.keySelector;n=i?i(r):r}catch(a){return this.destination.error(a)}var s=!1;if(this.hasKey)try{var o=this.compare;s=o(this.key,n)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=n,this.destination.next(r))},e}(Ct);function ux(t,e){return Lm(function(r,n){return e?e(r[t],n[t]):r[t]===n[t]})}function lx(t){return t===void 0&&(t=px),function(e){return e.lift(new dx(t))}}var dx=function(){function t(e){this.errorFactory=e}return t.prototype.call=function(e,r){return r.subscribe(new hx(e,this.errorFactory))},t}(),hx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(r){this.hasValue=!0,this.destination.next(r)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var r=void 0;try{r=this.errorFactory()}catch(n){r=n}this.destination.error(r)},e}(Ct);function px(){return new Tm}function gx(t){return function(e){return t===0?c0():e.lift(new bx(t))}}var bx=function(){function t(e){if(this.total=e,this.total<0)throw new O8}return t.prototype.call=function(e,r){return r.subscribe(new vx(e,this.total))},t}(),vx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(r){var n=this.total,i=++this.count;i<=n&&(this.destination.next(r),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(Ct);function Cm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){return kf(r,ca.apply(void 0,t))}}function Pi(t,e){var r=arguments.length>=2;return function(n){return n.pipe(t?Df(function(i,s){return t(i,s,n)}):a0,gx(1),r?ix(e):lx(function(){return new Tm}))}}function uh(t,e){return function(n){var i;if(typeof t=="function"?i=t:i=function(){return t},typeof e=="function")return n.lift(new mx(i,e));var s=Object.create(n,p8);return s.source=n,s.subjectFactory=i,s}}var mx=function(){function t(e,r){this.subjectFactory=e,this.selector=r}return t.prototype.call=function(e,r){var n=this.selector,i=this.subjectFactory(),s=n(i).subscribe(e);return s.add(r.subscribe(i)),s},t}();function M1(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length;if(r===0)throw new Error("list of properties cannot be empty.");return function(n){return Gs(yx(t,r))(n)}}function yx(t,e){var r=function(n){for(var i=n,s=0;s<e;s++){var o=i?.[t[s]];if(o!==void 0)i=o;else return}return i};return r}function Ex(t){return t?uh(function(){return new Fo},t):uh(new Fo)}function lh(t,e,r,n){r&&typeof r!="function"&&(n=r);var i=typeof r=="function"?r:void 0,s=new tc(t,e,n);return function(o){return uh(function(){return s},i)(o)}}function Bm(t){return t===void 0&&(t=-1),function(e){return e.lift(new _x(t,e))}}var _x=function(){function t(e,r){this.count=e,this.source=r}return t.prototype.call=function(e,r){return r.subscribe(new wx(e,this.count,this.source))},t}(),wx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.count=n,s.source=i,s}return e.prototype.error=function(r){if(!this.isStopped){var n=this,i=n.source,s=n.count;if(s===0)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(Ct);function L1(t,e,r){var n;return t&&typeof t=="object"?n=t:n={bufferSize:t,windowTime:e,refCount:!1,scheduler:r},function(i){return i.lift(Ax(n))}}function Ax(t){var e=t.bufferSize,r=e===void 0?Number.POSITIVE_INFINITY:e,n=t.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,s=t.refCount,o=t.scheduler,a,c=0,l,f=!1,d=!1;return function(P){c++;var L;!a||f?(f=!1,a=new tc(r,i,o),L=a.subscribe(this),l=P.subscribe({next:function(H){a.next(H)},error:function(H){f=!0,a.error(H)},complete:function(){d=!0,l=void 0,a.complete()}}),d&&(l=void 0)):L=a.subscribe(this),this.add(function(){c--,L.unsubscribe(),L=void 0,l&&!d&&s&&c===0&&(l.unsubscribe(),l=void 0,a=void 0)})}}function xx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return ec(r)?(t.pop(),function(n){return kf(t,n,r)}):function(n){return kf(t,n)}}function Yn(t,e){return typeof e=="function"?function(r){return r.pipe(Yn(function(n,i){return no(t(n,i)).pipe(Gs(function(s,o){return e(n,s,i,o)}))}))}:function(r){return r.lift(new Sx(t))}}var Sx=function(){function t(e){this.project=e}return t.prototype.call=function(e,r){return r.subscribe(new Rx(e,this.project))},t}(),Rx=function(t){et(e,t);function e(r,n){var i=t.call(this,r)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(r){var n,i=this.index++;try{n=this.project(r,i)}catch(s){this.destination.error(s);return}this._innerSub(n)},e.prototype._innerSub=function(r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new Ac(this),s=this.destination;s.add(i),this.innerSubscription=Sc(r,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},e.prototype._complete=function(){var r=this.innerSubscription;(!r||r.closed)&&t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(r){this.destination.next(r)},e}(xc);function Ix(t){return function(e){return e.lift(new Ox(t))}}var Ox=function(){function t(e){this.notifier=e}return t.prototype.call=function(e,r){var n=new Tx(e),i=Sc(this.notifier,new Ac(n));return i&&!n.seenValue?(n.add(i),r.subscribe(n)):n},t}(),Tx=function(t){et(e,t);function e(r){var n=t.call(this,r)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(xc);function Px(t,e){return e===void 0&&(e=!1),function(r){return r.lift(new Nx(t,e))}}var Nx=function(){function t(e,r){this.predicate=e,this.inclusive=r}return t.prototype.call=function(e,r){return r.subscribe(new Mx(e,this.predicate,this.inclusive))},t}(),Mx=function(t){et(e,t);function e(r,n,i){var s=t.call(this,r)||this;return s.predicate=n,s.inclusive=i,s.index=0,s}return e.prototype._next=function(r){var n=this.destination,i;try{i=this.predicate(r,this.index++)}catch(s){n.error(s);return}this.nextOrComplete(r,i)},e.prototype.nextOrComplete=function(r,n){var i=this.destination;n?i.next(r):(this.inclusive&&i.next(r),i.complete())},e}(Ct);function Uf(t,e,r){return function(i){return i.lift(new Lx(t,e,r))}}var Lx=function(){function t(e,r,n){this.nextOrObserver=e,this.error=r,this.complete=n}return t.prototype.call=function(e,r){return r.subscribe(new Cx(e,this.nextOrObserver,this.error,this.complete))},t}(),Cx=function(t){et(e,t);function e(r,n,i,s){var o=t.call(this,r)||this;return o._tapNext=mi,o._tapError=mi,o._tapComplete=mi,o._tapError=i||mi,o._tapComplete=s||mi,Lf(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||mi,o._tapError=n.error||mi,o._tapComplete=n.complete||mi),o}return e.prototype._next=function(r){try{this._tapNext.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.next(r)},e.prototype._error=function(r){try{this._tapError.call(this._context,r)}catch(n){this.destination.error(n);return}this.destination.error(r)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(r){this.destination.error(r);return}return this.destination.complete()},e}(Ct);function km(t,e,r){return r===void 0&&(r=Om),function(n){var i=ax(t),s=i?+t-r.now():Math.abs(t);return n.lift(new Bx(s,i,e,r))}}var Bx=function(){function t(e,r,n,i){this.waitFor=e,this.absoluteTimeout=r,this.withObservable=n,this.scheduler=i}return t.prototype.call=function(e,r){return r.subscribe(new kx(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),kx=function(t){et(e,t);function e(r,n,i,s,o){var a=t.call(this,r)||this;return a.absoluteTimeout=n,a.waitFor=i,a.withObservable=s,a.scheduler=o,a.scheduleTimeout(),a}return e.dispatchTimeout=function(r){var n=r.withObservable;r._unsubscribeAndRecycle(),r.add(Sc(n,new Ac(r)))},e.prototype.scheduleTimeout=function(){var r=this.action;r?this.action=r.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(r){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,r)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(xc),Dx=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(o){return function(a,c){var l={key:a,value:o[a]},f={key:c,value:o[c]};return s(l,f)}}}(e.cmp),i=[];return function s(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var a,c;if(Array.isArray(o)){for(c="[",a=0;a<o.length;a++)a&&(c+=","),c+=s(o[a])||"null";return c+"]"}if(o===null)return"null";if(i.indexOf(o)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var l=i.push(o)-1,f=Object.keys(o).sort(n&&n(o));for(c="",a=0;a<f.length;a++){var d=f[a],I=s(o[d]);I&&(c&&(c+=","),c+=JSON.stringify(d)+":"+I)}return i.splice(l,1),"{"+c+"}"}}(t)},Dm;class Ux extends Error{constructor(e){super(`The map type '${e}' is invalid`),this.mapType=e,this.name="InvalidMapTypeError"}}const Um=Symbol.for("taquito-michelson-map-type-symbol"),Kx=t=>"args"in t&&Array.isArray(t.args)&&t.args.length===2;class C1 extends Error{constructor(e,r,n){super(`${n} not compliant with underlying michelson type`),this.value=e,this.type=r,this.name="MapTypecheckError"}}class jr{constructor(e){this.valueMap=new Map,this.keyMap=new Map,this[Dm]=!0,e&&this.setType(e)}static isMichelsonMap(e){return e&&e[Um]===!0}setType(e){if(!Kx(e))throw new Ux(e.toString());this.keySchema=new Gr(e.args[0]),this.valueSchema=new Gr(e.args[1])}removeType(){this.keySchema=void 0,this.valueSchema=void 0}static fromLiteral(e,r){const n=new jr(r);return Object.keys(e).forEach(i=>{n.set(i,e[i])}),n}typecheckKey(e){return this.keySchema?this.keySchema.Typecheck(e):!0}typecheckValue(e){return this.valueSchema?this.valueSchema.Typecheck(e):!0}assertTypecheckValue(e){if(!this.typecheckValue(e))throw new C1(e,this.valueSchema,"value")}assertTypecheckKey(e){if(!this.typecheckKey(e))throw new C1(e,this.keySchema,"key")}serializeDeterministically(e){return Dx(e)}*keys(){for(const[e]of this.entries())yield e}*values(){for(const[,e]of this.entries())yield e}*entries(){for(const e of this.valueMap.keys())yield[this.keyMap.get(e),this.valueMap.get(e)]}get(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.valueMap.get(r)}set(e,r){this.assertTypecheckKey(e),this.assertTypecheckValue(r);const n=this.serializeDeterministically(e);this.keyMap.set(n,e),this.valueMap.set(n,r)}delete(e){this.assertTypecheckKey(e),this.keyMap.delete(this.serializeDeterministically(e)),this.valueMap.delete(this.serializeDeterministically(e))}has(e){this.assertTypecheckKey(e);const r=this.serializeDeterministically(e);return this.keyMap.has(r)&&this.valueMap.has(r)}clear(){this.keyMap.clear(),this.valueMap.clear()}get size(){return this.keyMap.size}forEach(e){for(const[r,n]of this.entries())e(n,r,this)}}Dm=Um;class dt extends Error{constructor(e,r,n){super(),this.value=e,this.token=r,this.name="ValidationError";const i=this.token.annot(),s=i?`[${i}] `:"";this.message=`${s}${n}`}}class Kt{constructor(e,r,n){this.val=e,this.idx=r,this.fac=n,this.createToken=this.fac}typeWithoutAnnotations(){const e=n=>{if(typeof n=="object"){if(Array.isArray(n))return n.map(o=>e(o));const i=n;return i.args?{prim:i.prim,args:i.args.map(s=>e(s))}:{prim:i.prim}}return n};return(n=>n.args?{prim:n.prim,args:n.args.map(i=>e(i))}:{prim:n.prim})(this.val)}annot(){return(Array.isArray(this.val.annots)&&this.val.annots.length>0?this.val.annots[0]:String(this.idx)).replace(/(%|:)(_Liq_entry_)?/,"")}hasAnnotations(){return Array.isArray(this.val.annots)&&this.val.annots.length}get tokenVal(){return this.val}ExtractSignature(){return[[this.ExtractSchema()]]}}class Tt extends Kt{compare(e,r){return e===r?0:e<r?-1:1}}class B1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BigMapValidationError"}}class Fr extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}ExtractSchema(){return{big_map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:Fr.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}isValid(e){return jr.isMichelsonMap(e)?null:new B1(e,this,"Value must be a MichelsonMap")}objLitToMichelsonMap(e){return e instanceof jr?e:typeof e=="object"?Object.keys(e).length===0?new jr:jr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[Fr.prim]?r[Fr.prim](n,this.val):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}Execute(e,r){if(r&&r[Fr.prim])return r[Fr.prim](e,this.val);if(Array.isArray(e)){const n=new jr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1]))}),n}else{if("int"in e)return e.int;throw new B1(e,this,`Big map is expecting either an array (Athens) or an object with an int property (Babylon). Got ${JSON.stringify(e)}`)}}findAndReturnTokens(e,r){return Fr.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}Fr.prim="big_map";class Hx extends Error{constructor(e){super(e),this.message=e,this.name="OrTokenDecodingError"}}class rt extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e[e.length-1],n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof rt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(String(n.annot())===String(r)&&!(n instanceof rt))return e.pop(),{prim:"Left",args:[n.Encode(e)]};if(String(s.annot())===String(r)&&!(s instanceof rt))return e.pop(),{prim:"Right",args:[s.Encode(e)]};if(n instanceof rt){const o=n.Encode(e);if(o)return{prim:"Left",args:[o]}}if(s instanceof rt){const o=s.Encode(e);if(o)return{prim:"Right",args:[o]}}return null}ExtractSignature(){const e=this.createToken(this.val.args[0],this.idx);let r=1;e instanceof rt&&(r=Object.keys(e.ExtractSchema()).length);const n=this.createToken(this.val.args[1],this.idx+r),i=[];if(e instanceof rt)i.push(...e.ExtractSignature());else for(const s of e.ExtractSignature())i.push([e.annot(),...s]);if(n instanceof rt)i.push(...n.ExtractSignature());else for(const s of n.ExtractSignature())i.push([n.annot(),...s]);return i}EncodeObject(e,r){const n=Object.keys(e)[0],i=this.createToken(this.val.args[0],this.idx);let s=1;i instanceof rt&&(s=Object.keys(i.ExtractSchema()).length);const o=this.createToken(this.val.args[1],this.idx+s);if(String(i.annot())===String(n)&&!(i instanceof rt))return{prim:"Left",args:[i.EncodeObject(e[n],r)]};if(String(o.annot())===String(n)&&!(o instanceof rt))return{prim:"Right",args:[o.EncodeObject(e[n],r)]};if(i instanceof rt){const a=i.EncodeObject(e,r);if(a)return{prim:"Left",args:[a]}}if(o instanceof rt){const a=o.EncodeObject(e,r);if(a)return{prim:"Right",args:[a]}}return null}Execute(e,r){const n=this.createToken(this.val.args[0],this.idx);let i=1;n instanceof rt&&(i=Object.keys(n.ExtractSchema()).length);const s=this.createToken(this.val.args[1],this.idx+i);if(e.prim==="Right")return s instanceof rt?s.Execute(e.args[0],r):{[s.annot()]:s.Execute(e.args[0],r)};if(e.prim==="Left")return n instanceof rt?n.Execute(e.args[0],r):{[n.annot()]:n.Execute(e.args[0],r)};throw new Hx(`Was expecting Left or Right prim but got: ${e.prim}`)}traversal(e,r,n){const i=this.createToken(this.val.args[0],this.idx);let s=1,o;i instanceof rt&&!i.hasAnnotations()?(o=e(i),s=Object.keys(i.ExtractSchema()).length):o={[i.annot()]:e(i)};const a=this.createToken(this.val.args[1],this.idx+s);let c;return a instanceof rt&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},n(o,c)}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}generateSchema(){return{__michelsonType:rt.prim,schema:this.traversal(e=>e instanceof rt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof rt&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),(e,r)=>Object.assign(Object.assign({},e),r))}}findToken(e){const r=this.createToken(this.val.args[0],this.idx);let n=1;r instanceof rt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(this.val.args[1],this.idx+n);if(String(r.annot())===String(e)&&!(r instanceof rt)&&r instanceof Tt)return r;if(String(i.annot())===String(e)&&!(i instanceof rt)&&i instanceof Tt)return i;if(r instanceof rt){const s=r.findToken(e);if(s)return s}if(i instanceof rt){const s=i.findToken(e);if(s)return s}return null}compare(e,r){const n=Object.keys(e)[0],i=Object.keys(r)[0];if(n===i){const s=this.findToken(n);if(s instanceof Tt)return s.compare(e[n],r[n])}else{const s=JSON.stringify(this.EncodeObject(e)),o=JSON.stringify(this.EncodeObject(r));return s<o?-1:1}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return rt.prim===e&&r.push(this),this.traversal(n=>n.findAndReturnTokens(e,r),n=>n.findAndReturnTokens(e,r),(n,i)=>Object.assign(Object.assign({},n),i)),r}}rt.prim="or";class Fx extends Error{constructor(e){super(e),this.message=e,this.name="TokenArgumentValidationError"}}class jx extends Error{constructor(e,r){super(`Tokens ${e} and ${r} are not comparable`),this.val1=e,this.val2=r,this.name="TokenComparisonError"}}function dh(t,e=Ut.prim){if(Array.isArray(t))return dh({prim:e,args:t},e);if(t.args===void 0)throw new Fx("Encountered an invalid PairToken with no arguments, a pair must have two or more arguments");return t.args.length>2?[t.args[0],{prim:e,args:t.args.slice(1)}]:[t.args[0],t.args[1]]}class Ut extends Tt{constructor(e,r,n){super(Array.isArray(e)?{prim:Ut.prim,args:e}:e.prim?e:{prim:Ut.prim,args:e},r,n)}args(){return dh(this.val)}tokens(){let e=0;return this.args().map(r=>{const n=this.createToken(r,this.idx+e);return n instanceof Ut?e+=Object.keys(n.ExtractSchema()).length:e++,n})}Encode(e){return{prim:"Pair",args:this.tokens().map(r=>r.Encode(e))}}ExtractSignature(){const e=this.args(),r=this.createToken(e[0],this.idx);let n=1;r instanceof rt&&(n=Object.keys(r.ExtractSchema()).length);const i=this.createToken(e[1],this.idx+n),s=[];for(const o of r.ExtractSignature())for(const a of i.ExtractSignature())s.push([...o,...a]);return s}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}ToKey(e){return this.Execute(e)}EncodeObject(e,r){const[n,i]=this.tokens();let s;n instanceof Ut&&!n.hasAnnotations()?s=e:s=e[n.annot()];let o;return i instanceof Ut&&!i.hasAnnotations()?o=e:o=e[i.annot()],{prim:"Pair",args:[n.EncodeObject(s,r),i.EncodeObject(o,r)]}}traversal(e,r){const n=this.args(),i=this.createToken(n[0],this.idx);let s=1,o;i instanceof Ut&&(s=Object.keys(i.ExtractSchema()).length),i instanceof Ut&&!i.hasAnnotations()?o=e(i):o={[i.annot()]:e(i)};const a=this.createToken(n[1],this.idx+s);let c;return a instanceof Ut&&!a.hasAnnotations()?c=r(a):c={[a.annot()]:r(a)},Object.assign(Object.assign({},o),c)}Execute(e,r){const n=dh(e,"Pair");return this.traversal(i=>i.Execute(n[0],r),i=>i.Execute(n[1],r))}ExtractSchema(){return this.traversal(e=>e.ExtractSchema(),e=>e.ExtractSchema())}generateSchema(){return{__michelsonType:Ut.prim,schema:this.traversal(e=>e instanceof Ut&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema(),e=>e instanceof Ut&&!e.hasAnnotations()?e.generateSchema().schema:e.generateSchema())}}compare(e,r){const[n,i]=this.tokens(),s=(o,a)=>o instanceof Ut&&!o.hasAnnotations()?a:a[o.annot()];if(n instanceof Tt&&i instanceof Tt){const o=n.compare(s(n,e),s(n,r));return o===0?i.compare(s(i,e),s(i,r)):o}throw new jx(e,r)}findAndReturnTokens(e,r){return Ut.prim===e&&r.push(this),this.tokens().map(n=>n.findAndReturnTokens(e,r)),r}}Ut.prim="pair";class k1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NatValidationError"}}class Nn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new be(r).toFixed()}}isValid(e){const r=new be(e);return r.isNaN()?new k1(e,this,`Value is not a number: ${e}`):r.isNegative()?new k1(e,this,`Value cannot be negative: ${e}`):null}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Nn.prim]?r[Nn.prim](e):{int:new be(e).toFixed()}}ExtractSchema(){return Nn.prim}generateSchema(){return{__michelsonType:Nn.prim,schema:Nn.prim}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Nn.prim}}}ToKey({int:e}){return new be(e)}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Nn.prim===e&&r.push(this),r}}Nn.prim="nat";class Mn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Mn.prim}generateSchema(){return{__michelsonType:Mn.prim,schema:Mn.prim}}Encode(e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[Mn.prim]?r[Mn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Mn.prim}}}findAndReturnTokens(e,r){return Mn.prim===e&&r.push(this),r}}Mn.prim="string";class fd extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="AddressValidationError"}}class Ei extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:t8(e)},type:{prim:"bytes"}}}isValid(e){return ct(e)!==_e.VALID?new fd(e,this,`Address is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Ei.prim]?r[Ei.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new fd(e,this,`cannot be missing both string and bytes: ${e}`);return ch(e.bytes)}ExtractSchema(){return Ei.prim}generateSchema(){return{__michelsonType:Ei.prim,schema:Ei.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new fd({bytes:e,string:r},this,`cannot be missing both string and bytes ${{string:r,bytes:e}}`);return ch(e)}compare(e,r){const n=o=>o.startsWith("tz"),i=n(e),s=n(r);return i&&!s?-1:s&&!i?1:super.compare(e,r)}findAndReturnTokens(e,r){return Ei.prim===e&&r.push(this),r}}Ei.prim="address";class Gx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MapValidationError"}}class ds extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get ValueSchema(){return this.createToken(this.val.args[1],0)}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return jr.isMichelsonMap(e)?null:new Gx(e,this,"Value must be a MichelsonMap")}Execute(e,r){const n=new jr(this.val);return e.forEach(i=>{n.set(this.KeySchema.ToKey(i.args[0]),this.ValueSchema.Execute(i.args[1],r))}),n}objLitToMichelsonMap(e){return e instanceof jr?e:typeof e=="object"?Object.keys(e).length===0?new jr:jr.fromLiteral(e):e}Encode(e){const r=this.objLitToMichelsonMap(e.pop()),n=this.isValid(r);if(n)throw n;return Array.from(r.keys()).sort((i,s)=>this.KeySchema.compare(i,s)).map(i=>({prim:"Elt",args:[this.KeySchema.EncodeObject(i),this.ValueSchema.EncodeObject(r.get(i))]}))}EncodeObject(e,r){const n=this.objLitToMichelsonMap(e),i=this.isValid(n);if(i)throw i;return r&&r[ds.prim]?r[ds.prim](n):Array.from(n.keys()).sort((s,o)=>this.KeySchema.compare(s,o)).map(s=>({prim:"Elt",args:[this.KeySchema.EncodeObject(s),this.ValueSchema.EncodeObject(n.get(s))]}))}ExtractSchema(){return{map:{key:this.KeySchema.ExtractSchema(),value:this.ValueSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ds.prim,schema:{key:this.KeySchema.generateSchema(),value:this.ValueSchema.generateSchema()}}}findAndReturnTokens(e,r){return ds.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),this.ValueSchema.findAndReturnTokens(e,r),r}}ds.prim="map";class Ln extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return String(e.prim).toLowerCase()==="true"}Encode(e){return{prim:e.pop()?"True":"False"}}EncodeObject(e,r){return r&&r[Ln.prim]?r[Ln.prim](e):{prim:e?"True":"False"}}ExtractSchema(){return Ln.prim}generateSchema(){return{__michelsonType:Ln.prim,schema:Ln.prim}}ToBigMapKey(e){return{key:this.EncodeObject(e),type:{prim:Ln.prim}}}ToKey(e){return this.EncodeObject(e)}compare(e,r){return e&&r||!e&&!r?0:e?1:-1}findAndReturnTokens(e,r){return Ln.prim===e&&r.push(this),r}}Ln.prim="bool";class Hc extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="TxRollupL2AddressValidationError"}}class _i extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:r8(e)},type:{prim:"bytes"}}}isValid(e){if(ct(e)!==_e.VALID)throw new Hc(e,this,`tx_rollup_l2_address is not valid: ${e}`);return null}Encode(e){const r=e.pop();if(!r)throw new Hc(r,this,`arg missing to encode: this -> "${r}"`);return this.isValid(r),{string:r}}EncodeObject(e,r){return this.isValid(e),r&&r[_i.prim]?r[_i.prim](e):{string:e}}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new Hc(e,this,`value cannot be missing string and byte value. must have one ${JSON.stringify(e)}`);return b1(e.bytes)}ExtractSchema(){return _i.prim}generateSchema(){return{__michelsonType:_i.prim,schema:_i.prim}}ToKey({bytes:e,string:r}){if(r)return r;if(!e)throw new Hc(e,this,`value cannot be missing string and byte value. must have one: bytes = ${e}`);return b1(e)}findAndReturnTokens(e,r){return _i.prim===e&&r.push(this),r}}_i.prim="tx_rollup_l2_address";class D1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ContractValidationError"}}class Nr extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return ct(e)!==_e.VALID?new D1(e,this,"Contract address is not valid"):null}Execute(e){if(e.string)return e.string;if(!e.bytes)throw new D1(e,this,"must contain bytes or string");return ch(e.bytes)}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Nr.prim]?r[Nr.prim](e):{string:e}}ExtractSchema(){return Nr.prim}generateSchema(){const e=this.createToken(this.val.args[0],0);return{__michelsonType:Nr.prim,schema:{parameter:this.val.args[0]?e.generateSchema():{}}}}findAndReturnTokens(e,r){return Nr.prim===e&&r.push(this),r}}Nr.prim="contract";class Vx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ListValidationError"}}class rs extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueSchema(){return this.createToken(this.val.args[0],this.idx)}isValid(e){return Array.isArray(e)?null:new Vx(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;const i=this.createToken(this.val.args[0],0);return r.reduce((s,o)=>[...s,i.EncodeObject(o)],[])}Execute(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return e.reduce((s,o)=>[...s,n.Execute(o,r)],[])}EncodeObject(e,r){const n=this.createToken(this.val.args[0],0),i=this.isValid(e);if(i)throw i;return r&&r[rs.prim]?r[rs.prim](e):e.reduce((s,o)=>[...s,n.EncodeObject(o)],[])}ExtractSchema(){return{[rs.prim]:this.valueSchema.ExtractSchema()}}generateSchema(){return{__michelsonType:rs.prim,schema:this.valueSchema.generateSchema()}}findAndReturnTokens(e,r){return rs.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),r}}rs.prim="list";class qx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="MutezValidationError"}}class Cn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}ExtractSchema(){return Cn.prim}generateSchema(){return{__michelsonType:Cn.prim,schema:Cn.prim}}isValid(e){return new be(e).isNaN()?new qx(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:String(r).toString()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Cn.prim]?r[Cn.prim](e):{int:String(e).toString()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:Cn.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return Cn.prim===e&&r.push(this),r}}Cn.prim="mutez";class $x extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="BytesValidationError"}}class Bn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}ToBigMapKey(e){return{key:{bytes:e},type:{prim:Bn.prim}}}isValid(e){return typeof e=="string"&&/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new $x(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=m1(this.convertUint8ArrayToHexString(r));const n=this.isValid(r);if(n)throw n;return{bytes:String(r).toString()}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e),typeof e=="string"&&(e=m1(e));const n=this.isValid(e);if(n)throw n;return r&&r[Bn.prim]?r[Bn.prim](e):{bytes:String(e).toString()}}Execute(e){return e.bytes}ExtractSchema(){return Bn.prim}generateSchema(){return{__michelsonType:Bn.prim,schema:Bn.prim}}ToKey({bytes:e,string:r}){return r||e}findAndReturnTokens(e,r){return Bn.prim===e&&r.push(this),r}}Bn.prim="bytes";class jo extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}subToken(){return this.createToken(this.val.args[0],this.idx)}schema(){return this.createToken(this.val.args[0],0)}annot(){return Array.isArray(this.val.annots)?super.annot():this.createToken(this.val.args[0],this.idx).annot()}Encode(e){const r=e;return r==null?{prim:"None"}:Array.isArray(r)&&(r[r.length-1]===void 0||r[r.length-1]===null)?(r.pop(),{prim:"None"}):{prim:"Some",args:[this.schema().Encode(e)]}}EncodeObject(e,r){const n=e;return n==null?{prim:"None"}:{prim:"Some",args:[this.schema().EncodeObject(n,r)]}}Execute(e,r){return e.prim==="None"?null:this.schema().Execute(e.args[0],r)}ExtractSchema(){return this.schema().ExtractSchema()}generateSchema(){return{__michelsonType:jo.prim,schema:this.schema().generateSchema()}}ExtractSignature(){return[...this.schema().ExtractSignature(),[]]}get KeySchema(){return this.schema()}compare(e,r){if(e){if(!r)return 1}else return-1;return this.KeySchema.compare(e,r)}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:this.EncodeObject(e),type:this.typeWithoutAnnotations()}}findAndReturnTokens(e,r){return jo.prim===e&&r.push(this),this.subToken().findAndReturnTokens(e,r),r}}jo.prim="option";class kn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){if(e.string&&/^\d+$/.test(e.string))return new Date(Number(e.string)*1e3).toISOString();if(e.string)return new Date(e.string).toISOString();if(e.int)return new Date(Number(e.int)*1e3).toISOString()}Encode(e){const r=e.pop();return typeof r=="number"?{int:String(r)}:{string:r}}EncodeObject(e,r){return r&&r[kn.prim]?r[kn.prim](e):typeof e=="number"?{int:String(e)}:{string:e}}ExtractSchema(){return kn.prim}generateSchema(){return{__michelsonType:kn.prim,schema:kn.prim}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:kn.prim}}}findAndReturnTokens(e,r){return kn.prim===e&&r.push(this),r}}kn.prim="timestamp";class zx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="IntValidationError"}}class gr extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return new be(e[Object.keys(e)[0]])}ExtractSchema(){return gr.prim}generateSchema(){return{__michelsonType:gr.prim,schema:gr.prim}}isValid(e){return new be(e).isNaN()?new zx(e,this,`Value is not a number: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{int:new be(r).toFixed()}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[gr.prim]?r[gr.prim](e):{int:new be(e).toFixed()}}ToBigMapKey(e){return{key:{int:String(e)},type:{prim:gr.prim}}}ToKey({int:e}){return e}compare(e,r){const n=Number(e),i=Number(r);return n===i?0:n<i?-1:1}findAndReturnTokens(e,r){return gr.prim===e&&r.push(this),r}}gr.prim="int";class Dn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){return e.pop(),{prim:"Unit"}}EncodeObject(e,r){return r&&r[Dn.prim]?r[Dn.prim](e):{prim:"Unit"}}Execute(e){return q1}ExtractSchema(){return Dn.prim}generateSchema(){return{__michelsonType:Dn.prim,schema:Dn.prim}}compare(e,r){return 0}ToKey(e){return q1}ToBigMapKey(e){return{key:{prim:"Unit"},type:{prim:Dn.prim}}}findAndReturnTokens(e,r){return Dn.prim===e&&r.push(this),r}}Dn.prim="unit";const Wx=4;class Xx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyValidationError"}}class Un extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:n8(e.bytes)}isValid(e){return JA(e)!==_e.VALID?new Xx(e,this,"Key is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Un.prim]?r[Un.prim](e):{string:e}}ExtractSchema(){return Un.prim}generateSchema(){return{__michelsonType:Un.prim,schema:Un.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Un.prim}}}compare(e,r){const n=this.getPrefix(e),i=this.getPrefix(r);if(n===re.EDPK&&i!==re.EDPK)return-1;if(n===re.SPPK&&i!==re.SPPK)return i===re.EDPK?1:-1;if(n===re.P2PK){if(i!==re.P2PK)return 1;const s=this.getP256PublicKeyComparableBytes(e),o=this.getP256PublicKeyComparableBytes(r);return Buffer.compare(s,o)}return super.compare(e,r)}getPrefix(e){return e.substring(0,Wx)}getP256PublicKeyComparableBytes(e){return ym(e,br[re.P2PK]).slice(1)}findAndReturnTokens(e,r){return Un.prim===e&&r.push(this),r}}Un.prim="key";class Jx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="KeyHashValidationError"}}class Kn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:v1(e.bytes)}isValid(e){return i0(e)!==_e.VALID?new Jx(e,this,`KeyHash is not valid: ${e}`):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Kn.prim]?r[Kn.prim](e):{string:e}}ExtractSchema(){return Kn.prim}generateSchema(){return{__michelsonType:Kn.prim,schema:Kn.prim}}ToKey({string:e,bytes:r}){return e||v1(r)}ToBigMapKey(e){return{key:{string:e},type:{prim:Kn.prim}}}findAndReturnTokens(e,r){return Kn.prim===e&&r.push(this),r}}Kn.prim="key_hash";class Yx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SignatureValidationError"}}class Hn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string?e.string:e.bytes}isValid(e){return XA(e)!==_e.VALID?new Yx(e,this,"Signature is not valid"):null}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Hn.prim]?r[Hn.prim](e):{string:e}}ExtractSchema(){return Hn.prim}generateSchema(){return{__michelsonType:Hn.prim,schema:Hn.prim}}ToKey(e){return this.Execute(e)}ToBigMapKey(e){return{key:{string:e},type:{prim:Hn.prim}}}findAndReturnTokens(e,r){return Hn.prim===e&&r.push(this),r}}Hn.prim="signature";class ns extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get paramSchema(){return this.createToken(this.val.args[0],this.idx)}get returnSchema(){return this.createToken(this.val.args[1],this.idx+1)}Execute(e){return e.string?e.string:e}Encode(e){return e.pop()}EncodeObject(e,r){return r&&r[ns.prim]?r[ns.prim](e):e}ExtractSchema(){return{[ns.prim]:{parameters:this.paramSchema.ExtractSchema(),returns:this.returnSchema.ExtractSchema()}}}generateSchema(){return{__michelsonType:ns.prim,schema:{parameters:this.paramSchema.generateSchema(),returns:this.returnSchema.generateSchema()}}}findAndReturnTokens(e,r){return ns.prim===e&&r.push(this),this.createToken(this.val.args[0],this.idx).findAndReturnTokens(e,r),this.createToken(this.val.args[1],this.idx).findAndReturnTokens(e,r),r}}ns.prim="lambda";class wi extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){return e.string}Encode(...e){return{string:e.pop()}}EncodeObject(e,r){return r&&r[wi.prim]?r[wi.prim](e):{string:e}}ExtractSchema(){return wi.prim}generateSchema(){return{__michelsonType:wi.prim,schema:wi.prim}}findAndReturnTokens(e,r){return wi.prim===e&&r.push(this),r}}wi.prim="operation";class Qx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SetValidationError"}}class is extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get KeySchema(){return this.createToken(this.val.args[0],0)}isValid(e){return Array.isArray(e)?null:new Qx(e,this,"Value must be an array")}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return r.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}Execute(e,r){return e.reduce((n,i)=>[...n,this.KeySchema.Execute(i,r)],[])}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[is.prim]?r[is.prim](e):e.sort((i,s)=>this.KeySchema.compare(i,s)).reduce((i,s)=>[...i,this.KeySchema.EncodeObject(s)],[])}ExtractSchema(){return is.prim}generateSchema(){return{__michelsonType:is.prim,schema:this.KeySchema.generateSchema()}}findAndReturnTokens(e,r){return is.prim===e&&r.push(this),this.KeySchema.findAndReturnTokens(e,r),r}}is.prim="set";class Zx extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChainIDValidationError"}}class Fn extends Tt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return vm(e)!==_e.VALID?new Zx(e,this,"ChainID is not valid"):null}Execute(e){return e[Object.keys(e)[0]]}ExtractSchema(){return Fn.prim}generateSchema(){return{__michelsonType:Fn.prim,schema:Fn.prim}}Encode(e){const r=e.pop(),n=this.isValid(r);if(n)throw n;return{string:r}}EncodeObject(e,r){const n=this.isValid(e);if(n)throw n;return r&&r[Fn.prim]?r[Fn.prim](e):{string:e}}ToKey({string:e}){return e}ToBigMapKey(e){return{key:{string:e},type:{prim:Fn.prim}}}findAndReturnTokens(e,r){return Fn.prim===e&&r.push(this),r}}Fn.prim="chain_id";class U1 extends Error{constructor(){super("Tickets cannot be sent to the blockchain; they are created on-chain"),this.name="TicketEncodeError"}}const eS={prim:"contract"},tS={prim:"int"};class qn extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new U1}EncodeObject(e,r){if(r&&r[qn.prim])return r[qn.prim](e,this.val);throw new U1}Execute(e,r){if(r&&r[qn.prim])return r[qn.prim](e,this.val);const n=this.createToken(eS,this.idx),i=this.valueToken,s=this.createToken(tS,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Nr.prim,value:this.valueToken.ExtractSchema(),amount:gr.prim}}generateSchema(){return{__michelsonType:qn.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Nr.prim,schema:Nr.prim},amount:{__michelsonType:gr.prim,schema:gr.prim}}}}findAndReturnTokens(e,r){return qn.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}qn.prim="ticket";class K1 extends Error{constructor(){super("Ticket_deprecated cannot be sent to the blockchain; they are created on-chain"),this.name="TicketDeprecatedEncodeError"}}const rS={prim:"contract"},nS={prim:"int"};class $n extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}get valueToken(){return this.createToken(this.val.args[0],this.idx)}Encode(e){throw new K1}EncodeObject(e,r){if(r&&r[$n.prim])return r[$n.prim](e,this.val);throw new K1}Execute(e,r){if(r&&r[$n.prim])return r[$n.prim](e,this.val);const n=this.createToken(rS,this.idx),i=this.valueToken,s=this.createToken(nS,this.idx);return e.args[2]===void 0&&e.args[1].args!==void 0?{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1].args[0],r),amount:s.Execute(e.args[1].args[1],r)}:{ticketer:n.Execute(e.args[0],r),value:i.Execute(e.args[1],r),amount:s.Execute(e.args[2],r)}}ExtractSchema(){return{ticketer:Nr.prim,value:this.valueToken.ExtractSchema(),amount:gr.prim}}generateSchema(){return{__michelsonType:$n.prim,schema:{value:this.valueToken.generateSchema(),ticketer:{__michelsonType:Nr.prim,schema:Nr.prim},amount:{__michelsonType:gr.prim,schema:gr.prim}}}}findAndReturnTokens(e,r){return $n.prim===e&&r.push(this),this.valueToken.findAndReturnTokens(e,r),r}}$n.prim="ticket_deprecated";class ud extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="NeverTokenError"}}class Ai extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Encode(e){const r=e.pop();throw new ud(r,this,"Assigning a value to the type never is forbidden.")}EncodeObject(e,r){if(r&&r[Ai.prim])return r[Ai.prim](e);throw new ud(e,this,"Assigning a value to the type never is forbidden.")}Execute(e){throw new ud(e,this,"There is no literal value for the type never.")}ExtractSchema(){return Ai.prim}generateSchema(){return{__michelsonType:Ai.prim,schema:Ai.prim}}findAndReturnTokens(e,r){return Ai.prim===e&&r.push(this),r}}Ai.prim="never";class ld extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingStateValidationError"}}class jn extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return typeof e=="object"&&Object.keys(e).length===0}Execute(e,r){if(r&&r[jn.prim])return r[jn.prim](e,this.val);if("int"in e)return e.int;throw new ld(e,this,`Sapling state is expecting an object with an int property. Got ${JSON.stringify(e)}`)}Encode(e){const r=e.pop();if(this.isValid(r))return[];throw new ld(r,this,`Invalid sapling_state. Received: ${r} while expecting: {}`)}EncodeObject(e,r){if(r&&r[jn.prim])return r[jn.prim](e);if(this.isValid(e))return[];throw new ld(e,this,`Invalid sapling_state. Received: ${e} while expecting: {}`)}ExtractSchema(){return{[jn.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:jn.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return jn.prim===e&&r.push(this),r}}jn.prim="sapling_state";class H1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionValidationError"}}class ss extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new H1(e,this,"There is no literal value for the sapling_transaction type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new H1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[ss.prim]?r[ss.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[ss.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:ss.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return ss.prim===e&&r.push(this),r}}ss.prim="sapling_transaction";class F1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="SaplingTransactionDeprecatedValidationError"}}class os extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e){throw new F1(e,this,"There is no literal value for the sapling_transaction_deprecated type.")}validateBytes(e){const r=/^(0x|0X)?([0-9a-fA-F]*$)/.exec(e);if(r&&r[2].length%2===0)return r[2];throw new F1(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();return r=this.validateBytes(this.convertUint8ArrayToHexString(r)),{bytes:String(r).toString()}}EncodeObject(e,r){return e=this.validateBytes(this.convertUint8ArrayToHexString(e)),r&&r[os.prim]?r[os.prim](e):{bytes:String(e).toString()}}ExtractSchema(){return{[os.prim]:{"memo-size":Number(this.val.args[0].int)}}}generateSchema(){return{__michelsonType:os.prim,schema:{memoSize:this.val.args[0].int}}}findAndReturnTokens(e,r){return os.prim===e&&r.push(this),r}}os.prim="sapling_transaction_deprecated";class iS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381frValidationError"}}class xi extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new iS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();if(typeof r=="number")return{int:r.toString()};{r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}}EncodeObject(e,r){if(r&&r[xi.prim])return r[xi.prim](e);if(typeof e=="number")return{int:e.toString()};{e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return{bytes:e}}}Execute(e){return e.bytes}ExtractSchema(){return xi.prim}generateSchema(){return{__michelsonType:xi.prim,schema:xi.prim}}findAndReturnTokens(e,r){return xi.prim===e&&r.push(this),r}}xi.prim="bls12_381_fr";class sS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g1ValidationError"}}class Si extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new sS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Si.prim]?r[Si.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Si.prim}generateSchema(){return{__michelsonType:Si.prim,schema:Si.prim}}findAndReturnTokens(e,r){return Si.prim===e&&r.push(this),r}}Si.prim="bls12_381_g1";class oS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="Bls12381g2ValidationError"}}class Ri extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new oS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ri.prim]?r[Ri.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ri.prim}generateSchema(){return{__michelsonType:Ri.prim,schema:Ri.prim}}findAndReturnTokens(e,r){return Ri.prim===e&&r.push(this),r}}Ri.prim="bls12_381_g2";class aS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestValidationError"}}class Ii extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new aS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Ii.prim]?r[Ii.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Ii.prim}generateSchema(){return{__michelsonType:Ii.prim,schema:Ii.prim}}findAndReturnTokens(e,r){return Ii.prim===e&&r.push(this),r}}Ii.prim="chest";class cS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="ChestKeyValidationError"}}class Oi extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}isValid(e){return/^[0-9a-fA-F]*$/.test(e)&&e.length%2===0?null:new cS(e,this,`Invalid bytes: ${e}`)}convertUint8ArrayToHexString(e){return e.constructor===Uint8Array?Buffer.from(e).toString("hex"):e}Encode(e){let r=e.pop();r=this.convertUint8ArrayToHexString(r);const n=this.isValid(r);if(n)throw n;return{bytes:r}}EncodeObject(e,r){e=this.convertUint8ArrayToHexString(e);const n=this.isValid(e);if(n)throw n;return r&&r[Oi.prim]?r[Oi.prim](e):{bytes:e}}Execute(e){return e.bytes}ExtractSchema(){return Oi.prim}generateSchema(){return{__michelsonType:Oi.prim,schema:Oi.prim}}findAndReturnTokens(e,r){return Oi.prim===e&&r.push(this),r}}Oi.prim="chest_key";class j1 extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantEncodingError"}}class fS extends dt{constructor(e,r,n){super(e,r,n),this.value=e,this.token=r,this.name="GlobalConstantDecodingError"}}class Gn extends Kt{constructor(e,r,n){super(e,r,n),this.val=e,this.idx=r,this.fac=n}Execute(e,r){if(r&&r[Gn.prim])return r[Gn.prim](e,this.val);throw new fS(e,this,`Unable to decode a value represented by a {} constants. Please provide an expanded script to the Michelson-Encoder or semantics for the decoding. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}Encode(e){throw new j1(e,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}EncodeObject(e,r){if(r&&r[Gn.prim])return r[Gn.prim](e);throw new j1(e,this,`Unable to encode a script containing {} constants. Please provide an expanded script to the Michelson-Encoder. The following {} constant hash was encountered: ${this.val.args[0].string}.`)}ExtractSchema(){return Gn.prim}generateSchema(){return{__michelsonType:Gn.prim,schema:{hash:this.val.args[0].string}}}findAndReturnTokens(e,r){return Gn.prim===e&&r.push(this),r}}Gn.prim="constant";const uS=[Ut,Nn,Mn,Fr,Ei,_i,ds,Ln,rt,Nr,rs,Cn,Bn,jo,kn,gr,Dn,Un,Kn,Hn,ns,wi,is,Fn,qn,$n,Ai,jn,ss,os,xi,Si,Ri,Ii,Oi,Gn];class lS extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="Invalid token error"}}function Ws(t,e){if(Array.isArray(t))return new Ut(t,e,Ws);const r=uS.find(n=>n.prim===t.prim);if(!r)throw new lS("Malformed data expected a value with a valid prim property",t);return new r(t,e,Ws)}class dS extends Error{constructor(e,r){super(`Unable to encode the parameter of the view: ${e}.`),this.smartContractViewName=e,this.originalError=r,this.name="ViewEncodingError"}}class G1 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidScriptError"}}class Km extends Error{constructor(e){super("Invalid RPC response passed as argument(s)"),this.script=e,this.name="InvalidRpcResponseError"}}class V1 extends Error{constructor(e,r,n){super(`
      ${e}. Error encountered when trying to encode arguments: 

      [${r}]
    `),this.message=e,this.args=r,this.originalError=n,this.name="ParameterEncodingError"}}class Fc extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapSchema"}}class hS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBigMapDiff"}}class pS extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="BigMapEncodingError"}}class gS extends Error{constructor(e,r){super(`Unable to encode ${e}. ${r}`),this.obj=e,this.details=r,this.name="StorageEncodingError"}}class bS extends Error{constructor(e){super(e),this.message=e,this.name="MissingArgumentError"}}var Hm;const Fm=Symbol.for("taquito-schema-type-symbol");function rc(t,e=Ut.prim){var r,n;if(Array.isArray(t))return rc({prim:e,args:t},e);const i=t;return i.prim===e&&i.args&&i.args.length>2?Object.assign(Object.assign({},i),{args:[(r=i.args)===null||r===void 0?void 0:r[0],{prim:e,args:(n=i.args)===null||n===void 0?void 0:n.slice(1)}]}):i}function jm(t,e){const r=rc(t),n=rc(e);return r.prim===n.prim&&(r.args===void 0&&n.args===void 0||r.args!==void 0&&n.args!==void 0&&r.args.length===n.args.length&&r.args.every((i,s)=>{var o,a;return jm(i,(a=(o=n.args)===null||o===void 0?void 0:o[s])!==null&&a!==void 0?a:{})}))&&(r.annots===void 0&&n.annots===void 0||r.annots!==void 0&&n.annots!==void 0&&r.annots.length===n.annots.length&&r.annots.every((i,s)=>{var o;return i===((o=n.annots)===null||o===void 0?void 0:o[s])}))}class Gr{constructor(e){if(this.val=e,this[Hm]=!0,this.root=Ws(e,0),this.root instanceof Fr)this.bigMap=this.root;else if(this.isExpressionExtended(e)&&e.prim==="pair"){const r=e.args[0];this.isExpressionExtended(r)&&r.prim==="big_map"&&(this.bigMap=new Fr(r,0,Ws))}}static isSchema(e){return e&&e[Fm]===!0}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>{if(Array.isArray(n))this.fromRPCResponse({script:{code:n,storage:e.script.storage}});else{const i=n;return i.prim?i.prim==="storage":!1}});if(!r||!Array.isArray(r.args))throw new Km(e.script);return new Gr(r.args[0])}isExpressionExtended(e){return"prim"in e&&Array.isArray(e.args)}removeTopLevelAnnotation(e){return(this.root instanceof Ut||this.root instanceof rt)&&this.root.hasAnnotations()&&typeof e=="object"&&Object.keys(e).length===1?e[Object.keys(e)[0]]:e}Execute(e,r){const n=this.root.Execute(e,r);return this.removeTopLevelAnnotation(n)}Typecheck(e){if(this.root instanceof Fr&&Number.isInteger(Number(e))||this.root instanceof qn&&e.ticketer&&e.value&&e.amount||this.root instanceof $n&&e.ticketer&&e.value&&e.amount||this.root instanceof ds&&this.root.ValueSchema instanceof Fr)return!0;try{return this.root.EncodeObject(e),!0}catch{return!1}}ExecuteOnBigMapDiff(e,r){if(!this.bigMap)throw new Fc("Big map schema is undefined");if(!Array.isArray(e))throw new hS("Big map diff must be an array");const n=e.map(({key:i,value:s})=>({args:[i,s]}));return this.bigMap.Execute(n,r)}ExecuteOnBigMapValue(e,r){if(!this.bigMap)throw new Fc("No big map schema");return this.bigMap.ValueSchema.Execute(e,r)}EncodeBigMapKey(e){if(!this.bigMap)throw new Fc("Big map schema is undefined");try{return this.bigMap.KeySchema.ToBigMapKey(e)}catch(r){throw new pS("big map key",r)}}Encode(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new gS("storage object",n)}}ExtractSchema(){return this.removeTopLevelAnnotation(this.root.ExtractSchema())}generateSchema(){return this.removeTopLevelAnnotation(this.root.generateSchema())}ComputeState(e,r){if(!this.bigMap)throw new Fc("Big map schema is undefined");const n=e.reduce((i,s)=>Object.assign(Object.assign({},i),this.ExecuteOnBigMapDiff(s.contents[0].metadata.operation_result.big_map_diff)),{});return Object.assign(Object.assign({},this.Execute(r)),{[this.bigMap.annot()]:n})}FindFirstInTopLevelPair(e,r){return this.findValue(this.root.val,e,r)}findValue(e,r,n){if(jm(n,e))return r;if(Array.isArray(e)||e.prim==="pair"){const i=rc(e),s=rc(r,"Pair");if(i.args===void 0||s.args===void 0)throw new bS("Tokens have no arguments");if(i.args[0])return this.findValue(i.args[0],s.args[0],n)||this.findValue(i.args[1],s.args[1],n)}}findToken(e){const r=[];return this.root.findAndReturnTokens(e,r)}}Hm=Fm;class _o{constructor(e){this.root=Ws(e,0)}static fromRPCResponse(e){const r=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.find(n=>n.prim==="parameter");if(!r||!Array.isArray(r.args))throw new Km(e.script);return new _o(r.args[0])}get isMultipleEntryPoint(){return this.root instanceof rt||this.root instanceof jo&&this.root.subToken()instanceof rt}get hasAnnotation(){return this.isMultipleEntryPoint?Object.keys(this.ExtractSchema())[0]!=="0":!0}Execute(e,r){return this.root.Execute(e,r)}Encode(...e){try{return this.root.Encode(e.reverse())}catch(r){throw r instanceof dt?r:new V1("Unable to encode parameter",e.toString(),r)}}EncodeObject(e,r){try{return this.root.EncodeObject(e,r)}catch(n){throw n instanceof dt?n:new V1("Unable to encode parameter object",e,n)}}ExtractSchema(){return this.root.ExtractSchema()}generateSchema(){return this.root.generateSchema()}ExtractSignatures(){return this.root.ExtractSignature()}}class p0{constructor(e){if(e.length!==4||!("string"in e[0]))throw new G1(`Invalid on-chain view: ${JSON.stringify(e)}`);this.viewName=e[0].string,this.viewArgsType=e[1],this.viewReturnType=e[2],this.instructions=e[3],this.rootArgsType=Ws(this.viewArgsType,0),this.rootReturnType=Ws(this.viewReturnType,0)}static fromRPCResponse(e){const r=[],n=e&&e.script&&Array.isArray(e.script.code)&&e.script.code.filter(i=>i.prim==="view");return n&&n.forEach(i=>{if(!i.args||i.args.length!==4)throw new G1(`Invalid on-chain view found in the script: ${JSON.stringify(i)}`);r.push(new p0(i.args))}),r}encodeViewArgs(e){try{return this.rootArgsType.EncodeObject(e)}catch(r){throw new dS(this.viewName,r)}}decodeViewResult(e,r){return this.rootReturnType.Execute(e,r)}extractArgsSchema(){return this.rootArgsType.ExtractSchema()}extractResultSchema(){return this.rootReturnType.ExtractSchema()}}const q1=Symbol(),Ar=Symbol("source_reference");class Ds extends Error{constructor(e,r,n){super(n),this.src=e,this.idx=r,Object.setPrototypeOf(this,Ds.prototype)}}var Sr;(function(t){t[t.Comment=0]="Comment",t[t.Number=1]="Number",t[t.String=2]="String",t[t.Bytes=3]="Bytes",t[t.Ident=4]="Ident"})(Sr||(Sr={}));const vS=new RegExp("\\s"),mS=new RegExp("[:@%_A-Za-z]"),yS=new RegExp("[@%_\\.A-Za-z0-9]"),$1=new RegExp("[0-9]"),ES=new RegExp("[0-9a-fA-F]");function*dd(t,e=!1){let r=0;for(;r<t.length;){for(;r<t.length&&vS.test(t[r]);)r++;if(r===t.length)return;const n=t[r],i=r;if(mS.test(n)){for(r++;r<t.length&&yS.test(t[r]);)r++;yield{t:Sr.Ident,v:t.slice(i,r),first:i,last:r}}else if(t.length-r>1&&t.substr(r,2)==="0x"){for(r+=2;r<t.length&&ES.test(t[r]);)r++;if(r-i&1)throw new Ds(t,r,"Bytes literal length is expected to be power of two");yield{t:Sr.Bytes,v:t.slice(i,r),first:i,last:r}}else if($1.test(n)||n==="-"){n==="-"&&r++;const s=r;for(;r<t.length&&$1.test(t[r]);)r++;if(s===r)throw new Ds(t,r,"Number literal is too short");yield{t:Sr.Number,v:t.slice(i,r),first:i,last:r}}else if(n==='"'){r++;let s=!1;for(;r<t.length&&(s||t[r]!=='"');r++)!s&&t[r]==="\\"?s=!0:s=!1;if(r===t.length)throw new Ds(t,r,"Unterminated string literal");r++,yield{t:Sr.String,v:t.slice(i,r),first:i,last:r}}else if(n==="#"){for(r++;r<t.length&&t[r]!==`
`;)r++;e&&(yield{t:Sr.Comment,v:t.slice(i,r),first:i,last:r})}else if(t.length-r>1&&t.substr(r,2)==="/*"){for(r+=2;r<t.length&&!(t.length-r>1&&t.substr(r,2)==="*/");)r++;if(r===t.length)throw new Ds(t,r,"Unterminated C style comment");r+=2,e&&(yield{t:Sr.Comment,v:t.slice(i,r),first:i,last:r})}else if(n==="("||n===")"||n==="{"||n==="}"||n===";")r++,yield{t:n,v:n,first:i,last:r};else throw new Ds(t,r,`Invalid character at offset ${r}: \`${n}'`)}}const jc=Symbol("ref_contract");var Ci;(function(t){t.Ps9mPmXa="Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P",t.PtCJ7pwo="PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY",t.PsYLVpVv="PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt",t.PsddFKi3="PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP",t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdoTez="PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLoren="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANAD="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangzH="PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakarta="PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Ci||(Ci={}));const Gm=Ci.Psithaca2,z1={Ps9mPmXaRzmzk35gbAYNCAw6UXdE2qoABTHbN2oEEc1qM7CwT9P:0,PtCJ7pwoxe8JasnHY8YonnLYjcVHmhiARPJvqcC6VfHT5s8k8sY:1,PsYLVpVvgbLhAhoqAkMFUo6gudkJ9weNXhUYCiLDzcUpFpkk8Wt:2,PsddFKi32cMJ2qPjf43Qv5GDWLDPZb3T3bF6fLKiF5HtvHNU7aP:3,Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd:4,PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU:5,PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS:5,PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb:6,PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo:7,PtEdoTezd3RHSC31mpxxo1npxFjoWWcFgQtxapi51Z8TLu6v6Uq:8,PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA:8,PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i:9,PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV:10,PtHangzHogokSuiMHemCuowEavgYTP8J5qQ9fQS793MHYFpCY3r:11,PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx:11,PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP:12,Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A:12,PtJakartaiDz69SfDDLXJSiuZqTSeSKRDbKVZC8MNzJnvRjvnGw:13,PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY:13,PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg:14,PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW:15,PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc:16,PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1:16,ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK:17};function wo(t,e){return z1[t]<z1[e]}class Vr extends Error{constructor(e,r){super(r),this.prim=e,Object.setPrototypeOf(this,Vr.prototype)}}function yt(t,e){var r,n;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new Vr(t,`macro ${t.prim} expects ${e} arguments, was given ${(n=t.args)===null||n===void 0?void 0:n.length}`)}function Ra(t){if(t.annots===void 0)return!0;throw new Vr(t,`unexpected annotation on macro ${t.prim}: ${t.annots}`)}function W1(t,e){if("int"in e)return!0;throw new Vr(t,`macro ${t.prim} expects int argument`)}function Ha(t,e,r,n){let i=0,s=0;const o=[null,null];let a;if(i===e.length)throw new Vr(t,`unexpected end: ${t.prim}`);let c=e[i++];switch(c){case"P":{const{r:f,n:d,an:I}=Ha(t,e.slice(i),r.slice(s),n);a=f,i+=d,s+=I;break}case"A":s!==r.length&&(o[0]=r[s++]);break;default:throw new Vr(t,`${t.prim}: unexpected character: ${c}`)}let l;if(i===e.length)throw new Vr(t,`unexpected end: ${t.prim}`);switch(c=e[i++],c){case"P":{const{r:f,n:d,an:I}=Ha(t,e.slice(i),r.slice(s),n);l=f.map(([P,L])=>[P+1,L]),i+=d,s+=I;break}case"I":s!==r.length&&(o[1]=r[s++]);break;default:throw new Vr(t,`${t.prim}: unexpected character: ${c}`)}return{r:n(a,l,[0,o]),n:i,an:s}}function Kf(t,e,r,n){const i=e[0];switch(i){case"A":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CAR",annots:["@%%"]},Kf(t,e.slice(1),[],n)]]},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%@","%@",...r]}]:n.a;case"D":return e.length>1?[{prim:"DUP"},{prim:"DIP",args:[[{prim:"CDR",annots:["@%%"]},Kf(t,e.slice(1),[],n)]]},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%@",...r]}]:n.d;default:throw new Vr(t,`${t.prim}: unexpected character: ${i}`)}}function _S(t,e){let r=t.length;for(;r>0&&t[r-1]===e;)r--;return t.slice(0,r)}function hd(t){const e=[],r=[];if(t!==void 0)for(const n of t)(n.length!==0&&n[0]==="%"?e:r).push(n);return{fields:e,rest:r}}function zt({prim:t,annots:e,args:r}){return Object.assign(Object.assign({prim:t},e&&{annots:e}),r&&{args:r})}const wS=/^P[PAI]{3,}R$/,AS=/^UNP[PAI]{2,}R$/,xS=/^C[AD]{2,}R$/,SS=/^SET_C[AD]+R$/,RS=/^MAP_C[AD]+R$/,IS=/^DI{2,}P$/,OS=/^DU+P$/;function TS(t,e){const r=e?.protocol||Gm;function n(i){return i!==void 0?[{prim:"RENAME",annots:i}]:[]}switch(t.prim){case"CMPEQ":case"CMPNEQ":case"CMPLT":case"CMPGT":case"CMPLE":case"CMPGE":if(yt(t,0))return[{prim:"COMPARE"},zt({prim:t.prim.slice(3),annots:t.annots})];break;case"IFEQ":case"IFNEQ":case"IFLT":case"IFGT":case"IFLE":case"IFGE":if(yt(t,2))return[{prim:t.prim.slice(2)},zt({prim:"IF",annots:t.annots,args:t.args})];break;case"IFCMPEQ":case"IFCMPNEQ":case"IFCMPLT":case"IFCMPGT":case"IFCMPLE":case"IFCMPGE":if(yt(t,2))return[{prim:"COMPARE"},{prim:t.prim.slice(5)},zt({prim:"IF",annots:t.annots,args:t.args})];break;case"FAIL":if(yt(t,0)&&Ra(t))return[{prim:"UNIT"},{prim:"FAILWITH"}];break;case"ASSERT":if(yt(t,0)&&Ra(t))return[{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_EQ":case"ASSERT_NEQ":case"ASSERT_LT":case"ASSERT_GT":case"ASSERT_LE":case"ASSERT_GE":if(yt(t,0)&&Ra(t))return[{prim:t.prim.slice(7)},{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_CMPEQ":case"ASSERT_CMPNEQ":case"ASSERT_CMPLT":case"ASSERT_CMPGT":case"ASSERT_CMPLE":case"ASSERT_CMPGE":if(yt(t,0)&&Ra(t))return[[{prim:"COMPARE"},{prim:t.prim.slice(10)}],{prim:"IF",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_NONE":if(yt(t,0)&&Ra(t))return[{prim:"IF_NONE",args:[[],[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_SOME":if(yt(t,0))return[{prim:"IF_NONE",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"ASSERT_LEFT":if(yt(t,0))return[{prim:"IF_LEFT",args:[n(t.annots),[[{prim:"UNIT"},{prim:"FAILWITH"}]]]}];break;case"ASSERT_RIGHT":if(yt(t,0))return[{prim:"IF_LEFT",args:[[[{prim:"UNIT"},{prim:"FAILWITH"}]],n(t.annots)]}];break;case"IF_SOME":if(yt(t,2))return[zt({prim:"IF_NONE",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"IF_RIGHT":if(yt(t,2))return[zt({prim:"IF_LEFT",annots:t.annots,args:[t.args[1],t.args[0]]})];break;case"CAR":case"CDR":if(t.args!==void 0){if(yt(t,1)&&W1(t,t.args[0])){const i=parseInt(t.args[0].int,10);return zt({prim:"GET",args:[{int:t.prim==="CAR"?String(i*2+1):String(i*2)}],annots:t.annots})}}else return t}if(wS.test(t.prim)&&yt(t,0)){const{fields:i,rest:s}=hd(t.annots),{r:o}=Ha(t,t.prim.slice(1),i,(a,c,l)=>[...a||[],...c||[],l]);return o.map(([a,c],l)=>{const f=[..._S(c,null).map(I=>I===null?"%":I),...a===0&&l===o.length-1?s:[]],d=zt({prim:"PAIR",annots:f.length!==0?f:void 0});return a===0?d:{prim:"DIP",args:a===1?[[d]]:[{int:String(a)},[d]]}})}if(AS.test(t.prim))if(wo(r,Ci.PtEdo2Zk)&&yt(t,0)){const{r:i}=Ha(t,t.prim.slice(3),t.annots||[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s,o])=>{const a=[{prim:"DUP"},zt({prim:"CAR",annots:o[0]!==null?[o[0]]:void 0}),{prim:"DIP",args:[[zt({prim:"CDR",annots:o[1]!==null?[o[1]]:void 0})]]}];return s===0?a:{prim:"DIP",args:s===1?[[a]]:[{int:String(s)},[a]]}})}else{if(t.prim==="UNPAIR")return t;if(yt(t,0)){const{r:i}=Ha(t,t.prim.slice(3),[],(s,o,a)=>[a,...o||[],...s||[]]);return i.map(([s])=>{const o=zt({prim:"UNPAIR"});return s===0?o:{prim:"DIP",args:s===1?[[o]]:[{int:String(s)},[o]]}})}}if(xS.test(t.prim)&&yt(t,0)){const i=[...t.prim.slice(1,t.prim.length-1)];return i.map((s,o)=>{const a=o===i.length-1?t.annots:void 0;switch(s){case"A":return zt({prim:"CAR",annots:a});case"D":return zt({prim:"CDR",annots:a});default:throw new Vr(t,`unexpected character: ${s}`)}})}if(SS.test(t.prim)&&yt(t,0)){const{fields:i,rest:s}=hd(t.annots);if(i.length>1)throw new Vr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const o=i.length!==0?{a:[{prim:"DUP"},{prim:"CAR",annots:i},{prim:"DROP"},{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:[i[0],"%@"]}],d:[{prim:"DUP"},{prim:"CDR",annots:i},{prim:"DROP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i[0]]}]}:{a:[{prim:"CDR",annots:["@%%"]},{prim:"SWAP"},{prim:"PAIR",annots:["%","%@"]}],d:[{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@","%"]}]};return Kf(t,t.prim.slice(5,t.prim.length-1),s,o)}if(RS.test(t.prim)&&yt(t,1)){const{fields:i}=hd(t.annots);if(i.length>1)throw new Vr(t,`unexpected annotation on macro ${t.prim}: ${i}`);const s={a:[{prim:"DUP"},{prim:"CDR",annots:["@%%"]},{prim:"DIP",args:[[zt({prim:"CAR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0]]]},{prim:"SWAP"},{prim:"PAIR",annots:[i.length!==0?i[0]:"%","%@"]}],d:[{prim:"DUP"},zt({prim:"CDR",annots:i.length!==0?["@"+i[0].slice(1)]:void 0}),t.args[0],{prim:"SWAP"},{prim:"CAR",annots:["@%%"]},{prim:"PAIR",annots:["%@",i.length!==0?i[0]:"%"]}]};return Kf(t,t.prim.slice(5,t.prim.length-1),[],s)}if(IS.test(t.prim)&&yt(t,1)){let i=0;for(;t.prim[1+i]==="I";)i++;return zt({prim:"DIP",args:[{int:String(i)},t.args[0]]})}if(OS.test(t.prim)){let i=0;for(;t.prim[1+i]==="U";)i++;if(wo(r,Ci.PtEdo2Zk)){if(i===1){if(t.args===void 0)return t;yt(t,1)&&W1(t,t.args[0])&&(i=parseInt(t.args[0].int,10))}else yt(t,0);return i===1?[zt({prim:"DUP",annots:t.annots})]:i===2?[{prim:"DIP",args:[[zt({prim:"DUP",annots:t.annots})]]},{prim:"SWAP"}]:[{prim:"DIP",args:[{int:String(i-1)},[zt({prim:"DUP",annots:t.annots})]]},{prim:"DIG",args:[{int:String(i)}]}]}else{if(i===1)return t;if(yt(t,0))return zt({prim:"DUP",args:[{int:String(i)}],annots:t.annots})}}return t}function PS(t,e){return t.args!==void 0&&t.args.length===1&&"string"in t.args[0]&&t.args[0].string in e?e[t.args[0].string]:t}class No extends Error{constructor(e,r){super(r),this.token=e,Object.setPrototypeOf(this,No.prototype)}}class Tn extends Error{constructor(e,r){super(r),this.node=e,Object.setPrototypeOf(this,Tn.prototype)}}const pd=new No(null,"Unexpected EOF");function X1(t){return t.t===Sr.Ident&&(t.v[0]==="@"||t.v[0]==="%"||t.v[0]===":")}const NS=new RegExp("^-?[0-9]+$"),MS=new RegExp("^([0-9a-fA-F]{2})*$");class Ks{constructor(e){this.opt=e}expand(e){var r,n,i;if(((r=this.opt)===null||r===void 0?void 0:r.expandGlobalConstant)!==void 0&&e.prim==="constant"){const s=PS(e,this.opt.expandGlobalConstant);return s!==e&&(s[Ar]=Object.assign(Object.assign({},e[Ar]||{first:0,last:0}),{globalConstant:e})),s}if(((n=this.opt)===null||n===void 0?void 0:n.expandMacros)===void 0||!((i=this.opt)===null||i===void 0)&&i.expandMacros){const s=TS(e,this.opt);return s!==e&&(s[Ar]=Object.assign(Object.assign({},e[Ar]||{first:0,last:0}),{macro:e})),s}else return e}parseListExpr(e,r){var n;const i={first:r.first,last:r.last},s=r.t==="(";let o;if(s){if(o=e.next(),o.done)throw pd;i.last=o.value.last}else o={value:r};if(o.value.t!==Sr.Ident)throw new No(o.value,`not an identifier: ${o.value.v}`);const a={prim:o.value.v,[Ar]:i};for(;;){const c=e.next();if(c.done){if(s)throw pd;break}else if(c.value.t===")"){if(!s)throw new No(c.value,"unexpected closing bracket");i.last=c.value.last;break}else if(X1(c.value))a.annots=a.annots||[],a.annots.push(c.value.v),i.last=c.value.last;else{a.args=a.args||[];const l=this.parseExpr(e,c.value);i.last=((n=l[Ar])===null||n===void 0?void 0:n.last)||i.last,a.args.push(l)}}return this.expand(a)}parseArgs(e,r){var n;const i={first:r.first,last:r.last},s={prim:r.v,[Ar]:i};for(;;){const o=e.next();if(o.done||o.value.t==="}"||o.value.t===";")return[s,o];if(X1(o.value))i.last=o.value.last,s.annots=s.annots||[],s.annots.push(o.value.v);else{const a=this.parseExpr(e,o.value);i.last=((n=a[Ar])===null||n===void 0?void 0:n.last)||i.last,s.args=s.args||[],s.args.push(a)}}}parseSequenceExpr(e,r){var n,i;const s={first:r.first,last:r.last},o=[];o[Ar]=s;const a=r.t==="{";let c=r.t==="{"?null:{value:r};for(;;){if(c===null&&(c=e.next(),c.done||(s.last=c.value.last)),c.done){if(a)throw pd;return o}if(c.value.t==="}"){if(a)return o;throw new No(c.value,"unexpected closing bracket")}else if(c.value.t===Sr.Ident){const[l,f]=this.parseArgs(e,c.value);s.last=((n=l[Ar])===null||n===void 0?void 0:n.last)||s.last,o.push(this.expand(l)),c=f}else{const l=this.parseExpr(e,c.value);s.last=((i=l[Ar])===null||i===void 0?void 0:i.last)||s.last,o.push(l),c=null}c===null&&(c=e.next(),c.done||(s.last=c.value.last)),!c.done&&c.value.t===";"&&(c=null)}}parseExpr(e,r){switch(r.t){case Sr.Ident:return this.expand({prim:r.v,[Ar]:{first:r.first,last:r.last}});case Sr.Number:return{int:r.v,[Ar]:{first:r.first,last:r.last}};case Sr.String:return{string:JSON.parse(r.v),[Ar]:{first:r.first,last:r.last}};case Sr.Bytes:return{bytes:r.v.slice(2),[Ar]:{first:r.first,last:r.last}};case"{":return this.parseSequenceExpr(e,r);default:return this.parseListExpr(e,r)}}parseSequence(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=dd(e),n=r.next();return n.done?null:this.parseSequenceExpr(r,n.value)}parseList(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=dd(e),n=r.next();return n.done?null:this.parseListExpr(r,n.value)}parseMichelineExpression(e){if(typeof e!="string")throw new TypeError(`string type was expected, got ${typeof e} instead`);const r=dd(e),n=r.next();return n.done?null:this.parseExpr(r,n.value)}parseScript(e){return this.parseSequence(e)}parseData(e){return this.parseList(e)}parseJSON(e){if(typeof e!="object")throw new TypeError(`object type was expected, got ${typeof e} instead`);if(Array.isArray(e)){const r=[];for(const n of e){if(n===null||typeof n!="object")throw new Tn(n,`unexpected sequence element: ${n}`);r.push(this.parseJSON(n))}return r}else if("prim"in e){const r=e;if(typeof r.prim=="string"&&(r.annots===void 0||Array.isArray(r.annots))&&(r.args===void 0||Array.isArray(r.args))){const n={prim:r.prim};if(r.annots!==void 0){for(const i of r.annots)if(typeof i!="string")throw new Tn(i,`string expected: ${i}`);n.annots=r.annots}if(r.args!==void 0){n.args=[];for(const i of r.args){if(i===null||typeof i!="object")throw new Tn(i,`unexpected argument: ${i}`);n.args.push(this.parseJSON(i))}}return this.expand(n)}throw new Tn(e,`malformed prim expression: ${e}`)}else if("string"in e){if(typeof e.string=="string")return{string:e.string};throw new Tn(e,`malformed string literal: ${e}`)}else if("int"in e){if(typeof e.int=="string"&&NS.test(e.int))return{int:e.int};throw new Tn(e,`malformed int literal: ${e}`)}else if("bytes"in e){if(typeof e.bytes=="string"&&MS.test(e.bytes))return{bytes:e.bytes};throw new Tn(e,`malformed bytes literal: ${e}`)}else throw new Tn(e,`unexpected object: ${e}`)}}const LS=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],CS=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];class hh extends Error{constructor(e){super(e),this.message=e,this.name="Base58DecodingError"}}class BS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidMessageError"}}function J1(t){const e=(t.length+9)%64,r=e===0?0:64-e;if(t.length>268435455)throw new BS(`SHA-256 -- message length is too big: ${t.length}`);const n=t.length<<3,i=[...t,128,...new Array(r).fill(0),0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255];function s(f,d){return f>>>d|f<<32-d}const o=[...LS],a=new Array(64),c=new Array(8);for(let f=0;f<i.length;f+=64){let d=f,I=0;for(;I<16;)a[I]=i[d]<<24|i[d+1]<<16|i[d+2]<<8|i[d+3],d+=4,I++;for(;I<64;){const P=s(a[I-15],7)^s(a[I-15],18)^a[I-15]>>>3,L=s(a[I-2],17)^s(a[I-2],19)^a[I-2]>>>10;a[I]=(L|0)+a[I-7]+P+a[I-16]|0,I++}for(let P=0;P<8;P++)c[P]=o[P];for(let P=0;P<64;P++){const L=s(c[0],2)^s(c[0],13)^s(c[0],22),H=s(c[4],6)^s(c[4],11)^s(c[4],25),G=c[7]+H+(c[4]&c[5]^~c[4]&c[6])+CS[P]+a[P]|0,V=L+(c[0]&c[1]^c[0]&c[2]^c[1]&c[2])|0;c[7]=c[6],c[6]=c[5],c[5]=c[4],c[4]=c[3]+G|0,c[3]=c[2],c[2]=c[1],c[1]=c[0],c[0]=G+V|0}for(let P=0;P<8;P++)o[P]=o[P]+c[P]|0}const l=[];for(const f of o)l.push(f>>24&255),l.push(f>>16&255),l.push(f>>8&255),l.push(f&255);return l}const gd=[0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57];function Y1(t,e){const r=t.charCodeAt(e)-49;if(r>=gd.length||gd[r]===-1)throw new hh(`Unexpected character at position ${e}: ${t[e]}`);return gd[r]}function kS(t){const e=[];let r=0;for(;r<t.length&&Y1(t,r)===0;)r++;let n=r;for(;r<t.length;){let i=Y1(t,r++),s=0;for(;i!==0||s<e.length;){const o=(e[s]||0)*58+i;e[s++]=o%256,i=Math.floor(o/256)}}for(;n-- >0;)e.push(0);return e.reverse()}function Vm(t){const e=kS(t);if(e.length<4)throw new hh(`Data is too short ${e.length}`);const r=e.slice(0,e.length-4),n=e.slice(e.length-4),i=J1(J1(r));if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==i[3])throw new hh("Invalid checksum");return r}class DS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidContractError"}}class US extends Error{constructor(e){super(e),this.message=e,this.name="InvalidTypeExpressionError"}}class KS extends Error{constructor(e){super(e),this.message=e,this.name="InvalidDataExpressionError"}}class HS extends Error{constructor(e){super(`Contract has no entrypoint named: '${e}'`),this.entrypoint=e,this.name="InvalidEntrypointError"}}class FS extends Error{constructor(e){super(e),this.message=e,this.name="LongIntegerError"}}class qr extends Error{constructor(e,r){super(r),this.val=e,Object.setPrototypeOf(this,qr.prototype)}}class nt extends qr{constructor(e,r,n){super(e,n),r!==void 0&&(this.data=r),Object.setPrototypeOf(this,nt.prototype)}}class qm{constructor(e){if(this.neg=!1,this.buf=[],e!==void 0)if(typeof e=="string")for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(r===0&&n===45)this.neg=!0;else{if(n<48||n>57)throw new FS(`unexpected character in integer constant: ${e[r]}`);this.append(n-48)}}else e<0?(this.neg=!0,this.append(-e)):this.append(e)}append(e){let r=0;for(;e!==0||r<this.buf.length;){const n=(this.buf[r]||0)*10+e;this.buf[r++]=n%256,e=Math.floor(n/256)}}cmp(e){if(this.neg!==e.neg)return(e.neg?1:0)-(this.neg?1:0);{let r=0;if(this.buf.length!==e.buf.length)r=this.buf.length<e.buf.length?-1:1;else if(this.buf.length!==0){let n=e.buf.length-1;for(;n>=0&&this.buf[n]===e.buf[n];)n--;r=n<0?0:this.buf[n]<e.buf[n]?-1:1}return this.neg?r===0?0:-r:r}}get sign(){return this.buf.length===0?0:this.neg?-1:1}}function Mo(t){const e=[];for(let r=0;r<t.length;r+=2){const n=parseInt(t.slice(r,r+2),16);if(Number.isNaN(n))return null;e.push(n)}return e}function ph(t){try{return new qm(t),!0}catch{return!1}}function $m(t){try{return new qm(t).sign>=0}catch{return!1}}const jS=/^(@%|@%%|%@|[@:%]([_0-9a-zA-Z][_0-9a-zA-Z.%@]*)?)$/;function Go(t,e){if(Array.isArray(t))return{};let r,n,i;if(t.annots!==void 0){for(const s of t.annots)if(s.length!==0){if(!jS.test(s)||!e?.specialVar&&(s==="@%"||s==="@%%")||!e?.specialFields&&s==="%@")throw new qr(t,`${t.prim}: unexpected annotation: ${s}`);switch(s[0]){case"%":(e?.emptyFields||s.length>1)&&(r=r||[],r.push(s));break;case":":s.length>1&&(n=n||[],n.push(s));break;case"@":(e?.emptyVar||s.length>1)&&(i=i||[],i.push(s));break}}}return{f:r,t:n,v:i}}const GS={BlockHash:[32,[1,52]],OperationHash:[32,[5,116]],OperationListHash:[32,[133,233]],OperationListListHash:[32,[29,159,109]],ProtocolHash:[32,[2,170]],ContextHash:[32,[79,199]],ED25519PublicKeyHash:[20,[6,161,159]],SECP256K1PublicKeyHash:[20,[6,161,161]],P256PublicKeyHash:[20,[6,161,164]],ContractHash:[20,[2,90,121]],CryptoboxPublicKeyHash:[16,[153,103]],ED25519Seed:[32,[13,15,58,7]],ED25519PublicKey:[32,[13,15,37,217]],SECP256K1SecretKey:[32,[17,162,224,201]],P256SecretKey:[32,[16,81,238,189]],ED25519EncryptedSeed:[56,[7,90,60,179,41]],SECP256K1EncryptedSecretKey:[56,[9,237,241,174,150]],P256EncryptedSecretKey:[56,[9,48,57,115,171]],SECP256K1PublicKey:[33,[3,254,226,86]],P256PublicKey:[33,[3,178,139,127]],SECP256K1Scalar:[33,[38,248,136]],SECP256K1Element:[33,[5,92,0]],ED25519SecretKey:[64,[43,246,78,7]],ED25519Signature:[64,[9,245,205,134,18]],SECP256K1Signature:[64,[13,115,101,19,63]],P256Signature:[64,[54,240,44,52]],GenericSignature:[64,[4,130,43]],ChainID:[4,[87,82,0]],RollupAddress:[20,[1,128,120,31]],TxRollupL2Address:[20,[6,161,166]]};function Gc(t,...e){const r=Vm(t);for(const n of e){const[i,s]=GS[n];if(r.length===i+s.length){let o=0;for(;o<s.length&&r[o]===s[o];)o++;if(o===s.length)return[n,r.slice(s.length)]}}return null}function mn(t,e){const r=e,n=Array.isArray(r)?r:r.args;return n.length===2?t==="pair"?{prim:"pair",args:n}:{prim:"Pair",args:n}:Object.assign(Object.assign({},Array.isArray(r)?{prim:t}:r),{args:[n[0],{prim:t,args:n.slice(1)}]})}function as(t){return Array.isArray(t)||t.prim==="pair"}function VS(t){return Array.isArray(t)||"prim"in t&&t.prim==="Pair"}const qS=/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])[T ]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|[+-]([01][0-9]|2[0-3]):([0-5][0-9]))$/;function $S(t){if("string"in t){if($m(t.string))return new Date(parseInt(t.string,10));if(qS.test(t.string)){const e=new Date(t.string);if(!Number.isNaN(e.valueOf))return e}}else if(ph(t.int))return new Date(parseInt(t.int,10));return null}const zS=31,zm={ABS:!0,ADD:!0,ADDRESS:!0,AMOUNT:!0,AND:!0,APPLY:!0,BALANCE:!0,BLAKE2B:!0,CAR:!0,CDR:!0,CHAIN_ID:!0,CHECK_SIGNATURE:!0,COMPARE:!0,CONCAT:!0,CONS:!0,EDIV:!0,EQ:!0,EXEC:!0,FAILWITH:!0,GE:!0,GET_AND_UPDATE:!0,GT:!0,HASH_KEY:!0,IMPLICIT_ACCOUNT:!0,INT:!0,ISNAT:!0,JOIN_TICKETS:!0,KECCAK:!0,LE:!0,LEVEL:!0,LSL:!0,LSR:!0,LT:!0,MEM:!0,MUL:!0,NEG:!0,NEQ:!0,NEVER:!0,NOT:!0,NOW:!0,OR:!0,PACK:!0,PAIRING_CHECK:!0,READ_TICKET:!0,SAPLING_VERIFY_UPDATE:!0,SELF:!0,SELF_ADDRESS:!0,SENDER:!0,SET_DELEGATE:!0,SHA256:!0,SHA3:!0,SHA512:!0,SIZE:!0,SLICE:!0,SOME:!0,SOURCE:!0,SPLIT_TICKET:!0,SUB:!0,SWAP:!0,TICKET:!0,TICKET_DEPRECATED:!0,TOTAL_VOTING_POWER:!0,TRANSFER_TOKENS:!0,UNIT:!0,VOTING_POWER:!0,XOR:!0,RENAME:!0,OPEN_CHEST:!0,SUB_MUTEZ:!0,MIN_BLOCK_TIME:!0,BYTES:!0,NAT:!0},Wm=Object.assign({},zm,{CONTRACT:!0,CREATE_CONTRACT:!0,DIG:!0,DIP:!0,DROP:!0,DUG:!0,DUP:!0,EMIT:!0,EMPTY_BIG_MAP:!0,EMPTY_MAP:!0,EMPTY_SET:!0,GET:!0,IF:!0,IF_CONS:!0,IF_LEFT:!0,IF_NONE:!0,ITER:!0,LAMBDA:!0,LAMBDA_REC:!0,LEFT:!0,LOOP:!0,LOOP_LEFT:!0,MAP:!0,NIL:!0,NONE:!0,PAIR:!0,PUSH:!0,RIGHT:!0,SAPLING_EMPTY_STATE:!0,UNPACK:!0,UNPAIR:!0,UPDATE:!0,CAST:!0,VIEW:!0}),Xm={unit:!0,never:!0,bool:!0,int:!0,nat:!0,string:!0,chain_id:!0,bytes:!0,mutez:!0,key_hash:!0,key:!0,signature:!0,timestamp:!0,address:!0,tx_rollup_l2_address:!0},fa=Object.assign({},Xm,{or:!0,pair:!0,set:!0,big_map:!0,contract:!0,lambda:!0,list:!0,map:!0,operation:!0,option:!0,bls12_381_g1:!0,bls12_381_g2:!0,bls12_381_fr:!0,sapling_transaction:!0,sapling_transaction_deprecated:!0,sapling_state:!0,ticket:!0,chest_key:!0,chest:!0});class ut extends qr{constructor(e,r){super(e,r),this.val=e,Object.setPrototypeOf(this,ut.prototype)}}function ai(t){return"prim"in t}function WS(t){return Array.isArray(t)||"prim"in t}function Jm(t){if(ai(t))return!0;throw new ut(t,"prim expression expected")}function cs(t){if(Array.isArray(t))return!0;throw new ut(t,"sequence expression expected")}function pr(t){if(WS(t))return!0;throw new ut(t,"prim or sequence expression expected")}function bd(t){if(t.int[0]==="-")throw new ut(t,"natural number expected")}function bf(t){if("int"in t)return!0;throw new ut(t,"int literal expected")}function Ym(t){if("string"in t)return!0;throw new ut(t,"string literal expected")}function it(t,e){var r;if(e===0&&t.args===void 0||((r=t.args)===null||r===void 0?void 0:r.length)===e)return!0;throw new ut(t,`${e} arguments expected`)}function yn(t){var e,r;if(Array.isArray(t)){for(const n of t){if(!Array.isArray(n)&&!ai(n))throw new ut(t,"sequence or prim expected");yn(n)}return!0}if(Jm(t)){if(Object.prototype.hasOwnProperty.call(zm,t.prim))return it(t,0),!0;switch(t.prim){case"DROP":case"PAIR":case"UNPAIR":case"DUP":case"UPDATE":case"GET":t.args!==void 0&&it(t,1)&&bf(t.args[0])&&bd(t.args[0]);break;case"DIG":case"DUG":case"SAPLING_EMPTY_STATE":it(t,1)&&bf(t.args[0])&&bd(t.args[0]);break;case"NONE":case"LEFT":case"RIGHT":case"NIL":case"CAST":it(t,1)&&Ni(t.args[0]);break;case"UNPACK":it(t,1)&&g0(t.args[0]);break;case"CONTRACT":it(t,1)&&ju(t.args[0]);break;case"IF_NONE":case"IF_LEFT":case"IF_CONS":case"IF":it(t,2)&&(cs(t.args[0])&&yn(t.args[0]),cs(t.args[1])&&yn(t.args[1]));break;case"MAP":case"ITER":case"LOOP":case"LOOP_LEFT":it(t,1)&&yn(t.args[0]);break;case"CREATE_CONTRACT":it(t,1)&&Zm(t.args[0]);break;case"DIP":if(((e=t.args)===null||e===void 0?void 0:e.length)===2)bf(t.args[0])&&bd(t.args[0]),cs(t.args[1])&&yn(t.args[1]);else if(((r=t.args)===null||r===void 0?void 0:r.length)===1)cs(t.args[0])&&yn(t.args[0]);else throw new ut(t,"1 or 2 arguments expected");break;case"PUSH":it(t,2)&&(Vo(t.args[0]),Us(t.args[1]));break;case"EMPTY_SET":it(t,1)&&Bi(t.args[0]);break;case"EMPTY_MAP":it(t,2)&&(Bi(t.args[0]),Ni(t.args[1]));break;case"EMPTY_BIG_MAP":it(t,2)&&(Bi(t.args[0]),Gu(t.args[1]));break;case"LAMBDA_REC":case"LAMBDA":it(t,3)&&(Ni(t.args[0]),Ni(t.args[1]),cs(t.args[2])&&yn(t.args[2]));break;case"VIEW":it(t,2)&&(Ym(t.args[0])&&Qm(t.args[0]),Ni(t.args[1])&&Vo(t.args[1]));break;case"EMIT":t.args&&t.args.length>0?it(t,1):it(t,0);break;default:throw new ut(t,"instruction expected")}}return!0}function Bi(t){if(pr(t)){if(Array.isArray(t)||t.prim==="pair"||t.prim==="or"||t.prim==="option")io(t,e=>Bi(e));else if(!Object.prototype.hasOwnProperty.call(Xm,t.prim))throw new ut(t,`${t.prim}: type is not comparable`)}return!0}function g0(t){if(pr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(fa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket")throw new ut(t,`${t.prim}: type can't be used inside PACK/UNPACK instructions`);io(t,e=>g0(e))}return!0}function Vo(t){if(pr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(fa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state"||t.prim==="ticket"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be pushed`);io(t,e=>Vo(e))}return!0}function b0(t){if(pr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(fa,t.prim)||t.prim==="operation"||t.prim==="contract")throw new ut(t,`${t.prim}: type can't be used as part of a storage`);io(t,e=>b0(e))}return!0}function ju(t){if(pr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(fa,t.prim)||t.prim==="operation")throw new ut(t,`${t.prim}: type can't be used as part of a parameter`);io(t,e=>ju(e))}return!0}function Gu(t){if(pr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(fa,t.prim)||t.prim==="big_map"||t.prim==="operation"||t.prim==="sapling_state")throw new ut(t,`${t.prim}: type can't be used inside a big_map`);io(t,e=>Gu(e))}return!0}const XS=new RegExp("^[a-zA-Z0-9_.%@]*$");function Qm(t){if(t.string.length>zS)throw new ut(t,`view name too long: ${t.string}`);if(!XS.test(t.string))throw new ut(t,`invalid character(s) in view name: ${t.string}`)}function Ni(t){if(pr(t)&&ai(t)){if(!Object.prototype.hasOwnProperty.call(fa,t.prim))throw new ut(t,"type expected");io(t,e=>Ni(e))}return!0}function io(t,e){if(Array.isArray(t)||t.prim==="pair"){const r=Array.isArray(t)?t:t.args;if(r===void 0||r.length<2)throw new ut(t,"at least 2 arguments expected");return r.forEach(n=>{pr(n)&&e(n)}),!0}switch(t.prim){case"option":case"list":it(t,1)&&pr(t.args[0])&&e(t.args[0]);break;case"contract":it(t,1)&&ju(t.args[0]);break;case"or":it(t,2)&&pr(t.args[0])&&pr(t.args[1])&&(e(t.args[0]),e(t.args[1]));break;case"lambda":it(t,2)&&(Ni(t.args[0]),Ni(t.args[1]));break;case"set":it(t,1)&&Bi(t.args[0]);break;case"map":it(t,2)&&pr(t.args[0])&&pr(t.args[1])&&(Bi(t.args[0]),e(t.args[1]));break;case"big_map":it(t,2)&&pr(t.args[0])&&pr(t.args[1])&&(Bi(t.args[0]),Gu(t.args[1]),e(t.args[1]));break;case"ticket":it(t,1)&&pr(t.args[0])&&Bi(t.args[0]);break;case"sapling_state":case"sapling_transaction":it(t,1)&&bf(t.args[0]);break;default:it(t,0)}return!0}function Us(t){if("int"in t||"string"in t||"bytes"in t)return!0;if(Array.isArray(t)){let e=0;for(const r of t)ai(r)&&r.prim==="Elt"?(it(r,2)&&(Us(r.args[0]),Us(r.args[1])),e++):Us(r);if(e!==0&&e!==t.length)throw new ut(t,"data entries and map elements can't be intermixed");return!0}if(ai(t))switch(t.prim){case"Unit":case"True":case"False":case"None":it(t,0);break;case"Pair":if(t.args===void 0||t.args.length<2)throw new ut(t,"at least 2 arguments expected");for(const e of t.args)Us(e);break;case"Left":case"Right":case"Some":it(t,1)&&Us(t.args[0]);break;case"Lambda_rec":t.args&&yn(t.args);break;default:if(Object.prototype.hasOwnProperty.call(Wm,t.prim))yn(t);else throw new ut(t,"data entry or instruction expected")}else throw new ut(t,"data entry expected");return!0}function Zm(t){if(cs(t)){const e={},r={};for(const n of t)if(Jm(n)){if(n.prim!=="view"){if(n.prim in e)throw new ut(t,`duplicate contract section: ${n.prim}`);e[n.prim]=!0}switch(n.prim){case"code":it(n,1)&&cs(n.args[0])&&yn(n.args[0]);break;case"parameter":if(it(n,1)&&ju(n.args[0]),n.annots)throw new ut(n,"Annotation must be part of the parameter type");break;case"storage":it(n,1)&&b0(n.args[0]);break;case"view":if(it(n,4)){if(Ym(n.args[0])){const i=n.args[0];if(i.string in r)throw new ut(t,`duplicate view name: ${i.string}`);r[i.string]=!0,Qm(i)}Vo(n.args[1]),Vo(n.args[2]),cs(n.args[3])&&yn(n.args[3])}break;default:throw new ut(t,`unexpected contract section: ${n.prim}`)}}}return!0}function e2(t){return Object.prototype.hasOwnProperty.call(Wm,t.prim)}function Q1(t){if(!Array.isArray(t))return!1;for(const e of t)if("prim"in e){if(e2(e))throw new qr(t,`Instruction outside of a lambda: ${JSON.stringify(t)}`);if(e.prim==="Elt")throw new qr(t,`Elt item outside of a map literal: ${JSON.stringify(t)}`)}return!0}function JS(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}const YS=["parameter","storage","code","False","Elt","Left","None","Pair","Right","Some","True","Unit","PACK","UNPACK","BLAKE2B","SHA256","SHA512","ABS","ADD","AMOUNT","AND","BALANCE","CAR","CDR","CHECK_SIGNATURE","COMPARE","CONCAT","CONS","CREATE_ACCOUNT","CREATE_CONTRACT","IMPLICIT_ACCOUNT","DIP","DROP","DUP","EDIV","EMPTY_MAP","EMPTY_SET","EQ","EXEC","FAILWITH","GE","GET","GT","HASH_KEY","IF","IF_CONS","IF_LEFT","IF_NONE","INT","LAMBDA","LE","LEFT","LOOP","LSL","LSR","LT","MAP","MEM","MUL","NEG","NEQ","NIL","NONE","NOT","NOW","OR","PAIR","PUSH","RIGHT","SIZE","SOME","SOURCE","SENDER","SELF","STEPS_TO_QUOTA","SUB","SWAP","TRANSFER_TOKENS","SET_DELEGATE","UNIT","UPDATE","XOR","ITER","LOOP_LEFT","ADDRESS","CONTRACT","ISNAT","CAST","RENAME","bool","contract","int","key","key_hash","lambda","list","map","big_map","nat","option","or","pair","set","signature","string","bytes","mutez","timestamp","unit","operation","address","SLICE","DIG","DUG","EMPTY_BIG_MAP","APPLY","chain_id","CHAIN_ID","LEVEL","SELF_ADDRESS","never","NEVER","UNPAIR","VOTING_POWER","TOTAL_VOTING_POWER","KECCAK","SHA3","PAIRING_CHECK","bls12_381_g1","bls12_381_g2","bls12_381_fr","sapling_state","sapling_transaction_deprecated","SAPLING_EMPTY_STATE","SAPLING_VERIFY_UPDATE","ticket","TICKET_DEPRECATED","READ_TICKET","SPLIT_TICKET","JOIN_TICKETS","GET_AND_UPDATE","chest","chest_key","OPEN_CHEST","VIEW","view","constant","SUB_MUTEZ","tx_rollup_l2_address","MIN_BLOCK_TIME","sapling_transaction","EMIT","Lambda_rec","LAMBDA_REC","TICKET","BYTES","NAT"];Object.assign({},...YS.map((t,e)=>({[t]:e})));var Z1;(function(t){t[t.Int=0]="Int",t[t.String=1]="String",t[t.Sequence=2]="Sequence",t[t.Prim0=3]="Prim0",t[t.Prim0Annot=4]="Prim0Annot",t[t.Prim1=5]="Prim1",t[t.Prim1Annot=6]="Prim1Annot",t[t.Prim2=7]="Prim2",t[t.Prim2Annot=8]="Prim2Annot",t[t.Prim=9]="Prim",t[t.Bytes=10]="Bytes"})(Z1||(Z1={}));const Ji=new Error("bounds out of range");class qo{constructor(e,r=0,n=e.length){this.buffer=e,this.idx=r,this.cap=n}get length(){return this.cap-this.idx}readBytes(e){if(this.cap-this.idx<e)throw Ji;const r=this.buffer.slice(this.idx,this.idx+e);return this.idx+=e,r}reader(e){if(this.cap-this.idx<e)throw Ji;const r=new qo(this.buffer,this.idx,this.idx+e);return this.idx+=e,r}copy(){return new qo(this.buffer,this.idx,this.cap)}readUint8(){if(this.cap-this.idx<1)throw Ji;return this.buffer[this.idx++]>>>0}readUint16(){if(this.cap-this.idx<2)throw Ji;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)>>>0}readUint32(){if(this.cap-this.idx<4)throw Ji;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return(e<<24|r<<16|n<<8|i)>>>0}readInt8(){if(this.cap-this.idx<1)throw Ji;return this.buffer[this.idx++]<<24>>24}readInt16(){if(this.cap-this.idx<2)throw Ji;const e=this.buffer[this.idx++],r=this.buffer[this.idx++];return(e<<8|r)<<16>>16}readInt32(){if(this.cap-this.idx<4)throw Ji;const e=this.buffer[this.idx++],r=this.buffer[this.idx++],n=this.buffer[this.idx++],i=this.buffer[this.idx++];return e<<24|r<<16|n<<8|i}}var Hf;(function(t){t[t.Implicit=0]="Implicit",t[t.Originated=1]="Originated"})(Hf||(Hf={}));var Fa;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(Fa||(Fa={}));function t2(t){let e;const r=t.readUint8();switch(r){case Fa.ED25519:e="ED25519PublicKeyHash";break;case Fa.SECP256K1:e="SECP256K1PublicKeyHash";break;case Fa.P256:e="P256PublicKeyHash";break;default:throw new Error(`unknown public key hash tag: ${r}`)}return{type:e,hash:t.readBytes(20)}}function QS(t){let e;const r=t.readUint8();switch(r){case Hf.Implicit:e=t2(t);break;case Hf.Originated:e={type:"ContractHash",hash:t.readBytes(20)},t.readBytes(1);break;default:throw new Error(`unknown address tag: ${r}`)}if(t.length!==0){const n=new TextDecoder;e.entryPoint=n.decode(new Uint8Array(t.readBytes(t.length)))}return e}var ja;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1",t[t.P256=2]="P256"})(ja||(ja={}));function ZS(t){let e,r;const n=t.readUint8();switch(n){case ja.ED25519:r="ED25519PublicKey",e=32;break;case ja.SECP256K1:r="SECP256K1PublicKey",e=33;break;case ja.P256:r="P256PublicKey",e=33;break;default:throw new Error(`unknown public key tag: ${n}`)}return{type:r,publicKey:t.readBytes(e)}}function eR(t){const e=Mo(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new qo(new Uint8Array(e));return QS(r)}function tR(t){const e=Mo(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new qo(new Uint8Array(e));return t2(r)}function rR(t){const e=Mo(t.bytes);if(e===null)throw new Error(`can't parse bytes: "${t.bytes}"`);const r=new qo(new Uint8Array(e));return ZS(r)}class Ue extends qr{constructor(e,r,n){super(e,n),this.stackState=r,Object.setPrototypeOf(this,Ue.prototype)}}function lt(t){return Array.isArray(t)?"pair":t.prim}function Ff(t){return"prim"in t?t.args:t}function En(t,e,r=!1){if(lt(t)!==lt(e))throw new nt(t,void 0,`types mismatch: ${lt(t)} != ${lt(e)}`);const n=[Go(t),Go(e)];if(n[0].t&&n[1].t&&n[0].t[0]!==n[1].t[0])throw new nt(t,void 0,`${lt(t)}: type names mismatch: ${n[0].t[0]} != ${n[1].t[0]}`);if(r&&n[0].f&&n[1].f&&n[0].f[0]!==n[1].f[0])throw new nt(t,void 0,`${lt(t)}: field names mismatch: ${n[0].f[0]} != ${n[1].f}`);if(as(t)){const i=mn("pair",t),s=mn("pair",e);En(i.args[0],s.args[0],!0),En(i.args[1],s.args[1],!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":case"ticket":En(t.args[0],e.args[0]);break;case"or":En(t.args[0],e.args[0],!0),En(t.args[1],e.args[1],!0);break;case"lambda":case"map":case"big_map":En(t.args[0],e.args[0]),En(t.args[1],e.args[1]);break;case"sapling_state":case"sapling_transaction":if(parseInt(t.args[0].int,10)!==parseInt(e.args[0].int,10))throw new nt(t,void 0,`${lt(t)}: type argument mismatch: ${t.args[0].int} != ${e.args[0].int}`)}}function r2(t,e){if(t.length!==e.length)throw new nt(t,void 0,`stack length mismatch: ${t.length} != ${e.length}`);for(let r=0;r<t.length;r++)En(t[r],e[r])}function _t(t,e=!1){var r,n,i;if(!Array.isArray(t)){const s=Go(t);if((((r=s.t)===null||r===void 0?void 0:r.length)||0)>1)throw new nt(t,void 0,`${t.prim}: at most one type annotation allowed: ${t.annots}`);if(e){if((((n=s.f)===null||n===void 0?void 0:n.length)||0)>1)throw new nt(t,void 0,`${t.prim}: at most one field annotation allowed: ${t.annots}`)}else if((((i=s.f)===null||i===void 0?void 0:i.length)||0)>0)throw new nt(t,void 0,`${t.prim}: field annotations aren't allowed: ${t.annots}`)}if(as(t)){const s=Ff(t);for(const o of s)_t(o,!0);return}switch(t.prim){case"option":case"list":case"contract":case"set":_t(t.args[0]);break;case"or":for(const s of t.args)_t(s,!0);break;case"lambda":case"map":case"big_map":_t(t.args[0]),_t(t.args[1])}}function n2(t){if(!Array.isArray(t))return!1;for(const e of t)if(!(Array.isArray(e)&&n2(e)||"prim"in e&&e2(e)))return!1;return!0}function vn(t,e,r){if(as(e)){if(VS(t)){Q1(t);const n=mn("Pair",t),i=mn("pair",e);vn(n.args[0],i.args[0],r),vn(n.args[1],i.args[1],r);return}throw new nt(e,t,`pair expected: ${JSON.stringify(t)}`)}switch(e.prim){case"int":if("int"in t&&ph(t.int))return;throw new nt(e,t,`integer value expected: ${JSON.stringify(t)}`);case"nat":case"mutez":if("int"in t&&$m(t.int))return;throw new nt(e,t,`natural value expected: ${JSON.stringify(t)}`);case"string":if("string"in t)return;throw new nt(e,t,`string value expected: ${JSON.stringify(t)}`);case"bytes":case"bls12_381_g1":case"bls12_381_g2":if("bytes"in t&&Mo(t.bytes)!==null)return;throw new nt(e,t,`bytes value expected: ${JSON.stringify(t)}`);case"bool":if("prim"in t&&(t.prim==="True"||t.prim==="False"))return;throw new nt(e,t,`boolean value expected: ${JSON.stringify(t)}`);case"key_hash":if("string"in t&&Gc(t.string,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash")!==null)return;if("bytes"in t)try{tR(t);return}catch{}throw new nt(e,t,`key hash expected: ${JSON.stringify(t)}`);case"timestamp":if(("string"in t||"int"in t)&&$S(t)!==null)return;throw new nt(e,t,`timestamp expected: ${JSON.stringify(t)}`);case"address":if("string"in t){let n=t.string;const i=t.string.indexOf("%");if(i>=0&&(n=t.string.slice(0,i)),Gc(n,"ED25519PublicKeyHash","SECP256K1PublicKeyHash","P256PublicKeyHash","ContractHash","TxRollupL2Address","RollupAddress")!==null)return}else if("bytes"in t)try{eR(t);return}catch{}throw new nt(e,t,`address expected: ${JSON.stringify(t)}`);case"key":if("string"in t&&Gc(t.string,"ED25519PublicKey","SECP256K1PublicKey","P256PublicKey")!==null)return;if("bytes"in t)try{rR(t);return}catch{}throw new nt(e,t,`public key expected: ${JSON.stringify(t)}`);case"unit":if("prim"in t&&t.prim==="Unit")return;throw new nt(e,t,`unit value expected: ${JSON.stringify(t)}`);case"signature":if("bytes"in t||"string"in t&&Gc(t.string,"ED25519Signature","SECP256K1Signature","P256Signature","GenericSignature")!==null)return;throw new nt(e,t,`signature expected: ${JSON.stringify(t)}`);case"chain_id":if(("bytes"in t||"string"in t)&&("string"in t?Vm(t.string):Mo(t.bytes))!==null)return;throw new nt(e,t,`chain id expected: ${JSON.stringify(t)}`);case"option":if("prim"in t){if(t.prim==="None")return;if(t.prim==="Some"){vn(t.args[0],e.args[0],r);return}}throw new nt(e,t,`option expected: ${JSON.stringify(t)}`);case"list":case"set":if(Q1(t)){for(const n of t)vn(n,e.args[0],r);return}throw new nt(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"or":if("prim"in t){if(t.prim==="Left"){vn(t.args[0],e.args[0],r);return}else if(t.prim==="Right"){vn(t.args[0],e.args[1],r);return}}throw new nt(e,t,`union (or) expected: ${JSON.stringify(t)}`);case"lambda":if(n2(t)){const n=Xt(t,[e.args[0]],r);if("failed"in n)throw new nt(e,t,`function is failed with error type: ${n.failed}`);if(n.length!==1)throw new nt(e,t,"function must return a value");En(e.args[1],n[0]);return}throw new nt(e,t,`function expected: ${JSON.stringify(t)}`);case"map":case"big_map":if(Array.isArray(t)){for(const n of t){if(!("prim"in n)||n.prim!=="Elt")throw new nt(e,t,`map elements expected: ${JSON.stringify(t)}`);vn(n.args[0],e.args[0],r),vn(n.args[1],e.args[1],r)}return}throw new nt(e,t,`${e.prim} expected: ${JSON.stringify(t)}`);case"bls12_381_fr":if("int"in t&&ph(t.int)||"bytes"in t&&Mo(t.bytes)!==null)return;throw new nt(e,t,`BLS12-381 element expected: ${JSON.stringify(t)}`);case"sapling_state":if(Array.isArray(t))return;throw new nt(e,t,`sapling state expected: ${JSON.stringify(t)}`);case"ticket":vn(t,{prim:"pair",args:[{prim:"address"},e.args[0],{prim:"nat"}]},r);return;default:throw new nt(e,t,`type ${lt(e)} don't have Michelson literal representation`)}}function nR(t,e,r){let n=e,i=e,s=0;for(const o of t){const a=Xt(o,i,r);if(n=a,"failed"in a)break;i=a,s++}if("failed"in n&&n.level==0&&(!("prim"in n.failed)||n.failed.prim!=="never")&&s!==t.length-1)throw new Ue(t,n,"FAIL must appear in a tail position");if(r?.traceCallback!==void 0){const o={op:t,in:e,out:n};r.traceCallback(o)}return"failed"in n?{failed:n.failed,level:n.level+1}:n}function Xt(t,e,r){const n=r?.protocol||Gm;if(Array.isArray(t))return nR(t,e,r);const i=t;function s(x,...E){if(e.length<E.length+x)throw new Ue(i,e,`${i.prim}: stack must have at least ${E.length} element(s)`);let u=x;for(const h of E){if(h!==null&&h.length!==0){let g=0;for(;g<h.length&&h[g]!==lt(e[u]);)g++;if(g===h.length)throw new Ue(i,e,`${i.prim}: stack type mismatch: [${u}] expected to be ${h}, got ${lt(e[u])} instead`)}u++}return e.slice(x,E.length+x)}function o(x){return(...E)=>{try{return x(...E)}catch(u){throw u instanceof qr?new Ue(i,e,u.message):u}}}function a(x){return E=>{try{return x(E)}catch(u){throw u instanceof qr?new Ue(i,e,u.message):u}}}const c=o(Go),l=o(r2),f=o(En),d=a(Bi),I=a(g0),P=a(b0),L=a(Vo),H=a(Gu);function G(x,E){const u=c(i,Object.assign(Object.assign({},E),{emptyFields:x.f!==void 0&&x.f>1,emptyVar:x.v!==void 0&&x.v>1})),h=(g,b,p)=>{if(g&&g.length>(b||0))throw new Ue(i,e,`${i.prim}: at most ${b||0} ${p} annotations allowed`)};return h(u.f,x.f,"field"),h(u.t,x.t,"type"),h(u.v,x.v,"variable"),u}function V(x,E){const u=x,h=Array.isArray(u)?{prim:"pair",args:u}:u,g=c(h),b=E.v!==void 0||E.t!==void 0||E.f!==void 0?[...(E.v===null?g.v:E.v)||[],...(E.t===null?g.t:E.t)||[],...(E.f===null?g.f:E.f)||[]]:void 0,p=JS(h,["annots"]);return Object.assign(Object.assign({},p),b&&b.length!==0&&{annots:b})}function C(x,E){const u=G({v:1});return V(x,{v:u.v!==void 0?u.v:E!==void 0?[E]:null,t:null})}function q(x,E,u,h,g){var b,p,S,O;const _=(b=c(E).f)===null||b===void 0?void 0:b[0],v=(p=u.f)===null||p===void 0?void 0:p[h];if(v!==void 0&&v!=="%"&&_!==void 0&&v!==_)throw new Ue(i,e,`${i.prim}: field names doesn't match: ${v} !== ${_}`);const N=(S=u.v)===null||S===void 0?void 0:S[h],ee=(O=c(x).v)===null||O===void 0?void 0:O[0];return V(E,{t:null,v:N?N==="@%"?_?["@"+_.slice(1)]:void 0:N==="@%%"?ee?["@"+ee.slice(1)+"."+(_?_.slice(1):g)]:_?["@"+_.slice(1)]:void 0:[N]:null})}function U(x,E,u=E){const h=mn("pair",x);if(u===1)return[h.args[0]];if(u===2)return h.args;const g=h.args[1];if(as(g))return[h.args[0],...U(g,E,u-1)];throw new Ue(i,e,`${i.prim}: at least ${E} fields are expected`)}function K(x,E,u=E){if(u===0)return x;const h=mn("pair",x);if(u===1)return h.args[0];const g=h.args[1];if(as(g))return K(g,E,u-2);if(u===2)return g;throw new Ue(i,e,`${i.prim}: at least ${E+1} fields are expected`)}function j(x,E,u,h=u){if(h===0)return E;const g=mn("pair",x);if(h===1)return Object.assign(Object.assign({},g),{args:[E,g.args[1]]});const b=g.args[1];if(as(b))return Object.assign(Object.assign({},g),{args:[g.args[0],j(b,E,u,h-2)]});if(h===2)return Object.assign(Object.assign({},g),{args:[g.args[0],E]});throw new Ue(i,e,`${i.prim}: at least ${u+1} fields are expected`)}const y=(x,E)=>["@"+(x.v?x.v[0].slice(1)+".":"")+E];function w(x,E){return"failed"in x||"failed"in E?"failed"in x?E:x:(l(x,E),x)}const T=(x=>{var E,u,h,g,b;switch(x.prim){case"DUP":{const p=x.args?parseInt(x.args[0].int,10):1;if(p===0)throw new Ue(x,e,"DUP 0 is forbidden");const S=s(p-1,null)[0];if(lt(S)==="ticket")throw new Ue(x,e,"ticket can't be DUPed");return[S,...e]}case"SWAP":{const p=s(0,null,null);return G({}),[p[1],p[0],...e.slice(2)]}case"SOME":return[V({prim:"option",args:[s(0,null)[0]]},G({t:1,v:1})),...e.slice(1)];case"UNIT":return[V({prim:"unit"},G({v:1,t:1})),...e];case"PAIR":{const p=x.args?parseInt(x.args[0].int,10):2;if(p<2)throw new Ue(x,e,`PAIR ${p} is forbidden`);const S=s(0,...new Array(p).fill(null)),O=G({f:p,t:1,v:1},{specialFields:!0}),_=N=>{const ee=N.lastIndexOf(".");return N.slice(ee>0?ee+1:1)},v=S.map((N,ee)=>{var Y;const ne=c(N),se=O.f&&O.f.length>ee&&O.f[ee]!=="%"?O.f[ee]==="%@"?ne.v?["%"+_(((Y=ne.v)===null||Y===void 0?void 0:Y[0])||"")]:void 0:[O.f[ee]]:void 0;return V(N,{v:null,t:null,f:se})});return[V({prim:"pair",args:v},{t:O.t,v:O.v}),...e.slice(p)]}case"UNPAIR":{const p=x.args?parseInt(x.args[0].int,10):2;if(p<2)throw new Ue(x,e,`UNPAIR ${p} is forbidden`);const S=s(0,["pair"])[0],O=G({f:2,v:2},{specialVar:!0});return[...U(S,p).map((v,N)=>q(S,v,O,N,N===0?"car":"cdr")),...e.slice(1)]}case"CAR":case"CDR":{const p=mn("pair",s(0,["pair"])[0]),S=p.args[x.prim==="CAR"?0:1],O=G({f:1,v:1},{specialVar:!0});return[q(p,S,O,0,x.prim.toLocaleLowerCase()),...e.slice(1)]}case"CONS":{const p=s(0,null,["list"]);return f(p[0],p[1].args[0]),[C({prim:"list",args:[p[1].args[0]]}),...e.slice(2)]}case"SIZE":return s(0,["string","list","set","map","bytes"]),[C({prim:"nat"}),...e.slice(1)];case"MEM":{const p=s(0,null,["set","map","big_map"]);return d(p[0]),f(p[0],p[1].args[0]),[C({prim:"bool"}),...e.slice(2)]}case"GET":if(x.args){const p=parseInt(x.args[0].int,10),S=s(0,["pair"])[0];return[C(K(S,p)),...e.slice(1)]}else{const p=s(0,null,["map","big_map"]);return d(p[0]),f(p[0],p[1].args[0]),[C({prim:"option",args:[p[1].args[1]]}),...e.slice(2)]}case"UPDATE":if(x.args){const p=parseInt(x.args[0].int,10),S=s(0,null,["pair"]);return[C(j(S[1],S[0],p)),...e.slice(2)]}else{const p=s(0,null,["bool","option"]);if(d(p[0]),p[1].prim==="bool"){const O=s(2,["set"]);return f(p[0],O[0].args[0]),[C({prim:"set",args:[V(p[0],{t:null})]}),...e.slice(3)]}const S=s(2,["map","big_map"]);return f(p[0],S[0].args[0]),S[0].prim==="map"?[C({prim:"map",args:[V(p[0],{t:null}),V(p[1].args[0],{t:null})]}),...e.slice(3)]:(H(p[1].args[0]),[C({prim:"big_map",args:[V(p[0],{t:null}),V(p[1].args[0],{t:null})]}),...e.slice(3)])}case"GET_AND_UPDATE":{const p=G({v:2}),S=s(0,null,["option"],["map","big_map"]);d(S[0]),f(S[0],S[2].args[0]),f(S[1].args[0],S[2].args[1]);const O=(E=p.v)===null||E===void 0?void 0:E.map(_=>_!=="@"?[_]:void 0);return S[2].prim==="map"?[V({prim:"option",args:[S[2].args[1]]},{v:O?.[0]}),V({prim:"map",args:[V(S[0],{t:null}),V(S[1].args[0],{t:null})]},{v:O?.[1]}),...e.slice(3)]:(H(S[1].args[0]),[V({prim:"option",args:[S[2].args[1]]},{v:O?.[0]}),V({prim:"big_map",args:[V(S[0],{t:null}),V(S[1].args[0],{t:null})]},{v:O?.[1]}),...e.slice(3)])}case"EXEC":{const p=s(0,null,["lambda"]);return f(p[0],p[1].args[0]),[C(p[1].args[1]),...e.slice(2)]}case"APPLY":{const p=s(0,null,["lambda"]);if(P(p[0]),L(p[0]),!as(p[1].args[0]))throw new Ue(x,e,`${x.prim}: function's argument must be a pair: ${lt(p[1].args[0])}`);const S=p[1].args[0];return f(p[0],Ff(S)[0]),[C({prim:"lambda",args:[Ff(S)[1],p[1].args[1]]}),...e.slice(2)]}case"FAILWITH":{const p=s(0,null)[0];return wo(n,Ci.PtEdo2Zk)||I(p),{failed:p,level:0}}case"NEVER":return s(0,["never"]),{failed:{prim:"never"},level:0};case"RENAME":return[C(s(0,null)[0]),...e.slice(1)];case"CONCAT":{const p=s(0,["string","list","bytes"]);if(p[0].prim==="list"){if(lt(p[0].args[0])!=="string"&&lt(p[0].args[0])!=="bytes")throw new Ue(x,e,`${x.prim}: can't concatenate list of ${lt(p[0].args[0])}'s`);return[C(p[0].args[0]),...e.slice(1)]}const S=s(1,["string","bytes"]);if(p[0].prim!==S[0].prim)throw new Ue(x,e,`${x.prim}: can't concatenate ${p[0].prim} with ${S[0].prim}`);return[C(S[0]),...e.slice(2)]}case"SLICE":return[C({prim:"option",args:[s(0,["nat"],["nat"],["string","bytes"])[2]]},"@slice"),...e.slice(3)];case"PACK":{const p=s(0,null)[0];return I(p),[C({prim:"bytes"},"@packed"),...e.slice(1)]}case"ADD":{const p=s(0,["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","timestamp","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(p[0].prim==="nat"&&p[1].prim==="int"||p[0].prim==="int"&&p[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(p[0].prim==="int"&&p[1].prim==="timestamp"||p[0].prim==="timestamp"&&p[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if((p[0].prim==="int"||p[0].prim==="nat"||p[0].prim==="mutez"||p[0].prim==="bls12_381_g1"||p[0].prim==="bls12_381_g2"||p[0].prim==="bls12_381_fr")&&p[0].prim===p[1].prim)return[C(p[0]),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't add ${p[0].prim} to ${p[1].prim}`)}case"SUB":{const p=wo(n,Ci.PsiThaCa)?s(0,["nat","int","timestamp","mutez"],["nat","int","timestamp","mutez"]):s(0,["nat","int","timestamp"],["nat","int","timestamp"]);if((p[0].prim==="nat"||p[0].prim==="int")&&(p[1].prim==="nat"||p[1].prim==="int")||p[0].prim==="timestamp"&&p[1].prim==="timestamp")return[C({prim:"int"}),...e.slice(2)];if(p[0].prim==="timestamp"&&p[1].prim==="int")return[C({prim:"timestamp"}),...e.slice(2)];if(p[0].prim==="mutez"&&p[1].prim==="mutez")return[C({prim:"mutez"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't subtract ${p[0].prim} from ${p[1].prim}`)}case"SUB_MUTEZ":return s(0,["mutez"],["mutez"]),[C({prim:"option",args:[{prim:"mutez"}]}),...e.slice(2)];case"MUL":{const p=s(0,["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"],["nat","int","mutez","bls12_381_g1","bls12_381_g2","bls12_381_fr"]);if(p[0].prim==="nat"&&p[1].prim==="int"||p[0].prim==="int"&&p[1].prim==="nat")return[C({prim:"int"}),...e.slice(2)];if(p[0].prim==="nat"&&p[1].prim==="mutez"||p[0].prim==="mutez"&&p[1].prim==="nat")return[C({prim:"mutez"}),...e.slice(2)];if((p[0].prim==="bls12_381_g1"||p[0].prim==="bls12_381_g2"||p[0].prim==="bls12_381_fr")&&p[1].prim==="bls12_381_fr"||(p[0].prim==="nat"||p[0].prim==="int")&&p[0].prim===p[1].prim)return[C(p[0]),...e.slice(2)];if((p[0].prim==="nat"||p[0].prim==="int")&&p[1].prim==="bls12_381_fr"||(p[1].prim==="nat"||p[1].prim==="int")&&p[0].prim==="bls12_381_fr")return[C({prim:"bls12_381_fr"}),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't multiply ${p[0].prim} by ${p[1].prim}`)}case"EDIV":{const p=(O,_)=>({prim:"option",args:[{prim:"pair",args:[{prim:O},{prim:_}]}]}),S=s(0,["nat","int","mutez"],["nat","int","mutez"]);if(S[0].prim==="nat"&&S[1].prim==="nat")return[C(p("nat","nat")),...e.slice(2)];if((S[0].prim==="nat"||S[0].prim==="int")&&(S[1].prim==="nat"||S[1].prim==="int"))return[C(p("int","nat")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="nat")return[C(p("mutez","mutez")),...e.slice(2)];if(S[0].prim==="mutez"&&S[1].prim==="mutez")return[C(p("nat","mutez")),...e.slice(2)];throw new Ue(x,e,`${x.prim}: can't euclideally divide ${S[0].prim} by ${S[1].prim}`)}case"ABS":return s(0,["int"]),[C({prim:"nat"}),...e.slice(1)];case"ISNAT":return s(0,["int"]),[C({prim:"option",args:[{prim:"nat"}]}),...e.slice(1)];case"INT":return s(0,["nat","bls12_381_fr","bytes"]),[C({prim:"int"}),...e.slice(1)];case"BYTES":return s(0,["nat","int"]),[C({prim:"bytes"}),...e.slice(1)];case"NAT":return s(0,["bytes"]),[C({prim:"nat"}),...e.slice(1)];case"NEG":{const p=s(0,["nat","int","bls12_381_g1","bls12_381_g2","bls12_381_fr"])[0];return p.prim==="nat"||p.prim==="int"?[C({prim:"int"}),...e.slice(1)]:[C(p),...e.slice(1)]}case"LSL":case"LSR":return s(0,["nat","bytes"],["nat","bytes"]),[C({prim:"nat"}),...e.slice(2)];case"OR":case"XOR":{const p=s(0,["nat","bytes","bool"],["nat","bytes","bool"]);if(p[0].prim!==p[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${p[0].prim}, ${p[1].prim}`);return[C(p[1]),...e.slice(2)]}case"AND":{const p=s(0,["nat","bytes","bool","int"],["nat","bytes","bool"]);if((p[0].prim!=="int"||p[1].prim!=="nat")&&p[0].prim!==p[1].prim)throw new Ue(x,e,`${x.prim}: both arguments must be of the same type: ${p[0].prim}, ${p[1].prim}`);return[C(p[1]),...e.slice(2)]}case"NOT":return s(0,["nat","bytes","bool","int"])[0].prim==="bool"?[C({prim:"bool"}),...e.slice(1)]:[C({prim:"int"}),...e.slice(1)];case"COMPARE":{const p=s(0,null,null);return d(p[0]),d(p[1]),[C({prim:"int"}),...e.slice(2)]}case"EQ":case"NEQ":case"LT":case"GT":case"LE":case"GE":return s(0,["int"]),[C({prim:"bool"}),...e.slice(1)];case"SELF":{if(r?.contract===void 0)throw new Ue(x,e,`${x.prim}: contract required`);const p=G({f:1,v:1}),S=gh(r.contract,(u=p.f)===null||u===void 0?void 0:u[0]);if(S===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${S}`);return[V({prim:"contract",args:[S]},{v:p.v?p.v:["@self"]}),...e]}case"TRANSFER_TOKENS":{const p=s(0,null,["mutez"],["contract"]);return f(p[0],p[2].args[0]),[C({prim:"operation"}),...e.slice(3)]}case"SET_DELEGATE":{const p=s(0,["option"])[0];if(lt(p.args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${lt(p.args[0])}`);return[C({prim:"operation"}),...e.slice(1)]}case"IMPLICIT_ACCOUNT":return s(0,["key_hash"]),[C({prim:"contract",args:[{prim:"unit"}]}),...e.slice(1)];case"NOW":return[C({prim:"timestamp"},"@now"),...e];case"AMOUNT":return[C({prim:"mutez"},"@amount"),...e];case"BALANCE":return[C({prim:"mutez"},"@balance"),...e];case"CHECK_SIGNATURE":return s(0,["key"],["signature"],["bytes"]),[C({prim:"bool"}),...e.slice(3)];case"BLAKE2B":case"SHA256":case"SHA512":case"KECCAK":case"SHA3":return s(0,["bytes"]),[C({prim:"bytes"}),...e.slice(1)];case"HASH_KEY":return s(0,["key"]),[C({prim:"key_hash"}),...e.slice(1)];case"SOURCE":return[C({prim:"address"},"@source"),...e];case"SENDER":return[C({prim:"address"},"@sender"),...e];case"ADDRESS":{const p=s(0,["contract"])[0],S=G({v:1});return[V({prim:"address",[jc]:p},{v:S.v?S.v:y(c(p),"address")}),...e.slice(1)]}case"SELF_ADDRESS":{const p={prim:"address"};return r?.contract!==void 0&&(p[jc]={prim:"contract",args:[ti(r.contract,"parameter").args[0]]}),[C(p,"@address"),...e]}case"CHAIN_ID":return[C({prim:"chain_id"}),...e];case"DROP":{G({});const p=x.args!==void 0?parseInt(x.args[0].int,10):1;return s(p-1,null),e.slice(p)}case"DIG":{G({});const p=parseInt(x.args[0].int,10);return[s(p,null)[0],...e.slice(0,p),...e.slice(p+1)]}case"DUG":{G({});const p=parseInt(x.args[0].int,10);return[...e.slice(1,p+1),s(0,null)[0],...e.slice(p+1)]}case"NONE":return _t(x.args[0]),[V({prim:"option",args:[x.args[0]]},G({t:1,v:1})),...e];case"LEFT":case"RIGHT":{const p=s(0,null)[0],S=G({f:2,t:1,v:1},{specialFields:!0}),O=c(p),_=[V(p,{t:null,v:null,f:S.f&&S.f.length>0&&S.f[0]!=="%"?S.f[0]==="%@"?O.v?["%"+O.v[0].slice(1)]:void 0:S.f:void 0}),V(x.args[0],{t:null,f:S.f&&S.f.length>1&&S.f[1]!=="%"?S.f:void 0})];return[V({prim:"or",args:x.prim==="LEFT"?_:[_[1],_[0]]},{t:S.t,v:S.v}),...e.slice(1)]}case"NIL":return _t(x.args[0]),[V({prim:"list",args:[x.args[0]]},G({t:1,v:1})),...e];case"UNPACK":return s(0,["bytes"]),_t(x.args[0]),[C({prim:"option",args:[x.args[0]]},"@unpacked"),...e.slice(1)];case"CONTRACT":{const p=s(0,["address"])[0];_t(x.args[0]);const S=G({v:1,f:1}),O=p[jc];if(O!==void 0){const _=gh(O,(h=S.f)===null||h===void 0?void 0:h[0]);if(_===null)throw new Ue(x,e,`${x.prim}: contract has no entrypoint ${_}`);f(_,x.args[0])}return[V({prim:"option",args:[{prim:"contract",args:[x.args[0]]}]},{v:S.v?S.v:y(c(p),"contract")}),...e.slice(1)]}case"CAST":{G({});const p=s(0,null)[0];return _t(x.args[0]),f(x.args[0],p),[x.args[0],...e.slice(1)]}case"IF_NONE":{G({});const p=s(0,["option"])[0],S=e.slice(1),O=Xt(x.args[0],S,r),_=Xt(x.args[1],[V(p.args[0],{t:null,v:y(c(p),"some")}),...S],r);return w(O,_)}case"IF_LEFT":{G({});const p=s(0,["or"])[0],S=c(p),O=c(p.args[0]),_=c(p.args[1]),v=e.slice(1),N=Xt(x.args[0],[V(p.args[0],{t:null,v:y(S,O.f?O.f[0].slice(1):"left")}),...v],r),ee=Xt(x.args[1],[V(p.args[1],{t:null,v:y(S,_.f?_.f[0].slice(1):"right")}),...v],r);return w(N,ee)}case"IF_CONS":{G({});const p=s(0,["list"])[0],S=c(p),O=e.slice(1),_=Xt(x.args[0],[V(p.args[0],{t:null,v:y(S,"hd")}),V(p,{t:null,v:y(S,"tl")}),...O],r),v=Xt(x.args[1],O,r);return w(_,v)}case"IF":{G({}),s(0,["bool"]);const p=e.slice(1),S=Xt(x.args[0],p,r),O=Xt(x.args[1],p,r);return w(S,O)}case"MAP":{const p=s(0,["list","map","option"])[0],S=e.slice(1),O=p.prim==="map"?{prim:"pair",args:p.args}:p.args[0],_=Xt(x.args[0],[V(O,{t:null,v:y(c(p),"elt")}),...S],r);if("failed"in _){if(!("prim"in _.failed)||_.failed.prim!=="never")throw new Ue(x,e,`${x.prim}: FAIL is not allowed in MAP`);return{failed:_.failed,level:_.level+1}}if(_.length<1)throw new Ue(x,e,`${x.prim}: function must return a value`);return l(_.slice(1),S),p.prim==="list"?[C({prim:"list",args:[_[0]]}),...S]:p.prim==="map"?[C({prim:"map",args:[p.args[0],_[0]]}),...S]:[C({prim:"option",args:[_[0]]}),...S]}case"ITER":{G({});const p=s(0,["set","list","map"])[0],S=e.slice(1),O=p.prim==="map"?{prim:"pair",args:p.args}:p.args[0],_=Xt(x.args[0],[V(O,{t:null,v:y(c(p),"elt")}),...S],r);return"failed"in _?{failed:_.failed,level:_.level+1}:(l(_,S),S)}case"LOOP":{G({}),s(0,["bool"]);const p=e.slice(1),S=Xt(x.args[0],p,r);return"failed"in S?{failed:S.failed,level:S.level+1}:(l(S,[{prim:"bool"},...p]),p)}case"LOOP_LEFT":{G({});const p=s(0,["or"])[0],S=e.slice(1),O=Xt(x.args[0],[V(p.args[0],{t:null,v:y(c(p),"left")}),...S],r);return"failed"in O?{failed:O.failed,level:O.level+1}:(l(O,[p,...S]),[V(p.args[1],{t:null,v:G({v:1}).v}),...S])}case"DIP":{G({});const p=x.args.length===2?parseInt(x.args[0].int,10):1;s(p-1,null);const S=e.slice(0,p),O=e.slice(p),_=x.args.length===2?Xt(x.args[1],O,r):Xt(x.args[0],O,r);return"failed"in _?{failed:_.failed,level:_.level+1}:[...S,..._]}case"CREATE_CONTRACT":{const p=G({v:2}),S=s(0,["option"],["mutez"],null);if(lt(S[0].args[0])!=="key_hash")throw new Ue(x,e,`${x.prim}: key hash expected: ${lt(S[0].args[0])}`);P(S[2])&&(s2(x.args[0]),En(ti(x.args[0],"storage").args[0],S[2]));const O=(g=p.v)===null||g===void 0?void 0:g.map(_=>_!=="@"?[_]:void 0);return[V({prim:"operation"},{v:O?.[0]}),V({prim:"address",[jc]:{prim:"contract",args:[ti(x.args[0],"parameter").args[0]]}},{v:O?.[1]}),...e.slice(3)]}case"PUSH":return _t(x.args[0]),vn(x.args[1],x.args[0],Object.assign(Object.assign({},r),{contract:void 0})),[C(x.args[0]),...e];case"EMPTY_SET":return _t(x.args[0]),d(x.args[0]),[V({prim:"set",args:x.args},G({t:1,v:1})),...e];case"EMPTY_MAP":return _t(x.args[0]),d(x.args[0]),_t(x.args[1]),[V({prim:"map",args:x.args},G({t:1,v:1})),...e];case"EMPTY_BIG_MAP":return _t(x.args[0]),d(x.args[0]),_t(x.args[1]),H(x.args[0]),[V({prim:"big_map",args:x.args},G({t:1,v:1})),...e];case"LAMBDA_REC":case"LAMBDA":{_t(x.args[0]),_t(x.args[1]);const p=[x.args[0]];x.prim==="LAMBDA_REC"&&p.push({prim:"lambda",args:[x.args[0],x.args[1]]});const S=Xt(x.args[2],p,Object.assign(Object.assign({},r),{contract:void 0}));if("failed"in S)return{failed:S.failed,level:S.level+1};if(S.length!==1)throw new Ue(x,e,`${x.prim}: function must return a value`);return f(x.args[1],S[0]),[C({prim:"lambda",args:[x.args[0],x.args[1]]}),...e]}case"LEVEL":return[C({prim:"nat"},"@level"),...e];case"TOTAL_VOTING_POWER":return[C({prim:"nat"}),...e];case"VOTING_POWER":return s(0,["key_hash"]),[C({prim:"nat"}),...e.slice(1)];case"TICKET":{const p=s(0,null,["nat"])[0];return d(p),wo(n,Ci.PtLimaPtL)?[V({prim:"ticket",args:[p]},G({t:1,v:1})),...e.slice(2)]:[C({prim:"option",args:[V({prim:"ticket",args:[p]},G({t:1,v:1}))]}),...e.slice(2)]}case"JOIN_TICKETS":{const p=mn("pair",s(0,["pair"])[0]);if(lt(p.args[0])!=="ticket")throw new Ue(x,e,`${x.prim}: ticket expected: ${lt(p.args[0])}`);return f(p.args[0],p.args[1]),[C({prim:"option",args:[V(p.args[0],{t:null})]}),...e.slice(1)]}case"SPLIT_TICKET":{const p=s(0,["ticket"],["pair"]),S=mn("pair",p[1]);if(lt(S.args[0])!=="nat")throw new Ue(x,e,`${x.prim}: nat expected: ${lt(S.args[0])}`);return f(S.args[0],S.args[1]),[C({prim:"option",args:[{prim:"pair",args:[V(p[0],{t:null}),V(p[0],{t:null})]}]}),...e.slice(2)]}case"READ_TICKET":{const p=G({v:2}),S=s(0,["ticket"])[0],O=(b=p.v)===null||b===void 0?void 0:b.map(_=>_!=="@"?[_]:void 0);return[V({prim:"pair",args:[{prim:"address"},V(S.args[0],{t:null}),{prim:"nat"}]},{v:O?.[0]}),V(S,{v:O?.[1],t:null}),...e.slice(1)]}case"PAIRING_CHECK":{const p=s(0,["list"])[0].args[0];if(!as(p))throw new Ue(x,e,`${x.prim}: pair expected: ${lt(p)}`);const S=mn("pair",p);if(lt(S.args[0])!=="bls12_381_g1")throw new Ue(x,e,`${x.prim}: bls12_381_g1 expected: ${lt(S.args[0])}`);if(lt(S.args[1])!=="bls12_381_g2")throw new Ue(x,e,`${x.prim}: bls12_381_g2 expected: ${lt(S.args[1])}`);return[C({prim:"bool"}),...e.slice(1)]}case"SAPLING_EMPTY_STATE":return[V({prim:"sapling_state",args:[x.args[0]]},G({v:1,t:1})),...e];case"SAPLING_VERIFY_UPDATE":{const p=s(0,["sapling_transaction"],["sapling_state"]);if(parseInt(p[0].args[0].int,10)!==parseInt(p[1].args[0].int,10))throw new Ue(x,e,`${x.prim}: sapling memo size mismatch: ${p[0].args[0].int} != ${p[1].args[0].int}`);return wo(n,Ci.PtJakarta)?[C({prim:"option",args:[{prim:"pair",args:[{prim:"int"},V(p[1],{t:null})]}]}),...e.slice(2)]:[C({prim:"option",args:[{prim:"pair",args:[{prim:"bytes"},{prim:"pair",args:[{prim:"int"},V(p[1],{t:null})]}]}]}),...e.slice(2)]}case"OPEN_CHEST":return s(0,["chest_key"],["chest"],["nat"]),[C({prim:"or",args:[{prim:"bytes"},{prim:"bool"}]}),...e.slice(3)];case"VIEW":{const p=s(0,null,["address"]);return L(p[0]),[C({prim:"option",args:[x.args[1]]}),...e.slice(2)]}case"MIN_BLOCK_TIME":return[C({prim:"nat"}),...e];case"EMIT":{const p=G({f:1,t:1});if(x.args){const S=s(0,null);return f(S[0],x.args[0]),[V({prim:"operation"},p),...e.slice(1)]}return[V({prim:"operation"},p),...e.slice(1)]}default:throw new qr(x,`unexpected instruction: ${x.prim}`)}})(i);if(r?.traceCallback!==void 0){const x={op:i,in:e,out:T};r.traceCallback(x)}return T}function ti(t,e){for(const r of t)if(r.prim===e)return r;throw new qr(t,`missing contract section: ${e}`)}function iR(t){const e={};for(const r of t)r.prim==="view"&&(e[r.args[0].string]=r);return e}function i2(t){if(Array.isArray(t)){for(const e of t)if("prim"in e&&(e.prim==="parameter"||e.prim==="storage"||e.prim==="code"))return!0}return!1}function gh(t,e){e=e||"%default";const r=jf(t).find(n=>n[0]===e);return r!==void 0?r[1]:e==="%default"?i2(t)?ti(t,"parameter").args[0]:t:null}function sR(t){return Array.isArray(t)||t.prim==="or"}function jf(t){if(i2(t)){const e=ti(t,"parameter"),r=jf(e.args[0]),n=Go(e);return n.f?[[n.f[0],e.args[0]],...r]:r}if(sR(t)){const e=Ff(t),r=n=>{const i=Go(e[n]);if(lt(e[n])==="or"){const s=jf(e[n]);return i.f?[[i.f[0],e[n]],...s]:s}return i.f?[[i.f[0],e[n]]]:[]};return[...r(0),...r(1)]}return[]}function s2(t,e){const r=(c,l,f,d)=>{_t(c,!0),_t(l);const I={prim:"pair",args:[Object.assign(Object.assign({},c),{annots:["@parameter"]}),Object.assign(Object.assign({},l),{annots:["@storage"]})]},P=Xt(d,[I],Object.assign(Object.assign({},e),{contract:t}));if("failed"in P)return P;try{r2(P,[f])}catch(L){throw L instanceof qr?new Ue(d,P,L.message):L}return P},n=ti(t,"parameter").args[0],i=ti(t,"storage").args[0],s=ti(t,"code").args[0],a=r(n,i,{prim:"pair",args:[{prim:"list",args:[{prim:"operation"}]},i]},s);for(const c of Object.values(iR(t)))r(c.args[1],i,c.args[2],c.args[3]);return a}function o2(t,e,r){_t(e),vn(t,e,r||null)}function oR(t,e,r){for(const n of e)_t(n);if(r?.contract!==void 0)for(const n of["parameter","storage"]){const i=ti(r.contract,n).args[0];_t(i)}return Xt(t,e,r||null)}function aR(t,e,r){try{return o2(t,e,r),!0}catch{return!1}}class v0{constructor(e,r){this.contract=e,this.ctx=Object.assign({contract:e},r),this.output=s2(e,this.ctx)}static parse(e,r){const n=new Ks(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new DS("empty contract");if(Zm(i))return new v0(i,r)}static parseTypeExpression(e,r){const n=new Ks(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new US("empty type expression");if(Ni(i))return _t(i),i}static parseDataExpression(e,r){const n=new Ks(r),i=typeof e=="string"?n.parseScript(e):n.parseJSON(e);if(i===null)throw new KS("empty data expression");if(Us(i))return i;throw void 0}section(e){return ti(this.contract,e)}entryPoints(){return jf(this.contract)}entryPoint(e){return gh(this.contract,e)}assertDataValid(e,r){o2(e,r,this.ctx)}isDataValid(e,r){return aR(e,r,this.ctx)}assertParameterValid(e,r){const n=this.entryPoint(e||void 0);if(n===null)throw new HS(e?.toString());this.assertDataValid(r,n)}isParameterValid(e,r){try{return this.assertParameterValid(e,r),!0}catch{return!1}}functionType(e,r){return oR(e,r,this.ctx)}}new v0([{prim:"parameter",args:[{prim:"unit"}]},{prim:"storage",args:[{prim:"unit"}]},{prim:"code",args:[[{prim:"CAR"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"PAIR"}]]}]);const eg=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),It=(t,e=8)=>t.toString(16).padStart(e,"0"),m0=31;var z;(function(t){t.SECRET="secret",t.RAW="raw",t.TZ1="tz1",t.BRANCH="branch",t.ZARITH="zarith",t.PUBLIC_KEY="public_key",t.PKH="pkh",t.DELEGATE="delegate",t.SCRIPT="script",t.BALLOT_STATEMENT="ballotStmt",t.PROPOSAL="proposal",t.PROPOSAL_ARR="proposalArr",t.INT32="int32",t.INT16="int16",t.PARAMETERS="parameters",t.ADDRESS="address",t.SMART_CONTRACT_ADDRESS="smart_contract_address",t.SMART_ROLLUP_ADDRESS="smart_rollup_address",t.SMART_ROLLUP_COMMITMENT_HASH="smart_rollup_commitment_hash",t.VALUE="value",t.PADDED_BYTES="padded_bytes",t.SMART_ROLLUP_MESSAGE="smart_rollup_message",t.MANAGER="manager",t.BLOCK_PAYLOAD_HASH="blockPayloadHash",t.ENTRYPOINT="entrypoint",t.OPERATION="operation",t.OP_ACTIVATE_ACCOUNT="activate_account",t.OP_DELEGATION="delegation",t.OP_TRANSACTION="transaction",t.OP_ORIGINATION="origination",t.OP_BALLOT="ballot",t.OP_ENDORSEMENT="endorsement",t.OP_SEED_NONCE_REVELATION="seed_nonce_revelation",t.OP_REVEAL="reveal",t.OP_PROPOSALS="proposals",t.OP_REGISTER_GLOBAL_CONSTANT="register_global_constant",t.OP_TRANSFER_TICKET="transfer_ticket",t.OP_TX_ROLLUP_ORIGINATION="tx_rollup_origination",t.OP_TX_ROLLUP_SUBMIT_BATCH="tx_rollup_submit_batch",t.BURN_LIMIT="burn_limit",t.TX_ROLLUP_ORIGINATION_PARAM="tx_rollup_origination_param",t.TX_ROLLUP_ID="tx_rollup_id",t.TX_ROLLUP_BATCH_CONTENT="tx_rollup_batch_content",t.OP_INCREASE_PAID_STORAGE="increase_paid_storage",t.OP_UPDATE_CONSENSUS_KEY="update_consensus_key",t.OP_DRAIN_DELEGATE="drain_delegate",t.OP_SMART_ROLLUP_ORIGINATE="smart_rollup_originate",t.PVM_KIND="pvm_kind",t.OP_SMART_ROLLUP_ADD_MESSAGES="smart_rollup_add_messages",t.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE="smart_rollup_execute_outbox_message"})(z||(z={}));const Pn={"00":"parameter","01":"storage","02":"code","03":"False","04":"Elt","05":"Left","06":"None","07":"Pair","08":"Right","09":"Some","0a":"True","0b":"Unit","0c":"PACK","0d":"UNPACK","0e":"BLAKE2B","0f":"SHA256",10:"SHA512",11:"ABS",12:"ADD",13:"AMOUNT",14:"AND",15:"BALANCE",16:"CAR",17:"CDR",18:"CHECK_SIGNATURE",19:"COMPARE","1a":"CONCAT","1b":"CONS","1c":"CREATE_ACCOUNT","1d":"CREATE_CONTRACT","1e":"IMPLICIT_ACCOUNT","1f":"DIP",20:"DROP",21:"DUP",22:"EDIV",23:"EMPTY_MAP",24:"EMPTY_SET",25:"EQ",26:"EXEC",27:"FAILWITH",28:"GE",29:"GET","2a":"GT","2b":"HASH_KEY","2c":"IF","2d":"IF_CONS","2e":"IF_LEFT","2f":"IF_NONE",30:"INT",31:"LAMBDA",32:"LE",33:"LEFT",34:"LOOP",35:"LSL",36:"LSR",37:"LT",38:"MAP",39:"MEM","3a":"MUL","3b":"NEG","3c":"NEQ","3d":"NIL","3e":"NONE","3f":"NOT",40:"NOW",41:"OR",42:"PAIR",43:"PUSH",44:"RIGHT",45:"SIZE",46:"SOME",47:"SOURCE",48:"SENDER",49:"SELF","4a":"STEPS_TO_QUOTA","4b":"SUB","4c":"SWAP","4d":"TRANSFER_TOKENS","4e":"SET_DELEGATE","4f":"UNIT",50:"UPDATE",51:"XOR",52:"ITER",53:"LOOP_LEFT",54:"ADDRESS",55:"CONTRACT",56:"ISNAT",57:"CAST",58:"RENAME",59:"bool","5a":"contract","5b":"int","5c":"key","5d":"key_hash","5e":"lambda","5f":"list",60:"map",61:"big_map",62:"nat",63:"option",64:"or",65:"pair",66:"set",67:"signature",68:"string",69:"bytes","6a":"mutez","6b":"timestamp","6c":"unit","6d":"operation","6e":"address","6f":"SLICE",70:"DIG",71:"DUG",72:"EMPTY_BIG_MAP",73:"APPLY",74:"chain_id",75:"CHAIN_ID",76:"LEVEL",77:"SELF_ADDRESS",78:"never",79:"NEVER","7a":"UNPAIR","7b":"VOTING_POWER","7c":"TOTAL_VOTING_POWER","7d":"KECCAK","7e":"SHA3","7f":"PAIRING_CHECK",80:"bls12_381_g1",81:"bls12_381_g2",82:"bls12_381_fr",83:"sapling_state",84:"sapling_transaction_deprecated",85:"SAPLING_EMPTY_STATE",86:"SAPLING_VERIFY_UPDATE",87:"ticket",88:"TICKET_DEPRECATED",89:"READ_TICKET","8a":"SPLIT_TICKET","8b":"JOIN_TICKETS","8c":"GET_AND_UPDATE","8d":"chest","8e":"chest_key","8f":"OPEN_CHEST",90:"VIEW",91:"view",92:"constant",93:"SUB_MUTEZ",94:"tx_rollup_l2_address",95:"MIN_BLOCK_TIME",96:"sapling_transaction",97:"EMIT",98:"Lambda_rec",99:"LAMBDA_REC","9a":"TICKET","9b":"BYTES","9c":"NAT"},cR=(()=>{const t={};return Object.keys(Pn).forEach(e=>{t[Pn[e]]=e}),t})(),bh={4:"activate_account",107:"reveal",110:"delegation",108:"transaction",109:"origination",6:"ballot",21:"endorsement",1:"seed_nonce_revelation",5:"proposals",111:"register_global_constant",150:"tx_rollup_origination",151:"tx_rollup_submit_batch",158:"transfer_ticket",113:"increase_paid_storage",114:"update_consensus_key",9:"drain_delegate",200:"smart_rollup_originate",201:"smart_rollup_add_messages",206:"smart_rollup_execute_outbox_message"},tg=(()=>{const t={};return Object.keys(bh).forEach(e=>{const r=typeof e=="string"?parseInt(e,10):e;t[bh[r]]=It(r,2)}),t})(),Gf={"00":"default","01":"root","02":"do","03":"set_delegate","04":"remove_delegate","05":"deposit"},rg=(()=>{const t={};return Object.keys(Gf).forEach(e=>{t[Gf[e]]=e}),t})();class fR extends Error{constructor(e){super(e),this.message=e,this.name="InvalidBlockHashError"}}class ng extends Error{constructor(e){super(e),this.message=e,this.name="InvalidOperationSchemaError"}}class a2 extends Error{constructor(e){super(`Oversized entrypoint: ${e}. The maximum length of entrypoint is ${m0}`),this.entrypoint=e,this.name="OversizedEntryPointError"}}class uR extends Error{constructor(e){super(`The ballot value '${e}' is invalid`),this.ballotValue=e,this.name="InvalidBallotValueError"}}class lR extends Error{constructor(e){super(`Failed to decode ballot value ${e}`),this.ballotValue=e,this.name="DecodeBallotValueError"}}class c2 extends Error{constructor(e){super(`The hex string '${e}' is invalid`),this.hexString=e,this.name="InvalidHexStringError"}}class dR extends Error{constructor(e){super(`Failed to encode michelson value '${e}'`),this.value=e,this.name="UnexpectedMichelsonValueError"}}class f2 extends Error{constructor(e){super(e),this.message=e,this.name="OperationDecodingError"}}class hR extends Error{constructor(e){super(e),this.message=e,this.name="OperationEncodingError"}}class pR extends Error{constructor(e){super(`The operation '${e}' is unsupported`),this.op=e,this.name="UnsupportedOperationError"}}class gR extends Error{constructor(e){super(`The Pvm "${e}" is not supported`),this.pvm=e,this.name="UnsupportedPvmKindError"}}class bR extends Error{constructor(e){super(`The encoded Pvm ${e} is not supported`),this.pvm=e,this.name="DecodePvmKindError"}}class vR extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class u2 extends Error{constructor(e){super(`The Smart Rollup Contract Address: ${e} is invalid`),this.address=e,this.name="InvalidSmartRollupContractAddress"}}class Rn{constructor(e,r=0){this.arr=e,this.offset=r}static fromHexString(e){const r=e.toLowerCase();if(/^(([a-f]|\d){2})*$/.test(r)){const n=new Uint8Array((r.match(/([a-z]|\d){2}/g)||[]).map(i=>parseInt(i,16)));return new Rn(n)}else throw new c2(r)}consume(e){const r=this.arr.subarray(this.offset,this.offset+e);return this.offset+=e,r}get(e){return this.arr[this.offset+e]}length(){return this.arr.length-this.offset}slice(e,r){return new Rn(this.arr.slice(e,r))}}const mR=t=>"prim"in t,yR=t=>"bytes"in t&&typeof t.bytes=="string",ER=t=>"string"in t&&typeof t.string=="string",_R=t=>"int"in t&&typeof t.int=="string",wR=t=>{const e=bs(t.code),r=bs(t.storage);return`${It(e.length/2,8)}${e}${It(r.length/2,8)}${r}`},AR=t=>{const e=Wr(t),r=Wr(t);return{code:vs(new Rn(e)),storage:vs(new Rn(r))}},bs=t=>{if(Array.isArray(t)){const e=t.map(n=>bs(n)).join(""),r=e.length/2;return`02${It(r)}${e}`}else{if(mR(t))return NR(t);if(yR(t))return SR(t);if(ER(t))return IR(t);if(_R(t))return TR(t)}throw new dR(JSON.stringify(t))},vs=t=>{const e=t.consume(1);switch(e[0]){case 10:return RR(t);case 1:return OR(t);case 0:return PR(t);case 2:{const r=new Rn(Wr(t)),n=[];for(;r.length()>0;)n.push(vs(r));return n}default:return MR(t,e)}},Wr=(t,e=4)=>{const r=t.consume(e),n=parseInt(Buffer.from(r).toString("hex"),16);return t.consume(n)},xR=(t,e=4)=>{const r=[];let n=t;for(;n.length();){const i=n.consume(e),s=parseInt(Buffer.from(i).toString("hex"),16);r.push(n.consume(s)),n=n.slice(s+e)}return r},SR=t=>{if(!/^([A-Fa-f0-9]{2})*$/.test(t.bytes))throw new c2(t.bytes);const e=t.bytes.length/2;return`0a${It(e)}${t.bytes}`},RR=t=>{const e=Wr(t);return{bytes:Buffer.from(e).toString("hex")}},IR=t=>{const e=Buffer.from(t.string,"utf8").toString("hex"),r=e.length/2;return`01${It(r)}${e}`},OR=t=>{const e=Wr(t);return{string:Buffer.from(e).toString("utf8")}},TR=({int:t})=>{const e=new be(t,10),r=e.toString(2)[0]==="-"?"1":"0",n=e.toString(2).replace(/-/g,""),i=n.length<=6?6:(n.length-6)%7?n.length+7-(n.length-6)%7:n.length,o=n.padStart(i,"0").match(/\d{6,7}/g).reverse();return o[0]=r+o[0],`00${o.map((c,l)=>parseInt((l===o.length-1?"0":"1")+c,2).toString(16).padStart(2,"0")).join("")}`},PR=t=>{let e=t.consume(1)[0];const r=[],n=1<<7;for(;e&n;)r.push(e),e=t.consume(1)[0];r.push(e);const i=!!(1<<6&r[0]);r[0]=r[0]&127;const s=r.map((a,c)=>a.toString(2).slice(c===0?-6:-7).padStart(c===0?6:7,"0")).reverse();let o=new be(s.join(""),2);return i&&(o=o.times(-1)),{int:o.toFixed()}},NR=t=>{const e=+Array.isArray(t.annots),r=Array.isArray(t.args)?t.args.length:0,n=It(Math.min(2*r+e+3,9),2),i=cR[t.prim];let s=(t.args||[]).map(a=>bs(a)).join("");const o=Array.isArray(t.annots)?BR(t.annots):"";return(t.prim==="LAMBDA"||t.prim==="LAMBDA_REC")&&r&&(s=It(s.length/2)+s+It(0)),(t.prim==="pair"||t.prim==="Pair")&&r>2&&(s=o===""?It(s.length/2)+s+It(0):It(s.length/2)+s),t.prim==="view"&&t.args&&(s=It(s.length/2)+s+It(0)),`${n}${i}${s}${o}`},MR=(t,e)=>{const r=(e[0]-3)%2===1;let n=Math.floor((e[0]-3)/2);const i=t.consume(1)[0].toString(16).padStart(2,"0"),s={prim:Pn[i]};if((Pn[i]==="LAMBDA"||Pn[i]==="LAMBDA_REC")&&t.consume(4),Pn[i]==="view")return n!=0?LR(t,s):s;let o,a;(Pn[i]==="pair"||Pn[i]==="Pair")&&n>2&&(o=CR(t),n=0,a=ig(t));const c=new Array(n).fill(0).map(()=>vs(t));return(Pn[i]==="LAMBDA"||Pn[i]==="LAMBDA_REC")&&t.consume(4),o?s.args=o:c.length&&(s.args=c),a&&a[0]!==""?s.annots=a:r&&(s.annots=ig(t)),s},LR=(t,e)=>(t.consume(4),e.args=new Array(4).fill(0).map(()=>vs(t)),t.consume(4),e),CR=t=>{const e=new Rn(Wr(t)),r=[];for(;e.length()>0;)r.push(vs(e));return r},BR=t=>{const e=t.map(n=>Buffer.from(n,"utf8").toString("hex")).join("20"),r=e.length/2;return`${It(r)}${e}`},ig=t=>{const e=t.consume(4),r=parseInt(Buffer.from(e).toString("hex"),16),n=t.consume(r);return Buffer.from(n).toString("hex").split("20").map(s=>Buffer.from(s,"hex").toString("utf8"))},mr=t=>e=>Ka(Buffer.from(ym(e,br[t]))),Or=t=>e=>{const r=e.consume(dm[t]);return hs(r,br[t])},kR=Or(re.TZ1),DR=Or(re.B),y0=t=>{const e=t.consume(1);if(e[0]===0)return Or(re.TZ1)(t);if(e[0]===1)return Or(re.TZ2)(t);if(e[0]===2)return Or(re.TZ3)(t)},UR=mr(re.B),KR=mr(re.TZ1),sg=t=>t?"ff":"00",l2=t=>mr(re.P)(t),d2=t=>Or(re.P)(t),HR=t=>{const e=[];for(t.consume(4);t.length()>0;)e.push(d2(t));return e},FR=t=>It(32*t.length)+t.map(e=>l2(e)).join(""),jR=t=>{switch(t){case"yay":return"00";case"nay":return"01";case"pass":return"02";default:throw new uR(t)}},GR=t=>{const e=t.consume(1);switch(e[0]){case 0:return"yay";case 1:return"nay";case 2:return"pass";default:throw new lR(e[0].toString())}},VR=t=>{switch(t){case"arith":return"00";case"wasm_2_0_0":return"01";default:throw new gR(t)}},qR=t=>{const e=t.consume(1);switch(e[0]){case 0:return"arith";case 1:return"wasm_2_0_0";default:throw new bR(e[0].toString())}},$R=t=>t?sg(!0)+E0(t):sg(!1),zR=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<4;n++){const i=(4-(n+1))*8;r.push((e&255<<i)>>i)}return Buffer.from(r).toString("hex")},WR=t=>{const e=t.consume(4);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},XR=t=>{const e=parseInt(String(t),10),r=[];for(let n=0;n<2;n++){const i=(2-(n+1))*8;r.push((e&255<<i)>>i)}return Buffer.from(r).toString("hex")},JR=t=>{const e=t.consume(2);let r=0;for(let n=0;n<e.length;n++)r=r|e[n]<<(e.length-(n+1))*8;return r},YR=t=>t.consume(1)[0]===255,QR=t=>{if(YR(t))return y0(t)},E0=t=>{switch(t.substring(0,3)){case re.TZ1:return"00"+mr(re.TZ1)(t);case re.TZ2:return"01"+mr(re.TZ2)(t);case re.TZ3:return"02"+mr(re.TZ3)(t);case re.TZ4:return"03"+mr(re.TZ4)(t);default:throw new r0(t)}},ZR=t=>{switch(t.substring(0,4)){case re.EDPK:return"00"+mr(re.EDPK)(t);case re.SPPK:return"01"+mr(re.SPPK)(t);case re.P2PK:return"02"+mr(re.P2PK)(t);default:throw new hm(t)}},e9=t=>{switch(t.substring(0,3)){case re.TZ1:case re.TZ2:case re.TZ3:case re.TZ4:return"00"+E0(t);case re.KT1:return"01"+mr(re.KT1)(t)+"00";default:throw new ft(t)}},t9=t=>{if(t.substring(0,3)!==re.SR1)throw new vR(t);return mr(re.SR1)(t)},r9=t=>{if(t.substring(0,3)===re.KT1)return"01"+mr(re.KT1)(t)+"00";throw new To(t)},n9=t=>{switch(t.consume(1)[0]){case 0:return Or(re.EDPK)(t);case 1:return Or(re.SPPK)(t);case 2:return Or(re.P2PK)(t);default:throw new hm(t.toString())}},i9=t=>{if(t.substring(0,4)===re.SRC1)return mr(re.SRC1)(t);throw new u2(t)},s9=t=>{switch(t.consume(1)[0]){case 0:return y0(t);case 1:{const r=Or(re.KT1)(t);return t.consume(1),r}default:throw new ft(t.toString())}},o9=t=>{const e=Or(re.SR1)(t);if(e.substring(0,3)!==re.SR1)throw new ft(e);return e},a9=t=>{if(t.consume(1)[0]===1){const r=Or(re.KT1)(t);return t.consume(1),r}throw new To(t.toString())},c9=t=>{const e=Or(re.SRC1)(t);if(e.substring(0,4)!==re.SRC1)throw new u2(e);return e},h2=t=>{const e=[];let r=new be(t,10);if(r.isNaN())throw new TypeError(`Invalid zarith number ${t}`);for(;;)if(r.lt(128)){r.lt(16)&&e.push("0"),e.push(r.toString(16));break}else{let n=r.mod(128);r=r.minus(n),r=r.dividedBy(128),n=n.plus(128),e.push(n.toString(16))}return e.join("")},p2=t=>{let e=0;for(;e<t.length()&&t.get(e)&128;)e+=1;let r=new be(0);for(let n=e;n>=0;n-=1){const i=t.get(n)&127;r=r.multipliedBy(128),r=r.plus(i)}return t.consume(e+1),new be(r).toString()},f9=t=>{const e=It(t.consume(1)[0],2);if(e in Gf)return Gf[e];{const r=Wr(t,1),n=Buffer.from(r).toString("utf8");if(n.length>m0)throw new a2(n);return n}},u9=t=>{if(t.consume(1)[0]!==0){const r=f9(t),n=Wr(t),i=vs(new Rn(n));return{entrypoint:r,value:i}}},l9=t=>{if(t in rg)return`${rg[t]}`;if(t.length>m0)throw new a2(t);return`ff${bs({string:t}).slice(8)}`},d9=t=>{if(!t||t.entrypoint==="default"&&"prim"in t.value&&t.value.prim==="Unit")return"00";const e=l9(t.entrypoint),r=bs(t.value),n=(r.length/2).toString(16).padStart(8,"0");return`ff${e}${n}${r}`},h9=t=>{const e=bs(t);return`${It(e.length/2)}${e}`},p9=t=>{const e=Wr(t);return vs(new Rn(e))},g9=mr(re.VH),b9=Or(re.VH),v9=t=>`${bs({string:t}).slice(2)}`,m9=t=>{const e=Wr(t);return Buffer.from(e).toString("utf8")},y9=t=>"",E9=t=>({}),_9=mr(re.TXR1),w9=Or(re.TXR1),A9=t=>`${It(t.length/2)}${t}`,x9=t=>{const e=Wr(t);return Buffer.from(e).toString("hex")},S9=t=>t?`ff${h2(t)}`:"00",R9=t=>{const e=t.consume(1);if(Buffer.from(e).toString("hex")!=="00")return p2(t)},I9=(t,e=8)=>`${It(t.length/2,e)}${t}`,O9=t=>{const e=Wr(t);return Buffer.from(e).toString("hex")},T9=t=>{const e=t.reduce((r,n)=>r+`${It(n.length/2)}${n}`,"");return`${It(e.length/2)}${e}`},P9=t=>{const e=Wr(t);return xR(new Rn(e)).map(n=>Buffer.from(n).toString("hex"))},g2={branch:z.BRANCH,contents:[z.OPERATION]},_0={pkh:z.TZ1,secret:z.SECRET},w0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,public_key:z.PUBLIC_KEY},A0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,delegate:z.DELEGATE},x0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,amount:z.ZARITH,destination:z.ADDRESS,parameters:z.PARAMETERS},S0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,balance:z.ZARITH,delegate:z.DELEGATE,script:z.SCRIPT},R0={source:z.PKH,period:z.INT32,proposal:z.PROPOSAL,ballot:z.BALLOT_STATEMENT},I0={slot:z.INT16,level:z.INT32,round:z.INT32,block_payload_hash:z.BLOCK_PAYLOAD_HASH},O0={level:z.INT32,nonce:z.RAW},T0={source:z.PKH,period:z.INT32,proposals:z.PROPOSAL_ARR},P0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,value:z.VALUE},N0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,ticket_contents:z.VALUE,ticket_ty:z.VALUE,ticket_ticketer:z.ADDRESS,ticket_amount:z.ZARITH,destination:z.ADDRESS,entrypoint:z.ENTRYPOINT},M0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,tx_rollup_origination:z.TX_ROLLUP_ORIGINATION_PARAM},L0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,rollup:z.TX_ROLLUP_ID,content:z.TX_ROLLUP_BATCH_CONTENT,burn_limit:z.BURN_LIMIT},C0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,amount:z.ZARITH,destination:z.SMART_CONTRACT_ADDRESS},B0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,pk:z.PUBLIC_KEY},k0={consensus_key:z.PKH,delegate:z.PKH,destination:z.PKH},D0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,pvm_kind:z.PVM_KIND,kernel:z.PADDED_BYTES,origination_proof:z.PADDED_BYTES,parameters_ty:z.VALUE},U0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,message:z.SMART_ROLLUP_MESSAGE},K0={source:z.PKH,fee:z.ZARITH,counter:z.ZARITH,gas_limit:z.ZARITH,storage_limit:z.ZARITH,rollup:z.SMART_ROLLUP_ADDRESS,cemented_commitment:z.SMART_ROLLUP_COMMITMENT_HASH,output_proof:z.PADDED_BYTES},N9=t=>e=>{if(!(e.kind in t)||!(e.kind in tg))throw new ji(e.kind);return tg[e.kind]+t[e.kind](e)},M9=t=>e=>{const r=e.consume(1),n=bh[r[0]];if(n===void 0)throw new pR(r[0].toString());const i=t[n](e);if(typeof i!="object")throw new f2("Decoded invalid operation");return Object.assign({kind:n},i)},Ht=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(r&&Array.isArray(o)){const a=t[o[0]],c=r[s];if(!Array.isArray(c))throw new hR(`Expected value to be Array ${JSON.stringify(c)}`);return i+c.reduce((l,f)=>l+a(f),"")}else{const a=t[o];return i+a(r[s])}},""),Ft=t=>e=>r=>Object.keys(e).reduce((i,s)=>{const o=e[s];if(Array.isArray(o)){const a=t[o[0]],c=[],l=r.length();for(;r.length()>0;)if(c.push(a(r)),l===r.length())throw new f2("Unable to decode value");return Object.assign(Object.assign({},i),{[s]:c})}else{const a=t[o],c=a(r);return typeof c<"u"?Object.assign(Object.assign({},i),{[s]:c}):Object.assign({},i)}},{}),Le={[z.SECRET]:t=>eg(t.consume(20)),[z.RAW]:t=>eg(t.consume(32)),[z.TZ1]:kR,[z.BRANCH]:DR,[z.ZARITH]:p2,[z.PUBLIC_KEY]:n9,[z.PKH]:y0,[z.DELEGATE]:QR,[z.INT32]:WR,[z.SCRIPT]:AR,[z.BALLOT_STATEMENT]:GR,[z.PROPOSAL]:d2,[z.PROPOSAL_ARR]:HR,[z.PARAMETERS]:u9,[z.ADDRESS]:s9,[z.SMART_ROLLUP_ADDRESS]:o9,[z.SMART_CONTRACT_ADDRESS]:a9,[z.SMART_ROLLUP_COMMITMENT_HASH]:c9,[z.VALUE]:p9,[z.INT16]:JR,[z.BLOCK_PAYLOAD_HASH]:b9,[z.ENTRYPOINT]:m9,[z.TX_ROLLUP_ORIGINATION_PARAM]:E9,[z.TX_ROLLUP_ID]:w9,[z.TX_ROLLUP_BATCH_CONTENT]:x9,[z.BURN_LIMIT]:R9,[z.PVM_KIND]:qR,[z.PADDED_BYTES]:O9,[z.SMART_ROLLUP_MESSAGE]:P9};Le[z.OPERATION]=M9(Le);Le[z.OP_ACTIVATE_ACCOUNT]=t=>Ft(Le)(_0)(t);Le[z.OP_DELEGATION]=t=>Ft(Le)(A0)(t);Le[z.OP_TRANSACTION]=t=>Ft(Le)(x0)(t);Le[z.OP_ORIGINATION]=t=>Ft(Le)(S0)(t);Le[z.OP_BALLOT]=t=>Ft(Le)(R0)(t);Le[z.OP_ENDORSEMENT]=t=>Ft(Le)(I0)(t);Le[z.OP_SEED_NONCE_REVELATION]=t=>Ft(Le)(O0)(t);Le[z.OP_PROPOSALS]=t=>Ft(Le)(T0)(t);Le[z.OP_REVEAL]=t=>Ft(Le)(w0)(t);Le[z.OP_REGISTER_GLOBAL_CONSTANT]=t=>Ft(Le)(P0)(t);Le[z.OP_TRANSFER_TICKET]=t=>Ft(Le)(N0)(t);Le[z.OP_TX_ROLLUP_ORIGINATION]=t=>Ft(Le)(M0)(t);Le[z.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>Ft(Le)(L0)(t);Le[z.OP_INCREASE_PAID_STORAGE]=t=>Ft(Le)(C0)(t);Le[z.OP_UPDATE_CONSENSUS_KEY]=t=>Ft(Le)(B0)(t);Le[z.OP_DRAIN_DELEGATE]=t=>Ft(Le)(k0)(t);Le[z.OP_SMART_ROLLUP_ORIGINATE]=t=>Ft(Le)(D0)(t);Le[z.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Ft(Le)(U0)(t);Le[z.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Ft(Le)(K0)(t);Le[z.MANAGER]=Ft(Le)(g2);const Ce={[z.SECRET]:t=>t,[z.RAW]:t=>t,[z.TZ1]:KR,[z.BRANCH]:UR,[z.ZARITH]:h2,[z.PUBLIC_KEY]:ZR,[z.PKH]:E0,[z.DELEGATE]:$R,[z.SCRIPT]:wR,[z.BALLOT_STATEMENT]:jR,[z.PROPOSAL]:l2,[z.PROPOSAL_ARR]:FR,[z.INT32]:zR,[z.PARAMETERS]:d9,[z.ADDRESS]:e9,[z.SMART_ROLLUP_ADDRESS]:t9,[z.SMART_CONTRACT_ADDRESS]:r9,[z.SMART_ROLLUP_COMMITMENT_HASH]:i9,[z.VALUE]:h9,[z.INT16]:XR,[z.BLOCK_PAYLOAD_HASH]:g9,[z.ENTRYPOINT]:v9,[z.TX_ROLLUP_ORIGINATION_PARAM]:y9,[z.TX_ROLLUP_ID]:_9,[z.TX_ROLLUP_BATCH_CONTENT]:A9,[z.BURN_LIMIT]:S9,[z.PVM_KIND]:VR,[z.PADDED_BYTES]:I9,[z.SMART_ROLLUP_MESSAGE]:T9};Ce[z.OPERATION]=N9(Ce);Ce[z.OP_ACTIVATE_ACCOUNT]=t=>Ht(Ce)(_0)(t);Ce[z.OP_DELEGATION]=t=>Ht(Ce)(A0)(t);Ce[z.OP_TRANSACTION]=t=>Ht(Ce)(x0)(t);Ce[z.OP_ORIGINATION]=t=>Ht(Ce)(S0)(t);Ce[z.OP_BALLOT]=t=>Ht(Ce)(R0)(t);Ce[z.OP_ENDORSEMENT]=t=>Ht(Ce)(I0)(t);Ce[z.OP_SEED_NONCE_REVELATION]=t=>Ht(Ce)(O0)(t);Ce[z.OP_PROPOSALS]=t=>Ht(Ce)(T0)(t);Ce[z.OP_REVEAL]=t=>Ht(Ce)(w0)(t);Ce[z.OP_REGISTER_GLOBAL_CONSTANT]=t=>Ht(Ce)(P0)(t);Ce[z.OP_TRANSFER_TICKET]=t=>Ht(Ce)(N0)(t);Ce[z.OP_TX_ROLLUP_ORIGINATION]=t=>Ht(Ce)(M0)(t);Ce[z.OP_TX_ROLLUP_SUBMIT_BATCH]=t=>Ht(Ce)(L0)(t);Ce[z.OP_INCREASE_PAID_STORAGE]=t=>Ht(Ce)(C0)(t);Ce[z.OP_UPDATE_CONSENSUS_KEY]=t=>Ht(Ce)(B0)(t);Ce[z.OP_DRAIN_DELEGATE]=t=>Ht(Ce)(k0)(t);Ce[z.OP_SMART_ROLLUP_ORIGINATE]=t=>Ht(Ce)(D0)(t);Ce[z.OP_SMART_ROLLUP_ADD_MESSAGES]=t=>Ht(Ce)(U0)(t);Ce[z.OP_SMART_ROLLUP_EXECUTE_OUTBOX_MESSAGE]=t=>Ht(Ce)(K0)(t);Ce[z.MANAGER]=Ht(Ce)(g2);const b2={activate_account:_0,reveal:w0,delegation:A0,transaction:x0,origination:S0,ballot:R0,endorsement:I0,seed_nonce_revelation:O0,proposals:T0,register_global_constant:P0,transfer_ticket:N0,tx_rollup_origination:M0,tx_rollup_submit_batch:L0,increase_paid_storage:C0,update_consensus_key:B0,drain_delegate:k0,smart_rollup_originate:D0,smart_rollup_add_messages:U0,smart_rollup_execute_outbox_message:K0},L9=(t,e)=>e.filter(r=>!t.includes(r)),C9=(t,e)=>t.filter(r=>r!==e),B9=t=>Object.keys(b2).includes(t),k9=t=>{const e=t.kind,r=Object.keys(t),n=C9(r,"kind"),i=Object.keys(b2[e]);return L9(n,i)};var vh;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(vh||(vh={}));const D9=vh.PtMumbai2;function U9(t,e){return{encoder:Ce[t],decoder:r=>{const n=Rn.fromHexString(r);return Le[t](n)}}}class v2{constructor(e=D9){this.protocolHash=e,this.codec=U9(z.MANAGER,this.protocolHash)}forge(e){if(YA(e.branch)!==_e.VALID)throw new fR(`The block hash ${e.branch} is invalid`);for(const n of e.contents){if(!B9(n.kind))throw new ji(n.kind);const i=k9(n);if(i.length===1){if(n.kind==="delegation"&&i[0]==="delegate")continue;if(n.kind==="origination"&&i[0]==="delegate")continue;if(n.kind==="transaction"&&i[0]==="parameters")continue;if(n.kind==="tx_rollup_submit_batch"&&i[0]==="burn_limit")continue;throw new ng(`Missing properties: ${i.join(", ").toString()}`)}else if(i.length>1)throw new ng(`Missing properties: ${i.join(", ").toString()}`)}const r=this.codec.encoder(e).toLowerCase();return Promise.resolve(r)}parse(e){return Promise.resolve(this.codec.decoder(e))}}new v2;function bn(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function J(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function Vc(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function K9(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function H9(t,e){const r=JSON.parse(t.body);if(r[0]&&r[0].kind&&r[0].msg){const n=JSON.stringify({kind:r[0].kind,id:r[0].id,msg:r[0].msg.replace(e,"")});return new Zo(`Http error response: (${t.status}) ${n}`,t.status,t.statusText,n,t.url)}else return t}class F9{constructor(e){this.context=e}inject(e){return J(this,void 0,void 0,function*(){let r;try{r=yield this.context.rpc.injectOperation(e)}catch(n){const i=". You may want to use --replace to provide adequate fee and replace it";throw n instanceof Zo&&n.message.includes(i)?H9(n,i):n}return r})}}class qc extends Error{constructor(){super("No signer has been configured. Please configure one by calling setProvider({signer}) on your TezosToolkit instance."),this.name="UnconfiguredSignerError"}}class mh{publicKey(){return J(this,void 0,void 0,function*(){throw new qc})}publicKeyHash(){return J(this,void 0,void 0,function*(){throw new qc})}secretKey(){return J(this,void 0,void 0,function*(){throw new qc})}sign(e,r){return J(this,void 0,void 0,function*(){throw new qc})}}function m2(t){return new Rt(e=>(t.on("data",r=>{e.next(r)}),t.on("error",r=>{e.error(r)}),t.on("close",()=>{e.complete()}),()=>{t.close()}))}var ms;(function(t){t[t.DELEGATION=10600]="DELEGATION",t[t.ORIGINATION=10600]="ORIGINATION",t[t.TRANSFER=10600]="TRANSFER",t[t.REVEAL=1100]="REVEAL"})(ms||(ms={}));var ys;(function(t){t[t.DELEGATION=1257]="DELEGATION",t[t.ORIGINATION=1e4]="ORIGINATION",t[t.TRANSFER=1e4]="TRANSFER",t[t.REVEAL=374]="REVEAL"})(ys||(ys={}));var Es;(function(t){t[t.DELEGATION=0]="DELEGATION",t[t.ORIGINATION=257]="ORIGINATION",t[t.TRANSFER=257]="TRANSFER",t[t.REVEAL=0]="REVEAL"})(Es||(Es={}));const j9=250;var Dt;(function(t){t.Pt24m4xi="Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd",t.PsBABY5H="PsBABY5HQTSkA4297zNHfsZNKtxULfL18y95qb3m53QJiXGmrbU",t.PsBabyM1="PsBabyM1eUXZseaJdmXFApDSBqj8YBfwELoxZHHW77EMcAbbwAS",t.PsCARTHA="PsCARTHAGazKbHtnKfLzQg3kms52kSRpgnDY982a9oYsSXRLQEb",t.PsDELPH1="PsDELPH1Kxsxt8f9eWbxQeRxkjfbxoqM52jvs5Y5fBxWWh4ifpo",t.PtEdo2Zk="PtEdo2ZkT9oKpimTah6x2embF25oss54njMuPzkJTEi5RqfdZFA",t.PsFLorena="PsFLorenaUUuikDWvMDr6fGBRG8kt3e3D3fHoXK1j1BFRxeSH4i",t.PtGRANADs="PtGRANADsDU8R9daYKAgWnQYAJ64omN1o3KMGVCykShA97vQbvV",t.PtHangz2="PtHangz2aRngywmSRGGvrcTyMbbdpWdpFKuS4uMWxg2RaH9i1qx",t.PsiThaCa="PsiThaCaT47Zboaw71QWScM8sXeMM7bbQFncK9FLqYc6EKdpjVP",t.Psithaca2="Psithaca2MLRFYargivpo7YvUr7wUDqyxrdhC5CQq78mRvimz6A",t.PtJakart2="PtJakart2xVj7pYXJBXrqHgd82rdkLey5ZeeGwDgPp9rhQUbSqY",t.PtKathman="PtKathmankSpLLDALzWw7CGD2j2MtyveTwboEYokqUCP4a1LxMg",t.PtLimaPtL="PtLimaPtLMwfNinJi9rCfDPWea8dFgTZ1MeJ9f1m2SRic6ayiwW",t.PtMumbaii="PtMumbaiiFFEGbew1rRjzSPyzRbA51Tm3RVZL5suHPxSZYDhCEc",t.PtMumbai2="PtMumbai2TmsJHNGRkD8v8YDbtao7BLUC3wjASn1inAKLFCjaH1",t.ProtoALpha="ProtoALphaALphaALphaALphaALphaALphaALphaALphaDdp3zK"})(Dt||(Dt={}));Dt.Pt24m4xi,Dt.PsBABY5H,Dt.PsBabyM1,Dt.PsCARTHA,Dt.PsDELPH1,Dt.PtEdo2Zk,Dt.PsFLorena,Dt.PtGRANADs,Dt.PtHangz2,Dt.PsiThaCa,Dt.Psithaca2,Dt.PtJakart2,Dt.PtKathman,Dt.PtLimaPtL,Dt.PtMumbai2,Dt.ProtoALpha;var og;(function(t){t.MAINNET="NetXdQprcVkpaWU",t.CARTHAGENET="NetXjD3HPJJjmcd",t.DELPHINET="NetXm8tYqnMWky1",t.EDONET="NetXSgo1ZT2DRUG",t.FLORENCENET="NetXxkAx4woPLyu",t.GRANADANET="NetXz969SFaFn8k",t.HANGZHOUNET="NetXZSsxBpMQeAT",t.ITHACANET="NetXbhmtAbMukLc",t.ITHACANET2="NetXnHfVqm9iesp",t.JAKARTANET2="NetXLH1uAxK7CCh",t.KATHMANDUNET="NetXazhm4yetmff",t.LIMANET="NetXizpkH94bocH",t.MUMBAINET="NetXQw6nWSnrJ5t",t.MUMBAINET2="NetXgbcrNtXD2yA"})(og||(og={}));class y2 extends Error{constructor(e,r,n){super(`${e} Received ${n.length} arguments while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractMethodName=e,this.sigs=r,this.args=n,this.name="Invalid parameters error"}}class G9 extends Error{constructor(e){super(`Since Babylon delegation source can no longer be a contract address ${e}. Please use the smart contract abstraction to set your delegate.`),this.source=e,this.name="Invalid delegation source error"}}class Vf extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidCodeParameter"}}class E2 extends Error{constructor(e,r){super(e),this.message=e,this.data=r,this.name="InvalidInitParameter"}}class V9 extends Error{constructor(e,r,n,i){super(`Unable to encode the parameter of the view: ${e}. Received ${n} as parameter while expecting one of the following signatures (${JSON.stringify(r)})`),this.smartContractViewName=e,this.sigs=r,this.args=n,this.originalError=i,this.name="Invalid view parameters error",this.cause=i}}class q9 extends Error{constructor(e,r,n,i){super(e),this.message=e,this.viewName=r,this.failWith=n,this.originalError=i,this.name="ViewSimulationError"}}const $9=t=>{if(z9(t.body)){const e=JSON.parse(t.body);if(Array.isArray(e)&&"with"in e[e.length-1])return e[e.length-1].with}},z9=t=>{try{JSON.parse(t)}catch{return!1}return!0};class ag extends Error{constructor(e){super(`${e} Please configure the context of the view execution in the executeView method.`),this.info=e,this.name="InvalidViewSimulationContext"}}class _2 extends Error{constructor(e){super(e),this.message=e,this.name="RevealOperationError"}}class W9 extends Error{constructor(e){super(e),this.message=e,this.name="OriginationParameterError"}}class X9 extends Error{constructor(e){super(e),this.message=e,this.name="IntegerError"}}const $o=({code:t,init:e,balance:r="0",delegate:n,storage:i,fee:s=ys.ORIGINATION,gasLimit:o=ms.ORIGINATION,storageLimit:a=Es.ORIGINATION,mutez:c=!1})=>J(void 0,void 0,void 0,function*(){if(i!==void 0&&e!==void 0)throw new W9("Storage and Init cannot be set a the same time. Please either use storage or init but not both.");if(!Array.isArray(t))throw new Vf("Wrong code parameter type, expected an array",t);let l;if(i!==void 0){const I=t.find(L=>"prim"in L&&L.prim==="storage");if(I?.args===void 0)throw new Vf("The storage section is missing from the script",t);l=new Gr(I.args[0]).Encode(i)}else if(e!==void 0&&typeof e=="object")l=e;else throw new E2("Wrong init parameter type, expected JSON Michelson",e);const f={code:t,storage:l};if(isNaN(Number(r)))throw new X9(`Unexpected Invalid Integer ${r}`);const d={kind:oe.ORIGINATION,fee:s,gas_limit:o,storage_limit:a,balance:c?r.toString():s0("tz","mutez",r).toString(),script:f};return n&&(d.delegate=n),d}),zo=({to:t,amount:e,parameter:r,fee:n=ys.TRANSFER,gasLimit:i=ms.TRANSFER,storageLimit:s=Es.TRANSFER,mutez:o=!1})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TRANSACTION,fee:n,gas_limit:i,storage_limit:s,amount:o?e.toString():s0("tz","mutez",e).toString(),destination:t,parameters:r}}),Wo=({delegate:t,source:e,fee:r=ys.DELEGATION,gasLimit:n=ms.DELEGATION,storageLimit:i=Es.DELEGATION})=>J(void 0,void 0,void 0,function*(){return{kind:oe.DELEGATION,source:e,fee:r,gas_limit:n,storage_limit:i,delegate:t}}),w2=({fee:t=ys.DELEGATION,gasLimit:e=ms.DELEGATION,storageLimit:r=Es.DELEGATION},n)=>J(void 0,void 0,void 0,function*(){return{kind:oe.DELEGATION,fee:t,gas_limit:e,storage_limit:r,delegate:n}}),_s=({fee:t=ys.REVEAL,gasLimit:e=ms.REVEAL,storageLimit:r=Es.REVEAL},n,i)=>J(void 0,void 0,void 0,function*(){return{kind:oe.REVEAL,fee:t,public_key:i,source:n,gas_limit:e,storage_limit:r}}),nc=({value:t,source:e,fee:r,gasLimit:n,storageLimit:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.REGISTER_GLOBAL_CONSTANT,value:t,fee:r,gas_limit:n,storage_limit:i,source:e}}),ic=({source:t,fee:e,gasLimit:r,storageLimit:n})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TX_ROLLUP_ORIGINATION,fee:e,gas_limit:r,storage_limit:n,source:t,tx_rollup_origination:{}}}),sc=({content:t,rollup:e,source:r,fee:n,gasLimit:i,storageLimit:s})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TX_ROLLUP_SUBMIT_BATCH,fee:n,gas_limit:i,storage_limit:s,source:r,content:t,rollup:e}}),oc=({ticketContents:t,ticketTy:e,ticketTicketer:r,ticketAmount:n,destination:i,entrypoint:s,source:o,fee:a,gasLimit:c,storageLimit:l})=>J(void 0,void 0,void 0,function*(){return{kind:oe.TRANSFER_TICKET,fee:a,gas_limit:c,storage_limit:l,source:o,ticket_contents:t,ticket_ty:e,ticket_ticketer:r,ticket_amount:n,destination:i,entrypoint:s}}),Xo=({source:t,fee:e,gasLimit:r,storageLimit:n,amount:i,destination:s})=>J(void 0,void 0,void 0,function*(){return{kind:oe.INCREASE_PAID_STORAGE,source:t,fee:e,gas_limit:r,storage_limit:n,amount:i,destination:s}}),A2=({consensus_key:t,delegate:e,destination:r})=>J(void 0,void 0,void 0,function*(){return{kind:oe.DRAIN_DELEGATE,consensus_key:t,delegate:e,destination:r}}),x2=({source:t,proposal:e,ballot:r})=>J(void 0,void 0,void 0,function*(){return{kind:oe.BALLOT,source:t,proposal:e,ballot:r}}),S2=({source:t,proposals:e})=>J(void 0,void 0,void 0,function*(){return{kind:oe.PROPOSALS,source:t,proposals:e}}),H0=({source:t,fee:e,gasLimit:r,storageLimit:n,pk:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.UPDATE_CONSENSUS_KEY,source:t,fee:e,gas_limit:r,storage_limit:n,pk:i}}),ac=({source:t,fee:e,gasLimit:r,storageLimit:n,message:i})=>J(void 0,void 0,void 0,function*(){return{kind:oe.SMART_ROLLUP_ADD_MESSAGES,source:t,fee:e,gas_limit:r,storage_limit:n,message:i}}),$c=(t,e)=>Object.assign(Object.assign({},t),{kind:e}),cg=(t,e)=>{if(Array.isArray(t)){const r=t.find(n=>n.kind===e);if(r&&J9(r,e))return r}},J9=(t,e)=>t.kind===e,yh=t=>["transaction","delegation","origination","reveal","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,qf=t=>["transaction","delegation","origination","register_global_constant","increase_paid_storage","tx_rollup_origination","tx_rollup_submit_batch","transfer_ticket","update_consensus_key","smart_rollup_add_messages"].indexOf(t.kind)!==-1,F0=t=>"metadata"in t,ua=t=>F0(t)&&"operation_result"in t.metadata,Y9=t=>F0(t)&&"internal_operation_results"in t.metadata,Q9=t=>"with"in t;class R2 extends Error{constructor(e,r){super(),this.errors=e,this.errorDetails=r,this.name="TezosOperationError";const n=e[e.length-1];this.id=n.id,this.kind=n.kind,this.message=`(${this.kind}) ${this.id}`,Q9(n)&&(n.with.string?this.message=n.with.string:n.with.int?this.message=n.with.int:this.message=JSON.stringify(n.with))}}class Z9 extends Error{constructor(e){super("Preapply returned an unexpected result"),this.result=e,this.name="TezosPreapplyFailureError"}}const ri=t=>{const e=Array.isArray(t)?t:[t],r=[];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].contents.length;i++){const s=e[n].contents[i];ua(s)&&(r.push(Object.assign({fee:s.fee},s.metadata.operation_result)),Array.isArray(s.metadata.internal_operation_results)&&s.metadata.internal_operation_results.forEach(o=>r.push(o.result)))}return r},Jo=(t,e="failed")=>{const r=Array.isArray(t)?t:[t];let n=[];for(let i=0;i<r.length;i++)for(let s=0;s<r[i].contents.length;s++){const o=r[i].contents[s];if(F0(o)&&(ua(o)&&o.metadata.operation_result.status===e&&(n=n.concat(o.metadata.operation_result.errors||[])),Y9(o)&&Array.isArray(o.metadata.internal_operation_results)))for(const a of o.metadata.internal_operation_results)"result"in a&&a.result.status===e&&(n=n.concat(a.result.errors||[]))}return n};class e7 extends Error{constructor(e){super(e),this.message=e,this.name="OriginationOperationError"}}class vd extends Error{constructor(e){super(e),this.message=e,this.name="InvalidEstimateValueError"}}class I2 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidConfirmationCountError"}}class t7 extends Error{constructor(e){super(e),this.message=e,this.name="ConfirmationUndefinedError"}}class r7 extends Error{constructor(e){super(e),this.message=e,this.name="InvalidFilterExpressionError"}}class Hs extends Error{constructor(e){super(e),this.message=e,this.name="RPCResponseError"}}class wr{constructor(e,r,n,i){if(this.hash=e,this.raw=r,this.results=n,this.context=i,this._pollingConfig$=new tc(1),this.currentHead$=this._pollingConfig$.pipe(Yn(s=>new Ku(s).pipe(km(s.timeout*1e3,u0(new Error("Confirmation polling timed out"))))),Yn(()=>Mm(()=>m2(this.context.stream.subscribeBlock("head"))).pipe(Yn(s=>{var o,a;const c=(a=(o=this.lastHead)===null||o===void 0?void 0:o.header.level)!==null&&a!==void 0?a:s.header.level-1;return d0(c+1,s.header.level-c-1).pipe(Rc(l=>this.context.readProvider.getBlock(l)),Cm(s))}),Uf(s=>this.lastHead=s))),L1({refCount:!0})),this.confirmed$=this.currentHead$.pipe(Gs(s=>{for(let o=3;o>=0;o--)s.operations[o].forEach(a=>{a.hash===this.hash&&(this._foundAt=s.header.level)});if(s.header.level-this._foundAt>=0)return this._foundAt}),Df(s=>s!==void 0),Pi(),L1()),this._foundAt=Number.POSITIVE_INFINITY,mm(this.hash)!==_e.VALID)throw new pm(this.hash);this.confirmed$.pipe(Pi(),h0(()=>ca(Sm))).subscribe()}get includedInBlock(){return this._foundAt}get revealOperation(){return Array.isArray(this.results)&&this.results.find(e=>e.kind==="reveal")}get revealStatus(){return this.revealOperation?this.revealOperation.metadata.operation_result.status:"unknown"}get status(){return this.results.map(e=>ua(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}confirmation(e,r){return J(this,void 0,void 0,function*(){if(typeof e<"u"&&e<1)throw new I2("Confirmation count must be at least 1");const{defaultConfirmationCount:n,confirmationPollingTimeoutSecond:i}=this.context.config;this._pollingConfig$.next({timeout:r||i});const s=e!==void 0?e:n;return new Promise((o,a)=>{this.confirmed$.pipe(Yn(()=>this.currentHead$),Df(c=>c.header.level-this._foundAt>=s-1),Pi()).subscribe(c=>{o(this._foundAt+(s-1))},a)})})}}class n7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}getOriginatedContractAddresses(){const e=this.results.filter(n=>n.kind==="origination");let r=[];for(const n of e)n.metadata.operation_result.originated_contracts&&(r=[...r,...n.metadata.operation_result.originated_contracts]);return r}get status(){return this.results.filter(e=>O2.indexOf(e.kind)!==-1).map(e=>ua(e)?e.metadata.operation_result.status:"unknown")[0]||"unknown"}get fee(){return this.sumProp(this.params,"fee")}get gasLimit(){return this.sumProp(this.params,"gas_limit")}get storageLimit(){return this.sumProp(this.params,"storage_limit")}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ri({contents:this.results}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ri({contents:this.results}),"paid_storage_size_diff"))}get errors(){return Jo({contents:this.results})}}class Vu{constructor(e){this.context=e}get rpc(){return this.context.rpc}get signer(){return this.context.signer}isRevealOpNeeded(e,r){return J(this,void 0,void 0,function*(){return!(!(yield this.isAccountRevealRequired(r))||!this.isRevealRequiredForOpType(e))})}isAccountRevealRequired(e){return J(this,void 0,void 0,function*(){return!(yield this.context.readProvider.isAccountRevealed(e,"head"))})}isRevealRequiredForOpType(e){let r=!1;for(const n of e)qf(n)&&(r=!0);return r}prepareOperation({operation:e,source:r},n){return J(this,void 0,void 0,function*(){const i={};let s=[];const o=this.context.readProvider.getBlockHash("head~2"),a=this.context.readProvider.getNextProtocol("head");Array.isArray(e)?s=[...e]:s=[e];const c=n||(yield this.signer.publicKeyHash());let l=Promise.resolve(void 0),f=Promise.resolve(void 0);s.find(U=>J(this,void 0,void 0,function*(){if(U.kind==="ballot"||U.kind==="proposals")try{f=this.rpc.getCurrentPeriod()}catch(K){throw new Hs(`Failed to get the current voting period index: ${JSON.stringify(K)}`)}}));for(let U=0;U<s.length;U++)if(qf(s[U])||s[U].kind==="reveal"){l=this.context.readProvider.getCounter(c,"head");break}const[d,I,P,L]=yield Promise.all([o,a,l,f]),H=parseInt(P||"0",10);(!i[c]||i[c]<H)&&(i[c]=H);const G=U=>({counter:`${++i[c]}`,fee:typeof U.fee>"u"?"0":`${U.fee}`,gas_limit:typeof U.gas_limit>"u"?"0":`${U.gas_limit}`,storage_limit:typeof U.storage_limit>"u"?"0":`${U.storage_limit}`}),V=U=>({source:typeof U.source>"u"?r||c:U.source}),q=(U=>U.map(K=>{switch(K.kind){case oe.ACTIVATION:case oe.DRAIN_DELEGATE:return Object.assign({},K);case oe.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},K),{balance:typeof K.balance<"u"?`${K.balance}`:"0"}),V(K)),G(K));case oe.TRANSACTION:{const j=Object.assign(Object.assign(Object.assign(Object.assign({},K),{amount:typeof K.amount<"u"?`${K.amount}`:"0"}),V(K)),G(K));if(j.source.toLowerCase().startsWith("kt1"))throw new n0(`KT1 addresses are not supported as source since ${Dt.PsBabyM1}`);return j}case oe.REVEAL:case oe.DELEGATION:case oe.REGISTER_GLOBAL_CONSTANT:case oe.TX_ROLLUP_ORIGINATION:case oe.TX_ROLLUP_SUBMIT_BATCH:case oe.UPDATE_CONSENSUS_KEY:case oe.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},K),V(K)),G(K));case oe.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},K),{ticket_amount:`${K.ticket_amount}`}),V(K)),G(K));case oe.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},K),{amount:`${K.amount}`}),V(K)),G(K));case oe.BALLOT:if(L===void 0)throw new Hs("Failed to get the current voting period index");return Object.assign(Object.assign({},K),{period:L?.voting_period.index});case oe.PROPOSALS:if(L===void 0)throw new Hs("Failed to get the current voting period index");return Object.assign(Object.assign({},K),{period:L?.voting_period.index});default:throw new ji(K.kind)}}))(s);return{opOb:{branch:d,contents:q,protocol:I},counter:H}})}forge({opOb:{branch:e,contents:r,protocol:n},counter:i}){return J(this,void 0,void 0,function*(){return{opbytes:yield this.context.forger.forge({branch:e,contents:r}),opOb:{branch:e,contents:r,protocol:n},counter:i}})}simulate(e){return J(this,void 0,void 0,function*(){return{opResponse:yield this.rpc.runOperation(e),op:e,context:this.context.clone()}})}estimate(e,r){var{fee:n,gasLimit:i,storageLimit:s}=e,o=bn(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){let a=n,c=i,l=s;if(a&&a%1!==0)throw new vd(`Fee value must not be a decimal: ${a}`);if(c&&c%1!==0)throw new vd(`Gas Limit value must not be a decimal: ${c}`);if(l&&l%1!==0)throw new vd(`Storage Limit value must not be a decimal: ${l}`);if(n===void 0||i===void 0||s===void 0){const f=yield r(Object.assign({fee:n,gasLimit:i,storageLimit:s},o));a===void 0&&(a=f.suggestedFeeMutez),c===void 0&&(c=f.gasLimit),l===void 0&&(l=f.storageLimit)}return{fee:a,gasLimit:c,storageLimit:l}})}signAndInject(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.sign(e.opbytes,new Uint8Array([3]));e.opbytes=r.sbytes,e.opOb.signature=r.prefixSig;const n=[],i=yield this.rpc.preapplyOperations([e.opOb]);if(!Array.isArray(i))throw new Z9(i);for(let o=0;o<i.length;o++)for(let a=0;a<i[o].contents.length;a++)n.push(i[o].contents[a]);const s=Jo(i);if(s.length)throw new R2(s,"Error occurred during validation simulation of operation");return{hash:yield this.context.injector.inject(e.opbytes),forgedBytes:e,opResponse:n,context:this.context.clone()}})}}const O2=[oe.ACTIVATION,oe.ORIGINATION,oe.TRANSACTION,oe.DELEGATION];class j0 extends Vu{constructor(e,r){super(e),this.estimator=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:oe.TRANSACTION},e)),this}withTransferTicket(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination,"param destination");return this.operations.push(Object.assign({kind:oe.TRANSFER_TICKET},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:oe.DELEGATION},e)),this}withActivation({pkh:e,secret:r}){if(i0(e)!==_e.VALID)throw new r0(e);return this.operations.push({kind:oe.ACTIVATION,pkh:e,secret:r}),this}withOrigination(e){return this.operations.push(Object.assign({kind:oe.ORIGINATION},e)),this}withRegisterGlobalConstant(e){return this.operations.push(Object.assign({kind:oe.REGISTER_GLOBAL_CONSTANT},e)),this}withIncreasePaidStorage(e){return this.operations.push(Object.assign({kind:oe.INCREASE_PAID_STORAGE},e)),this}withTxRollupOrigination(e){return this.operations.push(Object.assign({kind:oe.TX_ROLLUP_ORIGINATION},e)),this}withSmartRollupAddMessages(e){return this.operations.push(Object.assign({kind:oe.SMART_ROLLUP_ADD_MESSAGES},e)),this}withTxRollupSubmitBatch(e){return this.operations.push(Object.assign({kind:oe.TX_ROLLUP_SUBMIT_BATCH},e)),this}getRPCOp(e){return J(this,void 0,void 0,function*(){switch(e.kind){case oe.TRANSACTION:return zo(Object.assign({},e));case oe.ORIGINATION:return $o(yield this.context.parser.prepareCodeOrigination(Object.assign({},e)));case oe.DELEGATION:return Wo(Object.assign({},e));case oe.ACTIVATION:return Object.assign({},e);case oe.REGISTER_GLOBAL_CONSTANT:return nc(Object.assign({},e));case oe.INCREASE_PAID_STORAGE:return Xo(Object.assign({},e));case oe.TX_ROLLUP_ORIGINATION:return ic(Object.assign({},e));case oe.TX_ROLLUP_SUBMIT_BATCH:return sc(Object.assign({},e));case oe.TRANSFER_TICKET:return oc(Object.assign({},e));case oe.SMART_ROLLUP_ADD_MESSAGES:return ac(Object.assign({},e));default:throw new ji(e.kind)}})}with(e){for(const r of e)switch(r.kind){case oe.TRANSACTION:this.withTransfer(r);break;case oe.ORIGINATION:this.withOrigination(r);break;case oe.DELEGATION:this.withDelegation(r);break;case oe.ACTIVATION:this.withActivation(r);break;case oe.REGISTER_GLOBAL_CONSTANT:this.withRegisterGlobalConstant(r);break;case oe.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;case oe.TX_ROLLUP_ORIGINATION:this.withTxRollupOrigination(r);break;case oe.TX_ROLLUP_SUBMIT_BATCH:this.withTxRollupSubmitBatch(r);break;case oe.TRANSFER_TICKET:this.withTransferTicket(r);break;case oe.SMART_ROLLUP_ADD_MESSAGES:this.withSmartRollupAddMessages(r);break;default:throw new ji(r.kind)}return this}toPrepare(){return J(this,void 0,void 0,function*(){const e=yield this.signer.publicKeyHash(),r=yield this.signer.publicKey(),n=yield this.estimator.batch(this.operations),i=yield this.isRevealOpNeeded(this.operations,e);let s=i?1:0;const o=[];for(const a of this.operations){if(yh(a)){const c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[s]}));o.push(yield this.getRPCOp(Object.assign(Object.assign({},a),c)))}else o.push(Object.assign({},a));s++}if(i){const a={kind:oe.REVEAL},c=yield this.estimate(a,()=>J(this,void 0,void 0,function*(){return n[0]}));o.unshift(yield _s(Object.assign({},c),e,r))}return o})}send(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.signer.publicKey(),i=yield this.estimator.batch(this.operations),s=yield this.isRevealOpNeeded(this.operations,r);let o=s?1:0;const a=[];for(const H of this.operations){if(yh(H)){const G=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[o]}));a.push(yield this.getRPCOp(Object.assign(Object.assign({},H),G)))}else a.push(Object.assign({},H));o++}if(s){const H={kind:oe.REVEAL},G=yield this.estimate(H,()=>J(this,void 0,void 0,function*(){return i[0]}));a.unshift(yield _s(Object.assign({},G),r,n))}const c=e&&e.source||r,l=yield this.prepareOperation({operation:a,source:c}),f=yield this.forge(l),{hash:d,context:I,forgedBytes:P,opResponse:L}=yield this.signAndInject(f);return new n7(d,a,c,P,L,I)})}}class i7{constructor(e,r){this.context=e,this.estimator=r}batch(e){const r=new j0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}const s7=(t,{ALLOCATION_BURN:e,ORIGINATION_BURN:r}={ALLOCATION_BURN:257,ORIGINATION_BURN:257})=>{be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP});const n=ri({contents:t});let i=new be(0),s=new be(0),o=new be(0),a=new be(0),c=new be(0),l=new be(0);return n.forEach(f=>{o=o.plus(f.fee||0),a=a.plus(Array.isArray(f.originated_contracts)?f.originated_contracts.length*r:0),c=c.plus("allocated_destination_contract"in f?e:0),i=i.plus(f.consumed_milligas||0),l=l.plus("paid_storage_size_diff"in f&&Number(f.paid_storage_size_diff)||0)}),s=s.plus(c).plus(a).plus(l),{totalFee:o,totalMilliGas:i,totalGas:i.dividedBy(1e3),totalStorage:s,totalAllocationBurn:c,totalOriginationBurn:a,totalPaidStorageDiff:l,totalStorageBurn:new be(s.multipliedBy(j9))}},o7=60;class la{constructor(e,r,n){if(this.opHash=e,this.context=r,this._newHead$=n,this._operationResult=new tc(1),this._includedInBlock=new tc(1),this._included=!1,this.newHead$=this._newHead$.pipe(Yn(i=>{var s,o;const a=(o=(s=this.lastHead)===null||s===void 0?void 0:s.header.level)!==null&&o!==void 0?o:i.header.level-1;return d0(a+1,i.header.level-a-1).pipe(Rc(c=>this.context.readProvider.getBlock(c)),Cm(i))}),Uf(i=>this.lastHead=i),lh(1),Za()),this.confirmed$=this.newHead$.pipe(Gs(i=>{for(const s of i.operations)for(const o of s)if(o.hash===this.opHash)return this._included=!0,this._includedInBlock.next(i),this._operationResult.next(o.contents),i}),Df(i=>typeof i<"u"),Pi(),lh(1),Za()),mm(this.opHash)!==_e.VALID)throw new pm(this.opHash);this.confirmed$.pipe(Pi(),h0(()=>ca(void 0))).subscribe()}operationResults(){return J(this,void 0,void 0,function*(){return this._operationResult.pipe(Pi()).toPromise()})}receipt(){return J(this,void 0,void 0,function*(){return s7(yield this.operationResults())})}getCurrentConfirmation(){return J(this,void 0,void 0,function*(){return this._included?T1([this._includedInBlock,no(this.context.readProvider.getBlock("head"))]).pipe(Gs(([e,r])=>r.header.level-e.header.level+1),Pi()).toPromise():0})}isInCurrentBranch(e="head"){return J(this,void 0,void 0,function*(){if(!this._included)return!0;const r=yield this.context.readProvider.getBlockLevel(e),n=yield this._includedInBlock.pipe(Pi()).toPromise(),i=r-n.header.level;if(i<=0)return!0;const s=Math.min(n.header.level+i,n.header.level+o7);return new Set(yield this.context.readProvider.getLiveBlocks(s)).has(n.hash)})}confirmationObservable(e){if(typeof e<"u"&&e<1)throw new I2("Confirmation count must be at least 1");const{defaultConfirmationCount:r}=this.context.config,n=e!==void 0?e:r;if(n===void 0)throw new t7("Default confirmation count can not be undefined!");return T1([this._includedInBlock,this.newHead$]).pipe(Lm(([,i],[,s])=>i.hash===s.hash),Gs(([i,s])=>({block:s,expectedConfirmation:n,currentConfirmation:s.header.level-i.header.level+1,completed:s.header.level-i.header.level>=n-1,isInCurrentBranch:()=>this.isInCurrentBranch(s.hash)})),Px(({completed:i})=>!i,!0))}confirmation(e){return this.confirmationObservable(e).toPromise()}}class a7 extends la{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r,this.getOriginatedContractAddresses=()=>J(this,void 0,void 0,function*(){const s=(yield this.operationResults()).filter(a=>a.kind==="origination");let o=[];for(const a of s)a.metadata.operation_result.originated_contracts&&(o=[...o,...a.metadata.operation_result.originated_contracts]);return o})}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}status(){return J(this,void 0,void 0,function*(){return this._included?(yield this.operationResults()).filter(r=>O2.indexOf(r.kind)!==-1).map(r=>ua(r)?r.metadata.operation_result.status:"unknown")[0]||"unknown":"pending"})}}class c7 extends la{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}delegationOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.DELEGATION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.delegationOperation();return e?e.metadata.operation_result.status:"unknown"})}}class f7 extends la{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}increasePaidStorageOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.INCREASE_PAID_STORAGE)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.increasePaidStorageOperation();return e?e.metadata.operation_result.status:"unknown"})}}class u7 extends la{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}originationOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return cg(e,oe.ORIGINATION)})}revealOperation(){return J(this,void 0,void 0,function*(){const e=yield this.operationResults();return cg(e,oe.REVEAL)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.originationOperation();return e?e.metadata.operation_result.status:"unknown"})}contract(){return J(this,void 0,void 0,function*(){const e=yield this.originationOperation(),r=(e?.metadata.operation_result.originated_contracts||[])[0];return this.context.wallet.at(r)})}}class l7 extends la{constructor(e,r,n){super(e,r,n),this.opHash=e,this.context=r}revealOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.REVEAL)})}transactionOperation(){return J(this,void 0,void 0,function*(){return(yield this.operationResults()).find(r=>r.kind===oe.TRANSACTION)})}status(){return J(this,void 0,void 0,function*(){if(!this._included)return"pending";const e=yield this.transactionOperation();return e?e.metadata.operation_result.status:"unknown"})}}function d7(t){return function(r){return new Ku(null).pipe(km(t,u0(new Error("Confirmation polling timed out"))),Fu(()=>r))}}const h7=(t,e,r)=>t.pipe(d7(e.config.confirmationPollingTimeoutSecond*1e3),lh(1),Za());class p7{constructor(e){this.context=e,this.sharedHeadObs=Mm(()=>m2(this.context.stream.subscribeBlock("head")))}createNewHeadObservable(){return J(this,void 0,void 0,function*(){return h7(this.sharedHeadObs,this.context)})}createPastBlockWalker(e,r=1){return no(this.context.readProvider.getBlock(e)).pipe(Yn(n=>r===1?ca(n):d0(n.header.level,r-1).pipe(xx(n),Rc(i=>J(this,void 0,void 0,function*(){return this.context.readProvider.getBlock(typeof i=="number"?i:i.header.level)})))))}createHeadObservableFromConfig({blockIdentifier:e}){return J(this,void 0,void 0,function*(){const r=[];return e&&r.push(this.createPastBlockWalker(e)),r.push(yield this.createNewHeadObservable()),kf(...r)})}createOperation(e,r={}){return J(this,void 0,void 0,function*(){return new la(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createBatchOperation(e,r={}){return J(this,void 0,void 0,function*(){return new a7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createTransactionOperation(e,r={}){return J(this,void 0,void 0,function*(){return new l7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createDelegationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new c7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createOriginationOperation(e,r={}){return J(this,void 0,void 0,function*(){return new u7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}createIncreasePaidStorageOperation(e,r={}){return J(this,void 0,void 0,function*(){return new f7(e,this.context.clone(),yield this.createHeadObservableFromConfig(r))})}}class g7 extends Vu{constructor(e){super(e)}getBalance(e){return J(this,void 0,void 0,function*(){if(ct(e)!==_e.VALID)throw new ft(e);return this.context.readProvider.getBalance(e,"head")})}getDelegate(e){return J(this,void 0,void 0,function*(){if(ct(e)!==_e.VALID)throw new ft(e);return this.context.readProvider.getDelegate(e,"head")})}activate(e,r){return J(this,void 0,void 0,function*(){if(i0(e)!==_e.VALID)throw new r0(e);const n={kind:oe.ACTIVATION,pkh:e,secret:r},i=yield this.prepareOperation({operation:[n],source:e}),s=yield this.forge(i),o=`${s.opbytes}00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000`;return new wr(yield this.rpc.injectOperation(o),Object.assign(Object.assign({},s),{opbytes:o}),[],this.context.clone())})}}const zc=100,b7=1,v7=.1,fg=100;class dr{constructor(e,r,n,i,s=zc){this._milligasLimit=e,this._storageLimit=r,this.opSize=n,this.minimalFeePerStorageByteMutez=i,this.baseFeeMutez=s}get burnFeeMutez(){return this.roundUp(Number(this.storageLimit)*Number(this.minimalFeePerStorageByteMutez))}get storageLimit(){const e=Math.max(Number(this._storageLimit),0);return e>0?e:0}get gasLimit(){return this.roundUp(Number(this._milligasLimit)/1e3+fg)}get operationFeeMutez(){return(Number(this._milligasLimit)/1e3+fg)*v7+Number(this.opSize)*b7}roundUp(e){return Math.ceil(Number(e))}get minimalFeeMutez(){return this.roundUp(zc+this.operationFeeMutez)}get suggestedFeeMutez(){return this.roundUp(this.operationFeeMutez+zc*2)}get usingBaseFeeMutez(){return Math.max(Number(this.baseFeeMutez),zc)+this.roundUp(this.operationFeeMutez)}get totalCost(){return this.minimalFeeMutez+this.burnFeeMutez}get consumedMilligas(){return Number(this._milligasLimit)}static createEstimateInstanceFromProperties(e){let r=0,n=0,i=0,s=0,o;return e.forEach(a=>{r+=a.milligasLimit,n+=a.storageLimit,i+=a.opSize,s=Math.max(a.minimalFeePerStorageByteMutez,s),a.baseFeeMutez&&(o=o?o+a.baseFeeMutez:a.baseFeeMutez)}),new dr(r,n,i,s,o)}static createArrayEstimateInstancesFromProperties(e){return e.map(r=>new dr(r.milligasLimit,r.storageLimit,r.opSize,r.minimalFeePerStorageByteMutez,r.baseFeeMutez))}}class ug extends Error{constructor(){super("Unable to estimate the reveal operation, the public key is unknown"),this.name="Reveal Estimate Error"}}const Wt=(t,e)=>({fee:typeof t.fee>"u"?e.fee:t.fee,gasLimit:typeof t.gasLimit>"u"?e.gasLimit:t.gasLimit,storageLimit:typeof t.storageLimit>"u"?e.storageLimit:t.storageLimit}),m7="edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg";class y7 extends Vu{constructor(){super(...arguments),this.ALLOCATION_STORAGE=257,this.ORIGINATION_STORAGE=257,this.OP_SIZE_REVEAL=128}getKeys(){return J(this,void 0,void 0,function*(){const e=this.context.isAnySignerConfigured();return{publicKeyHash:e?yield this.signer.publicKeyHash():yield this.context.walletProvider.getPKH(),publicKey:e?yield this.signer.publicKey():void 0}})}getAccountLimits(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.context.readProvider.getBalance(e,"head"),{hard_gas_limit_per_operation:s,hard_gas_limit_per_block:o,hard_storage_limit_per_operation:a,cost_per_byte:c}=r;return{fee:0,gasLimit:n?Math.floor(this.ajustGasForBatchOperation(o,s,n).toNumber()):s.toNumber(),storageLimit:Math.floor(be.min(i.dividedBy(c),a).toNumber())}})}ajustGasForBatchOperation(e,r,n){return be.min(r,e.div(n+1))}getEstimationPropertiesFromOperationContent(e,r,n,i){const s=ri({contents:[e]});let o=0,a=0;return s.forEach(c=>{a+="originated_contracts"in c&&typeof c.originated_contracts<"u"?c.originated_contracts.length*this.ORIGINATION_STORAGE:0,a+="allocated_destination_contract"in c?this.ALLOCATION_STORAGE:0,o+=Number(c.consumed_milligas)||0,a+="paid_storage_size_diff"in c&&Number(c.paid_storage_size_diff)||0,a+="storage_size"in c&&"global_address"in c&&Number(c.storage_size)||0,a+="originated_rollup"in c?i:0}),yh(e)?{milligasLimit:o||0,storageLimit:Number(a||0),opSize:r,minimalFeePerStorageByteMutez:n.toNumber()}:{milligasLimit:0,storageLimit:0,opSize:r,minimalFeePerStorageByteMutez:n.toNumber(),baseFeeMutez:0}}prepareEstimate(e,r,n){return J(this,void 0,void 0,function*(){const i=yield this.prepareOperation(e,n),{opbytes:s,opOb:{branch:o,contents:a}}=yield this.forge(i),c={operation:{branch:o,contents:a,signature:m7},chain_id:yield this.context.readProvider.getChainId()},{opResponse:l}=yield this.simulate(c),{cost_per_byte:f,tx_rollup_origination_size:d}=r,I=[...Jo(l,"backtracked"),...Jo(l)];if(I.length)throw new R2(I,"Error occurred during estimation");let P=1;return Array.isArray(e.operation)&&e.operation.length>1&&(P=l.contents[0].kind==="reveal"?e.operation.length-1:e.operation.length),l.contents.map(L=>this.getEstimationPropertiesFromOperationContent(L,L.kind==="reveal"?this.OP_SIZE_REVEAL/2:s.length/2/P,f,d??0))})}originate(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const{publicKeyHash:o}=yield this.getKeys(),a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield $o(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c)))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}transfer(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(ct(s.to)!==_e.VALID)throw new ft(s.to);if(s.source&&ct(s.source)!==_e.VALID)throw new ft(s.source);const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield zo(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}transferTicket(e){var r,{fee:n,storageLimit:i,gasLimit:s}=e,o=bn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){if(ct(o.destination)!==_e.VALID)throw new ft(o.destination,"param destination");if(o.source&&ct(o.source)!==_e.VALID)throw new ft((r=o.source)!==null&&r!==void 0?r:"","param source");const a=(yield this.getKeys()).publicKeyHash,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield oc(Object.assign(Object.assign({},o),Wt({fee:n,storageLimit:i,gasLimit:s},l))),d=yield this.isRevealOpNeeded([f],a),I=d?yield this.addRevealOp([f],a):f,P=yield this.prepareEstimate({operation:I,source:a},c,a);return d&&P.shift(),dr.createEstimateInstanceFromProperties(P)})}setDelegate(e){var{fee:r,gasLimit:n,storageLimit:i}=e,s=bn(e,["fee","gasLimit","storageLimit"]);return J(this,void 0,void 0,function*(){if(s.source&&ct(s.source)!==_e.VALID)throw new ft(s.source);if(s.delegate&&ct(s.delegate)!==_e.VALID)throw new ft(s.delegate);const o=(yield this.getKeys()).publicKeyHash,a=s.source||o,c=yield this.context.readProvider.getProtocolConstants("head"),l=yield this.getAccountLimits(a,c),f=yield Wo(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:i,gasLimit:n},l))),d=yield this.isRevealOpNeeded([f],o),I=d?yield this.addRevealOp([f],o):f,P=yield this.prepareEstimate({operation:I,source:o},c,o);return d&&P.shift(),dr.createEstimateInstanceFromProperties(P)})}batch(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r}=yield this.getKeys();let n=[];const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i,e.length);for(const c of e)switch(c.kind){case oe.TRANSACTION:n.push(yield zo(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.ORIGINATION:n.push(yield $o(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},c),Wt(c,s)))));break;case oe.DELEGATION:n.push(yield Wo(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.ACTIVATION:n.push(Object.assign(Object.assign({},c),s));break;case oe.REGISTER_GLOBAL_CONSTANT:n.push(yield nc(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.TX_ROLLUP_ORIGINATION:n.push(yield ic(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.TX_ROLLUP_SUBMIT_BATCH:n.push(yield sc(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.TRANSFER_TICKET:n.push(yield oc(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.INCREASE_PAID_STORAGE:n.push(yield Xo(Object.assign(Object.assign({},c),Wt(c,s))));break;case oe.SMART_ROLLUP_ADD_MESSAGES:n.push(yield ac(Object.assign(Object.assign({},c),Wt(c,s))));break;default:throw new ji(e.kind)}n=(yield this.isRevealOpNeeded(n,r))?yield this.addRevealOp(n,r):n;const a=yield this.prepareEstimate({operation:n,source:r},i,r);return dr.createArrayEstimateInstancesFromProperties(a)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=(yield this.getKeys()).publicKeyHash,n=yield this.context.readProvider.getProtocolConstants("head"),i=yield this.getAccountLimits(r,n),s=yield w2(Object.assign(Object.assign({},e),i),r),o=yield this.isRevealOpNeeded([s],r),a=o?yield this.addRevealOp([s],r):s,c=yield this.prepareEstimate({operation:a,source:r},n,r);return o&&c.shift(),dr.createEstimateInstanceFromProperties(c)})}reveal(e){return J(this,void 0,void 0,function*(){const{publicKeyHash:r,publicKey:n}=yield this.getKeys();if(!n)throw new ug;if(yield this.isAccountRevealRequired(r)){const i=yield this.context.readProvider.getProtocolConstants("head"),s=yield this.getAccountLimits(r,i),o=yield _s(Object.assign(Object.assign({},e),s),r,n),a=yield this.prepareEstimate({operation:o,source:r},i,r);return dr.createEstimateInstanceFromProperties(a)}})}registerGlobalConstant(e){var{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]);return J(this,void 0,void 0,function*(){const o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield nc(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield Xo(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){e=e||{};const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield ic(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield sc(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield H0(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}smartRollupAddMessages(e){return J(this,void 0,void 0,function*(){const{fee:r,storageLimit:n,gasLimit:i}=e,s=bn(e,["fee","storageLimit","gasLimit"]),o=(yield this.getKeys()).publicKeyHash,a=yield this.context.readProvider.getProtocolConstants("head"),c=yield this.getAccountLimits(o,a),l=yield ac(Object.assign(Object.assign({},s),Wt({fee:r,storageLimit:n,gasLimit:i},c))),f=yield this.isRevealOpNeeded([l],o),d=f?yield this.addRevealOp([l],o):l,I=yield this.prepareEstimate({operation:d,source:o},a,o);return f&&I.shift(),dr.createEstimateInstanceFromProperties(I)})}addRevealOp(e,r){return J(this,void 0,void 0,function*(){const{publicKey:n}=yield this.getKeys();if(!n)throw new ug;return e.unshift(yield _s(Object.assign({fee:ys.REVEAL,gasLimit:ms.REVEAL,storageLimit:Es.REVEAL}),r,yield this.signer.publicKey())),e})}}class lg extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="delegation"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get delegate(){return this.params.delegate}get isRegisterOperation(){return this.delegate===this.source}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class E7 extends wr{constructor(e,r,n,i,s,o){super(e,n,i,s),this.params=r,this.contractProvider=o;const a=this.operationResults&&this.operationResults.originated_contracts;Array.isArray(a)&&(this.contractAddress=a[0])}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="origination"),r=e&&ua(e)&&e.metadata.operation_result;return r||void 0}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get storageDiff(){const e=this.operationResults&&this.operationResults.paid_storage_size_diff;return e||void 0}get storageSize(){const e=this.operationResults&&this.operationResults.storage_size;return e||void 0}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}contract(e,r){return J(this,void 0,void 0,function*(){if(!this.contractAddress)throw new e7("No contract was originated in this operation");return yield this.confirmation(e,r),this.contractProvider.at(this.contractAddress)})}}class _7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.globalConstantHash=this.operationResults&&this.operationResults.global_address}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="register_global_constant"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get registeredExpression(){return this.params.value}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class w7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="reveal");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get publicKey(){return this.params.public_key}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ri({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ri({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(ri({contents:this.operationResults}),"storage_size"))}get errors(){return Jo({contents:this.operationResults})}}class A7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(r=>r.kind==="transaction");return e?[e]:[]}get status(){const r=this.operationResults[0];return r?r.metadata.operation_result.status:"unknown"}get amount(){return new be(this.params.amount)}get destination(){return this.params.destination}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}sumProp(e,r){return e.reduce((n,i)=>r in i?Number(i[r])+n:n,0)}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),new be(this.consumedMilliGas).dividedBy(1e3).toString()}get consumedMilliGas(){return String(this.sumProp(ri({contents:this.operationResults}),"consumed_milligas"))}get storageDiff(){return String(this.sumProp(ri({contents:this.operationResults}),"paid_storage_size_diff"))}get storageSize(){return String(this.sumProp(ri({contents:this.operationResults}),"storage_size"))}get errors(){return Jo({contents:this.operationResults})}}class x7{constructor(e,r,n,i,s,o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}validateArgs(e,r,n){const i=r.ExtractSignatures();if(!i.find(s=>s.length===e.length))throw new y2(n,i,e)}get schema(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}getSignature(){if(this.isAnonymous){const e=this.parameterSchema.ExtractSignatures().find(r=>r[0]===this.name);if(e)return e.shift(),e}else{const e=this.parameterSchema.ExtractSignatures();return e.length==1?e[0]:e}}send(e={}){return this.provider instanceof qu?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Ao,value:this.isAnonymous?this.parameterSchema.Encode(this.name,...this.args):this.parameterSchema.Encode(...this.args)}}}}class S7{constructor(e,r){this.id=e,this.provider=r}getSaplingDiff(e){return J(this,void 0,void 0,function*(){return this.provider.getSaplingDiffByID(this.id.toString(),e)})}getId(){return this.id.toString()}}class R7{constructor(e,r){this.walletProvider=e,this.context=r,this.operations=[]}withTransfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.operations.push(Object.assign({kind:oe.TRANSACTION},e)),this}withContractCall(e,r={}){return this.withTransfer(e.toTransferParams(r))}withDelegation(e){if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.operations.push(Object.assign({kind:oe.DELEGATION},e)),this}withOrigination(e){return this.operations.push(Object.assign({kind:oe.ORIGINATION},e)),this}withIncreasePaidStorage(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination);return this.operations.push(Object.assign({kind:oe.INCREASE_PAID_STORAGE},e)),this}mapOperation(e){return J(this,void 0,void 0,function*(){switch(e.kind){case oe.TRANSACTION:return this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case oe.ORIGINATION:return this.walletProvider.mapOriginateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return this.context.parser.prepareCodeOrigination(Object.assign({},e))}));case oe.DELEGATION:return this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e}));case oe.INCREASE_PAID_STORAGE:return this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e}));default:throw new ji(e.kind)}})}with(e){for(const r of e)switch(r.kind){case oe.TRANSACTION:this.withTransfer(r);break;case oe.ORIGINATION:this.withOrigination(r);break;case oe.DELEGATION:this.withDelegation(r);break;case oe.INCREASE_PAID_STORAGE:this.withIncreasePaidStorage(r);break;default:throw new ji(r.kind)}return this}send(){return J(this,void 0,void 0,function*(){const e=[];for(const n of this.operations)e.push(yield this.mapOperation(n));const r=yield this.walletProvider.sendOperations(e);return this.context.operationFactory.createBatchOperation(r)})}}class qu{constructor(e){this.context=e,this.walletCommand=r=>({send:r})}get walletProvider(){return this.context.walletProvider}pkh({forceRefetch:e}={}){return J(this,void 0,void 0,function*(){return(!this._pkh||e)&&(this._pkh=yield this.walletProvider.getPKH()),this._pkh})}originate(e){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapOriginateParamsToWalletParams(()=>this.context.parser.prepareCodeOrigination(Object.assign({},e))),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createOriginationOperation(n)}))}setDelegate(e){if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createDelegationOperation(n)}))}registerDelegate(){return this.walletCommand(()=>J(this,void 0,void 0,function*(){const e=yield this.walletProvider.mapDelegateParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return{delegate:yield this.pkh()}})),r=yield this.walletProvider.sendOperations([e]);return this.context.operationFactory.createDelegationOperation(r)}))}transfer(e){if(ct(e.to)!==_e.VALID)throw new ft(e.to);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapTransferParamsToWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createTransactionOperation(n)}))}increasePaidStorage(e){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination);return this.walletCommand(()=>J(this,void 0,void 0,function*(){const r=yield this.walletProvider.mapIncreasePaidStorageWalletParams(()=>J(this,void 0,void 0,function*(){return e})),n=yield this.walletProvider.sendOperations([r]);return this.context.operationFactory.createIncreasePaidStorageOperation(n)}))}batch(e){const r=new R7(this.walletProvider,this.context);return Array.isArray(e)&&r.with(e),r}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(Po(e)!==_e.VALID)throw new To(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new P2(e,s,this,this.context.contract,o,n,i);return r(a,this.context)})}}class T2{constructor(e){this.context=e}getPKH(){return J(this,void 0,void 0,function*(){return this.context.signer.publicKeyHash()})}mapTransferParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return $c(yield e(),oe.TRANSACTION)})}mapOriginateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return $c(yield e(),oe.ORIGINATION)})}mapDelegateParamsToWalletParams(e){return J(this,void 0,void 0,function*(){return $c(yield e(),oe.DELEGATION)})}mapIncreasePaidStorageWalletParams(e){return J(this,void 0,void 0,function*(){return $c(yield e(),oe.INCREASE_PAID_STORAGE)})}sendOperations(e){return J(this,void 0,void 0,function*(){return(yield this.context.batch.batch(e).send()).hash})}}class I7{constructor(e,r,n,i,s="unit",o=!0,a=!1){this.provider=e,this.address=r,this.parameterSchema=n,this.name=i,this.args=s,this.isMultipleEntrypoint=o,this.isAnonymous=a}getSignature(){return this.isAnonymous?this.parameterSchema.ExtractSchema()[this.name]:this.parameterSchema.ExtractSchema()}send(e={}){return this.provider instanceof qu?this.provider.transfer(this.toTransferParams(e)).send():this.provider.transfer(this.toTransferParams(e))}toTransferParams({fee:e,gasLimit:r,storageLimit:n,source:i,amount:s=0,mutez:o=!1}={}){return{to:this.address,amount:s,fee:e,mutez:o,source:i,gasLimit:r,storageLimit:n,parameter:{entrypoint:this.isMultipleEntrypoint?this.name:Ao,value:this.isAnonymous?this.parameterSchema.EncodeObject({[this.name]:this.args}):this.parameterSchema.EncodeObject(this.args)}}}}class O7{constructor(e,r,n,i,s,o="Unit"){this._rpc=e,this._readProvider=r,this._contractAddress=n,this._smartContractViewSchema=i,this._contractStorageType=s,this._args=o}getSignature(){return{parameter:this._smartContractViewSchema.extractArgsSchema(),result:this._smartContractViewSchema.extractResultSchema()}}executeView(e){return J(this,void 0,void 0,function*(){this.verifyContextExecution(e);const r=yield this._readProvider.getChainId(),n=this.transformArgsToMichelson(),i={contract:this._contractAddress,view:this._smartContractViewSchema.viewName,input:n,chain_id:r,source:e.viewCaller};return e.source&&(i.payer=e.source),this.executeViewAndDecodeResult(i)})}verifyContextExecution(e){if(e.source&&ct(e.source)!==_e.VALID)throw new ag(`The source account who initialized the view execution is invalid: ${e.source}.`);if(!e.viewCaller||ct(e.viewCaller)!==_e.VALID)throw new ag(`The contract which is the caller of view is invalid: ${e.viewCaller}.`)}transformArgsToMichelson(){try{return this._smartContractViewSchema.encodeViewArgs(this._args)}catch(e){throw new V9(this._smartContractViewSchema.viewName,this.getSignature(),this._args,e)}}adaptViewCodeToContext(e,r,n){const i={BALANCE:[{prim:"PUSH",args:[{prim:"mutez"},{int:n}]}],SENDER:[{prim:"PUSH",args:[{prim:"address"},{string:r}]}],SELF_ADDRESS:[{prim:"PUSH",args:[{prim:"address"},{string:this._contractAddress}]}],AMOUNT:[{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]}]};return e.forEach((s,o)=>{s.prim in i&&(e[o]=Object(i)[s.prim]),s.args&&s.args.length!==0?this.adaptViewCodeToContext(s.args,r,n):Array.isArray(s)&&this.adaptViewCodeToContext(s,r,n)}),e}executeViewAndDecodeResult(e){return J(this,void 0,void 0,function*(){let r;try{r=(yield this._rpc.runScriptView(e)).data}catch(n){const i=$9(n);throw i?new q9(`The simulation of the on-chain view named ${this._smartContractViewSchema.viewName} failed with: ${JSON.stringify(i)}`,this._smartContractViewSchema.viewName,i,n):n}return this._smartContractViewSchema.decodeViewResult(r)})}}class T7{constructor(e,r){this.provider=e,this.contractAddress=r}createContractMethodFlatParams(e,r,n,i=!0,s=!1){return new x7(this.provider,this.contractAddress,e,r,n,i,s)}createContractMethodObjectParam(e,r,n,i=!0,s=!1){return new I7(this.provider,this.contractAddress,e,r,n,i,s)}createContractViewObjectParam(e,r,n,i,s){return new O7(e,r,this.contractAddress,n,i,s)}}const Ao="default";class P7{constructor(e,r,n,i,s,o,a){this.currentContract=e,this.name=r,this.callbackParametersSchema=n,this.parameterSchema=i,this.args=s,this.rpc=o,this.readProvider=a}read(e){return J(this,void 0,void 0,function*(){if(Po(e??"")==_e.VALID)throw new n0("Since version 12, the lambda view no longer depends on a lambda contract. The read method no longer accepts a contract address as a parameter.");if(e&&vm(e)!==_e.VALID)throw new jA(e);const r=this.parameterSchema.Encode(...this.args),n=yield this.rpc.runView({contract:this.currentContract.address,entrypoint:this.name,input:r,chain_id:e||(yield this.readProvider.getChainId())});return this.callbackParametersSchema.Execute(n.data)})}}const N7=(t,e,r)=>{const n=e.ExtractSignatures();if(!n.find(i=>i.length===t.length))throw new y2(r,n,t)},M7=t=>{let e=!1;if("prim"in t&&t.prim==="pair"&&t.args){const r=t.args[t.args.length-1];"prim"in r&&r.prim==="contract"&&(e=!0)}return e};class P2{constructor(e,r,n,i,s,o,a){this.address=e,this.script=r,this.storageProvider=i,this.entrypoints=s,this.rpc=o,this.readProvider=a,this.methods={},this.methodsObject={},this.views={},this.contractViews={},this.contractMethodFactory=new T7(n,e),this.schema=Gr.fromRPCResponse({script:this.script}),this.parameterSchema=_o.fromRPCResponse({script:this.script}),this.viewSchema=p0.fromRPCResponse({script:this.script}),this.viewSchema.length!==0&&this._initializeOnChainViews(this,o,this.readProvider,this.viewSchema),this._initializeMethods(this,this.entrypoints.entrypoints,this.rpc,this.readProvider)}_initializeMethods(e,r,n,i){const s=this.parameterSchema,o=Object.keys(r);if(s.isMultipleEntryPoint)o.forEach(c=>{const l=new _o(r[c]);if(this.methods[c]=function(...f){return e.contractMethodFactory.createContractMethodFlatParams(l,c,f)},this.methodsObject[c]=function(f){return e.contractMethodFactory.createContractMethodObjectParam(l,c,f)},M7(r[c])){const f=function(...d){const I=r[c].args[0],P=new _o(I),L=r[c].args[1].args[0],H=new _o(L);return N7(d,P,c),new P7(e,c,H,P,d,n,i)};this.views[c]=f}}),Object.keys(s.ExtractSchema()).filter(c=>Object.keys(r).indexOf(c)===-1).forEach(c=>{this.methods[c]=function(...l){return e.contractMethodFactory.createContractMethodFlatParams(s,c,l,!1,!0)},this.methodsObject[c]=function(l){return e.contractMethodFactory.createContractMethodObjectParam(s,c,l,!1,!0)}});else{const a=this.parameterSchema;this.methods[Ao]=function(...c){return e.contractMethodFactory.createContractMethodFlatParams(a,Ao,c,!1)},this.methodsObject[Ao]=function(c){return e.contractMethodFactory.createContractMethodObjectParam(a,Ao,c,!1)}}}_initializeOnChainViews(e,r,n,i){const s=this.schema.val;i.forEach(o=>{this.contractViews[o.viewName]=function(a){return e.contractMethodFactory.createContractViewObjectParam(r,n,o,s,a)}})}storage(){return this.storageProvider.getStorage(this.address,this.schema)}bigMap(e){return this.storageProvider.getBigMapKey(this.address,e,this.schema)}}class L7{constructor(e,r,n){this.id=e,this.schema=r,this.provider=n}get(e,r){return J(this,void 0,void 0,function*(){try{return yield this.provider.getBigMapKeyByID(this.id.toString(),e,this.schema,r)}catch(n){if(n instanceof Zo&&n.status===za.NOT_FOUND)return;throw n}})}getMultipleValues(e,r,n=5){return J(this,void 0,void 0,function*(){return this.provider.getBigMapKeysByID(this.id.toString(),e,this.schema,r,n)})}toJSON(){return this.id.toString()}toString(){return this.id.toString()}}const dg=t=>({big_map:(e,r)=>{if(!e||!("int"in e)||e.int===void 0)return{};{const n=new Gr(r);return new L7(new be(e.int),n,t)}},sapling_state:e=>!e||!("int"in e)||e.int===void 0?{}:new S7(new be(e.int),t)});class C7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n,this.originatedRollup=this.operationResults&&this.operationResults.originated_rollup}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_origination"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class B7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="tx_rollup_submit_batch"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get content(){return this.params.content}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class k7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="ballot");return r||void 0}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}get proposal(){return this.params.proposal}get ballot(){return this.params.ballot}}class D7 extends wr{constructor(e,r,n,i,s){super(e,n,i,s),this.params=r}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="drain_delegate"),r=e&&e.metadata&&e.metadata.balance_updates;return r||void 0}get consensusKey(){return this.params.consensus_key}get delegate(){return this.params.delegate}get destination(){return this.params.destination}}class U7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind===oe.TRANSFER_TICKET),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedGas(){return be.config({DECIMAL_PLACES:0,ROUNDING_MODE:be.ROUND_UP}),this.consumedMilliGas?new be(this.consumedMilliGas).dividedBy(1e3).toString():void 0}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}}class K7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="increase_paid_storage"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get amount(){return this.params.amount}get destination(){return this.params.destination}}class H7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const r=Array.isArray(this.results)&&this.results.find(n=>n.kind==="proposals");return r||void 0}get proposals(){return this.params.proposals}get period(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.period}}class F7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="update_consensus_key"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get pk(){return this.params.pk}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class j7 extends wr{constructor(e,r,n,i,s,o){super(e,i,s,o),this.params=r,this.source=n}get operationResults(){const e=Array.isArray(this.results)&&this.results.find(n=>n.kind==="smart_rollup_add_messages"),r=e&&e.metadata&&e.metadata.operation_result;return r||void 0}get status(){var e,r;return(r=(e=this.operationResults)===null||e===void 0?void 0:e.status)!==null&&r!==void 0?r:"unknown"}get message(){return this.params.message}get fee(){return this.params.fee}get gasLimit(){return this.params.gas_limit}get storageLimit(){return this.params.storage_limit}get consumedMilliGas(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.consumed_milligas}get errors(){var e;return(e=this.operationResults)===null||e===void 0?void 0:e.errors}}class G7 extends Vu{constructor(e,r){super(e),this.estimator=r,this.contractProviderTypeSymbol=Symbol.for("taquito-contract-provider-type-symbol")}getStorage(e,r){return J(this,void 0,void 0,function*(){if(Po(e)!==_e.VALID)throw new To(e);const n=yield this.context.readProvider.getScript(e,"head");r||(r=n);let i;return Gr.isSchema(r)?i=r:i=Gr.fromRPCResponse({script:r}),i.Execute(n.storage,dg(this))})}getBigMapKey(e,r,n){return J(this,void 0,void 0,function*(){if(Po(e)!==_e.VALID)throw new To(e);n||(n=(yield this.rpc.getContract(e)).script);let i;Gr.isSchema(n)?i=n:i=Gr.fromRPCResponse({script:n});const s=i.EncodeBigMapKey(r),o=yield this.rpc.getBigMapKey(e,s);return i.ExecuteOnBigMapValue(o)})}getBigMapKeyByID(e,r,n,i){return J(this,void 0,void 0,function*(){const{key:s,type:o}=n.EncodeBigMapKey(r),{packed:a}=yield this.context.packer.packData({data:s,type:o}),c=e8(a),l=i?yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},i):yield this.context.readProvider.getBigMapValue({id:e.toString(),expr:c},"head");return n.ExecuteOnBigMapValue(l,dg(this))})}getBigMapKeysByID(e,r,n,i,s=5){return J(this,void 0,void 0,function*(){const o=yield this.getBlockForRequest(r,i),a=new jr;let c=0,l=[];for(;c<r.length;){const d=r.slice(c,c+s).map(I=>this.getBigMapValueOrUndefined(I,e,n,o));l=[...l,...yield Promise.all(d)],c+=s}for(let f=0;f<l.length;f++)a.set(r[f],l[f]);return a})}getBlockForRequest(e,r){return J(this,void 0,void 0,function*(){return e.length===1||typeof r<"u"?r:yield this.context.readProvider.getBlockLevel("head")})}getBigMapValueOrUndefined(e,r,n,i){return J(this,void 0,void 0,function*(){try{return yield this.getBigMapKeyByID(r,e,n,i)}catch(s){if(s instanceof Zo&&s.status===za.NOT_FOUND)return;throw s}})}getSaplingDiffByID(e,r){return J(this,void 0,void 0,function*(){return r?yield this.context.readProvider.getSaplingDiffById({id:e.toString()},r):yield this.context.readProvider.getSaplingDiffById({id:e.toString()},"head")})}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(qf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimator.reveal();if(s){const o={kind:oe.REVEAL},a=yield this.estimate(o,()=>J(this,void 0,void 0,function*(){return s}));return n.unshift(yield _s(Object.assign({},a),r,i)),n}}return e})}originate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.originate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield $o(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),r))),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s,source:n}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new E7(c,i,f,d,l,this)})}setDelegate(e){return J(this,void 0,void 0,function*(){if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);if(e.delegate&&ct(e.delegate)!==_e.VALID)throw new ft(e.delegate);if(/kt1/i.test(e.source))throw new G9(e.source);const r=yield this.estimate(e,this.estimator.setDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield Wo(Object.assign(Object.assign({},e),r)),s=e.source||n,o=yield this.addRevealOperationIfNeeded(i,n),a=yield this.prepareOperation({operation:o,source:s}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:I}=yield this.signAndInject(c);return new lg(l,i,s,d,I,f)})}registerDelegate(e){return J(this,void 0,void 0,function*(){const r=yield this.estimate(e,this.estimator.registerDelegate.bind(this.estimator)),n=yield this.signer.publicKeyHash(),i=yield w2(Object.assign(Object.assign({},e),r),n),s=yield this.addRevealOperationIfNeeded(i,n),o=yield this.prepareOperation({operation:s}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new lg(c,i,n,f,d,l)})}transfer(e){return J(this,void 0,void 0,function*(){if(ct(e.to)!==_e.VALID)throw new ft(e.to);if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.transfer.bind(this.estimator)),i=yield zo(Object.assign(Object.assign({},e),n)),s=e.source||r,o=yield this.addRevealOperationIfNeeded(i,r),a=yield this.prepareOperation({operation:o,source:e.source}),c=yield this.forge(a),{hash:l,context:f,forgedBytes:d,opResponse:I}=yield this.signAndInject(c);return new A7(l,i,s,d,I,f)})}transferTicket(e){var r;return J(this,void 0,void 0,function*(){if(ct(e.destination)!==_e.VALID)throw new ft(e.destination,"param destination");if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source,"param source");const n=yield this.signer.publicKeyHash(),i=yield this.estimate(e,this.estimator.transferTicket.bind(this.estimator)),s=yield oc(Object.assign(Object.assign({},e),i)),o=(r=e.source)!==null&&r!==void 0?r:n,a=yield this.addRevealOperationIfNeeded(s,n),c=yield this.prepareOperation({operation:a,source:e.source}),l=yield this.forge(c),{hash:f,context:d,forgedBytes:I,opResponse:P}=yield this.signAndInject(l);return new U7(f,s,o,I,P,d)})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimator.reveal(e);if(n){const i=yield this.estimate(e,()=>J(this,void 0,void 0,function*(){return n})),s=yield _s(Object.assign({},i),r,yield this.signer.publicKey()),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new w7(c,s,r,f,d,l)}else throw new _2(`The publicKeyHash '${r}' has already been revealed.`)})}registerGlobalConstant(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.registerGlobalConstant.bind(this.estimator)),i=yield nc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new _7(c,i,r,f,d,l)})}increasePaidStorage(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.increasePaidStorage.bind(this.estimator)),i=yield Xo(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new K7(c,i,r,f,d,l)})}drainDelegate(e){return J(this,void 0,void 0,function*(){const r=yield A2(Object.assign({},e)),n=yield this.prepareOperation({operation:r}),i=yield this.forge(n),{hash:s,context:o,forgedBytes:a,opResponse:c}=yield this.signAndInject(i);return new D7(s,r,a,c,o)})}txRollupOriginate(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e||{},this.estimator.txRollupOriginate.bind(this.estimator)),i=yield ic(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new C7(c,i,r,f,d,l)})}txRollupSubmitBatch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.txRollupSubmitBatch.bind(this.estimator)),i=yield sc(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:r}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new B7(c,i,r,f,d,l)})}ballot(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield x2(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new k7(c,s,n,f,d,l)})}proposals(e){var r;return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash();if(e.source&&ct(e.source)!==_e.VALID)throw new ft(e.source);const i=(r=e.source)!==null&&r!==void 0?r:n,s=yield S2(Object.assign(Object.assign({},e),{source:i})),o=yield this.prepareOperation({operation:s,source:i}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new H7(c,s,n,f,d,l)})}updateConsensusKey(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.updateConsensusKey.bind(this.estimator)),i=yield H0(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new F7(c,i,r,f,d,l)})}smartRollupAddMessages(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate(e,this.estimator.smartRollupAddMessages.bind(this.estimator)),i=yield ac(Object.assign(Object.assign({},e),n)),s=yield this.addRevealOperationIfNeeded(i,r),o=yield this.prepareOperation({operation:s,source:e.source}),a=yield this.forge(o),{hash:c,context:l,forgedBytes:f,opResponse:d}=yield this.signAndInject(a);return new j7(c,i,r,f,d,l)})}at(e,r=n=>n){return J(this,void 0,void 0,function*(){if(Po(e)!==_e.VALID)throw new To(e);const n=this.context.withExtensions().rpc,i=this.context.withExtensions().readProvider,s=yield i.getScript(e,"head"),o=yield i.getEntrypoints(e),a=new P2(e,s,this,this,o,n,i);return r(a,this.context)})}batch(e){const r=new j0(this.context,this.estimator);return Array.isArray(e)&&r.with(e),r}}class N2{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}parseScript(e){return J(this,void 0,void 0,function*(){return new Ks({protocol:yield this.getNextProto()}).parseScript(e)})}parseMichelineExpression(e){return J(this,void 0,void 0,function*(){return new Ks({protocol:yield this.getNextProto()}).parseMichelineExpression(e)})}parseJSON(e){return J(this,void 0,void 0,function*(){return new Ks({protocol:yield this.getNextProto()}).parseJSON(e)})}prepareCodeOrigination(e){return J(this,void 0,void 0,function*(){const r=e;if(r.code=yield this.formatCodeParam(e.code),e.init)r.init=yield this.formatInitParam(e.init);else if(e.storage){const n=r.code.find(o=>"prim"in o&&o.prim==="storage");if(!n?.args)throw new Vf("The storage section is missing from the script",e.code);const i=new Gr(n.args[0]),s=yield this.findGlobalConstantsHashAndValue(i);if(Object.keys(s).length!==0){const a=new Ks({expandGlobalConstant:s}).parseJSON(n.args[0]),c=new Gr(a);r.init=c.Encode(e.storage)}else r.init=i.Encode(e.storage);delete r.storage}return r})}formatCodeParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseScript(e);if(n===null)throw new Vf("Invalid code parameter",e);r=n}else{const n=yield this.parseJSON(e),i=["parameter","storage","code"];r=n.sort((s,o)=>i.indexOf(s.prim)-i.indexOf(o.prim))}return r})}formatInitParam(e){return J(this,void 0,void 0,function*(){let r;if(typeof e=="string"){const n=yield this.parseMichelineExpression(e);if(n===null)throw new E2("Invalid init parameter",e);r=n}else r=yield this.parseJSON(e);return r})}findGlobalConstantsHashAndValue(e){return J(this,void 0,void 0,function*(){const r=e.findToken("constant"),n={};if(r.length!==0)for(const i of r){const s=i.tokenVal.args;if(s){const o=s[0];if(o.string){const a=o.string,c=yield this.context.globalConstantsProvider.getGlobalConstantByHash(a);Object.assign(n,{[a]:c})}}}return n})}}class M2{constructor(e){this.context=e}packData(e){return J(this,void 0,void 0,function*(){return this.context.rpc.packData(e)})}}class V7 extends Error{constructor(){super("No {} constants provider has been configured. Please configure one by calling setGlobalConstantsProvider({globalConstantsProvider}) on your TezosToolkit instance."),this.name="UnconfiguredGlobalConstantsProviderError"}}class L2{getGlobalConstantByHash(e){return J(this,void 0,void 0,function*(){throw new V7})}}class C2{constructor(e){this.rpc=e}getBalance(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBalance(e,{block:String(r)})})}getDelegate(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getDelegate(e,{block:String(r)})})}getNextProtocol(e){return J(this,void 0,void 0,function*(){return(yield this.rpc.getProtocols({block:String(e)})).next_protocol})}getProtocolConstants(e){return J(this,void 0,void 0,function*(){const{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}=yield this.rpc.getConstants({block:String(e)});return{time_between_blocks:r,minimal_block_delay:n,hard_gas_limit_per_operation:i,hard_gas_limit_per_block:s,hard_storage_limit_per_operation:o,cost_per_byte:a,tx_rollup_origination_size:c}})}getScript(e,r){return J(this,void 0,void 0,function*(){const{script:n}=yield this.rpc.getContract(e,{block:String(r)});return n})}getStorage(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getStorage(e,{block:String(r)})})}getBlockHash(e){return J(this,void 0,void 0,function*(){const{hash:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBlockLevel(e){return J(this,void 0,void 0,function*(){const{level:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getCounter(e,r){return J(this,void 0,void 0,function*(){const{counter:n}=yield this.rpc.getContract(e,{block:String(r)});return n||"0"})}getBlockTimestamp(e){return J(this,void 0,void 0,function*(){const{timestamp:r}=yield this.rpc.getBlockHeader({block:String(e)});return r})}getBigMapValue(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getBigMapExpr(e.id,e.expr,{block:String(r)})})}getSaplingDiffById(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffById(e.id,{block:String(r)})})}getSaplingDiffByContract(e,r){return J(this,void 0,void 0,function*(){return this.rpc.getSaplingDiffByContract(e,{block:String(r)})})}getEntrypoints(e){return J(this,void 0,void 0,function*(){return this.rpc.getEntrypoints(e)})}getChainId(){return J(this,void 0,void 0,function*(){return this.rpc.getChainId()})}isAccountRevealed(e,r){return J(this,void 0,void 0,function*(){const n=yield this.rpc.getManagerKey(e,{block:String(r)});return n&&typeof n=="object"?!!n.key:!!n})}getBlock(e){return J(this,void 0,void 0,function*(){return this.rpc.getBlock({block:String(e)})})}getLiveBlocks(e){return this.rpc.getLiveBlocks({block:String(e)})}}const q7=(t,e)=>t.hash===e.opHash,$7=(t,e)=>{switch(t.kind){case"endorsement":return"metadata"in t&&t.metadata.delegate===e.source;case"activate_account":return"metadata"in t&&t.pkh===e.source;default:return"source"in t&&t.source===e.source}},z7=(t,e)=>"kind"in t&&t.kind===e.kind,W7=(t,e)=>{switch(t.kind){case"delegation":return t.delegate===e.destination;case"origination":if("metadata"in t&&"operation_result"in t.metadata&&"originated_contracts"in t.metadata.operation_result&&Array.isArray(t.metadata.operation_result.originated_contracts))return t.metadata.operation_result.originated_contracts.some(r=>r===e.destination);break;case"transaction":return t.destination===e.destination;default:return!1}},X7=(t,e,r)=>t.kind==="event"?e&&r?t.source===e&&t.tag===r:e&&!r?t.source===e:r?t.tag===r:!0:!1,J7=(t,e)=>"opHash"in e?q7(t,e):"source"in e?$7(t,e):"kind"in e?z7(t,e):"destination"in e?W7(t,e):!1,Y7=(t,e)=>{if(Array.isArray(e.and))return e.and.every(r=>Eh(t,r));if(Array.isArray(e.or))return e.or.some(r=>Eh(t,r));throw new r7("Filter expression must contain either and/or property")},Eh=(t,e)=>{const r=[];return Array.isArray(e)?r.push(...e):r.push(e),r.every(n=>"and"in n||"or"in n?Y7(t,n):J7(t,n))};class hg extends Error{constructor(e){super(e),this.message=e,this.name="UnsupportedEventError"}}class Wc{constructor(e,r=!1,n=Bm()){this.shouldRetry=r,this.operatorFunction=n,this.errorListeners=[],this.messageListeners=[],this.closeListeners=[],this.completed$=new Fo,e.pipe(Ix(this.completed$),Uf(i=>{this.call(this.messageListeners,i)},i=>{this.call(this.errorListeners,i)},()=>{this.call(this.closeListeners)}),this.shouldRetry?n:Uf(),h0(()=>Y8)).subscribe()}call(e,r){for(const n of e)try{n(r)}catch(i){console.error(i)}}remove(e,r){const n=e.indexOf(r);n!==-1&&e.splice(n,1)}on(e,r){switch(e){case"data":this.messageListeners.push(r);break;case"error":this.errorListeners.push(r);break;case"close":this.closeListeners.push(r);break;default:throw new hg(`Trying to register on an unsupported event: ${e}`)}}off(e,r){switch(e){case"data":this.remove(this.messageListeners,r);break;case"error":this.remove(this.errorListeners,r);break;case"close":this.remove(this.closeListeners,r);break;default:throw new hg(`Trying to unregister on an unsupported event: ${e}`)}}close(){this.completed$.next()}}const Q7={shouldObservableSubscriptionRetry:!1,observableSubscriptionRetryFunction:Bm()},Z7=t=>no(t.rpc.getBlock()).pipe(Pi()),eI=t=>Rc(e=>new Rt(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents)Eh(Object.assign({hash:i.hash},s),t)&&r.next(Object.assign({hash:i.hash},s));r.complete()})),tI=t=>Rc(e=>new Rt(r=>{for(const n of e.operations)for(const i of n)for(const s of i.contents){const a=s.metadata.internal_operation_results;if(a)for(const c of a)X7(c,t?.address,t?.tag)&&r.next(Object.assign({opHash:i.hash,blockHash:e.hash,level:e.header.level},c))}r.complete()}));class _h{constructor(e,r={}){this.context=e,this._config$=new Ku(Object.assign(Object.assign({},Q7),r)),this.timer$=this._config$.pipe(M1("pollingIntervalMilliseconds"),Yn(n=>n?N1(0,n):no(this.getConfirmationPollingInterval()).pipe(Yn(i=>N1(0,i))))),this.newBlock$=this.timer$.pipe(Yn(()=>Z7(this.context)),ux("hash"),Ex(),Za())}get config(){return this._config$.getValue()}getConfirmationPollingInterval(){return J(this,void 0,void 0,function*(){if(!this.config.pollingIntervalMilliseconds)try{const n=yield this.context.readProvider.getProtocolConstants("head"),s=(n.minimal_block_delay?n.minimal_block_delay.multipliedBy(1e3):n.time_between_blocks?n.time_between_blocks[0].multipliedBy(1e3):new be(5e3)).dividedBy(3);this.config.pollingIntervalMilliseconds=s.toNumber()===0?1e3:s.toNumber()}catch{return 5e3}return this.config.pollingIntervalMilliseconds})}subscribeBlock(e){return new Wc(this.newBlock$,this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribe(e){return new Wc(this.newBlock$.pipe(M1("hash")),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeOperation(e){return new Wc(this.newBlock$.pipe(eI(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}subscribeEvent(e){return new Wc(this.newBlock$.pipe(tI(e)),this.config.shouldObservableSubscriptionRetry,this.config.observableSubscriptionRetryFunction)}}class B2{constructor(e){this.context=e}getNextProto(){return J(this,void 0,void 0,function*(){if(!this.context.proto){const e=yield this.context.readProvider.getNextProtocol("head");this.context.proto=e}return this.context.proto})}forge({branch:e,contents:r}){return J(this,void 0,void 0,function*(){return new v2(yield this.getNextProto()).forge({branch:e,contents:r})})}}var Bs;class rI{constructor(e){this.context=e,Bs.set(this,void 0),K9(this,Bs,{})}get rpc(){return this.context.rpc}get signer(){return this.context.signer}get estimate(){return this.context.estimate}get parser(){return this.context.parser}getPkh(){return J(this,void 0,void 0,function*(){return yield this.context.signer.publicKeyHash()})}getBlockHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getBlockHash("head~2")})}getProtocolHash(){return J(this,void 0,void 0,function*(){return this.context.readProvider.getNextProtocol("head")})}getHeadCounter(e){var r;return J(this,void 0,void 0,function*(){return(r=this.context.readProvider.getCounter(e,"head"))!==null&&r!==void 0?r:"0"})}getFee(e,r,n){return(!Vc(this,Bs)[r]||Vc(this,Bs)[r]<n)&&(Vc(this,Bs)[r]=n),{counter:`${++Vc(this,Bs)[r]}`,fee:typeof e.fee>"u"?"0":`${e.fee}`,gas_limit:typeof e.gas_limit>"u"?"0":`${e.gas_limit}`,storage_limit:typeof e.storage_limit>"u"?"0":`${e.storage_limit}`}}getSource(e,r,n){return{source:typeof e.source>"u"?n||r:e.source}}buildEstimates(e){return{fee:e.suggestedFeeMutez,gasLimit:e.gasLimit,storageLimit:e.storageLimit}}addRevealOperationIfNeeded(e,r){return J(this,void 0,void 0,function*(){if(qf(e)){const n=[e],i=yield this.signer.publicKey(),s=yield this.estimate.reveal();if(s){const o=this.buildEstimates(s);return n.unshift(yield _s(Object.assign({},o),r,i)),n}}return e})}convertIntoArray(e){return Array.isArray(e)?[...e]:[e]}constructOpContents(e,r,n,i,s){return e.map(o=>{switch(o.kind){case oe.ACTIVATION:case oe.DRAIN_DELEGATE:return Object.assign({},o);case oe.ORIGINATION:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{balance:typeof o.balance<"u"?`${o.balance}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.TRANSACTION:{const a=Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:typeof o.amount<"u"?`${o.amount}`:"0"}),this.getSource(o,n,i)),this.getFee(o,n,r));if(a.source.toLowerCase().startsWith("kt1"))throw new n0(`KT1 addresses are not supported as source since ${Dt.PsBabyM1}`);return a}case oe.REVEAL:case oe.DELEGATION:case oe.REGISTER_GLOBAL_CONSTANT:case oe.TX_ROLLUP_ORIGINATION:case oe.TX_ROLLUP_SUBMIT_BATCH:case oe.UPDATE_CONSENSUS_KEY:case oe.SMART_ROLLUP_ADD_MESSAGES:return Object.assign(Object.assign(Object.assign({},o),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.TRANSFER_TICKET:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{ticket_amount:`${o.ticket_amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.INCREASE_PAID_STORAGE:return Object.assign(Object.assign(Object.assign(Object.assign({},o),{amount:`${o.amount}`}),this.getSource(o,n,i)),this.getFee(o,n,r));case oe.BALLOT:if(s===void 0)throw new Hs("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s?.voting_period.index});case oe.PROPOSALS:if(s===void 0)throw new Hs("Failed to get the current voting period index");return Object.assign(Object.assign({},o),{period:s?.voting_period.index});default:throw new ji(o.kind)}})}reveal(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield this.estimate.reveal(e);if(n){const i=this.buildEstimates(n),s=yield _s(Object.assign({},i),r,yield this.signer.publicKey()),o=this.convertIntoArray(s),a=yield this.getBlockHash(),c=yield this.getProtocolHash(),l=parseInt(yield this.getHeadCounter(r),10),f=this.constructOpContents(o,l,r);return{opOb:{branch:a,contents:f,protocol:c},counter:l}}else throw new _2(`The publicKeyHash '${r}' has already been revealed.`)})}originate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.originate(e),s=this.buildEstimates(i),o=yield $o(yield this.context.parser.prepareCodeOrigination(Object.assign(Object.assign({},e),s))),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}transaction(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transfer(e),s=this.buildEstimates(i),o=yield zo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}delegation(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.setDelegate(e),s=this.buildEstimates(i),o=yield Wo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}registerGlobalConstant(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.registerGlobalConstant(e),s=this.buildEstimates(i),o=yield nc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}txRollupOrigination(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupOriginate(e),s=this.buildEstimates(i),o=yield ic(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}txRollupSubmitBatch(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.txRollupSubmitBatch(e),s=this.buildEstimates(i),o=yield sc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}updateConsensusKey(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.updateConsensusKey(e),s=this.buildEstimates(i),o=yield H0(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}increasePaidStorage(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.increasePaidStorage(e),s=this.buildEstimates(i),o=yield Xo(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}ballot(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield x2(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new Hs("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}proposals(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=yield S2(Object.assign({},e)),i=this.convertIntoArray(n),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10);let c;try{c=yield this.rpc.getCurrentPeriod()}catch{throw new Hs("Failed to get the current voting period index")}const l=this.constructOpContents(i,a,r,void 0,c);return{opOb:{branch:s,contents:l,protocol:o},counter:a}})}drainDelegate(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield A2(Object.assign({},e)),s=this.convertIntoArray(i),o=yield this.getBlockHash(),a=yield this.getProtocolHash(),c=parseInt(yield this.getHeadCounter(n),10),l=this.constructOpContents(s,c,n,r);return{opOb:{branch:o,contents:l,protocol:a},counter:c}})}transferTicket(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.transferTicket(e),s=this.buildEstimates(i),o=yield oc(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}smartRollupAddMessages(e,r){return J(this,void 0,void 0,function*(){const n=yield this.signer.publicKeyHash(),i=yield this.estimate.smartRollupAddMessages(e),s=this.buildEstimates(i),o=yield ac(Object.assign(Object.assign({},e),s)),a=yield this.addRevealOperationIfNeeded(o,n),c=this.convertIntoArray(a),l=yield this.getBlockHash(),f=yield this.getProtocolHash(),d=parseInt(yield this.getHeadCounter(n),10),I=this.constructOpContents(c,d,n,r);return{opOb:{branch:l,contents:I,protocol:f},counter:d}})}batch(e){return J(this,void 0,void 0,function*(){const r=yield this.signer.publicKeyHash(),n=new j0(this.context,this.estimate);Array.isArray(e)&&n.with(e);const i=yield n.toPrepare(),s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=parseInt(yield this.getHeadCounter(r),10),c=this.constructOpContents(i,a,r);return{opOb:{branch:s,contents:c,protocol:o},counter:a}})}contractCall(e){var r,n,i;return J(this,void 0,void 0,function*(){const s=yield this.getBlockHash(),o=yield this.getProtocolHash(),a=yield this.signer.publicKeyHash(),c=parseInt(yield this.getHeadCounter(a),10),l=e.toTransferParams(),f=yield this.estimate.transfer(l),d=[{kind:oe.TRANSACTION,fee:(r=l.fee)!==null&&r!==void 0?r:f.suggestedFeeMutez,gas_limit:(n=l.gasLimit)!==null&&n!==void 0?n:f.gasLimit,storage_limit:(i=l.storageLimit)!==null&&i!==void 0?i:f.storageLimit,amount:String(l.amount),destination:l.to}],I=this.constructOpContents(d,c,a);return{opOb:{branch:s,contents:I,protocol:o},counter:c}})}}Bs=new WeakMap;const nI={defaultConfirmationCount:1,confirmationPollingTimeoutSecond:180};class $f{constructor(e,r=new mh,n,i=new Ku(Object.assign({},nI)),s,o,a,c,l,f,d,I){this._rpc=e,this._signer=r,this._proto=n,this._config=i,this.providerDecorator=[],this.tz=new g7(this),this.estimate=new y7(this),this.contract=new G7(this,this.estimate),this.prepare=new rI(this),this.batch=new i7(this,this.estimate),this.wallet=new qu(this),this.withExtensions=()=>{let P=this.clone();return this.providerDecorator.forEach(L=>{P=L(P)}),P},typeof this._rpc=="string"?this._rpcClient=new pf(this._rpc):this._rpcClient=this._rpc,this._forger=s||new B2(this),this._injector=o||new F9(this),this.operationFactory=new p7(this),this._walletProvider=c||new T2(this),this._parser=l||new N2(this),this._packer=a||new M2(this),this._globalConstantsProvider=f||new L2,this._readProvider=d||new C2(this._rpcClient),this._stream=I||new _h(this)}get config(){return this._config.getValue()}set config(e){this._config.next(Object.assign({},e))}setPartialConfig(e){this._config.next(Object.assign(Object.assign({},this._config.getValue()),e))}get rpc(){return this._rpcClient}set rpc(e){this._rpcClient=e}get injector(){return this._injector}set injector(e){this._injector=e}get forger(){return this._forger}set forger(e){this._forger=e}get signer(){return this._signer}set signer(e){this._signer=e}get walletProvider(){return this._walletProvider}set walletProvider(e){this._walletProvider=e}set proto(e){this._proto=e}get proto(){return this._proto}get parser(){return this._parser}set parser(e){this._parser=e}get packer(){return this._packer}set packer(e){this._packer=e}get globalConstantsProvider(){return this._globalConstantsProvider}set globalConstantsProvider(e){this._globalConstantsProvider=e}get readProvider(){return this._readProvider}set readProvider(e){this._readProvider=e}get stream(){return this._stream}set stream(e){this._stream=e}isAnyProtocolActive(e=[]){return J(this,void 0,void 0,function*(){if(this._proto)return e.includes(this._proto);{const r=yield this.readProvider.getNextProtocol("head");return e.includes(r)}})}isAnySignerConfigured(){return!(this.signer instanceof mh)}clone(){return new $f(this.rpc,this.signer,this.proto,this._config,this.forger,this._injector,this.packer,this._walletProvider,this._parser,this._globalConstantsProvider,this._readProvider,this._stream)}registerProviderDecorator(e){this.providerDecorator.push(e)}}const iI={commitHash:"c050a62135022aa2e61ba6ef72a98f9c89f1682c",version:"16.0.1"};class sI{constructor(e){this._rpc=e,this._options={},this.format=s0,typeof this._rpc=="string"?this._rpcClient=new pf(this._rpc):this._rpcClient=this._rpc,this._context=new $f(e),this._wallet=new qu(this._context),this.setProvider({rpc:this._rpcClient}),this.batch=this._context.batch.batch.bind(this._context.batch)}setProvider({rpc:e,stream:r,signer:n,protocol:i,config:s,forger:o,wallet:a,packer:c,globalConstantsProvider:l,readProvider:f,parserProvider:d}){this.setRpcProvider(e),this.setStreamProvider(r),this.setSignerProvider(n),this.setForgerProvider(o),this.setWalletProvider(a),this.setPackerProvider(c),this.setGlobalConstantsProvider(l),this.setReadProvider(f),this.setParserProvider(d),this._context.proto=i,s&&this._context.setPartialConfig(s)}setSignerProvider(e){!this._options.signer&&typeof e>"u"?(this._context.signer=new mh,this._options.signer=e):typeof e<"u"&&(this._context.signer=e,this._options.signer=e)}setRpcProvider(e){typeof e=="string"?this._rpcClient=new pf(e):e===void 0||(this._rpcClient=e),this._options.rpc=this._rpcClient,this._context.rpc=this._rpcClient}setForgerProvider(e){if(typeof e<"u")this._options.forger=e,this._context.forger=e;else if(this._options.forger===void 0){const r=this.getFactory(B2)();this._options.forger=r,this._context.forger=r}}setStreamProvider(e){if(typeof e=="string"){const r=new _h(new $f(new pf(e)));this._options.stream=r,this._context.stream=r}else if(typeof e<"u")this._options.stream=e,this._context.stream=e;else if(this._options.stream===void 0){const r=this.getFactory(_h)();this._options.stream=r,this._context.stream=r}}setWalletProvider(e){if(!this._options.wallet&&typeof e>"u"){const r=this.getFactory(T2)();this._options.wallet=r,this._context.walletProvider=r}else typeof e<"u"&&(this._options.wallet=e,this._context.walletProvider=e)}setPackerProvider(e){if(!this._options.packer&&typeof e>"u"){const r=this.getFactory(M2)();this._context.packer=r,this._options.packer=r}else typeof e<"u"&&(this._context.packer=e,this._options.packer=e)}setGlobalConstantsProvider(e){if(!this._options.globalConstantsProvider&&typeof e>"u"){const r=new L2;this._context.globalConstantsProvider=r,this._options.globalConstantsProvider=r}else typeof e<"u"&&(this._context.globalConstantsProvider=e,this._options.globalConstantsProvider=e)}setReadProvider(e){const r=e||new C2(this._context.rpc);this._options.readProvider=r,this._context.readProvider=r}setParserProvider(e){if(!this._options.parserProvider&&typeof e>"u"){const r=new N2(this._context);this._context.parser=r,this._options.parserProvider=r}else typeof e<"u"&&(this._context.parser=e,this._options.parserProvider=e)}get tz(){return this._context.tz}get contract(){return this._context.contract}get prepare(){return this._context.prepare}get wallet(){return this._wallet}get operation(){return this._context.operationFactory}get estimate(){return this._context.estimate}get stream(){return this._context.stream}get rpc(){return this._context.rpc}get signer(){return this._context.signer}get globalConstants(){return this._context.globalConstantsProvider}addExtension(e){Array.isArray(e)?e.forEach(r=>r.configureContext(this._context)):e.configureContext(this._context)}getFactory(e){return(...r)=>new e(this._context,...r)}getVersionInfo(){return iI}}function G0(t){return Object.keys(t)}var zn;(function(t){t.PENDING="pending",t.RESOLVED="resolved",t.REJECTED="rejected"})(zn||(zn={}));const pg=()=>{throw new Error("ExposedPromise not initialized yet.")};class Jt{constructor(){this._resolve=pg,this._reject=pg,this._status=zn.PENDING,this._promise=new Promise((e,r)=>{this._resolve=n=>{this.isSettled()||(this._promiseResult=n,e(n),this._status=zn.RESOLVED)},this._reject=n=>{this.isSettled()||(this._promiseError=n,r(n),this._status=zn.REJECTED)}})}get promise(){return this._promise}get resolve(){return this._resolve}get reject(){return this._reject}get status(){return this._status}get promiseResult(){return this._promiseResult}get promiseError(){return this._promiseError}static resolve(e){const r=new Jt;return r.resolve(e),r}static reject(e){const r=new Jt;return r.reject(e),r}isPending(){return this.status===zn.PENDING}isResolved(){return this.status===zn.RESOLVED}isRejected(){return this.status===zn.REJECTED}isSettled(){return this.isResolved()||this.isRejected()}}var Yo={},k2={},cc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Qs,r=Br;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(U){const K=new Float64Array(16);if(U)for(let j=0;j<U.length;j++)K[j]=U[j];return K}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(U){let K=1;for(let j=0;j<16;j++){let y=U[j]+K+65535;K=Math.floor(y/65536),U[j]=y-K*65536}U[0]+=K-1+37*(K-1)}function a(U,K,j){const y=~(j-1);for(let w=0;w<16;w++){const T=y&(U[w]^K[w]);U[w]^=T,K[w]^=T}}function c(U,K){const j=n(),y=n();for(let w=0;w<16;w++)y[w]=K[w];o(y),o(y),o(y);for(let w=0;w<2;w++){j[0]=y[0]-65517;for(let x=1;x<15;x++)j[x]=y[x]-65535-(j[x-1]>>16&1),j[x-1]&=65535;j[15]=y[15]-32767-(j[14]>>16&1);const T=j[15]>>16&1;j[14]&=65535,a(y,j,1-T)}for(let w=0;w<16;w++)U[2*w]=y[w]&255,U[2*w+1]=y[w]>>8}function l(U,K){for(let j=0;j<16;j++)U[j]=K[2*j]+(K[2*j+1]<<8);U[15]&=32767}function f(U,K,j){for(let y=0;y<16;y++)U[y]=K[y]+j[y]}function d(U,K,j){for(let y=0;y<16;y++)U[y]=K[y]-j[y]}function I(U,K,j){let y,w,T=0,x=0,E=0,u=0,h=0,g=0,b=0,p=0,S=0,O=0,_=0,v=0,N=0,ee=0,Y=0,ne=0,se=0,ae=0,W=0,F=0,k=0,m=0,B=0,X=0,Z=0,ce=0,ie=0,de=0,ye=0,ue=0,Ee=0,xe=j[0],me=j[1],ge=j[2],Te=j[3],ve=j[4],he=j[5],Ne=j[6],M=j[7],A=j[8],R=j[9],D=j[10],$=j[11],Q=j[12],te=j[13],le=j[14],Ae=j[15];y=K[0],T+=y*xe,x+=y*me,E+=y*ge,u+=y*Te,h+=y*ve,g+=y*he,b+=y*Ne,p+=y*M,S+=y*A,O+=y*R,_+=y*D,v+=y*$,N+=y*Q,ee+=y*te,Y+=y*le,ne+=y*Ae,y=K[1],x+=y*xe,E+=y*me,u+=y*ge,h+=y*Te,g+=y*ve,b+=y*he,p+=y*Ne,S+=y*M,O+=y*A,_+=y*R,v+=y*D,N+=y*$,ee+=y*Q,Y+=y*te,ne+=y*le,se+=y*Ae,y=K[2],E+=y*xe,u+=y*me,h+=y*ge,g+=y*Te,b+=y*ve,p+=y*he,S+=y*Ne,O+=y*M,_+=y*A,v+=y*R,N+=y*D,ee+=y*$,Y+=y*Q,ne+=y*te,se+=y*le,ae+=y*Ae,y=K[3],u+=y*xe,h+=y*me,g+=y*ge,b+=y*Te,p+=y*ve,S+=y*he,O+=y*Ne,_+=y*M,v+=y*A,N+=y*R,ee+=y*D,Y+=y*$,ne+=y*Q,se+=y*te,ae+=y*le,W+=y*Ae,y=K[4],h+=y*xe,g+=y*me,b+=y*ge,p+=y*Te,S+=y*ve,O+=y*he,_+=y*Ne,v+=y*M,N+=y*A,ee+=y*R,Y+=y*D,ne+=y*$,se+=y*Q,ae+=y*te,W+=y*le,F+=y*Ae,y=K[5],g+=y*xe,b+=y*me,p+=y*ge,S+=y*Te,O+=y*ve,_+=y*he,v+=y*Ne,N+=y*M,ee+=y*A,Y+=y*R,ne+=y*D,se+=y*$,ae+=y*Q,W+=y*te,F+=y*le,k+=y*Ae,y=K[6],b+=y*xe,p+=y*me,S+=y*ge,O+=y*Te,_+=y*ve,v+=y*he,N+=y*Ne,ee+=y*M,Y+=y*A,ne+=y*R,se+=y*D,ae+=y*$,W+=y*Q,F+=y*te,k+=y*le,m+=y*Ae,y=K[7],p+=y*xe,S+=y*me,O+=y*ge,_+=y*Te,v+=y*ve,N+=y*he,ee+=y*Ne,Y+=y*M,ne+=y*A,se+=y*R,ae+=y*D,W+=y*$,F+=y*Q,k+=y*te,m+=y*le,B+=y*Ae,y=K[8],S+=y*xe,O+=y*me,_+=y*ge,v+=y*Te,N+=y*ve,ee+=y*he,Y+=y*Ne,ne+=y*M,se+=y*A,ae+=y*R,W+=y*D,F+=y*$,k+=y*Q,m+=y*te,B+=y*le,X+=y*Ae,y=K[9],O+=y*xe,_+=y*me,v+=y*ge,N+=y*Te,ee+=y*ve,Y+=y*he,ne+=y*Ne,se+=y*M,ae+=y*A,W+=y*R,F+=y*D,k+=y*$,m+=y*Q,B+=y*te,X+=y*le,Z+=y*Ae,y=K[10],_+=y*xe,v+=y*me,N+=y*ge,ee+=y*Te,Y+=y*ve,ne+=y*he,se+=y*Ne,ae+=y*M,W+=y*A,F+=y*R,k+=y*D,m+=y*$,B+=y*Q,X+=y*te,Z+=y*le,ce+=y*Ae,y=K[11],v+=y*xe,N+=y*me,ee+=y*ge,Y+=y*Te,ne+=y*ve,se+=y*he,ae+=y*Ne,W+=y*M,F+=y*A,k+=y*R,m+=y*D,B+=y*$,X+=y*Q,Z+=y*te,ce+=y*le,ie+=y*Ae,y=K[12],N+=y*xe,ee+=y*me,Y+=y*ge,ne+=y*Te,se+=y*ve,ae+=y*he,W+=y*Ne,F+=y*M,k+=y*A,m+=y*R,B+=y*D,X+=y*$,Z+=y*Q,ce+=y*te,ie+=y*le,de+=y*Ae,y=K[13],ee+=y*xe,Y+=y*me,ne+=y*ge,se+=y*Te,ae+=y*ve,W+=y*he,F+=y*Ne,k+=y*M,m+=y*A,B+=y*R,X+=y*D,Z+=y*$,ce+=y*Q,ie+=y*te,de+=y*le,ye+=y*Ae,y=K[14],Y+=y*xe,ne+=y*me,se+=y*ge,ae+=y*Te,W+=y*ve,F+=y*he,k+=y*Ne,m+=y*M,B+=y*A,X+=y*R,Z+=y*D,ce+=y*$,ie+=y*Q,de+=y*te,ye+=y*le,ue+=y*Ae,y=K[15],ne+=y*xe,se+=y*me,ae+=y*ge,W+=y*Te,F+=y*ve,k+=y*he,m+=y*Ne,B+=y*M,X+=y*A,Z+=y*R,ce+=y*D,ie+=y*$,de+=y*Q,ye+=y*te,ue+=y*le,Ee+=y*Ae,T+=38*se,x+=38*ae,E+=38*W,u+=38*F,h+=38*k,g+=38*m,b+=38*B,p+=38*X,S+=38*Z,O+=38*ce,_+=38*ie,v+=38*de,N+=38*ye,ee+=38*ue,Y+=38*Ee,w=1,y=T+w+65535,w=Math.floor(y/65536),T=y-w*65536,y=x+w+65535,w=Math.floor(y/65536),x=y-w*65536,y=E+w+65535,w=Math.floor(y/65536),E=y-w*65536,y=u+w+65535,w=Math.floor(y/65536),u=y-w*65536,y=h+w+65535,w=Math.floor(y/65536),h=y-w*65536,y=g+w+65535,w=Math.floor(y/65536),g=y-w*65536,y=b+w+65535,w=Math.floor(y/65536),b=y-w*65536,y=p+w+65535,w=Math.floor(y/65536),p=y-w*65536,y=S+w+65535,w=Math.floor(y/65536),S=y-w*65536,y=O+w+65535,w=Math.floor(y/65536),O=y-w*65536,y=_+w+65535,w=Math.floor(y/65536),_=y-w*65536,y=v+w+65535,w=Math.floor(y/65536),v=y-w*65536,y=N+w+65535,w=Math.floor(y/65536),N=y-w*65536,y=ee+w+65535,w=Math.floor(y/65536),ee=y-w*65536,y=Y+w+65535,w=Math.floor(y/65536),Y=y-w*65536,y=ne+w+65535,w=Math.floor(y/65536),ne=y-w*65536,T+=w-1+37*(w-1),w=1,y=T+w+65535,w=Math.floor(y/65536),T=y-w*65536,y=x+w+65535,w=Math.floor(y/65536),x=y-w*65536,y=E+w+65535,w=Math.floor(y/65536),E=y-w*65536,y=u+w+65535,w=Math.floor(y/65536),u=y-w*65536,y=h+w+65535,w=Math.floor(y/65536),h=y-w*65536,y=g+w+65535,w=Math.floor(y/65536),g=y-w*65536,y=b+w+65535,w=Math.floor(y/65536),b=y-w*65536,y=p+w+65535,w=Math.floor(y/65536),p=y-w*65536,y=S+w+65535,w=Math.floor(y/65536),S=y-w*65536,y=O+w+65535,w=Math.floor(y/65536),O=y-w*65536,y=_+w+65535,w=Math.floor(y/65536),_=y-w*65536,y=v+w+65535,w=Math.floor(y/65536),v=y-w*65536,y=N+w+65535,w=Math.floor(y/65536),N=y-w*65536,y=ee+w+65535,w=Math.floor(y/65536),ee=y-w*65536,y=Y+w+65535,w=Math.floor(y/65536),Y=y-w*65536,y=ne+w+65535,w=Math.floor(y/65536),ne=y-w*65536,T+=w-1+37*(w-1),U[0]=T,U[1]=x,U[2]=E,U[3]=u,U[4]=h,U[5]=g,U[6]=b,U[7]=p,U[8]=S,U[9]=O,U[10]=_,U[11]=v,U[12]=N,U[13]=ee,U[14]=Y,U[15]=ne}function P(U,K){I(U,K,K)}function L(U,K){const j=n();for(let y=0;y<16;y++)j[y]=K[y];for(let y=253;y>=0;y--)P(j,j),y!==2&&y!==4&&I(j,j,K);for(let y=0;y<16;y++)U[y]=j[y]}function H(U,K){const j=new Uint8Array(32),y=new Float64Array(80),w=n(),T=n(),x=n(),E=n(),u=n(),h=n();for(let S=0;S<31;S++)j[S]=U[S];j[31]=U[31]&127|64,j[0]&=248,l(y,K);for(let S=0;S<16;S++)T[S]=y[S];w[0]=E[0]=1;for(let S=254;S>=0;--S){const O=j[S>>>3]>>>(S&7)&1;a(w,T,O),a(x,E,O),f(u,w,x),d(w,w,x),f(x,T,E),d(T,T,E),P(E,u),P(h,w),I(w,x,w),I(x,T,u),f(u,w,x),d(w,w,x),P(T,w),d(x,E,h),I(w,x,s),f(w,w,E),I(x,x,w),I(w,E,h),I(E,T,y),P(T,u),a(w,T,O),a(x,E,O)}for(let S=0;S<16;S++)y[S+16]=w[S],y[S+32]=x[S],y[S+48]=T[S],y[S+64]=E[S];const g=y.subarray(32),b=y.subarray(16);L(g,g),I(b,b,g);const p=new Uint8Array(32);return c(p,b),p}t.scalarMult=H;function G(U){return H(U,i)}t.scalarMultBase=G;function V(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const K=new Uint8Array(U);return{publicKey:G(K),secretKey:K}}t.generateKeyPairFromSeed=V;function C(U){const K=(0,e.randomBytes)(32,U),j=V(K);return(0,r.wipe)(K),j}t.generateKeyPair=C;function q(U,K,j=!1){if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(K.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const y=H(U,K);if(j){let w=0;for(let T=0;T<y.length;T++)w|=y[T];if(w===0)throw new Error("X25519: invalid shared key")}return y}t.sharedKey=q})(cc);var da={},$u={};Object.defineProperty($u,"__esModule",{value:!0});var lr=De,wh=Br,oI=20;function aI(t,e,r){for(var n=1634760805,i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],o=r[11]<<24|r[10]<<16|r[9]<<8|r[8],a=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,L=r[19]<<24|r[18]<<16|r[17]<<8|r[16],H=r[23]<<24|r[22]<<16|r[21]<<8|r[20],G=r[27]<<24|r[26]<<16|r[25]<<8|r[24],V=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=1797285236,q=n,U=i,K=s,j=o,y=a,w=c,T=l,x=f,E=d,u=I,h=P,g=L,b=H,p=G,S=V,O=C,_,v=0;v<oI;v+=2)_=q+b|0,y^=_<<7|_>>>32-7,_=y+q|0,E^=_<<9|_>>>32-9,_=E+y|0,b^=_<<13|_>>>32-13,_=b+E|0,q^=_<<18|_>>>32-18,_=w+U|0,u^=_<<7|_>>>32-7,_=u+w|0,p^=_<<9|_>>>32-9,_=p+u|0,U^=_<<13|_>>>32-13,_=U+p|0,w^=_<<18|_>>>32-18,_=h+T|0,S^=_<<7|_>>>32-7,_=S+h|0,K^=_<<9|_>>>32-9,_=K+S|0,T^=_<<13|_>>>32-13,_=T+K|0,h^=_<<18|_>>>32-18,_=O+g|0,j^=_<<7|_>>>32-7,_=j+O|0,x^=_<<9|_>>>32-9,_=x+j|0,g^=_<<13|_>>>32-13,_=g+x|0,O^=_<<18|_>>>32-18,_=q+j|0,U^=_<<7|_>>>32-7,_=U+q|0,K^=_<<9|_>>>32-9,_=K+U|0,j^=_<<13|_>>>32-13,_=j+K|0,q^=_<<18|_>>>32-18,_=w+y|0,T^=_<<7|_>>>32-7,_=T+w|0,x^=_<<9|_>>>32-9,_=x+T|0,y^=_<<13|_>>>32-13,_=y+x|0,w^=_<<18|_>>>32-18,_=h+u|0,g^=_<<7|_>>>32-7,_=g+h|0,E^=_<<9|_>>>32-9,_=E+g|0,u^=_<<13|_>>>32-13,_=u+E|0,h^=_<<18|_>>>32-18,_=O+S|0,b^=_<<7|_>>>32-7,_=b+O|0,p^=_<<9|_>>>32-9,_=p+b|0,S^=_<<13|_>>>32-13,_=S+p|0,O^=_<<18|_>>>32-18;lr.writeUint32LE(q+n|0,t,0),lr.writeUint32LE(U+i|0,t,4),lr.writeUint32LE(K+s|0,t,8),lr.writeUint32LE(j+o|0,t,12),lr.writeUint32LE(y+a|0,t,16),lr.writeUint32LE(w+c|0,t,20),lr.writeUint32LE(T+l|0,t,24),lr.writeUint32LE(x+f|0,t,28),lr.writeUint32LE(E+d|0,t,32),lr.writeUint32LE(u+I|0,t,36),lr.writeUint32LE(h+P|0,t,40),lr.writeUint32LE(g+L|0,t,44),lr.writeUint32LE(b+H|0,t,48),lr.writeUint32LE(p+G|0,t,52),lr.writeUint32LE(S+V|0,t,56),lr.writeUint32LE(O+C|0,t,60)}function D2(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(n.length<r.length)throw new Error("Salsa20: destination is shorter than source");var s,o;if(i===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");s=new Uint8Array(16),s.set(e),o=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");s=e,o=16-i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){aI(a,s,t);for(var l=c;l<c+64&&l<r.length;l++)n[l]=r[l]^a[l-c];fI(s,o,s.length-o)}return wh.wipe(a),i===0&&wh.wipe(s),n}$u.streamXOR=D2;function cI(t,e,r,n){return n===void 0&&(n=0),wh.wipe(r),D2(t,e,r,r,n)}$u.stream=cI;function fI(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(da,"__esModule",{value:!0});var Yi=De,uI=$u,U2=Br;function K2(t,e,r,n,i){if(i===void 0&&(i=0),i===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var s=H2(t,e.subarray(0,16),new Uint8Array(32)),o=uI.streamXOR(s,e.subarray(16),r,n,i);return U2.wipe(s),o}da.streamXOR=K2;function lI(t,e,r,n){return n===void 0&&(n=0),U2.wipe(r),K2(t,e,r,r,n)}da.stream=lI;var dI=20;function H2(t,e,r){for(var n=1634760805,i=t[3]<<24|t[2]<<16|t[1]<<8|t[0],s=t[7]<<24|t[6]<<16|t[5]<<8|t[4],o=t[11]<<24|t[10]<<16|t[9]<<8|t[8],a=t[15]<<24|t[14]<<16|t[13]<<8|t[12],c=857760878,l=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],d=e[11]<<24|e[10]<<16|e[9]<<8|e[8],I=e[15]<<24|e[14]<<16|e[13]<<8|e[12],P=2036477234,L=t[19]<<24|t[18]<<16|t[17]<<8|t[16],H=t[23]<<24|t[22]<<16|t[21]<<8|t[20],G=t[27]<<24|t[26]<<16|t[25]<<8|t[24],V=t[31]<<24|t[30]<<16|t[29]<<8|t[28],C=1797285236,q,U=0;U<dI;U+=2)q=n+H|0,a^=q<<7|q>>>32-7,q=a+n|0,d^=q<<9|q>>>32-9,q=d+a|0,H^=q<<13|q>>>32-13,q=H+d|0,n^=q<<18|q>>>32-18,q=c+i|0,I^=q<<7|q>>>32-7,q=I+c|0,G^=q<<9|q>>>32-9,q=G+I|0,i^=q<<13|q>>>32-13,q=i+G|0,c^=q<<18|q>>>32-18,q=P+l|0,V^=q<<7|q>>>32-7,q=V+P|0,s^=q<<9|q>>>32-9,q=s+V|0,l^=q<<13|q>>>32-13,q=l+s|0,P^=q<<18|q>>>32-18,q=C+L|0,o^=q<<7|q>>>32-7,q=o+C|0,f^=q<<9|q>>>32-9,q=f+o|0,L^=q<<13|q>>>32-13,q=L+f|0,C^=q<<18|q>>>32-18,q=n+o|0,i^=q<<7|q>>>32-7,q=i+n|0,s^=q<<9|q>>>32-9,q=s+i|0,o^=q<<13|q>>>32-13,q=o+s|0,n^=q<<18|q>>>32-18,q=c+a|0,l^=q<<7|q>>>32-7,q=l+c|0,f^=q<<9|q>>>32-9,q=f+l|0,a^=q<<13|q>>>32-13,q=a+f|0,c^=q<<18|q>>>32-18,q=P+I|0,L^=q<<7|q>>>32-7,q=L+P|0,d^=q<<9|q>>>32-9,q=d+L|0,I^=q<<13|q>>>32-13,q=I+d|0,P^=q<<18|q>>>32-18,q=C+V|0,H^=q<<7|q>>>32-7,q=H+C|0,G^=q<<9|q>>>32-9,q=G+H|0,V^=q<<13|q>>>32-13,q=V+G|0,C^=q<<18|q>>>32-18;return Yi.writeUint32LE(n,r,0),Yi.writeUint32LE(c,r,4),Yi.writeUint32LE(P,r,8),Yi.writeUint32LE(C,r,12),Yi.writeUint32LE(l,r,16),Yi.writeUint32LE(f,r,20),Yi.writeUint32LE(d,r,24),Yi.writeUint32LE(I,r,28),r}da.hsalsa=H2;var Di={},F2={},ha={};Object.defineProperty(ha,"__esModule",{value:!0});function hI(t,e,r){return~(t-1)&e|t-1&r}ha.select=hI;function pI(t,e){return(t|0)-(e|0)-1>>>31&1}ha.lessOrEqual=pI;function j2(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}ha.compare=j2;function gI(t,e){return t.length===0||e.length===0?!1:j2(t,e)!==0}ha.equal=gI;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ha,r=Br;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var l=a[2]|a[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var f=a[4]|a[5]<<8;this._r[2]=(l>>>10|f<<6)&7939;var d=a[6]|a[7]<<8;this._r[3]=(f>>>7|d<<9)&8191;var I=a[8]|a[9]<<8;this._r[4]=(d>>>4|I<<12)&255,this._r[5]=I>>>1&8190;var P=a[10]|a[11]<<8;this._r[6]=(I>>>14|P<<2)&8191;var L=a[12]|a[13]<<8;this._r[7]=(P>>>11|L<<5)&8065;var H=a[14]|a[15]<<8;this._r[8]=(L>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,l){for(var f=this._fin?0:2048,d=this._h[0],I=this._h[1],P=this._h[2],L=this._h[3],H=this._h[4],G=this._h[5],V=this._h[6],C=this._h[7],q=this._h[8],U=this._h[9],K=this._r[0],j=this._r[1],y=this._r[2],w=this._r[3],T=this._r[4],x=this._r[5],E=this._r[6],u=this._r[7],h=this._r[8],g=this._r[9];l>=16;){var b=a[c+0]|a[c+1]<<8;d+=b&8191;var p=a[c+2]|a[c+3]<<8;I+=(b>>>13|p<<3)&8191;var S=a[c+4]|a[c+5]<<8;P+=(p>>>10|S<<6)&8191;var O=a[c+6]|a[c+7]<<8;L+=(S>>>7|O<<9)&8191;var _=a[c+8]|a[c+9]<<8;H+=(O>>>4|_<<12)&8191,G+=_>>>1&8191;var v=a[c+10]|a[c+11]<<8;V+=(_>>>14|v<<2)&8191;var N=a[c+12]|a[c+13]<<8;C+=(v>>>11|N<<5)&8191;var ee=a[c+14]|a[c+15]<<8;q+=(N>>>8|ee<<8)&8191,U+=ee>>>5|f;var Y=0,ne=Y;ne+=d*K,ne+=I*(5*g),ne+=P*(5*h),ne+=L*(5*u),ne+=H*(5*E),Y=ne>>>13,ne&=8191,ne+=G*(5*x),ne+=V*(5*T),ne+=C*(5*w),ne+=q*(5*y),ne+=U*(5*j),Y+=ne>>>13,ne&=8191;var se=Y;se+=d*j,se+=I*K,se+=P*(5*g),se+=L*(5*h),se+=H*(5*u),Y=se>>>13,se&=8191,se+=G*(5*E),se+=V*(5*x),se+=C*(5*T),se+=q*(5*w),se+=U*(5*y),Y+=se>>>13,se&=8191;var ae=Y;ae+=d*y,ae+=I*j,ae+=P*K,ae+=L*(5*g),ae+=H*(5*h),Y=ae>>>13,ae&=8191,ae+=G*(5*u),ae+=V*(5*E),ae+=C*(5*x),ae+=q*(5*T),ae+=U*(5*w),Y+=ae>>>13,ae&=8191;var W=Y;W+=d*w,W+=I*y,W+=P*j,W+=L*K,W+=H*(5*g),Y=W>>>13,W&=8191,W+=G*(5*h),W+=V*(5*u),W+=C*(5*E),W+=q*(5*x),W+=U*(5*T),Y+=W>>>13,W&=8191;var F=Y;F+=d*T,F+=I*w,F+=P*y,F+=L*j,F+=H*K,Y=F>>>13,F&=8191,F+=G*(5*g),F+=V*(5*h),F+=C*(5*u),F+=q*(5*E),F+=U*(5*x),Y+=F>>>13,F&=8191;var k=Y;k+=d*x,k+=I*T,k+=P*w,k+=L*y,k+=H*j,Y=k>>>13,k&=8191,k+=G*K,k+=V*(5*g),k+=C*(5*h),k+=q*(5*u),k+=U*(5*E),Y+=k>>>13,k&=8191;var m=Y;m+=d*E,m+=I*x,m+=P*T,m+=L*w,m+=H*y,Y=m>>>13,m&=8191,m+=G*j,m+=V*K,m+=C*(5*g),m+=q*(5*h),m+=U*(5*u),Y+=m>>>13,m&=8191;var B=Y;B+=d*u,B+=I*E,B+=P*x,B+=L*T,B+=H*w,Y=B>>>13,B&=8191,B+=G*y,B+=V*j,B+=C*K,B+=q*(5*g),B+=U*(5*h),Y+=B>>>13,B&=8191;var X=Y;X+=d*h,X+=I*u,X+=P*E,X+=L*x,X+=H*T,Y=X>>>13,X&=8191,X+=G*w,X+=V*y,X+=C*j,X+=q*K,X+=U*(5*g),Y+=X>>>13,X&=8191;var Z=Y;Z+=d*g,Z+=I*h,Z+=P*u,Z+=L*E,Z+=H*x,Y=Z>>>13,Z&=8191,Z+=G*T,Z+=V*w,Z+=C*y,Z+=q*j,Z+=U*K,Y+=Z>>>13,Z&=8191,Y=(Y<<2)+Y|0,Y=Y+ne|0,ne=Y&8191,Y=Y>>>13,se+=Y,d=ne,I=se,P=ae,L=W,H=F,G=k,V=m,C=B,q=X,U=Z,c+=16,l-=16}this._h[0]=d,this._h[1]=I,this._h[2]=P,this._h[3]=L,this._h[4]=H,this._h[5]=G,this._h[6]=V,this._h[7]=C,this._h[8]=q,this._h[9]=U},o.prototype.finish=function(a,c){c===void 0&&(c=0);var l=new Uint16Array(10),f,d,I,P;if(this._leftover){for(P=this._leftover,this._buffer[P++]=1;P<16;P++)this._buffer[P]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,P=2;P<10;P++)this._h[P]+=f,f=this._h[P]>>>13,this._h[P]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,P=1;P<10;P++)l[P]=this._h[P]+f,f=l[P]>>>13,l[P]&=8191;for(l[9]-=1<<13,d=(f^1)-1,P=0;P<10;P++)l[P]&=d;for(d=~d,P=0;P<10;P++)this._h[P]=this._h[P]&d|l[P];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,I=this._h[0]+this._pad[0],this._h[0]=I&65535,P=1;P<8;P++)I=(this._h[P]+this._pad[P]|0)+(I>>>16)|0,this._h[P]=I&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,l=a.length,f;if(this._leftover){f=16-this._leftover,f>l&&(f=l);for(var d=0;d<f;d++)this._buffer[this._leftover+d]=a[c+d];if(l-=f,c+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(f=l-l%16,this._blocks(a,c,f),c+=f,l-=f),l){for(var d=0;d<l;d++)this._buffer[this._leftover+d]=a[c+d];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var l=c.digest();return c.clean(),l}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s})(F2);Object.defineProperty(Di,"__esModule",{value:!0});Di.generateKey=Di.openSecretBox=Di.secretBox=void 0;const zf=da,Ah=F2,Lo=Br,bI=Qs;function vI(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,zf.stream)(t,i,n,8);const s=new Uint8Array(16+r.length);for(let a=0;a<32&&a<r.length;a++)s[16+a]=r[a]^n[32+a];r.length>32&&(0,zf.streamXOR)(t,i,r.subarray(32),s.subarray(16+32),8);const o=(0,Ah.oneTimeAuth)(n.subarray(0,32),s.subarray(16));for(let a=0;a<o.length;a++)s[a]=o[a];return(0,Lo.wipe)(o),(0,Lo.wipe)(n),(0,Lo.wipe)(i),s}Di.secretBox=vI;function mI(t,e,r){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(r.length<16)throw new Error("secretBox data must be at least 16 bytes");const n=new Uint8Array(64),i=new Uint8Array(24+8);i.set(e),(0,zf.stream)(t,i,n,8);const s=(0,Ah.oneTimeAuth)(n.subarray(0,32),r.subarray(16));if(!(0,Ah.equal)(s,r.subarray(0,16)))return null;const o=r.subarray(16),a=new Uint8Array(o.length);for(let c=0;c<32&&c<o.length;c++)a[c]=o[c]^n[32+c];return o.length>32&&(0,zf.streamXOR)(t,i,o.subarray(32),a.subarray(32),8),(0,Lo.wipe)(s),(0,Lo.wipe)(n),(0,Lo.wipe)(i),a}Di.openSecretBox=mI;function yI(t){return(0,bI.randomBytes)(32,t)}Di.generateKey=yI;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.openBox=t.box=t.precomputeSharedKey=t.generateKeyPair=void 0;const e=cc,r=da,n=Di,i=Br;var s=cc;Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return s.generateKeyPair}});const o=new Uint8Array(16);function a(f,d){const I=(0,e.scalarMult)(d,f);return(0,r.hsalsa)(I,o,I),I}t.precomputeSharedKey=a;function c(f,d,I,P){const L=a(f,d),H=(0,n.secretBox)(L,I,P);return(0,i.wipe)(L),H}t.box=c;function l(f,d,I,P){const L=a(f,d),H=(0,n.openSecretBox)(L,I,P);return(0,i.wipe)(L),H}t.openBox=l})(k2);(function(t){var e=Ma&&Ma.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(i,s);(!a||("get"in a?!i.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,a)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=Ma&&Ma.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(k2,t),r(Di,t)})(Yo);var zu={};Object.defineProperty(zu,"__esModule",{value:!0});var gg="utf8: invalid string",pi="utf8: invalid source encoding";function EI(t){for(var e=new Uint8Array(G2(t)),r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=192|i>>6,e[r++]=128|i&63):i<55296?(e[r++]=224|i>>12,e[r++]=128|i>>6&63,e[r++]=128|i&63):(n++,i=(i&1023)<<10,i|=t.charCodeAt(n)&1023,i+=65536,e[r++]=240|i>>18,e[r++]=128|i>>12&63,e[r++]=128|i>>6&63,e[r++]=128|i&63)}return e}var ws=zu.encode=EI;function G2(t){for(var e=0,r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<128)e+=1;else if(n<2048)e+=2;else if(n<55296)e+=3;else if(n<=57343){if(r>=t.length-1)throw new Error(gg);r++,e+=4}else throw new Error(gg)}return e}zu.encodedLength=G2;function _I(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n&128){var i=void 0;if(n<224){if(r>=t.length)throw new Error(pi);var s=t[++r];if((s&192)!==128)throw new Error(pi);n=(n&31)<<6|s&63,i=128}else if(n<240){if(r>=t.length-1)throw new Error(pi);var s=t[++r],o=t[++r];if((s&192)!==128||(o&192)!==128)throw new Error(pi);n=(n&15)<<12|(s&63)<<6|o&63,i=2048}else if(n<248){if(r>=t.length-2)throw new Error(pi);var s=t[++r],o=t[++r],a=t[++r];if((s&192)!==128||(o&192)!==128||(a&192)!==128)throw new Error(pi);n=(n&15)<<18|(s&63)<<12|(o&63)<<6|a&63,i=65536}else throw new Error(pi);if(n<i||n>=55296&&n<=57343)throw new Error(pi);if(n>=65536){if(n>1114111)throw new Error(pi);n-=65536,e.push(String.fromCharCode(55296|n>>10)),n=56320|n&1023}}e.push(String.fromCharCode(n))}return e.join("")}zu.decode=_I;var V2={};Object.defineProperty(V2,"__esModule",{value:!0});function wI(){for(var t=0,e=0;e<arguments.length;e++)t+=arguments[e].length;for(var r=new Uint8Array(t),n=0,e=0;e<arguments.length;e++){var i=arguments[e];r.set(i,n),n+=i.length}return r}var AI=V2.concat=wI,li=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const xh=24;function Gi(t){return Buffer.from(t).toString("hex")}function mo(t){return li(this,void 0,void 0,function*(){return Gi(typeof t=="string"?on.hash(ws(t),32):on.hash(t,32))})}function bg(t){return li(this,void 0,void 0,function*(){return Hr.generateKeyPairFromSeed(on.hash(ws(t),32))})}function q2(t,e){return li(this,void 0,void 0,function*(){const r=Buffer.from(Qs.randomBytes(xh)),n=Buffer.concat([r,Buffer.from(Yo.secretBox(e,r,Buffer.from(t,"utf8")))]);return Gi(n)})}function $2(t,e){return li(this,void 0,void 0,function*(){const r=t.slice(0,xh),n=t.slice(xh),i=Yo.openSecretBox(e,r,n);if(!i)throw new Error("Decryption failed");return Buffer.from(i).toString("utf8")})}function xI(t,e){return li(this,void 0,void 0,function*(){const r=Hr.convertPublicKeyToX25519(Buffer.from(e)),n=Yo.generateKeyPair(),s=new on.BLAKE2b(24).update(n.publicKey,32).update(r,32).digest(),o=typeof t=="string"?ws(t):t,a=Yo.box(r,n.secretKey,s,o);return Gi(AI(n.publicKey,a))})}function z2(t,e,r){return li(this,void 0,void 0,function*(){const n=Hr.convertSecretKeyToX25519(Buffer.from(r)),i=Hr.convertPublicKeyToX25519(Buffer.from(e)),s=typeof t=="string"?ws(t):t,o=s.slice(0,32),a=s.slice(32),l=new on.BLAKE2b(24).update(o,32).update(i,32).digest(),f=Yo.openBox(o,n,l,a);if(!f)throw new Error("Decryption failed");return Buffer.from(f).toString()})}function SI(t){return li(this,void 0,void 0,function*(){const e={edpk:{length:54,prefix:Buffer.from(new Uint8Array([6,161,159]))},sppk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,161]))},p2pk:{length:55,prefix:Buffer.from(new Uint8Array([6,161,164]))}};let r,n;if(t.length===64)r=e.edpk.prefix,n=t;else{const s=Object.entries(e);for(let o=0;o<s.length;o++){const[a,c]=s[o];if(t.startsWith(a)&&t.length===c.length){r=c.prefix;const l=$r.decode(t);n=l.slice(a.length,l.length).toString("hex");break}}}if(!r||!n)throw new Error(`invalid publicKey: ${t}`);const i=on.hash(Buffer.from(n,"hex"),20);return $r.encode(Buffer.concat([r,Buffer.from(i)]))})}function vg(t,e){return`@${t}:${e}`}const RI=t=>li(void 0,void 0,void 0,function*(){if(t.length%2!==0)return ws(t);let e=t;t.startsWith("0x")&&(e=t.slice(2));const r=Buffer.from(e,"hex");return r.length===e.length/2?r:ws(t)}),II=(t,e=32)=>li(void 0,void 0,void 0,function*(){return on.hash(t,e)}),OI=(t,e)=>li(void 0,void 0,void 0,function*(){const r=yield RI(t),n=new Uint8Array([9,245,205,134,18]),i=yield II(r),s=Hr.sign(e.secretKey,i);return $r.encode(Buffer.concat([Buffer.from(n),Buffer.from(s)]))});var TI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function Vi(){return TI(this,void 0,void 0,function*(){const t=Qs.randomBytes(16);return[t.slice(0,4),t.slice(4,6),t.slice(6,8),t.slice(8,10),t.slice(10,16)].map(function(e){return Buffer.from(e).toString("hex")}).join("-")})}const Wf=24,Xf=16;var Ke;(function(t){t.BlockchainRequest="blockchain_request",t.PermissionRequest="permission_request",t.SignPayloadRequest="sign_payload_request",t.OperationRequest="operation_request",t.BroadcastRequest="broadcast_request",t.BlockchainResponse="blockchain_response",t.PermissionResponse="permission_response",t.SignPayloadResponse="sign_payload_response",t.OperationResponse="operation_response",t.BroadcastResponse="broadcast_response",t.Acknowledge="acknowledge",t.Disconnect="disconnect",t.Error="error"})(Ke||(Ke={}));var _n;(function(t){t.SIGN="sign",t.OPERATION_REQUEST="operation_request",t.ENCRYPT="encrypt",t.NOTIFICATION="notification",t.THRESHOLD="threshold"})(_n||(_n={}));var St;(function(t){t.MAINNET="mainnet",t.GHOSTNET="ghostnet",t.MONDAYNET="mondaynet",t.DAILYNET="dailynet",t.DELPHINET="delphinet",t.EDONET="edonet",t.FLORENCENET="florencenet",t.GRANADANET="granadanet",t.HANGZHOUNET="hangzhounet",t.ITHACANET="ithacanet",t.JAKARTANET="jakartanet",t.KATHMANDUNET="kathmandunet",t.LIMANET="limanet",t.MUMBAINET="mumbainet",t.CUSTOM="custom"})(St||(St={}));var mg;(function(t){t.ENDORSEMENT="endorsement",t.SEED_NONCE_REVELATION="seed_nonce_revelation",t.DOUBLE_ENDORSEMENT_EVIDENCE="double_endorsement_evidence",t.DOUBLE_BAKING_EVIDENCE="double_baking_evidence",t.ACTIVATE_ACCOUNT="activate_account",t.PROPOSALS="proposals",t.BALLOT="ballot",t.REVEAL="reveal",t.TRANSACTION="transaction",t.ORIGINATION="origination",t.DELEGATION="delegation"})(mg||(mg={}));var wn;(function(t){t.WEBSITE="website",t.EXTENSION="extension",t.P2P="p2p"})(wn||(wn={}));var ki;(function(t){t.BACKGROUND="toBackground",t.PAGE="toPage",t.EXTENSION="toExtension"})(ki||(ki={}));var pt;(function(t){t.BROADCAST_ERROR="BROADCAST_ERROR",t.NETWORK_NOT_SUPPORTED="NETWORK_NOT_SUPPORTED",t.NO_ADDRESS_ERROR="NO_ADDRESS_ERROR",t.NO_PRIVATE_KEY_FOUND_ERROR="NO_PRIVATE_KEY_FOUND_ERROR",t.NOT_GRANTED_ERROR="NOT_GRANTED_ERROR",t.PARAMETERS_INVALID_ERROR="PARAMETERS_INVALID_ERROR",t.TOO_MANY_OPERATIONS="TOO_MANY_OPERATIONS",t.TRANSACTION_INVALID_ERROR="TRANSACTION_INVALID_ERROR",t.SIGNATURE_TYPE_NOT_SUPPORTED="SIGNATURE_TYPE_NOT_SUPPORTED",t.ABORTED_ERROR="ABORTED_ERROR",t.UNKNOWN_ERROR="UNKNOWN_ERROR"})(pt||(pt={}));var sn;(function(t){t.NOT_CONNECTED="NOT_CONNECTED",t.CONNECTING="CONNECTING",t.CONNECTED="CONNECTED"})(sn||(sn={}));var Xs;(function(t){t.CHROME_MESSAGE="chrome_message",t.POST_MESSAGE="post_message",t.LEDGER="ledger",t.P2P="p2p"})(Xs||(Xs={}));var ke;(function(t){t.TRANSPORT_P2P_PEERS_DAPP="beacon:communication-peers-dapp",t.TRANSPORT_P2P_PEERS_WALLET="beacon:communication-peers-wallet",t.TRANSPORT_POSTMESSAGE_PEERS_DAPP="beacon:postmessage-peers-dapp",t.TRANSPORT_POSTMESSAGE_PEERS_WALLET="beacon:postmessage-peers-wallet",t.ACCOUNTS="beacon:accounts",t.ACTIVE_ACCOUNT="beacon:active-account",t.PUSH_TOKENS="beacon:push-tokens",t.BEACON_SDK_SECRET_SEED="beacon:sdk-secret-seed",t.APP_METADATA_LIST="beacon:app-metadata-list",t.PERMISSION_LIST="beacon:permissions",t.BEACON_SDK_VERSION="beacon:sdk_version",t.MATRIX_PRESERVED_STATE="beacon:sdk-matrix-preserved-state",t.MATRIX_PEER_ROOM_IDS="beacon:matrix-peer-rooms",t.MATRIX_SELECTED_NODE="beacon:matrix-selected-node",t.MULTI_NODE_SETUP_DONE="beacon:multi-node-setup"})(ke||(ke={}));const md={[ke.TRANSPORT_P2P_PEERS_DAPP]:[],[ke.TRANSPORT_P2P_PEERS_WALLET]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP]:[],[ke.TRANSPORT_POSTMESSAGE_PEERS_WALLET]:[],[ke.ACCOUNTS]:[],[ke.ACTIVE_ACCOUNT]:void 0,[ke.PUSH_TOKENS]:[],[ke.BEACON_SDK_SECRET_SEED]:void 0,[ke.APP_METADATA_LIST]:[],[ke.PERMISSION_LIST]:[],[ke.BEACON_SDK_VERSION]:void 0,[ke.MATRIX_PRESERVED_STATE]:{},[ke.MATRIX_PEER_ROOM_IDS]:{},[ke.MATRIX_SELECTED_NODE]:void 0,[ke.MULTI_NODE_SETUP_DONE]:void 0};var Zi;(function(t){t.RAW="raw",t.OPERATION="operation",t.MICHELINE="micheline"})(Zi||(Zi={}));var Jf;(function(t){t.LIGHT="light",t.DARK="dark"})(Jf||(Jf={}));var Sh;(function(t){t.EUROPE_EAST="europe-east",t.EUROPE_WEST="europe-west",t.NORTH_AMERICA_EAST="north-america-east",t.NORTH_AMERICA_WEST="north-america-west",t.CENTRAL_AMERICA="central-america",t.SOUTH_AMERICA="south-america",t.ASIA_EAST="asia-east",t.ASIA_WEST="asia-west",t.AFRICA="africa",t.AUSTRALIA="australia"})(Sh||(Sh={}));const PI="3.3.4",W2="3",Xc=[t=>{}];let st={postMessage:(t,e)=>{console.log("GOT MOCK POST MESSAGE",t),Xc.forEach(r=>{r({data:t})})},addEventListener:(t,e)=>{Xc.push(e)},removeEventListener:(t,e)=>{Xc.splice(Xc.indexOf(r=>r===e),1)},location:{origin:"*"}};try{typeof window<"u"&&(st=window)}catch(t){console.log(`not defined: ${t}`)}var Jc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class NI{constructor(e){if(this._beaconId=new Jt,this._keyPair=new Jt,!e.name)throw new Error("Name not set");if(!e.storage)throw new Error("Storage not set");this.name=e.name,this.iconUrl=e.iconUrl,this.appUrl=e.appUrl,this.storage=e.storage,st.beaconCreatedClientInstance?console.error("[BEACON] It looks like you created multiple Beacon SDK Client instances. This can lead to problems. Only create one instance and re-use it everywhere."):st.beaconCreatedClientInstance=!0,this.initSDK().catch(console.error)}get beaconId(){return this._beaconId.promise}get keyPair(){return this._keyPair.promise}destroy(){return Jc(this,void 0,void 0,function*(){yield this.removeBeaconEntriesFromStorage(),st.beaconCreatedClientInstance=!1})}initSDK(){return Jc(this,void 0,void 0,function*(){return this.storage.set(ke.BEACON_SDK_VERSION,PI).catch(console.error),this.loadOrCreateBeaconSecret().catch(console.error),this.keyPair.then(e=>{this._beaconId.resolve(Gi(e.publicKey))})})}removeBeaconEntriesFromStorage(){return Jc(this,void 0,void 0,function*(){const e=Object.values(ke);yield Promise.all(e.map(r=>this.storage.delete(r)))})}loadOrCreateBeaconSecret(){return Jc(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.BEACON_SDK_SECRET_SEED);if(e&&typeof e=="string")this._keyPair.resolve(yield bg(e));else{const r=yield Vi();yield this.storage.set(ke.BEACON_SDK_SECRET_SEED,r),this._keyPair.resolve(yield bg(r))}})}}var Ia=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class V0{constructor(e,r){this.storage=e,this.storageKey=r}getAll(){return Ia(this,void 0,void 0,function*(){return this.storage.get(this.storageKey)})}getOne(e){return Ia(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey);return r.find(e)})}addOne(e,r,n=!0){return Ia(this,void 0,void 0,function*(){const i=yield this.storage.get(this.storageKey);if(!i.some(r))i.push(e);else if(n)for(let s=0;s<i.length;s++)r(i[s])&&(i[s]=e);return this.storage.set(this.storageKey,i)})}remove(e){return Ia(this,void 0,void 0,function*(){const r=yield this.storage.get(this.storageKey),n=r.filter(i=>!e(i));return this.storage.set(this.storageKey,n)})}removeAll(){return Ia(this,void 0,void 0,function*(){return this.storage.delete(this.storageKey)})}}var MI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Rh=(t,e)=>MI(void 0,void 0,void 0,function*(){const r=[t,e.type];e.name&&r.push(`name:${e.name}`),e.rpcUrl&&r.push(`rpc:${e.rpcUrl}`);const n=Buffer.from(on.hash(ws(r.join("-")),10));return $r.encode(n)});var LI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class CI{static hasPermission(e,r,n){return LI(this,void 0,void 0,function*(){switch(e.type){case Ke.PermissionRequest:case Ke.BroadcastRequest:return!0;case Ke.OperationRequest:{const i=yield Rh(e.sourceAddress,e.network),s=yield r(i);return s?s.scopes.includes(_n.OPERATION_REQUEST):!1}case Ke.SignPayloadRequest:{const s=(yield n()).filter(o=>o.address===e.sourceAddress);return s.length===0?!1:s.some(o=>o.scopes.includes(_n.SIGN))}default:throw new Error("Message not handled")}})}}var Ps=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class BI{constructor(e){this.storageManager=new V0(e,ke.ACCOUNTS)}getAccounts(){return Ps(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAccount(e){return Ps(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.accountIdentifier===e)})}addAccount(e){return Ps(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.accountIdentifier===e.accountIdentifier)})}removeAccount(e){return Ps(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.accountIdentifier===e)})}removeAccounts(e){return Ps(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.accountIdentifier))})}removeAllAccounts(){return Ps(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}hasPermission(e){return Ps(this,void 0,void 0,function*(){return CI.hasPermission(e,this.getAccount.bind(this),this.getAccounts.bind(this))})}}var kI=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Qo=t=>kI(void 0,void 0,void 0,function*(){const e=Buffer.from(on.hash(Buffer.from(t,"hex"),5));return $r.encode(e)});let X2=!!st.beaconSdkDebugEnabled;X2&&console.log("[BEACON]: Debug mode is ON (turned on either by the developer or a browser extension)");const DI=()=>X2;class UI{constructor(){}debug(e,r,...n){this._log("debug",e,r,n)}log(e,r,...n){this._log("log",e,r,n)}warn(e,r,...n){this._log("warn",e,r,n)}error(e,r,...n){this._log("error",e,r,n)}_log(e,r,n,i=[]){if(!DI())return;let s=`[BEACON] ${new Date().toISOString()} [${r}](${n})`,o=i;switch(i[0]&&typeof i[0]=="string"&&(s+=` ${i[0]}`,o=i.slice(1)),e){case"error":console.group(s),console.error(...o);break;case"warn":console.group(s),console.warn(...o);break;case"debug":console.groupCollapsed(s),console.debug(...o);break;default:console.group(s),console.log(...o)}console.groupEnd()}}class Jr{constructor(e){this.name=e}debug(e,...r){Yc.debug(this.name,e,r)}log(e,...r){Yc.log(this.name,e,r)}warn(e,...r){Yc.warn(this.name,e,r)}error(e,...r){Yc.error(this.name,e,r)}}let Yc=new UI;var Tr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const KI=new Jr("Client");class HI extends NI{constructor(e){var r;super(e),this.rateLimit=2,this.rateLimitWindowInSeconds=5,this.requestCounter=[],this._transport=new Jt,this.accountManager=new BI(e.storage),this.matrixNodes=(r=e.matrixNodes)!==null&&r!==void 0?r:{},this.handleResponse=(n,i)=>{throw new Error(`not overwritten${JSON.stringify(n)} - ${JSON.stringify(i)}`)}}get transport(){return this._transport.promise}get connectionStatus(){var e,r;return(r=(e=this._transport.promiseResult)===null||e===void 0?void 0:e.connectionStatus)!==null&&r!==void 0?r:sn.NOT_CONNECTED}get ready(){return this.transport.then(()=>{})}getAccounts(){return Tr(this,void 0,void 0,function*(){return this.accountManager.getAccounts()})}getAccount(e){return Tr(this,void 0,void 0,function*(){return this.accountManager.getAccount(e)})}removeAccount(e){return Tr(this,void 0,void 0,function*(){return this.accountManager.removeAccount(e)})}removeAllAccounts(){return Tr(this,void 0,void 0,function*(){return this.accountManager.removeAllAccounts()})}addRequestAndCheckIfRateLimited(){return Tr(this,void 0,void 0,function*(){const e=new Date().getTime();return this.requestCounter=this.requestCounter.filter(r=>r+this.rateLimitWindowInSeconds*1e3>e),this.requestCounter.push(e),this.requestCounter.length>this.rateLimit})}init(e){return Tr(this,void 0,void 0,function*(){return this._transport.status===zn.RESOLVED?(yield this.transport).type:(yield this.setTransport(e),e.type)})}getOwnAppMetadata(){return Tr(this,void 0,void 0,function*(){return{senderId:yield Qo(yield this.beaconId),name:this.name,icon:this.iconUrl}})}getPeers(){return Tr(this,void 0,void 0,function*(){return(yield this.transport).getPeers()})}addPeer(e){return Tr(this,void 0,void 0,function*(){return(yield this.transport).addPeer(e)})}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return Tr(this,void 0,void 0,function*(){this._transport.status===zn.RESOLVED&&(yield(yield this.transport).disconnect()),yield e.destroy.call(this)})}setTransport(e){return Tr(this,void 0,void 0,function*(){e?this._transport.isSettled()?this._transport=Jt.resolve(e):this._transport.resolve(e):this._transport.isSettled()&&(this._transport=new Jt)})}addListener(e){return Tr(this,void 0,void 0,function*(){e.addListener((r,n)=>Tr(this,void 0,void 0,function*(){if(typeof r=="string"){const i=yield new Js().deserialize(r);this.handleResponse(i,n)}})).catch(r=>KI.error("addListener",r))})}sendDisconnectToPeer(e,r){return Tr(this,void 0,void 0,function*(){const n={id:yield Vi(),version:e.version,senderId:yield Qo(yield this.beaconId),type:Ke.Disconnect},i=yield new Js().serialize(n);yield(r??(yield this.transport)).send(i,e)})}}class Yr{constructor(e,r){this.name="BeaconError",this.title="Error",this.message=`[${e}]:${r}`,this.description=r}get fullDescription(){return{description:this.description}}static getError(e,r){switch(e){case pt.BROADCAST_ERROR:return new FI;case pt.NETWORK_NOT_SUPPORTED:return new jI;case pt.NO_ADDRESS_ERROR:return new GI;case pt.NO_PRIVATE_KEY_FOUND_ERROR:return new VI;case pt.NOT_GRANTED_ERROR:return new qI;case pt.PARAMETERS_INVALID_ERROR:return new $I;case pt.TOO_MANY_OPERATIONS:return new zI;case pt.TRANSACTION_INVALID_ERROR:return new WI(r);case pt.SIGNATURE_TYPE_NOT_SUPPORTED:return new eO;case pt.ABORTED_ERROR:return new YI;case pt.UNKNOWN_ERROR:return new J2}}}class FI extends Yr{constructor(){super(pt.BROADCAST_ERROR,"The transaction could not be broadcast to the network. Please try again."),this.name="BroadcastBeaconError",this.title="Broadcast Error"}}class jI extends Yr{constructor(){super(pt.NETWORK_NOT_SUPPORTED,"The wallet does not support this network. Please select another one."),this.name="NetworkNotSupportedBeaconError",this.title="Network Error"}}class GI extends Yr{constructor(){super(pt.NO_ADDRESS_ERROR,"The wallet does not have an account set up. Please make sure to set up your wallet and try again."),this.name="NoAddressBeaconError",this.title="No Address"}}class VI extends Yr{constructor(){super(pt.NO_PRIVATE_KEY_FOUND_ERROR,"The account you are trying to interact with is not available. Please make sure to add the account to your wallet and try again."),this.name="NoPrivateKeyBeaconError",this.title="Account Not Found"}}class qI extends Yr{constructor(){super(pt.NOT_GRANTED_ERROR,"You do not have the necessary permissions to perform this action. Please initiate another permission request and give the necessary permissions."),this.name="NotGrantedBeaconError",this.title="Permission Not Granted"}}class $I extends Yr{constructor(){super(pt.PARAMETERS_INVALID_ERROR,"Some of the parameters you provided are invalid and the request could not be completed. Please check your inputs and try again."),this.name="ParametersInvalidBeaconError",this.title="Parameters Invalid"}}class zI extends Yr{constructor(){super(pt.TOO_MANY_OPERATIONS,"The request contains too many transactions. Please include fewer operations and try again."),this.name="TooManyOperationsBeaconError",this.title="Too Many Operations"}}class WI extends Yr{constructor(e){super(pt.TRANSACTION_INVALID_ERROR,"The transaction is invalid and the node did not accept it."),this.data=e,this.name="TransactionInvalidBeaconError",this.title="Transaction Invalid",this.data=e}get fullDescription(){return{description:this.description,data:JSON.stringify(this.data,void 0,2)}}}class J2 extends Yr{constructor(){super(pt.UNKNOWN_ERROR,"An unknown error occured. Please try again or report it to a developer."),this.name="UnknownBeaconError",this.title="Error"}}var hn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const gi=new Jr("Transport");class Y2{constructor(e,r,n){this.type=Xs.POST_MESSAGE,this._isConnected=sn.NOT_CONNECTED,this.listeners=[],this.name=e,this.client=r,this.peerManager=n}get connectionStatus(){return this._isConnected}static isAvailable(){return hn(this,void 0,void 0,function*(){return Promise.resolve(!1)})}connect(){return hn(this,void 0,void 0,function*(){gi.log("connect"),this._isConnected=sn.CONNECTED})}disconnect(){return hn(this,void 0,void 0,function*(){gi.log("disconnect"),this._isConnected=sn.NOT_CONNECTED})}send(e,r){return hn(this,void 0,void 0,function*(){if(r)return this.client.sendMessage(e,r);{const i=(yield this.getPeers()).map(s=>this.client.sendMessage(e,s));return(yield Promise.all(i))[0]}})}addListener(e){return hn(this,void 0,void 0,function*(){gi.debug("addListener"),this.listeners.push(e)})}removeListener(e){return hn(this,void 0,void 0,function*(){gi.log("removeListener"),this.listeners=this.listeners.filter(r=>r!==e)})}getPeers(){return hn(this,void 0,void 0,function*(){return this.peerManager.getPeers()})}addPeer(e,r=!0){return hn(this,void 0,void 0,function*(){gi.log("addPeer","adding peer",e),yield this.peerManager.addPeer(e),yield this.listen(e.publicKey)})}removePeer(e){return hn(this,void 0,void 0,function*(){gi.log("removePeer","removing peer",e),yield this.peerManager.removePeer(e.publicKey),this.client&&(yield this.client.unsubscribeFromEncryptedMessage(e.publicKey))})}removeAllPeers(){return hn(this,void 0,void 0,function*(){gi.log("removeAllPeers"),yield this.peerManager.removeAllPeers(),this.client&&(yield this.client.unsubscribeFromEncryptedMessages())})}notifyListeners(e,r){return hn(this,void 0,void 0,function*(){this.listeners.length===0?gi.warn("notifyListeners","0 listeners notified!",this):gi.log("notifyListeners",`Notifying ${this.listeners.length} listeners`,this),this.listeners.forEach(n=>{n(e,r)})})}}globalThis&&globalThis.__awaiter;var Qc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class XI{constructor(e){this.prefix=e}static isSupported(){return Qc(this,void 0,void 0,function*(){return Promise.resolve(typeof window<"u"&&!!window.localStorage)})}get(e){return Qc(this,void 0,void 0,function*(){const r=localStorage.getItem(this.getPrefixedKey(e));if(r)try{return JSON.parse(r)}catch{return r}else return typeof md[e]=="object"?JSON.parse(JSON.stringify(md[e])):md[e]})}set(e,r){return Qc(this,void 0,void 0,function*(){return typeof r=="string"?localStorage.setItem(this.getPrefixedKey(e),r):localStorage.setItem(this.getPrefixedKey(e),JSON.stringify(r))})}delete(e){return Qc(this,void 0,void 0,function*(){return Promise.resolve(localStorage.removeItem(this.getPrefixedKey(e)))})}getPrefixedKey(e){return this.prefix?`${this.prefix}-${e}`:e}}globalThis&&globalThis.__awaiter;var yg=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Js{serialize(e){return yg(this,void 0,void 0,function*(){const r=JSON.stringify(e);return $r.encode(Buffer.from(r))})}deserialize(e){return yg(this,void 0,void 0,function*(){if(typeof e!="string")throw new Error("Encoded payload needs to be a string");return JSON.parse($r.decode(e).toString())})}}var ho=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class JI{constructor(e){this.storageManager=new V0(e,ke.APP_METADATA_LIST)}getAppMetadataList(){return ho(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getAppMetadata(e){return ho(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.senderId===e)})}addAppMetadata(e){return ho(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.senderId===e.senderId)})}removeAppMetadata(e){return ho(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.senderId===e)})}removeAppMetadatas(e){return ho(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.senderId))})}removeAllAppMetadata(){return ho(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}globalThis&&globalThis.__awaiter;class YI extends Yr{constructor(){super(pt.ABORTED_ERROR,"The action was aborted by the user."),this.name="UnknownBeaconError",this.title="Aborted"}}var Ns=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Yf{constructor(e,r){this.storageManager=new V0(e,r)}hasPeer(e){return Ns(this,void 0,void 0,function*(){return!!(yield this.getPeer(e))})}getPeers(){return Ns(this,void 0,void 0,function*(){return this.storageManager.getAll()})}getPeer(e){return Ns(this,void 0,void 0,function*(){return this.storageManager.getOne(r=>r.publicKey===e)})}addPeer(e){return Ns(this,void 0,void 0,function*(){return this.storageManager.addOne(e,r=>r.publicKey===e.publicKey)})}removePeer(e){return Ns(this,void 0,void 0,function*(){return this.storageManager.remove(r=>r.publicKey===e)})}removePeers(e){return Ns(this,void 0,void 0,function*(){return this.storageManager.remove(r=>e.includes(r.publicKey))})}removeAllPeers(){return Ns(this,void 0,void 0,function*(){return this.storageManager.removeAll()})}}var yd={},Ed={},Eg;function QI(){return Eg||(Eg=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.X25519Session=t.SECRET_SEED_LENGTH=t.SAVED_STATE_LENGTH=t.ACCEPT_MESSAGE_LENGTH=t.OFFER_MESSAGE_LENGTH=void 0;const e=Qs,r=Br,n=cc,i=Q2();t.OFFER_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.ACCEPT_MESSAGE_LENGTH=n.PUBLIC_KEY_LENGTH,t.SAVED_STATE_LENGTH=n.SECRET_KEY_LENGTH,t.SECRET_SEED_LENGTH=n.SECRET_KEY_LENGTH;class s{constructor(a,c){this.offerMessageLength=t.OFFER_MESSAGE_LENGTH,this.acceptMessageLength=t.ACCEPT_MESSAGE_LENGTH,this.sharedKeyLength=n.SHARED_KEY_LENGTH,this.savedStateLength=t.SAVED_STATE_LENGTH,this._seed=a||(0,e.randomBytes)(n.SECRET_KEY_LENGTH,c)}saveState(){return new Uint8Array(this._seed)}restoreState(a){return this._seed=new Uint8Array(a),this}clean(){this._seed&&(0,r.wipe)(this._seed),this._keyPair&&((0,r.wipe)(this._keyPair.secretKey),(0,r.wipe)(this._keyPair.publicKey)),this._sharedKey&&(0,r.wipe)(this._sharedKey),this._sessionKeys&&((0,r.wipe)(this._sessionKeys.receive),(0,r.wipe)(this._sessionKeys.send))}offer(){return this._keyPair=(0,n.generateKeyPairFromSeed)(this._seed),new Uint8Array(this._keyPair.publicKey)}accept(a){if(this._keyPair)throw new Error("X25519Session: accept shouldn't be called by offering party");if(a.length!==this.offerMessageLength)throw new Error("X25519Session: incorrect offer message length");if(this._sharedKey)throw new Error("X25519Session: accept was already called");const c=(0,n.generateKeyPairFromSeed)(this._seed);return this._sharedKey=(0,n.sharedKey)(c.secretKey,a),this._sessionKeys=(0,i.clientSessionKeysFromSharedKey)(this._sharedKey,c.publicKey,a),(0,r.wipe)(c.secretKey),c.publicKey}finish(a){if(a.length!==this.acceptMessageLength)throw new Error("X25519Session: incorrect accept message length");if(!this._keyPair)throw new Error("X25519Session: no offer state");if(this._sharedKey)throw new Error("X25519Session: finish was already called");return this._sharedKey=(0,n.sharedKey)(this._keyPair.secretKey,a),this._sessionKeys=(0,i.serverSessionKeysFromSharedKey)(this._sharedKey,this._keyPair.publicKey,a),this}getSharedKey(){if(!this._sharedKey)throw new Error("X25519Session: no shared key established");return new Uint8Array(this._sharedKey)}getSessionKeys(){if(!this._sessionKeys)throw new Error("X25519Session: no shared key established");return{receive:new Uint8Array(this._sessionKeys.receive),send:new Uint8Array(this._sessionKeys.send)}}}t.X25519Session=s}(Ed)),Ed}var _g;function Q2(){return _g||(_g=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.clientSessionKeys=t.serverSessionKeys=t.clientSessionKeysFromSharedKey=t.serverSessionKeysFromSharedKey=t.X25519Session=void 0;const e=on,r=cc;var n=QI();Object.defineProperty(t,"X25519Session",{enumerable:!0,get:function(){return n.X25519Session}});const i=32;function s(l,f,d,I=e.BLAKE2b){const P=new I;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const L=P.update(l).update(d).update(f).digest();return{send:L.subarray(0,i),receive:L.subarray(i)}}t.serverSessionKeysFromSharedKey=s;function o(l,f,d,I=e.BLAKE2b){const P=new I;if(P.digestLength!==i*2)throw new Error("X25519: incorrect digest length");const L=P.update(l).update(f).update(d).digest();return{receive:L.subarray(0,i),send:L.subarray(i)}}t.clientSessionKeysFromSharedKey=o;function a(l,f,d=e.BLAKE2b){const I=(0,r.sharedKey)(l.secretKey,f);return s(I,l.publicKey,f,d)}t.serverSessionKeys=a;function c(l,f,d=e.BLAKE2b){const I=(0,r.sharedKey)(l.secretKey,f);return o(I,l.publicKey,f,d)}t.clientSessionKeys=c}(yd)),yd}var wg=Q2(),Oa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class Z2{constructor(e){this.keyPair=e}getPublicKey(){return Oa(this,void 0,void 0,function*(){return Gi(this.keyPair.publicKey)})}getPublicKeyHash(){return Oa(this,void 0,void 0,function*(){return mo(this.keyPair.publicKey)})}createCryptoBoxServer(e,r){return Oa(this,void 0,void 0,function*(){return wg.serverSessionKeys({publicKey:Hr.convertPublicKeyToX25519(r.publicKey),secretKey:Hr.convertSecretKeyToX25519(r.secretKey)},Hr.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}createCryptoBoxClient(e,r){return Oa(this,void 0,void 0,function*(){return wg.clientSessionKeys({publicKey:Hr.convertPublicKeyToX25519(r.publicKey),secretKey:Hr.convertSecretKeyToX25519(r.secretKey)},Hr.convertPublicKeyToX25519(Buffer.from(e,"hex")))})}encryptMessageAsymmetric(e,r){return Oa(this,void 0,void 0,function*(){return xI(r,Buffer.from(e,"hex"))})}}var Ms=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class ZI extends Z2{constructor(e,r){super(r),this.name=e,this.init().catch(console.error)}start(){return Ms(this,void 0,void 0,function*(){yield Promise.resolve()})}getPairingRequestInfo(){return Ms(this,void 0,void 0,function*(){return{id:yield Vi(),type:"postmessage-pairing-request",name:this.name,version:W2,publicKey:yield this.getPublicKey()}})}getPairingResponseInfo(e){return Ms(this,void 0,void 0,function*(){return{id:e.id,type:"postmessage-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey()}})}unsubscribeFromEncryptedMessage(e){return Ms(this,void 0,void 0,function*(){this.activeListeners.get(e)&&this.activeListeners.delete(e)})}unsubscribeFromEncryptedMessages(){return Ms(this,void 0,void 0,function*(){this.activeListeners.clear()})}decryptMessage(e,r){return Ms(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxServer(e,this.keyPair),i=Buffer.from(r,"hex");if(i.length>=Wf+Xf)try{return yield $2(i,n.receive)}catch{}throw new Error("Could not decrypt message")})}encryptMessage(e,r){return Ms(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(e,this.keyPair);return q2(r,n.send)})}}class eO extends Yr{constructor(){super(pt.SIGNATURE_TYPE_NOT_SUPPORTED,"The wallet is not able to sign payloads of this type."),this.name="SignatureTypeNotSupportedBeaconError",this.title="Signature Type Not Supported"}}var Ih={},tO={get exports(){return Ih},set exports(t){Ih=t}},Qf={},rO={get exports(){return Qf},set exports(t){Qf=t}},ey=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},nO=ey,so=Object.prototype.toString;function q0(t){return so.call(t)==="[object Array]"}function Oh(t){return typeof t>"u"}function iO(t){return t!==null&&!Oh(t)&&t.constructor!==null&&!Oh(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function sO(t){return so.call(t)==="[object ArrayBuffer]"}function oO(t){return typeof FormData<"u"&&t instanceof FormData}function aO(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function cO(t){return typeof t=="string"}function fO(t){return typeof t=="number"}function ty(t){return t!==null&&typeof t=="object"}function vf(t){if(so.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function uO(t){return so.call(t)==="[object Date]"}function lO(t){return so.call(t)==="[object File]"}function dO(t){return so.call(t)==="[object Blob]"}function ry(t){return so.call(t)==="[object Function]"}function hO(t){return ty(t)&&ry(t.pipe)}function pO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function gO(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function bO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $0(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),q0(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Th(){var t={};function e(i,s){vf(t[s])&&vf(i)?t[s]=Th(t[s],i):vf(i)?t[s]=Th({},i):q0(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)$0(arguments[r],e);return t}function vO(t,e,r){return $0(e,function(i,s){r&&typeof i=="function"?t[s]=nO(i,r):t[s]=i}),t}function mO(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Qr={isArray:q0,isArrayBuffer:sO,isBuffer:iO,isFormData:oO,isArrayBufferView:aO,isString:cO,isNumber:fO,isObject:ty,isPlainObject:vf,isUndefined:Oh,isDate:uO,isFile:lO,isBlob:dO,isFunction:ry,isStream:hO,isURLSearchParams:pO,isStandardBrowserEnv:bO,forEach:$0,merge:Th,extend:vO,trim:gO,stripBOM:mO},po=Qr;function Ag(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ny=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(po.isURLSearchParams(r))i=r.toString();else{var s=[];po.forEach(r,function(c,l){c===null||typeof c>"u"||(po.isArray(c)?l=l+"[]":c=[c],po.forEach(c,function(d){po.isDate(d)?d=d.toISOString():po.isObject(d)&&(d=JSON.stringify(d)),s.push(Ag(l)+"="+Ag(d))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},yO=Qr;function Wu(){this.handlers=[]}Wu.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Wu.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Wu.prototype.forEach=function(e){yO.forEach(this.handlers,function(n){n!==null&&e(n)})};var EO=Wu,_O=Qr,wO=function(e,r){_O.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},iy=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},_d,xg;function sy(){if(xg)return _d;xg=1;var t=iy;return _d=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},_d}var wd,Sg;function AO(){if(Sg)return wd;Sg=1;var t=sy();return wd=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},wd}var Ad,Rg;function xO(){if(Rg)return Ad;Rg=1;var t=Qr;return Ad=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,c){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ad}var xd,Ig;function SO(){return Ig||(Ig=1,xd=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),xd}var Sd,Og;function RO(){return Og||(Og=1,Sd=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Sd}var Rd,Tg;function IO(){if(Tg)return Rd;Tg=1;var t=SO(),e=RO();return Rd=function(n,i){return n&&!t(i)?e(n,i):i},Rd}var Id,Pg;function OO(){if(Pg)return Id;Pg=1;var t=Qr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Id=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Id}var Od,Ng;function TO(){if(Ng)return Od;Ng=1;var t=Qr;return Od=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var c=t.isString(a)?s(a):a;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Od}var Td,Mg;function Xu(){if(Mg)return Td;Mg=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Td=t,Td}var Pd,Lg;function Cg(){if(Lg)return Pd;Lg=1;var t=Qr,e=AO(),r=xO(),n=ny,i=IO(),s=OO(),o=TO(),a=sy(),c=Ju(),l=Xu();return Pd=function(d){return new Promise(function(P,L){var H=d.data,G=d.headers,V=d.responseType,C;function q(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(H)&&delete G["Content-Type"];var U=new XMLHttpRequest;if(d.auth){var K=d.auth.username||"",j=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";G.Authorization="Basic "+btoa(K+":"+j)}var y=i(d.baseURL,d.url);U.open(d.method.toUpperCase(),n(y,d.params,d.paramsSerializer),!0),U.timeout=d.timeout;function w(){if(U){var x="getAllResponseHeaders"in U?s(U.getAllResponseHeaders()):null,E=!V||V==="text"||V==="json"?U.responseText:U.response,u={data:E,status:U.status,statusText:U.statusText,headers:x,config:d,request:U};e(function(g){P(g),q()},function(g){L(g),q()},u),U=null}}if("onloadend"in U?U.onloadend=w:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(w)},U.onabort=function(){U&&(L(a("Request aborted",d,"ECONNABORTED",U)),U=null)},U.onerror=function(){L(a("Network Error",d,null,U)),U=null},U.ontimeout=function(){var E=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",u=d.transitional||c.transitional;d.timeoutErrorMessage&&(E=d.timeoutErrorMessage),L(a(E,d,u.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},t.isStandardBrowserEnv()){var T=(d.withCredentials||o(y))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;T&&(G[d.xsrfHeaderName]=T)}"setRequestHeader"in U&&t.forEach(G,function(E,u){typeof H>"u"&&u.toLowerCase()==="content-type"?delete G[u]:U.setRequestHeader(u,E)}),t.isUndefined(d.withCredentials)||(U.withCredentials=!!d.withCredentials),V&&V!=="json"&&(U.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&U.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(x){U&&(L(!x||x&&x.type?new l("canceled"):x),U.abort(),U=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),H||(H=null),U.send(H)})},Pd}var Nd,Bg;function Ju(){if(Bg)return Nd;Bg=1;var t=Qr,e=wO,r=iy,n={"Content-Type":"application/x-www-form-urlencoded"};function i(c,l){!t.isUndefined(c)&&t.isUndefined(c["Content-Type"])&&(c["Content-Type"]=l)}function s(){var c;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(c=Cg()),c}function o(c,l,f){if(t.isString(c))try{return(l||JSON.parse)(c),t.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(f||JSON.stringify)(c)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(l,f){return e(f,"Accept"),e(f,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(f,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||f&&f["Content-Type"]==="application/json"?(i(f,"application/json"),o(l)):l}],transformResponse:[function(l){var f=this.transitional||a.transitional,d=f&&f.silentJSONParsing,I=f&&f.forcedJSONParsing,P=!d&&this.responseType==="json";if(P||I&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(L){if(P)throw L.name==="SyntaxError"?r(L,this,"E_JSON_PARSE"):L}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){a.headers[l]={}}),t.forEach(["post","put","patch"],function(l){a.headers[l]=t.merge(n)}),Nd=a,Nd}var PO=Qr,NO=Ju(),MO=function(e,r,n){var i=this||NO;return PO.forEach(n,function(o){e=o.call(i,e,r)}),e},Md,kg;function oy(){return kg||(kg=1,Md=function(e){return!!(e&&e.__CANCEL__)}),Md}var Dg=Qr,Ld=MO,LO=oy(),CO=Ju(),BO=Xu();function Cd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new BO("canceled")}var kO=function(e){Cd(e),e.headers=e.headers||{},e.data=Ld.call(e,e.data,e.headers,e.transformRequest),e.headers=Dg.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Dg.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||CO.adapter;return r(e).then(function(i){return Cd(e),i.data=Ld.call(e,i.data,i.headers,e.transformResponse),i},function(i){return LO(i)||(Cd(e),i&&i.response&&(i.response.data=Ld.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Dr=Qr,ay=function(e,r){r=r||{};var n={};function i(f,d){return Dr.isPlainObject(f)&&Dr.isPlainObject(d)?Dr.merge(f,d):Dr.isPlainObject(d)?Dr.merge({},d):Dr.isArray(d)?d.slice():d}function s(f){if(Dr.isUndefined(r[f])){if(!Dr.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!Dr.isUndefined(r[f]))return i(void 0,r[f])}function a(f){if(Dr.isUndefined(r[f])){if(!Dr.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Dr.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var I=l[d]||s,P=I(d);Dr.isUndefined(P)&&I!==c||(n[d]=P)}),n},Bd,Ug;function cy(){return Ug||(Ug=1,Bd={version:"0.24.0"}),Bd}var DO=cy().version,z0={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){z0[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Kg={};z0.transitional=function(e,r,n){function i(s,o){return"[Axios v"+DO+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Kg[o]&&(Kg[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function UO(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var KO={assertOptions:UO,validators:z0},fy=Qr,HO=ny,Hg=EO,Fg=kO,Yu=ay,uy=KO,go=uy.validators;function Ic(t){this.defaults=t,this.interceptors={request:new Hg,response:new Hg}}Ic.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Yu(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&uy.assertOptions(r,{silentJSONParsing:go.transitional(go.boolean),forcedJSONParsing:go.transitional(go.boolean),clarifyTimeoutError:go.transitional(go.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(e)===!1||(i=i&&I.synchronous,n.unshift(I.fulfilled,I.rejected))});var s=[];this.interceptors.response.forEach(function(I){s.push(I.fulfilled,I.rejected)});var o;if(!i){var a=[Fg,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var c=e;n.length;){var l=n.shift(),f=n.shift();try{c=l(c)}catch(d){f(d);break}}try{o=Fg(c)}catch(d){return Promise.reject(d)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Ic.prototype.getUri=function(e){return e=Yu(this.defaults,e),HO(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};fy.forEach(["delete","get","head","options"],function(e){Ic.prototype[e]=function(r,n){return this.request(Yu(n||{},{method:e,url:r,data:(n||{}).data}))}});fy.forEach(["post","put","patch"],function(e){Ic.prototype[e]=function(r,n,i){return this.request(Yu(i||{},{method:e,url:r,data:n}))}});var FO=Ic,kd,jg;function jO(){if(jg)return kd;jg=1;var t=Xu();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(c){i.subscribe(c),o=c}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},kd=e,kd}var Dd,Gg;function GO(){return Gg||(Gg=1,Dd=function(e){return function(n){return e.apply(null,n)}}),Dd}var Ud,Vg;function VO(){return Vg||(Vg=1,Ud=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Ud}var qg=Qr,qO=ey,mf=FO,$O=ay,zO=Ju();function ly(t){var e=new mf(t),r=qO(mf.prototype.request,e);return qg.extend(r,mf.prototype,e),qg.extend(r,e),r.create=function(i){return ly($O(t,i))},r}var di=ly(zO);di.Axios=mf;di.Cancel=Xu();di.CancelToken=jO();di.isCancel=oy();di.VERSION=cy().version;di.all=function(e){return Promise.all(e)};di.spread=GO();di.isAxiosError=VO();rO.exports=di;Qf.default=di;(function(t){t.exports=Qf})(tO);const Zf=cb(Ih);var eu;(function(t){t.TEXT="m.text"})(eu||(eu={}));class W0{constructor(e,r,n,i){this.type=e,this.sender=r,this.content=n,this.timestamp=i}static from(e){if(JO(e))return new W0(e.content.msgtype,e.sender,e.content.body,e.origin_server_ts)}}const WO=t=>t.type==="m.room.create"&&t.content instanceof Object&&"creator"in t.content,XO=t=>t.type==="m.room.member"&&t.content instanceof Object&&"membership"in t.content&&t.content.membership==="join",dy=t=>t.type==="m.room.message",JO=t=>dy(t)&&t.content instanceof Object&&"msgtype"in t.content&&t.content.msgtype===eu.TEXT;var vr;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JOINED=1]="JOINED",t[t.INVITED=2]="INVITED",t[t.LEFT=3]="LEFT"})(vr||(vr={}));class Lt{constructor(e,r=vr.UNKNOWN,n=[],i=[]){this.id=e,this.status=r,this.members=n,this.messages=i}static fromSync(e){var r,n,i;if(!e)return[];function s(o,a){return Object.entries(o).map(([c,l])=>a(c,l))}return[...s((r=e.join)!==null&&r!==void 0?r:{},Lt.fromJoined),...s((n=e.invite)!==null&&n!==void 0?n:{},Lt.fromInvited),...s((i=e.leave)!==null&&i!==void 0?i:{},Lt.fromLeft)]}static from(e,r){return typeof e=="string"?new Lt(e,r||vr.UNKNOWN):r!==void 0?new Lt(e.id,r,e.members,e.messages):e}static merge(e,r){return!r||r.id!==e.id?Lt.from(e):new Lt(e.id,e.status,[...r.members,...e.members].filter((n,i,s)=>s.indexOf(n)===i),[...r.messages,...e.messages])}static fromJoined(e,r){const n=[...r.state.events,...r.timeline.events],i=Lt.getMembersFromEvents(n),s=Lt.getMessagesFromEvents(n);return new Lt(e,vr.JOINED,i,s)}static fromInvited(e,r){const n=Lt.getMembersFromEvents(r.invite_state.events);return new Lt(e,vr.INVITED,n)}static fromLeft(e,r){const n=[...r.state.events,...r.timeline.events],i=Lt.getMembersFromEvents(n),s=Lt.getMessagesFromEvents(n);return new Lt(e,vr.LEFT,i,s)}static getMembersFromEvents(e){return Lt.getUniqueEvents(e.filter(r=>WO(r)||XO(r))).map(r=>r.sender).filter((r,n,i)=>i.indexOf(r)===n)}static getMessagesFromEvents(e){return Lt.getUniqueEvents(e.filter(dy)).map(r=>W0.from(r)).filter(Boolean)}static getUniqueEvents(e){const r={},n=[];return e.forEach((i,s)=>{const o=i.event_id;(o===void 0||!(o in r))&&(o!==void 0&&(r[o]=s),n.push(i))}),n}}var Zc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const $g=["syncToken","rooms"];class YO{constructor(e){this.storage=e,this.state={isRunning:!1,userId:void 0,deviceId:void 0,txnNo:0,accessToken:void 0,syncToken:void 0,pollingTimeout:void 0,pollingRetries:0,rooms:{}},this.onStateChangedListeners=new Map,this.waitReadyPromise=new Promise((r,n)=>Zc(this,void 0,void 0,function*(){try{yield this.initFromStorage(),r()}catch(i){n(i)}}))}get(e){return this.state[e]}getRoom(e){const r=Lt.from(e,vr.UNKNOWN);return this.state.rooms[r.id]||r}update(e){return Zc(this,void 0,void 0,function*(){yield this.waitReady();const r=Object.assign({},this.state);this.setState(e),this.updateStorage(e),this.notifyListeners(r,this.state,e)})}onStateChanged(e,...r){r.length>0?r.forEach(n=>{this.onStateChangedListeners.set(n,e)}):this.onStateChangedListeners.set("all",e)}waitReady(){return Zc(this,void 0,void 0,function*(){return this.waitReadyPromise})}initFromStorage(){return Zc(this,void 0,void 0,function*(){const e=yield this.storage.get(ke.MATRIX_PRESERVED_STATE);this.setState(e)})}prepareData(e){const n=["rooms"].some(i=>e[i]!==void 0)?JSON.parse(JSON.stringify(e)):e;return Object.values(n.rooms||{}).forEach(i=>{i.messages=[]}),n}updateStorage(e){if(Object.entries(e).filter(([n,i])=>$g.includes(n)&&!!i).length>0){const n={};$g.forEach(i=>{n[i]=this.state[i]}),this.storage.set(ke.MATRIX_PRESERVED_STATE,this.prepareData(n))}}setState(e){this.state={isRunning:e.isRunning||this.state.isRunning,userId:e.userId||this.state.userId,deviceId:e.deviceId||this.state.deviceId,txnNo:e.txnNo||this.state.txnNo,accessToken:e.accessToken||this.state.accessToken,syncToken:e.syncToken||this.state.syncToken,pollingTimeout:e.pollingTimeout||this.state.pollingTimeout,pollingRetries:e.pollingRetries||this.state.pollingRetries,rooms:this.mergeRooms(this.state.rooms,e.rooms)}}mergeRooms(e,r){if(!r)return e;const n=Array.isArray(r)?r:Object.values(r),i=Object.assign({},e);return n.forEach(s=>{i[s.id]=Lt.merge(s,e[s.id])}),i}notifyListeners(e,r,n){const i=this.onStateChangedListeners.get("all");i&&i(e,r,n),G0(n).filter(s=>n[s]!==void 0).forEach(s=>{const o=this.onStateChangedListeners.get(s);o&&o(e,r,n)})}}var Ta=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const QO=new Jr("MatrixHttpClient"),ZO="/_matrix/client/r0";class eT{constructor(e){this.baseUrl=e,this.cancelTokenSource=Zf.CancelToken.source()}get(e,r,n){return Ta(this,void 0,void 0,function*(){return this.send("GET",e,n,r)})}post(e,r,n,i){return Ta(this,void 0,void 0,function*(){return this.send("POST",e,n,i,r)})}put(e,r,n,i){return Ta(this,void 0,void 0,function*(){return this.send("PUT",e,n,i,r)})}cancelAllRequests(){return Ta(this,void 0,void 0,function*(){return this.cancelTokenSource.cancel("Manually cancelled")})}send(e,r,n,i,s){return Ta(this,void 0,void 0,function*(){const o=n?this.getHeaders(n):void 0,a=i?this.getParams(i):void 0;let c;try{c=yield Zf.request({method:e,url:r,baseURL:this.apiUrl(ZO),headers:o,data:s,params:a,cancelToken:this.cancelTokenSource.token})}catch(l){const f=l;throw QO.error("send",f.code,f.message,f.response.data),l.response.data}return c.data})}getHeaders(e){const r={},n=[];if(e.accessToken&&n.push(["Authorization",`Bearer ${e.accessToken}`]),n.length!==0){for(const[i,s]of n)r[i]=s;return r}}getParams(e){if(!e)return;const r=Object.assign(e,{});return G0(r).forEach(n=>r[n]===void 0&&delete r[n]),r}apiUrl(...e){const r=this.baseUrl.endsWith("/")?this.baseUrl.substr(0,this.baseUrl.length-1):this.baseUrl,n=e.map(i=>i.startsWith("/")?i.substr(1):i);return[r,...n].join("/")}}var ef=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class tT{constructor(e){this.httpClient=e}createRoom(e,r={}){return ef(this,void 0,void 0,function*(){return this.httpClient.post("/createRoom",r,{accessToken:e})})}inviteToRoom(e,r,n){return ef(this,void 0,void 0,function*(){return n.status!==vr.JOINED&&n.status!==vr.UNKNOWN?Promise.reject(`User is not a member of room ${n.id}.`):this.httpClient.post(`/rooms/${encodeURIComponent(n.id)}/invite`,{user_id:r},{accessToken:e})})}joinRoom(e,r){return ef(this,void 0,void 0,function*(){return r.status===vr.JOINED?Promise.resolve({room_id:r.id}):this.httpClient.post(`/rooms/${encodeURIComponent(r.id)}/join`,{},{accessToken:e})})}getJoinedRooms(e){return ef(this,void 0,void 0,function*(){return this.httpClient.get("/joined_rooms",void 0,{accessToken:e})})}}var rT=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class nT{constructor(e){this.httpClient=e}login(e,r,n){return rT(this,void 0,void 0,function*(){return this.httpClient.post("/login",{type:"m.login.password",identifier:{type:"m.id.user",user:e},password:r,device_id:n})})}}var Kd=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class iT{constructor(e){this.httpClient=e,this.cachedPromises=new Map}sync(e,r){return Kd(this,void 0,void 0,function*(){return this.withCache("sync",()=>this.httpClient.get("/sync",{timeout:r?r.pollingTimeout:void 0,since:r?r.syncToken:void 0},{accessToken:e}))})}sendMessage(e,r,n,i){return Kd(this,void 0,void 0,function*(){return new Promise((s,o)=>this.scheduleEvent({accessToken:e,roomId:r,type:"m.room.message",content:n,txnId:i,onSuccess:s,onError:o}))})}scheduleEvent(e){this.sendEvent(e)}sendEvent(e){return Kd(this,void 0,void 0,function*(){const{roomId:r,type:n,txnId:i,content:s,accessToken:o}=e;try{const a=yield this.httpClient.put(`/rooms/${encodeURIComponent(r)}/send/${n}/${encodeURIComponent(i)}`,s,{accessToken:o});e.onSuccess(a)}catch(a){e.onError(a)}})}withCache(e,r){let n=this.cachedPromises.get(e);return n||(n=r().finally(()=>{this.cachedPromises.delete(e)}),this.cachedPromises.set(e,n)),n}}class sT{constructor(){this.events={}}on(e,r){return typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(r),()=>this.removeListener(e,r)}removeListener(e,r){if(typeof this.events[e]!="object")return;if(!r){this.events[e]=[];return}const n=this.events[e].indexOf(r);n>-1&&this.events[e].splice(n,1)}removeAllListeners(){Object.keys(this.events).forEach(e=>this.events[e].splice(0,this.events[e].length))}emit(e,...r){typeof this.events[e]=="object"&&[...this.events[e]].forEach(n=>n.apply(this,r))}once(e,r){const n=this.on(e,(...i)=>{n(),r.apply(this,i)});return n}}var Kr;(function(t){t.INVITE="invite",t.MESSAGE="message"})(Kr||(Kr={}));class oT extends sT{constructor(){super(...arguments),this.eventEmitProviders=new Map([[Kr.INVITE,()=>[this.isInvite,this.emitInvite.bind(this)]],[Kr.MESSAGE,()=>[this.isMessage,this.emitMessage.bind(this)]]])}onStateChanged(e,r,n){for(const i of G0(Kr))this.emitIfEvent(Kr[i],n)}emitIfEvent(e,r){const n=this.eventEmitProviders.get(e);if(n){const[i,s]=n();i(r)&&s(e,r)}}emitClientEvent(e,r,n){this.emit(e,{type:e,content:r,timestamp:n})}isInvite(e){return e.rooms?e.rooms.some(r=>r.status===vr.INVITED):!1}emitInvite(e,r){r.rooms.filter(n=>n.status===vr.INVITED).map(n=>[n.id,n.members]).forEach(([n,i])=>{this.emitClientEvent(e,{roomId:n,members:i})})}isMessage(e){return e.rooms?e.rooms.some(r=>r.messages.length>0):!1}emitMessage(e,r){r.rooms.filter(n=>n.messages.length>0).map(n=>n.messages.map(i=>[n.id,i,i.timestamp])).reduce((n,i)=>n.concat(i),[]).forEach(([n,i,s])=>{this.emitClientEvent(e,{roomId:n,message:i},s)})}}var xt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Hd=new Jr("MatrixClient"),aT=3,cT=5e3;class X0{constructor(e,r,n,i,s,o){this.store=e,this.eventEmitter=r,this.userService=n,this.roomService=i,this.eventService=s,this.httpClient=o,this.isActive=!0,this._isReady=new Jt,this.store.onStateChanged((a,c,l)=>{this.eventEmitter.onStateChanged(a,c,l)},"rooms")}static create(e){const r=new YO(e.storage),n=new oT,i=new eT(e.baseUrl),s=new nT(i),o=new tT(i),a=new iT(i);return new X0(r,n,s,o,a,i)}get joinedRooms(){return new Promise(e=>xt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===vr.JOINED))}))}get invitedRooms(){return new Promise(e=>xt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===vr.INVITED))}))}get leftRooms(){return new Promise(e=>xt(this,void 0,void 0,function*(){yield this.isConnected(),e(Object.values(this.store.get("rooms")).filter(r=>r.status===vr.LEFT))}))}start(e){return xt(this,void 0,void 0,function*(){const r=yield this.userService.login(e.id,e.password,e.deviceId);yield this.store.update({accessToken:r.access_token});const n=new Promise((i,s)=>xt(this,void 0,void 0,function*(){yield this.poll(0,o=>xt(this,void 0,void 0,function*(){this.store.get("isRunning")||i(),yield this.store.update({isRunning:!0,syncToken:o.next_batch,pollingTimeout:3e4,pollingRetries:0,rooms:Lt.fromSync(o.rooms)})}),o=>xt(this,void 0,void 0,function*(){this.store.get("isRunning")||s(o),yield this.store.update({isRunning:!1,pollingRetries:this.store.get("pollingRetries")+1})}))}));return n.then(()=>{this._isReady.resolve()}).catch(console.error),n})}isConnected(){return xt(this,void 0,void 0,function*(){return this._isReady.promise})}stop(){return xt(this,void 0,void 0,function*(){return Hd.log("MATRIX CLIENT STOPPED"),this.isActive=!1,this._isReady=new Jt,this.httpClient.cancelAllRequests()})}subscribe(e,r){this.eventEmitter.on(e,r)}unsubscribe(e,r){r&&this.eventEmitter.removeListener(e,r)}unsubscribeAll(e){this.eventEmitter.removeListener(e)}getRoomById(e){return xt(this,void 0,void 0,function*(){return yield this.isConnected(),this.store.getRoom(e)})}createTrustedPrivateRoom(...e){return xt(this,void 0,void 0,function*(){return yield this.isConnected(),this.requiresAuthorization("createRoom",r=>xt(this,void 0,void 0,function*(){return(yield this.roomService.createRoom(r,{room_version:"5",invite:e,preset:"public_chat",is_direct:!0})).room_id}))})}inviteToRooms(e,...r){return xt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("invite",n=>Promise.all(r.map(i=>{const s=this.store.getRoom(i);this.roomService.inviteToRoom(n,e,s).catch(o=>Hd.warn("inviteToRooms",o))})))})}joinRooms(...e){return xt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("join",r=>Promise.all(e.map(n=>{const i=this.store.getRoom(n);return this.roomService.joinRoom(r,i)})))})}sendTextMessage(e,r){return xt(this,void 0,void 0,function*(){yield this.isConnected(),yield this.requiresAuthorization("send",n=>xt(this,void 0,void 0,function*(){const i=yield this.createTxnId();return this.eventService.sendMessage(n,e,{msgtype:"m.text",body:r},i)}))})}poll(e,r,n){return xt(this,void 0,void 0,function*(){const i=this.store,s=this.sync.bind(this),o=(a,c)=>xt(this,void 0,void 0,function*(){let l=0;try{const f=yield s();r(f)}catch(f){n(f),l=i.get("pollingRetries"),this.isActive&&Hd.log(`Retry syncing... ${l} retries so far`)}finally{this.isActive?setTimeout(()=>xt(this,void 0,void 0,function*(){yield o(a,c)}),l>aT?cT+e:e):c(new Error("Syncing stopped manually."))}});return new Promise(o)})}sync(){return xt(this,void 0,void 0,function*(){return this.requiresAuthorization("sync",e=>xt(this,void 0,void 0,function*(){return this.eventService.sync(e,{pollingTimeout:this.store.get("pollingTimeout"),syncToken:this.store.get("syncToken")})}))})}requiresAuthorization(e,r){return xt(this,void 0,void 0,function*(){const n=this.store.get("accessToken");return n?r(n):Promise.reject(`${e} requires authorization but no access token has been provided.`)})}createTxnId(){return xt(this,void 0,void 0,function*(){const e=new Date().getTime(),r=this.store.get("txnNo");return yield this.store.update({txnNo:r+1}),`m${e}.${r}`})}}var tt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Re=new Jr("P2PCommunicationClient"),zg={[Sh.EUROPE_WEST]:["beacon-node-1.diamond.papers.tech","beacon-node-1.sky.papers.tech","beacon-node-2.sky.papers.tech","beacon-node-1.hope.papers.tech","beacon-node-1.hope-2.papers.tech","beacon-node-1.hope-3.papers.tech","beacon-node-1.hope-4.papers.tech","beacon-node-1.hope-5.papers.tech"]};class fT extends Z2{constructor(e,r,n,i,s,o,a){super(r),this.name=e,this.replicationCount=n,this.storage=i,this.iconUrl=o,this.appUrl=a,this.client=new Jt,this.activeListeners=new Map,this.ignoredRooms=[],this.loginCounter=0,Re.log("constructor","P2PCommunicationClient created"),this.ENABLED_RELAY_SERVERS=zg,s&&(this.ENABLED_RELAY_SERVERS=Object.assign(Object.assign({},zg),s))}getPairingRequestInfo(){return tt(this,void 0,void 0,function*(){const e={id:yield Vi(),type:"p2p-pairing-request",name:this.name,version:W2,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(e.icon=this.iconUrl),this.appUrl&&(e.appUrl=this.appUrl),e})}getPairingResponseInfo(e){return tt(this,void 0,void 0,function*(){const r={id:e.id,type:"p2p-pairing-response",name:this.name,version:e.version,publicKey:yield this.getPublicKey(),relayServer:(yield this.getRelayServer()).server};return this.iconUrl&&(r.icon=this.iconUrl),this.appUrl&&(r.appUrl=this.appUrl),r})}findBestRegion(){return tt(this,void 0,void 0,function*(){if(this.selectedRegion)return this.selectedRegion;const e=Object.keys(this.ENABLED_RELAY_SERVERS),r=[];e.forEach(i=>{var s;const o=(s=this.ENABLED_RELAY_SERVERS[i])!==null&&s!==void 0?s:[],a=Math.floor(Math.random()*o.length);r.push(this.getBeaconInfo(o[a]).then(c=>({region:i,server:o[a],response:c})).catch(c=>new Promise((l,f)=>{setTimeout(()=>f(c),2e3)})))});const n=yield Promise.race(r);return this.selectedRegion=n.region,n.region})}getRelayServer(){return tt(this,void 0,void 0,function*(){if(this.relayServer){const s=yield this.relayServer.promise;if(Date.now()-s.localTimestamp<60*1e3)return{server:s.server,timestamp:s.timestamp};const o=yield this.getBeaconInfo(s.server);return this.relayServer.resolve({server:s.server,timestamp:o.timestamp,localTimestamp:new Date().getTime()}),{server:s.server,timestamp:o.timestamp}}else this.relayServer=new Jt;const e=yield this.storage.get(ke.MATRIX_SELECTED_NODE);if(e&&e.length>0){const s=yield this.getBeaconInfo(e);return this.relayServer.resolve({server:e,timestamp:s.timestamp,localTimestamp:new Date().getTime()}),{server:e,timestamp:s.timestamp}}const r=yield this.findBestRegion(),n=this.ENABLED_RELAY_SERVERS[r];if(!n)throw new Error(`No servers found for region ${r}`);const i=[...n];for(;i.length>0;){const s=Math.floor(Math.random()*i.length),o=i[s];try{const a=yield this.getBeaconInfo(o);return this.storage.set(ke.MATRIX_SELECTED_NODE,o).catch(c=>Re.log(c)),this.relayServer.resolve({server:o,timestamp:a.timestamp,localTimestamp:new Date().getTime()}),{server:o,timestamp:a.timestamp}}catch{Re.log(`Ignoring server "${o}", trying another one...`),i.splice(s,1)}}throw this.relayServer.reject("No matrix server reachable!"),new Error("No matrix server reachable!")})}getBeaconInfo(e){return tt(this,void 0,void 0,function*(){return Zf.get(`https://${e}/_synapse/client/beacon/info`).then(r=>({region:r.data.region,known_servers:r.data.known_servers,timestamp:Math.floor(r.data.timestamp)}))})}tryJoinRooms(e,r=1){return tt(this,void 0,void 0,function*(){try{yield(yield this.client.promise).joinRooms(e)}catch(n){r<=10&&n.errcode==="M_FORBIDDEN"?(Re.log("Retrying to join...",n),setTimeout(()=>tt(this,void 0,void 0,function*(){yield this.tryJoinRooms(e,r+1)}),200)):Re.log(`Failed to join after ${r} tries.`,n)}})}start(){var e,r;return tt(this,void 0,void 0,function*(){Re.log("start","starting client"),Re.log("start","connecting to server");const n=yield this.getRelayServer(),i=X0.create({baseUrl:`https://${n.server}`,storage:this.storage});if(this.initialListener=f=>tt(this,void 0,void 0,function*(){this.initialEvent&&this.initialEvent.timestamp&&f&&f.timestamp?this.initialEvent.timestamp<f.timestamp&&(this.initialEvent=f):this.initialEvent=f}),i.subscribe(Kr.MESSAGE,this.initialListener),i.subscribe(Kr.INVITE,f=>tt(this,void 0,void 0,function*(){let d;f.content.members.length===1&&(d=f.content.members[0]),yield this.tryJoinRooms(f.content.roomId),d&&(yield this.updateRelayServer(d),yield this.updatePeerRoom(d,f.content.roomId))})),!n.timestamp)throw new Error("No timestamp received from relay server");const s=Math.floor(n.timestamp),o=`login:${Math.floor(s/(5*60))}`;Re.log("start",`login ${o}, ${yield this.getPublicKeyHash()} on ${n.server}`);const a=on.hash(ws(o),32),c=(e=this.keyPair.secretKey)!==null&&e!==void 0?e:this.keyPair.privateKey,l=Hr.sign(c,a);try{yield i.start({id:yield this.getPublicKeyHash(),password:`ed:${Gi(l)}:${yield this.getPublicKey()}`,deviceId:Gi(this.keyPair.publicKey)})}catch{if(Re.error("start","Could not log in, retrying"),yield this.reset(),!this.selectedRegion)throw new Error("No region selected.");if(this.loginCounter<=((r=this.ENABLED_RELAY_SERVERS[this.selectedRegion])!==null&&r!==void 0?r:[]).length){this.loginCounter++,this.start();return}else throw Re.error("start","Tried to log in to every known beacon node, but no login was successful."),new Error("Could not connect to any beacon nodes. Try again later.")}Re.log("start","login successful, client is ready"),this.client.resolve(i)})}stop(){return tt(this,void 0,void 0,function*(){Re.log("stop","stopping client"),this.client.isResolved()&&(yield(yield this.client.promise).stop().catch(e=>Re.error(e))),yield this.reset()})}reset(){return tt(this,void 0,void 0,function*(){Re.log("reset","resetting connection"),yield this.storage.delete(ke.MATRIX_PEER_ROOM_IDS).catch(e=>Re.log(e)),yield this.storage.delete(ke.MATRIX_PRESERVED_STATE).catch(e=>Re.log(e)),yield this.storage.delete(ke.MATRIX_SELECTED_NODE).catch(e=>Re.log(e)),this.relayServer=void 0,this.client=new Jt,this.initialEvent=void 0,this.initialListener=void 0})}listenForEncryptedMessage(e,r){return tt(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;Re.log("listenForEncryptedMessage",`start listening for encrypted messages from publicKey ${e}`);const n=yield this.createCryptoBoxServer(e,this.keyPair),i=a=>tt(this,void 0,void 0,function*(){if(this.isTextMessage(a.content)&&(yield this.isSender(a,e))){let c;yield this.updateRelayServer(a.content.message.sender),yield this.updatePeerRoom(a.content.message.sender,a.content.roomId);try{c=Buffer.from(a.content.message.content,"hex")}catch{}if(c&&c.length>=Wf+Xf)try{const l=yield $2(c,n.receive);Re.log("listenForEncryptedMessage",`received a message from ${e}`,l),r(l)}catch{}}});this.activeListeners.set(e,i),(yield this.client.promise).subscribe(Kr.MESSAGE,i);const s=this.initialEvent;s&&s.timestamp&&new Date().getTime()-s.timestamp<5*60*1e3?(Re.log("listenForEncryptedMessage","Handling previous event"),yield i(s)):Re.log("listenForEncryptedMessage","No previous event found");const o=this.initialListener;o&&(yield this.client.promise).unsubscribe(Kr.MESSAGE,o),this.initialListener=void 0,this.initialEvent=void 0})}unsubscribeFromEncryptedMessage(e){return tt(this,void 0,void 0,function*(){const r=this.activeListeners.get(e);r&&((yield this.client.promise).unsubscribe(Kr.MESSAGE,r),this.activeListeners.delete(e))})}unsubscribeFromEncryptedMessages(){return tt(this,void 0,void 0,function*(){(yield this.client.promise).unsubscribeAll(Kr.MESSAGE),this.activeListeners.clear()})}sendMessage(e,r){return tt(this,void 0,void 0,function*(){const n=yield this.createCryptoBoxClient(r.publicKey,this.keyPair),i=yield mo(Buffer.from(r.publicKey,"hex")),s=vg(i,r.relayServer),o=yield this.getRelevantRoom(s);yield this.waitForJoin(o);const a=yield q2(e,n.send);Re.log("sendMessage","sending encrypted message",r.publicKey,o,e),(yield this.client.promise).sendTextMessage(o,a).catch(c=>tt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Re.log("sendMessage","M_FORBIDDEN",o,c),yield this.deleteRoomIdFromRooms(o);const l=yield this.getRelevantRoom(s);Re.log("sendMessage","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>tt(this,void 0,void 0,function*(){Re.log("sendMessage","inner error",l,f)}))}else Re.log("sendMessage","unexpected error",c)}))})}updatePeerRoom(e,r){return tt(this,void 0,void 0,function*(){Re.log("updatePeerRoom",e,r);const n=e.split(":");if(n.length<2||!n[0].startsWith("@"))throw new Error("Invalid sender");const i=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),s=i[e];s===r&&Re.debug("updatePeerRoom","rooms are the same, not updating"),Re.debug("updatePeerRoom","current room",s,"new room",r),s&&s[1]&&(Re.log("updatePeerRoom",`adding room "${s[1]}" to ignored array`),this.ignoredRooms.push(s[1])),i[e]=r,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,i)})}deleteRoomIdFromRooms(e){return tt(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS),n=Object.entries(r).filter(i=>i[1]!==e).reduce((i,s)=>Object.assign(Object.assign({},i),{[s[0]]:s[1]}),{});yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,n),this.ignoredRooms.push(e)})}listenForChannelOpening(e){return tt(this,void 0,void 0,function*(){Re.debug("listenForChannelOpening"),(yield this.client.promise).subscribe(Kr.MESSAGE,r=>tt(this,void 0,void 0,function*(){if(this.isTextMessage(r.content)&&(yield this.isChannelOpenMessage(r.content))){Re.log("listenForChannelOpening","channel opening received, trying to decrypt",JSON.stringify(r)),yield this.updateRelayServer(r.content.message.sender),yield this.updatePeerRoom(r.content.message.sender,r.content.roomId);const n=r.content.message.content.split(":"),i=Buffer.from(n[n.length-1],"hex");if(i.length>=Wf+Xf)try{const s=JSON.parse(yield z2(i,this.keyPair.publicKey,this.keyPair.secretKey));Re.log("listenForChannelOpening","channel opening received and decrypted",JSON.stringify(s)),e(Object.assign(Object.assign({},s),{senderId:yield Qo(s.publicKey)}))}catch{}}}))})}waitForJoin(e,r=0){return tt(this,void 0,void 0,function*(){const n=yield(yield this.client.promise).getRoomById(e);if(Re.log("waitForJoin",`Currently ${n.members.length} members, we need at least 2`),!(n.members.length>=2||n.members.length===0)){if(r<=200)return Re.log(`Waiting for join... Try: ${r}`),new Promise(i=>{setTimeout(()=>tt(this,void 0,void 0,function*(){i(this.waitForJoin(e,r+1))}),100*(r>50?10:1))});throw new Error(`No one joined after ${r} tries.`)}})}sendPairingResponse(e){return tt(this,void 0,void 0,function*(){Re.log("sendPairingResponse");const r=yield mo(Buffer.from(e.publicKey,"hex")),n=vg(r,e.relayServer),i=yield(yield this.client.promise).createTrustedPrivateRoom(n);Re.debug("sendPairingResponse",`Connecting to room "${i}"`),yield this.updatePeerRoom(n,i),yield this.waitForJoin(i),Re.debug("sendPairingResponse","Successfully joined room.");const s=typeof e.version>"u"?yield this.getPublicKey():JSON.stringify(yield this.getPairingResponseInfo(e));Re.debug("sendPairingResponse","Sending pairing response",s);const o=yield this.encryptMessageAsymmetric(e.publicKey,s),a=["@channel-open",n,o].join(":");(yield this.client.promise).sendTextMessage(i,a).catch(c=>tt(this,void 0,void 0,function*(){if(c.errcode==="M_FORBIDDEN"){Re.log("sendPairingResponse","M_FORBIDDEN",i,c),yield this.deleteRoomIdFromRooms(i);const l=yield this.getRelevantRoom(n);Re.log("sendPairingResponse","Old room deleted, new room created",l),(yield this.client.promise).sendTextMessage(l,a).catch(f=>tt(this,void 0,void 0,function*(){Re.log("sendPairingResponse","inner error",l,f)}))}else Re.log("sendPairingResponse","unexpected error",c)}))})}isTextMessage(e){return e.message.type===eu.TEXT}updateRelayServer(e){return tt(this,void 0,void 0,function*(){Re.log("updateRelayServer",e);const r=e.split(":");if(r.length<2||!r[0].startsWith("@"))throw new Error("Invalid sender");const n=r.shift(),i=r.join(":"),s=localStorage.getItem("beacon:communication-peers-dapp")?new Yf(this.storage,ke.TRANSPORT_P2P_PEERS_DAPP):new Yf(this.storage,ke.TRANSPORT_P2P_PEERS_WALLET),a=(yield s.getPeers()).map(c=>tt(this,void 0,void 0,function*(){`@${yield mo(Buffer.from(c.publicKey,"hex"))}`===n&&c.relayServer!==i&&(c.relayServer=i,yield s.addPeer(c))}));yield Promise.all(a)})}isChannelOpenMessage(e){return tt(this,void 0,void 0,function*(){return e.message.content.startsWith(`@channel-open:@${yield mo(Buffer.from(yield this.getPublicKey(),"hex"))}`)})}isSender(e,r){return tt(this,void 0,void 0,function*(){return e.content.message.sender.startsWith(`@${yield mo(Buffer.from(r,"hex"))}`)})}getRelevantRoom(e){return tt(this,void 0,void 0,function*(){const r=yield this.storage.get(ke.MATRIX_PEER_ROOM_IDS);let n=r[e];if(!n){Re.log("getRelevantRoom",`No room found for peer ${e}, checking joined ones.`);const i=yield this.getRelevantJoinedRoom(e);n=i.id,r[e]=i.id,yield this.storage.set(ke.MATRIX_PEER_ROOM_IDS,r)}return Re.log("getRelevantRoom",`Using room ${n}`),n})}getRelevantJoinedRoom(e){return tt(this,void 0,void 0,function*(){const r=yield(yield this.client.promise).joinedRooms;Re.log("checking joined rooms",r,e);const n=r.filter(s=>!this.ignoredRooms.some(o=>s.id===o)).filter(s=>s.members.some(o=>o===e));let i;if(n.length===0||this.ignoredRooms.length>0){Re.log("getRelevantJoinedRoom","no relevant rooms found, creating new one");const s=yield(yield this.client.promise).createTrustedPrivateRoom(e);i=yield(yield this.client.promise).getRoomById(s),Re.log("getRelevantJoinedRoom",`waiting for other party to join room: ${i.id}`),yield this.waitForJoin(s),Re.log("getRelevantJoinedRoom",`new room created and peer invited: ${i.id}`)}else i=n[0],Re.log("getRelevantJoinedRoom",`channel already open, reusing room ${i.id}`);return i})}}var Ls=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Fd=new Jr("P2PTransport");class uT extends Y2{constructor(e,r,n,i,s,o,a){super(e,new fT(e,r,1,n,i,o,a),new Yf(n,s)),this.type=Xs.P2P}static isAvailable(){return Ls(this,void 0,void 0,function*(){return Promise.resolve(!0)})}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Ls(this,void 0,void 0,function*(){if(this._isConnected!==sn.NOT_CONNECTED)return;Fd.log("connect"),this._isConnected=sn.CONNECTING,yield this.client.start();const r=yield this.getPeers();if(r.length>0){Fd.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Ls(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>Fd.error("connect",i))}return yield this.startOpenChannelListener(),e.connect.call(this)})}disconnect(){const e=Object.create(null,{disconnect:{get:()=>super.disconnect}});return Ls(this,void 0,void 0,function*(){return yield this.client.stop(),e.disconnect.call(this)})}startOpenChannelListener(){return Ls(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Ls(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Ls(this,void 0,void 0,function*(){yield this.client.listenForEncryptedMessage(e,r=>{const n={origin:wn.P2P,id:e};this.notifyListeners(r,n).catch(i=>{throw i})}).catch(r=>{throw r})})}}var bi=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class lT extends ZI{constructor(){super(...arguments),this.activeListeners=new Map}init(){return bi(this,void 0,void 0,function*(){this.subscribeToMessages().catch(console.error)})}listenForEncryptedMessage(e,r){return bi(this,void 0,void 0,function*(){if(this.activeListeners.has(e))return;const n=(i,s)=>bi(this,void 0,void 0,function*(){try{const o=yield this.decryptMessage(e,i.encryptedPayload);r(o,s)}catch{}});this.activeListeners.set(e,n)})}sendMessage(e,r){return bi(this,void 0,void 0,function*(){const n=yield this.encryptMessage(r.publicKey,e),i=r?.extensionId,s={target:ki.EXTENSION,encryptedPayload:n,targetId:i};st.postMessage(s,st.location.origin)})}listenForChannelOpening(e){return bi(this,void 0,void 0,function*(){const r=n=>bi(this,void 0,void 0,function*(){var i,s;if(n.source!==st||n.origin!==st.location.origin)return;const o=(i=n?.data)===null||i===void 0?void 0:i.message;if(o&&o.target===ki.PAGE&&(yield this.isChannelOpenMessage(o))){const a=Buffer.from(o.payload,"hex");if(a.length>=Wf+Xf)try{const c=JSON.parse(yield z2(a,this.keyPair.publicKey,this.keyPair.secretKey));e(Object.assign(Object.assign({},c),{senderId:yield Qo(c.publicKey),extensionId:(s=n?.data)===null||s===void 0?void 0:s.sender.id}))}catch{}}});st.addEventListener("message",r)})}sendPairingRequest(e){return bi(this,void 0,void 0,function*(){const r={target:ki.EXTENSION,payload:yield new Js().serialize(yield this.getPairingRequestInfo()),targetId:e};st.postMessage(r,st.location.origin)})}isChannelOpenMessage(e){return bi(this,void 0,void 0,function*(){return typeof e=="object"&&e.hasOwnProperty("payload")})}subscribeToMessages(){return bi(this,void 0,void 0,function*(){st.addEventListener("message",e=>{if(!(e.source!==st||e.origin!==st.location.origin)&&typeof e=="object"&&e){const r=e.data;r.message&&r.message.target===ki.PAGE&&this.activeListeners.forEach(n=>{n(r.message,{origin:wn.EXTENSION,id:r.sender.id||""})})}})})}}var Cs=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Pa=new Jr("PostMessageTransport");let Wg=!1,Na,Wn;const dT=t=>{Wn||(Wn=[]),Wn.some(e=>e.id===t.id)||(Wn.push(t),st.postMessage("extensionsUpdated",st.location.origin))};class Oc extends Y2{constructor(e,r,n,i){super(e,new lT(e,r),new Yf(n,i)),this.type=Xs.POST_MESSAGE}static isAvailable(){return Cs(this,void 0,void 0,function*(){return new Promise(e=>{const r=i=>{const s=i.data;s&&s.payload==="pong"&&(e(!0),st.removeEventListener("message",r))};st.addEventListener("message",r);const n={target:ki.EXTENSION,payload:"ping"};st.postMessage(n,st.location.origin)})})}static getAvailableExtensions(){return Cs(this,void 0,void 0,function*(){return Na||Wn||(Wn=[],Na=new Promise(e=>{Oc.listenForExtensions(),setTimeout(()=>{e(Wn??[])},1e3)}).finally(()=>{Na=void 0}),Na)})}static listenForExtensions(){if(Wg)return;const e=n=>{if(n.source!==st||n.origin!==st.location.origin)return;const i=n.data,s=i.sender;i&&i.payload==="pong"&&s&&(Pa.log("getAvailableExtensions",`extension "${s.name}" is available`,s),dT(s))};st.addEventListener("message",e);const r={target:ki.EXTENSION,payload:"ping"};st.postMessage(r,st.location.origin),Wg=!0}connect(){const e=Object.create(null,{connect:{get:()=>super.connect}});return Cs(this,void 0,void 0,function*(){if(Pa.log("connect"),this._isConnected!==sn.NOT_CONNECTED)return;this._isConnected=sn.CONNECTING;const r=yield this.getPeers();if(r.length>0){Pa.log("connect",`connecting to ${r.length} peers`);const n=r.map(i=>Cs(this,void 0,void 0,function*(){return this.listen(i.publicKey)}));Promise.all(n).catch(i=>Pa.error("connect",i))}yield this.startOpenChannelListener(),yield e.connect.call(this)})}startOpenChannelListener(){return Cs(this,void 0,void 0,function*(){})}getPairingRequestInfo(){return Cs(this,void 0,void 0,function*(){return this.client.getPairingRequestInfo()})}listen(e){return Cs(this,void 0,void 0,function*(){Pa.log("listen",e),yield this.client.listenForEncryptedMessage(e,(r,n)=>{const i={origin:wn.EXTENSION,id:n.id};this.notifyListeners(r,i).catch(s=>{throw s})}).catch(r=>{throw r})})}}const Xg={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-modal__wrapper {
  position: relative;
  top: 0;
  display: inline-block;
  z-index: 2147483000;
  max-width: 500px;
  width: 80%;
  padding: 24px;
}

.theme__light .beacon-modal__base,
.theme__light .beacon-modal__close__wrapper {
  background: #fff;
}

.theme__dark .beacon-modal__base,
.theme__dark .beacon-modal__close__wrapper {
  background: #27334c;
}

.beacon-modal__base,
.beacon-modal__close__wrapper {
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
}

.beacon-modal__base {
  margin: 0 auto;
  border-radius: 32px;
  overflow: hidden;
}

.beacon-modal__header {
  padding: 16px 0;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.beacon-modal__headerLogo {
  width: 100%;
  max-width: 320px;
  margin: 20px auto;
  height: 100%;
}

a,
button {
  cursor: pointer;
}

.beacon-modal__close__wrapper {
  position: absolute;
  top: 44px;
  right: 24px;
  z-index: 10000;
  cursor: pointer;
  border-radius: 100%;
}

.beacon-modal__close__icon {
  width: 16px;
  height: 16px;
  position: relative;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
  margin: 8px;
}

.beacon-modal__close__line1 {
  position: absolute;
  width: 90%;
}

.beacon-modal__close__line2 {
  position: absolute;
  width: 90%;
  transform: rotate(90deg);
}

.theme__light .beacon-modal__close__line2,
.theme__light .beacon-modal__close__line1 {
  border: 1px solid #000;
}

.theme__dark .beacon-modal__close__line2,
.theme__dark .beacon-modal__close__line1 {
  border: 1px solid #fff;
}

.beacon-alert__base {
  position: fixed;
  overflow-y: scroll;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2147482999;
  background-color: rgb(17 17 17 / 0.84);
  text-align: center;
  -ms-overflow-style: none;
  scrollbar-width: none;
  font-family: Roboto, Helvetica, sans-serif;
}

.beacon-alert__base::-webkit-scrollbar {
  display: none;
}

.beacon-alert__title {
  text-align: center;
}

.beacon-alert__text,
.beacon-alert__title {
  margin: 0 auto;
  padding: 0 0 24px;
}

.margin__bottom {
  margin-bottom: 16px;
}

.beacon-alert__title {
  font-size: 18px;
}

.theme__light .beacon-alert__title {
  color: #3b3d40;
}

.theme__dark .beacon-alert__title,
.theme__dark .beacon-alert__text {
  color: #7c99d6;
}

.beacon-alert__text {
  color: #000;
  font-size: 14px;
}

.beacon-modal__button,
.beacon-modal__button--outline {
  height: 36px;
  font-size: 14px;
  letter-spacing: 0.84px;
  margin-bottom: 4px;
  margin-inline-end: 2px;
  margin-inline-start: 2px;
  margin-left: 2px;
  margin-right: 2px;
  margin-top: 4px;
  padding-inline-end: 15.4px;
  padding-inline-start: 15.4px;
  padding-left: 15.4px;
  padding-right: 15.4px;
  overflow-wrap: break-word;
  pointer-events: auto;
  text-align: center;
  border-radius: 4px;
  border: 2px solid #3880ff;
}

.beacon-modal__button {
  background: #3880ff;
  color: #fff;
}

.beacon-modal__button--outline {
  background: #fff;
  color: #444444;
  border: 1px solid #444444;
}

.beacon-alert__image {
  width: 200px;
  height: 200px;
  box-sizing: border-box;
  box-shadow: 0 10px 20px 0 rgba(17, 17, 17, 0.12);
  border: 1px solid rgba(17, 17, 17, 0.04);
  border-radius: 16px;
}
.connect__btn {
  margin: 24px 0;
  width: 100%;
}

#beacon-modal__content {
  padding: 24px;
}

#beacon-switch {
  margin-top: 24px;
}

#beacon-title {
  margin: 0 0 24px;
}

a {
  text-decoration: none;
}

pre {
  white-space: pre-wrap; /* css-3 */
  white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
  white-space: -pre-wrap; /* Opera 4-6 */
  white-space: -o-pre-wrap; /* Opera 7 */
  word-wrap: break-word; /* Internet Explorer 5.5+ */
  padding: 16px;
  background: #ececec;
  line-height: 1.25rem;
}
`},pair:{css:`#beacon-main-text {
  display: initial;
}
.beacon-selection__container {
  padding: 16px 16px 0;
}
.beacon-selection__list {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  text-decoration: none;
  padding-bottom: 12px;
  align-items: center;
}
.beacon-list__title {
  text-align: left;
  font-size: 12px;
}
.beacon-list__wrapper:nth-child(-n + 3) {
  padding: 0 0 1rem;
}
.theme__light .beacon-list__title {
  color: #7c828b;
}
.theme__dark .beacon-list__title,
.theme__dark #beacon--disclaimer {
  color: #7c99d6;
}

.beacon-selection__name {
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
}
.theme__light .beacon-selection__name,
.theme__light .beacon--selection__name__lg {
  color: #3b3d40;
}
.theme__dark .beacon-selection__name,
.theme__dark .beacon--selection__name__lg {
  color: #6183ff;
}
.beacon-selection__img {
  width: 48px;
  height: 48px;
  box-shadow: 0 4px 12px 0 rgba(17, 17, 17, 0.24);
  border-radius: 16px;
  background-color: #fff;
}
.beacon--selection__name__lg {
  font-size: 1.5rem;
  font-weight: 600;
  text-align: center;
  padding: 1rem 0;
}
.beacon--selected__container {
  padding: 2rem 0 0;
}
#beacon--qr__copy__container {
  height: 0;
}
#beacon--qr__copy {
  display: none;
  position: relative;
  margin-top: auto;
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container {
  margin-left: auto;
  margin-right: auto;
}
#beacon--qr__container:hover #beacon--qr__copy {
  display: block;
}

.disabled p {
  text-align: left;
  margin: 0;
  font-size: 10px;
  font-weight: 300;
  opacity: 0.48;
}

#beacon--disclaimer {
  text-align: left;
  padding-top: 24px;
  font-size: 0.875rem;
}
.progress-line,
.progress-line:before {
  height: 3px;
  width: -webkit-fill-available;
  margin-left: -24px;
  margin-right: -24px;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}},tu=(t,e)=>e.test(t.navigator.userAgent),hT=(t,e)=>t.matchMedia(e).matches,Ph=t=>hT(t,"(any-pointer:coarse)"),pT=t=>!!(tu(t,/iPad/i)||tu(t,/Macintosh/i)&&Ph(t)),hy=t=>tu(t,/iPhone|iPod/i)||pT(t),py=t=>tu(t,/android|sink/i);var ru={},gT={get exports(){return ru},set exports(t){ru=t}};(function(t,e){var r=function(){var n=function(K,j){var y=236,w=17,T=K,x=s[j],E=null,u=0,h=null,g=[],b={},p=function(F,k){u=T*4+17,E=function(m){for(var B=new Array(m),X=0;X<m;X+=1){B[X]=new Array(m);for(var Z=0;Z<m;Z+=1)B[X][Z]=null}return B}(u),S(0,0),S(u-7,0),S(0,u-7),v(),_(),ee(F,k),T>=7&&N(F),h==null&&(h=se(T,x,g)),Y(h,k)},S=function(F,k){for(var m=-1;m<=7;m+=1)if(!(F+m<=-1||u<=F+m))for(var B=-1;B<=7;B+=1)k+B<=-1||u<=k+B||(0<=m&&m<=6&&(B==0||B==6)||0<=B&&B<=6&&(m==0||m==6)||2<=m&&m<=4&&2<=B&&B<=4?E[F+m][k+B]=!0:E[F+m][k+B]=!1)},O=function(){for(var F=0,k=0,m=0;m<8;m+=1){p(!0,m);var B=a.getLostPoint(b);(m==0||F>B)&&(F=B,k=m)}return k},_=function(){for(var F=8;F<u-8;F+=1)E[F][6]==null&&(E[F][6]=F%2==0);for(var k=8;k<u-8;k+=1)E[6][k]==null&&(E[6][k]=k%2==0)},v=function(){for(var F=a.getPatternPosition(T),k=0;k<F.length;k+=1)for(var m=0;m<F.length;m+=1){var B=F[k],X=F[m];if(E[B][X]==null)for(var Z=-2;Z<=2;Z+=1)for(var ce=-2;ce<=2;ce+=1)Z==-2||Z==2||ce==-2||ce==2||Z==0&&ce==0?E[B+Z][X+ce]=!0:E[B+Z][X+ce]=!1}},N=function(F){for(var k=a.getBCHTypeNumber(T),m=0;m<18;m+=1){var B=!F&&(k>>m&1)==1;E[Math.floor(m/3)][m%3+u-8-3]=B}for(var m=0;m<18;m+=1){var B=!F&&(k>>m&1)==1;E[m%3+u-8-3][Math.floor(m/3)]=B}},ee=function(F,k){for(var m=x<<3|k,B=a.getBCHTypeInfo(m),X=0;X<15;X+=1){var Z=!F&&(B>>X&1)==1;X<6?E[X][8]=Z:X<8?E[X+1][8]=Z:E[u-15+X][8]=Z}for(var X=0;X<15;X+=1){var Z=!F&&(B>>X&1)==1;X<8?E[8][u-X-1]=Z:X<9?E[8][15-X-1+1]=Z:E[8][15-X-1]=Z}E[u-8][8]=!F},Y=function(F,k){for(var m=-1,B=u-1,X=7,Z=0,ce=a.getMaskFunction(k),ie=u-1;ie>0;ie-=2)for(ie==6&&(ie-=1);;){for(var de=0;de<2;de+=1)if(E[B][ie-de]==null){var ye=!1;Z<F.length&&(ye=(F[Z]>>>X&1)==1);var ue=ce(B,ie-de);ue&&(ye=!ye),E[B][ie-de]=ye,X-=1,X==-1&&(Z+=1,X=7)}if(B+=m,B<0||u<=B){B-=m,m=-m;break}}},ne=function(F,k){for(var m=0,B=0,X=0,Z=new Array(k.length),ce=new Array(k.length),ie=0;ie<k.length;ie+=1){var de=k[ie].dataCount,ye=k[ie].totalCount-de;B=Math.max(B,de),X=Math.max(X,ye),Z[ie]=new Array(de);for(var ue=0;ue<Z[ie].length;ue+=1)Z[ie][ue]=255&F.getBuffer()[ue+m];m+=de;var Ee=a.getErrorCorrectPolynomial(ye),xe=l(Z[ie],Ee.getLength()-1),me=xe.mod(Ee);ce[ie]=new Array(Ee.getLength()-1);for(var ue=0;ue<ce[ie].length;ue+=1){var ge=ue+me.getLength()-ce[ie].length;ce[ie][ue]=ge>=0?me.getAt(ge):0}}for(var Te=0,ue=0;ue<k.length;ue+=1)Te+=k[ue].totalCount;for(var ve=new Array(Te),he=0,ue=0;ue<B;ue+=1)for(var ie=0;ie<k.length;ie+=1)ue<Z[ie].length&&(ve[he]=Z[ie][ue],he+=1);for(var ue=0;ue<X;ue+=1)for(var ie=0;ie<k.length;ie+=1)ue<ce[ie].length&&(ve[he]=ce[ie][ue],he+=1);return ve},se=function(F,k,m){for(var B=f.getRSBlocks(F,k),X=d(),Z=0;Z<m.length;Z+=1){var ce=m[Z];X.put(ce.getMode(),4),X.put(ce.getLength(),a.getLengthInBits(ce.getMode(),F)),ce.write(X)}for(var ie=0,Z=0;Z<B.length;Z+=1)ie+=B[Z].dataCount;if(X.getLengthInBits()>ie*8)throw"code length overflow. ("+X.getLengthInBits()+">"+ie*8+")";for(X.getLengthInBits()+4<=ie*8&&X.put(0,4);X.getLengthInBits()%8!=0;)X.putBit(!1);for(;!(X.getLengthInBits()>=ie*8||(X.put(y,8),X.getLengthInBits()>=ie*8));)X.put(w,8);return ne(X,B)};b.addData=function(F,k){k=k||"Byte";var m=null;switch(k){case"Numeric":m=I(F);break;case"Alphanumeric":m=P(F);break;case"Byte":m=L(F);break;case"Kanji":m=H(F);break;default:throw"mode:"+k}g.push(m),h=null},b.isDark=function(F,k){if(F<0||u<=F||k<0||u<=k)throw F+","+k;return E[F][k]},b.getModuleCount=function(){return u},b.make=function(){if(T<1){for(var F=1;F<40;F++){for(var k=f.getRSBlocks(F,x),m=d(),B=0;B<g.length;B++){var X=g[B];m.put(X.getMode(),4),m.put(X.getLength(),a.getLengthInBits(X.getMode(),F)),X.write(m)}for(var Z=0,B=0;B<k.length;B++)Z+=k[B].dataCount;if(m.getLengthInBits()<=Z*8)break}T=F}p(!1,O())},b.createTableTag=function(F,k){F=F||2,k=typeof k>"u"?F*4:k;var m="";m+='<table style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: "+k+"px;",m+='">',m+="<tbody>";for(var B=0;B<b.getModuleCount();B+=1){m+="<tr>";for(var X=0;X<b.getModuleCount();X+=1)m+='<td style="',m+=" border-width: 0px; border-style: none;",m+=" border-collapse: collapse;",m+=" padding: 0px; margin: 0px;",m+=" width: "+F+"px;",m+=" height: "+F+"px;",m+=" background-color: ",m+=b.isDark(B,X)?"#000000":"#ffffff",m+=";",m+='"/>';m+="</tr>"}return m+="</tbody>",m+="</table>",m},b.createSvgTag=function(F,k,m,B){var X={};typeof arguments[0]=="object"&&(X=arguments[0],F=X.cellSize,k=X.margin,m=X.alt,B=X.title),F=F||2,k=typeof k>"u"?F*4:k,m=typeof m=="string"?{text:m}:m||{},m.text=m.text||null,m.id=m.text?m.id||"qrcode-description":null,B=typeof B=="string"?{text:B}:B||{},B.text=B.text||null,B.id=B.text?B.id||"qrcode-title":null;var Z=b.getModuleCount()*F+k*2,ce,ie,de,ye,ue="",Ee;for(Ee="l"+F+",0 0,"+F+" -"+F+",0 0,-"+F+"z ",ue+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ue+=X.scalable?"":' width="'+Z+'px" height="'+Z+'px"',ue+=' viewBox="0 0 '+Z+" "+Z+'" ',ue+=' preserveAspectRatio="xMinYMin meet"',ue+=B.text||m.text?' role="img" aria-labelledby="'+ae([B.id,m.id].join(" ").trim())+'"':"",ue+=">",ue+=B.text?'<title id="'+ae(B.id)+'">'+ae(B.text)+"</title>":"",ue+=m.text?'<description id="'+ae(m.id)+'">'+ae(m.text)+"</description>":"",ue+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ue+='<path d="',de=0;de<b.getModuleCount();de+=1)for(ye=de*F+k,ce=0;ce<b.getModuleCount();ce+=1)b.isDark(de,ce)&&(ie=ce*F+k,ue+="M"+ie+","+ye+Ee);return ue+='" stroke="transparent" fill="black"/>',ue+="</svg>",ue},b.createDataURL=function(F,k){F=F||2,k=typeof k>"u"?F*4:k;var m=b.getModuleCount()*F+k*2,B=k,X=m-k;return U(m,m,function(Z,ce){if(B<=Z&&Z<X&&B<=ce&&ce<X){var ie=Math.floor((Z-B)/F),de=Math.floor((ce-B)/F);return b.isDark(de,ie)?0:1}else return 1})},b.createImgTag=function(F,k,m){F=F||2,k=typeof k>"u"?F*4:k;var B=b.getModuleCount()*F+k*2,X="";return X+="<img",X+=' src="',X+=b.createDataURL(F,k),X+='"',X+=' width="',X+=B,X+='"',X+=' height="',X+=B,X+='"',m&&(X+=' alt="',X+=ae(m),X+='"'),X+="/>",X};var ae=function(F){for(var k="",m=0;m<F.length;m+=1){var B=F.charAt(m);switch(B){case"<":k+="&lt;";break;case">":k+="&gt;";break;case"&":k+="&amp;";break;case'"':k+="&quot;";break;default:k+=B;break}}return k},W=function(F){var k=1;F=typeof F>"u"?k*2:F;var m=b.getModuleCount()*k+F*2,B=F,X=m-F,Z,ce,ie,de,ye,ue={"██":"█","█ ":"▀"," █":"▄","  ":" "},Ee={"██":"▀","█ ":"▀"," █":" ","  ":" "},xe="";for(Z=0;Z<m;Z+=2){for(ie=Math.floor((Z-B)/k),de=Math.floor((Z+1-B)/k),ce=0;ce<m;ce+=1)ye="█",B<=ce&&ce<X&&B<=Z&&Z<X&&b.isDark(ie,Math.floor((ce-B)/k))&&(ye=" "),B<=ce&&ce<X&&B<=Z+1&&Z+1<X&&b.isDark(de,Math.floor((ce-B)/k))?ye+=" ":ye+="█",xe+=F<1&&Z+1>=X?Ee[ye]:ue[ye];xe+=`
`}return m%2&&F>0?xe.substring(0,xe.length-m-1)+Array(m+1).join("▀"):xe.substring(0,xe.length-1)};return b.createASCII=function(F,k){if(F=F||1,F<2)return W(k);F-=1,k=typeof k>"u"?F*2:k;var m=b.getModuleCount()*F+k*2,B=k,X=m-k,Z,ce,ie,de,ye=Array(F+1).join("██"),ue=Array(F+1).join("  "),Ee="",xe="";for(Z=0;Z<m;Z+=1){for(ie=Math.floor((Z-B)/F),xe="",ce=0;ce<m;ce+=1)de=1,B<=ce&&ce<X&&B<=Z&&Z<X&&b.isDark(ie,Math.floor((ce-B)/F))&&(de=0),xe+=de?ye:ue;for(ie=0;ie<F;ie+=1)Ee+=xe+`
`}return Ee.substring(0,Ee.length-1)},b.renderTo2dContext=function(F,k){k=k||2;for(var m=b.getModuleCount(),B=0;B<m;B++)for(var X=0;X<m;X++)F.fillStyle=b.isDark(B,X)?"black":"white",F.fillRect(B*k,X*k,k,k)},b};n.stringToBytesFuncs={default:function(K){for(var j=[],y=0;y<K.length;y+=1){var w=K.charCodeAt(y);j.push(w&255)}return j}},n.stringToBytes=n.stringToBytesFuncs.default,n.createStringToBytes=function(K,j){var y=function(){for(var T=C(K),x=function(){var _=T.read();if(_==-1)throw"eof";return _},E=0,u={};;){var h=T.read();if(h==-1)break;var g=x(),b=x(),p=x(),S=String.fromCharCode(h<<8|g),O=b<<8|p;u[S]=O,E+=1}if(E!=j)throw E+" != "+j;return u}(),w="?".charCodeAt(0);return function(T){for(var x=[],E=0;E<T.length;E+=1){var u=T.charCodeAt(E);if(u<128)x.push(u);else{var h=y[T.charAt(E)];typeof h=="number"?(h&255)==h?x.push(h):(x.push(h>>>8),x.push(h&255)):x.push(w)}}return x}};var i={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},s={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var K=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],j=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,y=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,w=1<<14|1<<12|1<<10|1<<4|1<<1,T={},x=function(E){for(var u=0;E!=0;)u+=1,E>>>=1;return u};return T.getBCHTypeInfo=function(E){for(var u=E<<10;x(u)-x(j)>=0;)u^=j<<x(u)-x(j);return(E<<10|u)^w},T.getBCHTypeNumber=function(E){for(var u=E<<12;x(u)-x(y)>=0;)u^=y<<x(u)-x(y);return E<<12|u},T.getPatternPosition=function(E){return K[E-1]},T.getMaskFunction=function(E){switch(E){case o.PATTERN000:return function(u,h){return(u+h)%2==0};case o.PATTERN001:return function(u,h){return u%2==0};case o.PATTERN010:return function(u,h){return h%3==0};case o.PATTERN011:return function(u,h){return(u+h)%3==0};case o.PATTERN100:return function(u,h){return(Math.floor(u/2)+Math.floor(h/3))%2==0};case o.PATTERN101:return function(u,h){return u*h%2+u*h%3==0};case o.PATTERN110:return function(u,h){return(u*h%2+u*h%3)%2==0};case o.PATTERN111:return function(u,h){return(u*h%3+(u+h)%2)%2==0};default:throw"bad maskPattern:"+E}},T.getErrorCorrectPolynomial=function(E){for(var u=l([1],0),h=0;h<E;h+=1)u=u.multiply(l([1,c.gexp(h)],0));return u},T.getLengthInBits=function(E,u){if(1<=u&&u<10)switch(E){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw"mode:"+E}else if(u<27)switch(E){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw"mode:"+E}else if(u<41)switch(E){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw"mode:"+E}else throw"type:"+u},T.getLostPoint=function(E){for(var u=E.getModuleCount(),h=0,g=0;g<u;g+=1)for(var b=0;b<u;b+=1){for(var p=0,S=E.isDark(g,b),O=-1;O<=1;O+=1)if(!(g+O<0||u<=g+O))for(var _=-1;_<=1;_+=1)b+_<0||u<=b+_||O==0&&_==0||S==E.isDark(g+O,b+_)&&(p+=1);p>5&&(h+=3+p-5)}for(var g=0;g<u-1;g+=1)for(var b=0;b<u-1;b+=1){var v=0;E.isDark(g,b)&&(v+=1),E.isDark(g+1,b)&&(v+=1),E.isDark(g,b+1)&&(v+=1),E.isDark(g+1,b+1)&&(v+=1),(v==0||v==4)&&(h+=3)}for(var g=0;g<u;g+=1)for(var b=0;b<u-6;b+=1)E.isDark(g,b)&&!E.isDark(g,b+1)&&E.isDark(g,b+2)&&E.isDark(g,b+3)&&E.isDark(g,b+4)&&!E.isDark(g,b+5)&&E.isDark(g,b+6)&&(h+=40);for(var b=0;b<u;b+=1)for(var g=0;g<u-6;g+=1)E.isDark(g,b)&&!E.isDark(g+1,b)&&E.isDark(g+2,b)&&E.isDark(g+3,b)&&E.isDark(g+4,b)&&!E.isDark(g+5,b)&&E.isDark(g+6,b)&&(h+=40);for(var N=0,b=0;b<u;b+=1)for(var g=0;g<u;g+=1)E.isDark(g,b)&&(N+=1);var ee=Math.abs(100*N/u/u-50)/5;return h+=ee*10,h},T}(),c=function(){for(var K=new Array(256),j=new Array(256),y=0;y<8;y+=1)K[y]=1<<y;for(var y=8;y<256;y+=1)K[y]=K[y-4]^K[y-5]^K[y-6]^K[y-8];for(var y=0;y<255;y+=1)j[K[y]]=y;var w={};return w.glog=function(T){if(T<1)throw"glog("+T+")";return j[T]},w.gexp=function(T){for(;T<0;)T+=255;for(;T>=256;)T-=255;return K[T]},w}();function l(K,j){if(typeof K.length>"u")throw K.length+"/"+j;var y=function(){for(var T=0;T<K.length&&K[T]==0;)T+=1;for(var x=new Array(K.length-T+j),E=0;E<K.length-T;E+=1)x[E]=K[E+T];return x}(),w={};return w.getAt=function(T){return y[T]},w.getLength=function(){return y.length},w.multiply=function(T){for(var x=new Array(w.getLength()+T.getLength()-1),E=0;E<w.getLength();E+=1)for(var u=0;u<T.getLength();u+=1)x[E+u]^=c.gexp(c.glog(w.getAt(E))+c.glog(T.getAt(u)));return l(x,0)},w.mod=function(T){if(w.getLength()-T.getLength()<0)return w;for(var x=c.glog(w.getAt(0))-c.glog(T.getAt(0)),E=new Array(w.getLength()),u=0;u<w.getLength();u+=1)E[u]=w.getAt(u);for(var u=0;u<T.getLength();u+=1)E[u]^=c.gexp(c.glog(T.getAt(u))+x);return l(E,0).mod(T)},w}var f=function(){var K=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j=function(T,x){var E={};return E.totalCount=T,E.dataCount=x,E},y={},w=function(T,x){switch(x){case s.L:return K[(T-1)*4+0];case s.M:return K[(T-1)*4+1];case s.Q:return K[(T-1)*4+2];case s.H:return K[(T-1)*4+3];default:return}};return y.getRSBlocks=function(T,x){var E=w(T,x);if(typeof E>"u")throw"bad rs block @ typeNumber:"+T+"/errorCorrectionLevel:"+x;for(var u=E.length/3,h=[],g=0;g<u;g+=1)for(var b=E[g*3+0],p=E[g*3+1],S=E[g*3+2],O=0;O<b;O+=1)h.push(j(p,S));return h},y}(),d=function(){var K=[],j=0,y={};return y.getBuffer=function(){return K},y.getAt=function(w){var T=Math.floor(w/8);return(K[T]>>>7-w%8&1)==1},y.put=function(w,T){for(var x=0;x<T;x+=1)y.putBit((w>>>T-x-1&1)==1)},y.getLengthInBits=function(){return j},y.putBit=function(w){var T=Math.floor(j/8);K.length<=T&&K.push(0),w&&(K[T]|=128>>>j%8),j+=1},y},I=function(K){var j=i.MODE_NUMBER,y=K,w={};w.getMode=function(){return j},w.getLength=function(E){return y.length},w.write=function(E){for(var u=y,h=0;h+2<u.length;)E.put(T(u.substring(h,h+3)),10),h+=3;h<u.length&&(u.length-h==1?E.put(T(u.substring(h,h+1)),4):u.length-h==2&&E.put(T(u.substring(h,h+2)),7))};var T=function(E){for(var u=0,h=0;h<E.length;h+=1)u=u*10+x(E.charAt(h));return u},x=function(E){if("0"<=E&&E<="9")return E.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+E};return w},P=function(K){var j=i.MODE_ALPHA_NUM,y=K,w={};w.getMode=function(){return j},w.getLength=function(x){return y.length},w.write=function(x){for(var E=y,u=0;u+1<E.length;)x.put(T(E.charAt(u))*45+T(E.charAt(u+1)),11),u+=2;u<E.length&&x.put(T(E.charAt(u)),6)};var T=function(x){if("0"<=x&&x<="9")return x.charCodeAt(0)-"0".charCodeAt(0);if("A"<=x&&x<="Z")return x.charCodeAt(0)-"A".charCodeAt(0)+10;switch(x){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+x}};return w},L=function(K){var j=i.MODE_8BIT_BYTE,y=n.stringToBytes(K),w={};return w.getMode=function(){return j},w.getLength=function(T){return y.length},w.write=function(T){for(var x=0;x<y.length;x+=1)T.put(y[x],8)},w},H=function(K){var j=i.MODE_KANJI,y=n.stringToBytesFuncs.SJIS;if(!y)throw"sjis not supported.";(function(x,E){var u=y(x);if(u.length!=2||(u[0]<<8|u[1])!=E)throw"sjis not supported."})("友",38726);var w=y(K),T={};return T.getMode=function(){return j},T.getLength=function(x){return~~(w.length/2)},T.write=function(x){for(var E=w,u=0;u+1<E.length;){var h=(255&E[u])<<8|255&E[u+1];if(33088<=h&&h<=40956)h-=33088;else if(57408<=h&&h<=60351)h-=49472;else throw"illegal char at "+(u+1)+"/"+h;h=(h>>>8&255)*192+(h&255),x.put(h,13),u+=2}if(u<E.length)throw"illegal char at "+(u+1)},T},G=function(){var K=[],j={};return j.writeByte=function(y){K.push(y&255)},j.writeShort=function(y){j.writeByte(y),j.writeByte(y>>>8)},j.writeBytes=function(y,w,T){w=w||0,T=T||y.length;for(var x=0;x<T;x+=1)j.writeByte(y[x+w])},j.writeString=function(y){for(var w=0;w<y.length;w+=1)j.writeByte(y.charCodeAt(w))},j.toByteArray=function(){return K},j.toString=function(){var y="";y+="[";for(var w=0;w<K.length;w+=1)w>0&&(y+=","),y+=K[w];return y+="]",y},j},V=function(){var K=0,j=0,y=0,w="",T={},x=function(u){w+=String.fromCharCode(E(u&63))},E=function(u){if(!(u<0)){if(u<26)return 65+u;if(u<52)return 97+(u-26);if(u<62)return 48+(u-52);if(u==62)return 43;if(u==63)return 47}throw"n:"+u};return T.writeByte=function(u){for(K=K<<8|u&255,j+=8,y+=1;j>=6;)x(K>>>j-6),j-=6},T.flush=function(){if(j>0&&(x(K<<6-j),K=0,j=0),y%3!=0)for(var u=3-y%3,h=0;h<u;h+=1)w+="="},T.toString=function(){return w},T},C=function(K){var j=K,y=0,w=0,T=0,x={};x.read=function(){for(;T<8;){if(y>=j.length){if(T==0)return-1;throw"unexpected end of file./"+T}var u=j.charAt(y);if(y+=1,u=="=")return T=0,-1;if(u.match(/^\s$/))continue;w=w<<6|E(u.charCodeAt(0)),T+=6}var h=w>>>T-8&255;return T-=8,h};var E=function(u){if(65<=u&&u<=90)return u-65;if(97<=u&&u<=122)return u-97+26;if(48<=u&&u<=57)return u-48+52;if(u==43)return 62;if(u==47)return 63;throw"c:"+u};return x},q=function(K,j){var y=K,w=j,T=new Array(K*j),x={};x.setPixel=function(g,b,p){T[b*y+g]=p},x.write=function(g){g.writeString("GIF87a"),g.writeShort(y),g.writeShort(w),g.writeByte(128),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(255),g.writeByte(255),g.writeByte(255),g.writeString(","),g.writeShort(0),g.writeShort(0),g.writeShort(y),g.writeShort(w),g.writeByte(0);var b=2,p=u(b);g.writeByte(b);for(var S=0;p.length-S>255;)g.writeByte(255),g.writeBytes(p,S,255),S+=255;g.writeByte(p.length-S),g.writeBytes(p,S,p.length-S),g.writeByte(0),g.writeString(";")};var E=function(g){var b=g,p=0,S=0,O={};return O.write=function(_,v){if(_>>>v)throw"length over";for(;p+v>=8;)b.writeByte(255&(_<<p|S)),v-=8-p,_>>>=8-p,S=0,p=0;S=_<<p|S,p=p+v},O.flush=function(){p>0&&b.writeByte(S)},O},u=function(g){for(var b=1<<g,p=(1<<g)+1,S=g+1,O=h(),_=0;_<b;_+=1)O.add(String.fromCharCode(_));O.add(String.fromCharCode(b)),O.add(String.fromCharCode(p));var v=G(),N=E(v);N.write(b,S);var ee=0,Y=String.fromCharCode(T[ee]);for(ee+=1;ee<T.length;){var ne=String.fromCharCode(T[ee]);ee+=1,O.contains(Y+ne)?Y=Y+ne:(N.write(O.indexOf(Y),S),O.size()<4095&&(O.size()==1<<S&&(S+=1),O.add(Y+ne)),Y=ne)}return N.write(O.indexOf(Y),S),N.write(p,S),N.flush(),v.toByteArray()},h=function(){var g={},b=0,p={};return p.add=function(S){if(p.contains(S))throw"dup key:"+S;g[S]=b,b+=1},p.size=function(){return b},p.indexOf=function(S){return g[S]},p.contains=function(S){return typeof g[S]<"u"},p};return x},U=function(K,j,y){for(var w=q(K,j),T=0;T<j;T+=1)for(var x=0;x<K;x+=1)w.setPixel(x,T,y(x,T));var E=G();w.write(E);for(var u=V(),h=E.toByteArray(),g=0;g<h.length;g+=1)u.writeByte(h[g]);return u.flush(),"data:image/gif;base64,"+u};return n}();(function(){r.stringToBytesFuncs["UTF-8"]=function(n){function i(s){for(var o=[],a=0;a<s.length;a++){var c=s.charCodeAt(a);c<128?o.push(c):c<2048?o.push(192|c>>6,128|c&63):c<55296||c>=57344?o.push(224|c>>12,128|c>>6&63,128|c&63):(a++,c=65536+((c&1023)<<10|s.charCodeAt(a)&1023),o.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return o}return i(n)}})(),function(n){t.exports=n()}(function(){return r})})(gT);const bT=ru,vT=Oy({__proto__:null,default:bT},[ru]),mT=new Jr("QR"),yT=(t,e)=>{const i=vT(0,"L");t.length>500&&mT.warn("getQrData",'The size of the payload in the QR code is quite long and some devices might not be able to scan it anymore. To reduce the QR size, try using a shorter "name", "appUrl" and "iconUrl"');try{if(i.addData(t),i.make(),e==="svg")return i.createSvgTag();if(e==="ascii"){const s=i.getModuleCount(),o="\x1B[40m  \x1B[0m",a="\x1B[47m  \x1B[0m",c=new Array(s+3).join(a),l=new Array(s+3).join(o);let f="";f+=`${l}
`,f+=`${c}
`;for(let d=0;d<s;d++){f+=a;for(let I=0;I<s;I++)f+=i.isDark(d,I)?o:a;f+=`${a}
`}return f+=c,f+=l,f}else return i.createDataURL()}catch(s){throw console.error("error",s),s}},Ba=(t,e)=>`${t}?type=tzip10&data=${e}`,ET=[{key:"spire_chrome",id:"gpfndedineagiepkpinficbcbbgjoenn",name:"Spire",shortName:"Spire",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIIElEQVR4Ae3Ba5BeZWEA4Oc9u9kkJGHZkIQkLhQziQmVBpJwOTDg7saKEIQwnYq2/WWnUjuxHTOOgbYq77ZqSVGrtZliae2P/gE74zQIodoZEmwrR6pQlTYJ0DWNuWAChBBIyN7exsGZL2e/3Xy3Xf3RPI+zzvr/LfgFyGMKCMPHX/JT7eec75RUxJD8nAVTKI/JKe1YjquxEsuwCHOPH/phm9ER5yy8fAQv4yCeww/wHezGcBGDqRJMgTymaejD+3AjFhvHC09+SRodtijfaAIH8CgexI4ihiGTLJhEeUzn4Q58CG9Vw7MP/po0OmL5b2xVhx/hPny5iOGoSRJMgjymmfgwNmGeOowOnfD0F5eQRq36yIBs2ix1OoR7saWI4YQWBS3IYwrowxasMLGEo3gK/4UfDXz9d+ce+t79HydZsPp3PrPk1vtfxBK8HatxLoKJ7cQGbC9i0KygSXlM0/EpbESbagl78QAewneLGAZVbMTnvWkT7vUzeUwduBK34b24CEG1YXwOdxcxnNSEoAl5TAvwAPpUS3gS9+CRIoYh43sYN3vTNtxsHHlMHViHu3AVgmqP4f1FDIc1KGhQHtMSPIIVqu3GXXioiGHUxGZhAAu86UUswTETyGPKsB6bsUy1nXhPEcOABgQNyGNagn/BEmXD+BI+WcTwmtquxJPKrsUTashjmo0/we+jXdkA3lXEMKBOQZ3ymBbgcaxQdgQfKGLYqn6bsFnZH+HP1CmP6TZ8BV3KdqKniOGwOrSpQx7TdGzFFcr24sYihsc15hNYqmwU/6BO+3b07+rujd/EOnSqmI813b3xwX07+kfUkKkhjyngU+hVthfvLmL4vsbMwRrVrkCnBhQxPI0b8GNla9Gfx6SWTG192KjsCG4tYtilcZdinmpdWKlBRQy7sB5HlH0UfWrInEEe00xsQZuKYXygiOH7mvOrJtarCUUMT+O3MayiHVvymGY6g8yZfRgrlP1lEcNWzesxsT5NKmL4J2xRdgk2OIPMBPKYunCnst24W/POxWoTW43zNO8TeF7Zx/KYOk0gM7EP4nwVCXcVMbymeavQZWKdWKVJRQzHsAlJxQLcYQKZceQxTcPvKfs2HtKatWrr1ZqteFLZh/KY2o0jM761uFhFwr1FDKNa06O2Pi0oYhjFPUgqlqDXODJj5DE55XZl/4ttWtOFy9V2OeZqzTbsVXa7cWSqteNGZQ8UMQxpzRXoVNscrNGCIoZB/KOydXlMbcbIVFuOxSoSvq51PerXo3VbkVS8BcuNkal2jbKj+K7WBPSq31oErfkPvKrsamNkql2q7HtFDINaMxeXqd9KnK8FRQwn8bSylcbIVFum7L+17irMVr9ZuFLrnlG21BiZ0+QxBSxWNqB1PRrXq3V7lC3OYwpOkykL6FJ2WGsCejVuLYLWHFI2F8FpMtVmKntda+Zjpca9HfO1ZlBZZozM1LsaMzVuJq42xTLVTiibpTU9mterNR3KRo2RKUs4omy+5mVYq3l9yDRvgbKXkZwmc5oihoQDypZo3gW4RPMuwQWad7GyA0UMyWky1Z5T9sual2OG5s1ArnmXKnveGJlqzyhbk8fUoTl9WterCXlM07FK2Q+Mkan2hLJOXKFxbejVuj60adyVOFfZd4yRqbYbB1QE3KJxC7Fc65ZjocatR1CxH7uNkak2jH9W9v48pmkacy06tK4D12pAHlMH3qtsWxHDiDEyYxQxOOWryn4J6zTmnSZPn8bcjIuUfdU4MuN7DHtUBHwsjylTnzZcb/L0oE0d8pgy3ImgYgA7jCMzjiKGIfy1smtxq/osxttMnrdhsfqsx1XK7itiGDaOzMTux0sqAu7JY5qttneg3eRpx3VqyGOagz9HUHEIf2MCmQkUMRzBZmXL0a+2PpNvrdr+FEuV3VvEcNQEMmf2V9il7A/ymNabWDuuM/muR7sJ5DHdhg3KdmKLM8icQRHDCWzAiIp2/H0e02XGdyGWmnxL0W0ceUyr8BW0qxjGhiKGE84gU9t2/IWyLjyUx7RCtR60mXxtuM4YeUwrsBVdyj6H7WrI1FDEkPBxbFd2Eb6Rx3SZsl5T551Ok8e0Ct/Ehcoew91FDGppU4d9O/pHunvjo7gF81R04n3dvXH3vh39uzANmzHX1JiN+zCax3QbvoYLlO3Ee4oYXlWHNnXat6P/9e7e+ChuQZeKmfj17t7YdeTZh38ydOzgnQimxnmzFq/52pqPHrgTn8UsZQO4qYhhvzq1acC+Hf1Hunvjw3g35qnIcI00+puvPPvIDFMnXNjX/1uzFq3pQaZsJ24qYhjQgEyDihgG0IPtxji299/mmGKv7nl8jmqPoaeIYUCDMk0oYjiEm/BZjDgljQw6tvffTbVjP/62NDLoZ4axGeuKGA5rQqZJRQwnsQk3YNcbL/+Pk6/sMdVOvrLHyVf2OGUnbsBdRQwnNSmYBHlMM/d/69Mb9//rZzaNDh3vNIWy9hlHu3s+uXnx9X/4hSKGE1oUTKKLb/ri/ENP/d2GwVf33zF84qVFJlH7jK4XOjq7vyylLccPPXPYJAmmwII1H+x44+Xn140Onbj9jRd33zj8xpEuTWibcd6R6Z0XfaN9ZteDM+Yu23boqb8dNMmCKfSWd/yx0eGT04ZeO3j56wefytPwyV8ZOv7israO2RekkcFFieCUQAptHQdHBl/7ybRz5j0X2qf/cNai1cW02Qv/M2ufMbT/W582VYJfgEXXfCQMHXshS2nET4XQZtqchaMHn/hCctZZZ/08/R8wPGmSSU1PIgAAAABJRU5ErkJggg==",link:"https://spirewallet.com/"},{key:"temple_chrome",id:"ookjlbkiijinhpmnjffcofjonbfbgaoc",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAGbElEQVR4Ae3B32/ddR3H8efr/f1+z2m7dT1n3Vp+De22EsxmxARvCNDGhBvDj3/AaxdMJEpIUAOJxl8IXJnFGyNX3i3BiEG9ELIqZNSLmRBYYD+7CS3tuv5Y23N6es7n87Zd2uULxAXDt2cmnseDjo6Ojo6Ojo6Ojo7/S6Jgje/sGdTdu1+2ewZvwwQSMsAEJjCBBCYwwAQSMoEJDDCBBCYwgQmJN3XLH79JwUSBGt/dO4jzmqrlQ/bQEJhAQgaYwAQmkMAEBphAQiYwgQEmkMAEJjAhsYxU1eArLQpkFKTx5MAg0mskOuTLTVgLFErsBO6lYEZRTN8i0SESgQmfq1M4MUrBUoqS6E2xTgIBc6twWy8bfLkJszWukfgUgZMj1okN6iujQ3vYNAI8R4FSCiLTCaQGoozA51cRmxotwvFLEBxChOAQHYJDiHhwCA7RIUQIDsEBRweqZF/qBxPr7vfLj6Xa+4cWBUkpSOkXU/W1Z28fRzwIgloTmgFKKezuJnn4IAiQQIDENQIkJECsEwgQ+L+WCK9fxCeX0Z29rNsJ3Au8RUFSipTYGOJBNkj4QgMNpEjAQA+YwAQSmMAAE0jIBCYwwAQS2ttD+NM5/PQc3NnLNWIUeIuCGEVKdJxEkBgkgoUGn8uuMvSWiKeukDNCgYwiJTpBYg0SQSL8aoP/RnhtApyPSY98leTRg+Tc71ceSymIUaDSDy/WSTROIkgMVlvQinwW8Z3LhGPv49Mr5OmWHejOXeTsBN1LQYyimY0pMZQIJYKlBp+FBnaAwE/P8xmMUpCUginVceBZJAiR8Oo5MKHUIDVIDUoJ9pUBdFeVLRroQdUu4pk5bHQfG/zSVcKJD1EpgVICpQSVzCmnH1CQlKKZTiA1CLEcT07jy2uQJZAaZAalBB2s4HN1RJU83bUbPzMPDgioduFTy1BOoZxAOXVKdiR78tzvKIhRsOyJM3VCHI/jU/jCKh9jQkN9qDuDpTVYDeTZcBVfWsOnV9ig3hKqdLHJcT+SPXnuNxQoZRuEv33wbVbW9pEZeTZcfZSe7HFCxB18ro56etmi4d0g8LPz6NadbEge+uJL4ZWzx3DmSj+Y+AcFS9kGXS+vvgu8C5G8tRcH52jFx3Fng8/W0R29bNFAD6p0Ec8sYA/sY4P27aqUfj75F7aJ0U7BTxLiVYJDK+IzK3yShqv4uXlyRuLkw8Y2Mdqo9PSFFi1/g1aE4LDYgFqLPBuu4str+MwKm/qBw2wTo91CHCM4tCK0HJ9ZIU8HqyDhZxfIGWWbGO3WiscJEYJDiPjUCnna240qZeK5eXJG2CZGu0U/SStepRUhOD65xCfpYBU/v8B10oh/9IixDYw2K/1ssuXB3/AQ8VbE51dhpUmeHajgy018psamfuAw28C4GVpxjOAQIgTHJ5fI04EqkvDzC+SMsg1SbgL1ZL32tVtAYoN2d5OnPd2oUsbPL8B9t7NpBPgVBTParPG9vU95rfmMbutFBypouAr93XyMQPsrxAsL5Iz49KNGwYw2ajw1+BSpvUBm+EyNG9GBCiw38cs1rhH9wGEKZrTJ2vdv/bIye0FZgjLDZ2vciPZXQODnF7hOjFIwo11SO02W1MkMsgTmV7kR9XejvjJ+YZGcEQpmtEnppx82yOwEpQQyw+stWAvciPZXiBOL4GwZ8cuPGQVKaadSMob4OhJEJ/z+DHSlKDPoLZE8cAd0p2zRUAXeuQyzNRjsYV0/cBh4m4IYbaTMjitLkMBPzRLfu4KfmiVOLEK9hV+pk6ehPpCIE4vkjFIgo51SGwfq8Z/T+GKDa7pTbKgP3PGZGnnq70Z9ZfzCIteJEQqU0EY/+fNceOb2cNpn66+T6FUSe9UO7XkQKBMc1gI2XAUJJJDwj1bwS4sk990BEkgDP3r67hd//Pz7TgFS2qz80uIxctbu4RFC/Abu+HyAWgt2ZmzRUB/x1Cx+pY729rCuH3QYeJsCGDdbM4zRjNCM0Az41DJ5+kIfSPjEIjmjFCTlZmvG47iDA9EJf72ITk5DapAIMoNEhPEpfLoGBkg9FCTlZmvFkx79Ku67fHIZ5huQGaSGMoMdGSTCP1omzNbAdBT4JQUxbrLSc1MtmuENv7QEM3U+pRGgGdl0FHiifPSKU5CU/wE+ufI8l2t/JzH+I2eW6L8t/3rO6ejo6Ojo6Ojo6Ojo+Jz+DTK0Yr9D+W0JAAAAAElFTkSuQmCC",link:"https://templewallet.com/"}],_T=[{key:"infinity_wallet",name:"Infinity Wallet",shortName:"Infinity Wallet",color:"rgb(52, 147, 218)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANkUlEQVR4AeXBf5DfdZ0f8Mfr/fl+d5NsdvODIBBJgkIi/iJwAkHUO+/wR394P7wbZ27sdari+Ud7106n7T/tzP5va2c602nnxrmj1Ws7vd5YqjhOiygWT9FDJeGHEqVAAgiEsEKy2c3ufr+fZ2NGcsAJJIF/zn08ynNs23Vd4ZfxMfwytqLzN9sYj+E2/Cd87eEffiV+pvzMtl3XnYM/wm+j+cXU4/P4xMM//MphJ3RO2LbrunNwM65D+cVVeCPet+Gc13/uyFMPLnTbdl3nhD/FdVaP87Frwzmv/x8N78YHrT6/iV9r+Bia1adwfcMvW73e1bDV6nVeQ7N6tWaVa1a5ZpVrVrlmlRtIvDrCeEzrnNSP6QZeFeMxrVHFeExrVHk1DOKVin7degu/8h7HL7vCeOMmEt3cYWu/d4d1f3GrWl52VqosXv0OC3uuNTrvAuk63dEjJu+719StN+ueOkyVV6Iu3PmrI3TORh/HL3+bZ/7e9fqJSRLPU6U7dtTGP/kPJh74EVVOSxhvOdfcJ/6J0XkX0Peep0qlN/2FPzf11Ztp5SyNu5nNr5tFc6bSW7zqHZ75+5+gmkpUqFChQiUymHD8yrebOPCA7vCTKC9ndO555v7pv9LPbFR9VKhQoUIlhOVL30o3MLH/+1Q5C+lmNl80i+ZMJI5fea1nPny9QoUKFSpUqFCh4oRy/Io9Jg4+oDt8iPKixueeZ+4P/6UMJ1WoaipUqFChQoXqY+XiNzAcmNh/L1XOULrpTRfNojld6S295Urz1/2O4cEnDA48YfD4nDa/KJNDhkMSgiCIE8rxK642PPig7qlDKC803nyOp3//X2hHlgx+fNjwoccMHnpcm1/Uz0zRGkEQBH2svH6XDIcm9t9DNWcg3czmHbNoTkd6S7v3mP/Ah9XK2ElVatxrRxZMHHhce/qIbJqmNRUqVKhQytLlewwPPqB76hDlr4zHjnz0Hxuft5XhgNZoTSXaT46a2H+QCTIzoxIVKlSoPkav28XEpIn77qaV05RuZvNFs2heTt9buuIaRz78CQYDGQ4YDhgMGAwYDrVjc2Zu/I/WfvOrlnbvYXINQRDESUtXXGPi4Qd1Tx2iyklV5n/9d+k6uo6JIa1J69Ro2fqvfNa6275kvGmL0dYdJARB0MfKRTtZs9bEfXfTmtOQbmbTjlk0LyWxdPkeR3/3E2o8dlLXGA6ZGMpwaDD3uOkbP00/VqMVa757u6W3XMWatSpUqFChwtLl1xg88qDu8BMkfmr5rVfKuhnlhCoZDrWVJTP//d9rx47Qmsl7vicbNhlv3aESFSpUqD5G2y+RNWtN7L+LKi8j3fSmHbNoXkx6y5dfY/5DH1fjsQoVKlTQmsGhR8185t8xHjlltGLNnd+y/KZfYnKdChUqVKjE8u49Bo88aOmKay1e+2vWfenPLV9+raqmlDZ/xIY//qR25CdOqTLx/TtlZpPx1h2qjwoVKlQfo+2XyJp1hj+8hyovId30xu2zaH6exPLuPeZ/5+P0IQiCOGnwyAEzf/JvWFnxQrWybHLvty2/6ZdkzRRBEARh+bKrjS7aqS0uWvvVm6y54zbdk4+bvPsO6z//X9TCvL+uTPxgr356o/HWHfQIgqCP0faLGUwa3n8PyotIN71pxyyaF0os797j2G9fr/qoUKFChcLwkQNmbvgUoxUvpkYrJvd928qll7NmSoUKFSpUqFCJNbd/WY1GBo89rHviUfrei6oycd8+Wb/ReOsO1UeFChXa0op+81ZZP2P4/+6lys+RbnrT9lk0z5VYvuwaC7/1MZWoUKFChQqDRw+Y/s+fYrTi5dRo2eRd37byhstZO6VChQoVKmidNd/4385IMdy/T9Zv1F+wQyUq1GisFo5rC8eNtl8iMxsN77+b8kLppjdun0VzSqxceoWFD/4+CUEQBKH78QHrP/Nv1WjF6arRiom7/9LKzstk7XqCIAhaZ/Jbt6jRyJkpw/379NMbjc/fwXisLS5pC0tqcYmuM7r4jTIYGj7wfZTnSIuIiIjo101b+PWPqr5XfVQf1Uf1UX0MHn3I+s98itGyiIiIiIiIiIiIiIgIi/Mm7turQvVRfVQf1Udp+rVTIiIiIiIiIiIiIiIiIlKsvemzJr97m7a4ohaW1MKSduw4VWo8tvz29xtt3ykiIiKiCYIgsbznPXRD+tCHPvShj+7HB0x99lOsrBAEQRAEQRAEQRBGF11q6R1/lxQpevShDz1ZN0MQBEEQBEEQBEEQJ5Q1X/ysie99XS0uaYtL6vgya9bQh/HY0js/wHhMEIQBcUo/Ntp5uRr3nq+0QwdN/em/Zjx2tgYP/sD0J/+hzJyj33COftMWmdms33guw6H25KOIs1Zl8qt/pvYs6s+/VNatpZoax0+NX3uJTEyq0YpnDTzXYChTG1Uff6XUM4dNffaT9L1XpEqtLKunHtOeeswpCelpnVesNRPf/oKVK4eW3vVuNe6d0jqZ2aTmDnnWIIlTEnov0Bvuf1DGI5RXReKkKqdUI/GqSIwuupBuQO85In0k8ayB5xqtaEeelpnNntUOPcXktJV3/p7hN/4biVdq+X2/J5NrtacPq6Nz6ukn1ZE57egcK8tUOWvpLX/g4/odl6o+nme0oh39iecaEKdU6e7fZ3T5uz2rzR2RiQnZcLHl915v4st/TOJsZc16o7e8k35s7IQqFFV+auLWPzO481bKmUss/+3rjXa9jXHvhbqD+1lepHWe1QRBnFCG3/myGo1UH21pRSVMTDAc6re9wdJv/AHVCIIgCIIgCIIgCEItLajlZdVH9VHjXo3HajQyuH+vwZ23OikIgiAIgiAIgiCx/P6PGu96mxr3qo/qo/qoPioMv3kT1REEoUVEREQ4Omd4y39VKbUyYmKC4ZDhkMFALnyD5d/4R9JKREREREREREREREREREYr2uKC6qP6qD6qj+ojW7brZ84RERERERERERERERERsfy+j+p3XanGveqj+qg+qo9KGd7+RfXYAyIiIiK69TMXzqI5pbQnH1aL87LtzSyvMDnJ5ASDjkSmt8j5r9f98Dskzkii33W1rJ0mCIKgm9Dvukp7YK86vuB0jd77Ef3Oq0hPEARxQtN952aD22+iygukWz/z2lk0z1WlPfGQOj4v297MxJDBQIUKlTCzRc6/WLv/DhKnL3LRZUxvUaFChQoVdEPZdZX24F61dMzLGb3nI/qdV6m+V6FChQpVzeC7NxvcfiNVfo40L6ZKu/c23R3/SwYTqqd6qqd6ahzZutPo7/wB1byUbH+z/tJrZf1mEjX/tArVUz3VUz3VUz2G64x+65/LhnO9qDC+7iNy8ZVq3Kue6qme6ilN992bdd+8kWpeTDc1vXUWzc9V6skD6tgzctFl9CEIgmD9OXLBxepHd5B4nsGE8W/+M/3u98q2N+vf+qvq6Sfohiwd191yg+zcQzWCIAi6oX7n1erBvRw/5vlifN1H5eK30YcgCOKEpu39svat/0k1LyHd1MxrZ9G8mCr15AE1/zQ7dqu+V6FChUpYfw7nX6Lu/0undAP93/pDtmxTiQqVyIVv1P2fP9Luv0MtHlUP7WPnNaqaChUqVKg2kJ171IN71dKCkxK59sNs302iUKhQoTRt3y3atz5H67yMdFPTW2fRvKRSTx5Q83Ns360SFSpUqIT1m+X8nepHt9M6rv4HTG2hj6qmqlSowYT6wW2sLPmpWpxXD+3jkj2qOhUqVKhQbcCua9RDe1l4ht0f5DWXqpWRGo0Y9ypRSlVTd92ifetztM5pSDc1vXUWzcupUocPMj/H9t0kBEEQTG3i4rdrEztUt4Zxr/ow7lG0xuJRdeeXUJ5Vx+fVQ/vk4j1U56QgCKqTS9+lzn2L6tep0YjRWK2MGI3VaKT6qHu/qt1xI61zmtKtm75gFs3pqOKpg+ronNq2W/VRoUKFCoZr5DXnMe7V4qJaXmbcqz4o9X9v4Nicv2ZpXh3cp15/tapOhQoVKlQws1E2bKCPWllRKyPSq8GQ+/+CfTfRmjOQbmr91lk0p6146mHm59h2GUEQBHFCsX5KNm+WDRuYmmLNJLfdwI/vQ/m5jh/j4F287kragBRBEATVmFonGzbIxk3MbOCBb3DnF6jmDKWbmr5gFs2ZqGLuEebn1IWXqUSFChUqVKhQSiV87dM8+n2qvKSleR6+W110pWoDFSpUqFChQoVC3XsL372Ras5Cuqn1F8yiOWPFTx7hJ4+prW9W1VSoUKFCpVg6Jl/7NI/vRzktS8c4uFdd8CY1MaUSFSpUqFDB3pvkri+hOUvpptafP4vmbB15nB99g36sJtZRA0YrcuQJ9t8m3/wMRw85Y8sL/OjrcuxpJtapbkjfy7GnOfA9+eZneORuqrwCqS3nXzFC5xULfU/rEPqe1nlV9GOqUUU/phpVXgXjgcSrphqJk6qReFVUc1JCNSclXg3NKjeQWM0GsboNiNVsIFa1AenRWZ36QXgM261Oh7q1615zJS6zOn2p4QbE6hPc0HArPm/1+SJu6RYXDlm77jVfwftxvtXhLnxo7vA9xzonLC4cWli77jWfwy68AeUXU/BFfGju8D2HnFCeY/OWtxSuw8fwLpyH5m+2HofwddyAW+YO3xM/8/8BSHXLEHo7BSYAAAAASUVORK5CYII=",deepLink:"infinity://"},{key:"galleon_desktop",name:"Galleon",shortName:"Galleon",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAN6ElEQVR4Ad3BC3SW9X3A8e/v/7yX3IAQCLdwhyCKGlARRBRorbdZaWu1lx27Xlydp+txW1vtXLs2nh0723o6e13VdhU7dahzFdGCchOEAAICohAScg/kfnnzXvI+z/P/7U0lPVlGIIE31O3zEYaZqoI2OerlTLfqzzJGJnmJ7rxAOJiFVZP0bTJkJKJOoEGUanGkFMdvhxGICMNNSDNVhY62IBnBpSpcD+5SVRagZINyRiIKUilGSnDZJMZ5lYycWhFhOAhpoloBfv6Vat0vqdXbUB1DOohYEXbiOE+JJJ/GjO0QEdJFOEdquyQRdz8WDsj9av1FDCeRTjHBXx1vbPnhpIJd9SJ3cK6Es6SqqI0tU899BOtfzvkkEhcn9KgY7yFxciOcA+EsWK87Dxv7kfr2TkD4UxFTK478tQRG/U5EOBvCEKgqfjK2QrR7FaqT+YAQE3wiltR7c0aMijFEDoOkWoF6oW/gJ54EcvkgUXtZKCC3fLf4W+uKH3yonSFwGAS11vG73V9i7TcBwweR6gTr+5/+bvHfbC5+8JF6BsnhDDQRDagXexrkc3zACeSgwU8X33//tuLvPVzNIDichlrfqO3+jar/Gf7vCKsjnywu/vbrxQ8+VM8ZOAxAVfGT7Q+j/j0MM5vsRpwAaRS2vr+y+MFvvVD84PfaOQ3DAGyy689F9RsMIzfSRndLA1UvPkW6CYy3rn0x2R3P4jQMp6Be9wVY95cMM7ezDT/RRe3a1cSO15B26hcFSD6qqgzE0I/aSMB6sadAszlPrO9R/uSPGQ5qvbvUi6xkAIZ+1NevonYh51nr/t207HmT4aC+9zP14yM4BUMf6sfHqe99hz+R8qd+hnoeaadaoL77gOpq+jOcpKokE7EHUB3FeeDFuvBiXfQVb6in9vfPMxzUevdGI9dNoh/DSWqTEwKOfJnzpOLZx/DicfqrfvEp3K5O0k41MyvD+bqq0pehl9/1V6hmch50lr1L/WsvcSpeLErVC79hOKj1v4StG0UfhhS10YBauYvzQK1P6eM/BFUGUv/6SySajpN2qiPVjvgsfRhS1Pc+jGoB50Ht2tVEq49xOup5VD73a4aD+v6dqkovo6rg2ds4DxJNJ6h6/jcMRuO214nVVZN2yiKiHZM5ydDUKCp6M+fB0V//CD/ZzWCoKlX/+STpp0aN3sRJhrwRc1AKGGZNJZtofXsnQ9G0YyPxEzWknWNWqCo9jNrkYlCGkxfrouzJnzBUqkrNmv8g3VTtYminhwEpYphVPPsYyfZWzkbD1nW4kQ7SS6fjB3JJMVh7AcOo8+gh6l9fw9myrsuJTWtJK1VRnzmkGIWpDBP1fUof/yGoci6Ob3wZVEknC1NJMaDjGSY1Lz9DtKaCcxVvqKf93X2kk7H+eFIMMJJhEG+oo+qFVaTL8U1rSSdfdQQpBtUQw+DoE49g3STp0rxrK148Sro4jgmRYgBLmjW88Xva3tlLOlk3SVPJJtJGxJJiEBMjjdxIO+VP/Zzh0LjtddLFT7oxUgxoK2lUvupnuF2dDIf29/aT7GglHZxQqJUUA1LHIFlrUQbWdmA3Ddte438TQAABBBAQ+hAGRZWW3dtIB1XqSQkI5phil3AG1lruL/457ZEY//T3dzE+P4/+wmPGMf87P+Z/EFKEPxAQThIwoRA9ir79I1BlMMKjx3LuBEHKSQlgvEP4nFYy6fL14l+wbssuetz02fv4yuc/zp133EAoGKCXk5FFtPYYg9Xd2kCPcN54BkVh5OyLOGdCVIKRSlICSOgtSDKQxuZ27v2HR9l76Ci9ovEE3//FM6x6fh1f/PTNfPKjy8jOyiQ0egxNJZtpKtnCcJj9hXsxwSBDYa3ltS17eOfdMv72nk9hjCFlHzLBJyUgSd2pjrioBuln85v7eOCfH6elrZNTOdHUykM/+S3/8thzXL98ITcsX8hVf/lNUEvTzq2k0+zP30vB9R9nMKxV9h8qY/2W3bz82nYaW9rpUd/QwsP/eA/BYHibiNAjQDQRkVGh7ar+Mk5qaGrl+z99hpc37GAwYt3d/Ne6bfxu3TYcY5hXOJWrE1nMz4iRDi9E80luOMYFFauZUjCO/DG55ORk4WDw1CcSidLY0k5VbQOHj1ax/1AZXfEE/b28sYSW9ghfu/v29ZwkpNhE+9+p+o80NrXx62de4ZkXXyfhuvQwIiiKtSACRgQFVJXTcUS5e0wr8zPjnItn23PZGMmhPxFSBFRRhkJa4k2HJ9ZVH3NJCZCy6ulnV+8+WPf998pqnDmzp3PNVQvooVZRAd9TMsLg++C6EAg6gI+Ig7VKIGA4VlVHWUUNyvt8FX7Zksfn89qYGkpyNkrcsTiXXc0NpIhQXllLWUUNiKBKijJUin2+rvqYy0kBepi5tT4n1o8ckXPTpq07sYAqgyICapUZUydx3bLFiCrGMRyrqqO0vIpfteQhDJ1y0pad/IEqs2ZM5vrlV4EqIhBLJDlaXkV9YzOO46CqnEnCDf4bfQgnTbtk5U3BUPIV0kGVGVMLuGDWNKwq8USCnXvfIel6pI0qmeEQhbOmM3H8GHzf8j5FRFCrBEMhPN9HfZduV/HV7nzj1R2LKys300s4KTD/MpnmjNsryHzOgghY35I/ZjSTC8YzJncUoVCIZLKb7KxsFl5xCQcOHKa5rR0siAHHOPjWJxwOknQ9GpvbqKiqIxKNImI4WyKCquK7HggEwyFCJkA4y3xiz8YXX6QPoY+pl3/01hDe7xgEVSU/L5eLLyok6Bh6iDE0t7RRU3eC5tZOPM8lEAzSQ1XpTwQEwfU8Ao7D+Pw8ZkwrYGRODmotCBw6coza442ICOfG7Kn0Wei9vVbpI0AfsUT1S8HgxI3iyIc4BccYFi6Yx6gR2YDQ3NLG9p37SHo+p+IEAqgqA1EFRXEcBwVONLVyoqmVXgJ87o5b6IrGiMYSHK2opryiBkQYIk3GE1/z3t2g9CP0M6Xo2gvDgex9QJgeqswtnMGMKZPwrWXX3ndoj3QhAoKgpKiipN81VxbR1NbJ4aMVqCqFM6cyZ8YURAxbS/bSGY0xGKr+qvLwlL9gx6/oT+jv9tuZVRa7LxDg4aWLFpCdmUEymcQ4BmsVARQLOCjvM6KoVUSEHj5wtKySmvoGEGGoFLhpxVW8d7SSqtrj9DU2L5eii+bQnXQZNSKbg++VU11/nIEI1HZ1ZRcdP/J8K6cgnMLd93zFXLH42nVHSyuv64onKK+qpbyiBjEGVeVMHCMUzpzOtMnjQZWE67HzrYMkkknOJOA4rLxxGZve3ENrewd9BRyHlTcu5/mXNyACqHLpRYVcueASXt24jboTTfTj+9Z+pGLfuk0MQBjAvKU35yei/i4xZjrnKBwKseSKS8nMCHO4rJJj1XWcSu7IHK67djFr1m2h23XpS4DbbrmONes20+169LrmyiKq6hoZm5dLwYSxbN25j/bOLnq4ycR9Eqn4QWVlJQMRTmPCrI9cnJMbeAMYTTqoMrdwJrOnFVBaUU3psWp6zZ09nakFE1i/pYT+FFh54wq2vLmTjkiMXpdfOpdorJvDZRX0EOCaxZeRGQ6xedvbj3eM9b5c+8oaTsfhNLrajjVOnFH4hu9zBxAmRQRUwXoWtRaL4DgGYRBEaG5tp7SimrGjc7l64Xyam9tZumgB8XiCHXsO0J8RuO3mFWx+8y06IlF6zb+oEAEOHi6nr6ra4zQ2Na1+4tEHvvjIfd9QzkAYhE996atXjcoZvTZgzGirihEwThAERC1J1wUMxoAxhtb2CAcOHSHpeigDK5iQzyf+7MOsWr2GjkiU/jJCIT56wzJe3bCNrlicXpfOLSQUNLx18Aj9+RL87fjM6BdKtm7wGARhkBbfcvvFTfWda0TMdE5DVckbNZKii+cQCgYQMZRVVFNWWYuI0CM7K4PlS66gsamV3fsPAUJ/UyaO4/KiC1mzfiu+tfS6/JILAGXPwVL6s+r+oK3KfrOtZaNlkIQhmHHhsnwysp52DNcxWKoUzpzKzOlTCAUcfN+SSCTZsmMPvlr6U4VrFy3A8z127DlIX1cvLKKto4t3S8vpJxpL2rtDGa3/Xrl7N0MhDFHBkmtNOJH5dSPmQSDMIMyYMomL5syksyvKm7vexqpyKuPGjmbpwgVs27WPxpY2eglw04eXcuhIOVW1x+lL0d3GDd159MBLRzgLwtm4/XYmVMcvzEqYn5qA+yFOIRQMsGRhEVkZGVTU1PFeaQWIcCrhYJAVS6+kIxJh++4DiPBHeaNGsGLpItZv3k4kGuOPNNDRnbTFMXPiJy0H9nicJeEc5M6YQzB/zq0jfa9YkPkoFM0rZNL4fJKux/bd+4l3dzOQjFCIa6+6DBQ273iLpOvxR6osvryIzIwQm7a/RR/xOP5j3SbwUPPuVxo5R0IaBJYslWmJSTd+8uZFX92xd//19Q1NDgNRZea0ycydPZ3uZJI3Svbheh59TRw3lsWXXULJ3gMcb2zhfVLneYEnWqIj/jWyIHmC554jHYR0Gnkr4yc0TM4MmDska9StjsoSgaAIzJs7m4IJ+QhCeVUtpeVVIEJf2VkZLF+ykKamVnbtP0RKXbdNvOIkEi90BXI2NB98zSPNhGGSPXEiubnTRnzuMx9bNH3yxCtWPbN2XkNL50zEFACjQTMBA7jhcCiy8sblDR0dsepX168/4pnAft/rLIn62aXthzcr/1/kXng15OQzadZCcifPkbyCQpORP5fr77qLd8rKgHmcb/8N3VaULP16cD8AAAAASUVORK5CYII=",deepLink:"galleon://"},{key:"umami_desktop",name:"Umami",shortName:"Umami",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://"},{key:"atomex_desktop",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE6UlEQVR4AeXBe0xVdQDA8e/53XNFQFJ5e0NAAUXeMQHJByo+cM6Z+WrO0h66uelEatl0U9egnDa1rczN1eq/Mg39I8WQphYOo4z54K0Cgl6eQy6IXO49J/2DZk3k4r0c2c7nI6mPoGMCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc7JvCD1ZgslpWasNoXJE7yJjvDjRZDRWGt7NzsPnCfv4k1UlX/FTPJj//Z0osJ90ZJAQ5YuK6u35nLmwk1Ulf+4XtnMii0nuFHVgpYEGjr4zWWqatroT9eDXj7cV4CqohmBRux2lR/zyhnI9cpmSqub0YpAI+aWTjo6e3BE5e02tCLQiFEWOMpoNKAVgUb8fTwJCvRiIJIkkTAlAK0INPTeqgQGsmhWGEGBXmhFoKF1y+JYPCec/kSEepOTlYaWZDQkhMQXuxaSHGvi6LES6s0dPDbay40VGVPY9nYyXp4j0JKMhn46W46/jyfrl8exbnkcza0PsNnsBPiOwmCQeBEEGjl/uZb39xZQeKWexyTA38cDU4AXBoPEr0U1HPr2D7Qm0ECD2UJmdj7R4b5krk/iacpvtvL5d8XUmzvQkmCIWXvtbNqdh6KqfPXxItxGyDzN6wsikSSJY2fK0JJgiOUcLuRqRRMHd85n/LiX6E+gnydpycEcP1OOoqhoReBCPVY795o66bHa6GNXVLZvnEZ6aigDWb04ioZGC7/9eQetyLhA3d37fHLkEgWXarD22jHKgtkpIezYNJ3sbWk4Kj01FN+xHuT+UkFacjBakHFSxa1WVm3Npb3jIX16bQr5hbcpKmng+0PLiJnkhyOMsmDf9rnIBoFWBE5QVcj69BztHQ95GkuXlczsfBRFxVHpqaGkJQfTR1FUhpKME65VNHG9splnqapto/jaPVLiTTjC2mvnh59Lyc2vpLSqmZ5eOwE+nsxMGs+7KxOInOiDK8k4oaq2DUdU17aREm9iIHV377Nh52nKb7XypHvNnRw7XcaJsxVkvZPM5rVTcRUZJ3i4G3GEx0gjF4vrOHWukplTg5mVNB7vMe48qbW9mzcyT9LQaKE/drvC/qNFGIRg05pEXEHGCUmxJoyyoNem0B+DkEhJMHG1vImLxXc4nleOEBLxkf7MTglhydwIwoLHknO4kIZGC4747OsiFsyYQFjwWJxl2PMIz8nD3UhHl5UrN8z0Z+3SWJbOm0R4iDcbViUwf8ZETH6jqLvbwclzVZRVtzBnWggf7C1AUVUcoSgqSBJzpoXgLBknfbQxlbb2bk6cLef/lsyNYNfmGfSRJImYCD9iIvzY/OZU7lt6UBSVS3/XY7MrDEbhX/W4goyTZFlwYMc8Vi+O4vSFaszNXfj7eJAxK4zpiUE8y2gvNx5rbOlisBpbOnEFGRdJiTeREm/ieXi4GxksT3cjriAYBmIn+zNYsZP9cQXBMBAV7suUMF8GY3lGJK4gGAYkYPeWmQgh4YhXE4PImDkRVxAME6mvvExO1mwMBolniY7w48s9C5EkCVeQGUbWLIkmIsSb7MO/U1LWyJM8PYy89VosW9cl4z5SxlVkhpmkuHGcOrKSmvp2blS10N1jY5z/KBKjA3F3k3E1mWEqNGgMoUFjGGoCnRPonEDnBDon0DmBzgl0TqBzAp0T6JxA5wQ6J9A5gc79A200jdqC2KUJAAAAAElFTkSuQmCC",deepLink:"atomex://"}],wT=[{key:"kukai_web",name:"Kukai Wallet",shortName:"Kukai",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAHNklEQVR4Ae3BbWyUhQEA4Ofevg0f7d0RsAllEJSpQVy1K3SQIQro2HRoVIymS/Zj6w8xfk6NWzRzoJkO48d0MUaTZv6yMRFNxM2EIX4wIthSUJERgrCmjHZWCXdXapsWbgk/iLbvlXuPsgHjeZx11ln/1xJiaGjMV+NazMU0lDs1DKADm7GmuSnRqUgJRWhozF+AR7EMoVPbIFbjoeamxOeOI+E4Ghrzy/EMxjq99OGe5qbEi0ZQZgQNjfk/4HGETj8hltbUrRi3fevKdQooU0BDY345Hnf6u6ymbkXX9q0rt4gQiNDQmL8Azzhz/LGhMf9dEQLRHsVYZ46x+L0IgSEaGvPVWObMs6yhMV9tiNBw1yJ0EiQSVJ1D9WQmTmDsGEf19XPgIJ1ddH9JPu9kCHEtXvINoeHmGkXl5cyppb6Oiy8iWWlE2Rw7dtLSRus2BgaMprl4yTeEhptmFIwfz9VXsWQxyUpFSyWZV8+8enI9rF3P2+vo7TUaphkiNFy5IowZwyWzSCbZ287edsdcMZ+Gm0glnZBkJcuu40eLeOU1PtjomPOmM+Ncsjk+/Yy+fsUoN0SoBOfP4L7bSacds6mFtev56Y+ZXWtUpZIs/wX13+cva/nJlfxgtmMyGZ56nt17xBaKacwY7ruddNq3zKtnXr2TanYts2sNk05z3+3c8yD9/WIJxXTJLNJpJ+RQL51dZHOOSiWpnkzFeCVLp7lkFi1bxRKKadw4Jen+inc30NrGvv0iTZ3CnDoWLaBqktjGjRNbKKb2DrH0HOLV13lvA4ePGNG+/ezbz5q/snABt9xIZYWitXeILRBTewd/36QoO3fxwMO88z6Hjyja4SO88z4PPMzOXYqycTPtHWILlODFP/PxdiPa8jGPPc3BjJIdzPDY02z52Ii2fcoLTUoSKMHhw3T8S0E7d/HsCwwOOmGDgzz7Ajt3KWjffo4cUZJACcrLWThfpJ5DPPcig4NGzeAgz71IzyGRLv8h5eVKEijBnFoqK0V69XUOZhQlnSKVVJSDGV59XaRUkjm1ShIqQX2dSN1f8d4GI0qnuGEp8+pJJR2VzbGphTfeIpNV0HsbuO4aqiYZpr6OD1vEFogpkeB7s0R6dwOHjyjo/BmsWsmSxaSSjkklWbKYVSs5f4aCDh/h3Q0iXXwRiYTYAjFVnUNlhUitbQpKp7j/TlJJBaWS3H8n6ZSCWttESlZSdY7YAjFVTxbpUC/79ivohqWkko4rleSGpQrat59DvSJVTxZbIKaJE0Tq7DKiefWKNq/eiDq7RJo4QWyBmMaOESmbU1AqSSqpaKkkqaSCsjmRxo4RW+C/IJFwygrE1NcvUiqpoEyWbE7RsjmyOQWlkiL19YstENOBgyJVTzaiTS2KtqnFiKoni3TgoNgCMXV2iVQxnqlTFPTGW2Rzjiub4423FDR1ChXjRersElsgpu4v6Tkk0pw6BWWyPPknsjkFZbI8+ScyWQXNqRMp10P3l2ILxJTPs32HSIsWUBYoaPcefv071q4nm3NMNsfa9fxmBbv3KKgsYNECkT77B/m82EIlaGljXr1hqiaxcAHvvK+gTJaXX+HlV0glHZXNKcrCBVRNEqmlTUkCJWjdRk+PSLfcyIS0omRzZHOKMiHNLTeKlM3Ruk1JAiUYGOC9jSJVVnDXrYShUROG3HUrlRUifbCRgQElCZSgLGDqFAXNvJC7byMMnbAw5O7bmHmhgqZ+hyBQkkAJljdSW2NEsy/lwXuZkFayCWkevJfZlxpRbQ23NSpJIKbp05g/V1FmXsgTj3DlFZQFilYWcOUVPPEIMy9UlPlzmT5NbKGYpk8TS2UFjT/numt4dwOtbezbL9LUKcypY9ECqiaJbfo02jvEEorp66+VpGoSN1/PzddzqJfOLrI5R6WSVE+mYrwT8vXXYgvF9MkOMhnSaSWrGM/5M4yqTIZPdogtEFN/P089TybjWz7awiNPsGWbk2bLNh55go+2+JZMhqeep79fbKES7N7Drx6k5mJSSfb8k73tjtq5i8vn87ObSCWNimyOV17jg42O2rmL86Yz41yyOT79jL5+JQkNN6AIff20tIn0wUZat3L1VSxZTLJSSXI9rF3P2+vo7fUte9vZ2y6uAUOEhuswCnp7Wf0mb77NnFrq65g1k1TSiLI5duykpY3WbQwMGE0dhggNtxm/NEoGBviwhQ9bSCSoOofqyUycwNgxjurr58BBOrvo/pJ83smy2RCh4dbgeYRGWT7PF9180e1/YRBrDBEYorkp0YnVzjyrm5sSnYYIRPst+pw5+vCQCGUibN+68kBN3YqvsNSZ4Y7mpsTfRChTwPatK1tr6laMw2VOb6uamxKrFFBmBNu3rlxXU7fi37gKodNLH+5obkqsMoKEIjQ05i/Ao1iG0KltEKvxUHNT4nPHkRBDQ2O+GtdiLqah3KlhAB3YjDXNTYlOZ5111llF+A8aUDCF69BprwAAAABJRU5ErkJggg==",links:{mainnet:"https://wallet.kukai.app",ghostnet:"https://ghostnet.kukai.app",mondaynet:"https://dailynet.kukai.app",delphinet:"https://testnet.kukai.app",edonet:"https://edonet.kukai.app",florencenet:"https://florencenet.kukai.app",granadanet:"https://granadanet.kukai.app",hangzhounet:"https://hangzhounet.kukai.app",ithacanet:"https://ithacanet.kukai.app",jakartanet:"https://jakartanet.kukai.app",kathmandunet:"https://kathmandunet.kukai.app",limanet:"https://limanet.kukai.app",mumbainet:"https://mumbainet.kukai.app"}}],AT=[{key:"airgap_ios",name:"AirGap Wallet",shortName:"AirGap",color:"rgb(4, 235, 204)",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAJ60lEQVR4AeXBe2xdd2HA8e/vd865N9f34ce1r+36GcexnTRpmj4S2gbSkbYq64BVTKggJsYfLWxisEkriG4sgECjmjZRVIQ2dTw0aYitaFC2wUYofajQNU3S5uE4sWM7tuPY8eP6Xt/nOfec3zYhT4dbP37XsdM//PkI9b/YwiRbnGSLk2xxki1OssVJ3gYFz6VcpuTwdpDcQLN2gT86/Su6jz1Lua5jz/LoG69wrZjnRjK5AYqeyzdGBvjyxTdYcGzqrCDlbM/lH8Yu8uzVUf6iZx+f3L6boJRsNpNNpIDR1DzfuHSOv50YQkfKsXn83HG+OTLAl/pu45GW7Ugh2Cwmm0ABY+kkZ2aukioWyDg2awlKA3BYMpxb5CMnX+TJodMc7d3Pw83tCAQbzWQDeUoxkpqnf26adLFAJf6gfSd/PXSGcmfSSX7v+PPsidXy2e69fLBlO5aQbBSTDZB1bC4tzDKYnKNQcliPr+6+g72xWv78/AnG81nKnU0n+f2TL/G58yd4rKOXj7XvpGVbFdfLZJ0Kbonx9AKXU/Ncy2VQrEywNgF8pHUHH2ju5OmRfp4cOsO8XaTcRD7LXw6c5IsXTvFb9c18qKWL9ze3U2cFWQ+TCqTtIpOLKSYyKa7lMiilWE3QMNkVT5APh2F6DB0hw+Dx7r18vLOPp4bP8bVL/SSdIuVcpTg2M8mxmUk+8abkcH0T72tq57cTrXSFo+gy0XRiaoKB+WvoCFsB+uIJumvqMaXk9XyGSsVMi8/33MqfdN3M341e4Knhc1wp5FiOozyOzUxybGaSTwFHe2/laO9+dJhoyjo2qxFAUyTGztp6WiPVCCHYCFHT4s+69/Dprt384Opl/v7yAC/OTqFY2Wgugy4TTbZbYjl126roqK6lM1ZLlRVAh6JylpQ80rKdR1q2M5Jb5HsTw3x/coQz6STl5uwiukw02Z6LX1u0htsaW4gEgqwlKA38sq5D1i0RNkzWY3tVlCd69vFEzz4uZlL86dnX+Mm1CZYknSK6JJocz8MvURUhEgiiY3e0Gj/b8/jjM6+SdUtcr55INXfXJfBLlRx0mWgquS5+ppTo2huroy9SzUAmxZLvjA3yTxOXiBgWHgrFrzUGQxyqS/BYRy8HahvQETUt/NKOjS6JppLy8DOlRJcAntx9B+Vsz2PeKbLg2KQcm5RjczGT4ltjg9z18r/x2JuvUPRc1hI1LfwypRK6JJpKnoefISWVeG9TO1/edRu6FPDM5Yt88PVf4CnFaqoME7+sW0KXRIOrFOUMIanUEzv38cMDR+iNVKPrx1PjPD1yntVUGQZ+Rc/FUwodJho85VFOCsF6vK+pnfc2tXM6PU//4gK25yEAKQSuUrw0N8V3x4fwlGLJXw2e5g87+7CkZDlBw6Bc0fMIGQZrMdGglKKcFIL1EsC+WB37YnWU+2hbN7dXx/nkmVdZMl3M88vkNQ7Hm1hOQBiUs5VLCIO1SDQo3kog2Cwf7+yjxgrgd35xgZWYUlDO9RQ6JBqU4i2EYNMYQrBNGviVlGIlEkE5D4UOiQYheAvF5jk2M8lUMY9fZ1WEzWCiQSAop5SiUlm3xJxdRKFYjuN5PD97lc/1v45flWHyrngTK3GVopwhBDpMNEghKOcphQ7b83jm8gWeGbvIm6kkCkWlHuvsJWZarMRRHuUsIdFhokEKQTlXeaxlPJ/ld1/7OadSc6zXzdEavtS7n9UUXJdyQcNAh4kGKQRSCDylWFLyPFaTdGyO/PKnDGXTrNedNfX88MARIqbFarJuCb+AlFhCosNEkyUNim6JJY7rsprP9h9nKJtmPfZEa/lEZy+PdvZiCcla0o6NX9S00GWiKWgYFN0SS4quy0qmi3m+Oz6EX40V4It9+7mnrhFDCJZjCEFzsIp4IEgl5pwifnVWEF0mmoKmBXaRJYWSw0qOzUzieB5+zx24j0PxRjbDVCGPXyK4DV0STVWmhV/GKbKS4dwifr2Rag7FG9ksl3KL+LWGwuiSaIoFt+E3X8izEonAz/E8NtOJhVn8+iI16JJoioeq8Ms5NuligeX0RqrxG84t8tzUGJvh7GKSyUIOvwO19egy0ZSoiiCFwFOKJZfTC+xtaKLc/Q03UWWY5NwSSx55/QU+veNm3lHbgCEESwJC0hOpprMqwnr885UR/ILS4J11jegy0WRJg8ZwlKuZNEsuLcyyp74RIQR+1VaAT3Xt5quDp1lS8FyeHDzNSvZXx/nKrtt4MNGKLsfz+PbYIH73NdxExLTQJalAV3UdflnHZjSdZDlHe2/l7roEuk6l5njo1Z/xlYtvousfJ4a4Usjh99G2biohqUB7rJaQaeF3euYqrvIoF5QG//GOB3i4uQNdCvj8wEn+ZXKUtWTdEl+48AZ+baEw729upxKSCkgh2BVP4Jexi5ydmWI5MdPiB3e+m5/e9QAfuKmTpmAIwdoeP3ecklKs5gsDp5jIZ/H7TPdeLCGphEmFeuoauDA/Q9axWdI/N01LtJr6UJjlPNDQwgMNLfwfxW+at4t8pv843x4bZMlYPsMr89McjjexnBdmp/ja8Dn8usMxHu3opVKSChlCcntTK36eUrw8MUy+5LAWAQhAAAKIB4J885a7qbEC+J1NJ1nOeD7Lh068gKsUfl/fe5CAlFRKsg5t0Ro6qmvxyzkOvxi7hO26VCogJY3BEH5516XcvF3koVd/xnQxj9/H2nfyYKKV9ZCs08GmdqKBIH7JQo7nxwYpuiU22oxd4P5f/SdnF5P47YrW8NSeg6yXZJ0sw+Bw2w4saeA3l8/xXyMXWbSLVEJRRvD/LmRSHHr53zmVmsOvzgryr3e+m4hpsV6S61Ad3Mbhti4MIfFL2wV+MjzAaCqJPoWf4Ne+d2WYgy/9mMFsGr+wYfKjg/fRE6nmephcp8ZwlHvbd/Di+CVKnscSx3N55coIl9Pz3N7YSiQQpBKXcxkefu3n/GhqjHIR0+K5A0e4py7B9TLZAE3hKEc6dvLi+DCFkoPfxGKKyUyaHTVx+uIJYoFtLEcpfsPTI+dZTlMwxHMH7+OOmno2gskGqQ+Fec/2Xl6eGGE2n8XPU4rB5CyDyVkaw1HuuqmDsBWgUnfVJvj+HffSGgqzUSQbqMoKcH9nD7c0NCOFYDnT2UVOTE1QiYCUHO29lRcOvYfWUJiNZLLBpBDsbWimI1bLyekrXMmkKJe2C+h6MNHK39x8J7uiNWwGk00SC27j3vYdzOaz9M9OM5FJoZRChyEEDzW28Xj3Hu6pa2QzmWyy+lCYd7V1kS85jKaSjKbmUSjKmVJyS6yWD7fu4MMtXbSGwtwIJjdIyLTYFU+wK57AVR7l/vudv0PEtLjRJG8DQ0jKRUyLt4Nki5NscZItTrLFSba4/wG5rKPEn6lO8wAAAABJRU5ErkJggg==",universalLink:"https://wallet.airgap.it",deepLink:"airgap-wallet://"},{key:"naan_ios",name:"naan - your portal to web3 ",shortName:"naan",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACDklEQVR4Ae3BMWgTcRTA4d97/aNBI2SpOKmbgjrUBNvBQbsJOggd2sG14NCILg52sEPr3ExZnVwLTgUJggq2TUAwiJNkkapEdAjUoeR5NuAtSe3JUXt5fp9YsWSkZ0Ea9YdErFjaAnIMdlsa9erixOeCmH7j37ilOKc4pzinOKc4pzinOBfY3QdgnZ7rQJ4ho+yuJo36jDTqM8AnhpDinOKc4pzinOJcIHs6XewmAyhcA7nHHgWyZ3t+7fgzBlga/3KaBALZM/Jool0i0sU2H7we/Uhkabx9UQQ1654igUD2HDOzDXbYIjDPDntlRg6EJBTnFOcC6TpnxdI0PSNkQCBdU8AUGaI4pzinOKc4pzinOKc4F4A5BnvHb7YAUiA9L/nF2ALm+BsidWJ3gUAissF/zolRfgycZP+tCJVlIlbLV4EzpGNdJjv3iVjtaAXkAoOtBuAScJb91yRWBEqk4wexMeAyg7UU5xTnFOcU5xTnFOcCB9820KanAORIUeDga8pkZ4yI1fJPgGlSpDinOKc4pzinOBdITKpgX+lLRsFmyZBAcstC5T19GHfOA7NkiOJcIDFrGOUu8Fyo3CBilJ8CV8CUjAkkd4SeHLEckCeDFOcCw+ew1fIn6DnEHwSGz1Vgkz1SnFOcU5xTnFOcU5xTnAvAKtAkubfEXgDfSUTeEKsBLfprEVsDAump/wQutXPS0gaA0QAAAABJRU5ErkJggg==",universalLink:"https://www.naan.app/",deepLink:"naan://"},{key:"altme_wallet",name:"Altme Wallet",shortName:"Altme",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF7klEQVR4AeXBW5DVdQEA4O/3O/+zexYWlEWQe6W4hhJQDBdRCRaMFMfrjICAyjg+ODXm9NDlofGp0pp8sRqnxqeaQqbsMo1O4ziJ17QAwWuikxaKQiIBC8tyzvk1gzM0O8vZ5dz25XxfWCslLSxqcVGLi1pc1OKiFhe1uKjFRS0uanFRi8uMsJCn2EHWQdt0lDj+b8r95I6SikZUZiQVGH8xV9/J3B7GTiCVOfghO57gsQc58AaOGzGZkdJO91Xc/VPOnkgIThk9likzWbSaH93Ku0+jaEREIyFSmMpdDzDuXEIwSAhMmM5Xfkw8y4iJRkKBlbfQNdmwps1iwXXIGxFRswVCgRW3EoJhhcCXNlEebUREzZbjomWcO8MZu3ARUy8mZJouarKUsWIDIThjuYxl60mjNV3UTJGubuZdgaAql15L+3hETRU1USpw6Q10dKpa12TmrSJ0aKqoibLxLF2rJgErbya1a6qoSeIouuczdabaBC6Yz9TZhDZNEzVJMWPlJmLOIKlM7yHee5P33qT3ECkZpK3AF2+iFDRNpglCxvjzmLvUIB/v43f388Lj9O5z0qgJLL6C67/OuHOdEgKXXMsj36fvPU2RaYJUYPE1jDrLAB++y/fWs28n4Rip5KTDe3l8Nzu38u1fMek8p3RNYe4qXvwF6YSGi5qgnGfFRkJwSqnIT+5m33YcIZX8XwlH2L+TB75KueSUGLniNk5kmiJqtDwXLWHSpw2w+2+8vhXHVJT62P00rz1rgAsXMX0echouarByoOc2Ys4A25+jLRlWVmbnswbI2li6jtCp4aJGCoyZxoIrCcEAR3sJwfDK9B02yLK1xDGIGipqpAJL1lAYbZCJEyiXDC9H12RSMsDZ5/D5KwkdGipqpLPoudlpLbqKcgeiygKlHItXE4JBVq6n3KGhogYJBboXMuMipzVxBl++E2OcXiCMZdXXmHyewQKzFjFpJiGvYaIGKXfQs4EYnVYIrPsGX7ydNJ7QTsgRcoQCzuHyW1j/LRXl21m2jnKmYTKNkDF2Cl9YYUjtHdxxH0uu5i8Ps/cVEibPZvkaZl9OLlNRCFxyLb+/l+N9SOqWaYQCC6+hc5xh5TLmLGfOckpFJ+UyZ2zCdD63kr//GkV1ixogFOhZQ3BmUiIlQiREUkJyRmJkxW2UcxoiU6fQxswFzJiFYFjlEm/v5K+P8v52Yp4Z81lyDdO6CdGwZl3C1IXsfQ4ldcnUqYiejeTyhvXRHh76Jtv+RCwRfGL7o/zhPi7fyMZ76BxnSO0dXHYDW3YQjqhLVKexU5i/ihAMae873HMdO35DPIxeUi+pF0dIH/PUz/juag5+YFhLbyI/Ud2iOoQCC66nc5wh/Xc/P1jPgVfRj2SwhGO8s537N3DsiCF1TWLuUmKnukR1OJFn1a2EoKJSkYe+wwcvkfoM7zhvPs+WeymXVBQDq27neE5dolrlOX8Bn5qjopTY9hgv/hJHnbFwlD//nLd2IDm9wKxFTL6AkKlZVKsxrNhECCrqP8aWewl9qneYzT+kWFRRLmP5BlK7mkW1yNFxDotXqygldj3Jnl0oqVo6xhvP8NZLKgqBpTeSdSKoSVSLAguvpvNslSWe3EIsqlk6yNYthjR+CnNXIqcmUQ3CKJatMaSD+3n1GdIJtTvOtsfoPaSiEOnZhIKaRFUKbUy7mPPnEYLTSoltT9B3ACW1K3FoD7ueMqTZS5jQjZyqRVUqB+YtJ8sb0tMPE4+qW+jlqc2G1NbBZy8j5FUtqlJCrt2Q/vkyu18g9atfkZf/yJ5/IKkoC0iqFlUplnj+txzcR0oGSIn9/+LBO0gHkDRE6RgP3sXHH5KSAVLio/fZuZVUVLWwVkqqlTFxNpetY2q3k0pF3n6J5zdz6F0UNVaerm4W38hn5hBzJOx5nWc2859XUFa1TC2K7NvFI69RzDkpJHIJ/Uga7wQHXuPR3ZRyJJ/ISiiirCaZWpXRT2YEJfST0zhRi4taXNTiohYXtbioxUUtLmpxUYuLWtz/AIepoFxQZk61AAAAAElFTkSuQmCC",universalLink:"https://app.altme.io/app/download"},{key:"autonomy-app",name:"Autonomy: Digital Art Wallet",shortName:"Autonomy",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADS0lEQVR4AeXBXWiVZQAA4Gcvh+lYP4xGBBsc7Wal2UyWQ9gWSAYzhSgcgtBUSCwKMfulS2+iG7vJlUGJSzHBqwSLZhAYKgmZNac3tQNbizpTapPJYTun6zGDL/e+dPE9T53aYE2OBTkX5FyQc0HOBTkX5FyQc0HOBTlXkMLpy5TKoireR2+72ApSODjEqR9EtekxetvFFuRckHNBzgU5F6QwUxHdTEUKQWyzc1wqie5Sidk5sQWxHTvH5LToJqc5fl5sQUzXJth3TDJ7j3JtQkxBDLNzfPYdXfspT0mmPEXXfo6cZXZODAVZnf6Rg2csMFPhUonJabfV3caWtRSbCUEm1SqlMie/59ur5ilP0f8Rrx5ldZGGegu89CS9j8qiIKvSJKd+kFlDPYd30dfpjr3yFCcusP0QMxXzTE5zZthtPb1aVkEqh3fR12nR+jo5vEsqQQpPPERfp2j6Ouluk0KQwnOPi27LWikEKRSbRVdslkKQwo2bortxUwpBCmeGRTc0LIUghc8vcHVCNCO/ceKCFIIUKrM8c4Cx6xZt7DrPvk9lVgoFqVyboP0d3tzElrUUmwl1MqnWGP2Tkxd59wuuT0ulTm2wZjFmKlz8lQ+GOHGemvT6Onl5Ax3Laai3GAWL1VBPdxvdbfS2s/MQ1ZokQh2fvEB/t1iCmPq72LdRMq9tpL9bTEFsb29mSUF0Swq8tVlsQWxNjaxZJro1y2hqFFuQQlOj6JoapRCkMFoW3WhZCkFsV8YZGRfdyDjDY2ILYqpW2TNITXw17D1KtSqmIJapW2wbYGhYMl//zLYPmb4lloKsSmV+GrPATIWLv3DkLL//ZYE6PNzCsmZCkEm1ymiZkXFq5jt+jm+G2d5Dx3Ia6i2wqpVisywKsjp9mRc/9Z9seIQD21jZ6o5cGWfPIEPD5vnjb9475V8N7GD3elkEqWxdx5evs7LVHVvRwldvsHWdVIIU7r+Hj3cSgkULgUM7eeBeKQQpbO/hrqWiuXspz3dJIUihY7noOh6UQpBCQ73oGuqlEORckHNBzgU5V5BVTxsDO2SyqlV0q1oZ2CGTnjZZFWS1ooUVLf43xWZ2rxdbkHNBzgU5F+RckHNBzgU5F+RckHP/AKis3ntPQOcLAAAAAElFTkSuQmCC",universalLink:"https://autonomy.io/apps/tezos",deepLink:"autonomy-tezos://"},{key:"temple_ios",name:"Temple Wallet",shortName:"Temple",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAIAElEQVR4AeXB3W9b9RnA8e/znHOcOGliO3aiUkLfCyNDLdIkShtKIu2GiwlVbNP2d3C7m11Mu9jlNG2X7AJpm5i0MSGtEpu0ZKhMoxUVsJVBm5emaUtI7DiB+Pjl93uGXRzaDBGGT10kfz4CGD1M6XFKj1N6nNLjlB6n9Dilxyk9LiRBx8cizn7nARChRQAREED4hIAAAiJCiwAiIIAILQKIgHCbCAgg8KtfL7KyWiUpIQk5MRpy7uwQheceQIZSoAICqCAqIAIKiIAKCKACIqACAqICKiACCoiACoiAAipcXdjixd9fJylKAk6Mhpz7boaRwQBWt9jJjN0JX8Bomz6dJ0lKh06MhZz7fpaRwQBUsLUKX4mxO4OpyQJJUjo09VCKkYEAVCBQKMZ8FSLsTuDIwUHG96VJSkiHZpbqEAiI0GQ1B1t12JOipdLA1ipsEz4htAi3CRhNAsJnhNsCRR8fAwMEpifzvPjSdZIQ0qG3P6xTqsFIWkBosWKM7EnRUnP4vyyAN3AG3sAZeA/OwBt4A2eYN3AG3sAZeAPvkbFBZHwIGR2gafp0gRdfuk4SQjrkDV5brvHsI2laRGA9hv3DtGT60FMPghmfy/hixRj/zofY3DoyNkDT1GSepIQkYPZajWcfHQABRLD1KsJn5NE8IgIKiIAKCKACIqACAqICKiACCohApYG/eAt7rwgn94HAkUODjO9Lc/1GhU4pCZhZqEEgoAoqUHdQabDN+D8Z2wYjJNePv7xGmwDTkwWSoCTg7Q9qlKpAIBAIqGLlmG3C7oTbzADhTvLICNQ9rFVom57MkwQlAd7g79eqEAioQCBQrrHN+FL8Wyu4VxfZKTh7jOhn05BP0zY1WSAJSkJm52NQgUBBBdussk3YnYfGC+9gl1f5Mo4eGmR8X5pOKQmZmY8hEFCBQKDhoepoMXanIAeG8XPr4DxfxLht+qkCnQpJyNs3apRiIzeotHjD/3kOUgEEAoFAoBAI9AXot/YiuX7upA+P4K6UsMUN5GiWJlvdwr9xE8IAIkUihVCxSHGlmE6FJMQbvDZf5dnjg+ANf2kF26xCoBApEiqECn0BcjQHqxXI9bPNQI7lQMC/XyQ4mqVJ9qTw7xYhpUgqwFIhpJTnXynxm9l1OqUkaOZqBQz8GzexYkyL8JlAkENZJBVgxZid5FAGUgH2folt/SEyNgAIIBjw/Mtr/GJ2nSSEJOiv727x5qvLUIohUAiA0CDw9KeFb0zkoC/AnEG5CnUPqYA2CRU9lMXPl8EZhELTan4Py//5CCLHC29V+OU/NklKSIL+dbPKE6/wKc+dBlPKyiklcgZmYGDFGNk7SIvQIsdycLWELW4gR7I0/TPo5+wLq9wLSpd8XPNcWIzBeXAGzmOrW2wzWuRYDkTwV0q0nTk5gqpwLyhdNHOlAs7AGTiDlS3aRGjRAxlIKXalRFsuE3FiYph7Qemi2asVcB6cB2dYMYa6o8n4VKTowSy2UAZntE2fznMvKF10frFKrebBeXAenMdWtthJjmWxuseWNmibOpXnXlC6aKtuXFiqgjNwBg2PffAxLcY2OZIDAX+lRNuZkyOoCklTumx2PsacYc5jzrAbH7GTHsggqQCbW6ctl404MTFM0pQum1mogfPgDLxhqxWoOu4SCnIwgy2UwXnapk7nSZrSZa8v16jVPDgPzkPDYzc/AuEOghzJQt1jS5u0TZ/OkzSly7bqxoUbNXAGzsB5bHmTnfRIFlSwuXXazjyZR1VIUkiXjaaV0eMFgskxEAEB6QvBAGGb7B+GSPFz6+i3D9CUy0ScmBjmzXfKJEXpotG0cu57WR5OeSSfRgpppDAAmT4Q7hYqciCDLW6AN9qmJvMkSemS0QHl3A9yPLY3wkoxeGM3cjgLDYdd36Rt+nSBJCldoALnfjjCY3tTECkiYMWYuxj/Qw9nQQSbW6ftzJMjqApJUbrAG6T6FIkUCRVCxVYr7EYeGoJI8fNl2nLZFMcnhkmK0iWzS3UIFcIAQoVSzK5CRfZnsKUNcAZCy/RknqQoXTJzrQaRQqQQKbZRBW9sEz6XHs5A3WPLm7RNTRZISkiXzM7HECqIgADlKo2fX4RIIQogHRJMjqMTee4kh7Lwt2vYQhk5kAGBp5/Moyp4b3RK6ZJbm473Sg6JFDZq+H+vYeUqtlGDrTqST2NrW+wk40MQBfiFMggtI7mI498cJglKF83Mx1gpxl/6ALzRJKEih7MQCFaMsZrjLqEi+4expU1wRpMB05MFkhAAP6ZL1jcbVK6WuVgyLm7AxXXj8ZMFgv4QvIEzNJ9GhlMgAiIgAuUqNreOPpxDMv2IQFwzfveHZToV0kXnF6ucp83T9PgTDU7tD8AbGNitj5EHh7iTHMzArGALZWR/hqanT+VRFbw3OqHcZzPvV6DuoeGh4fA3NtlJxocgUmxxg7aRbMTxiWE6pdxnM3MxNBw0PDQ8rGxh1QZ3CQR5aAh/fRO80Tb1VIFOhdxnry9VqVU9kQBmsFGj/qNZCBVCRUKFVAD9AThP/afnIVRKVWPmj2U6pdxnW3XjwlIVGh5KMbZQhqqDqoOqw6oOnIe4AXUPdU9xo8EzL61z6VadTilfAzMLVSjG2HwZvLGT1R3W8DQVY+OZlze49GGDJIR8Dfz2ckz9lgcMFFAPaqAeVEAFVECFPy3WeWvNkZSQr4HLJcdPSnzKAKNblB6n9Dilxyk9TulxSo9TepzS4/4Lz8MqhS9ENeQAAAAASUVORK5CYII=",universalLink:"https://templewallet.com",deepLink:"temple://"},{key:"atomex_ios",name:"Atomex Wallet",shortName:"Atomex",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFIUlEQVR4AeXBfWyMdwDA8e/ze55r6dbW6Ol71cvKVekQZmyGMVtWzMu6YoRI9oeXTWJsppMzr40lnXbxNjYEwZiXKVWtlqMlq5eWVus1nWp7Srz2mHP3LP1DIovq1Z1Hk+fzkQwBJhUdE+icQOcEOifQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TuEVaRUeSo9unfEyGCgquUDBmXOoaE9BY8YWzUldModhcQORJIknThUW8+XXiRScLUFLsuxjNKMRfz9fstM20KdXdyRJ4mnBgUZGjYxjf5YF6/UbaEWgoTkzJ2OKaktdfF9/jVVL5yNJEloRaESWZcYmDKM+XTpHExvTAa0INBIaHEgzf19cEd2hHVoRaOSR3Y6rHj2yoxWBRqqs1ZRdvUZ9VFXl75OFaEWgoaXL11GfHXsOUHa1Aq0INLRszSa27UqnLufOX2LKjLloSZZ9jGY0oqoqO/Yc4Oat25ii2tDM349at+/cZdW6LYyf9C23bt9FS5IhwKSikTHxQ6iyVpN1KA9JkghsGYDBoFBReR2Hw8GrINDIoA/eY03qQvr36UktVVWpslZztbwSh8PBxwPfJ3HGJLQm0EBEeAhrlyVRcKaEeUuW8SydoqNI/GYSkRGhaEnwknl7e7F5TTJCSCRMnMbDh//yLBu37sapqowbNQwtCV6yxeYZdI2NYcLkWVwpK6cu1yqtZBw8wriEYQgh0IrAg7y9vQgLCaJJE2+eUGSZHxYkszcjh/qs3bidiLBgBrzfC60oeECbyHAWzplO3KB+eHkZsNsfk551mFlzf2LqzB9xVVrGIazVNxkdP5iM7CNoQZZ9jGbc0NH0Jof3bqJrbEdkWaaWLAvat2vNmPghZObkUmWtxhVOp5PSC1coOFvCpSv/oAWBGyRJ4rdfFtH8DX+exd/Pl7XLk5CFwFV7M3LIOHiEJ4QQvEwKbuga25EunaN5HlNUW3q93RVLXj6u8PIyMGHMSEZ/FkdsjIkm3l5UVF0nMyeXlJXrOVt8Hk9ScIMpqi2uMEW1xZKXT33aRIazbX0qMaYonhYWEsT40cP5In4oc5NSSfp5FZ6i4IYamw1X3LfZGNi3NwkjPiHzUC4Hso9y4+YtnmYMaE7Gjt+JCAuhLooiM2/2NJxOJ0tSVuMJCm44euwkdrsdg8FAXRwOB5bcfLp1iWFAv96MTfgUh8PJidNn2Z9lYevOfZReuEySeQYRYSG4wvzdV+zem0XpxSu4S5Z9jGZeUI3tAf5+vrzTvQt1+XXdVjb/mUbJ+cukrFjHX+nZlFdU0ToynISRccTGdCA98zCrUxcghMAVsiyolZ5lwV0Kbkqcn0xAi+aM/Xwo//fHzn1MT1zME06nyqnCYk4VFrM4eSXN/P2QZZm+7/ZAURQaon+fnniCgpvs9sdMnDKLtRu3M3zwh4QGB1JprWZnWibZlmM8z+07d6kVEtSShgoOaoknKHiIJS8fS14+L+J+jY2Gqqmx4QmCRuBkQRENdaKgCE8QNAKFRaUUFpXSEBu27MITBI2AqqpMn70Ih8OJK7Itx9mZloknyLKP0UwjUHb1Gtbr1Xw0oA9CCOpy+sw5RoydjM32AE+QZR+jmUbiZEExOZbjRLdvR2hIIE+7d7+GlBXrmTj1e+7cvYenSIYAk0oj1K5NK97qZKJp0yaUX6vieP5pbA8e4mkKjdTFy2VcvFzGyybQOYHOCXROoHMCnRPonEDnBDon0DmBzgl0TqBzAp0T6Nx/Vg+o6CnFmfYAAAAASUVORK5CYII=",universalLink:"https://atomex.me",deepLink:"atomex://"},{key:"umami_ios",name:"Umami Mobile",shortName:"Umami Mobile",color:"",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAANSklEQVR4Ae3BC1RVZaLA8f+39z4HgQXiJBmgLWpEHRXFQhHMiJGsMTR5zJjL8Iosb2KOaRpZ4gulScXedWOIAequtGmC1mAjjSmWYyRpoGiTiEp6xgxWJ5QAOY/9XbhLW3DcoFQ+6/fjF7/4eRN0k5TSExgLhAD9AA+urCbgOFAB7BBCNNINgoskpQwBFgFxgDtXp2agAMgUQlRwEQQXIKXsCawHkgClsrKSwsJCSktLqampobGxESklV4IQAk9PTwIDAwkPDyc2Npbg4GBa6UAusFAIcYouCLogpRwIFAFBu3fvJjU1lZKSEtooioKfnx9eXl4IIbgSpJQ0NDTw1Vdfoes6baKioli7di2hoaG0OgRMFEIcpBOCTkgpBwIfSin7rFq1ivT0dHRdJyYmhuTkZKKiovD29uZqcPr0aUpKSsjJyWHTpk0oisKyZctYunQpQoivgTuFEFUYEBiQUvYEPpVSBs2aNYucnByCgoLIy8sjIiKCq9nHH3/MjBkzOHToEMnJyWRnZyOEOASMFEKcwoWCsfVA0KpVq8jJyWHMmDGUlZURERHB1S4iIoKysjLGjBlDTk4Oq1atolUQsB4DCi6klCFA0u7du0lPTycoKIhNmzbh4+PDtcLHx4dNmzYRFBREeno6u3fvplWSlDIEFxrnWwQoqamp6LpOXl4ePj4+uNKrPkP/9J/Ib2tR+g9Hvfe/kKe/wfF6BkhJByYz6p1xKIPDwHYGe/YS0HXOIxSUXwejjn8QVA2kxP7nJ8F2BkNCIHrdiDJyPMqA22jPx8eHvLw87rjjDlJTU9m2bZsCLAIepB2NdqSUnkBcZWUlJSUlTJw4kYiICDqwncH+0qM4PyrkHOfWtxCBQ1AG3Y785iv08u24cn6wEXP6X1EGhyF6B+DYsA4jzg/A+VEBpvkvIfrcjHbfTOx56ei7P6BTbz+POnYypj8+C+YenBMREUFMTAxFRUVUVlYSHBwcJ6X0FEI0cpZCR2MB98LCQtokJyfjyrE5D+dHhXQgdeyvPAYOO6Y5mQjPnpzHYcP+9Ezkfw6jTXkUbfJsOqP/+1Na5v8Wx9+zEH63YE57A/O6f6COmQSaCSPOHe9if3EBrpKTk2lTWFhIK3dgLO0odBRCq9LSUhRFISoqClfqyPFgMuNKHvsCx4ZMhG8A2py1GJGnrdhWPICsPY42Yzna7+fTqeZGHH9ZQcu8u3DueBfl18MwPZaFW045ptlrUEKjwcOL9pw73kWv+oz2oqKiUBSF0tJSzgqhHY2O+tGqpqYGPz8/vL296cBhR/jfinZ/Co6/PY8rR+HLKCGRqGMmIf/9KY5Nr+FK1lmwpcVjXvkW2rTHEb39sWcvAYcdI/I/h7GvT8Hxv39CvScRNTIe9d7pqPdOB92JtFSjWw4h6yxw2oowmWnP29sbPz8/jh49yln9aEejIw9aNTY24uXlhStHfjrq5Dlof5iP8+Mi5IkjdKDr2J+ZgzmzGC1pObrlEHrFh7iStcexPXE/piX5qPckIvoNwL4+BfnNV3RGfn0Mx+sZON74E8qAESghd6EMDkPcOgT15oF0xcvLi8bGRs7yoB0FA1JKhBC4kk3fYc9aDOYemOY9B4qKK/ltLfanZ4LDjjk1G+XWoRiR9XXYlsThLHkbZXAY5ue2ot5xPxckdfSDe3C8tR7b8j/QkjiElsQh2B4dj23lVPQDn+BKCIGUEiMK3aSX/RNnydsog0ai/f4RjOiHKrA/MwfcPDAt34DoNwBDtjPYn5+H/cUFCM2EadGrmNNeR/jdQnfIBiv6kUr08u04S/5Kdyj8APbsJciTNWhTHkUJHoMR565i7C8vRHj/CvOqvyECB9MZ59aNtDzyW/TPtqGE3o3bi9sx/fdTiBv86DYp6Q6FH6KpAXvmbHA6MC16FeHbFyPObW9hf2khwvtXuGUUoAwJpzOy9ji29GnYn5qBPPkl6oQk3LI+wTT/RZRBoVwqCj+QXr0X+6tPIHr2xrwkHzy8MOLcuhF7ZgqYe2BesRE1eipdcZa9T8u8KOzPzkVaqlHvSsD8dBFur+xEe/AJlEEjQdXonKA7NDqh6zrnUVTac27dgOgXhDY5BfPjr2FbnQh2G66cHxch67/G9HgOprnPoAy8HXt2GtjOYEh34vzwHZwfvoMyZDRq9FTUsN+hJcyDhHnQ3IheXYF+ZD/ScghZZ0HW10HjacTNA3Gl6zqd0ehEfX09rsSNfXHleH01orc/6h33Y1r4P9jXPQROB670z8uwLfodptQ/o949DeU3o7A/90f06r10RT/wCfqBT7CbUlGGjUEdEYUyZDTK4NEowWO4GPX19ZhMJoxodKK2tpa6ujp8fX05R42IwbEhE3Qn39N17M/NQ3h4oY6eAItexb4+BRx2XMk6C7YnJqM9+DjapNmY17yHY1M2jo3rofk7umRvQd+zDX3PNv6fmztKv4EI/1sRvv7Q0xfR60bUsZNpr66ujtraWgICAjCi0AkpJcXFxbQnAvqjTU7hPA4btqdnopeXoIbfh/nJfOjhgSGHDUfeKmxpsciTR9Hun43by/9CvXsaqBoXraUZvboC50cFON55CcdfliOPHsBVcXExUko6o9CFrKwsXGmJT6JNfQxMbnRga8H21Aycpf9AuS0K8+oChG8AndE/L6Nl/jgcbzyFcPfE9HAmbi99hBo9FUxmusXkhjb1MbTEJ3GVlZVFVzS6sHPnTgoKCoiLi+N7QqBNeRT13uno5R8iv/0akHzvzHe0UfoPx+3lf+Hc/QGy9hhISWf0w/tQhkYg/G7BNPcZtAefQN+1GdnUQNcEoteNKCPuQvTsjauCggJ27txJVzQuYPbs2dx2220EBgbSnujZG/WueLpk7oEaEUN3CR9f1Hum82PU1NQwe/ZsLkThAurq6oiOjqa6upprRXV1NdHR0dTV1XFOjx49MKJwEQ4fPszIkSPJzc1F13WuVrquk5uby6hRozh8+DDtBQQEYETjItXX1zNz5kzWrFlDUlIS48aNY8CAAXh5eSGE4EqQUtLQ0EBVVRVbt24lNzeXgwcPYuT222/HiEY3HTx4kMWLF3O5nDhxAqvVytChQ/kxYmJiMKLwMzBo0CAiIyMxovAzsHr1ahRFwYjCdW7KlCnEx8fz+eefY0ThOjZ69GhycnI4deoUKSkpGNG4Tt13331s2LABk8lEfHw8R44cwYjGdcbX15f09HQeeughmpqaiI+P5/3336d///4Y0bgO3HDDDYwePZrY2FgeeOABPD09qaioIDExkf3799Omb9++GNG4AqKjo0lJSSEkJAR3d3e60qdPH3x9fTlx4gRGPD098fb25pyqqioyMzPJzc3F4XBwTmhoKEY0LiMhBC+88AJz586lzZdffonVaqUrVquVzkgpsVgsWCwWysvL2bJlC7t27UJKiauJEydiROMyWrBgAXPnzmXPnj0kJSVRWVnJ5TB06FDGjh2LEY3LxN3dnbS0NE6ePMn48eOxWq1cLhkZGQghMKJwmYSFhdGrVy9yc3OxWq34+/uzb98+9u3bh7+/P5dKYmIikyZNYu/evRhRuEz69OlDm5qaGtpER0cTHBxMcHAw0dHRXAqRkZFkZWVhtVqZM2cORjQuE4vFQptBgwbRpqioiM2bN9OmqKiIn1pCQgL5+fkIIUhISODYsWMY0TAghOCnVlZWxsmTJ0lKSuLZZ5/l+PHjTJgwgZ9aQEAAGRkZTJ8+nYaGBhISEigpKaFfv34Y0eioiVaenp781Ox2O4sXLyYvL4/t27fz8MMPs2XLFpxOJz+GEIK+ffsSFhZGXFwccXFxuLm5sWvXLqZPn05VVRVtPDw8OKuJdjQ6Ok6rwMBAvvjiC35q+fn53HTTTWRkZLB582ZaWlpobm7mx/Dw8MBsNnPOvn37WLduHW+++Sa6rnNOYGAgZ1loR6OjClqFh4dTXFzMpbBmzRree+89Zs2axYgRI3B3d6crw4cPx+FwcODAAVxJKWlubsZisVBeXs6WLVvYu3cvRsLDwzmrgnY0OtoBNMfGxrovX76cS2X//v088sgjXIwTJ05gtVoZOXIkP0ZsbCytmoEdtKPQjhCiESgIDg4mKiqK60VkZCTDhg2j1btCiO9oR+F8mYC+du1aVFXlWqeqKmvXrqWVBDJxoeBCCFEB5IaGhrJs2TKudWlpaYwaNYpW+UKIz3ChYGwhcGjp0qUkJydzrUpKSmLZsmW0OgwswICCASHEKWCiEOLr7OxsVq5ciaqqXCtUVWX58uW89tprKIpSC8QIIeoxoNKJlStXfrNixYoiIcQ9kZGRN0yYMIHq6mpqamq4nBYuXEhzczOvvPIKFyMyMpKNGzcybdo0hBCHgfFCiC/ohOACpJQ9gfVAEqBUVlZSWFhIaWkpR48epampCSkll8qePXuor69n3LhxuBJC4OHhQWBgIOHh4cTGxjJs2DBaSSAfWCCEqKcLgoskpRwBLAJiAXeuTs3Au0CmEOIzLoKgm6SUnsCdwHCgH+DBldUEWIAKYIcQ4jt+8YtfXKz/A/OhBgM5KLZoAAAAAElFTkSuQmCC",deepLink:"umami://",universalLink:"https://umamiwallet.com/"}];var pn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let gy=_T,by=ET,vy=wT,my=AT;const nu=()=>gy,xT=t=>{gy=t},Ga=()=>by,ST=t=>{by=t},Nh=()=>vy,RT=t=>{vy=t},Va=()=>my,IT=t=>{my=t},bo=new Js,jd=["ookjlbkiijinhpmnjffcofjonbfbgaoc","gpfndedineagiepkpinficbcbbgjoenn"];var es;(function(t){t[t.DESKTOP=0]="DESKTOP",t[t.IOS=1]="IOS",t[t.ANDROID=2]="ANDROID"})(es||(es={}));var hr;(function(t){t.IOS="ios",t.ANDROID="android",t.EXTENSION="extension",t.DESKTOP="desktop",t.WEB="web"})(hr||(hr={}));class yi{static getPlatfrom(){return pn(this,void 0,void 0,function*(){return py(window)?es.ANDROID:hy(window)?es.IOS:es.DESKTOP})}static getPairingInfo(e,r,n,i){return pn(this,void 0,void 0,function*(){const s=i??(yield yi.getPlatfrom()),o=e.p2pSyncCode,a=e.postmessageSyncCode,c=e.preferredNetwork;switch(s){case es.DESKTOP:return yi.getDesktopPairingAlert(o,r,a,n,c);case es.IOS:return yi.getIOSPairingAlert(o,r,c);case es.ANDROID:return yi.getAndroidPairingAlert(o,r,c);default:throw new Error("platform unknown")}})}static getDesktopPairingAlert(e,r,n,i,s){return pn(this,void 0,void 0,function*(){const o=yield Oc.getAvailableExtensions();o.forEach(c=>{const l=jd.indexOf(c.id);l>=0&&jd.splice(l,1)});const a=[];return Ga().length>0&&a.push({title:"Browser Extensions",type:hr.EXTENSION,wallets:[...o.map(c=>{var l,f,d,I,P;const L=Ga().find(H=>H.id===c.id);return{key:(l=L?.key)!==null&&l!==void 0?l:c.id,name:(f=c.name)!==null&&f!==void 0?f:L?.name,logo:(d=c.iconUrl)!==null&&d!==void 0?d:L?.logo,shortName:(I=c.shortName)!==null&&I!==void 0?I:L?.shortName,color:(P=c.color)!==null&&P!==void 0?P:L?.color,enabled:!0,clicked:!1,clickHandler(){return pn(this,void 0,void 0,function*(){if(!this.clicked){if(this.clicked=!0,n){const H=yield bo.serialize(yield n()),G={target:ki.EXTENSION,payload:H,targetId:c.id};st.postMessage(G,st.location.origin)}r(hr.EXTENSION,this)}})}}}),...Ga().filter(c=>jd.some(l=>l===c.id)).map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!1,clickHandler:()=>{window.open(c.link,"_blank")}}))].sort((c,l)=>c.key.localeCompare(l.key))}),nu().length>0&&a.push({title:"Desktop & Web Wallets",type:hr.DESKTOP,wallets:[...nu().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return pn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield bo.serialize(yield e()),f=Ba(c.deepLink,l);window.open(f,"_blank"),r(hr.DESKTOP,this,!0)})}})),...yield yi.getWebList(e,r,s)].sort((c,l)=>c.key.localeCompare(l.key))}),Va().length>0&&a.push({title:"Mobile Wallets",type:hr.IOS,wallets:[...Va().map(c=>({key:c.key,name:c.name,shortName:c.shortName,color:c.color,logo:c.logo,enabled:!0,clicked:!1,clickHandler(){return pn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const l=yield bo.serialize(yield e());i(l),r(hr.IOS,this,!0)})}}))].sort((c,l)=>c.key.localeCompare(l.key))}),{walletLists:a,buttons:[]}})}static getIOSPairingAlert(e,r,n){return pn(this,void 0,void 0,function*(){return{walletLists:[{title:"Mobile Wallets",type:hr.IOS,wallets:Va().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){var s;return pn(this,void 0,void 0,function*(){if(this.clicked)return;this.clicked=!0;const o=yield bo.serialize(yield e()),a=Ba((s=i.deepLink)!==null&&s!==void 0?s:i.universalLink,o),c=document.createElement("a");c.setAttribute("href",a),c.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})),r(hr.IOS,this,!0)})}})).sort((i,s)=>i.key.localeCompare(s.key))},{title:"Web Wallets",type:hr.WEB,wallets:[...yield yi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[]}})}static getAndroidPairingAlert(e,r,n){return pn(this,void 0,void 0,function*(){return{walletLists:[{title:"Web Wallets",type:hr.WEB,wallets:[...yield yi.getWebList(e,r,n)].sort((i,s)=>i.key.localeCompare(s.key))}],buttons:[{title:"Mobile Wallets",text:"Connect Wallet",clickHandler:()=>pn(this,void 0,void 0,function*(){const i=yield bo.serialize(yield e()),s=Ba("tezos://",i);window.open(s,"_blank"),r(hr.ANDROID)})}]}})}static getWebList(e,r,n){return pn(this,void 0,void 0,function*(){return Nh().map(i=>({key:i.key,name:i.name,shortName:i.shortName,color:i.color,logo:i.logo,enabled:!0,clicked:!1,clickHandler(){if(this.clicked)return;this.clicked=!0;const s=window.open("","_blank");e().then(o=>bo.serialize(o)).then(o=>{var a;const c=Ba((a=i.links[n])!==null&&a!==void 0?a:i.links[St.MAINNET],o);s?s.location.href=c:window.open(c,"_blank"),r(hr.WEB,this,!0)}).catch(o=>{console.error(o)})}})).sort((i,s)=>i.key.localeCompare(s.key))})}}const pe=(t,e,r,n)=>{const i=document.createElement(t);return e.length>0&&i.classList.add(...e.filter(s=>!!s).map(s=>qs(s))),r.forEach(s=>{i.setAttribute(qs(s[0]),qs(s[1]))}),typeof n=="object"&&Array.isArray(n)?n.filter(s=>!!s).forEach(s=>{i.appendChild(s)}):typeof n=="string"&&(i.innerText=n),i},Vs=(t,e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.length>0&&n.classList.add(...t.filter(i=>!!i)),e.forEach(i=>{n.setAttribute(qs(i[0]),qs(i[1]))}),typeof r=="object"&&Array.isArray(r)&&r.filter(i=>!!i).forEach(i=>{n.appendChild(i)}),n},nn=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","path");return t.forEach(r=>{e.setAttribute(qs(r[0]),qs(r[1]))}),e},OT=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");return t.filter(r=>!!r).forEach(r=>{e.appendChild(r)}),e},TT=()=>Vs(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[nn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])]),qs=t=>{const e=document.createElement("div");return e.innerText=t,e.innerHTML},Jg=t=>{t.innerHTML=""};var gn=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Yg=new Jr("Alert"),Qg=new Js,PT=(t,e,r)=>gn(void 0,void 0,void 0,function*(){const n=()=>gn(void 0,void 0,void 0,function*(){return yi.getPairingInfo(r,(w,T,x)=>gn(void 0,void 0,void 0,function*(){x||(yield Qu())}),()=>gn(void 0,void 0,void 0,function*(){y()}))}),i=yield n(),s=e.getElementById("pairing-container");if(!s)throw new Error("container not found");const o=document.createElement("span");s.appendChild(o),i.buttons.forEach(w=>gn(void 0,void 0,void 0,function*(){const T=yield Vi(),x=pe("div",["beacon-list__title"],[],w.title),E=pe("button",["beacon-modal__button","connect__btn"],[],w.text),u=document.createElement("a");u.id=`button_${T}`,u.appendChild(x),u.appendChild(E),o.appendChild(u);const h=e.getElementById(u.id);h&&h.addEventListener("click",()=>gn(void 0,void 0,void 0,function*(){w.clickHandler()}))}));const a=(w,T,x)=>{const E=`Open in ${x.name}`,u=x.key,h=x.logo?pe("div",[],[],[pe("img",["beacon-selection__img"],[["src",x.logo]],"")]):Vs(["beacon-selection__img","svg-inline--fa","fa-wallet","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","wallet"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"],["style","enable-background:new 0 0 512 512;"],["xml:space","preserve"]],[nn([["d","M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z"]])]),g=pe("div",["beacon-selection__name"],[],[pe("span",[],[],x.name),x.enabled?void 0:pe("p",[],[],"Not installed")]),b=pe("a",["beacon-selection__list",x.enabled?"":"disabled"],[["tabindex","0"],["id",`wallet_${u}`],["alt",E],["target","_blank"]],[g,h]),p=document.createElement("span");p.appendChild(b),w.appendChild(p);const S=e.getElementById(`wallet_${u}`),O=_=>gn(void 0,void 0,void 0,function*(){if(_&&_.key!=="Enter")return;x.clickHandler();const v=e.getElementById("beacon-modal__content");v&&T!==hr.EXTENSION&&T!==hr.IOS&&(Jg(v),v.appendChild(pe("p",["beacon-alert__title"],[],"Establishing Connection..")),v.appendChild(pe("div",["progress-line"],[["id","beacon-toast-loader"]],"")),v.appendChild(pe("div",["beacon--selected__container"],[],[...x.logo?[pe("img",["beacon-selection__img"],[["src",x.logo]],""),pe("img",["beacon--selection__name__lg"],[],x.name)]:[]])))});S&&(S.addEventListener("click",()=>O()),S.addEventListener("keydown",O))},c=document.createElement("span");s.appendChild(c);const l=w=>{Jg(c),w.forEach(T=>{const x=document.createElement("div");x.classList.add("beacon-list__wrapper"),c.appendChild(x),x.appendChild(pe("div",["beacon-list__title"],[],T.title));const E=document.createElement("span");x.appendChild(E),T.wallets.forEach(u=>gn(void 0,void 0,void 0,function*(){a(E,T.type,u)}))})};l(i.walletLists);const f=w=>gn(void 0,void 0,void 0,function*(){if(w.data==="extensionsUpdated"){const T=yield n();l(T.walletLists)}});let d;d=w=>{w.data===`closeAlert-${t}`&&(st.removeEventListener("message",f),st.removeEventListener("message",d))},st.addEventListener("message",f),st.addEventListener("message",d);const I=e.getElementById("beacon--qr__container"),P=e.getElementById("beacon--qr__copy"),L=e.getElementById("beacon-title"),H=py(window)?"android":hy(window)?"ios":"desktop",G=e.getElementById("beacon-main-text"),V=e.getElementById("pairing-container"),C=e.getElementById("beacon--switch__container"),q=()=>gn(void 0,void 0,void 0,function*(){const w=r?yield Qg.serialize(yield r.p2pSyncCode()):"";navigator.clipboard.writeText(w).then(()=>{P&&(P.innerText="Copied"),Yg.log("Copying to clipboard was successful!")},T=>{Yg.error("Could not copy text to clipboard: ",T)})});let U=!1;const K=w=>gn(void 0,void 0,void 0,function*(){const T=e.getElementById("beacon-switch");if(T&&(T.innerText=w==="none"?"Pair wallet on same device":"Pair wallet on another device"),G&&V&&C&&P&&I&&L)switch(G.style.display="none",L.style.textAlign="center",V.style.display="none",C.style.display="initial",w){case"ios":V.style.display="initial";break;case"android":V.style.display="initial";break;case"desktop":V.style.display="initial",L.style.textAlign="left",G.style.display="none",C.style.display="initial";break;default:if(!U){U=!0;const x=yield Qg.serialize(yield r.p2pSyncCode()),E=Ba("tezos://",x),h=yT(E,"svg").replace("<svg",'<svg class="beacon-alert__image"');I.insertAdjacentHTML("afterbegin",h),P&&P.addEventListener("click",q),I&&I.addEventListener("click",q)}G.style.display="initial"}});let j=!1;const y=()=>{K(j?"none":H),j=!j};y();{const w=e.getElementById("beacon-switch");w&&w.addEventListener("click",y)}});let yy=Jf.LIGHT;const Zg=t=>{yy=t},J0=()=>yy,NT=t=>pe("div",["beacon-toast__base","animated","fadeIn"],[["id","beacon-toast"]],[pe("div",["beacon-toast__content"],[],[pe("span",[],[["id","beacon-text"]],[pe("p",[],[["id","beacon-text-content"]],t),pe("a",["beacon-toast__wallet__link"],[["id","beacon-open-wallet"]],[pe("span",[],[],"Open"),Vs(["svg-inline--fa","fa-external-link-alt","fa-w-16"],[["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","external-link-alt"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 512 512"]],[nn([["fill","currentColor"],["d","M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"]])])])]),Vs(["beacon-toast__more","svg-inline--fa","fa-angle-down","fa-w-10"],[["id","beacon-toast-button-expand"],["aria-hidden","true"],["focusable","false"],["data-prefix","fas"],["data-icon","angle-down"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[nn([["fill","currentColor"],["d","M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"]])]),Vs(["beacon-toast__more","svg-inline--fa","fa-times","fa-w-10"],[["id","beacon-toast-button-close"],["aria-hidden","true"],["focusable","false"],["data-prefix","fal"],["data-icon","times"],["role","img"],["xmlns","http://www.w3.org/2000/svg"],["viewBox","0 0 320 512"]],[nn([["fill","currentColor"],["d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]])])]),pe("div",["progress-line"],[["id","beacon-toast-loader"]],""),pe("hr",["hide"],[["id","beacon-toast-loader-placeholder"]],""),pe("div",["beacon-toast__more--action"],[["id","beacon-toast-list"]],"")]),MT=()=>pe("a",[],[["href","https://walletbeacon.io"],["target","_blank"]],[document.createTextNode("powered by"),Vs([],[["id","f63e95a9-fd19-4487-bc1a-09eb2f066704"],["data-name","Guides"],["xmlns","http://www.w3.org/2000/svg"],["width","65"],["height","65"],["viewBox","0 0 65 65"]],[pe("title",[],[],"beacon_logo"),nn([["fill","currentColor"],["d","M59.66,29.52v1.06c0,.37-.18,9.07-4.11,15.88S44.16,57.75,43.84,57.93l-.91.54-1.61-.93-9.19-5.3a14.68,14.68,0,0,1-1.63-1.06h0a14.09,14.09,0,0,1-1.29-1,17.63,17.63,0,0,1-2.56-2.7,18.58,18.58,0,0,1-2.56-4.51,21.53,21.53,0,0,1-1.5-9,6.21,6.21,0,0,1,2.93-.73c.25,0,.49,0,.74,0a18.29,18.29,0,0,0,1,7.93,15.06,15.06,0,0,0,6.67,8l8.93,5.16c.2-.13.43-.3.68-.48,2.26-1.6,6.42-4.92,8.86-9.13C55.12,39.94,55.8,34,56,31.57l-3.79-2.19a23,23,0,0,0,.6-3.83Z"]]),nn([["fill","currentColor"],["d","M49.22,11.43V23.89c0,.65,0,1.3-.1,1.94v0c-.06.55-.13,1.1-.24,1.63A18,18,0,0,1,47.82,31a19.11,19.11,0,0,1-2.62,4.49,21.37,21.37,0,0,1-7.07,5.8,6.08,6.08,0,0,1-2.42-2.84A18.1,18.1,0,0,0,42,33.7h0a15.12,15.12,0,0,0,3.58-9.81V13.6c-.21-.11-.47-.21-.74-.35-2.52-1.16-7.47-3.1-12.36-3.1-5.42,0-11,2.4-13.08,3.45V18a22.54,22.54,0,0,0-3.63,1.38V11.43l.92-.52c.33-.18,8-4.38,15.79-4.38s15.48,4.2,15.8,4.38Z"]]),nn([["fill","currentColor"],["d","M18,26.4,9,31.55q0,.35.06.78a31.63,31.63,0,0,0,3.49,12.28c2.71,4.71,7.55,8.3,9.53,9.64l3.79-2.19a23.33,23.33,0,0,0,3,2.44l-6.88,4-.92-.54c-.31-.18-7.75-4.69-11.68-11.5S5.36,30.92,5.35,30.56V29.49L7,28.55l9.17-5.29c.57-.32,1.14-.61,1.72-.87a13.46,13.46,0,0,1,1.55-.61A17.52,17.52,0,0,1,23,20.91a19.2,19.2,0,0,1,5.19,0,21.49,21.49,0,0,1,8.55,3.24,6.29,6.29,0,0,1-1.25,3.51,17.9,17.9,0,0,0-7.3-3.06A15.14,15.14,0,0,0,18,26.4Z"]])]),document.createTextNode("Beacon")]),Ey=(t,e,r,n)=>pe("div",["beacon-alert__base","animated","fadeIn"],[["id",`beacon-alert-modal-${t}`]],[pe("div",["beacon-modal__wrapper"],[],[pe("div",["beacon-modal__header"],[],[Vs([],[["xmlns","http://www.w3.org/2000/svg"],["id","Guides"],["x","0"],["y","0"],["version","1.1"],["viewBox","0 0 179.2 43"],["xml:space","preserve"],["width","140"],["height","40"]],[pe("style",[],[],`.st0 {
                    fill: #3880ff;
                  }
                  .st1 {
                    fill: #fff;
                  }`),nn([["d","M45 19v.9c0 .3-.2 7.5-3.4 13.2-3.3 5.6-9.4 9.3-9.7 9.5l-.8.4-1.3-.8-7.6-4.4c-.5-.3-.9-.6-1.4-.9-.4-.3-.7-.5-1.1-.8-.8-.7-1.5-1.4-2.1-2.2-.9-1.1-1.6-2.4-2.1-3.7-.9-2.3-1.3-4.8-1.2-7.5.8-.4 1.6-.6 2.4-.6h.6c-.2 2.4.1 4.6.8 6.6 1 2.8 2.9 5.1 5.5 6.6l7.4 4.3c.2-.1.4-.2.6-.4 1.9-1.3 5.3-4.1 7.3-7.6 2.2-3.9 2.8-8.9 3-10.8L38.8 19c.3-1 .4-2.1.5-3.2L45 19z"],["class","st0"]]),nn([["d","M36.3 4.1v10.3c0 .5 0 1.1-.1 1.6s-.1.9-.2 1.3c-.2 1-.5 2-.9 3-.5 1.3-1.3 2.6-2.2 3.7-1.5 1.9-3.5 3.6-5.9 4.8-.9-.6-1.6-1.3-2-2.4 2.1-1 3.9-2.3 5.2-4 1.9-2.3 3-5.1 3-8.1V5.9l-.6-.3c-2-1-6.1-2.6-10.1-2.6-4.5 0-9.1 2-10.9 2.9v3.6c-1 .3-2 .7-3 1.1V4.1l.8-.4C9.7 3.5 16 0 22.5 0s12.8 3.5 13.1 3.6l.7.5z"],["class","st0"]]),nn([["d","M10.5 16.5l-7.4 4.3v.7c.2 2.1.9 6.5 2.9 10 2.2 3.9 6.2 6.9 7.9 8l3.1-1.8c.8.7 1.6 1.4 2.5 2L13.8 43l-.8-.5c-.3-.2-6.4-3.9-9.7-9.5C.1 27.4 0 20.2 0 19.9V19l1.3-.8L9 13.9c.5-.3.9-.5 1.4-.7.4-.2.8-.4 1.3-.5 1-.4 2-.6 3-.7 1.4-.2 2.9-.2 4.3 0 2.4.3 4.8 1.2 7.1 2.7 0 1-.4 2-1 2.9-1.9-1.3-4-2.2-6-2.5-3.1-.6-6-.1-8.6 1.4z"],["class","st0"]]),OT([nn([["d","M73.9 23c.9 1 1.3 2.3 1.3 3.7 0 1.9-.6 3.4-1.9 4.5-1.3 1.1-3.1 1.7-5.5 1.7h-8.6v-23h8.4c2.3 0 4.1.5 5.3 1.5 1.2 1 1.8 2.4 1.8 4.2 0 1.5-.4 2.7-1.2 3.6-.8.9-1.8 1.5-3.1 1.8 1.5.3 2.6 1 3.5 2zm-11.7-3h5c1.5 0 2.6-.3 3.4-1 .8-.7 1.2-1.6 1.2-2.8 0-1.2-.4-2.1-1.1-2.8-.8-.7-1.9-1-3.5-1h-4.8V20zm8.7 9.4c.9-.7 1.3-1.7 1.3-3s-.4-2.3-1.3-3c-.9-.7-2.1-1.1-3.7-1.1h-5v8.2h5c1.6-.1 2.8-.4 3.7-1.1zM95.3 24.6H81c.1 2.1.6 3.6 1.7 4.6s2.4 1.5 4 1.5c1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.7 1.8-2.9h3.2c-.2 1.2-.7 2.4-1.5 3.3-.8 1-1.7 1.7-2.9 2.3-1.2.5-2.6.8-4.1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 1.7 0 3.3.4 4.6 1.1 1.3.7 2.3 1.7 3 3 .7 1.2 1 2.6 1 4.1.1.7 0 1.2-.1 1.7zm-3.5-4.8c-.5-.9-1.2-1.6-2.1-2-.9-.4-1.8-.7-2.8-.7-1.6 0-3 .5-4.1 1.5-1.1 1-1.7 2.5-1.8 4.5h11.5c0-1.3-.2-2.4-.7-3.3zM111.2 16c1.2.9 2.1 2 2.5 3.5V15h3v18h-3v-4.6c-.5 1.5-1.3 2.6-2.5 3.5-1.2.9-2.7 1.3-4.4 1.3-1.6 0-3-.4-4.3-1.1-1.2-.7-2.2-1.8-2.9-3.2-.7-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.7-1.4 1.7-2.5 2.9-3.2 1.2-.7 2.7-1.1 4.3-1.1 1.7-.1 3.1.4 4.4 1.2zm-8 3.1c-1.1 1.2-1.7 2.8-1.7 4.8 0 2.1.5 3.7 1.7 4.8 1.1 1.2 2.6 1.8 4.4 1.8 1.2 0 2.2-.3 3.2-.8.9-.5 1.7-1.3 2.2-2.3.5-1 .8-2.1.8-3.5 0-1.3-.3-2.5-.8-3.5s-1.2-1.8-2.2-2.3c-.9-.5-2-.8-3.2-.8-1.9.1-3.3.7-4.4 1.8zM135 16.6c1.5 1.2 2.4 2.9 2.8 4.9h-3.1c-.2-1.3-.8-2.3-1.8-3-1-.7-2.2-1.1-3.6-1.1-1 0-2 .2-2.9.7-.9.5-1.6 1.2-2.1 2.2-.5 1-.8 2.2-.8 3.7s.3 2.7.8 3.7 1.2 1.7 2.1 2.2c.9.5 1.8.7 2.9.7 1.4 0 2.6-.4 3.6-1.1 1-.7 1.6-1.8 1.8-3h3.1c-.3 2.1-1.3 3.7-2.8 4.9-1.5 1.2-3.4 1.8-5.7 1.8-1.7 0-3.2-.4-4.6-1.1-1.3-.7-2.4-1.8-3.1-3.2-.8-1.4-1.1-3-1.1-4.9 0-1.9.4-3.5 1.1-4.9.8-1.4 1.8-2.5 3.1-3.2 1.3-.7 2.9-1.1 4.6-1.1 2.3-.1 4.2.6 5.7 1.8zM154.5 15.9c1.4.7 2.4 1.8 3.2 3.2.8 1.4 1.2 3 1.2 4.9 0 1.9-.4 3.5-1.2 4.9-.8 1.4-1.8 2.4-3.2 3.2-1.4.7-2.9 1.1-4.6 1.1-1.7 0-3.3-.4-4.6-1.1-1.4-.7-2.4-1.8-3.2-3.2-.8-1.4-1.2-3-1.2-4.9 0-1.9.4-3.5 1.2-4.9.8-1.4 1.9-2.5 3.2-3.2 1.4-.7 2.9-1.1 4.6-1.1 1.7-.1 3.2.3 4.6 1.1zm-7.6 2.2c-.9.5-1.6 1.2-2.2 2.2-.6 1-.8 2.2-.8 3.7 0 1.4.3 2.7.8 3.6.6 1 1.3 1.7 2.2 2.2.9.5 1.9.7 3 .7s2.1-.2 3-.7c.9-.5 1.6-1.2 2.2-2.2.6-1 .8-2.2.8-3.6 0-1.5-.3-2.7-.8-3.7-.6-1-1.3-1.7-2.2-2.2-.9-.5-1.9-.7-3-.7s-2.1.2-3 .7zM177.3 16.7c1.3 1.3 1.9 3.3 1.9 5.8v10.4h-3V22.8c0-1.8-.5-3.2-1.4-4.1-.9-1-2.2-1.4-3.7-1.4-1.6 0-2.9.5-3.9 1.6s-1.5 2.6-1.5 4.6V33h-3V15h3v4.3c.5-1.5 1.3-2.6 2.4-3.4 1.2-.8 2.5-1.2 4-1.2 2.2 0 3.9.6 5.2 2z"],["class","st1"]])])]),pe("div",["beacon-modal__close__wrapper"],[["id",`beacon-alert-${t}-close`]],[pe("div",["beacon-modal__close__icon"],[],[pe("div",["beacon-modal__close__line1"],[],[]),pe("div",["beacon-modal__close__line2"],[],[])])])]),pe("div",["beacon-modal__base"],[],[pe("div",[],[["id","beacon-modal__content"]],[pe("div",[],[],[pe("p",["beacon-alert__title"],[],e),...n,pe("div",["beacon-action__container"],[],r)])])])])]),LT=(t,e,r,n)=>Ey(t,e,r,[pe("div",["beacon-alert__text"],[["id","beacon-main-text"]],n)]),CT=(t,e,r,n)=>Ey(t,e,r,[pe("span",[],[["id","pairing-container"]],""),pe("div",["beacon-alert__text"],[["id","beacon-main-text"]],[pe("p",["beacon-list__title"],[["id","beacon-title"]],[document.createTextNode("Scan QR code with a Beacon-compatible wallet. "),pe("a",[],[["href","https://docs.walletbeacon.io/supported-wallets"],["target","_blank"]],"Learn more"),...n])]),pe("div",[],[["id","beacon--switch__container"]],[pe("button",["beacon-modal__button--outline"],[["id","beacon-switch"]],"")]),pe("div",[],[["id","beacon--disclaimer"]],"")]);var Ti=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let Mh,fs;typeof window<"u"&&typeof window.document<"u"&&(fs=window.document);const Lh={},BT=t=>typeof t=="string"?pe("div",[],[["id","beacon--qr__container"]],[pe("div",[],[["id","beacon--qr__copy__container"]],[pe("button",["beacon-modal__button--outline"],[["id","beacon--qr__copy"]],"Copy")])]):pe("span",[],[],""),kT=(t,e,r,n,i)=>{const s=r,o=n.map((f,d)=>pe("button",[`beacon-modal__button${f.style==="outline"?"--outline":""}`],[["id",`beacon-alert-${t}-${d}`]],f.text));let a=Xg.default.css;i&&(a+=Xg.pair.css);const c=pe("span",[],[],s),l=i?CT(t,[c],o,[e]):LT(t,[c],o,[e]);return{style:a,html:l}},yf=t=>(st.postMessage(`closeAlert-${t}`),new Promise(e=>{var r;const n=fs.getElementById(`beacon-alert-wrapper-${t}`);if(!n)return e();const i=(r=n.shadowRoot)===null||r===void 0?void 0:r.getElementById(`beacon-alert-modal-${t}`);if(i){const o=Lh[t];o&&(clearTimeout(o),Lh[t]=void 0),i.className=i.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const a=n.parentNode;a&&a.removeChild(n),Mh&&Mh.focus(),e()},300)}else e()})),Qu=()=>Ti(void 0,void 0,void 0,function*(){return new Promise(t=>Ti(void 0,void 0,void 0,function*(){const e=fs.querySelectorAll('[id^="beacon-alert-wrapper-"]');if(e.length>0){const r=[];e.forEach(n=>Ti(void 0,void 0,void 0,function*(){r.push(n.id.split("-")[3])})),yield Promise.all(r.map(yf)),t()}else t()}))}),pa=t=>Ti(void 0,void 0,void 0,function*(){var e,r;const n=t.body,i=t.data,s=t.title,o=t.timer,a=t.pairingPayload,c=t.disclaimerText,l=t.closeButtonCallback;yield Qu();const f=(yield Vi()).split("-").join(""),d=fs.createElement("div");d.setAttribute("id",`beacon-alert-wrapper-${f}`);const I=d.attachShadow({mode:"open"}),P=fs.createElement("div");P.setAttribute("tabindex","0"),I.appendChild(P);const L=[...(r=(e=t.buttons)===null||e===void 0?void 0:e.map(w=>{var T,x;return{text:w.text,actionCallback:(T=w.actionCallback)!==null&&T!==void 0?T:()=>Promise.resolve(),style:(x=w.style)!==null&&x!==void 0?x:"outline"}}))!==null&&r!==void 0?r:[]];let H=a?BT(n):pe("span",[],[],n??"");i&&(H=pe("span",[],[],[H,pe("pre",[],[["style","text-align: left"]],i)]));const{style:G,html:V}=kT(f,H,s,L,!!a?.p2pSyncCode);P.appendChild(V);const C=fs.createElement("style");C.textContent=G,I.appendChild(C),o&&(Lh[f]=window.setTimeout(()=>Ti(void 0,void 0,void 0,function*(){yield yf(f)}),o)),fs.body.prepend(d);const q=I.getElementById(`beacon-alert-${f}-close`),U=()=>Ti(void 0,void 0,void 0,function*(){l&&l(),yield yf(f)});if(c){const w=I.getElementById("beacon--disclaimer");w&&(w.innerText=c)}const K=J0(),j=I.getElementById(`beacon-alert-modal-${f}`);j&&(j.classList.add(`theme__${K}`),j.addEventListener("click",U));const y=I.querySelectorAll(".beacon-modal__wrapper");return y.length>0&&y[0].addEventListener("click",w=>{w.stopPropagation()}),Mh=fs.activeElement,P.focus(),L.forEach((w,T)=>{const x=I.getElementById(`beacon-alert-${f}-${T}`);x&&x.addEventListener("click",()=>Ti(void 0,void 0,void 0,function*(){yield yf(f),w.actionCallback&&(yield w.actionCallback())}))}),q&&q.addEventListener("click",()=>Ti(void 0,void 0,void 0,function*(){yield U()})),window.addEventListener("keydown",w=>Ti(void 0,void 0,void 0,function*(){w.key==="Escape"&&(yield U())})),a&&(yield PT(f,I,a)),f}),DT={default:{css:`:host {
  --animation-duration: 300ms;
  all: initial;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

.beacon-toast__base {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 2147483000;
  margin: 0 auto;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.1);
  flex-direction: column;
}
@media (max-width: 576px) {
  .beacon-toast__base {
    top: 8px;
    right: 8px;
    left: 8px;
  }
  .beacon-toast__wallet__outer {
    flex-wrap: wrap;
  }
  .beacon-toast__wallet__link {
    display: flex;
    margin-left: 12px !important;
  }
}

.theme__light.beacon-toast__base {
  background: #fff;
}

.theme__dark.beacon-toast__base {
  background: #27334c;
}

.theme__dark p {
  color: #6183ff;
}

a {
  text-decoration: none;
  color: #3880ff;
}

a svg {
  width: 12px;
  margin-left: 2px;
}

a:visited {
  color: #3880ff;
}

hr {
  height: 1px;
  color: rgba(0, 0, 0, 0.12);
  background-color: rgba(0, 0, 0, 0.12);
  border: none;
  width: 100%;
  margin: 0;
  display: none;
}

.show {
  display: block !important;
}

.hide {
  display: none !important;
}

#beacon-toast-list {
  display: none;
}

.beacon-toast__upside_down {
  transform: rotate(180deg);
}

.beacon-toast__content {
  justify-content: space-between;
  min-height: 56px;
  height: 0;
}

.beacon-toast__action__item,
.beacon-toast__powered a,
.beacon-toast__wallet__container,
#beacon-text,
.beacon-toast__action__item p,
.beacon-toast__wallet__outer {
  align-items: center;
}

.beacon-toast__content,
.beacon-toast__base,
.beacon-toast__action__item,
.beacon-toast__powered a,
#beacon-text,
.beacon-toast__wallet__container,
.beacon-toast__wallet__outer {
  display: flex;
}

.beacon-toast__content,
.beacon-toast__action__item,
.beacon-toast__powered a {
  padding: 0 16px;
  font-family: Roboto, Helvetica, sans-serif;
}

#beacon-text strong {
  display: contents;
}
.beacon-toast__wallet__link {
  margin-left: 8px;
}
.beacon-toast__wallet__link svg {
  margin-left: 4px;
}
.beacon-toast__powered a {
  margin: 4px 0 12px;
  font-size: 12px;
  opacity: 0.64;
}

.beacon-toast__powered svg {
  width: 20px;
  height: 20px;
  margin: 0 2px 0 4px;
}

.beacon-toast__action__item {
  font-size: 14px;
  max-width: 40ch;
}

.beacon-toast__action__item p {
  margin-right: 8px;
}

.beacon-toast__action__item__subtitle,
.beacon-toast__powered a {
  min-width: 88px;
  color: rgba(0, 0, 0, 0.54);
}

.theme__dark .beacon-toast__powered a {
  color: #7c99d6;
}

.beacon-toast__content__img {
  width: 24px;
  height: 24px;
  margin-right: 4px;
  image-rendering: -moz-crisp-edges; /* Firefox */
  image-rendering: -o-crisp-edges; /* Opera */
  image-rendering: -webkit-optimize-contrast; /* Webkit (non-standard naming) */
  image-rendering: crisp-edges;
  -ms-interpolation-mode: nearest-neighbor; /* IE (non-standard property) */
}

.beacon-toast__more {
  width: 14px;
  transition: transform 0.5s;
}

a,
.beacon-toast__more {
  cursor: pointer;
}

a:hover {
  opacity: 0.64;
}

.theme__dark .beacon-toast__more {
  color: #7c99d6;
}

.beacon-toast__more--action {
  margin: 8px 0;
}

#beacon-text {
  padding-right: 24px;
}

#beacon-text-content {
  display: flex;
  align-items: center;
}

.progress-line,
.progress-line:before {
  height: 3px;
  width: 100%;
  margin: 0;
}
.progress-line {
  background-color: #a7c4f7;
  display: -webkit-flex;
  display: flex;
}
.progress-line:before {
  background-color: #3880ff;
  content: '';
  -webkit-animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation: running-progress 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}
@-webkit-keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
@keyframes running-progress {
  0% {
    margin-left: 0px;
    margin-right: 100%;
  }
  50% {
    margin-left: 25%;
    margin-right: 0%;
  }
  100% {
    margin-left: 100%;
    margin-right: 0;
  }
}
`}};var Rr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};let An;typeof window<"u"&&typeof window.document<"u"&&(An=window.document);const _y=5*1e3;let qa,iu,Ir;const UT=t=>Rr(void 0,void 0,void 0,function*(){const{text:e,isBold:r,actionText:n,actionLogo:i,actionCallback:s}=t,o=yield Vi(),a=An.createElement("div");a.classList.add("beacon-toast__action__item"),Ch(a);const c=l=>pe("strong",[],[],l);if(s){e.length>0&&a.appendChild(pe("p",[],[],e));const l=pe("span",[],[],[pe("span",[],[],n),i&&i==="external"?TT():void 0]);a.appendChild(pe("p",[],[],[pe("a",[],[["id",o]],[r?c([l]):l])]))}else if(n){e.length>0&&a.appendChild(pe("p",["beacon-toast__action__item__subtitle"],[],e));const l=pe("span",[],[],n);a.appendChild(pe("p",[],[],[r?c([l]):l]))}else{const l=pe("p",[],[],e);a.appendChild(r?c([l]):l)}return s&&a.addEventListener("click",s),a}),Ch=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},wy=t=>{var e,r;const n=(e=Ir?.walletInfo)===null||e===void 0?void 0:e.icon,i=(r=Ir?.walletInfo)===null||r===void 0?void 0:r.name;let s;const o=pe("strong",[],[],i??"Wallet");n?s=pe("span",["beacon-toast__wallet__container"],[],[pe("img",["beacon-toast__content__img"],[["src",n]],""),o]):s=o;const a=t.split("{{wallet}}");if(a.length===1)return[pe("span",[],[],t)];{const c=[];for(let l=0;l<a.length;l++)c.push(pe("span",[],[],a[l])),l<a.length-1&&c.push(s);return c}},KT=t=>{const e=t.body,r=wy(e),n=pe("span",["beacon-toast__wallet__outer"],[],r),i=NT([n]);return{style:DT.default.css,html:i}},Er=()=>new Promise(t=>{var e;Ir=void 0;const r=An.getElementById("beacon-toast-wrapper");if(!r)return t();const n=(e=r.shadowRoot)===null||e===void 0?void 0:e.getElementById("beacon-toast");n?(qa&&(clearTimeout(qa),qa=void 0),n.className=n.className.replace("fadeIn","fadeOut"),window.setTimeout(()=>{const s=r.parentNode;s&&s.removeChild(r),t()},300)):t()}),Gd=(t,e,r)=>{const n=t.getElementById(e);return n&&n.addEventListener("click",()=>Rr(void 0,void 0,void 0,function*(){yield r(n)})),n},Y0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.remove("hide"),r.classList.add("show"))},Q0=(t,e)=>{const r=t.getElementById(e);r&&(r.classList.add("hide"),r.classList.remove("show"))},HT=t=>{Q0(t,"beacon-toast-loader"),Y0(t,"beacon-toast-loader-placeholder")},FT=t=>{Y0(t,"beacon-toast-button-expand"),Q0(t,"beacon-toast-button-close")},Ay=t=>{Y0(t,"beacon-toast-button-close"),Q0(t,"beacon-toast-button-expand")},xy=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.remove("beacon-toast__upside_down"),r.classList.add("hide"),r.classList.remove("show"))},Sy=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.add("beacon-toast__upside_down"),r.classList.remove("hide"),r.classList.add("show"))},Bh=t=>{const e=t.getElementById("beacon-toast-button-expand"),r=t.getElementById("beacon-toast-list");e&&r&&(e.classList.contains("beacon-toast__upside_down")?xy(t):Sy(t))},Ry=(t,e,r)=>Rr(void 0,void 0,void 0,function*(){const n=e.actions;if(n&&n.length>0){const i=n.map(a=>Rr(void 0,void 0,void 0,function*(){return UT(a)}));(yield Promise.all(i)).forEach(a=>r.appendChild(a));const o=An.createElement("small");o.classList.add("beacon-toast__powered"),o.appendChild(MT()),r.appendChild(o),FT(t)}else Ay(t),xy(t)}),eb=t=>Rr(void 0,void 0,void 0,function*(){Ir=t;const e=t.timer,r=An.createElement("div");r.setAttribute("id","beacon-toast-wrapper");const n=r.attachShadow({mode:"open"}),i=An.createElement("div"),{style:s,html:o}=KT(t);i.appendChild(o);const a=An.createElement("style");a.textContent=s,n.appendChild(i),n.appendChild(a),e&&(qa=window.setTimeout(()=>Rr(void 0,void 0,void 0,function*(){yield Er()}),e)),An.body.prepend(r);const c=J0(),l=n.getElementById("beacon-toast");l&&l.classList.add(`theme__${c}`);const f=n.getElementById("beacon-toast-list");f&&(yield Ry(n,t,f));const d=n.getElementById("beacon-open-wallet");d&&(t.openWalletAction?d.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()}):d.classList.add("hide")),Ir.state==="loading"&&(iu=window.setTimeout(()=>Rr(void 0,void 0,void 0,function*(){const P=n.getElementById("beacon-toast-button-expand");P&&!P.classList.contains("beacon-toast__upside_down")&&Bh(n)}),_y)),Gd(n,"beacon-toast-button-done",()=>Rr(void 0,void 0,void 0,function*(){yield Er()}));const I=Gd(n,"beacon-toast-button-close",()=>Rr(void 0,void 0,void 0,function*(){yield Er()}));I&&Ir.state==="loading"&&I.classList.add("hide"),Gd(n,"beacon-toast-button-expand",()=>Rr(void 0,void 0,void 0,function*(){Bh(n)}))}),jT=t=>Rr(void 0,void 0,void 0,function*(){Ir=Object.assign(Object.assign({},Ir),t);const e=t.timer,r=An.getElementById("beacon-toast-wrapper");if(!r)return;const n=r.shadowRoot;if(!n)return;const i=n.getElementById("beacon-toast-list");i&&(Ch(i),yield Ry(n,t,i)),Ir.state==="loading"&&(iu=window.setTimeout(()=>Rr(void 0,void 0,void 0,function*(){const c=n.getElementById("beacon-toast-button-expand");c&&!c.classList.contains("beacon-toast__upside_down")&&Bh(n)}),_y));const s=n.getElementById("beacon-text-content");s&&(Ch(s),s.appendChild(pe("span",["beacon-toast__wallet__outer"],[],wy(t.body))));const o=n.getElementById("beacon-open-wallet");o&&(t.openWalletAction?(o.classList.remove("hide"),o.addEventListener("click",()=>{t.openWalletAction&&t.openWalletAction()})):o.classList.add("hide")),e&&(qa=window.setTimeout(()=>Rr(void 0,void 0,void 0,function*(){yield Er()}),e));const a=n.getElementById("beacon-toast-button-done");a&&a.addEventListener("click",()=>Rr(void 0,void 0,void 0,function*(){yield Er()}))}),Os=t=>Rr(void 0,void 0,void 0,function*(){var e;if(iu&&clearTimeout(iu),An.getElementById("beacon-toast-wrapper")?t.forceNew?(yield Er(),yield eb(t)):yield jT(t):yield eb(t),Ir&&Ir.state==="finished"){const n=(e=An.getElementById("beacon-toast-wrapper"))===null||e===void 0?void 0:e.shadowRoot;n&&(HT(n),Ay(n),Sy(n))}}),Zu=t=>t.length>=12?`${t.substr(0,5)}...${t.substr(-5)}`:t;var bt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const fc=new Jr("BeaconEvents"),Tc=5*1e3;var fe;(function(t){t.PERMISSION_REQUEST_SENT="PERMISSION_REQUEST_SENT",t.PERMISSION_REQUEST_SUCCESS="PERMISSION_REQUEST_SUCCESS",t.PERMISSION_REQUEST_ERROR="PERMISSION_REQUEST_ERROR",t.OPERATION_REQUEST_SENT="OPERATION_REQUEST_SENT",t.OPERATION_REQUEST_SUCCESS="OPERATION_REQUEST_SUCCESS",t.OPERATION_REQUEST_ERROR="OPERATION_REQUEST_ERROR",t.SIGN_REQUEST_SENT="SIGN_REQUEST_SENT",t.SIGN_REQUEST_SUCCESS="SIGN_REQUEST_SUCCESS",t.SIGN_REQUEST_ERROR="SIGN_REQUEST_ERROR",t.BROADCAST_REQUEST_SENT="BROADCAST_REQUEST_SENT",t.BROADCAST_REQUEST_SUCCESS="BROADCAST_REQUEST_SUCCESS",t.BROADCAST_REQUEST_ERROR="BROADCAST_REQUEST_ERROR",t.ACKNOWLEDGE_RECEIVED="ACKNOWLEDGE_RECEIVED",t.LOCAL_RATE_LIMIT_REACHED="LOCAL_RATE_LIMIT_REACHED",t.NO_PERMISSIONS="NO_PERMISSIONS",t.ACTIVE_ACCOUNT_SET="ACTIVE_ACCOUNT_SET",t.ACTIVE_TRANSPORT_SET="ACTIVE_TRANSPORT_SET",t.SHOW_PREPARE="SHOW_PREPARE",t.HIDE_UI="HIDE_UI",t.PAIR_INIT="PAIR_INIT",t.PAIR_SUCCESS="PAIR_SUCCESS",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.INTERNAL_ERROR="INTERNAL_ERROR",t.UNKNOWN="UNKNOWN"})(fe||(fe={}));const tf=t=>bt(void 0,void 0,void 0,function*(){let e;const r=[];if(t.walletInfo.deeplink&&(t.walletInfo.type==="web"||t.walletInfo.type==="mobile"&&Ph(window)||t.walletInfo.type==="desktop"&&!Ph(window))){const n=t.walletInfo.deeplink;e=()=>bt(void 0,void 0,void 0,function*(){const i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("target","_blank"),i.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))})}r.push({text:"No answer from your wallet received yet. Please make sure the wallet is open.",isBold:!0}),r.push({text:"Did you make a mistake?",actionText:"Cancel Request",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Er()})}),r.push({text:"Wallet not receiving request?",actionText:"Reset Connection",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Er();const n=t.extraInfo.resetCallback;n&&(fc.log("showSentToast","resetCallback invoked"),yield n())})}),Os({body:"Request sent to  {{wallet}}",walletInfo:t.walletInfo,state:"loading",actions:r,openWalletAction:e}).catch(n=>console.error(n))}),GT=t=>bt(void 0,void 0,void 0,function*(){Os({body:"Awaiting confirmation in  {{wallet}}",state:"acknowledge",walletInfo:t.walletInfo}).catch(e=>console.error(e))}),VT=t=>bt(void 0,void 0,void 0,function*(){const e=t.walletInfo?"Preparing Request for  {{wallet}}...":"Preparing Request...";Os({body:e,state:"prepare",walletInfo:t.walletInfo}).catch(r=>console.error(r))}),qT=t=>bt(void 0,void 0,void 0,function*(){t?(t.includes("alert")&&Qu(),t.includes("toast")&&Er()):Er()}),$T=()=>bt(void 0,void 0,void 0,function*(){yield pa({title:"No Permission",body:"Please allow the wallet to handle this type of request."})}),rf=(t,e)=>bt(void 0,void 0,void 0,function*(){var r,n,i,s,o,a;const c=t.errorResponse.errorType?Yr.getError(t.errorResponse.errorType,t.errorResponse.errorData):new J2,l=[{text:c.title,isBold:!0}];if(t.errorResponse.errorType===pt.TRANSACTION_INVALID_ERROR&&t.errorResponse.errorData){const f=t.errorResponse.errorData,d=t.errorMessages;let I=!1;if(!((r=f[0])===null||r===void 0)&&r.contract_handle&&d&&d?.[f[0].contract_handle]){const P=(s=(i=(n=f[1])===null||n===void 0?void 0:n.with)===null||i===void 0?void 0:i.int)!==null&&s!==void 0?s:(a=(o=f[1])===null||o===void 0?void 0:o.with)===null||a===void 0?void 0:a.string,L=d?.[f[0].contract_handle];P&&L?.[P]&&(l.push({text:L?.[P],isBold:!0}),I=!0)}I||l.push({text:c.description}),l.push({text:"",actionText:"Show Details",actionCallback:()=>bt(void 0,void 0,void 0,function*(){yield Er(),yield pa({title:c.title,body:c.fullDescription.description,data:c.fullDescription.data,buttons:e})})})}yield Os({body:"{{wallet}}  has returned an error",timer:t.errorResponse.errorType===pt.ABORTED_ERROR?Tc:void 0,state:"finished",walletInfo:t.walletInfo,actions:l})}),zT=()=>bt(void 0,void 0,void 0,function*(){pa({title:"Error",body:"Rate limit reached. Please slow down",buttons:[{text:"Done",style:"outline"}],timer:3e3}).catch(t=>console.error(t))}),WT=()=>bt(void 0,void 0,void 0,function*(){yield Qu()}),XT=()=>bt(void 0,void 0,void 0,function*(){yield pa({title:"Channel closed",body:"Your peer has closed the connection.",buttons:[{text:"Done",style:"outline"}],timer:1500})}),JT=t=>bt(void 0,void 0,void 0,function*(){var e;const r=[...(e=t.buttons)!==null&&e!==void 0?e:[]];r.push({text:"Done",style:"outline"});const n={title:"Internal Error",body:t.text,buttons:r};yield pa(n)}),YT=t=>bt(void 0,void 0,void 0,function*(){const e={title:"Choose your preferred wallet",body:"<p></p>",pairingPayload:{p2pSyncCode:t.p2pPeerInfo,postmessageSyncCode:t.postmessagePeerInfo,preferredNetwork:t.preferredNetwork},closeButtonCallback:t.abortedHandler,disclaimerText:t.disclaimerText};yield pa(e)}),QT=t=>bt(void 0,void 0,void 0,function*(){const{output:e}=t;yield Os({body:"{{wallet}}  has granted permission",timer:Tc,walletInfo:t.walletInfo,state:"finished",actions:[{text:"Address",actionText:Zu(e.address),isBold:!0},{text:"Network",actionText:`${e.network.type}`},{text:"Permissions",actionText:e.scopes.join(", ")}]})}),ZT=t=>bt(void 0,void 0,void 0,function*(){const{account:e,output:r,blockExplorer:n}=t;yield Os({body:"{{wallet}}  successfully submitted operation",timer:Tc,state:"finished",walletInfo:t.walletInfo,actions:[{text:Zu(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>bt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e.network);window.open(i,"_blank"),yield Er()})}]})}),eP=t=>bt(void 0,void 0,void 0,function*(){const e=t.output;yield Os({body:"{{wallet}}  successfully signed payload",timer:Tc,state:"finished",walletInfo:t.walletInfo,actions:[{text:`Signature: ${Zu(e.signature)}`,actionText:"Copy to clipboard",actionCallback:()=>bt(void 0,void 0,void 0,function*(){navigator.clipboard.writeText(e.signature).then(()=>{fc.log("showSignSuccessAlert","Copying to clipboard was successful!")},r=>{fc.error("showSignSuccessAlert","Could not copy text to clipboard: ",r)}),yield Er()})}]})}),tP=t=>bt(void 0,void 0,void 0,function*(){const{network:e,output:r,blockExplorer:n}=t;yield Os({body:"{{wallet}}  successfully injected operation",timer:Tc,state:"finished",walletInfo:t.walletInfo,actions:[{text:Zu(r.transactionHash),isBold:!0,actionText:"Open Blockexplorer",actionLogo:"external",actionCallback:()=>bt(void 0,void 0,void 0,function*(){const i=yield n.getTransactionLink(r.transactionHash,e);window.open(i,"_blank"),yield Er()})}]})}),Vd=()=>()=>bt(void 0,void 0,void 0,function*(){}),Et={[fe.PERMISSION_REQUEST_SENT]:tf,[fe.PERMISSION_REQUEST_SUCCESS]:QT,[fe.PERMISSION_REQUEST_ERROR]:rf,[fe.OPERATION_REQUEST_SENT]:tf,[fe.OPERATION_REQUEST_SUCCESS]:ZT,[fe.OPERATION_REQUEST_ERROR]:rf,[fe.SIGN_REQUEST_SENT]:tf,[fe.SIGN_REQUEST_SUCCESS]:eP,[fe.SIGN_REQUEST_ERROR]:rf,[fe.BROADCAST_REQUEST_SENT]:tf,[fe.BROADCAST_REQUEST_SUCCESS]:tP,[fe.BROADCAST_REQUEST_ERROR]:rf,[fe.ACKNOWLEDGE_RECEIVED]:GT,[fe.LOCAL_RATE_LIMIT_REACHED]:zT,[fe.NO_PERMISSIONS]:$T,[fe.ACTIVE_ACCOUNT_SET]:Vd(),[fe.ACTIVE_TRANSPORT_SET]:Vd(),[fe.SHOW_PREPARE]:VT,[fe.HIDE_UI]:qT,[fe.PAIR_INIT]:YT,[fe.PAIR_SUCCESS]:WT,[fe.CHANNEL_CLOSED]:XT,[fe.INTERNAL_ERROR]:JT,[fe.UNKNOWN]:Vd()};class tb{constructor(e={},r){this.callbackMap={[fe.PERMISSION_REQUEST_SENT]:[Et.PERMISSION_REQUEST_SENT],[fe.PERMISSION_REQUEST_SUCCESS]:[Et.PERMISSION_REQUEST_SUCCESS],[fe.PERMISSION_REQUEST_ERROR]:[Et.PERMISSION_REQUEST_ERROR],[fe.OPERATION_REQUEST_SENT]:[Et.OPERATION_REQUEST_SENT],[fe.OPERATION_REQUEST_SUCCESS]:[Et.OPERATION_REQUEST_SUCCESS],[fe.OPERATION_REQUEST_ERROR]:[Et.OPERATION_REQUEST_ERROR],[fe.SIGN_REQUEST_SENT]:[Et.SIGN_REQUEST_SENT],[fe.SIGN_REQUEST_SUCCESS]:[Et.SIGN_REQUEST_SUCCESS],[fe.SIGN_REQUEST_ERROR]:[Et.SIGN_REQUEST_ERROR],[fe.BROADCAST_REQUEST_SENT]:[Et.BROADCAST_REQUEST_SENT],[fe.BROADCAST_REQUEST_SUCCESS]:[Et.BROADCAST_REQUEST_SUCCESS],[fe.BROADCAST_REQUEST_ERROR]:[Et.BROADCAST_REQUEST_ERROR],[fe.ACKNOWLEDGE_RECEIVED]:[Et.ACKNOWLEDGE_RECEIVED],[fe.LOCAL_RATE_LIMIT_REACHED]:[Et.LOCAL_RATE_LIMIT_REACHED],[fe.NO_PERMISSIONS]:[Et.NO_PERMISSIONS],[fe.ACTIVE_ACCOUNT_SET]:[Et.ACTIVE_ACCOUNT_SET],[fe.ACTIVE_TRANSPORT_SET]:[Et.ACTIVE_TRANSPORT_SET],[fe.SHOW_PREPARE]:[Et.SHOW_PREPARE],[fe.HIDE_UI]:[Et.HIDE_UI],[fe.PAIR_INIT]:[Et.PAIR_INIT],[fe.PAIR_SUCCESS]:[Et.PAIR_SUCCESS],[fe.CHANNEL_CLOSED]:[Et.CHANNEL_CLOSED],[fe.INTERNAL_ERROR]:[Et.INTERNAL_ERROR],[fe.UNKNOWN]:[Et.UNKNOWN]},r&&this.setAllHandlers(),this.overrideDefaults(e)}on(e,r){return bt(this,void 0,void 0,function*(){const n=this.callbackMap[e]||[];n.push(r),this.callbackMap[e]=n})}emit(e,r,n){return bt(this,void 0,void 0,function*(){const i=this.callbackMap[e];i&&i.length>0&&i.forEach(s=>bt(this,void 0,void 0,function*(){try{yield s(r,n)}catch(o){fc.error(`error handling event ${e}`,o)}}))})}overrideDefaults(e){Object.keys(e).forEach(r=>{const n=r,i=e[n];i&&(this.callbackMap[n]=[i.handler])})}setAllHandlers(e){Object.keys(this.callbackMap).forEach(r=>{const n=r;this.callbackMap[n]=[],e?this.callbackMap[n].push(e):this.callbackMap[n].push((...i)=>{fc.log(r,...i)})})}}const nf={[Ke.BlockchainRequest]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.BlockchainResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.PermissionRequest]:{sent:fe.PERMISSION_REQUEST_SENT,success:fe.PERMISSION_REQUEST_SUCCESS,error:fe.PERMISSION_REQUEST_ERROR},[Ke.PermissionResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.OperationRequest]:{sent:fe.OPERATION_REQUEST_SENT,success:fe.OPERATION_REQUEST_SUCCESS,error:fe.OPERATION_REQUEST_ERROR},[Ke.OperationResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.SignPayloadRequest]:{sent:fe.SIGN_REQUEST_SENT,success:fe.SIGN_REQUEST_SUCCESS,error:fe.SIGN_REQUEST_ERROR},[Ke.SignPayloadResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.BroadcastRequest]:{sent:fe.BROADCAST_REQUEST_SENT,success:fe.BROADCAST_REQUEST_SUCCESS,error:fe.BROADCAST_REQUEST_ERROR},[Ke.BroadcastResponse]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Acknowledge]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Disconnect]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN},[Ke.Error]:{sent:fe.UNKNOWN,success:fe.UNKNOWN,error:fe.UNKNOWN}};var rP=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class nP{constructor(e){this.rpcUrls=e}getLinkForNetwork(e){return rP(this,void 0,void 0,function*(){return this.rpcUrls[e.type]})}}var rb=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class iP extends nP{constructor(e={[St.MAINNET]:"https://tzkt.io",[St.GHOSTNET]:"https://ghostnet.tzkt.io",[St.MONDAYNET]:"https://mondaynet.tzkt.io",[St.DAILYNET]:"https://dailynet.tzkt.io",[St.DELPHINET]:"https://delphinet.tzkt.io",[St.EDONET]:"https://edonet.tzkt.io",[St.FLORENCENET]:"https://florencenet.tzkt.io",[St.GRANADANET]:"https://granadanet.tzkt.io",[St.HANGZHOUNET]:"https://hangzhounet.tzkt.io",[St.ITHACANET]:"https://ithacanet.tzkt.io",[St.JAKARTANET]:"https://jakartanet.tzkt.io",[St.KATHMANDUNET]:"https://kathmandunet.tzkt.io",[St.LIMANET]:"https://limanet.tzkt.io",[St.MUMBAINET]:"https://mumbainet.tzkt.io",[St.CUSTOM]:"https://mumbainet.tzkt.io"}){super(e),this.rpcUrls=e}getAddressLink(e,r){return rb(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}getTransactionLink(e,r){return rb(this,void 0,void 0,function*(){return`${yield this.getLinkForNetwork(r)}/${e}`})}}var sf=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const qd=new Jr("DappPostMessageTransport");class sP extends Oc{constructor(e,r,n){super(e,r,n,ke.TRANSPORT_POSTMESSAGE_PEERS_DAPP)}startOpenChannelListener(){return sf(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>sf(this,void 0,void 0,function*(){qd.log("connect","received PostMessagePairingResponse",e),yield this.addPeer(e),this._isConnected=sn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return sf(this,void 0,void 0,function*(){qd.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return sf(this,void 0,void 0,function*(){qd.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var of=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const $d=new Jr("DappP2PTransport");class oP extends uT{constructor(e,r,n,i,s,o){super(e,r,n,i,ke.TRANSPORT_P2P_PEERS_DAPP,s,o)}startOpenChannelListener(){return of(this,void 0,void 0,function*(){return this.client.listenForChannelOpening(e=>of(this,void 0,void 0,function*(){$d.log("listenForNewPeer","new publicKey",e.publicKey),yield this.addPeer(e),this._isConnected=sn.CONNECTED,this.newPeerListener&&(this.newPeerListener(e),this.newPeerListener=void 0)}))})}listenForNewPeer(e){return of(this,void 0,void 0,function*(){$d.log("listenForNewPeer"),this.newPeerListener=e})}stopListeningForNewPeers(){return of(this,void 0,void 0,function*(){$d.log("stopListeningForNewPeers"),this.newPeerListener=void 0})}}var Ie=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Mt=new Jr("DAppClient");class aP extends HI{constructor(e){var r,n,i,s,o;super(Object.assign({storage:e&&e.storage?e.storage:new XI},e)),this.events=new tb,this.openRequests=new Map,this._activeAccount=new Jt,this._activePeer=new Jt,this.blockchains=new Map,this.events=new tb(e.eventHandlers,(r=e.disableDefaultEvents)!==null&&r!==void 0?r:!1),this.blockExplorer=(n=e.blockExplorer)!==null&&n!==void 0?n:new iP,this.preferredNetwork=(i=e.preferredNetwork)!==null&&i!==void 0?i:St.MAINNET,Zg((s=e.colorMode)!==null&&s!==void 0?s:Jf.LIGHT),this.disclaimerText=e.disclaimerText,this.errorMessages=(o=e.errorMessages)!==null&&o!==void 0?o:{},this.appMetadataManager=new JI(this.storage),this.activeAccountLoaded=this.storage.get(ke.ACTIVE_ACCOUNT).then(a=>Ie(this,void 0,void 0,function*(){a?yield this.setActiveAccount(yield this.accountManager.getAccount(a)):yield this.setActiveAccount(void 0)})).catch(a=>Ie(this,void 0,void 0,function*(){yield this.setActiveAccount(void 0),console.error(a)})),this.handleResponse=(a,c)=>Ie(this,void 0,void 0,function*(){var l,f;const d=this.openRequests.get(a.id);if(Mt.log("handleResponse","Received message",a,c),a.version==="3"){const I=a;if(d&&I.message.type===Ke.Acknowledge)Mt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(fe.ACKNOWLEDGE_RECEIVED,{message:I.message,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d){const P=I.message.blockchainData.appMetadata;I.message.type===Ke.PermissionResponse&&P&&(yield this.appMetadataManager.addAppMetadata(P)),console.timeLog(I.id,"response"),console.timeEnd(I.id),I.message.type===Ke.Error?d.reject(I.message):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(I.id)}else if(I.message.type===Ke.Disconnect){const P=c.origin===wn.P2P?this.p2pTransport:(l=this.postMessageTransport)!==null&&l!==void 0?l:yield this.transport;if(P){const H=(yield P.getPeers()).find(G=>G.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(fe.CHANNEL_CLOSED)):Mt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Mt.error("handleResponse","no request found for id ",a.id,a)}else{const I=a;if(d&&I.type===Ke.Acknowledge)Mt.log(`acknowledge message received for ${a.id}`),console.timeLog(a.id,"acknowledge"),this.events.emit(fe.ACKNOWLEDGE_RECEIVED,{message:I,extraInfo:{},walletInfo:yield this.getWalletInfo()}).catch(console.error);else if(d)I.type===Ke.PermissionResponse&&I.appMetadata&&(yield this.appMetadataManager.addAppMetadata(I.appMetadata)),console.timeLog(I.id,"response"),console.timeEnd(I.id),I.type===Ke.Error||a.errorType?d.reject(I):d.resolve({message:a,connectionInfo:c}),this.openRequests.delete(I.id);else if(I.type===Ke.Disconnect||a.typedMessage.type===Ke.Disconnect){const P=c.origin===wn.P2P?this.p2pTransport:(f=this.postMessageTransport)!==null&&f!==void 0?f:yield this.transport;if(P){const H=(yield P.getPeers()).find(G=>G.senderId===a.senderId);H?(yield P.removePeer(H),yield this.removeAccountsForPeers([H]),yield this.events.emit(fe.CHANNEL_CLOSED)):Mt.error("handleDisconnect","cannot find peer for sender ID",a.senderId)}}else Mt.error("handleResponse","no request found for id ",a.id,a)}})}initInternalTransports(){return Ie(this,void 0,void 0,function*(){const e=yield this.keyPair;this.postMessageTransport||this.p2pTransport||(this.postMessageTransport=new sP(this.name,e,this.storage),yield this.addListener(this.postMessageTransport),this.p2pTransport=new oP(this.name,e,this.storage,this.matrixNodes,this.iconUrl,this.appUrl),yield this.addListener(this.p2pTransport))})}init(e){const r=Object.create(null,{init:{get:()=>super.init}});return Ie(this,void 0,void 0,function*(){if(this._initPromise)return this._initPromise;try{yield this.activeAccountLoaded}catch{}return this._initPromise=new Promise(n=>Ie(this,void 0,void 0,function*(){if(e)yield this.addListener(e),n(yield r.init.call(this,e));else if(this._transport.isSettled())yield(yield this.transport).connect(),n(yield r.init.call(this,yield this.transport));else{const i=yield this.getActiveAccount(),s=()=>{this.postMessageTransport&&this.postMessageTransport.stopListeningForNewPeers().catch(console.error),this.p2pTransport&&this.p2pTransport.stopListeningForNewPeers().catch(console.error)};if(yield this.initInternalTransports(),!this.postMessageTransport||!this.p2pTransport)return;if(this.postMessageTransport.connect().then().catch(console.error),i&&i.origin){const o=i.origin.type;o===wn.EXTENSION?n(yield r.init.call(this,this.postMessageTransport)):o===wn.P2P&&n(yield r.init.call(this,this.p2pTransport))}else{const o=this.p2pTransport,a=this.postMessageTransport;a.listenForNewPeer(c=>{Mt.log("init","postmessage transport peer connected",c),this.events.emit(fe.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.postMessageTransport).catch(console.error),s(),n(Xs.POST_MESSAGE)}).catch(console.error),o.listenForNewPeer(c=>{Mt.log("init","p2p transport peer connected",c),this.events.emit(fe.PAIR_SUCCESS,c).catch(l=>console.warn(l)),this.setActivePeer(c).catch(console.error),this.setTransport(this.p2pTransport).catch(console.error),s(),n(Xs.P2P)}).catch(console.error),Oc.getAvailableExtensions().then(()=>Ie(this,void 0,void 0,function*(){this.events.emit(fe.PAIR_INIT,{p2pPeerInfo:()=>(o.connect().then().catch(console.error),o.getPairingRequestInfo()),postmessagePeerInfo:()=>a.getPairingRequestInfo(),preferredNetwork:this.preferredNetwork,abortedHandler:()=>{console.log("ABORTED"),this._initPromise=void 0},disclaimerText:this.disclaimerText}).catch(c=>console.warn(c))})).catch(c=>{this._initPromise=void 0,console.error(c)})}}})),this._initPromise})}getActiveAccount(){return Ie(this,void 0,void 0,function*(){return this._activeAccount.promise})}setActiveAccount(e){return Ie(this,void 0,void 0,function*(){if(this._activeAccount.isSettled()?this._activeAccount=Jt.resolve(e):this._activeAccount.resolve(e),e){const r=e.origin.type;yield this.initInternalTransports(),r===wn.EXTENSION?yield this.setTransport(this.postMessageTransport):r===wn.P2P&&(yield this.setTransport(this.p2pTransport));const n=yield this.getPeer(e);yield this.setActivePeer(n)}else yield this.setActivePeer(void 0),yield this.setTransport(void 0);yield this.storage.set(ke.ACTIVE_ACCOUNT,e?e.accountIdentifier:void 0),yield this.events.emit(fe.ACTIVE_ACCOUNT_SET,e)})}clearActiveAccount(){return this.setActiveAccount()}setColorMode(e){return Ie(this,void 0,void 0,function*(){return Zg(e)})}getColorMode(){return Ie(this,void 0,void 0,function*(){return J0()})}getAppMetadata(){return Ie(this,void 0,void 0,function*(){return this.getOwnAppMetadata()})}showPrepare(){return Ie(this,void 0,void 0,function*(){const e=yield(()=>Ie(this,void 0,void 0,function*(){try{return yield this.getWalletInfo()}catch{return}}))();yield this.events.emit(fe.SHOW_PREPARE,{walletInfo:e})})}hideUI(e){return Ie(this,void 0,void 0,function*(){yield this.events.emit(fe.HIDE_UI,e)})}removeAccount(e){const r=Object.create(null,{removeAccount:{get:()=>super.removeAccount}});return Ie(this,void 0,void 0,function*(){const n=r.removeAccount.call(this,e),i=yield this.getActiveAccount();return i&&i.accountIdentifier===e&&(yield this.setActiveAccount(void 0)),n})}removeAllAccounts(){const e=Object.create(null,{removeAllAccounts:{get:()=>super.removeAllAccounts}});return Ie(this,void 0,void 0,function*(){yield e.removeAllAccounts.call(this),yield this.setActiveAccount(void 0)})}removePeer(e,r=!1){return Ie(this,void 0,void 0,function*(){const n=yield this.transport,i=n.removePeer(e);return yield this.removeAccountsForPeers([e]),r&&(yield this.sendDisconnectToPeer(e,n)),i})}removeAllPeers(e=!1){return Ie(this,void 0,void 0,function*(){const r=yield this.transport,n=yield r.getPeers(),i=r.removeAllPeers();if(yield this.removeAccountsForPeers(n),e){const s=n.map(o=>this.sendDisconnectToPeer(o,r));yield Promise.all(s)}return i})}subscribeToEvent(e,r){return Ie(this,void 0,void 0,function*(){yield this.events.on(e,r)})}checkPermissions(e){return Ie(this,void 0,void 0,function*(){if(e===Ke.PermissionRequest)return!0;const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account set!");const n=r.scopes;switch(e){case Ke.OperationRequest:return n.includes(_n.OPERATION_REQUEST);case Ke.SignPayloadRequest:return n.includes(_n.SIGN);case Ke.BroadcastRequest:return!0;default:return!1}})}sendNotification(e,r,n,i){var s,o,a;return Ie(this,void 0,void 0,function*(){const c=yield this.getActiveAccount();if(!c||c&&!c.scopes.includes(_n.NOTIFICATION)&&!c.notification)throw new Error("notification permissions not given");if(!(!((s=c.notification)===null||s===void 0)&&s.token))throw new Error("No AccessToken");const l=(o=c.notification)===null||o===void 0?void 0:o.apiUrl;if(!l)throw new Error("No Push URL set");return this.sendNotificationWithAccessToken({url:l,recipient:c.address,title:e,body:r,payload:n,protocolIdentifier:i,accessToken:(a=c.notification)===null||a===void 0?void 0:a.token})})}addBlockchain(e){this.blockchains.set(e.identifier,e),e.getWalletLists().then(r=>{xT(r.desktopList),ST(r.extensionList),RT(r.webList),IT(r.iOSList)})}removeBlockchain(e){this.blockchains.delete(e)}permissionRequest(e){return Ie(this,void 0,void 0,function*(){console.log("PERMISSION REQUEST");const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${e.blockchainIdentifier}" not supported by dAppClient`);const n=Object.assign(Object.assign({},e),{type:Ke.PermissionRequest,blockchainData:Object.assign(Object.assign({},e.blockchainData),{appMetadata:yield this.getOwnAppMetadata()})});console.log("REQUESTION PERMIMISSION V3","xxx",n);const{message:i,connectionInfo:s}=yield this.makeRequestV3(n).catch(c=>Ie(this,void 0,void 0,function*(){throw new Error("TODO")}));console.log("RESPONSE V3",i,s);const o=yield r.getAccountInfosFromPermissionResponse(i.message),a={accountIdentifier:o[0].accountId,senderId:i.senderId,origin:{type:s.origin,id:s.id},address:o[0].address,publicKey:o[0].publicKey,scopes:i.message.blockchainData.scopes,connectedAt:new Date().getTime(),chainData:i.message.blockchainData};return yield this.accountManager.addAccount(a),yield this.setActiveAccount(a),yield r.handleResponse({request:n,account:a,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),yield this.notifySuccess(n,{account:a,output:{address:o[0].address,network:{type:St.MAINNET},scopes:[_n.OPERATION_REQUEST]},blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i.message})}request(e){return Ie(this,void 0,void 0,function*(){console.log("REQUEST",e);const r=this.blockchains.get(e.blockchainIdentifier);if(!r)throw new Error(`Blockchain "${r}" not supported by dAppClient`);yield r.validateRequest(e);const n=yield this.getActiveAccount();if(!n)throw yield this.sendInternalError("No active account!");const i=Object.assign(Object.assign({},e),{type:Ke.BlockchainRequest,accountId:n.accountIdentifier}),{message:s,connectionInfo:o}=yield this.makeRequestV3(i).catch(a=>Ie(this,void 0,void 0,function*(){throw console.error(a),new Error("TODO")}));return yield r.handleResponse({request:i,account:n,output:s,blockExplorer:this.blockExplorer,connectionContext:o,walletInfo:yield this.getWalletInfo()}),s.message})}requestPermissions(e){return Ie(this,void 0,void 0,function*(){const r={appMetadata:yield this.getOwnAppMetadata(),type:Ke.PermissionRequest,network:e&&e.network?e.network:{type:St.MAINNET},scopes:e&&e.scopes?e.scopes:[_n.OPERATION_REQUEST,_n.SIGN]},{message:n,connectionInfo:i}=yield this.makeRequest(r).catch(l=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(r,l)})),s=n.publicKey||n.pubkey||n.pubKey,o=yield SI(s),a={accountIdentifier:yield Rh(o,n.network),senderId:n.senderId,origin:{type:i.origin,id:i.id},address:o,publicKey:s,network:n.network,scopes:n.scopes,threshold:n.threshold,notification:n.notification,connectedAt:new Date().getTime()};yield this.accountManager.addAccount(a),yield this.setActiveAccount(a);const c=Object.assign(Object.assign({},n),{address:o,accountInfo:a});return yield this.notifySuccess(r,{account:a,output:c,blockExplorer:this.blockExplorer,connectionContext:i,walletInfo:yield this.getWalletInfo()}),c})}requestSignPayload(e){return Ie(this,void 0,void 0,function*(){if(!e.payload)throw yield this.sendInternalError("Payload must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n=e.payload;if(typeof n!="string")throw new Error("Payload must be a string");const i=(()=>{switch(e.signingType){case Zi.OPERATION:if(!n.startsWith("03"))throw new Error('When using signing type "OPERATION", the payload must start with prefix "03"');return Zi.OPERATION;case Zi.MICHELINE:if(!n.startsWith("05"))throw new Error('When using signing type "MICHELINE", the payload must start with prefix "05"');return Zi.MICHELINE;case Zi.RAW:default:return Zi.RAW}})(),s={type:Ke.SignPayloadRequest,signingType:i,payload:n,sourceAddress:e.sourceAddress||r.address},{message:o,connectionInfo:a}=yield this.makeRequest(s).catch(c=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(s,c)}));return yield this.notifySuccess(s,{account:r,output:o,connectionContext:a,walletInfo:yield this.getWalletInfo()}),o})}requestOperation(e){return Ie(this,void 0,void 0,function*(){if(!e.operationDetails)throw yield this.sendInternalError("Operation details must be provided");const r=yield this.getActiveAccount();if(!r)throw yield this.sendInternalError("No active account!");const n={type:Ke.OperationRequest,network:r.network||{type:St.MAINNET},operationDetails:e.operationDetails,sourceAddress:r.address||""},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{account:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}requestBroadcast(e){return Ie(this,void 0,void 0,function*(){if(!e.signedTransaction)throw yield this.sendInternalError("Signed transaction must be provided");const r=e.network||{type:St.MAINNET},n={type:Ke.BroadcastRequest,network:r,signedTransaction:e.signedTransaction},{message:i,connectionInfo:s}=yield this.makeRequest(n).catch(o=>Ie(this,void 0,void 0,function*(){throw yield this.handleRequestError(n,o)}));return yield this.notifySuccess(n,{network:r,output:i,blockExplorer:this.blockExplorer,connectionContext:s,walletInfo:yield this.getWalletInfo()}),i})}setActivePeer(e){return Ie(this,void 0,void 0,function*(){this._activePeer.isSettled()?this._activePeer=Jt.resolve(e):this._activePeer.resolve(e),e&&(yield this.initInternalTransports(),e.type==="postmessage-pairing-response"?yield this.setTransport(this.postMessageTransport):e.type==="p2p-pairing-response"&&(yield this.setTransport(this.p2pTransport)))})}setTransport(e){const r=Object.create(null,{setTransport:{get:()=>super.setTransport}});return Ie(this,void 0,void 0,function*(){e||(this._initPromise=void 0);const n=r.setTransport.call(this,e);return yield this.events.emit(fe.ACTIVE_TRANSPORT_SET,e),n})}sendInternalError(e){return Ie(this,void 0,void 0,function*(){throw yield this.events.emit(fe.INTERNAL_ERROR,{text:e}),new Error(e)})}removeAccountsForPeers(e){return Ie(this,void 0,void 0,function*(){const r=yield this.accountManager.getAccounts(),n=e.map(a=>a.senderId),s=r.filter(a=>n.includes(a.senderId)).map(a=>a.accountIdentifier);yield this.accountManager.removeAccounts(s);const o=yield this.getActiveAccount();o&&s.includes(o.accountIdentifier)&&(yield this.setActiveAccount(void 0))})}handleRequestError(e,r){return Ie(this,void 0,void 0,function*(){if(Mt.error("handleRequestError","error response",r),r.errorType){const n=[];if(r.errorType===pt.NO_PRIVATE_KEY_FOUND_ERROR){const o=()=>Ie(this,void 0,void 0,function*(){const a=e;let c;if(a.sourceAddress&&a.network){const l=yield Rh(a.sourceAddress,a.network);c=yield this.getAccount(l),c&&(yield this.removeAccount(c.accountIdentifier))}});n.push({text:"Remove account",actionCallback:o})}const i=yield this.getPeer(),s=yield this.getActiveAccount();throw e.type===Ke.PermissionRequest&&(yield this.getActiveAccount())===void 0&&(this._initPromise=void 0,this.postMessageTransport=void 0,this.p2pTransport=void 0,yield this.setTransport(),yield this.setActivePeer()),this.events.emit(nf[e.type].error,{errorResponse:r,walletInfo:yield this.getWalletInfo(i,s),errorMessages:this.errorMessages},n).catch(o=>Mt.error("handleRequestError",o)),Yr.getError(r.errorType,r.errorData)}throw r})}notifySuccess(e,r){return Ie(this,void 0,void 0,function*(){this.events.emit(nf[e.type].success,r).catch(n=>console.warn(n))})}getWalletInfo(e,r){var n,i;return Ie(this,void 0,void 0,function*(){const s=r||(yield this.getActiveAccount()),o=e||(yield this.getPeer(s));let a;s&&(a=yield this.appMetadataManager.getAppMetadata(s.senderId));const c=o;a||(a={name:c.name,icon:c.icon});const l=(I,P)=>I&&P?I.toLowerCase()===P.toLowerCase():!1;let f,d;if(Va().find(I=>l(I.name,a?.name))?(f=Va().find(I=>l(I.name,a?.name)),d="mobile"):Nh().find(I=>l(I.name,a?.name))?(f=Nh().find(I=>l(I.name,a?.name)),d="web"):nu().find(I=>l(I.name,a?.name))?(f=nu().find(I=>l(I.name,a?.name)),d="desktop"):Ga().find(I=>l(I.name,a?.name))&&(f=Ga().find(I=>l(I.name,a?.name)),d="extension"),f){let I;return f.hasOwnProperty("links")?I=f.links[(n=s?.network.type)!==null&&n!==void 0?n:this.preferredNetwork]:f.hasOwnProperty("deepLink")&&(I=f.deepLink),{name:a.name,icon:(i=a.icon)!==null&&i!==void 0?i:f.logo,deeplink:I,type:d}}return a})}getPeer(e){var r,n,i,s;return Ie(this,void 0,void 0,function*(){let o;if(e){Mt.log("getPeer","We have an account",e);const a=(n=yield(r=this.postMessageTransport)===null||r===void 0?void 0:r.getPeers())!==null&&n!==void 0?n:[],c=(s=yield(i=this.p2pTransport)===null||i===void 0?void 0:i.getPeers())!==null&&s!==void 0?s:[],l=[...a,...c];Mt.log("getPeer","Found peers",l,e),o=l.find(f=>f.senderId===e.senderId),o||(o=l.find(f=>f.extensionId===e.origin.id))}else o=yield this._activePeer.promise,Mt.log("getPeer","Active peer",o);if(!o)throw new Error("No matching peer found.");return o})}makeRequest(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield Vi();if(console.time(n),Mt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Mt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(fe.LOCAL_RATE_LIMIT_REACHED).catch(f=>console.warn(f)),new Error("rate limit reached");if(!(yield this.checkPermissions(e.type)))throw this.events.emit(fe.NO_PERMISSIONS).catch(f=>console.warn(f)),new Error("No permissions to send this request to wallet!");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i=Object.assign({id:n,version:"2",senderId:yield Qo(yield this.beaconId)},e),s=new Jt;this.addOpenRequest(i.id,s);const o=yield new Js().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Mt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(f){throw this.events.emit(fe.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Er(),this.disconnect()})}]}),console.timeLog(n,"send error"),f}return console.timeLog(n,"sent"),this.events.emit(nf[e.type].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(f=>console.warn(f)),s.promise})}makeRequestV3(e){var r;return Ie(this,void 0,void 0,function*(){const n=yield Vi();if(console.time(n),Mt.log("makeRequest","starting"),yield this.init(),console.timeLog(n,"init done"),Mt.log("makeRequest","after init"),yield this.addRequestAndCheckIfRateLimited())throw this.events.emit(fe.LOCAL_RATE_LIMIT_REACHED).catch(d=>console.warn(d)),new Error("rate limit reached");if(!this.beaconId)throw yield this.sendInternalError("BeaconID not defined");const i={id:n,version:"3",senderId:yield Qo(yield this.beaconId),message:e},s=new Jt;this.addOpenRequest(i.id,s);const o=yield new Js().serialize(i),a=yield this.getActiveAccount(),c=yield this.getPeer(a),l=yield this.getWalletInfo(c,a);Mt.log("makeRequest","sending message",i),console.timeLog(n,"sending");try{yield(yield this.transport).send(o,c)}catch(d){throw this.events.emit(fe.INTERNAL_ERROR,{text:"Unable to send message. If this problem persists, please reset the connection and pair your wallet again.",buttons:[{text:"Reset Connection",actionCallback:()=>Ie(this,void 0,void 0,function*(){yield Er(),this.disconnect()})}]}),console.timeLog(n,"send error"),d}console.timeLog(n,"sent");const f=e.type;return this.events.emit(nf[f].sent,{walletInfo:Object.assign(Object.assign({},l),{name:(r=l.name)!==null&&r!==void 0?r:"Wallet"}),extraInfo:{resetCallback:()=>Ie(this,void 0,void 0,function*(){this.disconnect()})}}).catch(d=>console.warn(d)),s.promise})}disconnect(){return Ie(this,void 0,void 0,function*(){this.postMessageTransport=void 0,this.p2pTransport=void 0,yield Promise.all([this.clearActiveAccount(),(yield this.transport).disconnect()])})}addOpenRequest(e,r){Mt.log("addOpenRequest",this.name,`adding request ${e} and waiting for answer`),this.openRequests.set(e,r)}sendNotificationWithAccessToken(e){return Ie(this,void 0,void 0,function*(){const{url:r,recipient:n,title:i,body:s,payload:o,protocolIdentifier:a,accessToken:c}=e,l=new Date().toISOString(),f=yield this.keyPair,d=f.publicKey,I=Buffer.from(new Uint8Array([13,15,37,217])),P=$r.encode(Buffer.concat([I,Buffer.from(d)])),L=["Tezos Signed Message: ",n,i,s,l,o].join(" "),H=Gi(L),G="0501"+H.length.toString(16).padStart(8,"0")+H,V=yield OI(G,{secretKey:Buffer.from(f.secretKey)});return(yield Zf.post(`${r}/send`,{recipient:n,title:i,body:s,timestamp:l,payload:o,accessToken:c,protocolIdentifier:a,sender:{name:this.name,publicKey:P,signature:V}})).data})}}let Qi;const cP=(t,e)=>(Qi&&e&&(Qi.disconnect(),Qi=void 0),Qi||(Qi||(Qi=new aP(t)),Qi));function vi(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{l(n.next(f))}catch(d){o(d)}}function c(f){try{l(n.throw(f))}catch(d){o(d)}}function l(f){f.done?s(f.value):i(f.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}class nb extends Error{constructor(){super("You need to initialize BeaconWallet by calling beaconWallet.requestPermissions first"),this.name="BeaconWalletNotInitialized"}}class fP extends Error{constructor(e){super(`Required permissions scopes were not granted: ${e.join(",")}`),this.requiredScopes=e,this.name="MissingRequiredScopes"}}class uP{constructor(e){this.client=cP(e)}validateRequiredScopesOrFail(e,r){const n=new Set(r);for(const i of e)n.has(i)&&n.delete(i);if(n.size>0)throw new fP(Array.from(n))}requestPermissions(e){return vi(this,void 0,void 0,function*(){yield this.client.requestPermissions(e)})}getPKH(){return vi(this,void 0,void 0,function*(){const e=yield this.client.getActiveAccount();if(!e)throw new nb;return e.address})}mapTransferParamsToWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield zo(this.formatParameters(r)))})}mapIncreasePaidStorageWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Xo(this.formatParameters(r)))})}mapOriginateParamsToWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield $o(this.formatParameters(r)))})}mapDelegateParamsToWalletParams(e){return vi(this,void 0,void 0,function*(){let r;yield this.client.showPrepare();try{r=yield e()}catch(n){throw yield this.client.hideUI(),n}return this.removeDefaultParams(r,yield Wo(this.formatParameters(r)))})}formatParameters(e){return e.fee&&(e.fee=e.fee.toString()),e.storageLimit&&(e.storageLimit=e.storageLimit.toString()),e.gasLimit&&(e.gasLimit=e.gasLimit.toString()),e}removeDefaultParams(e,r){return e.fee||delete r.fee,e.storageLimit||delete r.storage_limit,e.gasLimit||delete r.gas_limit,r}sendOperations(e){return vi(this,void 0,void 0,function*(){const r=yield this.client.getActiveAccount();if(!r)throw new nb;const n=r.scopes;this.validateRequiredScopesOrFail(n,[_n.OPERATION_REQUEST]);const{transactionHash:i}=yield this.client.requestOperation({operationDetails:e});return i})}disconnect(){return vi(this,void 0,void 0,function*(){yield this.client.destroy()})}clearActiveAccount(){return vi(this,void 0,void 0,function*(){yield this.client.setActiveAccount()})}}function ib(t){let e,r=t[1]?t[3]?"Congratulations! Please don't forget to disconnect your wallet before you leave":t[2]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.",n,i,s;return{c(){e=ts("p"),n=So(r),rn(e,"class","textcenter font_8 svelte-vzr3x8")},m(o,a){Ur(o,e,a),ka(e,n),s=!0},p(o,a){(!s||a&14)&&r!==(r=o[1]?o[3]?"Congratulations! Please don't forget to disconnect your wallet before you leave":o[2]?"Your Visiblr portrait is ready! Let's reveal it now. ":"Connected! Now let's check if your Visiblr portrait is ready.":"Please connect your wallet.")&&bb(n,r)},i(o){s||(Co(()=>{s&&(i||(i=xf(e,op,{duration:500},!0)),i.run(1))}),s=!0)},o(o){i||(i=xf(e,op,{duration:500},!1)),i.run(0),s=!1},d(o){o&&xr(e),o&&i&&i.end()}}}function sb(t){let e=t[2],r,n,i=ib(t);return{c(){i.c(),r=gb()},m(s,o){i.m(s,o),Ur(s,r,o),n=!0},p(s,o){o&4&&au(e,e=s[2])?(wf(),us(i,1,1,ps),Af(),i=ib(s),i.c(),Jn(i,1),i.m(r.parentNode,r)):i.p(s,o)},i(s){n||(Jn(i),n=!0)},o(s){us(i),n=!1},d(s){s&&xr(r),i.d(s)}}}function ob(t){let e=t[3],r,n,i=sb(t);return{c(){i.c(),r=gb()},m(s,o){i.m(s,o),Ur(s,r,o),n=!0},p(s,o){o&8&&au(e,e=s[3])?(wf(),us(i,1,1,ps),Af(),i=sb(s),i.c(),Jn(i,1),i.m(r.parentNode,r)):i.p(s,o)},i(s){n||(Jn(i),n=!0)},o(s){us(i),n=!1},d(s){s&&xr(r),i.d(s)}}}function ab(t){let e,r,n,i;return{c(){e=ts("img"),rn(e,"id","image"),rn(e,"alt","visiblr portrait"),tp(e.src,r=t[0])||rn(e,"src",r),rn(e,"class","svelte-vzr3x8")},m(s,o){Ur(s,e,o),i=!0},p(s,o){(!i||o&1&&!tp(e.src,r=s[0]))&&rn(e,"src",r)},i(s){i||(Co(()=>{i&&(n||(n=xf(e,sp,{duration:6e3},!0)),n.run(1))}),i=!0)},o(s){n||(n=xf(e,sp,{duration:6e3},!1)),n.run(0),i=!1},d(s){s&&xr(e),s&&n&&n.end()}}}function lP(t){let e,r=t[1]?"Disconnect":"Connect Wallet",n,i,s,o,a,c,l,f,d,I,P,L=t[1],H,G,V,C,q,U=ob(t),K=t[3]&&ab(t);return{c(){e=ts("button"),n=So(r),i=Nc(),s=ts("button"),o=So("Check If Your Visiblr Portrait is Ready"),c=Nc(),l=ts("button"),f=So("Reveal Your Visiblr Portrait"),I=Nc(),P=ts("div"),U.c(),H=Nc(),G=ts("div"),K&&K.c(),rn(e,"class","font_8"),rn(s,"class","font_8"),s.disabled=a=!t[1],rn(l,"class","font_8"),l.disabled=d=!(t[2]&&t[1]),rn(P,"class","transition-container svelte-vzr3x8"),rn(G,"class","imagecenter transition-container svelte-vzr3x8"),rn(G,"id","imageframe")},m(j,y){Ur(j,e,y),ka(e,n),Ur(j,i,y),Ur(j,s,y),ka(s,o),Ur(j,c,y),Ur(j,l,y),ka(l,f),Ur(j,I,y),Ur(j,P,y),U.m(P,null),Ur(j,H,y),Ur(j,G,y),K&&K.m(G,null),V=!0,C||(q=[El(e,"click",function(){ou(t[1]?t[6]:t[5])&&(t[1]?t[6]:t[5]).apply(this,arguments)}),El(s,"click",t[4]),El(l,"click",t[7])],C=!0)},p(j,[y]){t=j,(!V||y&2)&&r!==(r=t[1]?"Disconnect":"Connect Wallet")&&bb(n,r),(!V||y&2&&a!==(a=!t[1]))&&(s.disabled=a),(!V||y&6&&d!==(d=!(t[2]&&t[1])))&&(l.disabled=d),y&2&&au(L,L=t[1])?(wf(),us(U,1,1,ps),Af(),U=ob(t),U.c(),Jn(U,1),U.m(P,null)):U.p(t,y),t[3]?K?(K.p(t,y),y&8&&Jn(K,1)):(K=ab(t),K.c(),Jn(K,1),K.m(G,null)):K&&(wf(),us(K,1,1,()=>{K=null}),Af())},i(j){V||(Jn(U),Jn(K),V=!0)},o(j){us(U),us(K),V=!1},d(j){j&&xr(e),j&&xr(i),j&&xr(s),j&&xr(c),j&&xr(l),j&&xr(I),j&&xr(P),U.d(j),j&&xr(H),j&&xr(G),K&&K.d(),C=!1,Ys(q)}}}const Iy="KT1MNbfFFqNqDXXdNJ3aUoiiHWazueLArVWB",dP="https://ipfs.io/ipfs/",hP="https://objkt.com/asset/",pP="https://data.objkt.com/v3/graphql",gP="https://mainnet.api.tez.ie";function bP(t){const r=t.token_holder[0].token.display_uri.replace(/^ipfs?\:\/\//i,"");return`${dP}${r}`}function vP(t){const e=t.token_holder[0].token.token_id;return`${hP}${Iy}/${e}`}function mP(t){return t.token_holder[0].token.name}async function yP(t){const{errors:e,data:r}=await EP(t,"MyQuery",{});return e?(console.error(e),e):(console.log(r),r)}async function EP(t,e,r){return await(await fetch(pP,{method:"POST",body:JSON.stringify({query:t,variables:r,operationName:e})})).json()}async function _P(t){return await t.getPKH()}function wP(t){return t==null||t.token_holder==null||t.token_holder.length==null||t.errors||t.token_holder.length===0?(console.log("Warning: no token detected"),!1):!0}function AP(t){return t.token_holder.length!=1?(console.log("Warning: multiple tokens detected"),!1):!0}function xP(t,e,r){const n=new sI(gP);let i,s="",o,a=!1,c=!1,l=!1;Yy(async()=>{const H={name:"Your Visiblr Portrait Reveal"};i=new uP(H)});async function f(){const H=await _P(i),G=await d(H,Iy,1);r(2,c=wP(G)&&AP(G))}async function d(H,G,V=1){const C=`
      query MyQuery {
        token_holder(
          where: {_and: {holder_address: {_eq: "${H}"}, token: {fa_contract: {_eq: "${G}"}}, quantity: {_eq: "${V}"}}}
        ) {
          quantity
          token {
            fa_contract
            token_id
            thumbnail_uri
            artifact_uri
            display_uri
            name
          }
        }
      }
    `;return o=o=await yP(C),o}async function I(){await i.requestPermissions(),n.setWalletProvider(i),r(1,a=!0)}async function P(){await i.client.clearActiveAccount(),r(1,a=!1)}async function L(){mP(o),vP(o);const H=bP(o);fetch(H).then(G=>{if(!G.ok)throw new Error(`HTTP error! Status: ${G.status}`);return G.blob()}).then(G=>{r(0,s=URL.createObjectURL(G))}),r(3,l=!0)}return[s,a,c,l,f,I,P,L]}class SP extends cE{constructor(e){super(),aE(this,e,xP,lP,au,{})}}new SP({target:document.getElementById("app")});export{wb as a,jE as b,Ip as c,kE as s,Cr as u};
